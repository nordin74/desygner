!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.object.keys.js");var o=r(e("../../../src/config/constants")),i=e("./facade/design/design"),s=e("./facade/editor/editor");t.exports=function(){var e={};return{toggle:t,initialize:function(){function e(e,n,r){var s=$("#"+(null==n?void 0:n.id))[0];s&&t(s,e,r);var a=e?"show":"hide";i.trigger("svg_loader.".concat(a),n,o.default.timeout.topLoader)}s.on("page.saving",(function(t){return e(!0,t)})),s.on("page.saved",(function(t){return e(!1,t)})),i.on("image.replace",(function(t){return e(!0,t)})),i.on("image.replace.skip",(function(t){return e(!1,t)})),i.on("image.create.optimize_resolution",(function(t){return e(!0,t)})),i.on("image.create.resize_external",(function(t){return e(!0,t)})),i.on("image.create.source.url",(function(t){return e(!1,t)})),i.on("image.create.optimus_resolution",(function(t){return e(!1,t)})),i.on("image.update.optimize_resolution",(function(t){return e(!0,t)})),i.on("image.update.resize_external",(function(t){return e(!0,t)})),i.on("image.update.source.url",(function(t){return e(!1,t)})),i.on("image.update.optimus_resolution",(function(t){return e(!1,t)})),i.on("background.update.updating_source",(function(t){return e(!0,t)})),i.on("background.update.source",(function(t){return e(!1,t)})),i.on("flipping_image",(function(t){return e(!0,t)})),i.on("flipped_image",(function(t){return e(!1,t)})),i.on("icon.update.fetch_content",(function(t){return e(!0,t)})),i.on("icon.update.content",(function(t){return e(!1,t)})),i.on("logo.update.fetch_content",(function(t){return e(!0,t)})),i.on("logo.update.content",(function(t){return e(!1,t)})),i.on("icon.update.optimize_resolution",(function(t){return e(!0,t)})),i.on("icon.update.resolution_optimized",(function(t){return e(!1,t)})),i.on("logo.update.optimize_resolution",(function(t){return e(!0,t)})),i.on("logo.update.resolution_optimized",(function(t){return e(!1,t)})),i.on("video.create.optimize_resolution",(function(t){return e(!0,t)})),i.on("video.create.resolution_optimized",(function(t){return e(!1,t)})),i.on("video.update.optimize_resolution",(function(t){return e(!0,t)})),i.on("video.update.resolution_optimized",(function(t){return e(!1,t)})),i.on("image.check_quality.start",(function(t){return e(!0,t)})),i.on("image.check_quality.end",(function(t){return e(!1,t)})),i.on("image.sstk_replace.start",(function(t){return e(!0,t)})),i.on("svg_element_loader.show",(function(t){return e(!0,t)})),i.on("svg_element_loader.hide",(function(t){return e(!1,t)})),i.on("translations.parent_template_preview.loading",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(void 0,[!0].concat(n,[6e4]))})),i.on("translations.parent_template_preview.loaded",(function(t){return e(!1,t)})),i.on("translations.parent_template_preview.error",(function(t){return e(!1,t)})),i.on("background.remove_background.start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(void 0,[!0].concat(n,[6e4]))})),i.on("background.remove_background.success",(function(t){return e(!1,t)})),i.on("background.remove_background.skip",(function(t){return e(!1,t)})),i.on("background.remove_background.error",(function(t){return e(!1,t)})),i.on("image.remove_background.start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(void 0,[!0].concat(n,[6e4]))})),i.on("image.remove_background.success",(function(t){return e(!1,t)})),i.on("image.remove_background.skip",(function(t){return e(!1,t)})),i.on("image.remove_background.error",(function(t){return e(!1,t)}))},show:function(e){t(e,!0)},hide:function(e){t(e,!1)},hideAll:function(){_.each(e,n)}};function t(r,o,i){var s=$(r),a=function(e){if(e.data("svg-loader"))return e.data("svg-loader");var t=e.attr("id"),n=$("#global-loader.".concat(t,"-loader"));return n.length?n:null}(s),l=$("#global-loader");if(i=i||15e3,o){if(!a)if(l.length){var c=s.attr("id");l.addClass("".concat(c,"-loader"))}else!function(){var t=s.attr("id");a=$('\n              <div id="global-loader" class="linear-progress-root" role="progressbar">\n                <div class="linear-progress-bar"></div>\n              </div>\n            ').addClass("".concat(t,"-loader")).prependTo("body"),s.data("svg-loader",a),e[t]=s}();setTimeout((function(){INKIVE.C.DEBUG&&console.warn("[Violation] 'SVGElementLoading' handler took 15s. Automatically hiding it. svgElement:",r),t(r,!1)}),i)}else n(s)}function n(t){e=_.omit(e,t.attr("id"));var n=t.attr("id");$("#global-loader").removeClass("".concat(n,"-loader")),t.removeData("svg-loader"),0===Object.keys(e).length&&$("#global-loader").remove()}}()},{"../../../src/config/constants":1090,"./facade/design/design":47,"./facade/editor/editor":91,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.object.keys.js":901,"core-js/modules/web.timers.js":966}],2:[function(e,t,n){"use strict";var r,o,i=["eventCategory","eventAction","eventLabel","eventValue","fieldsObject"];function s(e,t){if(!_.contains(i,t)&&e){if(!_.isFunction(e)){var n=r[t];e=function(){this.trackEvent(n)}}this[t]=_.partial(a,e,o.prototype[t])}}function a(e,t){var n=_.rest(arguments,2);e.apply(this,n),t.apply(this,n)}t.exports=function(e,t){o=t,r=e;var n={trackEvent:function(t){var n={hitType:"event"};_.each(i,(function(t){e[t]&&(n[t]=e[t])})),INKIVE.C.IS_DEV||"undefined"!=typeof ga&&ga("send",_.extend(n,t))}};return _.each(r,s,n),t.extend?t.extend(n):_.extend({},t,n)}},{}],3:[function(e,t,n){"use strict";var r;INKIVE.C.IS_DEV||window.addEventListener("error",(function(e){if(r!==t){var t=e.filename+" ["+e.lineno+"]: "+e.message;"function"==typeof ga&&ga("send","exception",{exDescription:t}),r=t}}),!1)},{}],4:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/web.timers.js");var r=e("../utils/humps"),o=e("./legacy-support");function i(){this.version=e("./version"),this.util=INKIVE.Helpers,_.bindAll(this,"propagate")}i.prototype=_.extend({},Backbone.Events),i.prototype.initialize=function(){o.supportsDesignFacade(this)&&function(){var t=e("../facade/design/design"),n=o.supportsCreateReturn(this);t.on("all",_.partial(this.propagate,"design")),this.design={set:t.set,create:function(){var e=t.create.apply(t,arguments);if(n)return e},call:function(){var e=t.handle.apply(t,arguments);if(!window.Android)return JSON.stringify(e);s.propagate("design","call",e)},get:function(e,n){var r=t.get.apply(t,arguments);if(s.version.isApp("webrand")||s.version.isApp("pdf")||!window.Android||!s.version.isLowerThan("2.2.6"))return window.Android?r:JSON.stringify(r);var o="get";s.version.isLowerThan("1.1.3")||(o+="."+e,o+=n?"."+n:""),s.propagate("design",o,r)}}}.call(this),o.supportsEditorFacade(this)&&function(){var t=e("../utils/advice"),n=e("../facade/editor/editor"),r=e("../factory/images");t.on("all",_.partial(this.propagate,"editor.advice")),n.on("all",_.partial(this.propagate,"editor")),this.editor={setImagesData:_.bind(r.setImagesData,r),call:function(){var e=n.handle.apply(n,arguments);if(!window.Android)return JSON.stringify(e);s.propagate("editor","call",e)},get:function(e,t){var r=n.get.apply(n,arguments);if(s.version.isApp("webrand")||s.version.isApp("pdf")||!window.Android||!s.version.isLowerThan("2.2.6"))return window.Android?r:JSON.stringify(r);var o="get";(s.version.isApp("webrand")||s.version.isApp("pdf")||!s.version.isLowerThan("1.1.3"))&&(o+="."+e,o+=t?"."+t:""),s.propagate("editor",o,r)}}}.call(this),o.supportsProjectFacade(this)&&function(){var t=e("../facade/project/project");t.on("all",_.partial(this.propagate,"project")),this.project={call:t.handle,get:function(){return t.get.apply(t,arguments)}}}.call(this),o.supportsRestrictionsFacade(this)&&function(){var t=e("../facade/restrictions/restrictions");this.permissions={getDefaults:function(){return window.Android&&(s.version.isApp("webrand")||s.version.isApp("pdf")||!s.version.isLowerThan("2.2.6"))?t.getAllDefaultPermissions():JSON.stringify(t.getAllDefaultPermissions())},getByElement:function(e){return window.Android&&(s.version.isApp("webrand")||s.version.isApp("pdf")||!s.version.isLowerThan("2.2.6"))?t.getAllElementPermissions(e):JSON.stringify(t.getAllElementPermissions(e))}}}.call(this),function(){this.animation={call:function(e,t,n){var r=e+(t?t.charAt(0).toUpperCase()+t.slice(1):""),o=new CustomEvent("Animation.".concat(r),{detail:n||{}});document.dispatchEvent(o)}}}.call(this),function(){var t=this.propagate,n=e("../factory/shapes");this.factories={shapes:{get:function(){n.get.apply(n,arguments).then(_.partial(t,"factory","shapes_data"))},getCategories:function(){n.getCategories().then(_.partial(t,"factory","shapes_categories"))}}}}.call(this),function(){var t=e("./support.json"),n={element:{},editor:{}};window.Android?(r(t.editor,"editor"),r(t.element,"element"),this.getSupported=function(){s.propagate("supported","get",JSON.stringify({editor:n.editor,element:n.element,fonts:INKIVE.C.FONT_LIST}))}):this.supported=JSON.stringify(_.extend(t,{fonts:INKIVE.C.FONT_LIST}));function r(e,t,o){_.isObject(e)?_.each(e,(function(e,n){r(e,t,o?o+"."+n:n)})):n[t][o]=e}}.call(this),this.getFontUrl=INKIVE.FontsFactory.getFontUrl,o.events(this)},i.prototype.propagate=function(e,t,n){this.callBoth(e+"."+t,n)},i.prototype.callBoth=function(e,t){return!!INKIVE.C.IS_MOBILE_APP&&(window.Android&&a(e,t),window.Android||l(e,t),!0)},i.prototype.callIOS=function(e,t){var n=INKIVE.C.IS_MOBILE_APP&&!window.Android;return n&&l(e,t),n},i.prototype.callAndroid=function(e,t){var n=INKIVE.C.IS_MOBILE_APP&&window.Android;return n&&a(e,t),n};var s=new i;function a(e,t){var n=e.match(/(\w+)\.get\.svg_(\d+)/)?e:r.camelize(e);n=o.androidMethodName(n),t=o.androidParameters(_.extend({cmd:n},{params:t})),s.version.isApp("webrand")||s.version.isApp("pdf")||!s.version.isLowerThan("1.0.3")?Android.trigger(JSON.stringify(t)):Android[n].apply(window.Android,t)}function l(e,t){var n=e.match(/(\w+)\.get\.svg_(\d+)/)?e:r.camelize(e);n=o.iosMethodName(n),c.Trigger(o.iosParameters(_.extend({cmd:n},{params:t})))}t.exports=s;var c={Trigger:function(e){if(window.webkit&&window.webkit.messageHandlers)window.webkit.messageHandlers.main.postMessage(e);else{var t=$('<iframe src="inkive://www.awesome.com/notyourbusiness.php?event='+encodeURIComponent(JSON.stringify(e))+'" width="0" height="0" border="0" style="display:none;" ></iframe>').appendTo("body");setTimeout((function(){t.remove()}),1e3)}}}},{"../facade/design/design":47,"../facade/editor/editor":91,"../facade/project/project":113,"../facade/restrictions/restrictions":118,"../factory/images":127,"../factory/shapes":157,"../utils/advice":607,"../utils/humps":615,"./legacy-support":6,"./support.json":7,"./version":8,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/web.timers.js":966}],5:[function(e,t,n){"use strict";var r,o;function i(e,t){if(!(t.match(/Check$/)||t.match(/CheckOnce$/))){var n=r[t+"Check"],i=r[t+"CheckOnce"];i?i.call(this)&&(this[t]=e):this[t]=n?_.partial(s,n,e,o.prototype[t]):e}}function s(e,t,n){var r=e.call(this);r&&t.apply(this,_.rest(arguments,3)),r||n&&n.apply(this,_.rest(arguments,3))}e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),t.exports=function(t,n){if(INKIVE.C.IS_MOBILE_APP){o=n,r=t;var s={appBridge:e("./bridge")};return _.each(r,i,s),n.extend?n.extend(s):_.extend({},n,s)}return n}},{"./bridge":4,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],6:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js");var r={desygner:[],webrand:[]},o={webrand:[],desygner:[{funcName:"sendFacebookCredentials",oldName:"auth_facebook",usedBefore:"1.1.2"},{funcName:"sendInstagramCredentials",oldName:"auth_instagram",usedBefore:"1.1.2"},{funcName:"editorLoaded",oldName:"editor_loaded",usedBefore:"1.1.2"},{funcName:"showTeam",oldName:"show_team",usedBefore:"1.1.2"},{funcName:"catchFile",oldName:"catch_file",usedBefore:"1.1.2"},{funcName:"closeEditor",oldName:"close_overlay",usedBefore:"1.1.2"},{funcName:"shareWithFb",oldName:"share_with_fb",usedBefore:"1.1.2"},{funcName:"design.template.update",oldName:"design.template.updated",usedBefore:"1.2"},{funcName:"design.template.update.designed",oldName:"design.template.updated.designed",usedBefore:"1.2"}]},i={webrand:[],desygner:[{funcName:"openInNewWindow",usedBefore:"1.1.2",map:function(e){return{cmd:e.cmd,url:e.params.url}}},{funcName:"editor_loaded",usedBefore:"1.1.2",map:function(e){return{cmd:e.cmd,book_id:e.params.book_id}}}]},s={webrand:[],desygner:[{funcName:"catchFile",usedBefore:"1.0.3",map:function(e){return[e.params.url]}},{funcName:"photoUpload",usedBefore:"1.0.3",map:function(e){return[e.params.size_name]}},{funcName:"editorLoaded",usedBefore:"1.0.3",map:function(e){return[e.params.book_id]}},{funcName:"showTeam",usedBefore:"1.0.3",map:function(e){return[e.params.x,e.params.y]}}]};function a(t,n){var r=e("./bridge"),o=_.where(t[r.version.getApp()],{funcName:n});return _.any(o,(function(e){if(r.version.isLowerThan(e.usedBefore))return console.log("We will use: "+e.oldName),n=e.oldName,!0})),n}function l(t,n){var r=e("./bridge"),o=_.where(t[r.version.getApp()],{funcName:n.cmd});return _.any(o,(function(e){if(r.version.isLowerThan(e.usedBefore))return n=e.map(n),!0})),n}t.exports={androidMethodName:_.partial(a,r),iosMethodName:_.partial(a,o),androidParameters:_.partial(l,s),iosParameters:_.partial(l,i),supportsCreateReturn:function(e){return window.Android&&!e.version.isLowerThan("2.2.1")||!window.Android||e.version.isApp("webrand")||e.version.isApp("pdf")},supportsRestrictionsFacade:function(e){return window.Android&&!e.version.isLowerThan("2.2")||!window.Android&&!e.version.isLowerThan("2.3")||e.version.isApp("webrand")||e.version.isApp("pdf")},supportsDesignFacade:function(e){return window.Android&&e.version.isGreaterThan("1.0.2")||!window.Android&&e.version.isGreaterThan("1.1.1")||e.version.isApp("webrand")||e.version.isApp("pdf")},supportsEditorFacade:function(e){return window.Android&&!e.version.isLowerThan("1.1")||!window.Android&&!e.version.isLowerThan("1.2")||e.version.isApp("webrand")||e.version.isApp("pdf")},supportsProjectFacade:function(e){return window.Android&&!e.version.isLowerThan("1.1")||!window.Android&&!e.version.isLowerThan("1.2")||e.version.isApp("webrand")||e.version.isApp("pdf")},events:function(e){var t=$("#ik-editor");e.on=_.bind(t.on,t),e.off=_.bind(t.off,t),e.once=_.bind(t.one,t),e.trigger=_.bind(t.trigger,t)}}},{"./bridge":4,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883}],7:[function(e,t,n){t.exports={editor:{layers:!0},element:{default:{duplicate:!0,remove:!0,unlock:!0,lock:!0,deselect:!0,rotate:!0,opacity:!0,resize:!0,send:{forward:!0,backward:!0}},text:{content:!0,fontfamily:!0,fontsize:!0,color:!0,bold:!0,italic:!0,underline:!0,bullets:!0,align:{left:!0,center:!0,right:!0,full:!0},spacing:{line:!0,word:!0,letter:!0},link:!1,unlink:!1},image:{crop:!0,filter:!1,lock_image:!1,unlock_image:!1,link:!1,unlink:!1},sticker:{fill:{color:!0},stroke:{color:!1,width:!1},flip:{horizontal:!0,vertical:!0},link:!1,unlink:!1},group:{ungroup:!0,link:!1,unlink:!1},multiselect:{duplicate:!0,remove:!0,group:!0},shape:{fill:{color:!0},stroke:{color:!0,width:!0},flip:{horizontal:!0,vertical:!0},image_box:!0,link:!1,unlink:!1}}}},{}],8:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.parse-int.js");var o,i,s=r(e("@babel/runtime/helpers/typeof")),a=e("../utils/cookie-storage");function l(e){if(o=o||a.get("ver"),(0,s.default)(e)+(0,s.default)(o)!="stringstring")return!1;for(var t=e.split("."),n=o.split("."),r=0,i=Math.max(t.length,n.length);r<i;r++){if(t[r]&&!n[r]&&parseInt(t[r])>0||parseInt(t[r])>parseInt(n[r]))return 1;if(n[r]&&!t[r]&&parseInt(n[r])>0||parseInt(t[r])<parseInt(n[r]))return-1}return 0}t.exports={isEqual:function(e){return 0===l(e)},isLowerThan:function(e){return l(e)>0},isGreaterThan:function(e){return l(e)<0},get:function(){return o=o||a.get("ver")},getApp:function(){return i=i||a.get("app_name")||"desygner"},isApp:function(e){return e===(i=i||a.get("app_name")||"desygner")}}},{"../utils/cookie-storage":612,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],9:[function(e,t,n){"use strict";INKIVE.C.UPLOAD_SERVER="https://s3.amazonaws.com/virginia.inkive.com",INKIVE.C.CTRL=INKIVE.C.BASE_URL+"editor/",INKIVE.C.AUTO_SAVE_INTERVAL=3e5,INKIVE.C.EMBED={W2H:.707070707070707,DefaultWidth:290,MaxWidth:1200},INKIVE.C.EMBED.MaxHeight=Math.round(INKIVE.C.EMBED.MaxWidth*INKIVE.C.EMBED.W2H),INKIVE.C.EMBED.DefaultHeight=Math.round(INKIVE.C.EMBED.DefaultWidth*INKIVE.C.EMBED.W2H),INKIVE.C.Timeout={imageCheck:18e4},INKIVE.C.Status={success:0,error:1,timeout:10},INKIVE.C.BOOK_TYPE={DESIGN:"0",LOGO:"1",TEMPLATE:"2",RESTRICTED_DESIGN:"3",DESYGNER_DESIGN:"4"},INKIVE.C.USE_FALLBACK_UPLOAD=!0,INKIVE.C.DEFAULT_FINEUPLOADER={maxConnections:3,uploaderType:"basic",signature:{endpoint:INKIVE.C.BASE_URL+"upload"},iframeSupport:{localBlankPagePath:INKIVE.C.BASE_URL+"assets/blank.html"},chunking:{enabled:!1},resume:{enabled:!0},validation:{sizeLimit:15e7},messages:{},request:{endpoint:INKIVE.C.UPLOAD_SERVER,accessKey:INKIVE.C.UPLOAD_KEY,forceMultipart:!1},uploadSuccess:{endpoint:INKIVE.C.BASE_URL+"upload/successasync",params:{type:"editor",scrapbookId:INKIVE.C.BOOK?INKIVE.C.BOOK.id:null}}},INKIVE.C.VersionUploadSize={o:0,l:3500,m:1800,s:600},INKIVE.C.VersionThumbSize={o:1200,l:1024,m:800,s:600},INKIVE.C.DefaultColors=["#FFFFFF","#AAAAAA","#555555","#000","none","#D42929","#00AEEF","#00A651","#F5EB33"],INKIVE.C.THUMB_NOCOVER="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABMCAYAAABqFkmCAAACKklEQVR4Xu2bUXJEUBREx9pYtjXZgkQSU0qhH4N0qzNfmbnjaue4z5uPVF3X9S9eEQQqZEV4+gmJrBxXyApyhSxkJREIysozC1lBBIKiMlnICiIQFJXJQlYQgaCoTBaygggERWWykBVEICgqk4WsIAJBUZksZAURCIrKZCEriEBQVCYLWUEEgqIyWcgKIhAUlclCVhCBoKhMFrKCCARFZbKQFUQgKOrlk9W27RtH0zTvv8fPp58d5TY9x9jjjL5H81x1XLysJeln3ghXgT/S91ZZQ8Dxjj8D6Bk9jkD7r2OsZM2XM7WU7ZG11XveZ+390hI7fLeqqlff//63r8r8iejbZA0XMYVQCmjr4ktl7T3XkZxXixr6I+sbwpbMEtHDZNV1/cnQFB17q6wh0dpypKAsXc1Zk1WSa37+6bMXWX9b/juWwRJZaznGZ9YjJ2sOZm13eHRqpv339i75GbC0Ajx2stZkbd3dakEv+VFcstNcu0HUTvIxshRo6uUELt9glEfhm4oAshQhozqyjGSoKMhShIzqyDKSoaIgSxEyqiPLSIaKgixFyKiOLCMZKgqyFCGjOrKMZKgoyFKEjOrIMpKhoiBLETKqI8tIhoqCLEXIqI4sIxkqCrIUIaM6soxkqCjIUoSM6sgykqGiIEsRMqojy0iGioIsRciojiwjGSoKshQhozqyjGSoKMhShIzqyDKSoaIgSxEyqiPLSIaKgixFyKiOLCMZKsoXOIgiF3P82hcAAAAASUVORK5CYII=",INKIVE.C.FLIP_IMAGE={HORIZONTAL:"image-flip-h",VERTICAL:"image-flip-v"},INKIVE.C.LOCALE_SUBSETS=[{locales:[],name:"default"},{locales:["ar"],name:"arabic"},{locales:["bn"],name:"bengali"},{locales:["zh"],name:"chinese"},{locales:["ru","az","be","bg","mk","kz","mn","sr","tt","uk","uz","ka"],name:"cyrillic"},{locales:["ne"],name:"devanagari"},{locales:["el"],name:"greek"},{locales:["gu"],name:"gujarati"},{locales:["pa"],name:"gurmukhi"},{locales:["he"],name:"hebrew"},{locales:["kn"],name:"kannada"},{locales:["km"],name:"khmer"},{locales:["ko"],name:"korean"},{locales:["ja"],name:"japanese"},{locales:["es","pt","de","fr","it","nl"],name:"latin-ext"},{locales:["ml"],name:"malayalam"},{locales:["my"],name:"myanmar"},{locales:["or"],name:"oriya"},{locales:["si"],name:"sinhala"},{locales:["ta"],name:"tamil"},{locales:["te"],name:"telugu"},{locales:["th"],name:"thai"},{locales:["vi"],name:"vietnamese"}],INKIVE.C.SHUTTERSTOCK="sstk",INKIVE.C.DPI=96,INKIVE.C.uppy_companion_url="https://uploader.webrand.com"},{}],10:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.function.bind.js");function r(){Object.defineProperty(window,"indexedDB",{value:window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(window,"IDBTransaction",{value:window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(window,"IDBKeyRange",{value:window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,configurable:!0,enumerable:!0,writable:!0})}t.exports=r,r.prototype.initialize=function(){return _.bindAll(this,"openDB","deleteDB","getVersion","storeVersion","deleteVersion","isLastDBVersion","cleanOldVersions","iterateCurrentPageVersions"),this},r.prototype.openDB=function(){var e=$.Deferred(),t=window.indexedDB.open("history");return t.onsuccess=_.bind((function(){this.db=t.result,this.db.onerror=function(e){console.error("Database error: "+e.target.errorCode)},e.resolve()}),this),t.onupgradeneeded=_.bind((function(e){var t=e.target.result.createObjectStore("versions",{keyPath:"version",autoIncrement:!0});t.createIndex("parent","parent",{unique:!1}),t.createIndex("project","project",{unique:!1}),t.createIndex("page","page",{unique:!1}),t.createIndex("timestamp","timestamp",{unique:!1})}),this),e.promise()},r.prototype.deleteDB=function(){var e=$.Deferred(),t=indexedDB.deleteDatabase("history");try{this.db.close()}catch(e){}return t.onsuccess=_.bind(e.resolve,e),t.onerror=_.bind(e.reject,e),t.onblocked=_.bind(e.rejectWith,e,"Couldn't delete database due to the operation being blocked"),e.promise()},r.prototype.cleanOldVersions=function(){var e=$.Deferred(),t=moment(),n=this._getDBRecordStore();return n.openCursor().onsuccess=_.bind((function(r){var o=r.target.result,i=o&&o.value;o?!i.timestamp||moment(i.timestamp).add(60,"minutes")<t?this.deleteVersion(i.version,n).then(_.bind(o.continue,o)):o.continue():e.resolve()}),this),e.promise()},r.prototype.deleteVersion=function(e,t){t=t||this._getDBRecordStore();var n=$.Deferred(),r=t.delete(e);return r.onsuccess=function(e){n.resolve()},r.onerror=function(e){INKIVE.C.IS_DEV&&console.error(e.target.errorCode),n.rejectWith(e.target.errorCode)},n.promise()},r.prototype.storeVersion=function(e){var t=$.Deferred(),n=this._getDBRecordStore().add(e);return n.onsuccess=_.bind((function(e){t.resolve(n.result)}),this),t.promise()},r.prototype.getVersion=function(e){var t=$.Deferred();return this._getDBRecordStore().get(e).onsuccess=function(e){e.target.result&&t.resolve(INKIVE.Helpers.imagesSanitize.base64Load(e.target.result.svg)),e.target.result||t.reject()},t.promise()},r.prototype.iterateCurrentPageVersions=function(e){var t=this._getDBRecordStore().index("project"),n=IDBKeyRange.only(INKIVE.C.BOOK.encodedId);t.openCursor(n).onsuccess=function(t){var n=t.target.result,r=n&&n.value,o=n&&r.page!==INKIVE.Tool._current_page_number;o||e(n),o&&n.continue()}},r.prototype.isLastDBVersion=function(){return!0},r.prototype._getDBRecordStore=function(){var e=this.db.transaction(["versions"],"readwrite");return e.onerror=function(){console.error("DB transaction error",arguments)},e.objectStore("versions")}},{"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.define-property.js":895}],11:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/helpers/toConsumableArray"));function i(e){var t=document.createElement("div");return t.innerHTML=e.replaceAll(/>[\t\n\s]+<(?!\/tspan)/g,"><"),t}function s(e){var t;do{t=!1,e.childNodes.forEach((function(n){n.nodeType===Node.TEXT_NODE&&(e.removeChild(n),t=!0)}))}while(t)}function a(e,t){e.childNodes.forEach((function(e){return e.nodeType===Node.TEXT_NODE&&t.prepend(e)}))}function l(e,t){var n=[];return["id","xlink:href","href"].forEach((function(r){(function(e,t,n){var r=e.getAttribute(n);return r&&r===t.getAttribute(n)})(e,t,r)&&n.push(r)})),(e.classList.contains("background")||t.classList.contains("background"))&&n.push("style"),n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id"],n=[];e.attributes.forEach((function(e){t.includes(e.name)||n.push(e.name)})),n.forEach((function(t){return e.removeAttribute(t)}))}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id"];e.attributes.forEach((function(e){n.includes(e.name)||("xlink:href"===e.name||"href"===e.name?t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.value):t.setAttribute(e.name,e.value))}))}function d(e,t){for(var n=0;n<t.children.length;n++)t.children[n].setAttribute("data-useless","true");s(t);for(var r=0;r<e.children.length;r++){var o=e.children[r],i=t.children[r];i?p(o,i):t.appendChild(o.cloneNode(!0))}function p(e,n){if(n.tagName===e.tagName){var r=l(n,e);c(n,r),u(e,n,r),s(n),e.childNodes.length>0&&d(e,n),a(e,n)}else t.replaceChild(e.cloneNode(!0),n)}a(e,t),function(e){var t;do{t=!1,e.children.forEach((function(n){n.getAttribute("data-useless")&&(e.removeChild(n),t=!0)}))}while(t)}(t)}function p(e,t){if(!t)return e;var n=e;return t.split("/").forEach((function(e){if(n){var t=e,r=0,i=e.match(/(.+)\[@id='(.+)'\]/);i&&(t=i[1]+"#"+i[2]);var s=e.match(/(.+)\[(\d+)\]/);if(s&&(t=s[1],r=parseInt(s[2])-1),n)if(0===r){for(var a=n.querySelectorAll(t),l=n.querySelector(t),c=!1,u=0;u<a.length;u++)if(a[u].parentElement.isEqualNode(n)){n=a[u],c=!0;break}c||(n=l)}else{var d=0,p=n.querySelectorAll(t),h=(0,o.default)(n.children);n=null;for(var m=0;m<p.length;m++)if(h.includes(p[m])){if(d===r){n=p[m];break}d++}}}})),n}e("core-js/modules/esnext.string.replace-all.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.string.replace.js");var h={stringToDom:i,compareHistorySnapshots:function(e){var t=i(INKIVE.EditorFacade.editor.getSvgString()),n=INKIVE.DomCompareTools.compare(e,t);return n._diff=n._diff.filter((function(e){var t=e.message.includes("xmlns:xlink"),n=e.message.includes("style")||e.message.includes("class")||e.message.includes("data-bleed");return!("DIV/svg"===e.node&&(t||n))})),INKIVE.DomCompareTools.groupingReporter.getDifferences(n)},rollbackChange:function(e,t){var n=p(document,t.replace("DIV/svg","#svgcontent")),r=p(e,t.replace("DIV/svg","svg"));if(n&&r&&n.tagName&&n.tagName===r.tagName){if("svg"===n.tagName){var o=r.querySelectorAll("defs"),i=n.querySelectorAll("defs");if(o.length===i.length)for(var s=0;s<o.length;s++)d(o[s],i[s]);d(r.querySelector("g.main"),n.querySelector("g.main")),r=r.querySelector("g.background"),n=n.querySelector("g.background")}var a=l(n,r);if(c(n,a),u(r,n,a),n.parentElement.classList.contains("video"))u(r,n.parentElement.querySelector("foreignObject"),a);d(r,n)}}};n.default=h},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/esnext.string.replace-all.js":963,"core-js/modules/web.dom-collections.for-each.js":964}],12:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.map.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.string.starts-with.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.date.to-string.js");var i,s=r(e("./history-tools")),a=e("./dbDriver"),l=!1,c=!1,u={default:e("./processors/default"),"design.sticker.create":e("./processors/sticker-create"),"design.image.update":e("./processors/image-update"),"design.logo.update":e("./processors/logo-update"),"design.icon.update":e("./processors/logo-update"),"design.text.update":e("./processors/text-update"),resize:e("./processors/crop-exception")};function d(){}d.prototype=_.extend({},Backbone.Events),d.prototype.initialize=function(e){function t(){this.initialized=!0,this._pushLocalVersion(e)}this.initialized||this.initializing||(this.initializing=!0,i={},this.processVersion=function(e){var t=INKIVE.Tool.getInstance().editor.canvas,n=t.getZoom(),r=$("#workarea"),i=r.scrollTop(),a=r.scrollLeft();c=!1;var l=INKIVE.EditorFacade.canvas.getSelectedElems().map((function(e){return e.id}));INKIVE.EditorFacade.canvas.clearSelection(),"table-edit"===INKIVE.EditorFacade.canvas.getMode()&&INKIVE.Table.endTableEditingMode(),INKIVE.EditorFacade.canvas.setMode("select");for(var u=s.default.stringToDom(e),d=Object.keys(s.default.compareHistorySnapshots(u)).reduce((function(e,t){var n=t.split("/").length;return[].concat((0,o.default)(e),[{changePath:t,depth:n}])}),[]).sort((function(e,t){return e.depth-t.depth})),p=0;p<d.length;p++){for(var h=!1,m=0;m<p;m++)if(d[p].changePath.startsWith(d[m].changePath)){h=!0;break}h||s.default.rollbackChange(u,d[p].changePath)}t.setZoom(n),r.scrollLeft(a),r.scrollTop(i),svgedit.transformlist.resetListMap(),INKIVE.EditorFacade.canvas.selectOnly(l.map((function(e){return document.querySelector("#".concat(e))})).filter(Boolean));var f=document.querySelector("#svgcontent g.main"),g=document.querySelector("#svgroot");INKIVE.Helpers.imagesSanitize.postLoadImagesSanitize(f),INKIVE.Helpers.imagesSanitize.postLoadBackgroundSanitize(g),INKIVE.Text._cache={}},_.bindAll(this,"undo","redo","reload","onChange","_onError","_addVersionHistory","_triggerDefaultEvent"),this.driver=new a,this.driver.initialize().openDB().then(_.bind((function(){var e=this.driver.isLastDBVersion();e&&this.driver.cleanOldVersions().then(_.bind(t,this)),e||this.driver.deleteDB().then(this.driver.openDB).then(_.bind(t,this))}),this)))},d.prototype._triggerDefaultEvent=function(e){_.size(i)&&this.trigger(e,{current:this.currentVersion,history:i,isEnabled:l})},d.prototype.reload=function(e){this.initialized&&(i={},this._loadStoredVersions(e).then(_.bind((function(){_.size(i)?this._triggerDefaultEvent("reload"):(this.currentVersion=void 0,this._pushLocalVersion(e).then(_.partial(this._triggerDefaultEvent,"reload")))}),this)))},d.prototype.onChange=function(e,t,n){if(l&&this.initialized)try{t=t||{},INKIVE.hasEditorUnsavedChanges=!t.is_initial_load;var r=u[e]?e:"default";u[r].call(this,e,t,n).then(_.partial(this._triggerDefaultEvent,"change"),$.noop)}catch(e){console.error(e),_.defer(this._onError)}},d.prototype.getVersion=function(e){return this.driver.getVersion(e).then(_.bind((function(t){var n=t.replace(/"/g,'\\"').replace(/\n/g," ");this.trigger(e,n)}),this)),this.driver.getVersion(e)},d.prototype.getCurrentId=function(){return this.currentVersion},d.prototype.undo=function(){l&&!c&&this.currentVersion&&i[this.currentVersion]&&i[this.currentVersion].parent&&(c=!0,this.currentVersion=i[this.currentVersion].parent,this.driver.getVersion(this.currentVersion).then(this.processVersion,this._onError),this._triggerDefaultEvent("undo"))},d.prototype.redo=function(e){l&&!c&&this.currentVersion&&i[this.currentVersion]&&i[this.currentVersion].children.length&&(c=!0,this.currentVersion=i[this.currentVersion].children[0],this.driver.getVersion(this.currentVersion).then(this.processVersion,this._onError),this._triggerDefaultEvent("redo"))},d.prototype.restore=function(e){this.processVersion(e),this._pushLocalVersion(e)},d.prototype._pushLocalVersion=function(e){var t=$.Deferred(),n=this.currentVersion;return this.driver.storeVersion({svg:INKIVE.Helpers.imagesSanitize.base64Sanitize(e),timestamp:new Date,parent:n,project:INKIVE.C.BOOK.encodedId,page:INKIVE.Tool._current_page_number}).then(_.bind((function(e){this._addVersionHistory(e,n),t.resolve()}),this)),t.promise()},d.prototype._loadStoredVersions=function(e){var t=$.Deferred(),n={};return this.currentVersion=-1,this.driver.iterateCurrentPageVersions(_.bind((function(e){e?(r.call(this,e.value),e.continue()):o.call(this)}),this)),t.promise();function r(t){n[t.version]={version:t.version,parent:t.parent,children:[]},this.currentVersion<t.version&&INKIVE.Helpers.areEqual(e,t.svg)&&(this.currentVersion=t.version)}function o(){this.currentVersion>-1&&(i=n,_.each(i,(function(e){void 0!==e.parent&&i[e.parent]&&(i[e.parent].children=[e.version])}),this)),t.resolve()}},d.prototype._addVersionHistory=function(e,t){if(void 0!==t){if(!i[t])return void console.warn("Current version not found");i[t].children=[e]}i[e]={version:e,parent:t,children:[]},this.currentVersion=e},d.prototype._onError=function(e){l=!1,c=!1,this._triggerDefaultEvent("error"),this.driver.deleteDB()},d.prototype.isSystemEnabled=function(){return l},d.prototype.enableSystem=function(){l=!0},t.exports=new d},{"./dbDriver":10,"./history-tools":11,"./processors/crop-exception":13,"./processors/default":14,"./processors/image-update":15,"./processors/logo-update":16,"./processors/sticker-create":17,"./processors/text-update":18,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.starts-with.js":927}],13:[function(e,t,n){"use strict";var r=e("./default");t.exports=function(e,t){var n=!_.all(t.elements,(function(e){return $(e).is(".layoutClipperImage")}));if(!n){var o=$.Deferred();return o.reject(),o.promise()}return r.apply(this,arguments)}},{"./default":14}],14:[function(e,t,n){"use strict";t.exports=function(e,t,n){return this._pushLocalVersion(n)}},{}],15:[function(e,t,n){"use strict";var r=e("./default");t.exports=function(e,t){var n=!t.source||!t.source.url||!1!==t.source.smart_load;if(!n){var o=$.Deferred();return o.reject(),o.promise()}return r.apply(this,arguments)}},{"./default":14}],16:[function(e,t,n){"use strict";var r=e("./default");t.exports=function(e,t){var n=!t.thumb_src||!1!==t.smart_load;if(!n){var o=$.Deferred();return o.reject(),o.promise()}return r.apply(this,arguments)}},{"./default":14}],17:[function(e,t,n){"use strict";var r=e("./default");t.exports=function(e,t){var n=$("#"+t.id);if(n.is("image")){var o=$.Deferred();return o.reject(),o.promise()}return r.apply(this,arguments)}},{"./default":14}],18:[function(e,t,n){"use strict";var r=e("./default");t.exports=function(e,t){return INKIVE.Text._cache={},r.apply(this,arguments)}},{"./default":14}],19:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),t.exports=function(){$(document).ajaxError((function(e,t,n){var r=t&&t.statusText,o=n.url;!INKIVE.C.IS_MOBILE_APP&&o.match(/(\/api\/|\/updateSettings)/)&&o.match(/^((?!\/errortrack\/).)*$/)&&_.contains(["Internal Server Error","Permission is not granted","Forbidden"],r)&&(INKIVE.Modal.togglePageLoader(!1),INKIVE.Helpers.displayAccessModal())}))}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],20:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");t.exports=function(){if(!function(){var e=navigator.userAgent;if(e.includes("Firefox")||e.includes("Chrome")||e.includes("Safari")||e.includes("AppleWebKit"))return!0}())throw new Error('<h1>Oops...</h1>\n<h2>This browser is not supported.</h2>\n<h3 style="text-align: center;">But don’t worry, there is an easy fix. All you have to do is to click on one of the icons below and follow the instructions.</h3>\n<h2 class="bottom"><a title="Use Safari" class="browser-icon browser-safari" href="http://www.apple.com/safari/"></a>&nbsp;&nbsp;<a title="Download Firefox" class="browser-icon browser-firefox" href="https://www.mozilla.org/firefox"></a>&nbsp;&nbsp;<a title="Download Chrome" class="browser-icon browser-chrome" href="https://www.google.com/chrome"></a></h2>')}},{"core-js/modules/es.array.includes.js":864,"core-js/modules/es.string.includes.js":915}],21:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js");var i,s,a,l=r(e("@babel/runtime/helpers/asyncToGenerator")),c=r(e("../modules/background-removal"));function u(){s.initEditor(),$("#ruler-vertical, #ruler-horizontal").find("g").empty(),INKIVE.EditorFacade.handle("zoom","fit"),i.editor.canvas.runExtensions("browserResize",{}),i.resize()}function d(){INKIVE.EditorFacade.handle("page","move_to",{page_number:INKIVE.page,quiet:!0}).then((function(){i.inkiveLoader(!1),i.show();var e=INKIVE.RestrictionsFacade.hasAddOnAndFeature("white_label","hide_restrictions_overview");(INKIVE.C.WHITE_LABEL_CONFIGURATION||null)&&a&&e?($('#tool-panel .tool-menu [href="#tabRestricted"]').parent().hide(),$($("#tool-panel .tool-menu").find("li:visible")[0]).find("a").trigger("click")):document.querySelectorAll("#svgcontent .main .element").length>0?INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?INKIVE.RestrictionsFactory.initialize().then((function(){$('#tool-panel .tool-menu [href="#tab'.concat(INKIVE.Menus.showSimplifiedRestrictions?"Simplified":"",'Restrictions"]')).trigger("click")})):$('#tool-panel .tool-menu [href="#tabRestricted"]').trigger("click"):$('#tool-panel .tool-menu [href="#tabLayouts"]').trigger("click"),0===$("#svgroot .main").find(":not(title)").length&&INKIVE.Helpers.isDesygnerProject()&&s.canvas.call("advice.show","pick-template")})),INKIVE.zoom&&INKIVE.EditorFacade.handle("zoom","set",{zoom:INKIVE.zoom/100})}t.exports=function(){var e=(0,l.default)(o.default.mark((function e(t,n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,s=n,INKIVE.Keyboard.getInstance(s).init(),s.gesture=new INKIVE.Gesture(s.canvas),INKIVE.DesignFacade.initialize(),INKIVE.EditorFacade.initialize(s.curConfig),INKIVE.ProjectFacade.initialize(),INKIVE.SVGElementLoading.initialize(),window.AppBridge&&AppBridge.initialize(),!(a=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN)){e.next=15;break}return e.next=14,INKIVE.RestrictionsFacade.initialize();case 14:INKIVE.EditorModeManager.setMode("restrict");case 15:d(),$(window).resize(_.debounce(u,300)),INKIVE.C.IS_MOBILE&&setTimeout((function(){window.scrollTo(0,1)}),1),c.default.SDK.initialize();case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{"../modules/background-removal":179,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/web.timers.js":966}],22:[function(e,t,n){"use strict";e("core-js/modules/es.weak-map.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.object.get-own-property-descriptor.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=e("@babel/runtime/helpers/typeof"),i=r(e("@babel/runtime/regenerator")),s=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("../video")),c=e("dom-compare"),u=r(e("../../../../config/modules.json")),d=e("../utils/dimensions");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(){return(h=(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:INKIVE.C.TRANSLATION_DATA&&INKIVE.EditorFacade.handle("translations","display",INKIVE.C.TRANSLATION_DATA);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.exports=function(){var t;INKIVE.disableWindowExitConfirm=INKIVE.C.IS_MOBILE_APP,INKIVE.C.DEBUG=!1,$(window).bind("beforeunload",(function(e){if(!INKIVE.disableWindowExitConfirm&&INKIVE.hasEditorUnsavedChanges){var t=INKIVE.TranslateHelper.translate("modal.sure_to_leave");return(e=e||window.event)&&(e.returnValue=t),t}})),$(window).bind("dragover drop",(function(e){$(e.target).is("input[type=file]")||e.preventDefault()})),window.INKIVE.Tabs={},t=e("hbsfy/runtime"),window.INKIVE.TemplatesHelper=e("../ui/templates/templates-helper"),t.registerHelper("Desygner",(function(e){return INKIVE.C.MODE.IS_DESYGNER?e.fn(this):e.inverse(this)})),t.registerHelper("Photobooky",(function(e){return INKIVE.C.MODE.IS_DESYGNER?e.inverse(this):e.fn(this)})),t.registerHelper("Mobile",(function(e){return INKIVE.C.IS_MOBILE?e.fn(this):e.inverse(this)})),t.registerHelper("Desktop",(function(e){return INKIVE.C.IS_MOBILE?e.inverse(this):e.fn(this)})),t.registerHelper("low",(function(e){return e.toLowerCase()})),t.registerHelper("upp",(function(e){return e.toUpperCase()})),t.registerHelper("route",(function(e){return INKIVE.C.BASE_URL+e})),t.registerHelper("eq",(function(e,t,n){return e===t?n.fn(this):n.inverse(this)})),t.registerHelper("neq",(function(e,t,n){return e===t?n.inverse(this):n.fn(this)})),t.registerHelper("ln2br",(function(e){return e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")})),t.registerHelper("math",(function(e,t,n){return{"+":(e=parseFloat(e))+(n=parseFloat(n)),"-":e-n,"*":e*n,"/":e/n,"%":e%n}[t]})),t.registerHelper("font_quote",(function(e){return e.replace(/'/g,"\\'")})),window.INKIVE.ModalHelp=e("../modal/help"),window.INKIVE.ModalAddPage=e("../modal/add-page"),window.INKIVE.ModalShareEmail=e("../modal/share-email"),window.INKIVE.ModalShareEmbed=e("../modal/share-embed"),window.INKIVE.ModalFriends=e("../modal/friends"),window.INKIVE.ModalDownload=e("../modal/download"),function(){e("../ui/filterpicker"),e("../ui/colors/colorpicker");var t=INKIVE.C.MODE.IS_DESYGNER&&!INKIVE.C.IS_MOBILE,n=e("../ui/stage-dnd");t&&n.init()}(),window.INKIVE.SVGPlaceholderImage=e("../thumb/placeholder");var n=function(){window.INKIVE.Tool=window.INKIVE.Tool||{},window.INKIVE.Helpers=window.INKIVE.Helpers||{},window.INKIVE.Helpers.getStickerFromString=e("../svg-importer/import"),window.INKIVE.Helpers.applyDimensionsFromElement=d.applyDimensionsFromElement,window.INKIVE.Helpers.applyDimensionsFromBoxCoordinates=d.applyDimensionsFromBoxCoordinates,window.INKIVE.Helpers.getDimensionsFromElement=d.getDimensionsFromElement,window.INKIVE.Helpers.cookieStorage=e("../utils/cookie-storage"),window.INKIVE.Helpers.elementHelper=e("../../helpers/element").default,window.INKIVE.Helpers.imagesSanitize=e("../utils/images-sanitize"),window.INKIVE.Helpers.DownloadProcedure=e("../ui/top-submenu/contents/download/download-procedure"),window.INKIVE.Helpers.DownloadProcedure.initialize(),window.INKIVE.SVGElementLoading=e("../SVGElementLoading"),(INKIVE.C.IS_MOBILE_APP||INKIVE.C.IS_MOBILE)&&(window.AppBridge=e("../app/bridge"));e("../utils/ellipsis")(),e("../utils/backbone-mixin");var t=INKIVE.Tool.getInstance();return t.editor.on("initialize",(function(){e("../utils/advice").initialize(t.editor.canvas),(0,l.default)(t.editor.canvas),window.INKIVE.Video={addElement:l.addElement}})),t}();!function(){var t=e("../facade/design/design"),n=e("../facade/editor/editor");INKIVE.History=e("../core/history/history"),INKIVE.DomCompareTools={compare:c.compare,groupingReporter:c.GroupingReporter};var r=["image.update","image.create.source.url","image.filter","image.replace","image.update.source.url","image.flip_vertical","image.flip_horizontal","flipped_image","background.update","background.update.source.loaded","background.update.color","background.flip_vertical","background.flip_horizontal","group.create","group.update","group.ungroup","shape.create","shape.update","shape.flip_vertical","shape.flip_horizontal","sticker.create","sticker.update","sticker.explode","sticker.flip_horizontal","sticker.flip_vertical","logo.create","logo.update","icon.create","icon.update","text.create","text.update","video.create","video.update","table.create","table.update","link.update","placeholder.update","move","rotate","resize","delete","duplicate","draw","cut","paste","send_forward","send_backward","send_top","send_bottom"];function o(e,t){if(INKIVE.History.isSystemEnabled()){var n=INKIVE.Tool.getInstance();t&&t.skipHistory||INKIVE.History.onChange(e,t,n.editor.getSvgString())}}function i(){var e=INKIVE.Tool.getInstance();INKIVE.History.reload(e.editor.getSvgString())}_.each(r,(function(e){t.on(e,_.partial(o,"design."+e))})),t.on("template.update.size",i),t.on("template.update.grid",i),t.on("template.update.designed",i),t.on("template.update.restricted",i),r=["image.crop.end","background.crop.end","convert_to_image_box","align"],_.each(r,(function(e){n.on(e,_.partial(o,"editor."+e))})),n.on("page.move_to",i)}(),CONFIG.addons=CONFIG.addons||{},CONFIG.addons=_.extend(CONFIG.addons,{white_label:{id:"white_label",config:INKIVE.C.WHITE_LABEL_CONFIGURATION}}),e("../factory/white-label").apply(),window.INKIVE.EXTENSION.Logo=e("../extensions/ext-logo"),window.INKIVE.EXTENSION.Icon=e("../extensions/ext-icon"),window.INKIVE.EXTENSION.Table=e("../extensions/ext-table"),window.INKIVE.ContextMenu=e("../ui/context-menu"),fetch(u.default.icons.url).then((function(e){return e.text()})).then((function(e){var t=document.createElement("div");document.body&&document.body.appendChild(t),t.style.display="none",t.innerHTML=e})),INKIVE.C.IS_MOBILE_APP||(!function(){e("../ui/tool-menu/element-options");var t=e("../ui/tool-menu/images/view"),n=e("../ui/tool-menu/text/view"),r=e("../ui/tool-menu/icons/view"),o=e("../ui/tool-menu/logos/view"),i=e("../ui/tool-menu/videos/view"),s=e("../ui/tool-menu/templates/view"),a=e("../ui/tool-menu/admin/view"),l=e("../ui/tool-menu/search/view");if(window.INKIVE.Tabs.images=new t({el:"#tabImages"}),window.INKIVE.Tabs.text=new n({el:"#tabText"}),window.INKIVE.Tabs.icons=new r({el:"#tabIcons"}),window.INKIVE.Tabs.logos=new o({el:"#tabLogos"}),window.INKIVE.Tabs.video=new i({el:"#tabVideo"}),window.INKIVE.Tabs.admin=new a({el:"#tabAdmin"}),window.INKIVE.Tabs.layouts=new s({el:"#tabLayouts"}),window.INKIVE.Tabs.search=new l({el:"#tabSearch"}),$("#tabPlaceholders").length){var c=e("../ui/tool-menu/placeholders/view");window.INKIVE.Tabs.placeholders=new c({el:"#tabPlaceholders"}),window.INKIVE.PlaceholdersFactory=e("../factory/placeholders")}$("#tabRestrictions").length&&(window.INKIVE.RestrictionsFactory=e("../factory/restrictions"),INKIVE.RestrictionsFactory.initialize().then((function(){if(INKIVE.Menus.showSimplifiedRestrictions){var t=e("../ui/tool-menu/simplified-restrictions/view");window.INKIVE.Tabs.simplifiedrestrictions=new t({el:"#tabSimplifiedRestrictions"})}else{var n=e("../ui/tool-menu/restrictions/view");window.INKIVE.Tabs.restrictions=new n({el:"#tabRestrictions"})}})));if($("#tabRestricted").length){var u=e("../ui/tool-menu/restricted/view");window.INKIVE.Tabs.restricted=new u({el:"#tabRestricted"})}if($("#tabKWLS").length){var d=e("../ui/tool-menu/kwls/view");window.INKIVE.Tabs.kwls=new d({el:"#tabKWLS"})}if($("#tabMLS").length){var p=e("../ui/tool-menu/mls/view");window.INKIVE.Tabs.mls=new p({el:"#tabMLS"})}if($("#tabRedfin").length){var h=e("../ui/tool-menu/redfin/view");window.INKIVE.Tabs.redfin=new h({el:"#tabRedfin"})}}(),e("../utils/bootstrap-modals")),e("../analytics/error-track"),window.INKIVE.Menus={},window.INKIVE.DesignFacade=e("../facade/design/design"),window.INKIVE.EditorFacade=e("../facade/editor/editor"),window.INKIVE.EditorFacade.GraphemeSplitter=e("grapheme-splitter"),window.INKIVE.ProjectFacade=e("../facade/project/project"),window.INKIVE.RestrictionsFacade=e("../facade/restrictions/restrictions"),window.INKIVE.DesignHandler=e("../facade/project/handlers/design"),window.INKIVE.EditorModeManager=e("../ui/editor-mode-manager"),window.INKIVE.SettingsFactory=e("../factory/settings"),window.INKIVE.ImagesFactory=e("../factory/images"),window.INKIVE.LibraryFactory=e("../factory/library").instance,window.INKIVE.UserInfoFactory=e("../factory/user-info"),window.INKIVE.FontsFactory=e("../factory/fonts"),window.INKIVE.FormatFactory=e("../factory/formats"),window.INKIVE.FormatFactory.init(),window.INKIVE.TinyColor=e("tinycolor2"),window.INKIVE.DesygnerApi=e("../factory/desygner-api"),n.editor.on("initialize",(function(){INKIVE.FontsFactory.initialize().then((function(){(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?INKIVE.RestrictionsFacade.initialize():$.Deferred().resolve()).then((function(){INKIVE.C.IS_MOBILE_APP&&AppBridge.callBoth("editor_loaded",{book_id:INKIVE.C.BOOK.id}),INKIVE.History.enableSystem(),INKIVE.EditorFacade.trigger("editor.loaded")}))}))})),INKIVE.C.IS_MOBILE_APP||(INKIVE.DesignFacade.on("background.update",(function(){$(".popupmenu").remove()})),INKIVE.DesignFacade.on("background.update.color",(function(){n.editor.canvas.runExtensions("showBackgroundPopupMenu",{})})));_.each(["sticker.create","sticker.update","text.create","text.update","template.update.restricted"],(function(e){INKIVE.DesignFacade.on(e,(function(){INKIVE.FontsFactory.importDesignCSSFonts()}))})),INKIVE.EditorFacade.on("page.move_to",(function(){try{INKIVE.FontsFactory.importDesignCSSFonts()}catch(e){INKIVE.FontsFactory.initialize().then((function(){return INKIVE.FontsFactory.importDesignCSSFonts()}))}})),INKIVE.EditorFacade.on("editor.loaded",(function(){!function(){var t=e("../factory/company").instance,n=t.getProjectData(),r=t.getCompanyItems("features");window.INKIVE.CompanyFactory=t;var o=$('.options button[data-action="order-print"]');Promise.all([r,n]).then((function(e){var t,n=(0,s.default)(e,2),r=n[0],i=n[1],a=r.my_designs&&r.my_designs.includes("professional_print");a&&o.is(":not(.restricted)")&&(i.is_printable?(t=!1,/(^|&|#|\?)print($|&)/.test(document.location.search)?o.trigger("click"):INKIVE.Helpers.projectCreatedInLastMinutes(3)):t=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN,o.toggleClass("hidden",t));INKIVE.Tabs.restrictions&&INKIVE.Tabs.restrictions.on("template-restrictions-updated",(function(){a||$("#tabRestrictions input[name=function_print_file]").closest("li").hide()})),INKIVE.C.FEATURE_FLAG=r}))}(),function(){h.apply(this,arguments)}()})),INKIVE.C.USER.email||INKIVE.UserInfoFactory.get().then((function(e){INKIVE.C.USER.nickname=Base64.encode(e.nickname),INKIVE.C.USER.email=Base64.encode(e.email)})),window.INKIVE.PopupMenuDefault=e("../ui/element-popupmenu/popupmenuDefault").default,window.INKIVE.PopupMenuMobile=e("../ui/element-popupmenu/popupmenuMobile").default,e("../ui/element-popupmenu/popupmenu").default(window.jQuery),function(){var t=e("../ui/tool-menu/animation/view");if(INKIVE.C.IS_MOBILE){var n=document.createElement("div");n.setAttribute("role","tabpanel"),n.setAttribute("class","tab"),n.setAttribute("id","tabAnimation"),document.body.append(n)}window.INKIVE.Tabs.animation=new t({el:"#tabAnimation"}),window.INKIVE.Tabs.animation.show()}();var r=e("../ui/element-popupmenu/view");window.INKIVE.Menus.elementPopupMenu=new r({el:"#element-popupmenu"}),e("../utils/translate-constants")(window.INKIVE.TranslateHelper.translate);var o=e("../ui/top-submenu/view"),i=e("../ui/pages-panel/view");INKIVE.C.IS_MOBILE_APP||(window.INKIVE.Menus.TopSubmenuView=new o({el:"body > header"})),!INKIVE.Helpers.isDesygnerProject()&&INKIVE.C.WHITE_LABEL_CONFIGURATION.name?(window.original=INKIVE.C.WHITE_LABEL_CONFIGURATION.name,document.title=window.original,document.querySelectorAll("link[rel*='icon']").forEach((function(e){e.href=INKIVE.C.WHITE_LABEL_CONFIGURATION.logo_url}))):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?document.title=INKIVE.TranslateHelper.translate("common.webrand_design_title"):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?document.title=INKIVE.TranslateHelper.translate("common.webrand_template_title"):document.title="Desygner",function(){try{var e=document.querySelector('div[data-value="project-name"] > span').textContent;document.title="".concat(document.title," | ").concat(e),window.original=document.title}catch(e){}}(),window.INKIVE.Menus.pagesPanel=new i({el:"#pages-panel"})}},{"../../../../config/modules.json":650,"../../helpers/element":634,"../SVGElementLoading":1,"../analytics/error-track":3,"../app/bridge":4,"../core/history/history":12,"../extensions/ext-icon":31,"../extensions/ext-logo":32,"../extensions/ext-table":33,"../facade/design/design":47,"../facade/editor/editor":91,"../facade/project/handlers/design":112,"../facade/project/project":113,"../facade/restrictions/restrictions":118,"../factory/company":122,"../factory/desygner-api":123,"../factory/fonts":125,"../factory/formats":126,"../factory/images":127,"../factory/library":128,"../factory/placeholders":148,"../factory/restrictions":149,"../factory/settings":156,"../factory/user-info":161,"../factory/white-label":162,"../modal/add-page":169,"../modal/download":170,"../modal/friends":171,"../modal/help":172,"../modal/share-email":175,"../modal/share-embed":176,"../svg-importer/import":194,"../thumb/placeholder":196,"../ui/colors/colorpicker":199,"../ui/context-menu":203,"../ui/editor-mode-manager":204,"../ui/element-popupmenu/popupmenu":242,"../ui/element-popupmenu/popupmenuDefault":243,"../ui/element-popupmenu/popupmenuMobile":244,"../ui/element-popupmenu/view":246,"../ui/filterpicker":247,"../ui/pages-panel/view":250,"../ui/stage-dnd":251,"../ui/templates/templates-helper":292,"../ui/tool-menu/admin/view":309,"../ui/tool-menu/animation/view":310,"../ui/tool-menu/element-options":403,"../ui/tool-menu/icons/view":437,"../ui/tool-menu/images/view":459,"../ui/tool-menu/kwls/view":470,"../ui/tool-menu/logos/view":484,"../ui/tool-menu/mls/view":492,"../ui/tool-menu/placeholders/view":495,"../ui/tool-menu/redfin/view":500,"../ui/tool-menu/restricted/view":502,"../ui/tool-menu/restrictions/view":537,"../ui/tool-menu/search/view":540,"../ui/tool-menu/simplified-restrictions/view":543,"../ui/tool-menu/templates/view":556,"../ui/tool-menu/text/view":560,"../ui/tool-menu/videos/view":562,"../ui/top-submenu/contents/download/download-procedure":569,"../ui/top-submenu/view":606,"../utils/advice":607,"../utils/backbone-mixin":609,"../utils/bootstrap-modals":611,"../utils/cookie-storage":612,"../utils/dimensions":613,"../utils/ellipsis":614,"../utils/images-sanitize":616,"../utils/translate-constants":623,"../video":625,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.search.js":925,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"dom-compare":970,"grapheme-splitter":979,"hbsfy/runtime":1024,tinycolor2:1049}],23:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=INKIVE.C.WHITE_LABEL_CONFIGURATION;return t.domain===e||t.parent_domain===e||t.parent_company===e}function c(e,t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var o,i=n.value,a=!1,l=s(i.getAttribute("data-conditional").split());try{for(l.s();!(o=l.n()).done;){var c=o.value;if(e.includes(c)){a=!0;break}}}catch(e){l.e(e)}finally{l.f()}a?i.removeAttribute("data-conditional"):i.parentElement.removeChild(i)}}catch(e){r.e(e)}finally{r.f()}}function u(){return(u=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("https://cdn.lr-ingest.io/LogRocket.min.js");case 2:LogRocket.init(INKIVE.C.LOG_ROCKET,{release:INKIVE.C.VERSION}),LogRocket.identify(INKIVE.C.USER.kw_uid||INKIVE.C.USER.id,{desygner_id:INKIVE.C.USER.id,name:Base64.decode(INKIVE.C.USER.nickname),email:Base64.decode(INKIVE.C.USER.email)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=INKIVE.C.WHITE_LABEL_CONFIGURATION.colors,e.next=3,new Promise((function(e){var t=document.createElement("script");t.id="ze-snippet",t.type="text/javascript",t.onload=e,t.src="https://static.zdassets.com/ekr/snippet.js?key=f87fa821-8bd7-4b6d-aa38-74d99520ed20",document.getElementsByTagName("head")[0].appendChild(t)}));case 3:window.zESettings={webWidget:{position:{horizontal:"left",vertical:"bottom"},color:{theme:t.highlight}}},zE((function(){zE.hide()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return new Promise((function(t){return INKIVE.Helpers.getScript(e,t)}))}e("core-js/modules/es.array.find-index.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),t.exports=function(){var e=function(){var e=[],t=l("kw"),n=l("redfin"),r=["real-estate","sir"].findIndex(l)>-1;t||n||l("sutton")?e.push("feature--back-option"):e.push("-feature--back-option"),t?e.push("company--kw"):e.push("-company--kw"),n?e.push("company--redfin"):e.push("-company--redfin"),r&&e.push("company--real-estate"),INKIVE.C.SHOW_ANIMATION&&e.push("feature--animation"),e.push("book-type--".concat(INKIVE.C.BOOK.book_type)),INKIVE.C.REVIEW_MODE&&(e.push("finish-later"),e.push("submit-for-review"));return e}();!function(e){var t=document.querySelectorAll("header [data-conditional]");c(e,t)}(e),function(e){var t=document.querySelectorAll("#tool-panel [data-conditional]");c(e,t)}(e),l("kw")&&(INKIVE.C.LOG_ROCKET&&function(){u.apply(this,arguments)}(),function(){d.apply(this,arguments)}())}},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find-index.js":858,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.iterator.js":965}],24:[function(e,t,n){"use strict";t.exports={debug:INKIVE.C.IS_DEV,wrapper:"#ik-editor",workarea:"#workarea",editor:"#editor",canvasName:"default",canvasElem:"#svgcanvas",canvasPanel:"#canvaspanel",canvas_expansion:1,initText:{input:"#text"},initBackground:{url:null,stroke:"none",fill:"url(#transparencypattern)"},initFill:{color:"#F0EEFC",opacity:1},initStroke:{width:2,color:"#6659E3",opacity:1},initOpacity:1,colorPickerCSS:null,initTool:"select",wireframe:!1,showlayers:!1,no_save_warning:!1,basePath:INKIVE.C.BASE_URL+"assets/js/editor/core/",imgPath:"images/",langPath:"locale/",extPath:"extensions/",jGraduatePath:"jgraduate/images/",margin:[100,100],dimensions:[INKIVE.width,INKIVE.height],gridSnapping:!1,gridColor:"#000000",baseUnit:"px",snappingStep:10,preventAllURLConfig:!1,preventURLContentLoading:!1,lockExtensions:!1,noDefaultExtensions:!1,showGrid:!1,noStorageOnLoad:!1,forceStorage:!1,emptyStorageOnDecline:!1,string:{noTextInput:"Can not found input element."}}},{}],25:[function(e,t,n){"use strict";t.exports={background:{url:null,stroke:"none",fill:"FF0000"},bkgd_color:"#FFFFFF",bkgd_url:"",img_save:"embed",save_notice_done:!1,export_notice_done:!1}},{}],26:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var o=r(e("../../../../src/config/constants"));function i(e){var t=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(t.length>1)return t.pop().split(";").shift()}(e);return t?JSON.parse(t):null}var s,a,l,c,u=void((c=i(o.default.cookies.loadKey))&&(a=(s=c).template,l=s.design||a,INKIVE.C.BOOK={id:l,encodedId:l,book_type:a?INKIVE.C.BOOK_TYPE.TEMPLATE:INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN,cookiesInitialized:!0}));n.default=u},{"../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],27:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.concat.js");var o,i=r(e("./config/default-prefs")),s=r(e("./config/default-config")),a={},l={allowedOrigins:[]};function c(){try{"localStorage"in window&&(o.storage=localStorage)}catch(e){}var e=[];$("#lang_select option").each((function(){e.push(this.value)})),l=$.extend(!0,{},s.default,l),$.each(["allowedOrigins"],(function(e,t){l[t]=$.grep(l[t],(function(e,n){return n===l[t].indexOf(e)}))})),o.curConfig=l,a=$.extend(!0,{},i.default,a),o.curPrefs=a,o.canvas=new $.SvgCanvas(document.getElementById("svgcanvas"),l),function(){for(var e in o.canvas.setFlip=p,INKIVE.EXTENSION)o.canvas.addExtension(e,INKIVE.EXTENSION[e])}(),Object.assign(o,{getMode:u,setMode:d,initScroll:h,getOffset:f,isClickInsideEditor:g,isElementClicked:b,getNextId:v,loadingElement:y,clearSelection:j,replaceElement:w,replaceBackground:I,addElement:x,getSvgString:E,getSelectedElems:k,openPrep:C,setFavColor:S,getFavColors:T,getEditorUsedColors:N,initEditor:A}),o.trigger("initialize")}function u(){return o.canvas.getMode()}function d(e){o.canvas.setMode(e),o.canvas.runExtensions("selectedChanged",{})}function p(e){for(var t=o.canvas.getSelectedElems(),n=$("#svgroot").get(0),r=0;r<t.length;r++){var i=t[r];if(i){var s=o.canvas.getTransformList(i),a=n.createSVGTransform(),l=n.createSVGTransform(),c=n.createSVGTransform(),u=i.getBBox(),d="g"===i.tagName&&-1!==i.getAttribute("class").indexOf("sticker");switch(e){case"h":a.setTranslate(d?-u.x-u.width/2:-u.x,-u.y),l.setScale(-1,1),c.setTranslate(u.x+u.width,u.y),s.appendItem(c),s.appendItem(l),s.appendItem(a),this.recalculateAllSelectedDimensions();break;case"v":a.setTranslate(-u.x,d?-u.y-u.height/2:-u.y),l.setScale(1,-1),c.setTranslate(u.x,u.y+u.height),s.appendItem(c),s.appendItem(l),s.appendItem(a),this.recalculateAllSelectedDimensions()}}}}function h(){var e=$(l.wrapper);e.antiscroll({autoHide:!1,width:e.width(),height:e.height()})}function m(e,t,n,r){t=t||$.noop,o.canvas.clear(),INKIVE.C.DEBUG&&console.log("[loadSvgString] SVG before processing by Editor:",svgedit.utilities.text2xml(e)),n=parseInt(n||e.match(/<svg[^>]*width="(\d+)"[^>]*>/)[1]),r=parseInt(r||e.match(/<svg[^>]*height="(\d+)"[^>]*>/)[1]),o.canvas.contentW=n,o.canvas.contentH=r,INKIVE.EditorFacade.handle("zoom","fit"),o.canvas.setSvgString(e)?(t(!0),INKIVE.Helpers.converterCurrentPage(),INKIVE.Helpers.displayImagesLoadingAnimation()):(INKIVE.Modal.alertMessage("Error load SVG string","error"),t(!1))}function f(){var e=document.querySelector("#canvasBackground");if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:o.canvas.contentW,height:o.canvas.contentH}}}function g(e,t){var n=this.getOffset();return e>n.x&&t>n.y&&e<n.x+n.width*o.canvas.getZoom()&&t<n.y+n.height*o.canvas.getZoom()}function b(e,t){var n=o.canvas.getBBox(e),r=this.getOffset(),i=t.clientX-r.x,s=t.clientY-r.y,a=function(e){return n[e]*o.canvas.getZoom()};if(n)return i>a("x")&&s>a("y")&&i<a("x")+a("width")&&s<a("y")+a("height")}function v(){return o.canvas.getNextId()}function y(e){o.canvas.loadingElement(e)}function j(){o.canvas.clearSelection()}function w(e,t,n,r,i){o.canvas.replaceElement(e,t,n,r,i),INKIVE.Tool.autoSave(t)}function I(e){return o.canvas.addElement("background",e)}function x(e,t,n){var r=o.canvas.addElement(e,t,n);switch(r&&INKIVE.Tool.autoSave(r),e){case"background":break;default:o.canvas.clearSelection(),r&&o.canvas.selectOnly([r])}return r}function E(e){return o.canvas.getSvgString(e)}function k(){return o.canvas.validateSelectedElems(),o.canvas.getSelectedElems()}function C(e){$("#main_menu").hide(),e(!0)}function S(e){var t=_.without(o.getFavColors(),e);t.push(e),localStorage.setItem("colors",JSON.stringify(t))}function T(){if(!localStorage.getItem("colors"))return[];var e=_.uniq(JSON.parse(localStorage.getItem("colors").toUpperCase()),!1);return e.slice(Math.max(e.length-10,0))}function N(){var e=[],t=function(e,t){var n=$(e).attr(t);return _.isString(n)&&"null"!==n&&"none"!==n&&n.toUpperCase()};return $("#svgcontent [stroke], #svgcontent [fill], g.background>rect[fill]").each((function(){e.push(t(this,"stroke")),e.push(t(this,"fill"))})),_.compact(_.uniq(e))}function A(){var e=$("#content, .menu");e.removeClass("portrait")&&e.addClass("landscape"),h();var t=$(l.workarea),n=parseFloat(t.width()),r=parseFloat(t.height()),i=$(l.canvasPanel),s=parseFloat(o.canvas.contentW),a=parseFloat(o.canvas.contentH),c=s>a?n/(s+l.margin[0]):r/(a+l.margin[1]);i.css("width",n),i.css("height",r),i.css("pointer-events","none"),o.canvas.setZoom(c)}function O(e){return(e=e||o.canvas.getSelectedElems())&&e.length&&e[0].getAttribute("opacity")?e[0].getAttribute("opacity"):1}function V(e){return function e(t){if(!t)return 0;var n=0;if($(t).hasClass("textarea")){var r=(new INKIVE.Text.Textarea).setDOM(t);n=r.text.stroke_width?r.text.stroke_width:"none"===r.text.stroke?0:1}else for(var o=t.childNodes,i=t&&"g"!==t.tagName?[t].concat(o):o,s=0,a=i.length;s<a;s++)if("g"===i[s].tagName)n=e(i[s]);else if($.inArray(i[s].tagName,["path","line","polygon","rect","circle","ellipse"])>=0){n=i[s].getAttribute("stroke-width")?i[s].getAttribute("stroke-width"):i[s].getAttribute("stroke")?1:0;break}return!n||"none"===n||isNaN(n)?0:Math.round(10*n)/10}((e=e||o.canvas.getSelectedElems())[0])}t.exports=function(){return o=Object.assign({init:c,loadSvgString:m,getOpacity:O,getStrokeWidth:V},Backbone.Events)}},{"./config/default-config":24,"./config/default-prefs":25,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],28:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.array.concat.js");var i,s,a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("@babel/runtime/helpers/asyncToGenerator")),c=r(e("../../../../src/config/constants")),u=r(e("./ajax-interceptor")),d=r(e("./browser-checker")),p=r(e("./editor-initializer")),h=r(e("./components-loader")),m=r(e("./components-initializer")),f=r(e("./conditional-features")),g=e("./preload"),b=r(e("../../global-inkive")),v=r(e("./onload"));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(){if(!INKIVE.C.BOOK||INKIVE.C.BOOK.cookiesInitialized)return new Promise((function(t){INKIVE.load=function(){var n=(0,l.default)(o.default.mark((function n(r){var s,a,l,c,u;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.template,a=r.design,l=a||s,n.next=4,C(l);case 4:return n.next=6,i;case 6:return T(),INKIVE.C.DEFAULT_FINEUPLOADER.uploadSuccess.params.scrapbookId=l,INKIVE.C.BOOK={id:l,encodedId:l,book_type:s?INKIVE.C.BOOK_TYPE.TEMPLATE:INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN},c=e("../facade/project/project"),n.next=12,c.getInfo();case 12:u=n.sent,INKIVE.C.BOOK.book_type=u.book_type,INKIVE.C.BUCKET=u.master_bucket,INKIVE.C.BOOK.thumb=u.scrapbook_url_key,INKIVE.C.BOOK.create_date=u.create_date,INKIVE.C.BOOK.name=Base64.encode(u.name),INKIVE.C.BOOK.description=Base64.encode(u.description),INKIVE.C.BOOK.category=u.category,INKIVE.C.BOOK.security=u.security_val,INKIVE.C.BOOK.external_reference=u.cover_layout,INKIVE.C.BOOK.initialized=!0,t();case 24:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();var n=N();n?INKIVE.load(n):s=setInterval((function(){var e=N();e&&INKIVE.load&&INKIVE.load(e)}),500)}))}function _(e){var t=e&&e.white_label&&e.white_label.features||[],n=e&&e.white_label&&e.white_label.config||{},r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.colors)||{},o=INKIVE.C.WHITE_LABEL_CONFIGURATION.colors;Object.assign(INKIVE.C.WHITE_LABEL_CONFIGURATION,n),Object.assign(INKIVE.C.WHITE_LABEL_CONFIGURATION.colors,o,r),INKIVE.C.SHOW_ANIMATION=t.includes("show_animation"),INKIVE.C.WHITE_LABEL_CONFIGURATION.supports_sso=!(!e||!e.sso)}function w(e,t){var n=e.page,r=e.zoom;r&&(INKIVE.zoom=r,t.set("zoom",r)),n&&(INKIVE.page=n,t.set("p",n))}function I(e){return x.apply(this,arguments)}function x(){return(x=(0,l.default)(o.default.mark((function e(t){var n,r,i,s,a,l,c,u,d,p,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(){var e=n.querySelector(".frame"),t=e.currentStyle||window.getComputedStyle(e),o=r.currentStyle||window.getComputedStyle(r),i={width:n.clientWidth,height:n.clientHeight};return i.height-=parseFloat(t.paddingTop),i.height-=parseFloat(t.paddingBottom),i.height-=parseFloat(o.marginTop),i.height-=parseFloat(o.marginBottom),i.width-=parseFloat(t.paddingLeft),i.width-=parseFloat(t.paddingRight),i.width-=parseFloat(o.marginLeft),i.width-=parseFloat(o.marginRight),i},e.next=3,A();case 3:if(n=document.querySelector("#inkiveLoader"),r=n.querySelector("img"),i=new Promise((function(e){var n=new Image;n.src=t.src,n.onerror=function(){return e(null)},n.onload=function(){return e(n)}})),n.classList.add("thumbnail"),s=null,!((a=t.size)&&a.width&&a.height&&a.unit)){e.next=14;break}l=INKIVE.Helpers.convertUnitsToPixels,s={width:l(a.width,a.unit),height:l(a.height,a.unit)},e.next=18;break;case 14:return e.next=16,i;case 16:c=e.sent,s=c?{width:c.width,height:c.height}:null;case 18:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i.then((function(e){return e&&r.setAttribute("src",e.src)})),s&&(u=h(),d=u.width/u.height,p=s.width/s.height,d>p?(r.setAttribute("width",u.height*p),r.setAttribute("height",u.height)):(r.setAttribute("width",u.width),r.setAttribute("height",u.width/p)));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(t.length>1)return t.pop().split(";").shift()}function k(e){var t="."+window.location.hostname.match(/([^.]+.[^.]+)$/)[0];document.cookie=e+"=; path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=e+"=; path=/; domain="+t+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function C(e){return S.apply(this,arguments)}function S(){return(S=(0,l.default)(o.default.mark((function e(t){var n,r,i,a,l,u,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new URLSearchParams(window.location.search)).set("id",t),r="true"===E(c.default.cookies.loadPrintOptionKey)?"&print":"",INKIVE.C.REVIEW_MODE="true"===E(c.default.cookies.loadReviewModeOptionKey)?"&reviewMode":null,INKIVE.C.TRANSLATION_DATA=E(c.default.cookies.loadTranslationDataOptionKey),INKIVE.C.TRANSLATION_DATA=INKIVE.C.TRANSLATION_DATA?JSON.parse(INKIVE.C.TRANSLATION_DATA):null,(i=E(c.default.cookies.loadReferrerOptionKey))&&n.set("referrer",i),(a=E(c.default.cookies.loadViewOptionKey))&&w(JSON.parse(a),n),(l=E(c.default.cookies.loadAddonsOptionKey))&&_(JSON.parse(l)),(u=E(c.default.cookies.loadWorkspaceOptionKey))&&Object.assign(INKIVE.C.WHITE_LABEL_CONFIGURATION,JSON.parse(u)),INKIVE.C.initialBackgroundImageSource=E(c.default.cookies.loadBackgroundUrlOptionKey),window.history.replaceState({},"","?".concat(n).concat(r)),delete INKIVE.load,s&&clearInterval(s),d=E(c.default.cookies.loadThumbnailOptionKey),e.t0=d,!e.t0){e.next=23;break}return e.next=23,I(JSON.parse(d));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){k(c.default.cookies.loadPrintOptionKey),k(c.default.cookies.loadReferrerOptionKey),k(c.default.cookies.loadThumbnailOptionKey),k(c.default.cookies.loadKey),k(c.default.cookies.loadAddonsOptionKey),k(c.default.cookies.loadWorkspaceOptionKey),k(c.default.cookies.loadReviewModeOptionKey),k(c.default.cookies.loadTranslationDataOptionKey),k(c.default.cookies.loadViewOptionKey)}function N(){var e=E(c.default.cookies.loadKey);return e?JSON.parse(e):null}function A(){return new Promise((function(e){return $(document).ready(e)}))}function O(e){var t=$("#inkiveLoader");$("body").addClass("browser-not-supported"),t.length&&t.append(e)}function V(e){return new Promise((function(t){var n=INKIVE.Tool.getInstance(null,e,(function(){return t(n)}))}))}(0,l.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,l.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return e.next=4,(0,u.default)();case 4:return e.next=6,(0,d.default)();case 6:return e.next=8,Promise.all([(0,g.preloadTranslations)(),(0,g.preloadVersionFile)(),(0,g.preloadUserData)()]);case 8:case"end":return e.stop()}}),e)})))(),(0,b.default)(),t=j(),e.next=6,i;case 6:return e.next=8,t;case 8:return(0,f.default)(),n=(0,p.default)(),e.next=12,V(n);case 12:r=e.sent,(0,h.default)(),n.init(),(0,m.default)(r,n),(0,v.default)(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),O(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()},{"../../../../src/config/constants":1090,"../../global-inkive":628,"../facade/project/project":113,"./ajax-interceptor":19,"./browser-checker":20,"./components-initializer":21,"./components-loader":22,"./conditional-features":23,"./editor-initializer":27,"./onload":29,"./preload":30,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.search.js":925,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966,"core-js/modules/web.url-search-params.js":967}],29:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.function.name.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator"));function s(){return(s=(0,i.default)(o.default.mark((function t(){var n,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e("../factory/company").instance,t.next=3,n.getProjectData();case 3:return r=t.sent,t.abrupt("return",r.is_resizable&&!r.is_resized&&n.initialTemplateResize(r.format,r.name));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t.exports=function(){return function(){return s.apply(this,arguments)}()}},{"../factory/company":122,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.function.name.js":884}],30:[function(e,t,n){"use strict";t.exports={preloadTranslations:function(){var t=e("../../../translations/translate-helper");return window.INKIVE.TranslateHelper=new t("editor",INKIVE.C.BASE_URL,"translations/client/",!INKIVE.C.IS_DEV&&INKIVE.C.VERSION),_.bindAll(window.INKIVE.TranslateHelper,"translate"),INKIVE.TranslateHelper.load()},preloadVersionFile:function(){e("../factory/company").instance.initCache()},preloadUserData:function(){window.INKIVE.UserInfoFactory=e("../factory/user-info"),INKIVE.UserInfoFactory.get()}}},{"../../../translations/translate-helper":649,"../factory/company":122,"../factory/user-info":161}],31:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../facade/restrictions/restrictions"),o=e("./helper/overwritable").OverOutHandler,i=e("./helper/overwritable").getElementOnCoords;t.exports=function(e){var t=new o(e,"ghost-icon");return{outIcon:t.out,updateIconDimensions:function(e){t.updateContentDimensions(e.elem)},dragIcon:function(n){var o=$(e.svgroot).find(".element.icon"),s=i(o,n.x,n.y,e.canvas.getZoom());if(s){var a=!r.canChange(s,"replace")||r.getElementRestrictions(s.getAttribute("id"),"source").length;a&&e.canvas.call("advice.show","restriction-icon-replace"),a||t.over(s,n.thumb)}else t.getGhostElement()&&t.out();return s}}}},{"../facade/restrictions/restrictions":118,"./helper/overwritable":34,"core-js/modules/es.array.find.js":859}],32:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../facade/restrictions/restrictions"),o=e("./helper/overwritable").OverOutHandler,i=e("./helper/overwritable").getElementOnCoords;t.exports=function(e){var t=new o(e,"ghost-logo");return{outLogo:t.out,updateLogoDimensions:function(e){t.updateContentDimensions(e.elem)},dragLogo:function(n){var o=$(e.svgroot).find(".element.logo"),s=i(o,n.x,n.y,e.canvas.getZoom());if(s){var a=!r.canChange(s,"replace")||r.getElementRestrictions(s.getAttribute("id"),"source").length;a&&e.canvas.call("advice.show","restriction-logo-replace"),a||t.over(s,n.thumb)}else t.getGhostElement()&&t.out();return s}}}},{"../facade/restrictions/restrictions":118,"./helper/overwritable":34,"core-js/modules/es.array.find.js":859}],33:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports=function(){return{endResize:function(){var e=INKIVE.EditorFacade.getSelection().find((function(e){return"table"===e.type}));e&&INKIVE.Table.updateTableRect(document.querySelector("#".concat(e.id)))}}}},{"core-js/modules/es.array.find.js":859}],34:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),t.exports.getElementOnCoords=function(e,t,n,r){return _.find(e,(function(e){var o=svgedit.utilities.getBBox(e);return o.x*r<t&&t<(o.x+o.width)*r&&o.y*r<n&&n<(o.y+o.height)*r}))},t.exports.OverOutHandler=function(e,t){var n,r;return{out:function(){o(r,1),n.remove(),n=null,r=null},over:function(i,s){r==i&&n||(n&&n.remove(),r&&o(r,1),r=i,function(r,o){var i=e.canvas.getZoom(),s=svgedit.utilities.getBBox(r),a=$("#svgcontent")[0];n=document.createElementNS(svgedit.NS.SVG,"image"),e.canvas.assignAttributes(n,{id:t,x:(parseFloat(a.getAttribute("x"))+s.x)*i,y:(parseFloat(a.getAttribute("y"))+s.y)*i,width:s.width*i,height:s.height*i,"xlink:href":o}),$("#svgpanel")[0].appendChild(n)}(i,s),o(i,0))},updateContentDimensions:function(t){var n=$(t).children("g")[0],r=$(t).children("image")[0].getBBox(),o=n.getBBox(),i=r.width/r.height,s=o.width/o.height>i?r.width/o.width:r.height/o.height;!function(t,n,r,o,i){var s=e.svgroot.createSVGTransform(),a=e.svgroot.createSVGTransform(),l=e.svgroot.createSVGTransform(),c=svgedit.transformlist.getTransformList(t);s.setTranslate(0,0),a.setScale(n,r),l.setTranslate(0,0),c.appendItem(s),c.appendItem(a),c.appendItem(l),e.canvas.recalculateDimensions(t,t.getBBox()),(s=e.svgroot.createSVGTransform()).setTranslate(o,i),c.appendItem(s),e.canvas.recalculateDimensions(t)}(n,s,s,r.x,r.y)},getGhostElement:function(){return n}};function o(e,t){svgedit.utilities.assignAttributes(e,{opacity:t},100)}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.parse-float.js":904}],35:[function(e,t,n){"use strict";e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.function.name.js");var r=e("../../utils/humps");function o(){this.handlers={}}o.prototype=_.extend({},Backbone.Events),o.prototype.initialize=function(){_.bindAll(this,"propagate","handle"),this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,_.each(this.handlers,(function(e,t){e.initialize(),e.on("all",_.partial(this.propagate,t))}),this)},o.prototype.handle=function(e,t,n){var o=r.camelize(e);if(_.isString(e)&&_.isFunction(this[o]))return this[o](t,n);if(t){if(o=r.camelize(t),_.isString(e)&&this.handlers[e]&&_.isFunction(this.handlers[e][o]))return this.handlers[e][o](n);if(_.isString(e)&&_.isFunction(this[o]))return this[o](e)}if(_.isString(t)||n){var i=$("#"+e)[0],s=this.handlers[e]?e:this.getType(i);return l.call(this,s,i)}n=t;var a=_.toArray(this.canvas.getSelectedElems());function l(e,t){this.handlers[e]&&_.isFunction(this.handlers[e][o])&&(t||this.handlers[e][o](n),t&&this.handlers[e][o](t,n))}_.each(a,(function(e){l.call(this,this.getType(e),e)}),this),this.canvas.selectOnly(a)},o.prototype.propagate=function(e,t,n){this.trigger(t?e+"."+t:e,n)},o.prototype.getType=function(e,t){if(!e&&t&&(e=$("#svg_background_image[data-old-id="+t+"]")[0]),e)return $(e).is(".no-restrictions")?"ignore-restrictions":$(e).parent().is(".background")||$(e).is(".background")?"background":$(e).is(".table")?"table":$(e).is(".video")||e.closest(".video")?"video":$(e).is(".logo")?"logo":$(e).is(".icon")?"icon":$(e).is(".textarea")?"text":$(e).is(".sticker")?"sticker":$(e).is(".group")?"group":$(e).is("#svgroot")?"root":"image"===e.nodeName?$(e).parent().is(".clipperImage")?"imageclipper":"image":"shape"},o.prototype.trigger=function(e,t){if(INKIVE.C.DEBUG){var n=new Date;n=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();var r="string"==typeof t&&t.length>120?t.substring(0,120)+" ...":t;console.log("".concat(n,": ").concat(e,", ").concat(this.constructor.name),r)}Backbone.Events.trigger.apply(this,arguments)},t.exports=o},{"../../utils/humps":615,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.name.js":884}],36:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.reduce.js");var o=r(e("../../../../../../../src/config/constants"));function i(){}t.exports=i,i.prototype=_.extend({},Backbone.Events),i.prototype.initialize=function(){this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.mandatory=[],this.defaults={position:{x:100,y:100},rotation:0,size:{width:100,height:100},opacity:1},_.bindAll(this,"create","getDefinedData")},i.prototype.getDefinedData=function(e,t){for(var n,r=t.split("."),o=this.defaults;r.length>0;)n=r.shift(),void 0!==e&&(e=e[n]),void 0!==o&&(o=o[n]);return void 0===e?o:e},i.prototype.getSmartAssetsData=function(e){return o.default.smartAssets.attributes.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{"../../../../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],37:[function(e,t,n){"use strict";e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.index-of.js");var r=e("./element");function o(){}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.initialize=function(){r.prototype.initialize.call(this),_.bindAll(this,"updateContent"),_.extend(this.defaults,{content:null})},o.prototype.updateContent=function(e,t){INKIVE.SVGElementLoading.hide(e);var n,r,o=(n=t.content,/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(n)||-1===n.indexOf("<")?Base64.decode(t.content):t.content),i=this.getSmartAssetsData(e);o.length<2e5&&(r=INKIVE.Helpers.getStickerFromString(o,{keepClasses:$(e).is(".icon, .logo")||t.sticker_id})),r?(this.canvas.selectOnly([e]),r.classList=_(e.classList).without("selected").join(" "),this.editor.replaceElement(e,r,!0,!0,!0)):(r=this.canvas.addSvgElementFromJson({element:"g",attr:{class:"element sticker",id:this.canvas.getNextId()}}),e.classList.add("subelement"),e.classList.add("layoutBox"),r.append(e),this.canvas.selectOnly([r])),e.hasAttribute("from-library")&&r.setAttribute("from-library","true"),t.thumb_src&&(i["data-thumb-src"]=t.thumb_src),svgedit.utilities.assignAttributes(r,i),this.canvas.runExtensions("selectedChanged")}},{"./element":36,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.join.js":868}],38:[function(e,t,n){"use strict";function r(){}e("core-js/modules/es.string.link.js"),t.exports=r,r.prototype=_.extend({},Backbone.Events),r.prototype.constructor=r,r.prototype.initialize=function(){var e=INKIVE.Tool.getInstance().editor;this.canvas=e.canvas},r.prototype.create=function(e){e&&e.link?this.canvas.groupSelectedElements("a",INKIVE.Helpers.isUrlValid(e.link)?e.link:"http://"+e.link):this.canvas.groupSelectedElements();var t=this.canvas.getSelectedElems()[0];return this.trigger("",t.getAttribute("id")),t.getAttribute("id")}},{"core-js/modules/es.string.link.js":918}],39:[function(e,t,n){"use strict";e("core-js/modules/es.string.ends-with.js"),e("core-js/modules/es.function.bind.js");var r=e("./logo"),o=e("./abstract/graphic"),i=e("../../../factory/images");function s(){}t.exports=s,s.prototype=new o,s.prototype.constructor=s,s.prototype.create=function(e){e.is_vector||(e.thumb_src=i.getVersionUrl(e.thumb_src,"thumb")),e.svg_url&&!e.svg_url.endsWith(".svg")&&(e.thumb_src=i.getVersionUrl(e.svg_url,"thumb"));var t=this._createIconContainer(e),n=_.bind((function(){this.trigger("",t.getAttribute("id"))}),this);return e.is_vector?(e.content||this.fetchContent(t,e),e.content&&this.updateContent(t,e),this.once("content",n)):(this._smartImageLoad(t,e),this.once("resolution_optimized",n)),this.canvas.selectOnly([t]),t.getAttribute("id")},s.prototype._createIconContainer=function(e){var t={id:this.canvas.getNextId(),class:"element icon"};e.smart_asset&&(t["custom-placeholder"]=e.smart_asset,t["is-defined-placeholder"]=!0);var n=this.canvas.addSvgElementFromJson({element:"g",attr:t});return this._appendImageIcon(n,this.getAddData(e)),n},s.prototype.initialize=r.prototype.initialize,s.prototype.updateContent=r.prototype.updateContent,s.prototype._smartImageLoad=r.prototype._smartImageLoad,s.prototype.fetchContent=r.prototype.fetchContent,s.prototype._appendImageIcon=r.prototype._appendImageLogo,s.prototype.getAddData=r.prototype.getAddData},{"../../../factory/images":127,"./abstract/graphic":37,"./logo":41,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.ends-with.js":914}],40:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("./abstract/element"),o=e("../setters/image"),i=e("../../../factory/images");function s(){}t.exports=s,s.prototype=_.extend(new r,o.prototype),s.prototype.constructor=s,s.prototype.initialize=function(){r.prototype.initialize.call(this),this.mandatory=["source.url"],_.extend(this.defaults,{placeholder:!0,smart_asset:null,source:{url:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",smart_load:!0,external_resize:!1}}),INKIVE.UserInfoFactory.getMembership().then(_.bind((function(e){this.canEditTemplate=e.permissions.templates_update}),this)),this.isBrandTemplate=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE},s.prototype.create=function(t){var n=e("../../editor/editor"),r=this.canEditTemplate&&this.isBrandTemplate;t.external=void 0===t.source.external_resize?this.isExternal(t):t.source.external_resize;var o=this.canvas.addElement("image",this.getAddData(t)),i=o.getAttribute("id");return n.once("image.rename."+i,_.bind((function(e){o=$("#"+e.id)[0],s.call(this,e),a.call(this)}),this)),n.handle(i,"crop",{quiet:!0,scale:1}),r||o.classList.add("quick-delete"),o.getAttribute("id");function s(e){t.external_source===INKIVE.C.SHUTTERSTOCK&&($(o).css("opacity",0),this.getDefinedData(t,"external_source")&&$(o).data("external_source",t.external_source),this.getDefinedData(t,"external_id")&&$(o).data("external_id",t.external_id),$(o).data("external_url",t.source.url),this.getShutterstockCropBox(t).then(_.bind((function(r){var i=_.clone(this.getAddData(t));i.width=r.width,i.height=r.height;var s=this.canvas.addElement("image",i),a=$(s).attr("id");n.once("image.rename."+a,_.bind((function(n){$("#"+n.id).data("external_source",INKIVE.C.SHUTTERSTOCK).addClass("non-selectable"),this.processSstkProImage(t,n,e,o)}),this)),n.handle(a,"crop",{quiet:!0,scale:1,skip_selection:!0,clip_path:this.getAddData(t)})}),this)))}function a(){var e=o.getAttribute("id");t&&t.external_source===INKIVE.C.SHUTTERSTOCK&&t.subscription_image||(t.external?(this.resizeExternalPhoto(o,t),this.trigger("",e)):t.source.base_64?(this.updateSourceBase64(o,t),this.once("source.base_64",_.partial(this.trigger,"",e))):(this.getDefinedData(t,"source.smart_load")&&this.onVersionData(o,t),this.once("source.url",_.partial(this.trigger,"",e))))}},s.prototype.onVersionData=function(e,t){function n(){return t&&t.external_source===INKIVE.C.SHUTTERSTOCK}n()||i.storeImageData(t.source.url),o.prototype.onVersionData.apply(this,arguments)},s.prototype.getSize=function(e,t){return{width:this.getDefinedData(t,"size.width"),height:this.getDefinedData(t,"size.height")}},s.prototype.getAddData=function(e){var t=_.bind(this.getDefinedData,this,e),n=t("source.url");return{url:e.imported?n:i.getVersionUrl(n,"thumb")||n,x:t("position.x"),y:t("position.y"),width:t("size.width"),height:t("size.height"),smart_asset:e.smart_asset,is_defined_placeholder:e.is_defined_placeholder}},s.prototype.processSstkProImage=function(t,n,r,o){var i=e("../../../facade/design/design");function s(){$(o).css("opacity",""),$("#"+n.id).remove(),svgedit.select.getSelectorManager().releaseAllSelectors()}i.trigger("image.sstk_replace.start",r),t.subscription_image?INKIVE.DesygnerApi.post("payment/gateway/stripe/process",t.subscription_image).then((function(e){e.info?(i.trigger("image.sstk_replace.start",r),e.thumbId=n.id,INKIVE.EditorFacade.handle("shopping_cart","on_payment",e)):s()})):i.once("image.create.source.url",s)},s.prototype.getShutterstockCropBox=function(e){var t=$.Deferred(),n=e.$elem&&e.$elem.find("img")[0],r=n&&{width:n.naturalWidth,height:n.naturalHeight};if(r&&0!==r.width&&0!==r.height)i(r);else{var o=new Image;o.onload=function(){i({width:this.naturalWidth,height:this.naturalHeight})},o.src=e.source.url}function i(n){var r=e.size,o=r.width>r.height;t.resolve({width:o?r.width:r.height*n.width/n.height,height:o?r.width*n.height/n.width:r.height})}return t.promise()}},{"../../../facade/design/design":47,"../../../factory/images":127,"../../editor/editor":91,"../setters/image":73,"./abstract/element":36,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],41:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.join.js");var r=e("./abstract/graphic"),o=e("../../../factory/images");function i(){}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.initialize=function(){r.prototype.initialize.call(this),this.mandatory=["thumb_src"],_.extend(this.defaults,{is_vector:!1,thumb_src:null,smart_asset:null})},i.prototype.create=function(e){var t=this._createLogoContainer(e),n=_.bind((function(){this.trigger("",t.getAttribute("id"))}),this);return e.is_vector?(e.content||this.fetchContent(t,e),e.content&&this.updateContent(t,e),this.once("content",n)):(this._smartImageLoad(t,e),this.once("resolution_optimized",n)),this.canvas.selectOnly([t]),t.getAttribute("id")},i.prototype.fetchContent=function(e,t){var n=t.thumb_src.split("."),r=new XMLHttpRequest;n.pop(),n.push("svg"),n=n.join("."),r.open("GET",n,!0),r.send(),r.onload=_.bind((function(){t.content=r.responseText,this.updateContent(e,t)}),this),this.trigger("fetch_content",e.getAttribute("id"))},i.prototype._createLogoContainer=function(e){var t={id:this.canvas.getNextId(),class:"element logo"};e.smart_asset&&(t["custom-placeholder"]=e.smart_asset,t["is-defined-placeholder"]=!0);var n=this.canvas.addSvgElementFromJson({element:"g",attr:t});return this._appendImageLogo(n,this.getAddData(e)),n},i.prototype._smartImageLoad=function(e,t){var n=$(e).children("image")[0],r=svgedit.utilities.getBBox(n);this.trigger("optimize_resolution",e.getAttribute("id")),o.smartLoad(t.thumb_src,r,_.bind((function(r,o){var i=r===INKIVE.C.Status.success||t.thumb_src;t.thumb_src=r===INKIVE.C.Status.success?o.src:t.thumb_src,i&&(n&&n.setAttribute("xlink:href",t.thumb_src),this.trigger("resolution_optimized",e.getAttribute("id")))}),this))},i.prototype._appendImageLogo=function(e,t){var n;n=t.width===t.height||t.width>t.height?t.height:t.width;var r={x:t.x,y:t.y,id:this.canvas.getNextId(),width:t.is_vector?n:t.width,height:t.is_vector?n:t.height,"xlink:href":t.url};t.smart_asset&&(r["custom-placeholder"]=t.smart_asset,r["is-defined-placeholder"]=!0);var o=this.canvas.addSvgElementFromJson({element:"image",attr:r});return e.appendChild(o),o},i.prototype.updateContent=function(e,t){r.prototype.updateContent.apply(this,arguments),this.trigger("content",e.getAttribute("id"),t)},i.prototype.getAddData=function(e){var t=_.bind(this.getDefinedData,this,e);return{x:t("position.x"),y:t("position.y"),url:t("thumb_src"),width:t("size.width"),height:t("size.height"),is_vector:e.is_vector}}},{"../../../factory/images":127,"./abstract/graphic":37,"core-js/modules/es.array.join.js":868,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],42:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js");var r=e("./abstract/graphic"),o=e("../../../factory/shapes"),i=e("../setters/abstract/element");function s(){}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.initialize=function(){r.prototype.initialize.call(this),_.extend(this.defaults,{shape_id:null,smart_asset:null})},s.prototype.create=function(e){var t;return e.content&&(t=this._create(e)),e.shape_id&&this.load(e),t},s.prototype.load=function(e){var t=e.shape_id.split("_");o.get(t[0],t[1]).then(_.bind((function(t){e.content=t.path,this._create(e)}),this))},s.prototype._create=function(e){var t=this.canvas.addSvgElementFromJson({element:"path",curStyles:!0,attr:this.getAddData(e)});return $(t).addClass("element"),this.setSize(t,e.size?e:{size:{width:this.getDefinedData(e,"size.width"),height:this.getDefinedData(e,"size.height")}}),this.setPosition(t,{position:{x:this.getDefinedData(e,"position.x"),y:this.getDefinedData(e,"position.y")}}),this.trigger("",t.getAttribute("id")),void 0===e.selected||e.selected||this.canvas.clearSelection(),t.getAttribute("id")},s.prototype.setSize=i.prototype.updateSize,s.prototype.setPosition=function(t,n){var r=n.position,o=t.getBBox(),i=e("../../editor/editor").handle("zoom","get");this.canvas.clearSelection(),this.canvas.selectOnly([t]),this.canvas.moveSelectedElements((r.x-o.x)*i,(r.y-o.y)*i)},s.prototype.getAddData=function(e){var t={d:e.content,id:this.canvas.getNextId(),opacity:this.getDefinedData(e,"opacity")};return e.smart_asset&&(t["custom-placeholder"]=e.smart_asset,t["is-defined-placeholder"]=!0),t}},{"../../../factory/shapes":157,"../../editor/editor":91,"../setters/abstract/element":67,"./abstract/graphic":37,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],43:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var o=r(e("./abstract/graphic"));function i(){}t.exports=i,i.prototype=new o.default,i.prototype.constructor=i,i.prototype.initialize=function(){o.default.prototype.initialize.call(this),this.mandatory=["sticker_id"],_.extend(this.defaults,{sticker_id:null,thumb_src:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",smart_asset:null})},i.prototype.create=function(e){var t=this.canvas.addElement("sticker",this.getAddData(e));return INKIVE.SVGElementLoading.show(document.getElementById(t.id)),e.svg_url?this.fetchSvgUrlContent(t,e):(e.content||!e.sticker_id||this.fetchContent(t,e),e.content&&this.updateContent(t,e)),this._requiresAttribution(e)&&this._createAttribution(e.licence),this.trigger("",t.getAttribute("id")),(void 0===e.selected||e.selected)&&(this.canvas.clearSelection(),this.canvas.selectOnly([document.getElementById(t.id)])),t.getAttribute("id")},i.prototype._requiresAttribution=function(e){return e.licence&&e.licence.attribution_licence&&!function(){var t=this._getAttributionKey(e.licence);return _.any($("#svgcontent > .main a[attribution]"),(function(e){return e.getAttribute("attribution")===t}))}.call(this)},i.prototype._createAttribution=function(e){var t=.04*this.canvas.contentH,n=.02*this.canvas.contentW,r=$("#svgcontent > .main a[attribution]").length*t,o=this.canvas.contentH-t-r,i=this.canvas.addSvgElementFromJson({element:"rect",attr:{x:0,y:o,width:this.canvas.contentW,height:t,fill:"#FFFFFF"}}),s=this.canvas.addElement("textarea",{x:n,y:o+t/5,width:this.canvas.contentW-2*n,text:{font_size:t/2,font_family:"Lato",textContent:"Icons created by "+e.author_name+" - "+e.author_url}});this.canvas.selectOnly([i,s]),this.canvas.groupSelectedElements("a",INKIVE.Helpers.isUrlValid(e.author_url)?e.author_url:"https://"+e.author_url),this.canvas.getSelectedElems()[0].setAttribute("attribution",this._getAttributionKey(e))},i.prototype._getAttributionKey=function(e){return e.author_name+" "+e.author_url},i.prototype.fetchContent=function(e,t){var n=_.partial(this.updateContent,e);INKIVE.Helpers.api("search/sticker","GET",{id:t.sticker_id},_.bind((function(r){n(_.extend(t,{content:r.content}));var o=document.getElementById(e.id);svgedit.sanitize.sanitizeSvgColor(o),(void 0===t.selected||t.selected)&&(this.canvas.clearSelection(),this.canvas.selectOnly([o])),$(o).find(".textarea").each((function(){svgedit.sanitize.sanitizeSvg(this)})),t.thumb_src=INKIVE.ImagesFactory.getOriginalUrl(t.thumb_src),this.trigger("thumb_src",e.getAttribute("id"),t),this.trigger("",e.getAttribute("id")),INKIVE.SVGElementLoading.hide(o),t.is_icon&&$(o).toggleClass("sticker icon")}),this))},i.prototype.fetchSvgUrlContent=function(e,t){var n=_.partial(this.updateContent,e);$.ajax({url:t.svg_url,dataType:"text",success:_.bind((function(r){this.canvas.selectOnly([e]);try{$.parseXML(r),n(_.extend(t,{content:Base64.encode(r)})),this.canvas.clearSelection(),(void 0===t.selected||t.selected)&&this.canvas.selectOnly([document.getElementById(e.id)]),this.trigger("",e.getAttribute("id"))}catch(n){INKIVE.DesignFacade.handle(e.id,"delete"),INKIVE.DesignFacade.create("icon",t)}}),this)})},i.prototype.getAddData=function(e){var t=_.bind(this.getDefinedData,this,e);return{x:t("position.x"),y:t("position.y"),url:t("thumb_src"),width:t("size.width"),height:t("size.height"),favouiritesId:e.sticker_id,replacementId:e.replacement_id,placeholder:e.placeholder,banner:e.banner,smart_asset:e.smart_asset}}},{"./abstract/graphic":37,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],44:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat.js");var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"initialize",value:function(){(0,a.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.mandatory=["rowsCount","columnsCount"]}},{key:"create",value:function(e){var t=this.canvas.addSvgElementFromJson({element:"g",attr:{id:this.canvas.getNextId(),class:"element table"}}),n=this.canvas.addSvgElementFromJson({element:"rect",attr:{id:this.canvas.getNextId(),x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"}}),r=this.canvas.addSvgElementFromJson({element:"g",attr:{class:"table-borders"}});t.appendChild(n),t.appendChild(r);for(var o=new INKIVE.Table.TableEditor(t),i=0;i<e.rowsCount;i++)for(var s=i===e.rowsCount-1,a=o.insertRow(i,e.cellHeight),l=0;l<e.columnsCount;l++){var c=l===e.columnsCount-1,u=a.insertCell(e.x+l*e.cellWidth,e.y+i*e.cellHeight,e.cellWidth,e.cellHeight,l),d=p({},INKIVE.Table.defaultBorderSettings);d.where="".concat(INKIVE.Table.borderFlagsLeft).concat(INKIVE.Table.borderFlagsTop),c&&(d.where+=INKIVE.Table.borderFlagsRight),s&&(d.where+=INKIVE.Table.borderFlagsBottom),o.addBorder(u.cellElement,d)}return this.trigger("",t.getAttribute("id")),(void 0===e.selected||e.selected)&&this.canvas.selectOnly([t]),t.getAttribute("id")}}]),n}(r(e("./abstract/element")).default);t.exports=m},{"./abstract/element":36,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],45:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("./abstract/element"),o=e("../setters/text");function i(){}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.initialize=function(){r.prototype.initialize.call(this),this.mandatory=["text"],_.extend(this.defaults,{content:null,font:{family:"Nunito",size:"21",weight:null,style:null},smart_asset:null,decoration:null})},i.prototype.create=function(e){var t=this.getAddData(e);e.smart_asset&&(t["custom-placeholder"]=e.smart_asset,t["is-defined-placeholder"]=!0);var n=this.canvas.addElement("textarea",t);return o.prototype._processFontFamily.call(this,n,{family:t.text.font_family}),this.trigger("",n.getAttribute("id")),(void 0===e.selected||e.selected)&&this.canvas.selectOnly([n]),n.getAttribute("id")},i.prototype.getAddData=function(e){var t=_.bind(this.getDefinedData,this,e);return{library_text:e.library_text||!1,x:t("position.x"),y:t("position.y"),width:t("size.width"),smart_asset:t("smart_asset"),text:{font_size:t("font.size"),font_family:t("font.family"),font_weight:t("font.weight"),font_style:t("font.style"),text_decoration:t("decoration"),textContent:t("content")}}}},{"../setters/text":87,"./abstract/element":36,"core-js/modules/es.function.bind.js":883}],46:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js");var o=r(e("../getters/video")),i=r(e("../setters/video")),s=r(e("./abstract/element")),a=r(e("../../../factory/images"));function l(){}t.exports=l,l.prototype=new s.default,l.prototype.constructor=l,l.prototype.initialize=function(){s.default.prototype.initialize.call(this),this.mandatory=["thumb_src"],_.extend(this.defaults,{file:null,source:null,thumb_src:null,smart_asset:null})},l.prototype.create=function(e){var t=this._getYoutubeCode(e.source);if(!t)return this.createVideoElement(e);e.source=t||e.source,e.thumb_src=e.thumb_src||"http://img.youtube.com/vi/"+e.source+"/mqdefault.jpg";var n=this._createVideoContainer(e),r=!a.default.isAmazonImage(e.thumb_src);return r&&this._resizeExternalThumbnail(n,e),r||this._smartImageLoad(n,e),this.trigger("",n.id),n.id},l.prototype.createVideoElement=function(e){var t=this.canvas.addElement("video",e);return this._appendCropBox(t,e),this.trigger("",t.getAttribute("id")),(void 0===e.selected||e.selected)&&this.canvas.selectOnly([t]),t.getAttribute("id")},l.prototype._createVideoContainer=function(e){var t=e.source?"https://www.youtube.com/watch?v="+e.source:e.file,n=this.canvas.addSvgElementFromJson({element:"a",attr:{id:this.canvas.getNextId(),class:"element video layoutBox quick-delete","xlink:href":t,"data-video-type":"youtube"}});return this._appendVideoThumbnail(n,e),this._appendYoutubePlayIcon(n),this._appendCropBox(n,e),this.canvas.clearSelection(),this.canvas.selectOnly([n]),n},l.prototype._resizeExternalThumbnail=i.default.prototype._resizeExternalThumbnail,l.prototype._matchBoxToImage=i.default.prototype._matchBoxToImage,l.prototype._matchImageToBox=i.default.prototype._matchImageToBox,l.prototype.updateSize=i.default.prototype.updateSize,l.prototype._smartImageLoad=i.default.prototype._smartImageLoad,l.prototype._appendYoutubePlayIcon=i.default.prototype._appendYoutubePlayIcon,l.prototype._appendVideoThumbnail=function(e,t){var n={x:(t=this.getAddData(t)).x,y:t.y,id:this.canvas.getNextId(),width:t.width,height:t.height,"xlink:href":t.url};t.smart_asset&&(n["custom-placeholder"]=t.smart_asset,n["is-defined-placeholder"]=!0);var r=this.canvas.addSvgElementFromJson({attr:n,element:"image"});e.appendChild(r)},l.prototype.getAddData=function(e){var t=_.bind(this.getDefinedData,this,e);return{x:t("position.x"),y:t("position.y"),url:t("thumb_src"),width:t("size.width"),height:t("size.height")}},l.prototype._appendCropBox=function(e,t){INKIVE.EditorFacade.handle(e.id,"crop",{quiet:!0,scale:1,skip_selection:!0,clip_path:this.getAddData(t)})},l.prototype._getYoutubeCode=o.default.prototype._getYoutubeCode},{"../../../factory/images":127,"../getters/video":61,"../setters/video":88,"./abstract/element":36,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.function.bind.js":883}],47:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.find.js");var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("../../../helpers/svgToImage")),s=e("../../../helpers/dataUrl"),a=r(e("./facade")),l=r(e("../../utils/humps")),c=r(e("../../factory/images")),u=e("../../video");function d(){}d.prototype=new a.default,d.prototype.constructor=d,d.prototype.initialize=function(){a.default.prototype.initialize.call(this),_.bindAll(this,"set","get","create","preview")},d.prototype.preview=function(e,t){var n,r=this;e=e||"full",t=t||{};var s=document.getElementById("svgcontent").cloneNode(!0),a="full"===e?function(){return{size:{width:this.canvas.getResolution().w,height:this.canvas.getResolution().h},position:{x:0,y:0}}}.call(this):this.get(e);switch(e){case"full":n=s.querySelector(".main");break;case"background":n=(0,o.default)(s.querySelectorAll("g.background > :not(title)")).pop();break;default:n=document.getElementById(e)}if(n&&a){var l=a.size.width/a.size.height,c=t.maxwidth||a.size.width,u=t.maxheight||a.size.height,d=l*u>c?c/l:u,p=l*d,h='\n    <svg\n      xmlns="http://www.w3.org/2000/svg" xlinkns="http://www.w3.org/1999/xlink"\n      viewBox="'.concat(a.position.x,", ").concat(a.position.y,", ").concat(a.size.width,", ").concat(a.size.height,'"\n      x="0"\n      y="0"\n      width="').concat(p,'"\n      height="').concat(d,'"\n    >\n      ').concat(t.background?'<rect\n            fill="'.concat(t.background,'"\n            x="').concat(a.position.x,'"\n            y="').concat(a.position.y,'"\n            width="').concat(a.size.width,'"\n            height="').concat(a.size.height,'"\n          ></rect>'):"","\n      ").concat(INKIVE.Helpers.serializeToString(n),"\n    </svg>\n  "),m=this.canvas.svgCanvasToString($(h)[0]);try{var f="image/"+(t.format||(t.background?"jpeg":"png")),g="jpg"===f?t.quality||.6:null,b=INKIVE.Tool._current_design_id;(0,i.default)(m,{position:a.position,pageId:b,height:d,width:p,useTransparentBackground:t.background,type:f,quality:g,quickMode:!0,notify:!1}).then((function(n){b===INKIVE.Tool._current_design_id&&n&&r.propagate("preview",t.isdownload?"download":e,null,n)}))}catch(t){console.error(t),this.propagate("exception",e,null,t)}}else this.propagate("exception",e,null,"Element not found")},d.prototype.delete=function(e,t){this.trigger("predelete",e),this.preSelect(e)&&(_.each(this.canvas.getSelectedElems(),(function(e){var n=l.default.camelize("delete_"+this.getType(e));this[n]&&this[n](e,t)}),this),this.canvas.deleteSelectedElements(),this.trigger("delete",e))},d.prototype.deleteMultiple=function(e){var t=this,n=(0,o.default)(this.canvas.getSelectedElems()),r=n.map((function(e){return e.id}));n.forEach((function(n){var r=l.default.camelize("delete_"+t.getType(n));t[r]&&t[r](n,e)})),this.canvas.deleteSelectedElements(),r.forEach((function(e){return t.trigger("delete",e)}))},d.prototype.deleteImage=function(e){var t=e.getAttribute("xlink:href"),n=c.default.getImageUrl(e);e.classList.contains("quick-delete")&&(e.classList.remove("quick-delete"),e.classList.remove("layoutBox")),!n&&(0,s.isDataURL)(t)&&c.default.blacklistImage(e)},d.prototype.deleteVideo=function(e){e.remove(),(0,u.deleteVideoPlayer)(e)},d.prototype.deleteBackground=function(e,t){var n=$("#svgcontent").find("g.background").find($(e).is("image")?"image":"rect");this.canvas.selectOnly(n),this.canvas.deleteSelectedElements()},d.prototype.duplicate=function(e){this.canvas.cloneSelectedElements(20,20),this.trigger("duplicate")},d.prototype.sendForward=function(){this.canvas.moveUpDownSelected("Up"),this.trigger("send_forward")},d.prototype.sendBackward=function(){this.canvas.moveUpDownSelected("Down"),this.trigger("send_backward")},d.prototype.sendTop=function(){this.canvas.moveToTopSelectedElement(),this.trigger("send_top")},d.prototype.sendBottom=function(){this.canvas.moveToBottomSelectedElement(),this.trigger("send_bottom")},d.prototype.preSelect=function(e,t){if(e){var n="background"===e?$("#svgcontent").children("g.background").children(":not(title)").last()[0]:$("#"+e)[0];if(!n)return!1;this.canvas.selectOnly([n],t)}return this.canvas.getSelectedElems().length>0};var p=new d;t.exports=p;var h=p;n.default=h},{"../../../helpers/dataUrl":632,"../../../helpers/svgToImage":643,"../../factory/images":127,"../../utils/humps":615,"../../video":625,"./facade":48,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-property.js":895,"core-js/modules/web.dom-collections.for-each.js":964}],48:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.reverse.js"),e("core-js/modules/es.array.map.js");var o=e("../abstract/facade"),i={creators:{sticker:e("./creators/sticker"),shape:e("./creators/shape"),image:e("./creators/image"),group:e("./creators/group"),text:e("./creators/text"),icon:e("./creators/icon"),logo:e("./creators/logo"),video:e("./creators/video"),table:e("./creators/table")},setters:{sticker:e("./setters/sticker"),shape:e("./setters/shape"),image:e("./setters/image"),background:e("./setters/background"),text:e("./setters/text"),group:e("./setters/group"),template:e("./setters/template"),icon:e("./setters/icon"),logo:e("./setters/logo"),video:e("./setters/video"),table:e("./setters/table")},getters:{template:e("./getters/template"),text:e("./getters/text"),image:e("./getters/image"),sticker:e("./getters/sticker"),background:e("./getters/background"),group:e("./getters/group"),shape:e("./getters/shape"),icon:e("./getters/icon"),logo:e("./getters/logo"),video:e("./getters/video"),table:e("./getters/table")}};function s(){var t=this;this.handlers={sticker:e("./handlers/sticker"),shape:e("./handlers/shape"),group:e("./handlers/group"),image:e("./handlers/image"),background:e("./handlers/background")},Object.entries(i).forEach((function(e){var n=(0,r.default)(e,2),o=n[0],i=n[1],s={};Object.entries(i).forEach((function(e){var t=(0,r.default)(e,2),n=t[0],o=t[1];s[n]=new o})),t[o]=s}))}s.prototype=new o,s.prototype.constructor=s,s.prototype.initialize=function(){o.prototype.initialize.call(this),_.invoke(this.getters,"initialize"),_.each(this.setters,(function(e,t){e.initialize(),e.on("all",_.partial(this.propagate,t+".update"))}),this),_.each(this.creators,(function(e,t){e.initialize(),e.on("all",_.partial(this.propagate,t+".create"))}),this)},s.prototype.get=function(t,n){var r=e("../restrictions/restrictions");if(void 0===t){var o=$("#svgcontent").children("g.main").children();o=_.filter(o,(function(e){return e.getBBox}));var i=$("#svgcontent").children("g.background");return(i.children("rect").length||i.children("image").length)&&o.unshift(i.children()[0]),_.map(o,a,this).reverse()}var s=t&&1===t.nodeType?t:document.getElementById(t);return a.call(this,s);function a(e){var o=this.getters[t]?t:this.getType(e);if(this.getters[o]){var i=e?this.getters[o].get(e,n):this.getters[o].get(n);if(n)return i;var s=t;e&&(s=$(e).parent().is("g.background")?"background":e.getAttribute("id"));var a=r.getElementName(s),l=r.getAllElementPermissions(s);return _.extend(i,{type:o,name:a,permissions:l})}}},s.prototype.create=function(e,t){if(this.creators[e])return this.creators[e].create(t)},s.prototype.set=function(e,t){if(!_.isString(e)&&!t){t=e;var n=_.toArray(this.canvas.getSelectedElems());_.each(n,(function(e){var t=this.getType(e);i.call(this,this.getType(e),"background"!==t&&e)}),this)}else{var r=$("#"+e)[0],o=this.setters[e]?e:this.getType(r,e);i.call(this,o,r)}function i(n,r){this.setters[n]?(r||this.setters[n].set(t),r&&this.setters[n].set(r,t)):this.propagate("exception",e,null,t)}},s.prototype.propagate=function(e,t,n,r){n&&(r=_.extend(r||{},{id:n}),this.trigger(n+(t?"."+t:""),r)),this.trigger(e+(t?"."+t:""),r)},t.exports=s},{"../abstract/facade":35,"../restrictions/restrictions":118,"./creators/group":38,"./creators/icon":39,"./creators/image":40,"./creators/logo":41,"./creators/shape":42,"./creators/sticker":43,"./creators/table":44,"./creators/text":45,"./creators/video":46,"./getters/background":51,"./getters/group":52,"./getters/icon":53,"./getters/image":54,"./getters/logo":55,"./getters/shape":56,"./getters/sticker":57,"./getters/table":58,"./getters/template":59,"./getters/text":60,"./getters/video":61,"./handlers/background":62,"./handlers/group":63,"./handlers/image":64,"./handlers/shape":65,"./handlers/sticker":66,"./setters/background":70,"./setters/group":71,"./setters/icon":72,"./setters/image":73,"./setters/logo":74,"./setters/shape":83,"./setters/sticker":84,"./setters/table":85,"./setters/template":86,"./setters/text":87,"./setters/video":88,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.object.entries.js":896,"core-js/modules/web.dom-collections.for-each.js":964}],49:[function(e,t,n){"use strict";e("core-js/modules/es.parse-float.js");var r=e("./getter");function o(){}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.initialize=function(){this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.structure={id:null,z_index:null,position:{x:null,y:null},rotation:null,size:{width:null,height:null},opacity:null,locked:null}},o.prototype.getId=function(){return this.element.getAttribute("id")||function(){var e,t=this.editor||INKIVE.Tool.getInstance().editor;do{e=t.getNextId()}while($("#"+e).length);return this.element.setAttribute("id",e),e}.call(this)},o.prototype.getRotation=function(){return this.canvas.getRotationAngle(this.element)},o.prototype.getOpacity=function(){var e=parseFloat(this.element.getAttribute("opacity"));return _.isNaN(e)?1:e},o.prototype.getPositionX=function(){try{this.bb=this.bb||this.element.getBBox()}catch(e){}return this.bb?this.bb.x:0},o.prototype.getPositionY=function(){try{this.bb=this.bb||this.element.getBBox()}catch(e){}return this.bb?this.bb.y:0},o.prototype.getSizeWidth=function(){try{this.bb=this.bb||this.element.getBBox()}catch(e){}return this.bb?this.bb.width:0},o.prototype.getSizeHeight=function(){try{this.bb=this.bb||this.element.getBBox()}catch(e){}return this.bb?this.bb.height:0},o.prototype.getLocked=function(){return $(this.element).hasClass("locked")}},{"./getter":50,"core-js/modules/es.parse-float.js":904}],50:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.to-string.js");var r=e("../../../../utils/humps");function o(){}t.exports=o,o.prototype=_.extend({},Backbone.Events),o.prototype.initialize=function(){this.structure={}},o.prototype.get=function(e,t){this.element=e,this.bb=this.element&&this.element.getBBox(),t=t||"",this.data={},this.collections={},this.processData={};var n=this.getChainAttributes(t),r=_.bind(this.processModels,this,t);return _.each(_.filter(n,o),this.processCollections,this),_.each(_.filter(n,(function(e){return!o(e)})),r,this),this.addCollectionResults(t),this.data;function o(e){return e.split("..").length>1}},o.prototype.processCollections=function(e){var t=e.split(".."),n=t[0],o=t[1];this.collections[n]||function(){var e="get_"+n.replace(/\./g,"_"),t=r.camelize(e);this.collections[n]={},this.processData[n]=this[t]?this[t]():[],_.each(this.processData[n],(function(e,t){this.collections[n][t]={}}),this)}.call(this);var i=this.collections[n],s=r.camelize("get_"+n.replace(/\./g,"_")+"_"+o.replace(/\./g,"_")),a=r.camelize("get_"+o.replace(/\./g,"_"));_.each(this.processData[n],(function(e,t){if(this[s]||e[a]){e=e[a]?e[a](t):this[s](e,t);this.addDataResult(o,e,i[t])}}),this)},o.prototype.addCollectionResults=function(e){var t=new RegExp(e+"[.]?");_.each(this.collections,(function(e,n){this.addDataResult(n.replace(t,""),e)}),this)},o.prototype.processModels=function(e,t){var n="get_"+t.replace(/\./g,"_"),o=r.camelize(n),i=new RegExp(e+"[.]?");this[o]&&this.addDataResult(t.replace(i,""),this[o]())},o.prototype.addDataResult=function(e,t,n){var r,o=_.compact(e.split("..")[0].split(".")),i=n||this.data;if(o.length){for(;o.length>1;)i[r=o.shift()]||(i[r]={}),i=i[r];i[o.shift()]=t}else n?n=t:this.data=t},o.prototype.getChainAttributes=function(e,t){t=t||this.getChainEnd(e);var n=[];return void 0!==t&&!_.isObject(t)&&n.push(e),_.each(t,(function(r,o){e&&(o=e+"."+(_.isArray(t)?"":o)),r?n=_.union(n,this.getChainAttributes(o,r)):n.push(o)}),this),n},o.prototype.getChainEnd=function(e){for(var t,n=_.compact(e.split(".")),r=this.structure;n.length>0;){if(t=n.shift(),void 0===r)return;r=r[t]}return r}},{"../../../../utils/humps":615,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],51:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js");var o=r(e("tinycolor2")),i=e("./abstract/getter"),s=e("../../../../helpers/dataUrl").isDataURL;function a(){}t.exports=a,a.prototype=new i,a.prototype.constructor=a,a.prototype.initialize=function(){i.prototype.initialize.call(this),this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.structure={color:null,source:null,background_id:null,background_removed:!1,image_opacity:null,id:null,flipped:null,position:{x:null,y:null},size:{width:null,height:null}}},a.prototype.get=function(e,t){return i.prototype.get.call(this,$("#svgcontent > .background")[0],t)},a.prototype.getColor=function(){var e=$(this.element).find("rect")[0],t=(0,o.default)(e?e.getAttribute("fill"):"");return t.isValid()&&t.getAlpha()?t.toString():null},a.prototype.getSource=function(){var e=$(this.element).find("image")[0];if(!e)return null;var t=e.getAttribute("xlink:href");return s(t)?"<data>":t},a.prototype.getImageOpacity=function(){var e=$(this.element).find("image")[0];return e?e.getAttribute("opacity"):null},a.prototype.getId=function(){return"background"},a.prototype.getFlipped=function(){var e=$(this.element).find("image");return{vertical:e.hasClass(INKIVE.C.FLIP_IMAGE.VERTICAL),horizontal:e.hasClass(INKIVE.C.FLIP_IMAGE.HORIZONTAL)}},a.prototype.getBackgroundId=function(){var e=$(this.element).find("image")[0];if(!e)return null;var t=e.getAttribute("class");if(t){var n=t.match(/favourites-background-image-id-(\d+)/);return n&&n[1]}},a.prototype.getPositionX=function(){return 0},a.prototype.getPositionY=function(){return 0},a.prototype.getSizeWidth=function(){return this.canvas.contentW},a.prototype.getSizeHeight=function(){return this.canvas.contentH},a.prototype.getBackgroundRemoved=function(){var e=document.querySelector("#svgcontent #svg_background_image");return e&&e.getAttribute("data-background-removed")}},{"../../../../helpers/dataUrl":632,"./abstract/getter":50,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.match.js":920,tinycolor2:1049}],52:[function(e,t,n){"use strict";e("core-js/modules/es.array.map.js");var r=e("./abstract/element"),o=e("../../abstract/facade");function i(){}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.initialize=function(){var e=INKIVE.Tool.getInstance().editor;this.canvas=e.canvas,this.structure={id:null,position:{x:null,y:null},size:{width:null,height:null},elements:null,rotation:null,opacity:null,locked:null,link:null}},i.prototype.getLink=function(){return svgedit.utilities.getHref(this.element)},i.prototype.getElements=function(){return _.chain($(this.element).children(":not(title)")).sortBy((function(e){return-$(e).index()})).map((function(e){return{id:e.getAttribute("id"),type:this.getType(e)}}),this).value()},i.prototype.getType=o.prototype.getType},{"../../abstract/facade":35,"./abstract/element":49,"core-js/modules/es.array.map.js":870}],53:[function(e,t,n){"use strict";var r=e("./logo");function o(){}t.exports=r,o.prototype=new r,o.prototype.constructor=o},{"./logo":55}],54:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js");var r=e("../../../../helpers/dataUrl").isDataURL,o=e("./abstract/element"),i=e("./shape");function s(){}t.exports=s,s.prototype=new o,s.prototype.constructor=s,s.prototype.initialize=function(){o.prototype.initialize.call(this),this.structure=_.extend(this.structure,{source:{url:null},flipped:null,filter:{},background_removed:!1,crop_area:[{position:{x:null,y:null},size:{width:null,height:null},type:null}]})},s.prototype.getSourceUrl=function(){var e=this.element.getAttribute("xlink:href");return r(e)?"<data>":e},s.prototype.getFlipped=function(){return{vertical:$(this.element).hasClass(INKIVE.C.FLIP_IMAGE.VERTICAL),horizontal:$(this.element).hasClass(INKIVE.C.FLIP_IMAGE.HORIZONTAL)}},s.prototype.getCropArea=function(){var e={},t=this.element.getAttribute("clip-path");if(!t)return e;var n=t.match(/url\("?([^")]*)"?\)/)[1];return $(n).children(".layoutClipper").each((function(t,n){e[t]=new i,e[t].element=n})),e},s.prototype.getBackgroundRemoved=function(){return this.element&&this.element.getAttribute("data-background-removed")}},{"../../../../helpers/dataUrl":632,"./abstract/element":49,"./shape":56,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],55:[function(e,t,n){"use strict";var r=e("./abstract/element"),o=e("./sticker"),i=e("../../../factory/images");function s(){}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.initialize=function(){r.prototype.initialize.call(this),this.stickerGetter=new o,this.stickerGetter.initialize(),this.structure=_.extend(this.structure,{is_vector:null,thumb_src:null,shapes:[{type:null,fill:{color:null,colorGroup:null},stroke:{color:null,width:null,dasharray:null}}]})},s.prototype.get=function(e){var t=$(e).is("image")?e:$(e).children("image")[0],n=!t&&e;this.element=e,this.bb=e.getBBox(),this.stickerGetter.element=n,this.stickerGetter.bb=n&&n.getBBox(),this.stickerGetter.data=this.data={},this.stickerGetter.collections=this.collections={},this.stickerGetter.processData=this.processData={};var o=this.structure;n||(this.structure=_.omit(this.structure,"texts","shapes"));var i=r.prototype.get.apply(this,arguments);return this.structure=o,i.is_vector&&!i.thumb_src&&(i.thumb_src=$(e).attr("data-thumb-src")),i},s.prototype.getIsVector=function(){return!!this.stickerGetter.element},s.prototype.getThumbSrc=function(){var e=$(this.element).is("image")?this.element:$(this.element).children("image")[0];return e?i.getOriginalUrl(e.getAttribute("xlink:href")):null},s.prototype.getShapes=function(){return this.stickerGetter.getShapes()},s.prototype.getElementsByColorGroup=o.prototype.getElementsByColorGroup},{"../../../factory/images":127,"./abstract/element":49,"./sticker":57}],56:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.parse-int.js");var o=r(e("tinycolor2")),i=e("./abstract/element");e("./text");function s(){}t.exports=s,s.prototype=new i,s.prototype.constructor=s,s.prototype.initialize=function(){i.prototype.initialize.call(this),this.structure=_.extend(this.structure,{type:null,fill:{color:null,colorGroup:null},stroke:{color:null,width:null,dasharray:null,linejoin:null,linecap:null}})},s.prototype.getType=function(){return this.element.nodeName},s.prototype.getFillColor=function(e){e=_.isElement(e)?e:this.element;var t=(0,o.default)(e.getAttribute("fill")),n=t.isValid()&&t.getAlpha(),r="g"===e.tagName&&!e.querySelector(":not([fill])");return n?r?null:t.toString():null},s.prototype.getFillColorGroup=function(e){return(e&&1===e.nodeType?e:this.element).dataset.colorGroup},s.prototype.getStrokeColor=function(){if(this.element.getAttribute("stroke")||this.element.getAttribute("stroke-width")){var e=(0,o.default)(this.element.getAttribute("stroke")||"#000");if(e.isValid()&&e.getAlpha())return e.toString()}},s.prototype.getStrokeWidth=function(){if(this.element.getAttribute("stroke"))return parseInt(this.element.getAttribute("stroke-width"))||1},s.prototype.getStrokeDasharray=function(){return this.element.getAttribute("stroke-dasharray")},s.prototype.getStrokeLinejoin=function(){return this.element.getAttribute("stroke-linejoin")},s.prototype.getStrokeLinecap=function(){return this.element.getAttribute("stroke-linecap")},s.prototype.getSizeWidth=function(){var e=i.prototype.getSizeWidth.call(this);return e||"line"!==this.element.nodeName?e:this.getStrokeWidth()},s.prototype.getSizeHeight=function(){var e=i.prototype.getSizeHeight.call(this);return e||"line"!==this.element.nodeName?e:this.getStrokeWidth()}},{"./abstract/element":49,"./text":60,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.to-string.js":911,tinycolor2:1049}],57:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.string.includes.js");var i=r(e("./abstract/element")),s=r(e("./text")),a=r(e("./shape")),l=r(e("tinycolor2"));function c(){}t.exports=c,c.prototype=new i.default,c.prototype.constructor=c,c.prototype.initialize=function(){i.default.prototype.initialize.call(this),this.supportedSubElements=["image","ellipse","line","rect","text","polygon","circle","ellipse","path","g"],this.structure=_.extend(this.structure,{placeholder:null,banner:null,texts:[{id:null,content:null,decoration:null,color:null,anchor:null,font:{family:null,weight:null,style:null}}],shapes:[{type:null,fill:{color:null,colorGroup:null},stroke:{color:null,width:null,dasharray:null}}]})},c.prototype.get=function(e){var t=i.default.prototype.get.apply(this,arguments);return t.id&&!t.thumb_src&&(t.thumb_src=e.getAttribute("data-thumb-src")),t},c.prototype.getTexts=function(){return _.map($(this.element).find(".textarea"),(function(e){var t=new s.default;return t.element=e,t.textarea=(new INKIVE.Text.Textarea).setDOM(e),t.text=t.textarea.text,t}))},c.prototype.getShapes=function(){var e={};return _.each(this.getElements(),(function(t,n){e[n]=new a.default,e[n].element=t})),e},c.prototype.getElementsWithColor=function(e){e=e||this.element;var t={},n=["path","line","polygon","rect","circle","ellipse"];return _.each(this.getElements(e),(function(e,r){var o=$(e).closest("g")[0],i=!(o&&$.contains(o,e)&&o.getAttribute("fill"))&&_.contains(n,e.tagName);(e.getAttribute("fill")||e.getAttribute("stroke")||i)&&(t[r]=e)})),t},c.prototype.getElementsByColorGroup=function(e,t){var n=t.colorGroup,r=t.previousColor;return e.reduce((function(e,t){var o=t.getAttribute("fill")||t.getAttribute("stroke");return function(e){if(["path","line","polygon","rect","circle","ellipse"].includes(e.tagName))return!0;if("g"===e.tagName)return e&&!e.querySelector("[fill]");return!1}(t)&&function(e,t){return e&&(0,l.default)(e).toString()===(0,l.default)(t).toString()}(o,r)&&function(e,t){return!e.dataset.colorGroup||e.dataset.colorGroup===String(t)}(t,n)?(void 0===t.dataset.colorGroup&&(t.dataset.colorGroup=n),e.concat(t)):e}),[])},c.prototype.getElements=function(e){var t=this;return e=e||this.element,(0,o.default)(e.children).reduce((function(e,n){var r=n.classList.contains("rect.background"),i="g"===n.tagName,s=n.classList.contains("textarea");if(t.supportedSubElements.includes(n.tagName)){if(i&&!s)return[].concat((0,o.default)(e),(0,o.default)(t.getElements(n)));if(!r)return[].concat((0,o.default)(e),[n])}return e}),[e])},c.prototype.getPlaceholder=function(e){return(e=e||this.element).classList.contains("placeholder-frame")},c.prototype.getBanner=function(e){return(e=e||this.element).classList.contains("text-banner")}},{"./abstract/element":49,"./shape":56,"./text":60,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.includes.js":915,tinycolor2:1049}],58:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/get")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var d=function(e){(0,a.default)(n,e);var t=u(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,c.default)(n.prototype),"initialize",this).call(this)}}]),n}(r(e("./abstract/element")).default);t.exports=d},{"./abstract/element":49,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"core-js/modules/es.reflect.construct.js":908}],59:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.match.js");var r=e("./abstract/getter");function o(){}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.initialize=function(){this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.structure={size:{width:null,height:null},format:{id:null},grid:{index_in_set:null,number_of_photos:null},designed:{id:null},restricted:{base_page:null}}},o.prototype.get=function(e,t){return t?r.prototype.get.call(this,e,t):r.prototype.get.call(this,$("#svgcontent")[0],e)},o.prototype.getSizeWidth=function(){return this.canvas.contentW},o.prototype.getSizeHeight=function(){return this.canvas.contentH},o.prototype.getDesignedId=function(){return this.getClassExpData(/layout-id-(\d+)/)},o.prototype.getFormatId=function(){return this.getClassExpData(/format-id-(\d+)/)},o.prototype.getGridIndexInSet=function(){return this.getClassExpData(/grid-id-[\d+]-(\d+)/)},o.prototype.getGridNumberOfPhotos=function(){return this.getClassExpData(/grid-id-(\d+)-[\d+]/)},o.prototype.getRestrictedBasePage=function(){return this.getClassExpData(/base-page-(\d+)/)},o.prototype.getClassExpData=function(e){var t,n=$(this.element).children("g.main").attr("class");return n&&_.any(n.split(" "),(function(n){var r=n.match(e);if(r)return t=r[1]})),t}},{"./abstract/getter":50,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.split.js":926}],60:[function(e,t,n){"use strict";e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.string.replace.js");var r=e("./abstract/element");function o(){}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.initialize=function(){r.prototype.initialize.call(this),this.structure=_.extend(this.structure,{color:null,anchor:null,content:null,decoration:null,bullet_points:null,auto_adjustable:null,font:{family:null,size:null,weight:null,style:null,customId:null},spacing:{letter:null,word:null,line:null,margin:null},stroke:{width:null,color:null,dasharray:null},columns:null})},o.prototype.get=function(e){return this.textarea=(new INKIVE.Text.Textarea).setDOM(e),this.text=this.textarea.text,r.prototype.get.apply(this,arguments)},o.prototype.getStrokeColor=function(){return this.text.stroke},o.prototype.getStrokeWidth=function(){return this.text.stroke_width},o.prototype.getStrokeDasharray=function(){return this.text.stroke_dasharray},o.prototype.getSpacingParagraph=function(){return this.text.paragraph_spacing},o.prototype.getSpacingFirstLineMargin=function(){return this.text.first_line_margin},o.prototype.getSpacingWord=function(){return this.text.word_spacing},o.prototype.getSpacingLine=function(){return this.text.line_spacing},o.prototype.getSpacingMargin=function(){return this.text.line_margin},o.prototype.getFontFamily=function(){return this.text.font_family},o.prototype.getFontSize=function(){return this.text.font_size},o.prototype.getFontWeight=function(){return this.text.font_weight},o.prototype.getFontStyle=function(){return this.text.font_style},o.prototype.getFontCustomId=function(){return this.text.custom_font_id},o.prototype.getDecoration=function(){return this.text.text_decoration},o.prototype.getAnchor=function(){return this.text.text_anchor},o.prototype.getColor=function(){return this.text.fill},o.prototype.getColumns=function(){return this.text.columns},o.prototype.getBulletPoints=function(){return this.text.bullets},o.prototype.getAutoAdjustable=function(){return this.text.auto_adjustable},o.prototype.getSpacingLetter=function(){var e=this.text.letter_spacing;return _.isArray(this.text.letter_spacing)&&(e=this.text.letter_spacing.length<2?0:_.reduce(this.text.letter_spacing,(function(e,t){return e+parseFloat(t)}),0)/(this.text.letter_spacing.length-1)),parseInt(e)},o.prototype.getContent=function(){var e=new RegExp(String.fromCharCode(160),"g");return this.text.textContent.replace(e," ")}},{"./abstract/element":49,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.replace.js":924}],61:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("./abstract/element")),i=r(e("../../../factory/images")),s=e("../../../utils/youtube");function a(){}t.exports=a,a.prototype=new o.default,a.prototype.constructor=a,a.prototype.initialize=function(){o.default.prototype.initialize.call(this),this.structure=_.extend(this.structure,{autoplay:null,controls:null,duration:null,fullscreen:null,height:null,loop:null,movetonext:null,mute:null,source:null,thumbnail:null,url:null,width:null,x:null,y:null,youtube:!1})},a.prototype.getSource=function(){var e=this.element.getAttribute("xlink:href");return this._getYoutubeCode(e)||e},a.prototype.getThumbSrc=function(){var e=$(this.element).children("image")[0];if(!e)return null;var t=e.getAttribute("xlink:href");return i.default.getVersionUrl(t,"thumb")},a.prototype.getAutoplay=function(){return this.element.classList.contains("autoplay")},a.prototype.getMovetonext=function(){return this.element.classList.contains("movetonext")},a.prototype.getControls=function(){return this.element.classList.contains("controls")},a.prototype.getFullscreen=function(){return this.element.classList.contains("fullscreen")},a.prototype.getLoop=function(){return this.element.classList.contains("loop")},a.prototype.getMute=function(){return this.element.classList.contains("mute")},a.prototype.getYoutube=function(){return!!this._getYoutubeCode(this.element.getAttribute("xlink:href"))},a.prototype._getYoutubeCode=s.getYoutubeCode},{"../../../factory/images":127,"../../../utils/youtube":624,"./abstract/element":49,"@babel/runtime/helpers/interopRequireDefault":663}],62:[function(e,t,n){"use strict";var r,o=e("@babel/runtime/helpers/interopRequireDefault"),i=o(e("@babel/runtime/regenerator")),s=o(e("@babel/runtime/helpers/asyncToGenerator")),a=o(e("../../../utils/background-removal-manager")),l=o(e("../../../factory/images"));t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},flipVertical:function(e){$("#"+e.id+"-loader").length?this.canvas.call("advice.show","image-flip-disabled"):(this.canvas.selectOnly([e]),INKIVE.DesignFacade.set({flipped:{vertical:!0}}))},flipHorizontal:function(e){$("#"+e.id+"-loader").length?this.canvas.call("advice.show","image-flip-disabled"):(this.canvas.selectOnly([e]),INKIVE.DesignFacade.set({flipped:{horizontal:!0}}))},removeBackground:(r=(0,s.default)(i.default.mark((function e(){var t,n,r,o,s,c,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=INKIVE.DesignFacade.get("background").source)&&"<data>"!==t){e.next=4;break}return this.canvas.call("advice.show","save-first"),e.abrupt("return");case 4:if(!t){e.next=21;break}return n=document.querySelector(".background > image").id,document.querySelector("#svgcontent #svg_background_image").setAttribute("data-background-removed","true"),this.trigger("remove_background.start",n),r=l.default.getAllImageVersions(t),o=r.original,s=r.largeweb,c=s||o,e.prev=10,e.next=13,a.default.removeBackground(c);case 13:u=e.sent,INKIVE.DesignFacade.set("background",{source:{url:u,preload:!0},keep_box_size:!0,background_removed:!0}),this.trigger("remove_background.success",n),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),this.trigger("remove_background.error",n);case 21:case"end":return e.stop()}}),e,this,[[10,18]])}))),function(){return r.apply(this,arguments)})},Backbone.Events)},{"../../../factory/images":127,"../../../utils/background-removal-manager":610,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682}],63:[function(e,t,n){"use strict";t.exports=_.extend({initialize:function(){var e=INKIVE.Tool.getInstance();this.canvas=e.editor.canvas},ungroup:function(e){this.canvas.selectOnly([e]),this.canvas.ungroupSelectedElement(),this.trigger("ungroup")}},Backbone.Events)},{}],64:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var o,i,s=r(e("@babel/runtime/regenerator")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("../../../utils/background-removal-manager")),c=r(e("../../../modules/background-removal")),u=r(e("../../../factory/images"));t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},flipVertical:function(e){$("#"+e.id+"-loader").length?this.canvas.call("advice.show","image-flip-disabled"):(this.canvas.selectOnly([e]),INKIVE.DesignFacade.set({flipped:{vertical:!0}}))},flipHorizontal:function(e){$("#"+e.id+"-loader").length?this.canvas.call("advice.show","image-flip-disabled"):(this.canvas.selectOnly([e]),INKIVE.DesignFacade.set({flipped:{horizontal:!0}}))},removeBackgroundAndEdit:(i=(0,a.default)(s.default.mark((function e(t){var n,r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.API.fetchImageData(t);case 3:return n=e.sent,r=n.id,o=n.secret,e.next=8,c.default.SDK.editBackground(r,o);case 8:if("result-generated"===e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,c.default.API.fetchGeneratedImageUrl(r);case 13:return e.abrupt("return",e.sent);case 16:return e.prev=16,e.t0=e.catch(0),INKIVE.C.DEBUG&&console.warn("[Background Removal]",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),function(e){return i.apply(this,arguments)}),removeBackground:(o=(0,a.default)(s.default.mark((function e(t){var n,r,o,i,a,c,d,p;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||this.canvas.getSelectedElems()[0],(n=INKIVE.DesignFacade.get(t.id).source.url)&&"<data>"!==n){e.next=7;break}return this.canvas.call("advice.show","save-first"),this.trigger("remove_background.error",t.id),e.abrupt("return");case 7:if(this.canvas.selectOnly([t]),this.trigger("remove_background.start",t.id),e.prev=9,r=INKIVE.C.FEATURE_FLAG.brand_assets.includes("use_clipping_magic"),o=u.default.getAllImageVersions(n),i=o.original,a=o.largeweb,c=r&&a||i,t.removeAttribute("data-hash"),e.t0=r,!e.t0){e.next=19;break}return e.next=18,this.removeBackgroundAndEdit(c);case 18:e.t0=e.sent;case 19:if(!(d=e.t0)&&void 0!==d){e.next=24;break}e.t1=d,e.next=27;break;case 24:return e.next=26,l.default.removeBackground(c);case 26:e.t1=e.sent;case 27:if(p=e.t1){e.next=30;break}return e.abrupt("return",this.trigger("remove_background.skip",t.id));case 30:INKIVE.DesignFacade.set(t.id,{source:{url:p,preload:!0},keep_box_size:!0,background_removed:!0}),this.trigger("remove_background.success",t.id),e.next=37;break;case 34:e.prev=34,e.t2=e.catch(9),this.trigger("remove_background.error",t.id);case 37:case"end":return e.stop()}}),e,this,[[9,34]])}))),function(e){return o.apply(this,arguments)})},Backbone.Events)},{"../../../factory/images":127,"../../../modules/background-removal":179,"../../../utils/background-removal-manager":610,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.string.includes.js":915}],65:[function(e,t,n){"use strict";t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},flipVertical:function(e){this.canvas.selectOnly([e]),this.canvas.setFlip("v"),this.trigger("flip_vertical")},flipHorizontal:function(e){this.canvas.selectOnly([e]),this.canvas.setFlip("h"),this.trigger("flip_horizontal")},convertToImageBox:function(e){var t=this.canvas.getBBox(e),n=this.canvas.copyElem(e);n.removeAttribute("stroke"),n.removeAttribute("stroke-width"),n.removeAttribute("stroke-dasharray"),n.removeAttribute("stroke-linejoin"),n.removeAttribute("stroke-linecap"),n.removeAttribute("stroke-opacity"),n.removeAttribute("fill"),n.setAttribute("fill-opacity","1"),this.canvas.deleteSelectedElements(),n.removeAttribute("id");this.canvas.runExtensions("addLayoutBox",{elem:n,clipPathBB:t});INKIVE.Tool.autoSave(n)}},Backbone.Events)},{}],66:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},flipVertical:function(e){this.canvas.selectOnly([e]),this.canvas.setFlip("v"),this.trigger("flip_vertical")},flipHorizontal:function(e){this.canvas.selectOnly([e]),this.canvas.setFlip("h"),this.trigger("flip_horizontal")},explode:function(e){if("g"===e.tagName&&$(e).hasClass("sticker")&&e.childNodes.length>1){var t=e.parentNode,n=e.nextSibling;$(e).find(".textarea, .layoutBox").length>0?this._explodeSubelement(e,t,n):this._explode(e,t,n),this.canvas.clearSelection(),this.trigger("explode")}},_explodeSubelement:function(e,t,n){_.each($(e).find(".textarea, .layoutBox"),(function(r){if(r=t.insertBefore(r,n),this._updateClasses(r),$(r).hasClass("layoutBox")){var o=$("#svgcontent>defs").get(0);if(!o){var i=$("#svgcontent").get(0);o=window.document.createElementNS(svgedit.NS.SVG,"defs"),i.insertBefore(o,i.firstChild)}$(e).find("defs clippath").each((function(t,n){var r=n.parentNode;o.insertBefore(n,o.firstChild),e.removeChild(r)}))}}),this),this.canvas.clearSelection()},_explode:function(e,t,n){for(;e.firstChild;){var r=e.firstChild;if($(r).is("rect.background"))r.parentNode.removeChild(r);else{for(var o=0;o<r.childNodes.length;o++){var i=r.childNodes[o];if("g"!==i.tagName&&"rect"!==i.tagName){var s=i.parentNode,a=i.nextSibling;a&&s.insertBefore(i,a),a||s.appendChild(i)}}if(!r.childNodes.length&&"g"!==r.tagName){var l=document.createElementNS(svgedit.NS.SVG,"g");l.appendChild(r),r=l}r=t.insertBefore(r,n),this._updateClasses(r)}}},_updateClasses:function(e){var t=$(e).find("text").length?"textarea":$(e).is("image[clip-path]")?"layoutBox":"sticker";svgedit.utilities.assignAttributes(e,{class:"element "+t}),svgedit.utilities.assignAttributes(e,{id:this.canvas.getNextId()})}},Backbone.Events)},{"core-js/modules/es.array.find.js":859}],67:[function(e,t,n){"use strict";e("core-js/modules/es.string.link.js"),e("core-js/modules/es.array.index-of.js");var r=e("../../../../utils/humps");function o(){this.handledAttributes=["smart_asset","position","rotation","opacity","size","locked","link"]}t.exports=o,o.prototype=_.extend({},Backbone.Events),o.prototype.initialize=function(){this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,_.bindAll(this,"set")},o.prototype.set=function(e,t){_.each(t,(function(n,o){_.contains(this.handledAttributes,o)&&this[r.camelize("update_"+o)](e,t)}),this),t.skipHistory=t.is_initial_load||t.skipHistory,this.trigger("",e.getAttribute("id"),t)},o.prototype.selectElement=function(e){var t=_.compact(_.toArray(this.canvas.getSelectedElems()));1===t.length&&t[0]===e||(this.canvas.clearSelection(),this.canvas.selectOnly([e]))},o.prototype.updateSmartAsset=function(e,t){t.smart_asset?(e.setAttribute("custom-placeholder",t.smart_asset),e.setAttribute("is-defined-placeholder",!0)):(e.removeAttribute("custom-placeholder"),e.removeAttribute("is-defined-placeholder")),this.trigger("smart_asset",e.getAttribute("id"),{smart_asset:t.smart_asset})},o.prototype.updatePosition=function(t,n){var r=n.position,o=t.getBBox(),i=e("../../../editor/editor").handle("zoom","get");this.selectElement(t),this.canvas.moveSelectedElements((r.x-o.x)*i,(r.y-o.y)*i),this.trigger("position",t.getAttribute("id"),{position:r})},o.prototype.updateRotation=function(e,t){this.selectElement(e),this.canvas.setRotationAngle(t.rotation),this.trigger("rotation",e.getAttribute("id"),{rotation:t.rotation})},o.prototype.updateOpacity=function(e,t){this.updateAttributeNoUndo(e,"opacity",t.opacity),this.trigger("opacity",e.getAttribute("id"),{opacity:t.opacity})},o.prototype.updateLocked=function(e,t){$(e).toggleClass("locked",t.locked),this.trigger("locked",e.getAttribute("id"),{locked:t.locked}),this.canvas.selectorManager.requestSelector(e).showGrips(!t.locked)},o.prototype.updateSize=function(e,t){var n=t.size;if(n.width||n.height){var r=$("#svgroot").get(0),o=e.getBBox(),i=r.createSVGTransform(),s=r.createSVGTransform(),a=r.createSVGTransform(),l=svgedit.transformlist.getTransformList(e);if(!n.width||!n.height){var c=o.width/o.height;n.width||(n.width=n.height*c),n.height||(n.height=n.width/c)}var u=o.x+o.width/2,d=o.y+o.height/2;i.setTranslate(u,d),s.setScale(n.width/o.width,n.height/o.height),a.setTranslate(-u,-d),l.appendItem(i),l.appendItem(s),l.appendItem(a),svgedit.recalculate.recalculateDimensions(e,o)}},o.prototype.updateAttributeNoUndo=function(e,t,n){this.canvas.changeSelectedAttributeNoUndo(t,n,[e])},o.prototype.updateLink=function(e,t){this.canvas.selectOnly([e]);var n=t.link.href,r=t.link.page,o=null;n?o=INKIVE.Helpers.isUrlValid(n)||0===n.indexOf("https://")?n:"https://"+n:r&&(o="#"+r),o?this.canvas.makeHyperlink(o):this.canvas.removeHyperlink(),this.trigger("update_link",e.getAttribute("id"),t)}},{"../../../../utils/humps":615,"../../../editor/editor":91,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.string.link.js":918}],68:[function(e,t,n){"use strict";var r=e("./element");function o(){}t.exports=o,o.prototype=new r,o.prototype.constructor=o},{"./element":67}],69:[function(e,t,n){"use strict";var r=e("../../creators/sticker");t.exports={setCheckOnce:function(){return!window.Android&&this.appBridge.version.isApp("desygner")&&this.appBridge.version.isEqual("1.1.3")},set:function(e){this.stickerCreator||(this.stickerCreator=new r,this.stickerCreator.initialize()),this.stickerCreator.create(e)}}},{"../../creators/sticker":43}],70:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.split.js");var o=r(e("../../../utils/humps")),i=r(e("./abstract/element")),s=r(e("./image")),a=r(e("../../../factory/images")),l=e("../../../../helpers/dataUrl");function c(){this.handledAttributes=["color","source","image_opacity","base_64","flipped"]}t.exports=c,c.prototype=new i.default,c.prototype.constructor=c,c.prototype.set=function(e){_.each(e,(function(t,n){_.contains(this.handledAttributes,n)&&this[o.default.camelize("update_"+n)](e)}),this)},c.prototype.updateBase64=function(e){e.source=e.base_64,e.from_base_64=!1,e.smart_load=!1,this.updateSource(e)},c.prototype.updateSource=function(e){var t=this;this.backgroundSourceLoaded=!1,e.source.url&&this._sanitizeSourceUrl(e),e.licenced_url&&(e.source=e.licenced_url),_.isString(e.source)&&void 0===e.from_base_64&&(0,l.isDataURL)(e.source)&&(e.from_base_64=!0),e.source.base_64&&this._sanitizeSourceBase64(e),e.external=this.isExternal(e);var n=$("#svgcontent").children("g.background").find("image");if(this.lastSource=e.source=INKIVE.Helpers.getCORSSecureUrl(e.source),n.length&&null===INKIVE.ImagesFactory.getImageUrl(n[0]))INKIVE.ImagesFactory.setImageUrl(n.get(0),e.source),this.backgroundSourceLoaded=!0,this._triggerSourceEvent(n.attr("id"),e);else{if(n.attr("xlink:href")===e.source||n.attr("data-original-href")===e.source)return;e.attrs||n.removeAttr("class"),this._loadLowResolutionBackground(n[0],e).then((function(n){e.is_initial_load||t._triggerSourceEvent(n.getAttribute("id"),e,"updating_source"),e.external_source!==INKIVE.C.SHUTTERSTOCK||e.licenced_url?(e.external&&t.resizeExternalPhoto(n,e),e.external||t.onVersionData(n,e)):t.processSstkProBackground(e,n)}))}},c.prototype._sanitizeSourceUrl=function(e){e.source=e.source.url,e.smart_load=e.source.smart_load},c.prototype._sanitizeSourceBase64=function(e){e.base_64=e.source.base_64,e.source=e.source.base_64,e.smart_load=!1},c.prototype.onVersionData=function(e,t){if(this._isSameBackground(t)){this.cancelImageLoading=!1;var n=void 0===t.smart_load||t.smart_load,r=this._getBackgroundSize(t.attrs),o=_.bind((function(){this.cancelImageLoading=!0}),this);t.filter=$(e).attr("filter"),a.default.smartLoad(t.source,r,_.bind((function(r,i){if(INKIVE.DesignFacade.off("delete",o),this._isSameBackground(t)&&!this.cancelImageLoading){var s;if(this.lastSource=t.source=r===INKIVE.C.Status.success?i.src:t.source,$(e).removeClass("resizing"),n||!e)s=this._createImageBackground(t),n&&this.updateResolution(s,t);else{this.backgroundSourceLoaded=!0;var a=INKIVE.Helpers.getCORSSecureUrl(t.source),l=t.previous_image_flipped?t.previous_image_flipped:INKIVE.DesignFacade.get("background").flipped;l&&(l.horizontal||l.vertical)?this.updateFlipped({flipped:l},a):svgedit.utilities.assignAttributes(e,{"xlink:href":a})}this.updateImageOpacity(t,e),this.updateFilter(t,s),this.updateBackgroundRemoved(t),t.base_64&&!t.from_base_64&&INKIVE.ImagesFactory.setImageUrl($("#svgcontent").children("g.background").find("image").get(0),null),this.backgroundSourceLoaded&&this._triggerSourceEvent(e.getAttribute("id"),t)}}),this),t.external||t.background_removed)}},c.prototype._createImageBackground=function(e){var t=this.canvas.getSelectedElems(),n=_.any(t,(function(e){return $(e).parent().is(".background")})),r=this.canvas.addElement("background",{type:"image",data:e.source,attrs:e.attrs,old_image_id:e.old_image_id});return n&&this.canvas.selectOnly([r]),this._preloadBackgroundImage(e).then(_.bind((function(t){if(this._isSameBackground(e)){if(!e.attrs){var n=this._getBackgroundSize(t);e.attrs={x:(this.canvas.contentW-n.width)/2,y:(this.canvas.contentH-n.height)/2,width:n.width,height:n.height}}r.setAttribute("x",e.attrs.x),r.setAttribute("y",e.attrs.y),r.setAttribute("width",e.attrs.width),r.setAttribute("height",e.attrs.height)}}),this)),r},c.prototype.updateColor=function(e){this.editor.replaceBackground({type:"color",data:e.color}),this.trigger("color",null,{color:e.color})},c.prototype.updateResolution=function(e,t){a.default.smartLoad(t.source,this._getBackgroundSize(),_.bind((function(n,r){if(this._isSameBackground(t)&&n===INKIVE.C.Status.success){this.lastSource=t.source=r.src;var o=INKIVE.Helpers.getCORSSecureUrl(t.source),i=t.previous_image_flipped?t.previous_image_flipped:INKIVE.DesignFacade.get("background").flipped;i&&(i.horizontal||i.vertical)?this.updateFlipped({flipped:i},o):svgedit.utilities.assignAttributes(e,{"xlink:href":o}),this.backgroundSourceLoaded=!0,t.from_base_64&&INKIVE.ImagesFactory.setImageUrl(e,null),this._triggerSourceEvent(e.id,t)}}),this),t.external)},c.prototype.updateImageOpacity=function(e,t){void 0!==e.image_opacity&&(t=t||$("g.background image").get(0))&&svgedit.utilities.assignAttributes(t,{opacity:e.image_opacity})},c.prototype.updateFilter=function(e,t){var n=$("g.background image"),r=$("#svgcontent").find("filter").is("[id='filter_svg_background_image']"),o=n.attr("id");t=t||n[0],e.filter?$(t).attr("filter",e.filter):r&&$(t).attr("filter","url(#filter_"+o+")")},c.prototype.updateBackgroundRemoved=function(e){var t=document.querySelector("g.background image");t&&(e.background_removed?t.setAttribute("data-background-removed","true"):t.removeAttribute("data-background-removed"))},c.prototype.updateFlipped=function(e,t){var n=$("g.background image").get(0);this.canvas.setFlipImage(n.id,e.flipped,t),this.trigger("flipped",n.getAttribute("id"),e)},c.prototype._triggerSourceEvent=function(e,t,n){n=n||"source";var r={id:e,source:!(0,l.isDataURL)(t.source)&&t.source};if(this.trigger(n,null,r),!t.is_initial_load&&this.backgroundSourceLoaded){var o=t.old_image_id;if(o){var i=INKIVE.ImagesFactory.getImageUrl(o,t.source);i&&INKIVE.ImagesFactory.setImageUrl($("#"+e).get(0),i)}this.trigger("source.loaded",null,r)}},c.prototype._isSameBackground=function(e){return this.lastSource===e.source},c.prototype._preloadBackgroundImage=function(e){var t=new Image,n=$.Deferred();return t.src=INKIVE.Helpers.getCORSSecureUrl(e.source),t.onload=_.bind((function(){n.resolve(t),this.updateFilter(e)}),this),n.promise()},c.prototype._getBackgroundSize=function(e){var t=this._getBleed(),n=this.canvas.contentW,r=this.canvas.contentH;if(t&&(n+=t.left+t.right,r+=t.top+t.bottom),!e)return{width:n,height:r};var o=n/e.width,i=r/e.height;return o>i?{width:n,height:e.height*o}:{height:r,width:e.width*i}},c.prototype.isExternal=function(e){return s.default.prototype.isExternal.call(this,{source:{url:e.source}})},c.prototype.resizeExternalPhoto=function(e,t){this._preloadBackgroundImage(t).then(_.bind((function(n){var r=function(){var e=this._getBackgroundSize(n),t=a.default.getRightSizeUrl("https://static.desygner.com/thumb/",e),r=_.last(_.compact(t.split("/")))||"web";"thumb"===r&&(r="mobile");"original"===r&&(r="largeweb");return r}.call(this),o={book_id:INKIVE.C.BOOK.id,photo_url:a.default.getOriginalUrl(t.source)||t.source,platform:r},i=INKIVE.C.BASE_URL+"inkive/resizeexternalsearchphoto";$(e).addClass("resizing"),this.trigger("resize_external",e.getAttribute("id"));var s=_.bind((function(){$.api(i,"POST",o,_.bind((function(n){if(this._isSameBackground(t)){if("success"===n.STATUS){var o={thumb:n.MESSAGE.replace("/"+r+"/","/thumb/"),mobile:n.MESSAGE.replace("/"+r+"/","/mobile/"),tab:n.MESSAGE.replace("/"+r+"/","/tab/"),web:n.MESSAGE.replace("/"+r+"/","/web/"),largeweb:n.MESSAGE.replace("/"+r+"/","/largeweb/"),original:n.MESSAGE.replace("/"+r+"/","/original/")};this.lastSource=t.source=n.MESSAGE,a.default.addImageData(o,a.default.defaultAmazonDataNames)}this.onVersionData(e,t)}}),this))}),this);t.ab_id?a.default.getExternalPhotoById({id:t.ab_id,type:"ab"},(function(e){o.photo_url=e,s()})):s()}),this))},c.prototype._loadLowResolutionBackground=function(e,t){var n=new Image,r=a.default.getVersionUrl(t.source,"thumb"),o=$.Deferred(),i=t.previous_image_filter;return e&&_.isNumber($(e).attr("opacity"))&&$(e).attr("opacity")<.2&&$(e).attr("opacity",1),e=e||this.canvas.addElement("background",{type:"image",data:r,attrs:t.attrs}),n.src=r,n.onload=_.bind((function(){if(!t.attrs){var s=this._getBackgroundSize(n);t.attrs={x:(this.canvas.contentW-s.width)/2,y:(this.canvas.contentH-s.height)/2,width:s.width,height:s.height,filter:i}}var a=$("#svgcontent").children("g.background").find("image")[0];if(a){var l=INKIVE.Helpers.getCORSSecureUrl(r),c=t.previous_image_flipped?t.previous_image_flipped:INKIVE.DesignFacade.get("background").flipped;c&&(c.horizontal||c.vertical)?this.updateFlipped({flipped:c},l):svgedit.utilities.assignAttributes(a,{"xlink:href":l}),a.setAttribute("x",t.attrs.x),a.setAttribute("y",t.attrs.y),a.setAttribute("width",t.attrs.width),a.setAttribute("height",t.attrs.height),t.previous_image_filter&&a.setAttribute("filter",t.attrs.filter)}o.resolve(e)}),this),n.onerror=_.bind(o.resolve,o,e),o.promise()},c.prototype._getBleed=function(){var e=this.canvas.runExtensions("getBleedValues");if(e.present){var t=INKIVE.Helpers.convertUnitsToPixels;return{left:t(e.left,e.units),right:t(e.right,e.units),top:t(e.top,e.units),bottom:t(e.bottom,e.units)}}},c.prototype.processSstkProBackground=function(e){function t(){INKIVE.DesignFacade.trigger("background.update.source"),svgedit.select.getSelectorManager().releaseAllSelectors()}e.subscription_image?INKIVE.DesygnerApi.post("payment/gateway/stripe/process",e.subscription_image).then((function(e){e.info?INKIVE.EditorFacade.handle("shopping_cart","on_payment",e):t()})):INKIVE.DesignFacade.once("image.create.source.url",t)}},{"../../../../helpers/dataUrl":632,"../../../factory/images":127,"../../../utils/humps":615,"./abstract/element":67,"./image":73,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],71:[function(e,t,n){"use strict";var r=e("./abstract/element");function o(){this.handledAttributes=["rotation","opacity","locked","link"]}t.exports=o,o.prototype=new r,o.prototype.constructor=o},{"./abstract/element":67}],72:[function(e,t,n){"use strict";var r=e("./logo"),o=e("../creators/icon"),i=e("./sticker");function s(){this.handledAttributes=_.union(["shapes","thumb_src","is_vector"],this.handledAttributes),this.supportedSubElements=["image","ellipse","line","rect","text","polygon","circle","ellipse","path","g"]}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.updateContent=o.prototype.updateContent,s.prototype.getElementsByColorGroup=i.prototype.getElementsByColorGroup},{"../creators/icon":39,"./logo":74,"./sticker":84}],73:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=e("./abstract/element"),a=e("../../../factory/images"),l=e("../../../../helpers/dataUrl").isDataURL;function c(){this.handledAttributes=_.union(["source","flipped"],this.handledAttributes)}t.exports=c,c.prototype=new s,c.prototype.constructor=c,c.prototype.updateSource=function(e,t){t.external=void 0===t.source.external_resize?this.isExternal(t):t.source.external_resize;var n=void 0===t.source.smart_load||t.source.smart_load;if(t.external&&this.resizeExternalPhoto(e,t),this.removeFlippedAttributesIfNewImage(e,t),this.removeNoPlaceholderClassIfReplacedImage(e,t),!t.external){if(t.external_source===INKIVE.C.SHUTTERSTOCK&&!t.licenced_url)return void this.processSstkProImage(t,e);if(t.source.base_64)this.updateSourceBase64(e,t);else{var r=n;(!n||t.source.preload)&&this.updateSourceUrl(e,t,r),n&&this.onVersionData(e,t)}}var o=_.extend(_.clone(t.source),{url:!l(t.source.url)&&t.source.url});this.refreshPlaceholderButtons(e,t),this.updateSmartAssets(e,t),this.trigger("source",e.getAttribute("id"),{source:o})},c.prototype.processSstkProImage=function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.subscription_image){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,INKIVE.DesygnerApi.post("payment/gateway/stripe/process",t.subscription_image);case 4:if((n=e.sent)||n.info){e.next=7;break}return e.abrupt("return");case 7:INKIVE.EditorFacade.handle("shopping_cart","on_payment",_.extend(t,n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.prototype.isExternal=function(e){var t=INKIVE.Helpers.dataURLToBlob(e.source.url);return e.source.url&&!t&&!a.isAmazonImage(e.source.url)&&!e.source.url.match(/imageplaceholder\.svg$/)&&!e.source.url.match(/imageplaceholder_new\.svg$/)&&-1===e.source.url.indexOf("shutterstock.com")},c.prototype.updateFlipped=function(e,t,n){var r=this;this.canvas.setFlipImage(e.id,t.flipped,n,void 0,(function(){r.trigger("flipped",e.getAttribute("id"),t)}))},c.prototype.updateSourceBase64=function(e,t){var n=void 0===t.source.smart_load||t.source.smart_load;if(e.getAttribute("xlink:href")!==t.source.base_64)if(svgedit.utilities.assignAttributes(e,{"xlink:href":t.source.base_64}),INKIVE.ImagesFactory.setImageUrl(e,null),n){var r=new Image;r.onload=_.bind(this._onImage,this,e,t,r),r.src=t.source.base_64}else this.trigger("source.base_64",e.getAttribute("id"),{source:{base_64:"<data>"}});else this.trigger("optimus_resolution",e.getAttribute("id"))},c.prototype.updateSourceUrl=function(e,t,n){if(!this.cancelImageLoading){var r=void 0===t.source.smart_load||t.source.smart_load,o=!n,i=!1;if(e.getAttribute("xlink:href")!==INKIVE.Helpers.getCORSSecureUrl(t.source.url)){if(null===INKIVE.ImagesFactory.getImageUrl(e)){var s=$(e).data("original-href"),c=s&&!l(s),u=$(e).attr("xlink:href");c&&svgedit.utilities.assignAttributes(e,{"xlink:href":s}),INKIVE.ImagesFactory.setImageUrl(e,t.source.url),c&&svgedit.utilities.assignAttributes(e,{"xlink:href":u})}else{var d=a.getOriginalUrl(t.source.url),p=d===a.getOriginalUrl(e.getAttribute("xlink:href"))&&t.external_source!==INKIVE.C.SHUTTERSTOCK;i=d===a.getOriginalUrl(INKIVE.ImagesFactory.getImageUrl(e));var h=INKIVE.DesignFacade.get(e.id)||{},m=INKIVE.Helpers.getCORSSecureUrl(t.source.url),f=h.flipped;if(f&&(f.horizontal||f.vertical)?this.updateFlipped(e,h,m):svgedit.utilities.assignAttributes(e,{"xlink:href":m}),(r||t.source.external_resize||t.keep_box_size)&&!p){o=!1;var g=new Image;g.onload=_.bind(this._onImage,this,e,t,g),g.onerror=_.bind(this._onImageError,this,e,t,g),g.src=INKIVE.Helpers.getCORSSecureUrl(t.source.url)}}o&&!n&&this.trigger("source.url",e.getAttribute("id"),{skipHistory:i,source:{url:!l(t.source.url)&&t.source.url}})}else this.trigger("optimus_resolution",e.getAttribute("id"))}},c.prototype._onImageError=function(e,t,n){this.canvas.call("advice.show","upload-error"),INKIVE.DesignFacade.handle(e.id,"delete"),INKIVE.DesignFacade.handle(e.id,"delete")},c.prototype._onImage=function(e,t,n){var r,o,i;t.keep_box_size?function(e){var t=this.canvas.runExtensions("getLayoutBoxCoord",{layoutBox:e}),r=n.width<n.height,o=Math.max(t.height/n.height,t.width/n.width),i=n.width*o,s=n.height*o,a={width:i,height:s,x:r?t.x:t.x-(i-t.width)/2,y:r?t.y-(s-t.height)/2:t.y};svgedit.utilities.assignAttributes(e,a)}.call(this,e):function(){try{var t=svgedit.utilities.getClipPath(e),r=(t&&t.childNodes[0]||e).getBBox(),o=n.width/n.height,i=r.width/r.height,s=o>i,a={width:s?r.width:r.height*o,height:s?r.width/o:r.height};this.updateSize(e,{size:a})}catch(e){console.error(e)}}.call(this);var s=null!=t&&null!==(r=t.source)&&void 0!==r&&r.base_64?{base_64:"<data>"}:{url:!l(null==t||null===(o=t.source)||void 0===o?void 0:o.url)&&(null==t||null===(i=t.source)||void 0===i?void 0:i.url)};this.trigger("source.".concat(Object.keys(s)[0]),e.id,{source:s})},c.prototype.onVersionData=function(e,t){var n=this.getSize(e,t),r=_.bind((function(t){t===e.id&&(this.cancelImageLoading=!0)}),this);this.cancelImageLoading=!1,this.trigger("optimize_resolution",e.getAttribute("id")),INKIVE.DesignFacade.on("delete",r),a.smartLoad(t.source.url,n,_.bind((function(o,i){INKIVE.DesignFacade.off("delete",r);var s=$(e).attr("xlink:href"),l=t.external||this.isExternal({source:{url:s}})||INKIVE.C.IS_MOBILE||a.getRightSizeUrl(s,n,!0)===a.getRightSizeUrl(i.src,n,!0),c=o===INKIVE.C.Status.success||t.source.url;t.source.url=o===INKIVE.C.Status.success?i.src:t.source.url,$(e).removeClass("resizing"),l&&c&&!this.cancelImageLoading&&this.updateSourceUrl(e,t),this.updateBackgroundRemoved(e,t)}),this),t.external||t.background_removed)},c.prototype.getSize=function(e,t){return{width:t.size?t.width:e.getAttribute("width"),height:t.size?t.height:e.getAttribute("height")}},c.prototype.resizeExternalPhoto=function(e,t){var n=function(){var n=this.getSize(e,t),r=a.getRightSizeUrl("https://static.desygner.com/thumb/",n),o=_.last(_.compact(r.split("/")))||"web";"thumb"===o&&(o="mobile");"original"===o&&(o="largeweb");return o}.call(this),r=function(e){return["original","largeweb","web","tab","mobile","thumb"].find((function(t){return e.includes("/".concat(t,"/"))}))}(t.source.url)||n,o={book_id:INKIVE.C.BOOK.id,photo_url:a.getOriginalUrl(t.source.url)||t.source.url,platform:n,skip_image_storage:t.external_source===INKIVE.C.SHUTTERSTOCK?"y":"n"},i=INKIVE.C.BASE_URL+"inkive/resizeexternalsearchphoto";$(e).addClass("resizing"),this.trigger("resize_external",e.getAttribute("id"));var s=_.bind((function(){$.api(i,"POST",o,_.bind((function(n){if("success"===n.STATUS){var o={thumb:n.MESSAGE.replace("/".concat(r,"/"),"/thumb/"),mobile:n.MESSAGE.replace("/".concat(r,"/"),"/mobile/"),tab:n.MESSAGE.replace("/".concat(r,"/"),"/tab/"),web:n.MESSAGE.replace("/".concat(r,"/"),"/web/"),largeweb:n.MESSAGE.replace("/".concat(r,"/"),"/largeweb/"),original:n.MESSAGE.replace("/".concat(r,"/"),"/original/")};t.source.url=n.MESSAGE,a.addImageData(o,a.defaultAmazonDataNames)}this.onVersionData(e,t)}),this))}),this);t.ab_id?a.getExternalPhotoById({id:t.ab_id,type:"ab"},(function(e){o.photo_url=e,s()})):s()},c.prototype.removeFlippedAttributesIfNewImage=function(e,t){var n=$(e).attr("data-original-href"),r=t.source.base_64?t.source.base_64:t.source.url;n&&!l(n)&&n!==r&&($(e).removeAttr("data-original-href"),$(e).removeClass(INKIVE.C.FLIP_IMAGE.HORIZONTAL),$(e).removeClass(INKIVE.C.FLIP_IMAGE.VERTICAL))},c.prototype.removeNoPlaceholderClassIfReplacedImage=function(e,t){t.is_initial_load||e.classList.remove("quick-delete")},c.prototype.updateBackgroundRemoved=function(e,t){t.background_removed?e.setAttribute("data-background-removed","true"):e.removeAttribute("data-background-removed")},c.prototype.refreshPlaceholderButtons=function(e,t){if(t.img_frame){var n=this.canvas.getSelectedElems();e=e.classList.contains("subelement")?e.parentElement:e,1===n.length&&n[0]===e&&(this.canvas.clearSelection(),this.canvas.addToSelection([e]))}},c.prototype.updateSmartAssets=function(e,t){t.is_defined_placeholder&&e.setAttribute("is-defined-placeholder","true")}},{"../../../../helpers/dataUrl":632,"../../../factory/images":127,"./abstract/element":67,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],74:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("./abstract/graphic"),o=e("../creators/logo"),i=e("./sticker"),s=e("../getters/sticker"),a=e("../../../factory/images");function l(){this.handledAttributes=_.union(["shapes","thumb_src","is_vector","fill"],this.handledAttributes),this.supportedSubElements=["image","ellipse","line","rect","text","polygon","circle","ellipse","path","g"]}t.exports=l,l.prototype=new r,l.prototype.constructor=l,l.prototype.updateIsVector=$.noop,l.prototype.updateThumbSrc=function(e,t){var n=$(e).is("image")?e:$(e).children("image")[0];if(n){var r=a.getOriginalUrl(n.getAttribute("xlink:href")),o=a.getOriginalUrl(t.thumb_src);l=r===o}else{var i=INKIVE.RestrictionsFacade.getAllElementPermissions(e.id),s=!i||!i[0]||!i[0].source,l=!1,c=svgedit.utilities.getBBox(e);t.size&&(c.height=t.size.height,c.width=t.size.width),n=this._appendImageLogo(e,_.extend(svgedit.utilities.getBBox(e),{url:t.thumb_src})),s&&this.canvas.removeFromSelection([e])}var u=void 0===t.smart_load||t.smart_load;if(o=t.is_vector||!u?t.thumb_src:a.getVersionUrl(t.thumb_src,"thumb"),!l){var d=svgedit.select.getSelectorManager(),p=d.requestSelector(e);$(e).children(":not(image)").remove(),p&&p.updateGripCursors();var h=function(e){svgedit.utilities.assignAttributes(n,{opacity:1,"xlink:href":e},100)},m=new Image;m.onload=_.partial(h,o),m.onerror=_.partial(h,t.thumb_src),m.src=o,t.is_vector?(t.content||this.fetchContent(e,t),t.content&&this.updateContent(e,t)):(u&&this._smartImageLoad(e,t),u||this.trigger("resolution_optimized",e.getAttribute("id")),u||this.trigger("resolution_optimized",$(e).find("image").attr("id"))),s&&this.canvas.addToSelection([e]),t.is_initial_load&&d.releaseAllSelectors(),this.trigger("thumb_src",e.getAttribute("id"),t)}},l.prototype._appendImageLogo=o.prototype._appendImageLogo,l.prototype._smartImageLoad=o.prototype._smartImageLoad,l.prototype.updateContent=o.prototype.updateContent,l.prototype.fetchContent=o.prototype.fetchContent,l.prototype.updateShapes=i.prototype.updateShapes,l.prototype.updateFill=i.prototype.updateFill,l.prototype.getElements=s.prototype.getElements,l.prototype.getElementsWithColor=s.prototype.getElementsWithColor},{"../../../factory/images":127,"../creators/logo":41,"../getters/sticker":57,"./abstract/graphic":68,"./sticker":84,"core-js/modules/es.array.find.js":859}],75:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.replace.js");var r=[e("./text/date"),e("./text/email"),e("./text/numeric"),e("./text/swearing"),e("./text/currencies"),e("./text/character_number"),e("./text/dictionary")];t.exports={updateContent:function(t,n){var o=e("../../../restrictions/restrictions"),i=_.partial(o.getElementRestrictions,t.getAttribute("id"));try{var s=n.content,a=this.textarea.text.textContent;_.each(r,(function(e){s=e(i,s)}));var l=null,c=INKIVE.Tool.calculateStringContentDifference(a,s),u=c.added-c.removed,d=n.force_redraw||u<=0||s.length<300,p=n.cursor_position,h=s.split("\n");d||_.any(this.textarea.text.strings,_.bind((function(e,t){var n=e.isBlank?"":e.textContent,r=this.textarea.text.strings.length-1;if((e.isEol?h[t]!==n:-1===h[t].indexOf(n))||t===r||t===h.length-1)return l=t,!0}),this)),this.textarea.text.setValues({firstDiffLinePosition:l,textContent:s.replace(/ /g,String.fromCharCode(160)),oldContent:a,newLetters:u,cursorPosition:p||(0===p?p:null)}),this.trigger("content",t.getAttribute("id"),s)}catch(t){var m=e("../../../../utils/advice");t=_.isArray(t)?t:[t],_.each(t,(function(e){m.show("restriction-text-"+e.message.replace(/_/g,"-"),e.params)}))}},contentCompliesWithRestrictions:function(e,t){var n=function(e){return _.compact([t[e]])};try{var o=e.replace(/ /g,String.fromCharCode(160));return _.each(r,(function(e){o=e(n,o)})),!0}catch(e){return!1}}}},{"../../../../utils/advice":607,"../../../restrictions/restrictions":118,"./text/character_number":76,"./text/currencies":77,"./text/date":78,"./text/dictionary":79,"./text/email":80,"./text/numeric":81,"./text/swearing":82,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],76:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),t.exports=function(e,t){var n=e("character_number"),r=function(e){return e.replace(/(\r\n|\n|\r)/g,"")}(t);if(n.length){var o=[];for(var i in n){var s=_.extend({value:t},n[i]);(_.isNumber(n[i].max)&&n[i].max<r||_.isNumber(n[i].min)&&n[i].min>r)&&o.push({message:"character_number_range",params:s})}if(o.length)throw o}return t}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],77:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.to-string.js"),t.exports=function(e,t){var n=e("currencies");if(n.length){var r=t.match(/[\d+|\\.|\\,]/g),o=[];if(!r)throw{message:"currency_format",params:_.extend({value:t},n[0])};r=parseFloat(r.join(""));var i="\\d+|\\s+|\\.|\\,"+_.map(n,(function(e){return e.currency})).join("|");for(var s in n){var a=_.extend({value:t},n[s]),l=_.isNumber(n[s].max)&&n[s].max<r||_.isNumber(n[s].min)&&n[s].min>r;t.indexOf(n[s].currency)<0&&o.push({message:"currency_format",params:a}),l&&o.push({message:"currency_range",params:a})}if(o.length)throw o;t=t.match(new RegExp("["+i+"]","g")).join("").replace(/\s+/," ")}return t}},{"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924}],78:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),t.exports=function(e,t){var n,r=e("date"),o=[];if(r.length){for(var i in r)n=r[i],moment(t.replace(/\s/g," "),n.dateformat,!0).isValid()||o.push({message:"date_format",params:s(r[i])}),r[i].daterange&&!a(r[i])&&o.push({message:"date_range",params:s(r[i])});if(o.length)throw o}return t;function s(e){var n=e.dateformat,r=e.daterange?{value:t,end:moment(e.daterange.end,"MM/DD/YY").format(n),start:moment(e.daterange.start,"MM/DD/YY").format(n),example:moment(e.daterange.start,"MM/DD/YY").format(n)}:{value:t,example:moment().format(n)};return _.extend(r,e)}function a(e){var n=moment(e.daterange.start,"MM/DD/YY"),r=moment(e.daterange.end,"MM/DD/YY"),o=moment(t.replace(/\s/g," "),e.dateformat,!0);return o>=n&&o<=r}}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],79:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),t.exports=function(e,t){var n=e("dictionary");if(n.length&&!_.any(n,(function(e){return _.contains(e.list,t.replace(/\s/g," "))})))throw{message:"dictionary_not_found",params:{value:t}};return t}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],80:[function(e,t,n){"use strict";t.exports=function(e,t){if(e("email").length&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))throw{message:"email",params:{value:t}};return t}},{}],81:[function(e,t,n){"use strict";e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),t.exports=function(e,t){var n=t,r=e("numeric");if(r.length){if(isNaN(t))throw{message:"number_nan",params:_.extend({value:n})};for(var o in t=parseFloat(t),r)if(r[o].max<t||r[o].min>t)throw{message:"number_out_of_range",params:_.extend({value:n},r[o])}}return t.toString()}},{"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.to-string.js":911}],82:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js");var r=e("../../../../../factory/swearing");t.exports=function(e,t){var n=e("swearing");if(n.length)for(var o in n)if(r.matchSwearing(n[o].filter,t))throw{message:"swearing",params:_.extend({value:t},n[o])};return t}},{"../../../../../factory/swearing":158,"core-js/modules/es.array.filter.js":857}],83:[function(e,t,n){"use strict";e("core-js/modules/es.array.fill.js");var r=e("./abstract/graphic");function o(){this.handledAttributes=_.union(["fill","stroke"],this.handledAttributes)}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.updateFill=function(e,t){this.updateAttributeNoUndo(e,"fill",t.fill.color),this.canvas.cur_properties.fill=t.fill.color,this.trigger("fill",e.getAttribute("id"),{fill:t.fill})},o.prototype.updateStroke=function(e,t){var n=t.stroke;void 0!==n.color&&(this.updateAttributeNoUndo(e,"stroke",n.color),this.canvas.cur_properties.stroke=n.color),void 0!==n.width&&this.updateAttributeNoUndo(e,"stroke-width",n.width),void 0!==n.dasharray&&this.updateAttributeNoUndo(e,"stroke-dasharray",n.dasharray),void 0!==n.linejoin&&this.updateAttributeNoUndo(e,"stroke-linejoin",n.linejoin),void 0!==n.linecap&&this.updateAttributeNoUndo(e,"stroke-linecap",n.linecap),this.trigger("stroke",e.getAttribute("id"),{stroke:t.stroke})}},{"./abstract/graphic":68,"core-js/modules/es.array.fill.js":856}],84:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.function.bind.js");var o=e("./abstract/graphic"),i=e("../creators/abstract/graphic"),s=e("./shape"),a=e("./text"),l=e("../getters/sticker"),c=e("../../../app/decorate");function u(){this.handledAttributes=_.union(["texts","shapes","content","text_content","fill","sticker_id","source"],this.handledAttributes),this.supportedSubElements=["image","ellipse","line","rect","text","polygon","circle","ellipse","path","g"]}t.exports=u,u.prototype=new o,u.prototype.constructor=u,u.prototype.updateContent=i.prototype.updateContent,u.prototype.updateSource=function(e,t){var n=$(e).find("image.subelement.layoutBox")[0];n&&(n.id||(n.id=this.canvas.getNextId()),INKIVE.DesignFacade.set(n.id,t))},u.prototype.updateTextContent=function(e,t){var n=new a,r=$(e).find(".textarea.active");n.initialize(),_.each(r,(function(e){n.set(e,{content:t.text_content,force_redraw:!0,cursor_position:t.cursor_position})}))},u.prototype.updateTexts=function(e,t){var n=new a,r=$(e).find(".textarea");n.initialize(),_.each(t.texts,(function(e,t){n.set(r[t],e)})),this.trigger("texts",e.getAttribute("id"),{texts:t.texts})},u.prototype.updateShapes=function(e,t){var n=this,o=new s,i=this.getElements(e),a=t.shapes;o.initialize(),Object.entries(a).forEach((function(e){var t=(0,r.default)(e,2),s=t[0],a=t[1];return(a.fill&&a.fill.previousColor?n.getElementsByColorGroup(i,a.fill):Object.values(n.getElementsWithColor(i[s]))).forEach((function(e){return o.set(e,a)}))})),this.trigger("shapes",e.getAttribute("id"),{shapes:a})},u.prototype.updateFill=function(e,t){var n=new s;n.initialize(),_.each(this.getElementsWithColor(e),(function(e){n.set(e,t)}),this),this.trigger("fill",e.getAttribute("id"),{fill:t.fill})},u.prototype.updateStickerId=function(e,t){var n=$(e),r=(n.attr("id"),n[0].getBBox());Math.max(r.width,r.height),r.x,r.y;INKIVE.Helpers.api("search/sticker","GET",{id:t.sticker_id},_.bind(_.bind((function(t){this.updateContent(e,t)}),this)))},u.prototype.getElements=l.prototype.getElements,u.prototype.getElementsWithColor=l.prototype.getElementsWithColor,u.prototype.getElementsByColorGroup=l.prototype.getElementsByColorGroup,u.prototype=c(e("./app/sticker"),u.prototype)},{"../../../app/decorate":5,"../creators/abstract/graphic":37,"../getters/sticker":57,"./abstract/graphic":68,"./app/sticker":69,"./shape":83,"./text":87,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.values.js":903,"core-js/modules/web.dom-collections.for-each.js":964}],85:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js");var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),d=r(e("./abstract/element")),p=r(e("./text"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"initialize",value:function(){(0,a.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.handledAttributes=[].concat((0,o.default)(this.handledAttributes),["text_content","cell_foreground","cell_background","cell_lines","original_font_size","font_bold_toggle","font_italic_toggle"])}},{key:"updateCellForeground",value:function(e,t){var n=t.cell_foreground.color;e.querySelectorAll("rect.table-cell-selected").forEach((function(e){var t=e.parentElement,r=(new INKIVE.Text.Textarea).setDOM(t);r&&(r.text.setValues({fill:n}),t.querySelector("g.text").setAttribute("fill",n))}))}},{key:"updateCellBackground",value:function(e,t){e.querySelectorAll("rect.table-cell-selected").forEach((function(e){e.setAttribute("fill",t.cell_background.color)}))}},{key:"updateCellLines",value:function(e,t){INKIVE.Table.setBorderStyle({where:t.cell_lines.where,stroke:t.cell_lines.color,strokeWidth:void 0,strokeDash:void 0})}},{key:"updateFontBoldToggle",value:function(e,t){e.querySelectorAll("rect.table-cell-selected").forEach((function(e){var t=e.parentElement,n=(new INKIVE.Text.Textarea).setDOM(t),r=n.text.font_weight>600||"bold"===n.text.font_weight?"400":"700";n&&n.text.setValues({font_weight:r}),t.querySelector("g.text").setAttribute("font-weight",r)}))}},{key:"updateFontItalicToggle",value:function(e,t){e.querySelectorAll("rect.table-cell-selected").forEach((function(e){var t=e.parentElement,n=(new INKIVE.Text.Textarea).setDOM(t),r="italic"===n.text.font_style?"normal":"italic";n&&n.text.setValues({font_style:r}),t.querySelector("g.text").setAttribute("font-style",r)}))}},{key:"updateTextContent",value:function(e,t){var n=new p.default;n.initialize(),n.set(t.textarea.dom,{content:t.text_content,force_redraw:!0,cursor_position:t.cursor_position})}}]),n}(d.default);t.exports=m},{"./abstract/element":67,"./text":87,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/web.dom-collections.for-each.js":964}],86:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js");var r=e("./abstract/element");e("../../../factory/images");function o(){this.handledAttributes=["keep_stage_size","resize_content","restricted.id","restricted.page","restricted.keep_permissions","size.format_id","size.width","size.height","size.unit","grid.index_in_set","grid.number_of_photos","designed.id","designed.content"]}t.exports=o,o.prototype=new r,o.prototype.constructor=o,o.prototype.set=function(e){var t=e.designed&&(e.designed.id||e.designed.content),n=e.grid&&e.grid.index_in_set&&e.grid.number_of_photos,r=n||t;e.restricted&&e.restricted.id&&this.setRestrictedTemplate(e),t&&this.setDesignedTemplate(e),n&&this.setGridTemplate(e),r||e.size&&this.updateSize(e),this.trigger("",null,e)},o.prototype.setRestrictedTemplate=function(t){function n(n,r){if(r&&n&&"false"!=n.success&&n.pageContent){var o=INKIVE.ImagesFactory.setImagesData(n.images);_.each(o,(function(e){e.stored=!0})),this.editor.loadSvgString(n.pageContent,_.bind((function(){var n=e("../../editor/editor"),r=$("#svgcontent");n.handle("zoom","fit"),t.restricted.keep_permissions&&r.children("g.main").addClass("base-page-"+t.restricted.page),_.include([INKIVE.C.BOOK_TYPE.TEMPLATE,INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN],INKIVE.C.BOOK.book_type)&&INKIVE.EditorFacade.once("history.reload",_.bind((function(){r.find(".element.group").each((function(){INKIVE.DesignFacade.handle(this.id,"ungroup")})),this.canvas.clearSelection()}),this)),this.trigger("restricted",null,{restricted:t.restricted})}),this))}}INKIVE.Helpers.api("page/consume_credits","GET",{page:t.restricted.page||1,scrapbook_id:t.restricted.id},_.bind((function(e,r){r&&e&&INKIVE.Helpers.api("page/by_pagenumber","GET",{page:t.restricted.page||1,scrapbook_id:t.restricted.id},_.bind(n,this))}),this))},o.prototype.setDesignedTemplate=function(e){function t(t){e.format={id:t.format_id},e.designed.id=e.designed.id||e.designed.content.id,e.keep_stage_size||(e.size={width:t.format_width,height:t.format_height},this.updateSize(e)),this.onSVGData(e,{defs:Base64.decode(t.defs),content:Base64.decode(t.content),background:Base64.decode(t.background)},t),this.trigger("designed",null,{designed:e.designed}),INKIVE.C.IS_MOBILE_APP||_.delay((function(){INKIVE.DesignFacade.handle("preview")}),1e3)}e.designed.content?t.call(this,e.designed.content):INKIVE.Helpers.api("search/layout","GET",{id:e.designed.id},_.bind(t,this))},o.prototype.setGridTemplate=function(e){var t=INKIVE.Helpers.convertUnitsToPixels,n=INKIVE.C.BASE_URL+"grid/fetch/"+e.grid.index_in_set,r={width:e.size?e.size.unit?t(e.size.width,e.size.unit):parseInt(e.size.width):this.canvas.contentW,height:e.size?e.size.unit?t(e.size.height,e.size.unit):parseInt(e.size.height):this.canvas.contentHeight,number_of_photos:e.grid.number_of_photos};INKIVE.Helpers.sendCmd(n,r,_.bind((function(t){var n=r.width==this.canvas.contentW&&r.height==this.canvas.contentH;t=$.parseJSON(t),n||this.updateSize(e),"SUCCESS"===t.STATUS&&this.onSVGData(e,{defs:t.MESSAGE.defs,content:t.MESSAGE.svg}),this.trigger("grid",null,{grid:e.grid})}),this))},o.prototype.updateSize=function(t){var n=$("#svgcontent"),r=n.children("g.main"),o=e("../../editor/editor"),i=INKIVE.Helpers.convertUnitsToPixels,s=void 0===t.resize_content?!t.restricted&&!t.grid&&!t.designed:t.resize_content,a=t.size.unit?i(t.size.width,t.size.unit):parseInt(t.size.width),l=t.size.unit?i(t.size.height,t.size.unit):parseInt(t.size.height),c=t.size.current_size;c&&(l=c.height,a=c.width);var u=this.canvas.contentW,d=this.canvas.contentH;function p(e){var t=n[0],o=r[0];if(o&&t){var i=_.union(_.toArray(o.classList),_.toArray(t.classList));_.each(i,(function(n){e?n.match(e)&&o.classList.remove(n):(n.match(/format-id-[\d+]/)&&o.classList.remove(n),n.match(/layout-id-[\d+]/)&&o.classList.remove(n),n.match(/du-[\w+]/)&&t.classList.remove(n),n.match(/dw-[\d|\.]+/)&&t.classList.remove(n),n.match(/dh-[\d|\.]+/)&&t.classList.remove(n))}))}}p(),t.size.unit&&n.addClass("du-"+t.size.unit),n.addClass("dw-"+t.size.width),n.addClass("dh-"+t.size.height),a==u&&l==d||(this.canvas.contentW=a,this.canvas.contentH=l,o.handle("zoom","fit"),s&&this._resizeCanvasContent({height:d,width:u})),this.trigger("size",null,{size:t.size}),t.size.format_id&&(p(/format-id-[\d+]/),r.addClass("format-id-"+t.size.format_id))},o.prototype.onSVGData=function(e,t,n){var r;this.editor.addElement("layout",$.extend({keep:e.setCurrentPage},t)),r=$("#svgcontent > g.main"),e.designed&&e.designed.id&&r.addClass("layout-id-"+e.designed.id),e.grid&&e.grid.index_in_set&&e.grid.number_of_photos&&r.addClass("grid-id-"+e.grid.number_of_photos+"-"+e.grid.index_in_set),e.keep_stage_size||e.format&&e.format.id&&r.addClass("format-id-"+e.format.id),function e(t){t.firstChild&&e(t.firstChild),t.nextSibling&&e(t.nextSibling),3===t.nodeType&&t.nodeValue.match(/(\r\n|\r|\n)+/g)&&t.remove()}($("#svgcontent")[0]),INKIVE.Helpers.converterCurrentPage(),e.keep_stage_size&&this._resizeCanvasContent({height:n.format_height,width:n.format_width,unit:n.unit})},o.prototype._resizeCanvasContent=function(e){var t=INKIVE.Helpers.convertUnitsToPixels;INKIVE.Helpers.converterLayoutSizeChange(this.canvas.contentW,this.canvas.contentH,t(e.width,e.unit),t(e.height,e.unit))}},{"../../../factory/images":127,"../../editor/editor":91,"./abstract/element":67,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],87:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.anchor.js");var r=e("./abstract/element"),o=e("../../restrictions/decorate");function i(){this.textAttributes=["content","font","spacing","stroke","decoration","color","anchor","bullet_points","ordered_list","ordered_start","ordered_mark","auto_adjustable","text_content","columns","highlight"],this.handledAttributes=_.union(this.textAttributes,this.handledAttributes),this.on("all",_.bind((function(e,t,n){(e||n.keep_box_size)&&this.textarea.render(this.canvas)}),this))}t.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.set=function(e,t){this.textarea=t.textarea||(new INKIVE.Text.Textarea).setDOM(e),r.prototype.set.apply(this,arguments)},i.prototype.updateStroke=function(e,t){void 0!==(t=t.stroke).width&&(this.textarea.text.setValues({stroke_width:t.width}),this.trigger("stroke.width",e.getAttribute("id"),t.width)),void 0!==t.color&&(this.textarea.text.setValues({stroke:t.color}),this.trigger("stroke.color",e.getAttribute("id"),t.color)),void 0!==t.dasharray&&(this.textarea.text.setValues({stroke_dasharray:t.dasharray}),this.trigger("stroke.dasharray",e.getAttribute("id"),t.dasharray)),this.trigger("stroke",e.getAttribute("id"),t)},i.prototype.updateHighlight=function(e,t){if(void 0!==(t=t.highlight).color){this.textarea.text.setValues({highlight:t.color});var n=this.textarea.text.textContent.length;this.textarea.text.removeIncludedStyles("highlight",0,n),this.trigger("highlight.color",e.getAttribute("id"),t.color)}this.trigger("highlight",e.getAttribute("id"),t)},i.prototype.updateSpacing=function(t,n){var r=void 0!==n.decoration&&"underline"!==n.decoration,o="underline"===this.textarea.text.text_decoration&&!r;if(n=n.spacing,o&&(n.letter||n.word)&&e("../../../utils/advice").show("spacing-and-underline"),!(void 0===n.letter||o&&n.letter)){var i=n.letter;if(_.isArray(this.textarea.text.letter_spacing)){var s=_.reduce(this.textarea.text.letter_spacing,(function(e,t){return e+parseFloat(t)}),0)/(this.textarea.text.letter_spacing.length-1),a=i/(0===s?1:s);i=_.map(this.textarea.text.letter_spacing,(function(e){return parseFloat(e)*a}))}this.textarea.text.setValues({letter_spacing:i}),this.trigger("spacing.letter",t.getAttribute("id"),n.letter)}void 0===n.word||o&&n.word||(this.textarea.text.setValues({word_spacing:n.word}),this.trigger("spacing.word",t.getAttribute("id"),n.word)),void 0!==n.paragraph&&(this.textarea.text.setValues({paragraph_spacing:n.paragraph}),this.trigger("spacing.paragraph",t.getAttribute("id"),n.paragraph)),void 0!==n.first_line_margin&&(this.textarea.text.setValues({first_line_margin:n.first_line_margin}),this.trigger("spacing.first_line_margin",t.getAttribute("id"),n.first_line_margin)),void 0!==n.line&&(this.textarea.text.setValues({line_spacing:n.line}),this.trigger("spacing.line",t.getAttribute("id"),n.line)),void 0!==n.margin&&(this.textarea.text.setValues({line_margin:n.margin}),this.trigger("spacing.margin",t.getAttribute("id"),n.margin)),this.trigger("spacing",t.getAttribute("id"),n)},i.prototype.updateFont=function(e,t){void 0!==(t=t.font).family&&(this.textarea.text.setValues({font_family:t.family}),this._processFontFamily(e,t),this.trigger("font.family",e.getAttribute("id"),t.family)),void 0!==t.size&&(this.textarea.text.setValues({font_size:t.size}),this.trigger("font.size",e.getAttribute("id"),t.size)),void 0!==t.weight&&(this.textarea.text.setValues({font_weight:t.weight}),this.trigger("font.weight",e.getAttribute("id"),t.weight)),void 0!==t.style&&(this.textarea.text.setValues({font_style:t.style}),this.trigger("font_style",e.getAttribute("id"),t.style)),this.trigger("font",e.getAttribute("id"),t)},i.prototype._processFontFamily=function(t,n){var r=e("../../../factory/fonts");r.isLoadedFont(n.family)||(INKIVE.SVGElementLoading.show(t.parentElement),r.refreshCustomFonts().then((function(){$.fontSpy(n.family,{success:function(){return INKIVE.SVGElementLoading.hide(t.parentElement)},failure:function(){return INKIVE.SVGElementLoading.hide(t.parentElement)},timeOut:5e3})})))},i.prototype.updateBulletPoints=function(e,t){"start"===this.textarea.text.text_anchor||this.updateAnchor(e,{anchor:"start"}),this.textarea.text.strings.forEach((function(e){return e.setValues({hasBullet:t.bullet_points})})),this.trigger("bullet_points",e.getAttribute("id"),t.bullet_points)},i.prototype.updateOrderedList=function(e,t){"start"===this.textarea.text.text_anchor&&this.updateAnchor(e,{anchor:"start"}),this.textarea.text.setValues({ordered:t.ordered_list}),this.trigger("ordered_list",e.getAttribute("id"),t.ordered_list)},i.prototype.updateOrderedStart=function(e,t){this.textarea.text.setValues({orderedStart:t.ordered_start}),this.trigger("ordered_start",e.getAttribute("id"),t.ordered_start)},i.prototype.updateOrderedMark=function(e,t){this.textarea.text.setValues({orderedMark:t.ordered_mark}),this.trigger("ordered_mark",e.getAttribute("id"),t.ordered_mark)},i.prototype.updateAutoAdjustable=function(e,t){this.textarea.text.setValues({auto_adjustable:t.auto_adjustable,original_font_size:t.auto_adjustable?this.textarea.text.font_size:null,vertical_offset:t.auto_adjustable?null:this.textarea.text.auto_adjustable}),this.trigger("auto_adjustable",e.getAttribute("id"),t.auto_adjustable)},i.prototype.updateTextContent=function(e,t){t.content=t.text_content,this.updateContent(e,t)},i.prototype.updateContent=function(e,t){var n=null,r=t.content,o=this.textarea.text.textContent,i=INKIVE.Tool.calculateStringContentDifference(o,r),s=i.added-i.removed,a=t.force_redraw||s<=0||r.length<300,l=t.cursor_position,c=r.split("\n"),u=e.querySelectorAll("text").length,d=INKIVE.Helpers.getLineArray(e,u),p=INKIVE.Helpers.getCursorLineIndex(d,l-s)[0];a||_.any(this.textarea.text.strings,_.bind((function(e,t){var r=e.isBlank?"":e.textContent,o=this.textarea.text.strings.length-1;if((e.isEol?c[t]!==r:-1===c[t].indexOf(r))||t===o||t===c.length-1)return n=t,!0}),this)),this.textarea.text.setValues({firstDiffLinePosition:n,textContent:r.replace(/ /g,String.fromCharCode(160)),oldContent:o,newLetters:s,lineIndex:p,cursorPosition:l||(0===l?l:null)}),this.trigger("content",e.getAttribute("id"),r)},i.prototype.updateDecoration=function(t,n){var r=n.spacing,o=r&&void 0!==r.letter&&!r.letter,i=r&&void 0!==r.word&&!r.word;(this.textarea.text.letter_spacing&&!o||this.textarea.text.word_spacing&&!i)&&"underline"===n.decoration?e("../../../utils/advice").show("spacing-and-underline"):(this.textarea.text.setValues({text_decoration:n.decoration}),this.trigger("decoration",t.getAttribute("id"),n.decoration))},i.prototype.updateAnchor=function(e,t){this.textarea.text.removeLineStyling(),this.textarea.text.setValues({text_anchor:t.anchor}),_.isArray(this.textarea.text.letter_spacing)&&(this.textarea.text.letter_spacing=0),this.trigger("anchor",e.getAttribute("id"),t.anchor)},i.prototype.updateColor=function(e,t){this.textarea.text.setValues({fill:t.color});var n=this.textarea.text.textContent.length;this.textarea.text.removeIncludedStyles("fill",0,n),this.trigger("color",e.getAttribute("id"),t.color)},i.prototype.updateColumns=function(e,t){this.textarea.text.setValues({columns:t.columns}),this.trigger("columns",e.getAttribute("id"),t.columns)},i.prototype=o(e("./restrictions/text"),i.prototype)},{"../../../factory/fonts":125,"../../../utils/advice":607,"../../restrictions/decorate":114,"./abstract/element":67,"./restrictions/text":75,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.anchor.js":913,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964}],88:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.concat.js");var i=r(e("./abstract/element")),s=r(e("../getters/video")),a=r(e("../../../factory/images")),l=e("../../../video");function c(){this.handledAttributes=_.union(["autoplay","controls","clip_path","duration","fullscreen","height","loop","movetonext","mute","source","thumb_src","url","width","x","y"],this.handledAttributes)}function u(e,t,n){return e?{width:t.width,height:t.width/n}:{width:t.height*n,height:t.height}}t.exports=c,c.prototype=new i.default,c.prototype.constructor=c,c.prototype.updateAutoplay=function(e,t){$(e).toggleClass("autoplay",t.autoplay)},c.prototype.updateMovetonext=function(e,t){$(e).toggleClass("movetonext",t.movetonext)},c.prototype.updateControls=function(e,t){$(e).toggleClass("controls",t.controls)},c.prototype.updateFullscreen=function(e,t){$(e).toggleClass("fullscreen",t.fullscreen)},c.prototype.updateLoop=function(e,t){$(e).toggleClass("loop",t.loop)},c.prototype.updateMute=function(e,t){$(e).toggleClass("mute",t.mute)},c.prototype.updateThumbSrc=function(e,t){if(!t.source){var n=$(e).children("image")[0];svgedit.utilities.assignAttributes(n,{"xlink:href":t.thumb_src,style:{objectFit:"contain",width:t.width}},100),this._smartImageLoad(e,t),this.trigger("thumb_src",e.getAttribute("id"),t)}},c.prototype.updateSource=function(e,t){var n=this._getYoutubeCode(t.source);t.source=n||t.source,t.thumb_src=t.thumb_src||"http://img.youtube.com/vi/"+t.source+"/mqdefault.jpg";var r=!a.default.isAmazonImage(t.thumb_src),o=n?"https://www.youtube.com/watch?v="+t.source:t.file||t.source;svgedit.utilities.assignAttributes(e,{"xlink:href":o,"data-video-type":n?"youtube":"mp4"},100),r&&this._resizeExternalThumbnail(e,t),r||this._smartImageLoad(e,t),this.trigger("source",e.getAttribute("id"),t)},c.prototype._smartImageLoad=function(e,t){var n=this,r="image"===e.tagName?e:e.querySelector("image"),i=svgedit.utilities.getBBox(r);this.trigger("optimize_resolution",e.getAttribute("id")),a.default.smartLoad(t.thumb_src,i,(function(i,s){var a=i===INKIVE.C.Status.success||t.thumb_src;t.thumb_src=i===INKIVE.C.Status.success?s.src:t.thumb_src,a&&(r&&r.setAttribute("xlink:href",t.thumb_src),function(e,t,n){var r=function(e,t){var n=svgedit.utilities.getClipPath(e),r=n&&n.childNodes[0],i=r?r.getBBox():e.getBBox(),s=i.width/i.height,a=t.width/t.height,l=s>a?[i.width,i.width*t.height/t.width]:[i.height*t.width/t.height,i.height],c=(0,o.default)(l,2),u=c[0],d=c[1];return{x:i.x+(i.width-u)/2,y:i.y+(i.height-d)/2,width:u,height:d}}(e,n);[t,e.querySelector("foreignObject"),e.querySelector("video")].filter(Boolean).forEach((function(e){return svgedit.utilities.assignAttributes(e,r)}))}(e,r,s),n.trigger("resolution_optimized",e.getAttribute("id"),t))}))},c.prototype._resizeExternalThumbnail=function(e,t){var n="https://www.googleapis.com/youtube/v3/videos?id="+t.source+"&key="+INKIVE.C.YOUTUBE_KEY+"&fields=items(snippet(thumbnails))&part=snippet",r=new Image;return r.src=t.thumb_src,r.onload=_.bind(this._matchBoxToImage,this,e,t,r),$(e).addClass("resizing"),this.trigger("optimize_resolution",e.getAttribute("id")),$.ajax({url:n,dataType:"jsonp",success:_.bind((function(t){if((t=t||{}).error)this.trigger("resolution_optimized",e.getAttribute("id"),t);else{var n=t.items[0].snippet.thumbnails,r=n.maxres||n.standard||n.high||n.medium||n.default;o.call(this,r.url)}}),this),error:function(e,t,n){$.post(INKIVE.C.BASE_URL+"api/errortrack/log",{data:"[Youtube Video] "+t+" | "+n,is_critical:!0})}});function o(n){var r={photo_url:n,platform:"tab"},o=INKIVE.C.BASE_URL+"inkive/resizeexternalsearchphoto";$.api(o,"POST",r,_.bind((function(n){if("success"===n.STATUS){var r={thumb:n.MESSAGE.replace("/tab/","/thumb/"),mobile:n.MESSAGE.replace("/tab/","/mobile/"),tab:n.MESSAGE,web:n.MESSAGE.replace("/tab/","/web/"),largeweb:n.MESSAGE.replace("/tab/","/largeweb/"),original:n.MESSAGE.replace("/tab/","/original/")};a.default.addImageData(r,a.default.defaultAmazonDataNames)}var o=_.bind(this._matchImageToBox,this,e,t);!function e(t){var r=new Image;r.src=t||n.MESSAGE,r.onload=_.partial(o,r),r.onerror=function(){setTimeout(_.partial(e,n.MESSAGE.replace("/tab/","/original/")),1e3)}}()}),this))}},c.prototype.updateSize=function(e){var t=$(e).find("title")[0];i.default.prototype.updateSize.apply(this,arguments);var n=svgedit.utilities.getBBox($(e).children("image")[0]);this._updatePlayButtonPositioning(e),t&&(t.textContent=Math.floor4(n.x)+" "+Math.floor4(n.y)+" "+Math.floor4(n.width)+" "+Math.floor4(n.height))},c.prototype.updateClipPath=function(e,t){var n=t.clip_path;[e.querySelector("image"),e.querySelector("foreignObject")].filter(Boolean).forEach((function(e){return svgedit.utilities.assignAttributes(e,n)})),this._updatePlayButtonPositioning(e)},c.prototype._matchImageToBox=function(e,t,n){var r=e.getBBox(),o=n.width/n.height,i=r.width/r.height,s=$(e).children("image")[0];$(e).removeClass("resizing");var a=u(o<i,r,o);(function(t){var o=this.canvas.addSvgElementFromJson({element:"rect",curStyles:!1,attr:{x:r.x,y:r.y,id:this.canvas.getNextId(),width:r.width,height:r.height}});$(s).remove(),(s=this.canvas.runExtensions("addLayoutBox",{elem:o,clipPathBB:r,"xlink:href":n.src})).setAttribute("width",a.width),s.setAttribute("height",a.height),s.setAttribute("x",r.x-(a.width-r.width)/2),s.setAttribute("y",r.y-(a.height-r.height)/2),$(s).addClass("layoutBox").removeClass("element"),$(e).prepend(s)}).call(this),t.thumb_src=n.src,this.trigger("resolution_optimized",e.getAttribute("id"),t)},c.prototype._matchBoxToImage=function(e,t,n){var r=e.getBBox(),o=n.width/n.height,i=u(o>r.width/r.height,r,o);this.updateSize(e,{size:i})},c.prototype._updatePlayButtonPositioning=function(e){var t=function(){if(!e.hasAttribute("clip-path"))return;return svgedit.utilities.getBBox(svgedit.utilities.getClipPath(e))}();e.querySelector("path").remove(),"mp4"===e.dataset.videoType?(this._appendMp4PlayIcon(e,t),(0,l.updateVideoPlayerSize)(e)):this._appendYoutubePlayIcon(e,t)},c.prototype._appendMp4PlayIcon=function(e,t){var n=t||svgedit.utilities.getBBox(e),r=Math.floor4(n.x+n.width/2),o=Math.floor4(n.y+n.height/2),i="M ".concat(r,",").concat(o," ").concat(r,",").concat(o," z"),s=this.canvas.addSvgElementFromJson({element:"path",attr:{id:this.canvas.getNextId(),d:i,fill:"#FFFFFF"}});e.appendChild(s)},c.prototype._appendYoutubePlayIcon=function(e,t){var n=t||svgedit.utilities.getBBox(e),r=Math.floor4(n.x+n.width/2),o=Math.floor4(n.y+n.height/2),i=n.width>n.height?n.height:n.width;r-=(i*=.2)/4,o-=i/2;var s=this.canvas.addSvgElementFromJson({element:"path",attr:{id:this.canvas.getNextId(),d:"M "+(i+r)+","+(i/2+o)+" "+r+","+(i+o)+" "+r+","+o+" z",fill:"#FFFFFF"}});e.appendChild(s)},c.prototype._getYoutubeCode=s.default.prototype._getYoutubeCode},{"../../../factory/images":127,"../../../video":625,"../getters/video":61,"./abstract/element":67,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],89:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),t.exports={_close:function(){INKIVE.Helpers.api("inkive/close","GET",{scrapbook:INKIVE.C.BOOK.id},_.bind((function(){this.isClosing=!1,INKIVE.Modal.togglePageLoader(!1),this.appBridge.callBoth("close_editor")}),this))}}},{"core-js/modules/es.function.bind.js":883}],90:[function(e,t,n){"use strict";t.exports={_onSavedCheckOnce:function(){return this.appBridge.version.isApp("webrand")||this.appBridge.version.isApp("pdf")||!window.Android&&!this.appBridge.version.isLowerThan("2.2.1")||window.Android&&!this.appBridge.version.isLowerThan("2.1")},_onSaved:function(e,t,n){t?(e.resolve(),this.trigger("saved")):(INKIVE.Modal.togglePageLoader(!1),e.reject(),this.trigger("Forbidden"===n?"403":"saving.error",{error:n}))}}},{}],91:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var s=r(e("../abstract/facade")),a=r(e("../../app/decorate")),l=r(e("../design/getters/sticker")),c=r(e("../../utils/cookie-storage")),u=r(e("../../core/history/history")),d=r(e("../../utils/humps")),p=r(e("../../factory/user-info")),h=e("../../factory/company"),m=e("../../../helpers/dataUrl");function f(){this.isLoading=!1,this.isClosing=!1,this.subscribers={},this.handlers={align:e("./handlers/align"),zoom:e("./handlers/zoom"),page:e("./handlers/page"),printing:e("./handlers/printing"),cache:e("./handlers/cache"),history:e("./handlers/history"),image:e("./handlers/image"),video:e("./handlers/video"),background:e("./handlers/background"),download:e("./handlers/download"),tool_mode:e("./handlers/tool-mode"),coach_marks:e("./handlers/coach-marks"),shopping_cart:e("./handlers/shopping-cart"),translations:e("./handlers/translations")},this.getters={log_info:e("./getters/logs"),page:e("./getters/page"),history:e("./getters/history")}}f.prototype=new s.default,f.prototype.constructor=f,f.prototype.initialize=function(e){s.default.prototype.initialize.call(this),this.handlers.zoom.curConfig=e,_.bindAll(this,"get","close","deselectAll","_close","_doubleTap","initLoadingEvents","_callSubscribers","listenIsLoading"),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.initSelectEvent(),this.initLoadingEvents(),this.editor.gesture.on("double_click",this._doubleTap),u.default.on("all",_.partial(this.propagate,"history"))},f.prototype.initSelectEvent=function(){var e=this.canvas;function t(e,t){return e&&t.length===e.length&&_.all(t,(function(t){return _.any(e,(function(e){return t.getAttribute("id")===e.getAttribute("id")||e.dataset.oldId&&t.querySelector("#".concat(e.dataset.oldId))}))}))}e.bind("editor.sub_selected",_.bind((function(e,n){n=_.compact(n),t(this.subElements,n)||this._select(n)}),this)),e.bind("editor.elem_selected",_.bind((function(e,t){this.subElements.length&&this._select(_.compact(t))}),this)),e.bind("editor.selected",_.bind((function(n,r){r=_.compact(r),t(this.selectedElements,r)||(e.runExtensions("selectedChanged",{elems:r}),this._select(r))}),this))},f.prototype.initLoadingEvents=function(){var e="loaderEvents";function t(t){var n=this;return function(){if(n.isLoading!==t)return n.isLoading=t,n._callSubscribers(e,t)}}this.subscribers[e]=this.subscribers[e]||[],INKIVE.DesignFacade.on("svg_loader.show",t.call(this,!0)),INKIVE.DesignFacade.on("svg_loader.hide",t.call(this,!1))},f.prototype.get=function(e,t){var n=d.default.camelize("get_"+e);return this[n]?this[n](t):this.getters[e]?this.getters[e].get.apply(this.getters[e],_.rest(arguments)):void 0},f.prototype.select=function(e){e=_.isArray(e)?e:[e];var t=_.chain(e).map((function(e){return $("#"+e)[0]})).filter(r).value(),n=_.map(e,(function(e){if("background"===e)return $("#svgcontent").children("g.background").children(":not(title)").last()[0];var t=$("#"+e);return r(t[0])?t.parents(".element")[0]:t[0]}));function r(e){return $(e).closest(".subelement").length}this.canvas.selectOnly(n),t.length>0&&(_.each(t,(function(e){$(e).addClass("active")})),this._select(t))},f.prototype.deselectAll=function(){this.subElements=[],this.selectedElements=[],this.canvas.clearSelection(),this.trigger("deselect_all")},f.prototype.nameChange=function(){var e=(0,i.default)(o.default.mark((function e(t){var n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:INKIVE.C.BOOK.name=Base64.encode(t.name),this.isSavingProjectName=!0,t.name&&h.instance.setProjectData(t).then((function(e){e.name=t.name,n.trigger("project.name.saved",t.name);try{INKIVE.EditorFacade.trigger("page.save_from_keyboard",{})}catch(e){}t.callback&&t.callback(),n.isSavingProjectName=!1}),(function(e){INKIVE.C.DEBUG&&console.error("Error saving project name. Error: "+e),n.isSavingProjectName=!1}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.prototype.closeCrop=function(e){var t=$(".clipperImage .layoutClipperImage");this.canvas.runExtensions("cropLayoutContent",{elem:t[0],layout:$("#"+t.data("old-id"))[0],hasChanges:!0}),this.trigger(("background"===e?"background":"image")+".crop.end")},f.prototype.cancelCrop=function(e){var t=$(".clipperImage .layoutClipperImage");this.canvas.runExtensions("cropLayoutContent",{elem:t[0],layout:$("#"+t.data("old-id"))[0],hasChanges:!1}),this.trigger(("background"===e?"background":"image")+".crop.cancel")},f.prototype.close=function(e){if(!this.isClosing){this.isBackToCreate=e&&e.back_to_create;var t=this.editor.getSvgString(),n=Base64.decode(INKIVE.C.BOOK.name).trim().toLowerCase(),r=INKIVE.Helpers.projectIsLinkedToRestrictions();if(this.isSavingProjectName)this.off("project.name.saved").once("project.name.saved",this.close);else if(r||INKIVE.EditorModeManager.isMode("logo")||INKIVE.C.IS_MOBILE_APP||"new project"!==n&&""!==n)if(INKIVE.C.IS_MOBILE_APP){this.isClosing=!0;var o=!INKIVE.Helpers.areEqual(t,this.handle("cache","get"));o||this._close(),o&&this.handlers.page.save().then(this._close,_.bind((function(){this.isClosing=!1}),this))}else{var i,s,a=_.bind((function(){var t=this;this.isClosing=!0,INKIVE.Modal.togglePageLoader(!0),INKIVE.disableWindowExitConfirm=!0,i&&i.close(),this.handlers.page._getChangesToSave(e).then(_.bind((function(t){t||this._close(),t&&this.handlers.page.save(e,t).then(this._close,_.bind((function(){this.isClosing=!1}),this))}),this),(function(){INKIVE.Modal.togglePageLoader(!1),t.isClosing=!1}))}),this);$("#ik-download-notification").is(":visible")?s="modal.close_confirm_dialog_downloading":INKIVE.hasEditorUnsavedChanges&&(s="modal.close_confirm_dialog"),s?i=INKIVE.Modal.modalWindow(INKIVE.TranslateHelper.translate(s),{headerTitle:INKIVE.TranslateHelper.translate("general.close"),width:350,buttons:[{title:INKIVE.TranslateHelper.translate("general.dont_save"),onClick:_.bind((function(){$(".modal").hide(),INKIVE.Modal.togglePageLoader(!0),this._close()}),this),width:"150px"},{title:INKIVE.TranslateHelper.translate("general.save"),onClick:a,width:"150px"}]}):a()}else $('body > header [data-value="project-name"] span').text("").focus(),this.canvas.call("advice.show","project-name")}},f.prototype.convertToImageBox=function(){var e=this.canvas.getSelectedElems()[0],t=this.canvas.getBBox(e),n=this.canvas.copyElem(e),r=$(e).closest("g.background").length;r||(_.each(["stroke","stroke-width","stroke-dasharray","stroke-linejoin","stroke-linecap","stroke-opacity","fill"],n.removeAttribute,n),n.setAttribute("fill-opacity","1"),this.canvas.deleteSelectedElements(),n.removeAttribute("id")),this.canvas.runExtensions("addLayoutBox",{elem:n,clipPathBB:t,background:r}),INKIVE.Tool.autoSave(n),this.trigger("convert_to_image_box")},f.prototype.getOrderedSelection=function(){return this.canvaSelectedElementsOrdered},f.prototype.getSelection=function(){var t=e("../design/design"),n=e("../restrictions/restrictions");return this.subElements=[],_.compact(_.map(this.canvaSelectedElements,_.bind((function(e){var o;if(e){if($(e).is(".subelement")){var i=e;e=$(e).parents(".element")[0],o=r.call(this,e,i),e.classList.contains("table")||this.subElements.push(i)}var s=$(e).is(".background")?"background":e.getAttribute("id"),a=$(e).attr("data-old-id");a&&$("#"+a).length>0&&(s=$(e).attr("data-old-id"));var l=t.get(s);return _.extend(l,{permissions:l?n.getAllElementPermissions(l.id):[]},{inner_element:o})}}),this)));function r(e,t){var n;if("sticker"===this.getType(e)){var r=new l.default;r.element=e,_.any(r.getTexts(),(function(e,r){if(e.element===t)return n={type:"text",index:r}}))}return n}},f.prototype.setWorkareaBackgroundColor=function(e){e=e||{};var t=_.contains(e.color,"#")?e.color:"#"+e.color;$("#canvas-panel").css("background-color",t),this.trigger("set_workarea_background_color",t)},f.prototype.align=function(e){this.handlers.align.handle(e)},f.prototype.tabState=function(){var e=INKIVE.Helpers.getActiveTab();if(e)return{panel:e,tab:$("#tab"+d.default.pascalize(e)).find(".header-links").find(".active").attr("data-key")}},f.prototype.switchTab=function(e){var t=d.default.pascalize(e.panel);$("#tool-panel").find("[href=#tab"+t+"]").trigger("click"),e.tab&&_.defer((function(){$("#tab"+t).find(".header-links").find("[data-key="+e.tab+"]").trigger("click")}))},f.prototype._close=function(){var e=this;function t(){window.location=BASE_URL+"create/designs/"}function n(e){INKIVE.Helpers.DownloadProcedure.download((function(n){if(n){var r="https://www.wattpad.com/myworks/covers/upload?source=desygner";r+="&storyId="+e,r+="&uri="+encodeURIComponent(n),INKIVE.Modal.closeAllPageLoaders(),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("top_submenu.share.project_ready")}),{skip:!1,callback:[function(){window.open(r,"_blank"),t()}]})}}))}INKIVE.hasEditorUnsavedChanges=!1,INKIVE.Helpers.api("inkive/close","GET",{scrapbook:INKIVE.C.BOOK.id},(0,i.default)(o.default.mark((function r(){var i,s,a,l,u,d,p,f,g,b,v,y,j,_,w,I,x,E,k,C,S,T;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.isClosing=!1,INKIVE.C.IS_MOBILE_APP&&INKIVE.Modal.togglePageLoader(!1),i=INKIVE.EditorModeManager.isMode("brand_template"),!(INKIVE.EditorModeManager.isMode("restrict")||i)){r.next=36;break}return r.next=7,new Promise((function(e){return h.instance.get(["settings"]).then(e)}));case 7:if(u=r.sent,d=(null===(s=u[0])||void 0===s||null===(a=s.add_ons)||void 0===a||null===(l=a.white_label)||void 0===l?void 0:l.config)||{},p=d.back_url,f=INKIVE.C.WHITE_LABEL_CONFIGURATION||{},g=f.domain||c.default.get("company_domain"),b="kw"===g||"kw"===f.parent_domain,v=!i&&(b?f.back_url:p),y=INKIVE.C.IS_WEBRAND?INKIVE.C.WE_BRAND:INKIVE.C.BASE_URL,j=INKIVE.C.IS_PROXYED?INKIVE.C.WE_BRAND:!INKIVE.C.WORKSPACE||"kw"!==f.parent_domain&&0!==g.indexOf("_")?y.replace(/(https?:\/\/)/,"$1"+g+"."):y.replace(/(https?:\/\/)/,"$1"+f.parent_domain+"."),_="enterprise"===f.subscription_plan,w=(0,m.getQueryParameter)("referrer"),I=w&&w.includes("workspace/"),x=i||!_||v||w,!(g&&(e.isBackToCreate||!x||I))){r.next=33;break}if(E=j+"create",!w||!w.includes("create/")&&!I){r.next=30;break}return r.next=26,h.instance.getCompanyData();case 26:C=r.sent,(S=C&&(null===(k=C.parent_companies[0])||void 0===k?void 0:k.domain))&&w.includes("workspace/".concat(C.id))&&(j=j.replace(C.domain,S)),E=j+w;case 30:window.location=E,r.next=34;break;case 33:v?(v+=/.*\?[^/]*$/.test(v)?"&":"?",v+="design_id="+INKIVE.C.BOOK.id,INKIVE.C.BOOK.external_reference&&(v+="&design_external_reference="+INKIVE.C.BOOK.external_reference),window.top.location.href=v):g?window.location=j+(w||""):document.referrer&&(/\.desygner.com/.test(document.referrer)||INKIVE.C.IS_DEV)?window.location=document.referrer:window.location=j+(w||"");case 34:r.next=38;break;case 36:T=(0,m.getQueryParameter)("external_ref"),!INKIVE.C.IS_MOBILE_APP&&T?n(T):t();case 38:case"end":return r.stop()}}),r)}))))},f.prototype._select=function(e){this.canvaSelectedElementsOrdered=e.map((function(e){var t=$(e);if(t.is(".subelement")){var n=t.parents(".table");if(n)return n[0]}return e})),this.canvaSelectedElements=_.sortBy(e,(function(e){return-$(e).index()})),this.selectedElements=_.compact(_.map(e,(function(e){return $(e).is(".subelement")?$(e).parents(".element")[0]:e}))),this.trigger("select",this.getSelection())},f.prototype._doubleTap=function(t){var n=e("../design/design"),r=this.canvas.getSelectedElems(),o=e("../restrictions/restrictions");this.trigger("double_tap",_.map(r,_.bind((function(e){var r;if("sticker"===this.getType(e)){var i=$(t.target).closest("g.textarea")[0];if(i){var s=new l.default;s.element=e,_.any(s.getTexts(),(function(e,t){if(e.element===i)return r={type:"text",index:t}}))}}var a=n.get($(e).is(".background")?"background":e.getAttribute("id"));return _.extend(a,{permissions:o.getAllElementPermissions(a.id)},{inner_element:r})}),this)))},f.prototype.initializeUserCredentials=function(){p.default.get(!0)},f.prototype._callSubscribers=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.subscribers[e]||[];return o.forEach((function(e){return e.apply(null,n)}))},f.prototype.listenIsLoading=function(e){"function"==typeof e&&this.subscribers.loaderEvents.push(e)},t.exports=(0,a.default)(e("./app/editor"),new f)},{"../../../helpers/dataUrl":632,"../../app/decorate":5,"../../core/history/history":12,"../../factory/company":122,"../../factory/user-info":161,"../../utils/cookie-storage":612,"../../utils/humps":615,"../abstract/facade":35,"../design/design":47,"../design/getters/sticker":57,"../restrictions/restrictions":118,"./app/editor":89,"./getters/history":92,"./getters/logs":93,"./getters/page":94,"./handlers/align":95,"./handlers/background":96,"./handlers/cache":97,"./handlers/coach-marks":98,"./handlers/download":101,"./handlers/history":102,"./handlers/image":103,"./handlers/page":104,"./handlers/printing":105,"./handlers/shopping-cart":106,"./handlers/tool-mode":107,"./handlers/translations":108,"./handlers/video":110,"./handlers/zoom":111,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.trim.js":929,"core-js/modules/web.dom-collections.for-each.js":964}],92:[function(e,t,n){"use strict";var r=e("../../../core/history/history");t.exports={get:function(e){return"version"==e?r.getVersion(arguments[1]):"current"==e?r.getCurrentId():void 0}}},{"../../../core/history/history":12}],93:[function(e,t,n){"use strict";t.exports={get:function(){var e=$("#svgcontent").html(),t=INKIVE.Tool.getInstance();return{project_id:INKIVE.C.BOOK.id,svg_save_string:t.getSaveString(),is_ready_to_save:t.isReadyToSave(),dom_svgcontent:!!e,design_id:INKIVE.Tool._current_design_id,page_number:INKIVE.Tool._current_page_number,image_cache:INKIVE.ImagesFactory.imagesData,images_inlined:INKIVE.ImagesFactory.inlinedImages,svg_string:e||t.editor.getSvgString()}}}},{}],94:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js"),t.exports={get:function(e){return"id"===e?parseInt(INKIVE.Tool._current_design_id):"current"===e?parseInt(INKIVE.Tool._current_page_number):"total"===e?parseInt(INKIVE.C.BOOK.num_pages):{id:parseInt(INKIVE.Tool._current_design_id),has_changes:this._hasChanges(),current:parseInt(INKIVE.Tool._current_page_number),total:parseInt(INKIVE.C.BOOK.num_pages)}},_hasChanges:function(){var e=INKIVE.Tool.getInstance();return!(!INKIVE.RestrictionsFactory||INKIVE.RestrictionsFactory.isAllSaved())||!INKIVE.Helpers.areEqual(e.editor.getSvgString(),INKIVE.EditorFacade.handle("cache","get"))}}},{"core-js/modules/es.parse-int.js":905}],95:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),t.exports=_.extend({initialize:function(){_.bindAll(this,"handle","_calculatePageNoOverlap");var e=INKIVE.Tool.getInstance();this.editor=e.editor,this.canvas=this.editor.canvas,this.svgroot=$("#svgroot").get(0)},new_coords:{center:function(e,t){return{x:e.x+e.width/2-(t.x+t.width/2),y:e.y+e.height/2-(t.y+t.height/2)}},vertical_middle:function(e,t){return{x:0,y:e.y+e.height/2-(t.y+t.height/2)}},horizontal_middle:function(e,t){return{x:e.x+e.width/2-(t.x+t.width/2),y:0}},left:function(e,t){return{x:e.x-t.x,y:0}},right:function(e,t){return{x:e.x+e.width-(t.x+t.width),y:0}},top:function(e,t){return{x:0,y:e.y-t.y}},bottom:function(e,t){return{x:0,y:e.y+e.height-(t.y+t.height)}}},handle:function(e){this.elems=_.clone(INKIVE.EditorFacade.getOrderedSelection()),this.elems&&this.elems.length&&(this.position=e.position,this.relativeTo=e.relative_to,this.offset=e.offset,_.isNumber(this.offset)||(this.offset=.05),this._align(),this.canvas.runExtensions("clear",{}),this.trigger(),this.trigger("end",this.elems))},_align:function(){var e;if(_.contains(["selection","first_selected","last_selected"],this.relativeTo))e=this._getReferenceElement();else{e=svgedit.utilities.getBBox($("#canvasBackground").get(0));var t=0;_.contains(["left","right"],this.position)?t=e.width*this.offset:_.contains(["top","bottom"],this.position)&&(t=e.height*this.offset);var n=this._getBBox(this.elems[0]);(n.height+t>e.height||n.width+t>e.width)&&(t=0),e.x+=t,e.y+=t,e.width-=2*t,e.height-=2*t}for(var r=0;r<this.elems.length;r++){var o=this.new_coords[this.position](e,this._getBBox(this.elems[r]));"page_not_overlap"===this.relativeTo&&this._calculatePageNoOverlap(o,r),this._setPosition(this.elems[r],o)}},_getBBox:function(e){var t=this.canvas.getZoom(),n=INKIVE.Helpers.getSelectedCoordinates(e);return{x:n.x1/t,y:n.y1/t,width:(n.x2-n.x1)/t,height:(n.y3-n.y1)/t}},_setPosition:function(e,t){var n=this.svgroot.createSVGTransform(),r=svgedit.transformlist.getTransformList(e);n.setTranslate(t.x,t.y),r.appendItem(n),svgedit.recalculate.recalculateDimensions(e),this.canvas.selectorManager.requestSelector(e).resize()},_calculatePageNoOverlap:function(e,t){for(var n=t,r=0,o=0;0!==n;)switch(n--,this.position){case"left":r+=this.elems[n].getBBox().width;break;case"right":r-=this.elems[n].getBBox().width;break;case"top":o+=this.elems[n].getBBox().height;break;case"bottom":o-=this.elems[n].getBBox().height}e.x+=r,e.y+=o},_getReferenceElement:function(){var e="last_selected"===this.relativeTo?this.elems.length-1:0;return"selection"===this.relativeTo&&_.each(this.elems,_.bind((function(t,n){switch(this.position){case"left":t.getBBox().x<this.elems[e].getBBox().x&&(e=n);break;case"right":t.getBBox().x+t.getBBox().width>this.elems[e].getBBox().x+this.elems[e].getBBox().width&&(e=n);break;case"top":t.getBBox().y<this.elems[e].getBBox().y&&(e=n);break;case"bottom":t.getBBox().y+t.getBBox().height>this.elems[e].getBBox().y+this.elems[e].getBBox().height&&(e=n)}}),this)),this._getBBox(this.elems[e])}},Backbone.Events)},{"core-js/modules/es.function.bind.js":883}],96:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},crop:function(){var t=$("#svgcontent").find(".background").find("image").get(0);if(t){var n=e("../editor");this.currentZoom=n.handle("zoom","get"),this.trigger("crop.start",{id:t.getAttribute("id")}),_.defer(_.bind((function(){this._fitZoomToImageSize(n,t),this.canvas.runExtensions("backgroundReposition",{layout:t,callback:_.bind((function(){this.trigger("crop.end",{id:t.getAttribute("id")}),n.handle("zoom","set",{zoom:this.currentZoom})}),this)})}),this))}},_fitZoomToImageSize:function(e,t){var n=svgedit.utilities.getBBox(t);if(n){e.handle("zoom","center",{x:n.x+n.height/2,y:n.y+n.width/2}),e.handle("zoom","fit",n);var r=e.handle("zoom","get")/1.2;r>this.currentZoom&&(r=this.currentZoom),e.handle("zoom","set",{zoom:r})}}},Backbone.Events)},{"../editor":91,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],97:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js");var r={};t.exports=_.extend({initialize:function(){},clear:function(){r={},this.trigger("cleared")},set:function(e){e.design_id=e.design_id||INKIVE.Tool._current_design_id,r[e.design_id]=e.data},get:function(e){return e=e||{design_id:INKIVE.Tool._current_design_id},r[e.design_id]},remove:function(e){var t={};e=e||{design_id:INKIVE.Tool._current_design_id},_.each(r,(function(n,r){if(r!=e.design_id){var o=r>e.design_id?parseInt(r)-1:r;t[o]=n}})),r=t,this.trigger("removed")},add:function(e){var t={};e=e||{design_id:INKIVE.Tool._current_design_id},_.each(r,(function(n,r){var o=r>=e.design_id?parseInt(r)+1:r;t[o]=n})),r=t}},Backbone.Events)},{"core-js/modules/es.parse-int.js":905}],98:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var r=e("./coach-marks/view"),o=e("../../../factory/company").instance;t.exports=_.extend({initialize:function(){INKIVE.C.IS_MOBILE||this._load()},_load:function(){return this._checkAddon().then(this._loadView)},_loadView:function(e){if(e){var t=$.Deferred(),n=$('<div id="coach-marks-panel">');return $(document.body).append(n),this.coachMarksView=new r({el:n}),t}},_checkAddon:function(){return o.initialize().then((function(){return o.getCompanyItems("add_ons")})).then((function(e){return e.includes("coach_marks")}))}},Backbone.Events)},{"../../../factory/company":122,"./coach-marks/view":100,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.string.includes.js":915}],99:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="widget-container">\n  <div class="coach-marks" aurelia-app="coach-marks/main"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],100:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("./template.hbs");t.exports=Backbone.View.extend({initialize:function(){if(!INKIVE.C.IS_MOBILE){this.render();var e=this.$el.children(".widget-container");INKIVE.Helpers.getAureliaLibraries(e.find('[aurelia-app="coach-marks/main"]'))}},render:function(){this.$el.html(r())}})},{"./template.hbs":99,"core-js/modules/es.array.find.js":859}],101:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},pdf:function(){return this.displayModal("pdf")},jpeg:function(){return this.displayModal("jpeg")},png:function(){return this.displayModal("png")},displayModal:function(e){var t=this._download.bind(this),n=INKIVE.TranslateHelper.translate,r=new INKIVE.ModalDownload({format:e,contentW:this.canvas.contentW,contentH:this.canvas.contentH}),o=INKIVE.Modal.modalWindow(r.getFormHtml(),{width:600,headerIcon:"icon-cloud-download",headerTitle:n("modal.title.download_format",{format:e.toUpperCase()}),buttons:[{title:n("modal.buttons.download"),onClick:function(){t($(this),o,r)}}]})},_download:function(e,t,n){e.addClass("disabled");var r=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0});function o(n){n?t.close():e.removeClass("disabled"),r.close()}INKIVE.EditorFacade.handle("page","save").then((function(){n.download(o)}))}},Backbone.Events)},{"core-js/modules/es.function.bind.js":883}],102:[function(e,t,n){"use strict";var r=e("../../../core/history/history");t.exports=_.extend({initialize:$.noop,undo:function(){r.undo()},redo:function(){r.redo()},restore:function(e){r.restore(e)}},Backbone.Events)},{"../../../core/history/history":12}],103:[function(e,t,n){"use strict";e("core-js/modules/web.timers.js"),e("core-js/modules/es.function.bind.js"),t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},filter:function(e){INKIVE.C.IS_MOBILE_APP||$("<div>").filterpicker({$svgImageElement:$(e)}).trigger("click")},setAsBackground:function(t){var n=e("../../design/design"),r=n.get(t.id),o=t.getAttribute("xlink:href");if((r.flipped.horizontal||r.flipped.vertical)&&(o=t.getAttribute("data-original-href")),$(t).hasClass("layoutBox")){$(t).removeClass("layoutBox");var i=svgedit.utilities.getClipPath(t);i&&$(i).parent()[0].removeChild(i);var s=$(t).attr("filter")}this.canvas.deleteSelectedElements(),n.set("background",{source:o,previous_image_flipped:r.flipped,old_image_id:t.id,previous_image_filter:s})},crop:function(t,n){if(n=n||{},e("../../restrictions/restrictions").canChange(t,"crop")){if(!$(t).hasClass("layoutBox")){t=this._convertToLayoutBox(t,n),this.canvas.call("advice.show","convert-to-layout-box");var r=10,o=setInterval((function(){$(".selectorGrip.crop-handler").each((function(){$(this).attr("fill",r%2?"#ffdd17":"#ffffff")})),r--||clearInterval(o)}),400);n.skip_selection||this.canvas.addToSelection([t],!0)}if(!n.quiet){var i=e("../editor"),s=i.handle("zoom","get");this.trigger("crop.start",{id:t.getAttribute("id")}),_.defer(_.bind((function(){this._fitZoomToImageSize(i,t),this.canvas.runExtensions("showLayoutClipper",{layout:t,callback:_.bind((function(){this.trigger("crop.end",{id:t.getAttribute("id")}),i.handle("zoom","set",{zoom:s})}),this)})}),this))}}},_convertToLayoutBox:function(e,t){var n=this.canvas.getBBox(e),r=t.clip_path||n,o=e.getAttribute("id"),i=e.getAttribute("xlink:href"),s=e.getAttribute("custom-placeholder"),a=e.getAttribute("is-defined-placeholder"),l=this.canvas.addSvgElementFromJson({element:"rect",curStyles:!1,attr:{x:r.x,y:r.y,id:this.canvas.getNextId(),width:r.width,height:r.height}});$(e).remove(),e=this.canvas.runExtensions("addLayoutBox",{elem:l,clipPathBB:r,"xlink:href":i,"custom-placeholder":s,"is-defined-placeholder":a});var c=t.scale||1.2,u=n.width*c,d=n.height*c;return this.trigger("rename."+o,{id:e.getAttribute("id")}),e.setAttribute("width",u),e.setAttribute("height",d),e.setAttribute("x",n.x-(u-n.width)/2),e.setAttribute("y",n.y-(d-n.height)/2),$(e).addClass("layoutBox"),e},_fitZoomToImageSize:function(e,t){var n,r,o=e.handle("zoom","get"),i=svgedit.utilities.getBBox(t);n=t.getBoundingClientRect(),r=$("#svgcanvas")[0].getBoundingClientRect(),n.width<r.width&&n.height<r.height||e.handle("zoom","fit",svgedit.utilities.getBBox(t)),i&&e.handle("zoom","center",{x:i.x+i.height/2,y:i.y+i.width/2}),e.handle("zoom","get")>o&&e.handle("zoom","set",{zoom:o})}},Backbone.Events)},{"../../design/design":47,"../../restrictions/restrictions":118,"../editor":91,"core-js/modules/es.function.bind.js":883,"core-js/modules/web.timers.js":966}],104:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o,i,s,a,l,c=r(e("@babel/runtime/regenerator")),u=r(e("@babel/runtime/helpers/asyncToGenerator")),d=r(e("../../../app/decorate")),p=r(e("../../../ui/editor-mode-manager")),h=e("../../../factory/company"),m=r(e("./undraft-modal")),f=r(e("../../../../helpers/waitForPageLoad")),g=r(e("../../../utils/pdf-processing-manager.js"));t.exports=(0,d.default)(e("../app/page"),_.extend({initialize:function(){this.savingDeferred=null,this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},unload:function(t){var n=e("../editor");(t=t||{}).page_number=t.page_number||INKIVE.Tool._current_page_number,t.remove_from_cache&&n.handle("cache","remove",{page_number:t.page_number}),INKIVE.Tool._current_page_number===t.page_number&&(INKIVE.Tool._current_design_id=null,INKIVE.Tool._current_page_number=0),this.trigger("unloaded")},moveTo:(l=(0,u.default)(c.default.mark((function t(n){var r,o,i,s,a,l,u,d,p;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.save,o=n.quiet,i=n.page_number,s=n.design_id,a=n.page_is_empty,l=INKIVE.Tool._current_page_number>=1&&!1!==r&&!document.getElementById("svgroot").classList.contains("screenshot-temp-canvas"),u=$.Deferred(),this.canvas.clearSelection(),!i&&s&&(d=e("../../project/project"),p=d.get("design",{design_id:s}),i=p.page_number),!(s?s===INKIVE.Tool._current_design_id:i===INKIVE.Tool._current_page_number)){t.next=9;break}return u.resolve(),t.abrupt("return",u.promise());case 9:if(o||INKIVE.Modal.togglePageLoader(!0),!l){t.next=13;break}return t.next=13,this.save({quiet:!0});case 13:return t.prev=13,t.next=16,this._moveTo(i,a);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(13),console.error(t.t0);case 21:return INKIVE.Modal.closeAllPageLoaders(),o||INKIVE.Modal.togglePageLoader(!1),u.resolve(),t.abrupt("return",u.promise());case 25:case"end":return t.stop()}}),t,this,[[13,18]])}))),function(e){return l.apply(this,arguments)}),save:(a=(0,u.default)(c.default.mark((function e(t,n){var r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.savingDeferred||!t||t.additional_props){e.next=2;break}return e.abrupt("return",this.savingDeferred.promise());case 2:if(this.savingDeferred=$.Deferred(),!this._isLegacySave()){e.next=7;break}this._handleLegacySave(),e.next=22;break;case 7:return e.prev=7,e.next=10,this._getChangesToSave(t,n);case 10:if((r=e.sent)||INKIVE.hasEditorUnsavedChanges){e.next=13;break}throw new Error("no changes");case 13:return e.next=15,(0,f.default)();case 15:return e.next=17,this._handleDefaultPageSave(r,t);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),this._handleNothingToSave(t);case 22:return e.abrupt("return",this.savingDeferred.promise());case 23:case"end":return e.stop()}}),e,this,[[7,19]])}))),function(e,t){return a.apply(this,arguments)}),loadVersion:function(e){if(e&&e.version_id){e.design_id=e.design_id||INKIVE.Tool._current_design_id;var t=INKIVE.ProjectFacade.get("design",{design_id:e.design_id});INKIVE.EditorFacade.handle("cache","remove",{design_id:e.design_id}),this.tool.load(t.page_number,_.bind(this.trigger,this,"load_version",e),e.version_id)}},hideSelectionHandlers:function(e){$("#selectorParentGroup").toggle(!e)},_getChangesToSave:function(e,t){var n=$.Deferred(),r=this.editor.getSvgString(),i=this.canvas.getCurrentDrawing().getCurrentLayer(),s=i&&"clipperImage"===i.getAttribute("class"),a=this.canvas.runExtensions("getBleedValues",{}).active,l=t&&t.undraft,c=!INKIVE.Helpers.areEqual(r,INKIVE.EditorFacade.handle("cache","get")),u=INKIVE.RestrictionsFactory&&!INKIVE.RestrictionsFactory.isAllSaved(),d=INKIVE.PlaceholdersFactory&&INKIVE.PlaceholdersFactory.haveChanged(),p=e&&!!e.additional_props,f=!s&&!a&&(c||u||l||d||p);return c=c||e&&e.force_save,s||a||INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.TEMPLATE?g():e&&e.confirm_draft&&!1!==l?function(){function t(){e.askedConfirmation||!o.is_draft||o.is_under_review?g():function(){if(INKIVE.Modal.lockStatus||!f||INKIVE.C.REVIEW_MODE)return g();(0,m.default)((function(){e.askedConfirmation=!0,l=!0,g()}),(function(){l=!1,g()}))}()}o&&t(),o||h.instance.get(["templates",INKIVE.C.BOOK.encodedId]).then((function(e){return o=e,t()}))}():g(),n.promise();function g(){n.resolve(f?{animation:p,undraft:l,design:c,restrictions:u,placeholders:d}:null)}},_isLegacySave:function(){return _.contains(["template","sticker","banner","placeholder"],p.default.getMode())},_handleLegacySave:function(){var e=this;this.tool.save(null,(function(){var t=e.savingDeferred;e.savingDeferred=null,t.resolve()}))},_handleNothingToSave:function(e){var t=this;e=e||{quiet:!1,no_events:!1},_.defer((function(){t.savingDeferred=null})),this.savingDeferred.resolve(e.quiet),e.no_events||this.trigger("already_saved"),e.quiet||this.editor.canvas.call("advice.show","already-saved")},_handleDefaultPageSave:function(e,t){var n=[];return(t=t||{quiet:!1,no_events:!1}).no_events||this.trigger("saving"),e.restrictions&&n.push(INKIVE.RestrictionsFactory.save()),e.undraft&&n.push(h.instance._undraft()),e.placeholders&&n.push(INKIVE.PlaceholdersFactory.save({undraft:e.undraft})),$.when.apply($,n).then(_.debounce(r.bind(this,!0),0),_.debounce(r.bind(this,!1),0));function r(n){var r=this,o=this.savingDeferred;this.savingDeferred=null,o&&(n?e.design||e.animation||t.additional_props?this.tool.savePage(t.quiet,(function(e){return r._onSaved(o,e)}),!1,t.additional_props):o.resolve():o.reject())}},_onSaved:function(e,t){t?(this.trigger("saved"),INKIVE.hasEditorUnsavedChanges=!1,e.resolve()):e.reject()},_moveTo:(s=(0,u.default)(c.default.mark((function e(t,n){var r,o,i=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!n,!e.t0){e.next=5;break}return e.next=4,g.default.isBeingProcessed(t);case 4:e.t0=e.sent;case 5:if(r=e.t0,this._toggleUI(!r),!r){e.next=19;break}if(!(o=INKIVE.ProjectFacade.get("design",{page_number:t}))){e.next=15;break}return e.next=12,this._loadFakePage(o);case 12:INKIVE.Tool._current_design_id=o.design_id,e.next=16;break;case 15:INKIVE.Tool._current_design_id=null;case 16:INKIVE.Tool._current_page_number=t,e.next=21;break;case 19:return e.next=21,new Promise((function(e){return i.tool.load(t,e,null,n,!0)}));case 21:this.trigger("move_to",{page_number:t}),INKIVE.C.IS_MOBILE&&this.tool.updateCurrentPageInfo();case 23:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)}),_loadFakePage:(i=(0,u.default)(c.default.mark((function t(n){var r,o,i;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var r=e("../../../factory/page-thumbnail").get(n.design_id,n),o=new Image;o.src=r,o.onload=function(){return t(o)},o.onerror=function(){return t(null)}}));case 2:r=t.sent,o=Base64.decode(INKIVE.C.BLANK_SVG),r&&(o=o.replace(/width="\d+"/g,'width="'.concat(r.width,'"')).replace(/height="\d+"/g,'height="'.concat(r.height,'"'))),this.editor.loadSvgString(o),r&&((i=this.canvas.addElement("image",{x:0,y:0,url:r.src,width:r.width,height:r.height})).classList.add("screenshot-temp-canvas"),i.style.cursor="not-allowed");case 7:case"end":return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)}),_toggleUI:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=document.querySelector("#element-popupmenu > .root-popupmenu"),o=document.getElementById("svgroot");n?(INKIVE.Tool.enableUI(),null==r||null===(e=r.classList)||void 0===e||e.remove("disabled"),o.classList.remove("screenshot-temp-canvas"),o.style.cursor=""):(INKIVE.Tool.disableUI(),document.getElementById("pages-panel").classList.remove("disabled"),null==r||null===(t=r.classList)||void 0===t||t.add("disabled"),o.classList.add("screenshot-temp-canvas"),o.style.cursor="not-allowed",this.canvas.call("advice.show","processing-pdf"))}},Backbone.Events))},{"../../../../helpers/waitForPageLoad":645,"../../../app/decorate":5,"../../../factory/company":122,"../../../factory/page-thumbnail":147,"../../../ui/editor-mode-manager":204,"../../../utils/pdf-processing-manager.js":619,"../../project/project":113,"../app/page":90,"../editor":91,"./undraft-modal":109,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],105:[function(e,t,n){"use strict";e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.find.js"),t.exports=_.extend({initialize:function(){_.bindAll(this,"_moveToPage","_resetPrintable"),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,INKIVE.ProjectFacade.on("design.added",this._resetPrintable),INKIVE.ProjectFacade.on("design.removing",this._resetPrintable)},open:function(){if(!this.orderPrintView){var t=e("../../../ui/top-submenu/contents/order-print/view");this.orderPrintView=new t}this.orderPrintView.show(),INKIVE.EditorFacade.on("page.move_to",this._moveToPage)},close:function(){this.orderPrintView&&this.orderPrintView.hide(),INKIVE.EditorFacade.off("page.move_to",this._moveToPage),INKIVE.C.IS_MOBILE||_.delay(this._refreshActiveTab,500)},imageQualityCheck:function(e){this.orderPrintView&&this.orderPrintView.imageQualityCheck(e)},toggleBleed:function(e){this.orderPrintView&&this.orderPrintView.toggleBleed(e)},replaceImage:function(e){this.orderPrintView&&this.orderPrintView.replaceImage(e)},forceDownload:function(e){this.orderPrintView&&this.orderPrintView.forceDownload(e)},getBleed:function(e){return this.canvas.runExtensions("getBleedValues")},isProjectPrintable:function(){var t=this;return new Promise((function(n,r){if(_.isUndefined(t.printable)){var o=e("../../../factory/desygner-api"),i=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"brand/templates/":"brand/designs/";o.get(i+INKIVE.C.BOOK.encodedId).then(_.bind((function(e){this.printable=e&&e.is_printable,n(this.printable)}),t))}else n(t.printable)}))},_moveToPage:function(){var e=this.orderPrintView[this.orderPrintView.currentState];e&&(e({show:!1}),INKIVE.EditorFacade.once("history.reload",(function(){_.defer((function(){e({show:!0})}))})))},_refreshActiveTab:function(){var e=INKIVE.Helpers.getActiveTab();if(e){var t="#tab"+e.charAt(0).toUpperCase()+e.slice(1);$("#tool-panel").find("[href="+t+"]").trigger("click")}},_resetPrintable:function(){this.printable=void 0}},Backbone.Events)},{"../../../factory/desygner-api":123,"../../../ui/top-submenu/contents/order-print/view":577,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907}],106:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var r=e("../../../ui/top-submenu/contents/shopping-cart/view"),o=e("../../../facade/design/design"),i=e("../../../factory/images");t.exports=_.extend({shoppingCartLoadingPromise:null,initialize:$.noop,itemsInCart:{},open:function(){this.loadWidget(!0).then(_.bind(this.trigger,this,"open"))},add:function(e){var t=this;Object.values(this.itemsInCart).find((function(t){return t===e.id}))||(this.loadWidget().then(_.bind(this.trigger,this,"add",e)),o.once("image.create.resize_external",(function(n){$("#"+n.id).data("external_id")===e.id&&(t.itemsInCart[n.id]=e.id)})))},onReady:function(){this.shoppingCartLoadingPromise||this.loadWidget(),this.shoppingCartLoadingPromise.resolve()},onTotal:function(e){this.shoppingCartView.setTotal(e)},onRemove:function(e){o.get().forEach((function(t){var n=$("#"+t.id);n.removeClass("layoutBox").data("external_id")===e.id&&(n.removeClass("layoutBox"),o.handle(t.id,"delete"))})),this.trigger("removed",e)},onPayment:function(e){var t,n,r,s,a=function(){var t,r,o,i={};for(t in e.info)for(r in o=e.info[t],n=o.type,o.licence.samples)i[o.licence.samples[r]]=o.data.source;return i}(),l=o.get();for(e.thumbId||this.shoppingCartView.enableMenu(),this.trigger("paid",e),INKIVE.Tool.getInstance().editor.canvas.clearSelection(),t=0;t<l.length;t++)switch(l[t].type){case"background":r=l[t],s=void 0,s=r.source,a[s]&&o.set(r.id,{source:a[s]});break;case"image":u(l[t]);break;case"sticker":c(l[t]);break;case"icon":u(l[t])}function c(t){var n=document.getElementById(t.id).querySelector("image"),r=n&&n.id,i=o.get(r),s=t.source||i&&i.source&&i.source.url;a[s]&&o.set(t.id,{keep_box_size:!0,source:{external_resize:!0,preload:!0,url:INKIVE.Helpers.getCORSSecureUrl(a[s])},skipHistory:e.skipHistory})}function u(t){var n=$("#"+t.id),r=t.source&&t.source.url||t.source,s=a[r]||a[n.data("external_url")];s&&t.id!==e.thumbId&&i.smartLoad(s,{width:50,height:50},(function(r,i){var a=i.width>i.height;e.thumbId&&o.handle(e.thumbId,"delete"),e.thumbId?(o.create("image",{source:{external_resize:!0,url:s},position:t.position,size:{width:a?t.size.width:t.size.height*i.width/i.height,height:a?t.size.width*i.height/i.width:t.size.height},skipHistory:e.skipHistory}),n.removeClass("layoutBox"),o.handle(t.id,"delete")):o.set(t.id,{keep_box_size:!0,source:{external_resize:!0,preload:!0,url:s},skipHistory:e.skipHistory})}),!0)}n&&this.refreshLibrary(n)},loadWidget:function(e){if(!this.shoppingCartLoadingPromise){var t=$('<panel id="shopping-cart-panel">');$("#content").append(t),$('header > .options > [data-value="project-name"]').css({"margin-right":"46px"}),this.shoppingCartView=new r({el:t}),this.shoppingCartLoadingPromise=$.Deferred(),o.on("delete",_.bind(this.deleteItem,this))}return e&&this.shoppingCartView.show(),this.shoppingCartLoadingPromise},refreshLibrary:function(e){var t=INKIVE.Tabs[e.toLowerCase()+"s"];t.canUseLibrary=!0,t.initLibraryView({refresh:!0})},reset:function(){for(var e=INKIVE.DesignFacade.get(),t=0;t<e.length;t++)$("#"+e[t].id).data("external_source",null).data("external_id",null)},deleteItem:function(e){this.itemsInCart[e]&&INKIVE.EditorFacade.trigger("shopping_cart.remove",this.itemsInCart[e]),this.itemsInCart[e]=null}},Backbone.Events)},{"../../../facade/design/design":47,"../../../factory/images":127,"../../../ui/top-submenu/contents/shopping-cart/view":592,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.values.js":903,"core-js/modules/web.dom-collections.for-each.js":964}],107:[function(e,t,n){"use strict";t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor},select:function(){this.editor.setMode("select")},fhpath:function(){this.editor.setMode("fhpath")},square:function(){this.editor.setMode("square")},rect:function(){this.editor.setMode("rect")},circle:function(){this.editor.setMode("circle")},ellipse:function(){this.editor.setMode("ellipse")},line:function(){this.editor.setMode("line")}},Backbone.Events)},{}],108:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.date.now.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js");var o,i,s,a,l,c=r(e("@babel/runtime/regenerator")),u=r(e("@babel/runtime/helpers/asyncToGenerator"));function d(e){return p.apply(this,arguments)}function p(){return(p=(0,u.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.clipboard){e.next=2;break}return e.abrupt("return",h(t));case 2:return e.prev=2,e.next=5,navigator.clipboard.writeText(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Async: Could not copy text",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function h(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Fallback: could not copy text",e)}document.body.removeChild(t)}t.exports=_.extend({initialize:function(){this.progress=0,this.canvas=INKIVE.Tool.getInstance().editor.canvas},display:(l=(0,u.default)(c.default.mark((function e(t){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadingPromise=this._loadingPromise||this._load();case 2:return e.next=4,INKIVE.CompanyFactory.getProjectData();case 4:n=e.sent,this._translationsApp.invoke("toggle",{display:!0,companyId:n.company.id,template:n,snapshot:t&&t.snapshot});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)}),getAllCompleted:function(){return 1===this.progress},_load:(a=(0,u.default)(c.default.mark((function e(){var t,n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return INKIVE.Modal.togglePageLoader(!0),this._onDisplayParentVersion=this._onDisplayParentVersion.bind(this),this._onApply=this._onApply.bind(this),this._copyToClipboard=this._copyToClipboard.bind(this),this._onToggle=this._onToggle.bind(this),this._onSelection=this._onSelection.bind(this),this._onCompleted=this._onCompleted.bind(this),this._removePreview=this._removePreview.bind(this),this.getAllCompleted=this.getAllCompleted.bind(this),(t=document.createElement("div")).id="translations-panel",t.setAttribute("aurelia-app","@desygner/translations-viewer/main"),document.querySelector("#content").appendChild(t),e.next=15,INKIVE.Helpers.getAureliaLibraries($(t));case 15:return e.next=17,System.import("@desygner/adapter/adapter");case 17:return n=e.sent,r=n.adapter,this._translationsApp=r.getAdapterByDomElement(t),this._setListeners(),e.next=23,new Promise((function(e){return INKIVE.Helpers.afterRendering(e)}));case 23:INKIVE.Modal.togglePageLoader(!1);case 24:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),_setListeners:function(){this._translationsApp.on("displayParentVersion",this._onDisplayParentVersion),this._translationsApp.on("apply",this._onApply),this._translationsApp.on("copyToClipboard",this._copyToClipboard),this._translationsApp.on("toggle",this._onToggle),this._translationsApp.on("selection",this._onSelection),this._translationsApp.on("completed",this._onCompleted)},_onDisplayParentVersion:function(e){var t=this,n=e.image;document.getElementById("pages-panel").style.display="none",this._overlay=document.createElement("div"),this._overlay.style.cssText="\n      height: 100vh;\n      width: 100vw;\n      position: fixed;\n      top: 0;\n      left: 0;\n      background-color: rgb(19, 24, 33, 0.4);\n      cursor: pointer;\n      z-index: 1000;\n      display: none;\n    ";var r=Date.now();this._overlay.id=r,document.body.appendChild(this._overlay),INKIVE.DesignFacade.trigger("translations.parent_template_preview.loading",{id:r});var o=document.getElementById("svgcontent").getBoundingClientRect();this._previewNode=new Image,this._previewNode.style.cssText="\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      position: absolute;\n      margin: auto;\n    ",this._previewNode.setAttribute("height","".concat(Math.round(o.height),"px")),this._previewNode.setAttribute("width","".concat(Math.round(o.width),"px")),this._previewNode.onload=function(){t._previewNode.complete&&INKIVE.DesignFacade.trigger("translations.parent_template_preview.loaded",{id:r}),t._overlay.appendChild(t._previewNode),t._overlay.style.display="block",document.addEventListener("click",t._removePreview)},this._previewNode.onerror=function(){INKIVE.DesignFacade.trigger("translations.parent_template_preview.error",{id:r}),document.getElementById("pages-panel").style.display="",t.canvas.call("advice.show","display-parent-template-error")},this._previewNode.setAttribute("src",n)},_removePreview:function(){document.getElementById("pages-panel").style.display="",document.body.removeChild(this._overlay),document.removeEventListener("click",this._removePreview)},_onApply:(s=(0,u.default)(c.default.mark((function e(t){var n,r,o,i,s,a,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=t.id,r=t.translation,o=document.getElementById(n),i=Array.from(o.querySelectorAll("text")),s=Array.from(svgedit.utilities.text2xml("<g>".concat(r,"</g>")).querySelectorAll("text")))i[a]?i[a].innerHTML=s[a].innerHTML:o.innerHTML+=s[a].outerHTML;for(l=s.length;l<i.length;l++)i[l].parentElement.removeChild(i[l]);(new INKIVE.Text.Textarea).setDOM(o,!1).render(this.canvas);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),_copyToClipboard:(i=(0,u.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id,d(t.translation),this.canvas.call("advice.show","translation-copied");case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)}),_onToggle:function(e){var t=e.display;document.getElementById("sidebar-resize-button").style.display=t?"none":""},_onSelection:(o=(0,u.default)(c.default.mark((function e(t){var n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.task,r=t.block,INKIVE.Tool._current_design_id===n.context.pageId){e.next=4;break}return e.next=4,INKIVE.EditorFacade.handle("page","move_to",{design_id:n.context.pageId});case 4:INKIVE.EditorFacade.handle("select",r.id);case 5:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),_onCompleted:function(e){var t=e.progress;this.progress=t}},Backbone.Events)},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.from.js":863,"core-js/modules/es.date.now.js":879,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.iterator.js":917}],109:[function(e,t,n){"use strict";t.exports=function(e,t){var n=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("modal.alert.draft")}),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.draft_template",closeCallback:t,buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.remove_draft"),onClick:function(){n.close(),e()}},{title:INKIVE.TranslateHelper.translate("modal.buttons.keep_draft"),onClick:function(){n.close(),t({close:!0})}}]})}},{}],110:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("../../restrictions/restrictions"));t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas},crop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._convertToLayoutBox(e,t);r.default.canChange(e,"crop")&&(this.canvas.call("advice.show","convert-to-layout-box"),this.canvas.addToSelection([n],!0),t.quiet||this.cropBoxSelection(n,t))},cropBoxSelection:function(e){var t=this,n=e.getAttribute("id");this.trigger("crop.start",{id:n}),this.canvas.runExtensions("showLayoutClipper",{layout:e,callback:function(){t.trigger("crop.end",{id:n})}})},_convertToLayoutBox:function(e,t){if(e.hasAttribute("clip-path"))return e;e.classList.add("layoutBox");var n=this.canvas.getBBox(e),r=t.clip_path||n;return this.canvas.runExtensions("addVideoLayoutBox",{element:e,clipPathBB:r})}},Backbone.Events)},{"../../restrictions/restrictions":118,"@babel/runtime/helpers/interopRequireDefault":663}],111:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.parse-float.js"),t.exports=_.extend({initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,this.zoomIncrement=.1,this.zoomLowLimit=.1,this.zoomHightLimit=5,this.deltaScale=1e3},get:function(){return this.canvas.getZoom()},updateZoomInfoValue:function(){var e=INKIVE.DesignFacade.canvas.getZoom();document.querySelector(".zoom-wrapper .custom").textContent=parseInt(100*e)+"%"},set:function(e){e&&this.canvas.setZoom(e.zoom),this.adaptCanvasScroll()},fit:function(e){var t=this.getFitZoom(e);this.canvas.setZoom(this.getForcedZoomLimits(t)),this.adaptCanvasScroll()},center:function(e){var t=this.canvas.getZoom(),n=e.y*t,r=e.x*t,o=$(this.curConfig.workarea).height()/2,i=$(this.curConfig.workarea).width()/2,s=$("#ik-editor > .antiscroll-inner");s.scrollTop(n-o),s.scrollLeft(r-i)},original:function(){this.canvas.setZoom(1),this.adaptCanvasScroll()},in:function(){var e=this.getFitZoom(),t=this.canvas.getZoom()+this.zoomIncrement*e;this.canvas.setZoom(this.getForcedZoomLimits(t)),this.adaptCanvasScroll(),this.updateZoomInfoValue()},out:function(){var e=this.getFitZoom(),t=this.canvas.getZoom()-this.zoomIncrement*e;this.canvas.setZoom(this.getForcedZoomLimits(t)),this.adaptCanvasScroll(),this.updateZoomInfoValue()},getForcedZoomLimits:function(e){return this.adaptCanvasScroll(),e>this.zoomHightLimit?this.zoomHightLimit:e<this.zoomLowLimit?this.zoomLowLimit:e},getZoomProportions:function(){var e=$(this.curConfig.workarea).width(),t=$(this.curConfig.workarea).height(),n=this.canvas.contentW/e,r=this.canvas.contentH/t;return{low:n<r?n:r,hight:n>r?n:r,avg:(n+r)/2}},getFitZoom:function(e){e=e||{width:this.canvas.contentW,height:this.canvas.contentH};var t=this.canvas.runExtensions("getBleedValues"),n=$(this.curConfig.workarea).width(),r=$(this.curConfig.workarea).height(),o=INKIVE.C.IS_MOBILE?5:120;this.adaptCanvasScroll(),t.active||e.bleed?o+=INKIVE.Helpers.convertUnitsToPixels(2*t.left,t.units):$("[data-action=order-print]").is(".order-print-shown")&&(o+=40);var i=n/(parseFloat(e.width)+o),s=r/(parseFloat(e.height)+o);return i>s?s:i},adaptCanvasScroll:function(){var e=document.querySelector("#ik-editor").getBoundingClientRect(),t=document.querySelector("#workarea").style;t.width=e.width+"px",t.height=e.height+"px",$("#ik-editor").antiscroll()},scrollToZoom:function(e){var t=e.e,n=e.delta,r=new INKIVE.GestureScroll(this.canvas),o=this.canvas.getSvgPanel().querySelector("g#selectorParentGroup").getScreenCTM().inverse(),i=svgedit.math.transformPoint(t.pageX,t.pageY,o),s=this.canvas.getMouseTarget(t,i),a=t.pageX,l=t.pageY;r.init(a,l,s,!1,t);var c=this.getFitZoom(),u=this.canvas.getZoom()+n/this.deltaScale*c;this.canvas.setZoom(this.getForcedZoomLimits(u)),r.update(a,l,t),this.canvas.setMode("select"),document.querySelector("#selectorParentGroup").classList.remove("hidden"),this.canvas.runExtensions("repositionRulers",{}),this.adaptCanvasScroll(),this.updateZoomInfoValue()}},Backbone.Events)},{"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905}],112:[function(e,t,n){"use strict";e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.splice.js");var s,a,l,c,u,d,p=e("../../editor/editor"),h=e("../../design/design"),m=e("../../../factory/formats"),f=e("../../../factory/company").instance,g=e("../../../../../../assets/js/helpers/dataUrl").getQueryParameter;t.exports=_.extend({initialize:function(){_.bindAll(this,"_onAdd","add","_onRemove","remove"),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor},copy:function(t){var n;t||(t={});var r=$.Deferred(),o=_.bind((function(o){var s=e("../../../factory/restrictions"),a=INKIVE.C.BOOK.book_type==INKIVE.C.BOOK_TYPE.TEMPLATE;o&&"success"==o.status?(INKIVE.C.BOOK.num_pages++,this.trigger("copied",i({stay:t.stay,append:t.append,based_on:n.design_id,page_number:n.page_number},o)),t.stay&&r.resolve(o),t.stay||p.handle("page","move_to",{save:!1,design_id:o.design_id}).then((function(){a||c(o),a&&s.copyRestrictions(n.page_number).then(_.partial(c,o))}))):(l(!1),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.copy",more_info:o.message})))}),this),s=void 0===t.save||t.save;return l(!0),this._getDesignWithDesignId(t).then((function(e){n=e,s&&p.handle("page","save").then(a),s||a()})),r.promise();function a(){INKIVE.DesygnerApi.post("business/projects/"+INKIVE.C.BOOK.id+"/pages",{based_on:n.design_id,append:t.append||!1}).then(o,o)}function l(e){t.quiet||(INKIVE.Modal.toggleLock(e),INKIVE.Modal.togglePageLoader(e))}function c(e){l(!1),r.resolve(e)}},remove:function(t){t||(t={});var n=$.Deferred();return this._getDesignWithDesignId(t).then(_.bind((function(r){e("../project");t.design_id=r.design_id,t.page_number=r.page_number;var o=_.partial(this._onRemove,t,n);function i(){1===INKIVE.C.BOOK.num_pages?INKIVE.FormatFactory.getCurrentFormat().then((function(e){a=e.campaign,f.getProjectData().then((function(e){s=e.company.domain,l=e.company.id,c=e.id,d=g("referrer"),u=d.includes("designs")?"brand/companies/".concat(l,"/designs/").concat(c):"brand/companies/".concat(l,"/campaigns/").concat(a,"/templates/").concat(c)}))})):u="business/projects/".concat(INKIVE.C.BOOK.id,"/pages/").concat(t.design_id),INKIVE.DesygnerApi.delete(u).then(o,o)}this.editor.canvas.clearSelection(),t.quiet&&i(),t.quiet||INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:1==INKIVE.C.BOOK.num_pages?INKIVE.TranslateHelper.translate("modal.alert.can_delete_last"):INKIVE.TranslateHelper.translate("modal.alert.delete_page",{page_number:t.page_number,is_current_page:INKIVE.Tool._current_design_id==t.design_id})}),{callback:[i,function(){n.reject()}]})}),this)),n.promise()},_getDesignWithDesignId:function(t){var n,r=$.Deferred(),o=e("../project");if(t.page_number)o.get("design_id",{page_number:t.page_number}).then((function(e){n=o.get("design",{design_id:e}),r.resolve(n)}));else{var i=t.design_id||INKIVE.Tool._current_design_id;(n=o.get("design",{design_id:i}))&&r.resolve(n),n||o.refreshPageInfo().then((function(){n=o.get("design",{design_id:i}),r.resolve(n)}))}return r.promise()},_onRemove:function(e,t,n){if(!n||"success"!==n.status&&0!==Object.keys(n).length)t.reject();else if(this.trigger("removing",e),1!==INKIVE.C.BOOK.num_pages||INKIVE.C.IS_MOBILE_APP)INKIVE.Tool._current_page_number===INKIVE.C.BOOK.num_pages&&INKIVE.Tool._current_page_number--,INKIVE.C.BOOK.num_pages--,INKIVE.Tool._current_design_id==e.design_id?(p.handle("page","unload",{remove_from_cache:!0}),p.handle("page","move_to",{save:!1,page_number:e.page_number>INKIVE.C.BOOK.num_pages?e.page_number-1:e.page_number}).then(_.bind((function(){t.resolve(),this.trigger("removed",e)}),this))):(t.resolve(),this.trigger("removed",e));else{var r=BASE_URL.includes("//editor.")?"//editor.":"//",o=d.includes("designs")?"create/designs":"create/templates";INKIVE.EditorModeManager.isMode("logo")?window.location=BASE_URL+"library":window.location="desygner"!==s?BASE_URL.replace(r,"//".concat(s,"."))+o:BASE_URL+o}},add:function(e){var t=$.Deferred(),n=this.editor.canvas;return e=_.extend({page_number:parseInt(INKIVE.C.BOOK.num_pages)+1,size:Object.assign(m.getCurrentSize(),{current_size:{width:n.contentW,height:n.contentH}})},e),n.clearSelection(),e.quiet||INKIVE.Modal.togglePageLoader(!0),INKIVE.Tool.getInstance().editor.loadingElement(!0),INKIVE.DesygnerApi.post("business/projects/"+INKIVE.C.BOOK.id+"/pages",{width:e.size.width,height:e.size.height,unit:e.size.unit,page_number:e.page_number}).then(_.partial(this._onAdd,e,t)),t.promise()},_onAdd:function(t,n,r){var o=e("../project");if(t.quiet||INKIVE.Modal.togglePageLoader(!1),"success"==r.status){INKIVE.C.BOOK.num_pages++;var s=_.map(o.get("designs"),"design_id"),a=parseInt(r.page_number);s.splice(r.page_number-1,0,r.design_id),o.changePageOrder(s),this.trigger("added",_.extend(r,t)),p.handle("page","move_to",i({page_is_empty:!0,page_number:a},t)).then(_.debounce((function(){INKIVE.Tool.getInstance().editor.loadingElement(!1),INKIVE.Tool._current_page_number=a,h.set("template",{size:t.size}),n.resolve()}),0))}else n.reject()}},Backbone.Events)},{"../../../../../../assets/js/helpers/dataUrl":632,"../../../factory/company":122,"../../../factory/formats":126,"../../../factory/restrictions":149,"../../design/design":47,"../../editor/editor":91,"../project":113,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],113:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.date.now.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.index-of.js");var r=e("../abstract/facade"),o=e("../editor/editor"),i=e("../../utils/humps"),s=e("../../factory/company").instance;function a(){this.handlers={design:e("./handlers/design")},this.pageData={},this.loadPageInfo(),this._initListeners()}a.prototype=new r,a.prototype.constructor=a,a.prototype.get=function(e,t){var n=i.camelize("get_"+e);return this[n]?this[n](t):this.getters[e]?this.getters[e].get(t):void 0},a.prototype.checkDesignId=function(){var e=this.pageData[INKIVE.Tool._current_page_number-1];e?e.design_id?e.design_id!=INKIVE.Tool._current_design_id&&$.post(INKIVE.C.BASE_URL+"api/errortrack/log",{is_critical:!0,data:"[PageOrder] Design id missmatch "+INKIVE.C.BOOK.id+", expected: "+INKIVE.Tool._current_design_id+", got: "+e.design_id+", page number: "+INKIVE.Tool._current_page_number}):e.design_id=INKIVE.Tool._current_design_id:$.post(INKIVE.C.BASE_URL+"api/errortrack/log",{is_critical:!0,data:"[PageOrder] Design id not found "+INKIVE.C.BOOK.id+", expected: "+INKIVE.Tool._current_design_id+", page number: "+INKIVE.Tool._current_page_number})},a.prototype.getDesignId=function(e){var t=$.Deferred(),n=this.getDesign(e);return n&&n.design_id?t.resolve(n.design_id):this.refreshPageInfo().then(_.bind((function(){var n=this.getDesign(e);t.resolve(n.design_id)}),this)),t.promise()},a.prototype.getMasterBucket=function(){return this.masterBucket},a.prototype.getDesign=function(e){var t=this.getDesigns();return e.page_number?t[e.page_number-1]:_.find(t,(function(t){return t.design_id==e.design_id}))},a.prototype.getDesigns=function(){return _.map(this.pageData,(function(e,t){return _.extend(_.clone(e),{page_number:t+1})}))},a.prototype._initListeners=function(){o.on("page.saved",_.bind((function(){var e=this.pageData[INKIVE.Tool._current_page_number-1];e&&(e.last_mod=Date.now())}),this)),this.on("design.removing",_.bind((function(e){var t=this.getDesign({design_id:e.design_id}),n=parseInt(t.page_number);this.pageData&&this.pageData.length>=n&&this.pageData.splice(n-1,1)}),this)),this.on("design.added",_.bind((function(e){this.pageData&&this.pageData.splice(e.page_number-1,0,{design_id:e.design_id,size_width:e.size.width,size_height:e.size.height,size_unit:e.size.unit})}),this)),this.on("design.copied",_.bind((function(e){var t=this.getDesign({design_id:e.based_on});this.pageData&&this.pageData.splice(e.page_number-1,0,_.extend(t,{design_id:e.design_id,based_on:e.based_on}))}),this))},a.prototype.getInfo=function(e){e&&e.forceReload&&(this.pageInfoDeferred=null);var t=$.Deferred();return this.loadPageInfo().then(_.bind((function(){this.trigger("get_info",this.pageInfo),t.resolve(this.pageInfo)}),this)),t.promise()},a.prototype.loadPageInfo=function(){if(!this.pageInfoDeferred){var e=_.after(2,_.bind((function(){this.pageInfoDeferred.resolve(this.pageInfo)}),this));this.pageInfo=this.pageInfo||{},this.pageInfoDeferred=$.Deferred(),s.getProjectData().then(_.bind((function(t){this.pageInfo.is_multipage=!t||void 0===t.is_multipage||t.is_multipage,t&&(t.company&&_.extend(this.pageInfo,{company:t.company}),t.template&&_.extend(this.pageInfo,{template:t.template}),this.pageInfo.is_printable=t.is_printable,t.id&&_.extend(this.pageInfo,INKIVE.C.BOOK.book_type==INKIVE.C.BOOK_TYPE.TEMPLATE?{template_id:t.id}:{design_id:t.id})),e()}),this));var t=INKIVE.C.BASE_URL+"inkive/doescoverpageexist";$.api(t,"POST",{scrapbook_id:INKIVE.C.BOOK.id},_.bind((function(t){this.pageData=t.page_info||{},_.extend(this.pageInfo,t),this.masterBucket=INKIVE.Helpers.getBucketUrl(t.master_bucket),INKIVE.C.BOOK.num_pages=parseInt(t.num_pages),INKIVE.C.BOOK.name=Base64.encode(t.name),e()}),this))}return this.pageInfoDeferred.promise()},a.prototype.refreshPageInfo=function(){this.pageInfoDeferred=null;var e=this.loadPageInfo();return e.then(_.bind(this.trigger,this,"refresh_page_info")),e},a.prototype.changePageOrder=function(t){var n=$.Deferred(),r=this.pageData;return INKIVE.DesygnerApi.put("business/projects/"+INKIVE.C.BOOK.id,{pages:_.map(t,(function(e){return{id:e}}))}).then(_.bind((function(e){"success"==e.status?this.refreshPageInfo().then(_.bind((function(){INKIVE.C.BOOK.book_type==INKIVE.C.BOOK_TYPE.TEMPLATE?o.call(this):i.call(this)}),this),n.reject):n.reject()}),this)),n.promise();function o(){var t=e("../../factory/restrictions"),n=_.chain(r).map((function(e){return _.find(this.pageData,(function(t){return t.design_id==e.design_id}))}),this).map((function(e){return this.pageData.indexOf(e)}),this).map((function(e,t){return t!=e?{from:t+1,to:e+1}:null})).compact().value(),o=[];t.getElementPermissionsCollection().each((function(e){var t=_.find(n,(function(t){return t.from==e.get("page_number")}));t&&o.push(_.extend({model:e},t))})),function e(){var t=o.pop();t?(t.model.set("page_number",t.to),t.model.save().then(_.bind(e,this))):i.call(this)}.call(this)}function i(){var e=this.get("design",{design_id:INKIVE.Tool._current_design_id});INKIVE.Tool._current_page_number=e.page_number,n.resolve()}},t.exports=new a},{"../../factory/company":122,"../../factory/restrictions":149,"../../utils/humps":615,"../abstract/facade":35,"../editor/editor":91,"./handlers/design":112,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.date.now.js":879,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905}],114:[function(e,t,n){"use strict";var r,o;function i(e,t){if(!(t.match(/Check$/)||t.match(/CheckOnce$/))){var n=r[t+"Check"],i=r[t+"CheckOnce"];i?i.call(this)&&(this[t]=e):this[t]=n?_.partial(s,n,e,o.prototype[t]):e}}function s(e,t,n){var r=e.call(this);r&&t.apply(this,_.rest(arguments,3)),r||n&&n.apply(this,_.rest(arguments,3))}e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),t.exports=function(e,t){if(INKIVE.C.BOOK.book_type==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN){r=e;var n={_parentObject:o=t};return _.each(r,i,n),t.extend?t.extend(n):_.extend({},t,n)}return t}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],115:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js");var r=e("../../factory/restrictions/defaults.json"),o=e("../../factory/user-info"),i=e("../../factory/swearing"),s=e("../../factory/company").instance;function a(){}a.prototype.initialize=function(){return this.initializeDeferred?this.initializeDeferred:(this.initializeDeferred=$.Deferred(),o.get().then(_.bind((function(e){var t={username:e.credentials.token,password:e.credentials.hash};s.initialize().then(_.bind(this.loadDesignInfo,this,t)).then(_.bind(this.loadTemplatePermissions,this)).then(_.bind(this.loadMissingAddOns,this)).then(_.bind(this.loadCompanyName,this)).then(this.initializeDeferred.resolve)}),this)),this.initializeDeferred.promise())},a.prototype.hasAddOnAndFeature=function(e,t){if(!this.initializeDeferred)return!0;var n=this.templatePermissions.get("addons");void 0===n&&(n=this.companyAddOns.get("add_ons"));var r=n[e],o=void 0!==r,i=o&&t&&r.features&&r.features.indexOf(t)>-1;return t?o&&i:o},a.prototype.loadDesignInfo=function(e,t){var n=INKIVE.C.API_URL+"brand/designs/"+INKIVE.C.BOOK.encodedId,r=Backbone.Model.extend({url:n});if(t&&t[n])return t[n];var o=new r;return o.credentials=e,o.fetch()},a.prototype.loadCompanyName=function(){var e=this;return s.getCompany().then((function(t){e.companyName=t.name}))},a.prototype.loadMissingAddOns=function(){var e=_.bind(s.getContainer,s);this.companyAddOns=e("settings").models[0]},a.prototype.loadTemplatePermissions=function(e){if(!e||!e.template)return this.loadEmptyTemplatePermissions();var t=_.bind(s.getContainer,s,"templates",e.template);return this.templatePermissions=t("templatepermissions","me"),this.elementsPermissions=t("elementpermissions"),$.when(this.templatePermissions.fetch(),this.elementsPermissions.fetch().then(_.bind((function(e){var t=[];return this.elementsPermissions.each((function(e){var n=JSON.parse(e.get("restrictions"));n.swearing&&_.each(n.swearing.filter,(function(e){_.contains(t,e)||t.push(e)}))})),i.preloadSweringLists(t)}),this)))},a.prototype.loadEmptyTemplatePermissions=function(){var e=_.map(_.range(1,INKIVE.C.BOOK.num_pages+1),(function(e){return{page_number:e,element_id:"background",restrictions:JSON.stringify(r.loose.background)}}));return this.templatePermissions=new Backbone.Model(r.loose),this.elementsPermissions=new Backbone.Collection(e),$.when(s.get(["settings"]))},a.prototype.constructor=a,t.exports=a},{"../../factory/company":122,"../../factory/restrictions/defaults.json":151,"../../factory/swearing":158,"../../factory/user-info":161,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],116:[function(e,t,n){"use strict";t.exports={initialize:function(e){this.canvas=INKIVE.Tool.getInstance().editor.canvas,this.permissionsFactory=e},restrictMovement:function(e,t,n){var r=t[0];return r?{x:r.horizontal?n.x:0,y:r.vertical?n.y:0}:n},restrictMargin:function(e,t,n){var r=t[0];if(!r)return n;var o=r.size,i=svgedit.utilities.getBBox(e),s=n.x,a=n.y;return i.x+n.x<o?s=o-i.x:i.x+i.width+n.x>this.canvas.contentW-o&&(s=this.canvas.contentW-o-i.x-i.width),i.y+n.y<o?a=o-i.y:i.y+i.height+n.y>this.canvas.contentH-o&&(a=this.canvas.contentH-o-i.y-i.height),{x:s,y:a}}}},{}],117:[function(e,t,n){t.exports={background:{BACKGROUND_REMOVE:["basic.image","basic.color"],BACKGROUND_COLOR_IMAGE:["basic.color","basic.image"],BACKGROUND_COLOR:["basic.color"],BACKGROUND_OPACITY:["opacity"],BACKGROUND_BG_REMOVAL:["background_bg_removal"],BACKGROUND_REPOSITION:["basic.image"],BACKGROUND_FLIP:["flip"],TRANSFORM:["flip"],IMAGE_BOX:["basic.image"]},video:{IMAGE_REPOSITION:["image_crop"],ROTATE_LEFT:["video_rotation"],ROTATE_RIGHT:["video_rotation"],ROTATE:["video_rotation"],ORDER:["video_position"],ALIGNMENT:["video_position"],DECREASE:["video_size"],DUPLICATE:["video_duplication"],INCREASE:["video_size"],LOCK:["video_position"],REMOVE:["video_deletion"],UNLOCK:["video_position"],VIDEO_AUTOPLAY:["video_flags"],VIDEO_CONTROLS:["video_flags"],VIDEO_FULLSCREEN:["video_flags"],VIDEO_LOOP:["video_flags"],VIDEO_MOVE_TO_NEXT:["video_flags"],VIDEO_MUTE:["video_flags"],VIDEO_SOURCE:["video_replace"]},logo:{INCREASE:["logo_size"],DECREASE:["logo_size"],UNLOCK:["logo_position"],DUPLICATE:["logo_duplication"],REMOVE:["logo_deletion"],TEXT_FONTFAMILY:["logo_font_family"],TEXT_FONTSIZE:["logo_font_size"],OPACITY:["logo_opacity"],FILL_COLOR:["color"],TEXT_BOLD:["logo_decoration"],TEXT_ITALIC:["logo_decoration"],TEXT_UNDERLINE:["logo_decoration"],TEXT_CASE:["logo_change_content","logo_decoration"],TEXT_BULLETS:["logo_decoration"],TEXT_ALIGN:["logo_alignment"],LOCK:["logo_position"],ORDER:["logo_z_index"],ROTATE_LEFT:["logo_rotation"],ROTATE_RIGHT:["logo_rotation"],ROTATE:["logo_rotation"],TEXT_TYPING:["logo_change_content"],ALIGNMENT:["logo_position"],TEXT_SPACING:["logo_spacing"],LINK:["logo_replace"],UNLINK:["logo_replace"]},icon:{INCREASE:["icon_size"],DECREASE:["icon_size"],UNLOCK:["icon_position"],DUPLICATE:["icon_duplication"],REMOVE:["icon_deletion"],TEXT_FONTFAMILY:["icon_font_family"],TEXT_FONTSIZE:["icon_font_size"],OPACITY:["icon_opacity"],FILL_COLOR:["icon_colour","color"],STROKE_COLOR:["icon_stroke"],TEXT_BOLD:["icon_decoration"],TEXT_ITALIC:["icon_decoration"],TEXT_UNDERLINE:["icon_decoration"],TEXT_CASE:["icon_change_content","icon_decoration"],TEXT_BULLETS:["icon_decoration"],TEXT_ALIGN:["icon_alignment"],LOCK:["icon_position"],ORDER:["icon_z_index"],ROTATE_LEFT:["icon_rotation"],ROTATE_RIGHT:["icon_rotation"],ROTATE:["icon_rotation"],TEXT_TYPING:["icon_change_content"],ALIGNMENT:["icon_position"],TEXT_SPACING:["icon_spacing"],LINK:["icon_replace"],UNLINK:["icon_replace"]},text:{INCREASE:["text_size"],DECREASE:["text_size"],UNLOCK:["text_position"],DUPLICATE:["text_duplication"],REMOVE:["text_deletion"],TEXT_FONTFAMILY:["text_font_family"],TEXT_FONTSIZE:["text_font_size"],OPACITY:["text_opacity"],FILL_COLOR:["text_colour","color"],STROKE_COLOR:["text_colour"],TEXT_BOLD:["text_decoration"],TEXT_ITALIC:["text_decoration"],TEXT_UNDERLINE:["text_decoration"],TEXT_CASE:["text_decoration"],TEXT_BULLETS:["text_decoration"],TEXT_LIST:["text_decoration"],TEXT_ALIGN:["text_alignment"],LOCK:["text_position"],ORDER:["text_z_index"],ROTATE_LEFT:["text_rotation"],ROTATE_RIGHT:["text_rotation"],ROTATE:["text_rotation"],TEXT_TYPING:["text_change_content"],LINK:["text_change_content"],UNLINK:["text_change_content"],REMOVE_STYLE:["text_decoration"],ALIGNMENT:["text_position"],TEXT_SPACING:["text_spacing"],PARAGRAPH_SPACING:["text_spacing"],HIGHLIGHT_COLOR:["text_highlight"]},table:{LOCK:["table_position"],UNLOCK:["table_position"],ALIGNMENT:["table_position"],ORDER:["table_z_index"],ROTATE:["table_rotation"],DUPLICATE:["table_duplication"],REMOVE:["table_deletion"],OPACITY:["table_opacity"],OPEN_TABLE_EDITOR:["table_edit"],CLOSE_TABLE_EDITOR:["table_edit"],CELL_SELECT_ALL:["table_edit"],CELL_INVERT_SELECTION:["table_edit"],CELL_COLOR:["table_text_color"],CELL_BACKGROUND:["table_object_color"],CELL_FONT:["table_text_style"],CELL_BOLD:["table_text_style"],CELL_ITALIC:["table_text_style"],CELL_EDIT_ALIGNMENT:["table_text_style"],CELL_EDIT_BORDER:["table_object_style"],CELL_BORDER_COLOR:["table_object_color"],CELL_MERGE:["table_merge_split"],CELL_SPLIT:["table_merge_split"],ROW_INSERT_BEFORE:["table_row_column"],ROW_INSERT_AFTER:["table_row_column"],COLUMN_INSERT_BEFORE:["table_row_column"],COLUMN_INSERT_AFTER:["table_row_column"],ROW_DELETE:["table_row_column"],COLUMN_DELETE:["table_row_column"]},image:{INCREASE:["image_size"],DECREASE:["image_size"],UNLOCK:["image_position"],DUPLICATE:["image_duplication"],REMOVE:["image_deletion"],IMAGE_REPOSITION:["image_crop"],IMAGE_FILTER:["image_filter"],OPACITY:["image_opacity"],LOCK:["image_position"],ORDER:["image_z_index"],ROTATE_LEFT:["image_rotation"],ROTATE_RIGHT:["image_rotation"],ROTATE:["image_rotation"],FLIP_IMAGE_H:["image_rotation"],FLIP_IMAGE_V:["image_rotation"],FLIP_IMAGE:["image_rotation"],ALIGNMENT:["image_position"],SET_BACKGROUND:["image_set_background"],SET_BG_REMOVAL:["image_bg_removal"],LINK:["image_content"],UNLINK:["image_content"]},vector:{INCREASE:["vector_size"],DECREASE:["vector_size"],UNLOCK:["vector_position"],DUPLICATE:["vector_duplication"],REMOVE:["vector_deletion"],IMAGE_REPOSITION:["image_crop"],OPACITY:["vector_opacity"],FILL_COLOR:["vector_colour","color"],STROKE_COLOR:["vector_stroke"],STROKE:["vector_stroke"],FLIP_H:["vector_rotation"],FLIP_V:["vector_rotation"],FLIP:["vector_rotation"],LOCK:["vector_position"],ORDER:["vector_z_index"],ROTATE_LEFT:["vector_rotation"],ROTATE_RIGHT:["vector_rotation"],ROTATE:["vector_rotation"],ALIGNMENT:["vector_position"],LINK:["vector_replace"],UNLINK:["vector_replace"],IMAGE_BOX:["vector_replace"]},default:{INCREASE:["element_size"],DECREASE:["element_size"],UNLOCK:["element_position"],DUPLICATE:["element_duplication"],REMOVE:["element_deletion"],GROUP_UNGROUP:["element_ungrouping"],OPACITY:["element_opacity"],LOCK:["element_position"],ORDER:["element_z_index"],ROTATE_LEFT:["element_rotation"],ROTATE_RIGHT:["element_rotation"],ROTATE:["element_rotation"],ALIGNMENT:["element_position"],GROUP_GROUP:["element_grouping"],IMAGE_BOX:["image_content"],FILL_COLOR:["element_colour"],STROKE_COLOR:["vector_stroke"],STROKE:["vector_stroke"],FLIP_H:["element_rotation"],FLIP_V:["element_rotation"],FLIP:["element_rotation"]},root:{ROOT_DRAWING:["function_draw"],ROOT_SHAPES:["vector_add"],ROOT_FRAMES:["image_add"],ROOT_TEXT:["text_add"],ROOT_TABLE:["table_add"]}}},{}],118:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.date.to-json.js"),e("core-js/modules/web.url.to-json.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.parse-int.js");var i=r(e("@babel/runtime/helpers/typeof")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("./factory"),l=e("./menu-actions.json"),c=e("../design/design");function u(){this.initialized=!1,this.shownRestrictionMessages={},this.handlers={logo:e("./handlers/vector"),vector:e("./handlers/vector")}}u.prototype.initialize=(0,s.default)(o.default.mark((function e(){var t,n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initializePromise){e.next=3;break}return this.initialized=!0,e.abrupt("return",this.initializePromise);case 3:return _.bindAll(this,"canChange","isFunctionalityAllowed","isActionAllowed","applyRestriction","getElementRestrictions","getAllElementPermissions","elementHasRestrictions"),this.initialized=!1,t=this.factory=new a,this.initializePromise=this.factory.initialize(),this.initializePromise.then((function(){n.initialized=!0,Object.values(n.handlers).forEach((function(e){return e.initialize(t)}))})),e.abrupt("return",this.initializePromise);case 9:case"end":return e.stop()}}),e,this)}))),u.prototype.hasAddOnAndFeature=function(e,t){return!this.initialized||this.factory.hasAddOnAndFeature(e,t)},u.prototype.isFunctionalityAllowed=function(e){if(this.factory&&this.factory.templatePermissions||(this.initialized=!1),!this.initialized)return!0;if(Array.isArray(e)&&e.includes("table_add")&&(this.factory.companyName&&"redfin"===this.factory.companyName.toLowerCase()))return!1;return this.factory.templatePermissions.get(e)},u.prototype.filterMenuOptions=function(e,t){if(this.isForbiddenElement(e))return["REMOVE"];if(!this.initialized)return t;var n,r=this.getElementType(e),o=this.getAllDefaultPermissions(),i=this.getAllElementPermissions(e.id),s=i.length&&i[0],a="image"===r&&$(e).is(".layoutClipperImage");if("a"===e.tagName&&!e.classList.contains("video"))return["UNLINK"];switch(r){case"ignore-restrictions":return t;case"background":return n=this.getAllElementPermissions("background"),_(t).filter((function(e){if("BACKGROUND_COLOR"===e||"BACKGROUND_COLOR_IMAGE"===e)return c("basic","color")&&!c("colors")&&!c("colors-library");return _.all(l[r][e],(function(e){return c((e=e.split("."))[0],e[1])}))}),this);case"root":return _.filter(t,_.bind((function(e){return this.isFunctionalityAllowed(l[r][e])}),this));default:return _(t).filter((function(t){var n=function(e){return e.includes("COLOR")?"COLOR":["BLEED_SIZE","BLEED_CLOSE","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","GROUP_UNGROUP","DESELECT"].includes(e)?"ALWAYS_ALLOWED":e}(t);if("HIGHLIGHT_COLOR"===t)return this.isActionAllowed(l[r][t],e);switch(n){case"TEXT_EDITING":return this.isInlineTextAllowed(e);case"VIDEO_SOURCE":return this.isVideoSourceReplacementAllowed(e);case"SET_BACKGROUND":return this.isBackgroundReplacementAllowed(e);case"GROUP_GROUP":return this.isGroupAllowed();case"COLOR":return this.isColorAllowed(s,o,e);case"TEXT_TYPING":return this.isTextTypingAllowed(s,o);case"IMAGE_BG_REMOVAL":return this.isImageBgRemovalAllowed(s,o);case"ALWAYS_ALLOWED":return!0;default:return!!a||(!l[r]||this.isActionAllowed(l[r][t],e))}}),this)}function c(e,t){return _.any(n,(function(n){return n[e]&&(!t||n[e][t])}))}},u.prototype.isGroupAllowed=function(){return INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN},u.prototype.isRestrictionAllowed=function(e,t,n,r){var o=void 0===t,s="object"===(0,i.default)(t)&&0===Object.keys(t).length;return o||s?0===Object.keys(e).length||r:t&&n},u.prototype.isTextTypingAllowed=function(e,t){var n,r,o=null===(n=e.dictionary)||void 0===n?void 0:n.list;return this.isRestrictionAllowed(t,null==e||null===(r=e.basic)||void 0===r?void 0:r.text_change_content,!o||!o.length,null==t?void 0:t.text_change_content)},u.prototype.isImageBgRemovalAllowed=function(e,t){var n;return this.isRestrictionAllowed(t,null==e||null===(n=e.basic)||void 0===n?void 0:n.image_content,!(null!=e&&e.source),null==t?void 0:t.image_content)},u.prototype.isColorAllowed=function(e,t,n){var r,o=this.getElementType(n);return this.isRestrictionAllowed(t,null==e||null===(r=e.basic)||void 0===r?void 0:r.color,e&&!e.colors&&!e["colors-library"],t["".concat(o,"_colour")])},u.prototype.applyRestriction=function(e,t,n){if(!this.initialized)return n;var r=this.getElementType(e),o="restrict"+t.charAt(0).toUpperCase()+t.slice(1),i=this.getElementRestrictions(e.getAttribute("id"),t);return this.handlers[r]&&this.handlers[r][o]?this.handlers[r][o](e,i,n):n},u.prototype.canChange=function(e,t){return t=this.getElementType(e)+"_"+t,this.isActionAllowed(t,e)},u.prototype.isVideoSourceReplacementAllowed=function(e){return this.isActionAllowed("video_replace",e)&&_(this.getAllElementPermissions(e.getAttribute("id"))).all((function(e){return e.basic&&1===_.size(e)||!_.size(e)}))},u.prototype.isInlineTextAllowed=function(e){return this.isActionAllowed("text_change_content",e)&&_(this.getAllElementPermissions(e.getAttribute("id"))).all((function(e){return e.basic&&1===_.size(e)||!_.size(e)}))},u.prototype.isBackgroundReplacementAllowed=function(e){var t=INKIVE.RestrictionsFacade.getAllElementPermissions("background");return t.length&&t[0].basic&&t[0].basic.image},u.prototype.isReplaceRestrictedSelected=function(e){var t=!1,n=INKIVE.Tool.getInstance().editor.canvas.getSelectedElems(),r=1===n.length&&n[0];if(r||(r=e),INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN===INKIVE.C.BOOK.book_type&&r){var o=INKIVE.DesignFacade.get(r.id);if(o){var i,s=o.id,a=this.getElementRestrictions(s)[0];switch(o.type){case"background":i="image";break;case"image":i="image_content";break;case"shape":case"vector":i="vector_replace";break;case"logo":i="logo_replace";break;case"icon":i="icon_replace";break;case"sticker":i=o.placeholder?"image_content":"icon_replace";break;case"video":i="video_replace";break;default:i=null}t=a&&i&&!_.isUndefined(a[i])&&s,_.isUndefined(t)&&i&&(t=s)}}return t},u.prototype.isReplaceAllowed=function(e){var t,n,r=this.getAllElementPermissions(e),o=!0,i=INKIVE.DesignFacade.get(e);if(i){switch(i.type){case"background":t="image",n="images";break;case"image":t="image_content",n="sources";break;case"logo":t="logo_replace",n="source";break;case"icon":t="icon_replace",n="source";break;case"sticker":t=i.placeholder?"image_content":"icon_replace",n="source";break;case"video":t="video_replace",n="sources";break;default:t=null,n=null}var s,a,l;if(r.length)o=(null===(s=r[0])||void 0===s||null===(a=s.basic)||void 0===a?void 0:a[t])&&!(null!==(l=r[0])&&void 0!==l&&l[n]);else o=this.getAllDefaultPermissions()[t];return o}},u.prototype.isActionAllowed=function(e,t){if(!this.initialized||!t)return!0;e=_.isArray(e)?e:[e];var n=this.getElementRestrictions(_.isString(t)?t:t.getAttribute("data-element-restriction-id")||t.getAttribute("id"));return function(e){return _.any(e,(function(e){return _.any(n,(function(t){return void 0!==t[e]}))}))}.call(this,e)?function(e){return _.any(n,(function(t){return _.any(e,(function(e){return void 0===t[e]||t[e]}))}))}(e):_.every(e,(function(e){var t=this.factory.templatePermissions.get(e);return _.isUndefined(t)?["color"].includes(e):t}),this)},u.prototype.getElementType=function(e){return this.getType(c.getType(e))},u.prototype.getType=function(e){return"sticker"===e||"shape"===e?"vector":e},u.prototype.getElementName=function(e){if(this.initialized&&e){var t=this.getPermissionsPage(),n=this.factory.elementsPermissions.filter({element_id:e,page_number:t}),r=_.find(n,(function(e){return!!e.get("name")}));if(r)return r.get("name")}},u.prototype.getAllElementPermissions=function(e){if(!this.initialized||!e)return[];var t=this.getPermissionsPage();return _.chain(this.factory.elementsPermissions.filter({element_id:e,page_number:t})).map((function(e){return JSON.parse(e.get("restrictions"))})).compact().value()},u.prototype.getAllDefaultPermissions=function(){return this.initialized&&this.factory.templatePermissions?this.factory.templatePermissions.toJSON():{}},u.prototype.isRestrictedDesign=function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN},u.prototype.getElementRestriction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"basic",r=this.getAllDefaultPermissions(),o=this.getElementRestrictions(e,n);return o.length?o.reduce((function(e,n){return e&&n[t]}),!0):r[t]},u.prototype.getElementRestrictions=function(e,t){if(!this.initialized)return[];t=t||"basic";var n=this.getPermissionsPage();return _.chain(this.factory.elementsPermissions.filter({element_id:e,page_number:n})).map((function(e){return JSON.parse(e.get("restrictions"))[t]})).compact().value()},u.prototype.getPermissionsPage=function(){return parseInt(c.get("template","restricted").base_page||INKIVE.Tool._current_page_number)},u.prototype.elementHasRestrictions=function(e){if(this.shownRestrictionMessages[e.id])return!0;var t,n=this.getAllElementPermissions(e.id)[0];if(!n)return!1;if(n.character_number&&(n.character_number.min||n.character_number.max)&&(t=INKIVE.TranslateHelper.translate("restriction_info.text_character_number_range",{min:n.character_number.min||0,max:n.character_number.max})),n.currencies&&(n.currencies.min?t=INKIVE.TranslateHelper.translate("restriction_info.text_currency_range",{min:n.currencies.min,max:n.currencies.max,currency:n.currencies.currency}):n.currencies.currency&&(t=INKIVE.TranslateHelper.translate("restriction_info.text_currency_symbol",{currency:n.currencies.currency}))),n.date&&n.date.daterange&&(t=INKIVE.TranslateHelper.translate("restriction_info.text_date",{start:r("start"),end:r("end")})),t)return toastr.info(t),this.shownRestrictionMessages[e.id]=t,!0;function r(e){var t=n.date.dateformat,r=n.date.daterange[e];return t&&(r=moment(r,"MM/DD/YY").format(t)),r}},u.prototype.isForbiddenElement=function(e){return $(e).is(".non-selectable")},u.prototype.constructor=u,t.exports=new u},{"../design/design":47,"./factory":115,"./handlers/vector":116,"./menu-actions.json":117,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.date.to-json.js":881,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.values.js":903,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.url.to-json.js":969}],119:[function(e,t,n){"use strict";var r,o;function i(e,t){if(!(t.match(/Check$/)||t.match(/CheckOnce$/))){var n=r[t+"Check"],i=r[t+"CheckOnce"];i?i.call(this)&&(this[t]=e):this[t]=n?_.partial(s,n,e,o.prototype[t]):e}}function s(e,t,n){var r=e.call(this);r&&t.apply(this,_.rest(arguments,3)),r||n&&n.apply(this,_.rest(arguments,3))}e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),t.exports=function(e,t){if(INKIVE.Helpers.projectIsLinkedToRestrictions()){o=t,r=e;var n={};return _.each(r,i,n),t.extend?t.extend(n):_.extend({},t,n)}return t}},{"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],120:[function(e,t,n){"use strict";function r(){this.baseUrl=INKIVE.C.BASE_URL+"api/"}e("core-js/modules/es.function.bind.js"),t.exports=r,r.prototype=_.extend({},Backbone.Events),r.prototype.api=function(e,t,n){n=n||t?"POST":"GET";var r=$.Deferred();return $.ajax({type:n,url:this.baseUrl+e,data:t,success:function(e){r.resolve(e)},error:function(){r.reject("API call error")}}),r.promise()},r.prototype.init=function(){var e=$.Deferred();return this.data?e.resolve(t(this.data)):this.api(this.resource).then(_.bind((function(n){this.data=n,e.resolve(t(n))}),this),(function(t){e.reject(t+" | API Init error")})),e.promise();function t(e){return _.isArray(e)?_.toArray($.extend(!0,{},e)):$.extend(!0,{},e)}}},{"core-js/modules/es.function.bind.js":883}],121:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("../library").instance;t.exports={initialize:function(){var e=$.Deferred();return r.get("fonts").then(_.bind(this._onDataLoaded,this,e)),e}}},{"../library":128,"core-js/modules/es.function.bind.js":883}],122:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.instance=n.factory=void 0;var o=r(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.date.to-json.js"),e("core-js/modules/web.url.to-json.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.index-of.js");var i,s,a=r(e("./user-info")),l=r(e("../utils/pdf-processing-manager.js")),c={},u={},d=["desygner","wattpad-master"],p=INKIVE.C.IS_DEV||INKIVE.C.IS_QA?"https://static.qadesygner.xyz/":"/";function h(e){if(this.domain=e,e)return h.externalInstances[e]||(h.externalInstances[e]=this),h.externalInstances[e]}h.externalInstances={},h.prototype.initialize=_.memoize((function(e){var t=this;return this.domain=e,this.initCache().then((function(){return t.initCredentials()})).then((function(){return t.initProject()}))}),(function(e){return e})),h.prototype.initCache=function(){var e,t,n=this,r=$.Deferred(),o=d.includes(this.domain)?this.domain:"desygner";return this.cachedVersions?r.resolve():(e=o,t=p+"api/brand/companies/"+e+"/version",window.fetch(t)).then((function(e){return e.json()})).then((function(e){return n.cachedVersions=e,r.resolve(),e})).catch(r.resolve),r.promise()},h.prototype.initCredentials=function(){var e=this,t=$.Deferred();return a.default.get().then((function(n){e.credentials={username:n.credentials.token,password:n.credentials.hash},t.resolve()})),t.promise()},h.prototype.initProject=function(e){var t=this,n=$.Deferred(),r=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"brand/templates/"+INKIVE.C.BOOK.encodedId:"brand/designs/"+INKIVE.C.BOOK.encodedId,o=INKIVE.C.API_URL+r,a=Backbone.Model.extend({url:o});return!u[o]||e?((s=new a).credentials=this.credentials,u[o]=s.fetch(),u[o].then((function(e){e.is_being_processed&&l.default.subscribe(e),i=e,t.companyId=i.company.id,n.resolve(e)}),(function(){n.reject()})),n.promise()):u[o]},h.prototype.getCompanyData=function(){var e=$.Deferred();return this._get("").then((function(t){e.resolve(t&&t[0])}),(function(){e.reject()})),e.promise()},h.prototype.getCompanyItems=function(e){var t=$.Deferred();return this.getCompanyData().then((function(n){t.resolve(n&&n[e])}),(function(){t.reject()})),t.promise()},h.prototype._undraft=function(){return this.setProjectData({is_draft:!1,is_pdf:!i.is_pdf&&null})},h.prototype.initialTemplateResize=function(t,n){var r,o,i=this,s=e("../facade/design/design"),a=e("../facade/editor/editor"),l=INKIVE.C.BOOK.num_pages;function c(){var e=this;INKIVE.Tool._current_page_number<l?a.handle("page","move_to",{page_number:INKIVE.Tool._current_page_number+1}).then((function(){document.querySelector("#svgcontent").classList.add("template-resizing"),p(),d.call(e)})):u.call(this)}function u(){var e=1===l,t=_.after(2,(function(){document.querySelector("#svgcontent").classList.remove("template-resizing"),INKIVE.ProjectFacade.refreshPageInfo(),INKIVE.Modal.toggleLock(!1),r.close()}));this.setProjectData({is_resized:!0}).then(t),n=n+"_"+o.name+"_Print",INKIVE.Helpers.isDesygnerProject()&&a.handle("name_change",{name:n}),e&&a.handle("page","save").then(t),e||a.handle("page","move_to",{page_number:1}).then(t)}function d(){var e=this;s.once("template.update",(function(){c.call(e)})),s.set("template",{size:o})}function p(){function e(){INKIVE.Modal.toggleLock(!1);var e=INKIVE.Tool._current_page_number||1,t=['<b style="font-weight: 400">',INKIVE.TranslateHelper.translate("modal.alert.resize_page",{page:e,from:l,percent:Math.floor((e-1)/l*100)}),"</b>"];r=INKIVE.Modal.alertMessage(t.join(""),{skip:!1,loader:!0}),INKIVE.Modal.toggleLock(!0)}r&&r.close(e),r||e()}t=_.isNumber(t)?t:t.id,p(),this._get("formats",t).then((function(e){o=e,INKIVE.Tool._current_page_number=0,c.call(i)}))},h.prototype.getCompany=function(){var e=$.Deferred(),t=INKIVE.Helpers.isWeBrandProject();return t||e.resolve(),t&&this.initialize(this.domain).then((function(){e.resolve(i.company)}),(function(){e.resolve()})),e.promise()},h.prototype.getProjectData=function(){var e=$.Deferred();return INKIVE.Helpers.isWeBrandProject()?this.initialize(this.domain).then((function(){e.resolve(i)}),(function(){e.resolve()})):e.resolve(),e.promise()},h.prototype.setProjectData=function(e){var t=this,n=$.Deferred();return this.getProjectData().then((function(){_.any(e,(function(e,t){return e!==i[t]}))?r.call(t).then((function(){Object.assign(i,e),s.set(i).save().then(n.resolve)})):n.resolve()})),n.promise();function r(){var e=$.Deferred(),t=INKIVE.C.API_URL+"brand/companies/"+i.company.id+"/";return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?this._get("formats",i.format).then((function(n){s.url=t+"campaigns/"+n.campaign+"/templates/"+INKIVE.C.BOOK.encodedId,e.resolve()})):(s.url=t+"designs/"+INKIVE.C.BOOK.encodedId,e.resolve()),e.promise()}},h.prototype.dropCache=function(e,t){var n=this.getResourceUrl(arguments);u=_(u).omit(n)},h.prototype.get=function(e,t){var n=this,r=(0,o.default)(e,2),i=r[0],s=r[1];return["templates"].includes(i)&&s===INKIVE.C.BOOK.id&&!t?this.getProjectData():this.initialize(this.domain).then((function(){return n.noCache=t,n._get.apply(n,Array.isArray(e)?e:[e])}))},h.prototype._get=function(e,t){var n=$.Deferred(),r=this.getResourceUrl(arguments),o=this.getContainer.apply(this,arguments);return u[r]&&!this.noCache||(u[r]=o.fetch()),u[r].then((function(){n.resolve(o.toJSON())}),(function(){n.reject()})),n.promise()},h.prototype.getContainer=function(e,t){var n=this.getResourceUrl(arguments),r=arguments.length%2,o=c[n]?c[n]:this.createResourceContainer(n,r);return o},h.prototype.getResourceUrl=function(e){var t="brand/companies/"+(this.domain||i.company.domain);for(var n in e=Array.from(e))if(void 0===e[n]){console.error("Trying to load a broken path on company API: "+t+"/"+e.join("/"));break}return this.getEndpointUrl(1===e.length&&""===e[0]?t:t+"/"+e.join("/"))},h.prototype.getEndpointUrl=function(e){var t="api/"+e.replace("companies/"+i.company.id+"/","companies/"+this.domain+"/");if(!this.cachedVersions||!this.cachedVersions[t])return INKIVE.C.API_URL+e;var n=this.cachedVersions[t].key;return p+n},h.prototype.setCredentials=function(e){this.credentials=e},h.prototype.createResourceContainer=function(e,t){var n=new(0===(e=e.includes(INKIVE.C.API_URL)?e:INKIVE.Helpers.getCORSSecureUrl(e)).indexOf(INKIVE.C.WE_BRAND)||0===e.indexOf(INKIVE.C.API_URL)?t?Backbone.Collection.extend({url:e,credentials:this.credentials,model:Backbone.Model.extend({credentials:this.credentials})}):Backbone.Model.extend({url:e,credentials:this.credentials}):t?Backbone.Collection.extend({url:e}):Backbone.Model.extend({url:e}));return c[e]=n,n};var m=h;n.factory=m;var f=new h;n.instance=f,t.exports={factory:m,instance:f}},{"../facade/design/design":47,"../facade/editor/editor":91,"../utils/pdf-processing-manager.js":619,"./user-info":161,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.join.js":868,"core-js/modules/es.date.to-json.js":881,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.url.to-json.js":969}],123:[function(e,t,n){"use strict";function r(){this.baseUrl=INKIVE.C.API_URL,this.credentials=Base64.encode(CONFIG.credentials.token+":"+CONFIG.credentials.hash)}e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),r.prototype.get=function(e){return this._processRequest("GET",e)},r.prototype.put=function(e,t){return this._processRequest("PUT",e,t)},r.prototype.patch=function(e,t){return this._processRequest("PATCH",e,t)},r.prototype.post=function(e,t){return this._processRequest("POST",e,t)},r.prototype.delete=function(e){return this._processRequest("DELETE",e)},r.prototype.processBatch=function(e,t){for(var n=$.Deferred(),r=new XMLHttpRequest,o=[],i=0;i<e.length;i++)o.push({id:i,url:this.baseUrl+e[i],method:t||"get",headers:{Authorization:"Basic "+this.credentials,"content-type":"application/json",Accept:"application/json","X-Requested-With":"Fetch"}});return r.open("post",this.baseUrl+"business/batch"),r.setRequestHeader("Authorization","Basic "+this.credentials),r.setRequestHeader("Content-Type","application/json"),r.send(o?JSON.stringify(o):null),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(!function(e){return e.status<300&&e.status>=200}(r)?n.reject(r):n.resolve(function(e){var t=JSON.parse(e.responseText);return t.forEach((function(e){e.body=JSON.parse(e.body)})),t}(r)))},n.promise()},r.prototype._processRequest=function(e,t,n){var r=$.Deferred(),o=new XMLHttpRequest;return o.open(e,this.baseUrl+t),o.setRequestHeader("Authorization","Basic "+this.credentials),o.setRequestHeader("Content-Type","application/json"),o.send(n?JSON.stringify(n):null),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(!function(e){return e.status<300&&e.status>=200}(o)?r.reject(o):r.resolve(o.responseText?JSON.parse(o.responseText):{}))},r.promise()},r.prototype.getWithHeaders=function(e){var t=$.Deferred(),n=new XMLHttpRequest;return n.open("GET",this.baseUrl+e),n.setRequestHeader("Authorization","Basic "+this.credentials),n.setRequestHeader("Content-Type","application/json"),n.send(null),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(!function(e){return e.status<300&&e.status>=200}(n)?t.reject(n):t.resolve({data:n.responseText?JSON.parse(n.responseText):{},headers:n.getAllResponseHeaders(),status:n.status}))},t.promise()},t.exports=new r},{"core-js/modules/es.array.for-each.js":862,"core-js/modules/web.dom-collections.for-each.js":964}],124:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("./company").factory;function o(){}o.prototype=new r,o.prototype.constructor=o,o.prototype.initialize=function(){return this.initCache().then(_.bind(this.initCredentials,this))},o.prototype.getResourceUrl=function(e){for(var t="brand/companies/desygner",n=0;n<e.length;n+=2)t+=e[n+1]?"/"+e[n]+"/"+e[n+1]:"/"+e[n];return this.getEndpointUrl(t)},t.exports=new o},{"./company":122,"core-js/modules/es.function.bind.js":883}],125:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.createFontTag=E;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/toConsumableArray"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.set.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.object.assign.js");var p,h=e("./library").instance,m=e("./library").factory,f=e("../facade/editor/editor"),g=e("../facade/design/design"),b=e("../facade/restrictions/restrictions"),v=e("../app/decorate"),y=e("./library/font-template.hbs"),j=N(INKIVE.C.FONT_LIST);function w(e){return _(j).find((function(t){return t.family===e||"'"+t.family.replace(/'/g,"\\'")+"'"===e||t.family.replace(/'/g,"\\'")===e}))}function I(e,t){var n=(0,a.default)(new Set((0,a.default)(document.querySelectorAll("[font-family]")).map((function(e){return e.getAttribute("font-family").replace(/['"]+/g,"")})).filter((function(e){return"desygner-icons"!==e}))));e.forEach((function(e){if(e&&e.data&&e.data.family){if(["Lato","Nunito"].includes(e.data.family))return;(t||!e.data.is_system_font&&!e.data.imported_css&&n.includes(e.data.family))&&k(e.data).then((function(t){E(c(c({},e),{},{variants:t}))}))}}))}function x(e){var t,n=(t=$("#font-sources")).length?t:($("head").append($('<style id="font-sources" type="text/css" />')),$("#font-sources")),r='<link class="desygner-font-source" crossorigin="anonymous" rel="stylesheet" type="text/css" href="//fonts.googleapis.com/',o="";_.each(e,(function(e){if(e&&!e.imported_css){var t=e.earlyaccess;t?n.append(r+"/earlyaccess/"+t+'.css"/>\n'):o+=e.family+":"+e.support.variants.join(",")+"|",e.imported_css=!0}})),o&&$("head").prepend(r+"css?family="+o+'&subset=latin-ext,cyrillic"/>\n')}function E(e){var t="font-source-".concat(e.id);if(!document.getElementById(t)){var n=y({family:e.data.family,variants:e.variants}),r=document.createElement("style");r.id="font-source-".concat(e.id),r.innerHTML=n,document.head.appendChild(r)}}function k(e){return C.apply(this,arguments)}function C(){return(C=(0,s.default)(o.default.mark((function e(t){var n,r,i,s,a,l,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},r=t.support&&t.support.sources,i=t.sources||r,s=u(i);try{for(s.s();!(a=s.n()).done;)l=a.value,c=l.variant||"400",n[c]=n[c]||S(l),n[c].sources[l.type]=_.clone(l),d=n[c].sources[l.type].source.replace(/http[s]?:/,""),n[c].sources[l.type].source=d}catch(e){s.e(e)}finally{s.f()}return t.imported_css=!0,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var t={sources:{}};return e.variant&&(e.variant.indexOf("italic")>-1&&(t.style="italic"),t.weight=e.variant.indexOf("regular")>-1?"400":e.variant.replace("italic","")),t}function T(e){return _.compact(_.map(e,(function(e){if(e&&e.data&&e.data.family){var t=_.uniq(_.map(e.data.sources,(function(e){var t=e.variant?e.variant.replace("regular","400"):"400";return"italic"===t&&(t="400italic"),t}))),n=e.data.is_system_font||e.data.family.match(/^page.+font.+$/);return{family:e.data.family,name:e.data.name||e.data.family,support:{b:_.contains(t,"700"),bi:_.contains(t,"700italic"),i:_.contains(t,"400italic"),variants:t,sources:e.data.sources},customId:"Font"===e.type&&e.id,isSystem:n,isDeleted:e.is_deleted}}})))}function N(e,t){var n={};t&&_.each(t,(function(e){var t=e.data.family;n[t]=n[t]||0,n[t]++}));var r=_.map(e,(function(e,t){return{family:t,support:e}}));return _.sortBy(r,(function(e){return-(n[e.family]||0)}))}t.exports=v(e("./app/fonts"),{fontListLoaded:!1,initialized:!1,customFonts:{},initialize:function(){var e=$.Deferred(),t=h.get("texts"),n=h.get("fonts"),r=null;INKIVE.Helpers.isDesygnerProject()||(r=new m("member").get("fonts"));return x([{family:"Nunito",support:{i:!0,b:!0,bi:!0,variants:["200","300","400","500","600","700","800","900"],subsets:["latin"],isDefault:"true"},templateFonts:!1,imported_css:!1}]),$.when(n,t,r).then(_.bind(this._onDataLoaded,this,e)),e},isLoadedFont:function(e){return _.any(j,(function(t){return t.family===e}))},refreshCustomFonts:function(){var e=$.Deferred();return h.cacheClear("fonts"),h.get("fonts").then((function(t){var n=_.filter(t,(function(e){return!_.any(j,(function(t){return t.family===e.data.family}))}));n.length&&(j=_.union(T(n),j),I(n)),e.resolve()})),e},_onDataLoaded:function(e,t,n,r){var o;r&&(t=this.processMemberFonts(t,r)),function(e,t){_.each(t,(function(t){var n=t.data.weight+""||"400";w(t.data.family)||e.push({family:t.data.family,name:t.data.name||t.data.family,support:{b:"700"===n,bi:"700italic"===n,i:"400italic"===n,variants:[n]}})}))}(j=_.union(T(t),N(INKIVE.C.FONT_LIST,n)),n),w("Lato").imported_css=!0,w("Nunito").imported_css=!0,o=w("Nunito"),Object.assign(o.support,{b:!0,bi:!0,i:!0,variants:["200","300","400","500","600","700","800","900"]}),this.fontListLoaded=!0,f.trigger("fontlist.loaded",{}),this.initialized=!0,e.resolve()},processMemberFonts:function(e,t){return e.concat(t)},getUsableFonts:function(){var e=_.chain((0,a.default)(document.querySelectorAll("#svgcontent [font-family]"))).map((function(e){return{family:(e.getAttribute("font-family")||"").replace(/^'(.+)'$/,"$1"),customId:e.getAttribute("custom-font-id")||""}})).uniq().compact().value();return _.each(j,(function(t){t.templateFonts=!!_.find(e,(function(e){return e.family===t.family&&!t.customId&&!e.customId}))})),b.isFunctionalityAllowed("function_use_desygner_font")?j:_.filter(j,(function(e){return e.customId||e.templateFonts}))},get:function(e,t){var n=_.clone(e?w(e):j);return void 0!==t&&n&&n.customId&&(n.support=function(e,t){return t=n(),{b:e.support.b,bi:e.support.bi,i:_.contains(e.support.variants,t+"italic"),variants:e.support.variants};function n(){switch(t){case"normal":return 400;case"bold":return 700}if("bolder"===t){var n=_.max(e.support.variants);return n>700?n:800}if("lighter"===t){var r=_.min(e.support.variants);return r<400?r:300}return t}}(n,t)),n},getCustomFont:function(e,t){if(this.customFonts[e]){var n=j.find((function(t){return t.customId===e}));if(n&&n.imported_css)return this.customFonts[e]}var r=$.Deferred();return this.customFonts[e]=r.promise(),h.getResource("fonts",e).then((function(e){_.isArray(e)||(e=[e]),j=_.union(j,T(e)),I(e,t),r.resolve()}),(function(){return r.reject()})),this.customFonts[e]},getFontUrl:function(e,t,n){var r=/url\(.*?\)/g,o=[],i=n?"italic":"normal";return e.split(" ").length>1&&(e='"'+e+'"'),t=t||400,_.each(document.styleSheets,(function(n){_.each(n.cssRules,(function(n){if(n instanceof CSSFontFaceRule){var s=n.style,a=_.contains(s,"font-family")&&s.fontFamily===e;a=_.contains(s,"font-weight")?parseInt(s.fontWeight)===t&&a:a,(a=_.contains(s,"font-style")?s.fontStyle===i&&a:a)&&o.push(s.src.match(r))}}))})),JSON.stringify(_.uniq(_.flatten(o)))},addFontToList:function(e){j.push({family:e,support:{b:!1,bi:!1,i:!1,variants:["400"]}})},getSanitizedFontFamily:function(e){if(!this.get(e)){var t=e.match(/^(.+)-([^-]+)$/);if(t&&["thin","extralight","ultralight","light","book","normal","regular","roman","medium","semibold","demibold","bold","extrabold","ultrabold","black","heavy"].indexOf(t[2].toLowerCase())>-1&&this.get(t[1]))return t[1]}return e},addSystemFontCSS:function(e){var t=this.get(e);t&&t.isSystem&&!t.imported&&(t.imported=!0,k(t.support).then((function(e){$("head>style:first").append(y({family:t.family,variants:e}))})))},importDesignCSSFonts:(p=(0,s.default)(o.default.mark((function e(t,n){var r,i,s,a,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,this.initialized&&this.fontListLoaded){e.next=4;break}return setTimeout((function(){r.importDesignCSSFonts(t)}),5),e.abrupt("return");case 4:i=[],t?_.isArray(t)||(t=[t]):(t=[],$(".textarea").each((function(){var e=g.get(this.id);e.font&&!_.findWhere(t,{family:e.font.family})&&t.push(e.font)}))),s=u(t),e.prev=7,s.s();case 9:if((a=s.n()).done){e.next=28;break}if(l=a.value,(c=w(l.family))&&c.customId&&(l.customId=c.customId),!l.customId){e.next=24;break}return e.prev=14,e.next=17,this.getCustomFont(l.customId,n);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),x([c]);case 22:e.next=26;break;case 24:c&&c.family&&(c.family=c.family.replace(/'/g,"")),i.push(c);case 26:e.next=9;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(7),s.e(e.t1);case 33:return e.prev=33,s.f(),e.finish(33);case 36:x(i);case 37:case"end":return e.stop()}}),e,this,[[7,30,33,36],[14,19]])}))),function(e,t){return p.apply(this,arguments)})})},{"../app/decorate":5,"../facade/design/design":47,"../facade/editor/editor":91,"../facade/restrictions/restrictions":118,"./app/fonts":121,"./library":128,"./library/font-template.hbs":132,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.set.js":912,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966}],126:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/toConsumableArray")),a=r(e("@babel/runtime/helpers/slicedToArray")),l=r(e("@babel/runtime/helpers/asyncToGenerator"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.split.js");var h=e("./api"),m=e("./company").instance,f=e("./company").factory,g=e("./desygner-company"),b=e("./desygner-api"),v=e("./user-info"),y=e("../facade/editor/editor"),j=e("../facade/design/design");function w(){this.resource="management/formatgroups",this.apiInit=_.memoize(h.prototype.init),this.externalTemplates=[{name:"Wattpad",domain:"wattpad-master",flavour:"watt"}]}function I(){_.isEmpty(INKIVE.Helpers.getInlineSize())&&this.getCurrentFormat().then((function(e){var t=$("#svgcontent");t.addClass("du-"+e.unit),t.addClass("dw-"+e.width),t.addClass("dh-"+e.height),j.trigger("template.update.size")}))}w.prototype=new h,w.prototype.init=function(){var e=this;return this.useWeBrandFormats=INKIVE.Helpers.isWeBrandProject(),this.parentCompany=INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.parent_company,this.useWeBrandFormats?(this.initDeferred||(this.initDeferred=new Promise((function(n){y.on("editor.loaded",I.bind(e)),y.on("page.move_to",I.bind(e)),Promise.all([v.get(),t()]).then(function(){var r=(0,l.default)(o.default.mark((function r(i){var l,c,u,p,h,m,f,g,b;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:l=(0,a.default)(i,2),c=l[0],u=l[1],p=c.flavours||[],h=e.externalTemplates.filter((function(e){return p.includes(e.flavour)})),e.companyData=u||[],m=d(h),r.prev=5,g=o.default.mark((function n(){var r,i,a;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=f.value,i=r.domain,n.next=4,t(i);case 4:(a=n.sent)&&a.length&&(e.companyData=[].concat((0,s.default)(e.companyData),(0,s.default)(a.map((function(e){return e.external=r,e.data.forEach((function(e){e.external=i})),e})))));case 6:case"end":return n.stop()}}),n)})),m.s();case 8:if((f=m.n()).done){r.next=12;break}return r.delegateYield(g(),"t0",10);case 10:r.next=8;break;case 12:r.next=17;break;case 14:r.prev=14,r.t1=r.catch(5),m.e(r.t1);case 17:return r.prev=17,m.f(),r.finish(17);case 20:if(!e.parentCompany){r.next=25;break}return r.next=23,t(e.parentCompany);case 23:(b=r.sent)&&b.length&&(e.companyData=[].concat((0,s.default)(e.companyData),(0,s.default)(b)));case 25:n(e.companyData);case 26:case"end":return r.stop()}}),r,null,[[5,14,17,20]])})));return function(e){return r.apply(this,arguments)}}())}))),this.initDeferred):this.apiInit();function t(e){var t=e||"desygner",n=e?new f(e):m,r=n.get("campaigns?consume"),o=n.get("formats?consume"),i=b.get("brand/companies/".concat(t,"/campaigns-folders/root/children"));return new Promise((function(e){Promise.all([r,o,i]).then((function(t){var n=(0,a.default)(t,3),r=n[0],o=n[1],i=n[2];e(function(e,t,n){if(e&&t)return e.map((function(e){_.isEmpty(n)&&(n=[]);var r=n.find((function(t){return t.id===e.folder}))||{},o=t.filter((function(t){return t.campaign===e.id})).map((function(e){return u(u({},e),{},{string_id:"f_"+e.id})}));return{key:"c_"+e.id,name:e.name,data:o,folderId:r.id,folderName:r.name}})).sort((function(e,t){return e.folderId>t.folderId?1:-1}));return[]}(r,o,i))}))}))}},w.prototype.getGroup=function(e){var t=$.Deferred();return this.getGroups([e]).then((function(e){t.resolve(e[0])}),(function(e){t.reject(e+" | Formats GetGroup error")})),t.promise()},w.prototype.getGroups=function(e){var t=$.Deferred(),n=function(e){return parseInt(e.match(/\d/g).join(""),10)};return this.init().then((function(r){if(e&&e.length){var o=e.map((function(e){return n(e)})),i=r.filter((function(e){var t=e.key;return-1!==o.indexOf(n(t))}))||[];t.resolve(i)}else t.resolve(r)}),(function(e){t.reject(e+" | Formats GetGroups error")})),t.promise()},w.prototype.getFormat=function(e){var t=$.Deferred();return this.getFormats([e]).then((function(e){t.resolve(e[0])}),(function(e){t.reject(e+" | Formats GetFormat error")})),t.promise()},w.prototype.getFormats=function(e){var t=$.Deferred();return this.init().then((function(n){INKIVE.C.IS_MOBILE_APP&&(n=n.groups);var r=_.flatten(_.map(n,(function(e){return e.data})));e?t.resolve(_.filter(r,(function(t){return _.any(e,(function(e){return(e=parseInt(e))===parseInt(t.string_id)||e===parseInt(t.id)}))}))):t.resolve(r)}),(function(e){t.reject(e+" | Formats GetFormats error")})),t.promise()},w.prototype.getFormatTemplates=function(e){var t=this;return new Promise((function(n){t.init().then((function(t){m.get(["formats",e.id,"templates"]).then((function(e){return n(e)}))}))}))},w.prototype.getFormatById=function(e){var t=this;return new Promise((function(n){t.init().then((function(t){g.get(["formats",e]).then((function(e){return n(e)}))}))}))},w.prototype.getFormatSiblings=function(e){var t=this;return new Promise((function(n){t.init().then((function(r){var o;o=e.id?e.id:e.parent_format,(t.parentCompany?new f(t.parentCompany):g).get(["formats",o,"templates?siblings"]).then((function(e){return n(e)}))}))}))},w.prototype.getFormatsBasedOnSize=function(e){var t=$.Deferred();return this.getFormats().then(_.bind((function(n){var r=_.bind(this.isSameSize,this,e);t.resolve(_.filter(n,r))}),this),(function(e){t.reject(e+" | Formats GetFormatsBasedOnSize error")})),t.promise()},w.prototype.getCurrentSize=function(){var e=INKIVE.Tool.getInstance().editor.canvas,t={width:e.contentW,height:e.contentH},n=INKIVE.Helpers.getInlineSize();return n.unit&&_.contains(["px","in","cm","mm"],n.unit)?n:t},w.prototype.isSameSize=function(e,t){var n=INKIVE.Helpers.convertUnitsToPixels;if(e.unit)return e.unit===t.unit&&e.width===t.width&&e.height===t.height;var r=n(t.width,t.unit,1,96),o=n(t.height,t.unit,1,96),i=Math.abs(e.width-r)<10&&Math.abs(e.height-o)<10;return i||(r=n(t.width,t.unit,1,72),o=n(t.height,t.unit,1,72),i=Math.abs(e.width-r)<10&&Math.abs(e.height-o)<10),i},w.prototype.getCurrentFormat=function(){var e,t=this,n=$.Deferred(),r=((e=$("#svgcontent > g.main").attr("class"))&&(e=_.find(e.split(" "),(function(e){return e.match(/format-id-[\d+]/)})))?e.split("-")[2]:null)||INKIVE.Helpers.getFragmentParam("filter"),o=this.getCurrentSize(),i=_.bind((function(e){this.getFormatsBasedOnSize(o).then((function(t){n.resolve(t.length?t[0]:e)}))}),this);return r?$.when(this.getFormat(r),this.getFormatsBasedOnSize(o)).then(_.bind((function(e,t){e&&this.isSameSize(o,e)?n.resolve(e):n.resolve(t[0])}),this)):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?m.get(["templates",INKIVE.C.BOOK.encodedId]).then((function(e){m.get(["formats",e.format]).then((function(e){n.resolve(e)}))})):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN?m.get(["designs",INKIVE.C.BOOK.encodedId]).then((function(e){e.format&&t.isSameSize(o,e.format)?n.resolve(e.format):i(e.format)}),i):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?m.get(["designs",INKIVE.C.BOOK.encodedId]).then((function(e){n.resolve(e.format)}),i):i(),n.promise()},w.prototype.getPrintableFormats=function(){var e=$.Deferred();return this.getGroups().then((function(t){var n=_.flatten(t.map((function(e){return _.where(e.data,{is_printable:!0})})));e.resolve(n)}),(function(t){e.reject(t+" | Formats getPrintableFormats error")})),e.promise()},t.exports=new w},{"../facade/design/design":47,"../facade/editor/editor":91,"./api":120,"./company":122,"./desygner-api":123,"./desygner-company":124,"./user-info":161,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],127:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.string.ends-with.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.timers.js");var s=e("../../helpers/dataUrl"),a=s.isDataURL,l=s.getMIMEType,c=s.getMimeTypeFromUrl,u=e("../utils/md5");function d(){this.imagesData={},this.inlinedImages={},this.base64Images={},this.mimeTypes={},this.imagesBlacklist=[]}d.prototype={convertFormats:["/thumb/","/mobile/","/tab/","/web/","/largeweb/","/original/"],defaultAmazonDataNames:{name:"name",thumb:"thumb",mobile:"mobile",tab:"tab",web:"web",largeweb:"largeweb",original:"original"},defaultAmazonVersionDataNames:{name:"name",thumb:"version.thumb",mobile:"version.mobile",tab:"version.tab",web:"version.web",largeweb:"version.largeweb",original:"version.original"},defaultAPIDataNames:{name:"name",thumb:"src",mobile:"src_mobile",tab:"src_tab",web:"src_web",largeweb:"src_big",original:"src_big"},getFacebookPhotos:function(e,t){this.sendCommand("load/photos/facebook",e,_.bind((function(e){if(e=$.parseJSON(e),INKIVE.Helpers.isResponseExists(e)){var n=this.setFacebookImagesData(e);t(!0,n,e)}else t(!1)}),this))},setFacebookImagesData:function(e){var t={};return _.each(e,(function(e){_.extend(t,this.setImagesData(e.data,"fb"))}),this),t},getDropboxPhotos:function(e,t){this.fetchGenericData("load/photos/dropbox",e,t,"db")},getGooglePhotos:function(e,t){this.fetchGenericData("load/photos/google",e,t,"go")},getFlickerPhotos:function(e,t){this.fetchGenericData("load/photos/flickr",e,t,"fl")},getInstagramPhotos:function(e,t){this.fetchGenericData("load/photos/instagram",e,t,"in")},getAssetbankPhotos:function(e,t){this.fetchGenericData("load/photos/assetbank",e,t,"ab")},getExternalPhotoById:function(e,t){this.sendCommand("load/photos/getexternalbyid",e,(function(e){t(e&&e.trim()||"")}))},fetchGenericData:function(e,t,n,r){this.sendCommand(e,t,_.bind((function(e){if(e=$.parseJSON(e),INKIVE.Helpers.isResponseExists(e)){var t=this.setImagesData(e,r);n(!0,t,e)}else n(!1)}),this))},getOriginalUrl:function(e){if(e=INKIVE.Helpers.getCORSSecureUrl(e)){if(this.imagesData[e])return e;var t=this.convertFormats,n=_.find(this.imagesData,(function(t){return _.contains(t.version,e)}));return n?function(){var e=n.version.original,t=this.isExternalImage(e);return t&&INKIVE.DesignFacade.canvas.call("advice.show","upload-error"),t&&n.version.thumb||e}.call(this):function(){if(this.isAmazonImage(e))return _.each(t,(function(t){e=e.replace(t,"/original/")})),e;return null}.call(this)}},isExternalImage:function(e){if(!e)return!1;var t=null!==e.match(/^((http|https):\/\/upload.wikimedia.org)/),n=null!==e.match(/(.pxfuel.com)/);return t||n},isAmazonImage:function(e){return!!e&&(null!==e.match(/^((http|https):\/\/s3.amazonaws.com)/)||e.indexOf("static.inkive.me")>-1||e.indexOf("static.inkive.com")>-1||e.indexOf("static.webrand.com")>-1||e.indexOf("static.desygner.com")>-1||e.indexOf("static.photodexia.com")>-1||e.indexOf("static.makewebrand.xyz")>-1||e.indexOf("static.makedesygner.xyz")>-1||e.indexOf("static.buildwebrand.xyz")>-1||e.indexOf("static.builddesygner.xyz")>-1||e.indexOf("static.qawebrand.xyz")>-1||e.indexOf("static.qadesygner.xyz")>-1)},blacklistImage:function(e){this.imagesBlacklist.push(this.getImageHash(e))},isBlacklisted:function(e,t){var n=this.getImageHash(e,t);return _.any(this.imagesBlacklist,(function(e){return e===n}))},setImageUrl:function(e,t,n){var r=this.getImageHash(e,null,n);t&&(this.inlinedImages[r]=t),t?INKIVE.C.IS_MOBILE_APP||this.fetchMimeType(t):(t=e.getAttribute("xlink:href"),a(t)?this.base64Images[r]=t:INKIVE.C.IS_MOBILE_APP||this.fetchMimeType(t))},setBase64:function(e,t){this.base64Images[e]=t},getBase64:function(e){return this.base64Images[e]},getImageUrl:function(e,t){var n=this.getImageHash(e,t);if(void 0!==this.inlinedImages[n])return this.inlinedImages[n];if(a(t||e.getAttribute("xlink:href"))){var r=u(this.getHashableSubstring(t||e.getAttribute("xlink:href"))),o=_.find(this.inlinedImages,(function(e,t){var n=t.split("_");return n[n.length-1]===r}));if(void 0!==o)return o}return $(e).data("url")},getImageHash:function(e,t,n){var r=null;if("string"==typeof e){var o=e;if(r=document.querySelector("image#".concat(o)),n)return c(o,n);if(!r)return c(o,u(this.getHashableSubstring(t||null)))}var i=r||e,s=i.getAttribute("id"),a=i.getAttribute("data-hash");if(a)return c(s,a);var l=i.getAttribute("xlink:href")||i.dataset.url;return c(s,u(this.getHashableSubstring(l)));function c(e,t){return"".concat(e,"_").concat(t)}},getImageDataHash:function(e){if(e){if("string"==typeof e)return e;var t=e.getAttribute("xlink:href")||e.dataset.url;return u(this.getHashableSubstring(t))}},getHashableSubstring:function(e){if(!e)return e;return e.length<100||"http"===e.substring(0,4)?e:(e.length+e).substr(0,100)},getAllImageVersions:function(e){var t={};return _.each(this.defaultAmazonDataNames,_.bind((function(n){"name"!==n&&(t[n]=this.getVersionUrl(e,n))}),this)),t},getVersionUrl:function(e,t,n){if(e){var r=_.find(this.imagesData,(function(t){return _.contains(t.version,e)}));if(r&&(r.version[t]||!n))return INKIVE.Helpers.getCORSSecureUrl(r.version[t]);if(this.isAmazonImage(e)&&t){var o=null;_.each(this.convertFormats,(function(t){var n=e.indexOf(t);-1!==n&&(!o||n<void 0)&&(o=t)})),o?e=e.replace(o,"/"+t+"/"):e.indexOf("/img/backgrounds/")>-1&&(_.each(this.convertFormats,(function(t){t="-"+t.replace(/\//g,"")+".";var n=e.indexOf(t);-1!==n&&(!o||n<void 0)&&(o=t)})),e=e.replace(o,"-"+t+"."))}return INKIVE.Helpers.getCORSSecureUrl(e)}},getRightSizeUrl:function(e,t,n){var r=function(){var t,n=[{name:"thumb",width:168,height:168},{name:"mobile",width:499,height:499},{name:"tab",width:800,height:800},{name:"web",width:1200,height:1200},{name:"largeweb",width:2500,height:2500},{name:"original",width:1/0,height:1/0}],r=this.getOriginalUrl(e)||e,o=this.getImageOriginalData(r);if(o){t=this.imagesData[r].attributesNames;var i=_.compact(_.map(["thumb","mobile","tab","web","largeweb"],(function(e){var n=this.getAttribute(o,t[e]+"_height"),r=this.getAttribute(o,t[e]+"_width");if(n&&r)return{name:e,width:parseInt(r),height:parseInt(n)}}),this));if(i.length)return i.push({name:"original",width:1/0,height:1/0}),i}return n}.call(this),o=t.width,i=t.height,s=e.endsWith("_bgr"),a=_.find(r,(function(e){return o<=e.width&&i<=e.height}));return a&&!s?this.getVersionUrl(e,a.name,n):INKIVE.Helpers.getCORSSecureUrl(e)},getImageDataFromData:function(e,t){var n=INKIVE.Helpers.getCORSSecureUrl(this.getAttribute(e,t.original)),r=this.imagesData[n]||{},o=this.CORSSecureClean({web:this.getAttribute(e,t.web),tab:this.getAttribute(e,t.tab),thumb:this.getAttribute(e,t.thumb),mobile:this.getAttribute(e,t.mobile),largeweb:this.getAttribute(e,t.largeweb),original:n});return{name:this.getAttribute(e,t.name),stored:r.stored||!1,originalData:e,attributesNames:t,version:o}},getAttribute:function(e,t){if(e&&t){for(var n=t.split("."),r=e;r&&n[0];)r=r[n.shift()];return r}},getImageOriginalData:function(e){var t=this.getOriginalUrl(e),n=this.imagesData[t];return n&&n.originalData},getImageOriginalSizeData:function(e,t){var n,r=this.getOriginalUrl(e),o=this.imagesData[r];if(o){var i=o.originalData;if(i.original_width&&i.original_height)return void t({width:parseFloat(i.original_width),height:parseFloat(i.original_height)})}var s=new Image,a="naturalWidth"in s,l=setInterval((function(){(s.naturalWidth||s.width>50)&&c()}),100);function c(){n||(clearInterval(l),n=!0,s.onload=s.onerror=$.noop,t({width:a?s.naturalWidth:s.width,height:a?s.naturalHeight:s.height}),s.src="")}s.onload=c,s.src=INKIVE.Helpers.getCORSSecureUrl(r)},storeImageData:function(e){var t=this.getOriginalUrl(e),n=this.imagesData[t];if(n&&!n.stored){var r={scrapbookId:INKIVE.C.BOOK.id,images:JSON.stringify(n.originalData),loadType:n.loadType};this.sendCommand("inkiveeditor/storeImageData",r,(function(){n.stored=!0}))}},setImagesData:function(e,t,n){var r={};return n=n||(t?this.defaultAPIDataNames:this.defaultAmazonDataNames),_.each(e,(function(e){var o=this.getImageDataFromData(e,n);t&&(o.loadType=t);var i=o.version.original;r[i]=this.imagesData[i]=o,this.CORSSecureClean(this.imagesData[i].versions),INKIVE.C.IS_MOBILE_APP||this.fetchMimeType(i)}),this),r},addImageData:function(e,t){t=t||this.defaultAmazonVersionDataNames;var n=this.getImageDataFromData(e,t),r=n.version.original;this.imagesData[r]=n,this.CORSSecureClean(this.imagesData[r].versions),INKIVE.C.IS_MOBILE_APP||this.fetchMimeType(r)},CORSSecureClean:function(e){return e?(e.web=INKIVE.Helpers.getCORSSecureUrl(e.web),e.tab=INKIVE.Helpers.getCORSSecureUrl(e.tab),e.thumb=INKIVE.Helpers.getCORSSecureUrl(e.thumb),e.mobile=INKIVE.Helpers.getCORSSecureUrl(e.mobile),e.largeweb=INKIVE.Helpers.getCORSSecureUrl(e.largeweb),e.original=INKIVE.Helpers.getCORSSecureUrl(e.original),e):e},smartLoad:function(e,t,n,r){var o=r?7:4,i=r?3e3:1e3,s=0,a=new Image,l=this.getRightSizeUrl(e,t);a.onerror=_.bind((function(){++s<=o?_.delay(_.bind((function(){a.src=INKIVE.Helpers.getCORSSecureUrl(s<o?l:this.getOriginalUrl(e))}),this),i):n(INKIVE.C.Status.timeout,a)}),this),a.onload=_.partial(n,INKIVE.C.Status.success,a),a.src=INKIVE.Helpers.getCORSSecureUrl(l)},sendCommand:function(e,t,n){console.warn("Images Factory: Called old sendCmd: "+e),$.ajax({url:INKIVE.C.BASE_URL+e,type:"POST",data:t,dataType:"json",complete:function(e){n(e.responseText)}})},getMimeType:function(e){var t=this.getOriginalUrl(e)||e;return this.mimeTypes[t]||c(t)},fetchMimeType:function(e){var t=this;return(0,i.default)(o.default.mark((function n(){var r;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(e);case 2:r=n.sent,t.mimeTypes[t.getOriginalUrl(e)||e]=r;case 4:case"end":return n.stop()}}),n)})))()},removeImageFilter:function(e){var t=$(e),n=INKIVE.ImagesFactory.getMimeType(t.attr("xlink:href")),r=$("[data-action=on_imageFilter]");r.removeClass("applied"),r.parent().toggle("image/jpeg"===n&&"msie"!==$.browser.name),t.is("[filter]")&&(t.removeAttr("filter"),$("#svgcontent defs").find("#filter_"+t.attr("id")).remove())}},t.exports=new d},{"../../helpers/dataUrl":632,"../utils/md5":618,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.ends-with.js":914,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/web.timers.js":966}],128:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.date.to-json.js"),e("core-js/modules/web.url.to-json.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var s=e("./user-info"),a=e("./company").instance,l={palettes:e("./library/palette-model"),colors:e("./library/color-model"),texts:e("./library/text-model"),images:e("./library/image-model"),logos:e("./library/logo-model"),icons:e("./library/icon-model"),fonts:e("./library/font-model"),folders:e("./library/folder-model"),videos:e("./library/video-model"),member:e("./library/member-font-model")};function c(e){_.bindAll(this,"initialize","get","post","setCompany","cacheClear","initialize","getResource","_collectionFetch"),e?"string"==typeof e&&(e={librarySource:e}):e={};var t=JSON.stringify(e);return this.librarySource=e.librarySource,this.addedColors=[],this.collections={},this.cache={},this.modelCache={},this.currentCompany=e.domain,this.currentFolderId=null,this.popupMenuColorPalette="0",this.isEnterprise=INKIVE.C.WHITE_LABEL_CONFIGURATION&&"enterprise"===INKIVE.C.WHITE_LABEL_CONFIGURATION.subscription_plan,c.instances[t]||(c.instances[t]=this),c.instances[t]}c.instances={},c.prototype=_.extend({},Backbone.Events),c.prototype.initialize=_.memoize((function(){var e=$.Deferred();return $.when(s.get(),a.getCompany()).then(_.bind((function(t,n){this.companyData=n,this.credentials={username:t.credentials.token,password:t.credentials.hash};var r=this.currentCompany||n&&n.id||"desygner";this.setCompany(r),e.resolve()}),this)),e.promise()}),_.bind((function(e){return e?"string"==typeof e&&(e={librarySource:e}):e={},JSON.stringify(e)}),void 0)),c.prototype.setCompany=function(e){return this.baseUrl=INKIVE.Helpers.projectIsLinkedToRestrictions()&&"member"!==this.librarySource?INKIVE.C.API_URL+"brand/companies/"+e+"/assets/":INKIVE.C.API_URL+"brand/companies/"+e+"/library/",this.currentCompany=e,this.collections={},this.cache={},this},c.prototype.get=function(e,t,n){var r=$.Deferred();return this.initialize({librarySource:this.librarySource,domain:this.currentCompany}).then(_.partial(this._collectionFetch,e)).then(_.bind((function(){var n,o,i=this.collections[e],s=t?i.filter((function(e){var n=e.get("data");return _.all(t,(function(t,r){return n[r].toString()===t.toString()||e.get(r)===t}))})):i?i.toArray():[],a="member"!==this.librarySource&&!(null===(n=INKIVE.C.FEATURE_FLAG)||void 0===n||null===(o=n.brand_assets)||void 0===o||!o.includes("show_smart_assets"));r.resolve(_(s).map((function(e){return Object.assign(e.toJSON(),{is_smart_asset:a})})))}),this)),r.promise()},c.prototype.post=function(e,t){var n=$.Deferred();return this._collectionFetch(e).then(_.bind((function(r){var o=r.create(t,{url:this.baseUrl+e,headers:Backbone.BasicAuth.getHeader(this.credentials)});o.on("change:id",n.resolve),o.on("error",(function(){o.destroy(),n.reject()}),"add-to-library-error")}),this)),n.promise()},c.prototype.getResource=function(e,t){var n,r;if(this.modelCache[t])return this.modelCache[t];var o=new l[e];o.set("id",t),o.baseUrl=this.baseUrl,o.companyData=this.companyData;var s=$.Deferred(),a="member"!==this.librarySource&&!(null===(n=INKIVE.C.FEATURE_FLAG)||void 0===n||null===(r=n.brand_assets)||void 0===r||!r.includes("show_smart_assets")),c=function(e){return i(i({},e),{},{is_smart_asset:a})};this.modelCache[t]=s.promise();var u=Backbone.BasicAuth.getHeader(this.credentials);return o.fetch({headers:u,error:s.reject}).then((function(t){!function(t){var n=Array.isArray(t)?t:[];"folder"===e.type&&(n=t.data.resources);n.forEach((function(e){var t=e.type.toLocaleLowerCase()+"s";l[t]&&l[t].prototype.parse&&l[t].prototype.parse(e)}))}(t);var n=Array.isArray(t)?t.map(c):c(t);return s.resolve(n)})),this.modelCache[t]},c.prototype.cacheClear=function(e){this.cache=_(this.cache).omit(e),this.collections=_(this.collections).omit(e)},c.prototype._collectionFetch=function(e){if(this.cache[e])return this.cache[e];var t=$.Deferred();this.collections[e]||this._initCollection(e),this.cache[e]=t.promise();var n=this.processMemberCall(e);return n&&this.collections[e].fetch({success:t.resolve,error:t.resolve}),n||t.resolve(),this.cache[e]},c.prototype._initCollection=function(e){var t=Backbone.Collection.extend({model:l[e],url:this.baseUrl+e});this.collections[e]=new t,this.collections[e].credentials=this.credentials},c.prototype.clearModelCache=function(){this.modelCache={}},c.prototype.processMemberCall=function(e){var t=!0;return"member"===e&&(this.isEnterprise?this.collections[e].url=this.baseUrl+"contents":t=!1),t},t.exports={factory:c,instance:new c}},{"./company":122,"./library/color-model":129,"./library/folder-model":130,"./library/font-model":131,"./library/icon-model":133,"./library/image-model":134,"./library/logo-model":136,"./library/member-font-model":137,"./library/palette-model":138,"./library/text-model":145,"./library/video-model":146,"./user-info":161,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.map.js":870,"core-js/modules/es.date.to-json.js":881,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.url.to-json.js":969}],129:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.date.to-json.js"),e("core-js/modules/web.url.to-json.js");var o=r(e("tinycolor2"));t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"colors/"+this.id:"colors")},parse:function(e){var t=parseInt(e.data.color_code/65536),n=parseInt((e.data.color_code-65536*t)/256),r=parseInt(e.data.color_code-65536*t-256*n),i=(0,o.default)("rgb("+r+","+n+","+t+")");return e.data.color_code=i.toHexString(),e.data.is_dark=i.isDark(),this&&this.attributes&&this.attributes.data&&(e.data.palette=this.attributes.data.palette),e},getServerModel:function(){var e=_(this.attributes).clone(),t=(0,o.default)(e.data.color_code).toRgb();return e.data=_(e.data).omit("is_dark"),e.data.color_code=65536*t.b+256*t.g+t.r,e},sync:function(){this.toJSON=this.getServerModel;var e=Backbone.sync.apply(this,arguments);return this.toJSON=Backbone.Model.prototype.toJSON,e}})},{"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.date.to-json.js":881,"core-js/modules/es.parse-int.js":905,"core-js/modules/web.url.to-json.js":969,tinycolor2:1049}],130:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.parse-int.js");var o=r(e("tinycolor2")),i=e("../images");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"folders/"+this.id:"folders")},parse:function(e){if(!this.id||!this.id.split||"resources"!==this.id.split("/")[1])return e;_.each(e,(function(e){if((e.data.family||["data"].name||["data"].default_content)&&(e.data.name=e.data.name||e.data.family,e.data.default_content=e.data.default_content||e.data.name||e.data.family),e.data.color_code||["data"].stroke_color){var t=parseInt(e.data.stroke_color/65536),n=parseInt((e.data.stroke_color-65536*t)/256),r=parseInt(e.data.stroke_color-65536*t-256*n),s=(0,o.default)("rgb("+r+","+n+","+t+")");e.data.stroke_color=s.toHexString();t=parseInt(e.data.color_code/65536),n=parseInt((e.data.color_code-65536*t)/256),r=parseInt(e.data.color_code-65536*t-256*n),s=(0,o.default)("rgb("+r+","+n+","+t+")");e.data.color_code=s.toHexString()}if(e.data.source){var a=e.data.source;e.data.tab=i.getVersionUrl(a,"tab"),e.data.web=i.getVersionUrl(a,"web"),e.data.thumb=i.getVersionUrl(a,"thumb"),e.data.mobile=i.getVersionUrl(a,"mobile"),e.data.largeweb=i.getVersionUrl(a,"largeweb"),e.data.original=a}}))}})},{"../images":127,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,tinycolor2:1049}],131:[function(e,t,n){"use strict";t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"fonts/"+this.id:"fonts")}})},{}],132:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o,i,s){var a,l,c,u=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m="@font-face {\n    font-family: '"+(null!=(a=(h(n,"font_quote")||t&&h(t,"font_quote")||d).call(u,null!=s[1]?h(s[1],"family"):s[1],{name:"font_quote",hash:{},data:o,loc:{start:{line:3,column:18},end:{line:3,column:45}}}))?a:"")+"';\n    src: local('☺')";return l=null!=(l=h(n,"sources")||(null!=t?h(t,"sources"):t))?l:d,c={name:"sources",hash:{},fn:e.program(2,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:19},end:{line:10,column:16}}},a="function"==typeof l?l.call(u,c):l,h(n,"sources")||(a=p.call(t,a,c)),null!=a&&(m+=a),m+=";\n    ",l=null!=(l=h(n,"weight")||(null!=t?h(t,"weight"):t))?l:d,c={name:"weight",hash:{},fn:e.program(13,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:11,column:4},end:{line:11,column:47}}},a="function"==typeof l?l.call(u,c):l,h(n,"weight")||(a=p.call(t,a,c)),null!=a&&(m+=a),m+="\n    ",l=null!=(l=h(n,"style")||(null!=t?h(t,"style"):t))?l:d,c={name:"style",hash:{},fn:e.program(15,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:12,column:4},end:{line:12,column:44}}},a="function"==typeof l?l.call(u,c):l,h(n,"style")||(a=p.call(t,a,c)),null!=a&&(m+=a),m+"\n}\n"},2:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h="\n        ";return s=null!=(s=p(n,"otf")||(null!=t?p(t,"otf"):t))?s:c,a={name:"otf",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:8},end:{line:5,column:61}}},i=typeof s===u?s.call(l,a):s,p(n,"otf")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"woff2")||(null!=t?p(t,"woff2"):t))?s:c,a={name:"woff2",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:8},end:{line:6,column:62}}},i=typeof s===u?s.call(l,a):s,p(n,"woff2")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"woff")||(null!=t?p(t,"woff"):t))?s:c,a={name:"woff",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:8},end:{line:7,column:59}}},i=typeof s===u?s.call(l,a):s,p(n,"woff")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"svg")||(null!=t?p(t,"svg"):t))?s:c,a={name:"svg",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:8},end:{line:8,column:56}}},i=typeof s===u?s.call(l,a):s,p(n,"svg")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"ttf")||(null!=t?p(t,"ttf"):t))?s:c,a={name:"ttf",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:8},end:{line:9,column:61}}},i=typeof s===u?s.call(l,a):s,p(n,"ttf")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+"\n    "},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return",url("+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"source")||(null!=t?s(t,"source"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"source",hash:{},data:o,loc:{start:{line:5,column:21},end:{line:5,column:33}}}):i)+") format('opentype')"},5:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return",url("+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"source")||(null!=t?s(t,"source"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"source",hash:{},data:o,loc:{start:{line:6,column:23},end:{line:6,column:35}}}):i)+") format('woff2')"},7:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return",url("+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"source")||(null!=t?s(t,"source"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"source",hash:{},data:o,loc:{start:{line:7,column:22},end:{line:7,column:34}}}):i)+") format('woff')"},9:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return",url("+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"source")||(null!=t?s(t,"source"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"source",hash:{},data:o,loc:{start:{line:8,column:21},end:{line:8,column:33}}}):i)+") format('svg')"},11:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return",url("+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"source")||(null!=t?s(t,"source"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"source",hash:{},data:o,loc:{start:{line:9,column:21},end:{line:9,column:33}}}):i)+") format('truetype')"},13:function(e,t,n,r,o){return"font-weight: "+e.escapeExpression(e.lambda(t,t))+";"},15:function(e,t,n,r,o){return"font-style: "+e.escapeExpression(e.lambda(t,t))+";"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"variants"):t,{name:"each",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:14,column:9}}}))?a:""},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],133:[function(e,t,n){"use strict";var r=e("../images");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"logos/"+this.id:"logos")},parse:function(e){var t=e.data.source||"";return e.data.tab=r.getVersionUrl(t,"tab"),e.data.web=r.getVersionUrl(t,"web"),e.data.thumb=r.getVersionUrl(t,"thumb"),e.data.mobile=r.getVersionUrl(t,"mobile"),e.data.largeweb=r.getVersionUrl(t,"largeweb"),e.data.original=t,r.setImagesData({version:e.data},"library",r.defaultAmazonDataNames),e}})},{"../images":127}],134:[function(e,t,n){"use strict";var r=e("../images");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"images/"+this.id:"images")},parse:function(e){var t=e.data.source;return e.data.tab=r.getVersionUrl(t,"tab"),e.data.web=r.getVersionUrl(t,"web"),e.data.thumb=r.getVersionUrl(t,"thumb"),e.data.mobile=r.getVersionUrl(t,"mobile"),e.data.largeweb=r.getVersionUrl(t,"largeweb"),e.data.original=t,r.setImagesData({version:e.data},"library",r.defaultAmazonDataNames),e}})},{"../images":127}],135:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js");var r=e("../library").instance,o=e("../../facade/design/design"),i=e("../../utils/advice");function s(){this.canvas=null,this.fileContentUploader=null,this.type=null,this.libraryFactory=r,this.handlers={text:e("./populator/text"),image:e("./populator/image"),logo:e("./populator/logo"),icon:e("./populator/icon"),color:e("./populator/color"),video:e("./populator/video")}}s.prototype=_.extend({},Backbone.Events),s.prototype.initialize=function(e){this.canvas=e,_.bindAll(this,"onError","wrappResource","addElementToLibrary","setLibrary","resetLibrary")},s.prototype.setLibrary=function(e){this.libraryFactory=e},s.prototype.resetLibrary=function(){this.libraryFactory=r},s.prototype.addElementToLibrary=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function r(e,t){this.libraryFactory.post(e,t).then(_.bind(o,this,e,t),this.onError)}function o(e,t){this.libraryFactory.clearModelCache(),n&&this.resetLibrary(),this.trigger("new."+e,t),INKIVE.Modal.togglePageLoader(!1),i.show("add-to-library-success")}INKIVE.Modal.togglePageLoader(!0),this.generateLibraryItem(e,t).then(_.bind(r,this),this.onError)},s.prototype.onError=function(e){INKIVE.Modal.togglePageLoader(!1),i.show(_.isString(e)?e:"add-to-library-error")},s.prototype.generateLibraryItem=function(e,t){var n=$.Deferred(),r=o.get($(e).is(".background")?"background":e.getAttribute("id")),i=t;i||(i=_.contains(["sticker","group","shape"],r.type)?"icon":r.type);var s=this.handlers[i];if(s){e.setAttribute("from-library","true");var a=INKIVE.Tool.INSTANCE.editor.canvas;a.clearSelection(),a.selectOnly([e]),s.getNewItem(r,e).then(_.bind(this.ensureUniquenes,this,i),n.reject).then(this.wrappResource,_.partial(n.reject,"add-to-library-duplicity")).then(_.partial(n.resolve,i+"s"))}else n.reject();return n.promise()},s.prototype.ensureUniquenes=function(e,t){var n=_.partial(this.handlers[e].isSameModel,t),r=$.Deferred();return this.libraryFactory.get(e+"s").then((function(o){_.any(_.pluck(o,"data"),n)?r.reject():r.resolve(e,t)})),r.promise()},s.prototype.wrappResource=function(e,t){return{order:0,type:e.charAt(0).toUpperCase()+e.slice(1),data:t}},t.exports=new s},{"../../facade/design/design":47,"../../utils/advice":607,"../library":128,"./populator/color":139,"./populator/icon":140,"./populator/image":141,"./populator/logo":142,"./populator/text":143,"./populator/video":144,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883}],136:[function(e,t,n){"use strict";var r=e("../images");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"logos/"+this.id:"logos")},parse:function(e){var t=e.data.source||"";return e.data.tab=r.getVersionUrl(t,"tab"),e.data.web=r.getVersionUrl(t,"web"),e.data.thumb=r.getVersionUrl(t,"thumb"),e.data.mobile=r.getVersionUrl(t,"mobile"),e.data.largeweb=r.getVersionUrl(t,"largeweb"),e.data.original=t,r.setImagesData({version:e.data},"library",r.defaultAmazonDataNames),e}})},{"../images":127}],137:[function(e,t,n){"use strict";t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"contents/"+this.id:"contents")}})},{}],138:[function(e,t,n){"use strict";var r=e("./color-model");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"palettes/"+this.id:"palettes")},parse:function(e){return _.each(e.data.colors,r.prototype.parse),e}})},{"./color-model":129}],139:[function(e,t,n){"use strict";t.exports={getNewItem:function(e){var t=$.Deferred();return t.resolve({color_code:e.color_code}),t.promise()},isSameModel:function(e,t){return e.palette===t.palette&&e.color_code.toLowerCase()===t.color_code.toLowerCase()}}},{}],140:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.concat.js");var r=e("../../../ui/tool-menu/components/mixins/file-content-uploader"),o=e("../../../ui/tool-menu/components/thumbnail/upload"),i=e("../../library").instance;t.exports=_.extend({getNewItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$.Deferred();return n?r.resolve({type:e.is_vector?2:1,source:e.thumb_src}):this.procesSVGResource(r,t),r.promise()},procesSVGResource:function(e,t){var n=this.generateSVGFile(t);this.initUpload(),this.uploadFileContent(n,{type:"image/svg+xml;charset=utf-8"}),$(document).one("file-content-upload:error",e.reject),$(document).one("file-content-upload:complete",(function(n,r,o){e.resolve({type:2,source:r,name:o,is_banner:!!$(t).find(">.textarea").length})}))},generateSVGFile:function(e){var t=svgedit.utilities.getBBox(e),n=Math.floor4(t.x),r=Math.floor4(t.y),o=Math.floor4(t.width),i=Math.floor4(t.height),s='viewBox="'.concat(n," ").concat(r," ").concat(o," ").concat(i,'"'),a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" charset="utf-8"';return a+=' height="'.concat(i,'" width="').concat(o,'" x="0" y="0" ').concat(s,">\n"),a+=INKIVE.Helpers.serializeToString(e)+"\n</svg>"},isSameModel:function(e,t){return e.type===t.type&&e.source===t.source},initUpload:function(){this.uploadPath=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"/company/assets/"+function(e,t){t=t||2;var n="0000000000000000"+e;return n.substr(n.length-t)}(i.companyData.id,10)+"/"+this.getType():"/library/"+INKIVE.C.USER.id+"/"+this.getType(),_.bindAll(this,"complete","errorEvent","getUploadKey","completeEvent","uploadFileContent"),this._addUploadThumbnail(),this.initializeUpload()},getType:function(){return"icon"},_addUploadThumbnail:function(){this.$el=$("body"),this.$el.append($('<ul class="uploader-wrapper hidden"></ul>'));var e=this.$el.find(".uploader-wrapper");this.$uploaderThumbnail=$("<div></div>").addClass("thumbnail uploader"),e.append(this.$uploaderThumbnail),this.views={},this.views.uploadThumbnail=new o({el:this.$uploaderThumbnail})}},r)},{"../../../ui/tool-menu/components/mixins/file-content-uploader":333,"../../../ui/tool-menu/components/thumbnail/upload":393,"../../library":128,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859}],141:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("../../../facade/design/setters/image"),o=e("../../../facade/design/design"),i=e("../../images");t.exports={maxAttempts:10,attemptDelayInMs:500,getNewItem:function(e){var t=$.Deferred();return this.resolveAttempt(e,t),t.promise()},isSameModel:function(e,t){var n=i.getOriginalUrl(e.source),r=i.getOriginalUrl(t.source);return(n=INKIVE.Helpers.getCORSSecureUrl(n))===(r=INKIVE.Helpers.getCORSSecureUrl(r))},resolveAttempt:function(e,t,n){n=n||1,r.prototype.isExternal(e)?(1===n&&this.addExternalImageLoadingHint(),n<this.maxAttempts?function(){this.waitForExternalImage(n).then(_.bind((function(){this.resolveAttempt(o.get(e.id),t,n+1)}),this))}.call(this):t.reject()):t.resolve({type:1,source:e.source.url})},addExternalImageLoadingHint:function(){$(".modalWrapper .modal.alert").find("p").append('<br/><b style="font-weight: 400">'+INKIVE.TranslateHelper.translate("advice.content.uploading_images_save")+"</b>")},waitForExternalImage:function(e){var t=$.Deferred();return _.defer(t.resolve,e*this.attemptDelayInMs),t.promise()}}},{"../../../facade/design/design":47,"../../../facade/design/setters/image":73,"../../images":127,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],142:[function(e,t,n){"use strict";t.exports=e("./icon")},{"./icon":140}],143:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.string.italics.js");var o=r(e("tinycolor2"));t.exports={getNewItem:function(e){var t=$.Deferred(),n={default_content:e.content,family:e.font.family,weight:"bold"===e.font.weight?800:400,size:e.font.size,italic:"italic"===e.font.style,underline:"underline"===e.decoration,paragraph_spacing:e.spacing.paragraph,first_line_margin:e.spacing.first_line_margin,letter_spacing:e.spacing.letter,word_spacing:e.spacing.word,line_spacing:e.spacing.line,color_code:e.color};return e.stroke.width&&(n.stroke_width=e.stroke.width,n.stroke_color=e.stroke.none,n.stroke_dasharray=e.stroke.dasharray),t.resolve(n),t.promise()},isSameModel:function(e,t){(0,o.default)(e.color_code).toHexString();var n=e.content||e.name||"",r=t.content||t.name||"";return n.trim()===r.trim()&&e.size===t.size&&e.family===t.family&&e.color_code.toLowerCase()===t.color_code.toLowerCase()&&e.italic===t.italic&&e.underline===t.underline}}},{"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.function.name.js":884,"core-js/modules/es.string.italics.js":916,"core-js/modules/es.string.trim.js":929,tinycolor2:1049}],144:[function(e,t,n){"use strict";t.exports={getNewItem:function(e){var t=$.Deferred();return t.resolve({source:e.source}),t.promise()},isSameModel:function(e,t){return e.source===t.source}}},{}],145:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.date.to-json.js"),e("core-js/modules/web.url.to-json.js"),e("core-js/modules/es.function.name.js");var o=r(e("tinycolor2")),i=e("./color-model");t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"texts/"+this.id:"texts")},getServerModel:function(){var e=_(this.attributes).clone(),t=(0,o.default)(e.data.color_code).toRgb();return e.data.color_code=65536*t.b+256*t.g+t.r,e.data.stroke_color&&(t=(0,o.default)(e.data.stroke_color).toRgb(),e.data.stroke_color=65536*t.b+256*t.g+t.r),e},parse:function(e){var t=parseInt(e.data.stroke_color/65536),n=parseInt((e.data.stroke_color-65536*t)/256),r=parseInt(e.data.stroke_color-65536*t-256*n),i=(0,o.default)("rgb("+r+","+n+","+t+")");e.data.stroke_color=i.toHexString();t=parseInt(e.data.color_code/65536),n=parseInt((e.data.color_code-65536*t)/256),r=parseInt(e.data.color_code-65536*t-256*n),i=(0,o.default)("rgb("+r+","+n+","+t+")");return e.data.color_code=i.toHexString(),e},toJSON:function(){var e=Backbone.Model.prototype.toJSON.call(this);return e.data.name=e.data.name||e.data.family,e.data.default_content=e.data.default_content||e.data.name||e.data.family,e},sync:i.prototype.sync})},{"./color-model":129,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.date.to-json.js":881,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/web.url.to-json.js":969,tinycolor2:1049}],146:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("../../video/parseThumbnails"));t.exports=Backbone.Model.extend({url:function(){return this.baseUrl+(this.id?"videos/"+this.id:"videos")},parse:function(e){return e.data=(0,r.default)(e.data),e}})},{"../../video/parseThumbnails":626,"@babel/runtime/helpers/interopRequireDefault":663}],147:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.date.now.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/web.timers.js");var o=r(e("../../helpers/svgToImage")),i=e("../utils/md5"),s=e("../facade/editor/editor"),a=e("../facade/design/design"),l=e("../facade/project/project");function c(){this.data={},this.versions=[],this.defaultSize=344,this.currentPageId=0,_.bindAll(this,"get","addThumbnailVersion","renderCurrentPage"),this.initPreviewListener()}function u(e){var t=l.get("master_bucket"),n="string"==typeof e?l.get("design",{design_id:e}):e;if(t&&n)if(!n.design_id&&n.based_on){var r=l.get("design",{design_id:n.based_on});if(r&&r.design_id)return u(r.design_id)}else if(n.design_id){var o=i(n.design_id||n.based_on);return t+"/"+this.defaultSize+"/"+INKIVE.C.BOOK.id+"/"+o+".jpg?"+n.last_mod}return function(e){var t=new Date;return INKIVE.C.BASE_URL+"design/displaythumbnail/"+INKIVE.C.BOOK.id+"/"+e.page_number+"/110?"+t.getTime()}(n)}function d(e){e.xmlHttp.open("HEAD",e.imageUrl),e.xmlHttp.onreadystatechange=function(){var t,n,r,o,i,s;e.xmlHttp.readyState!==e.xmlHttp.DONE&&e.xmlHttp.readyState!==e.xmlHttp.HEADERS_RECEIVED||(403===e.xmlHttp.status?(0===e.attempts&&(t=e.designId,n=e.user,r=new XMLHttpRequest,o="Basic "+btoa(n.credentials.token+":"+n.credentials.hash),i=INKIVE.C.VIEWER+"untidy-api/generate-jpeg",s="design_id="+t,r.open("POST",i),r.setRequestHeader("Authorization",o),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(s)),e.attempts++,e.attempts<5?setTimeout(d.bind(this,e),2e3):e.deferred.resolve(!1)):e.deferred.resolve())},e.xmlHttp.send()}c.prototype=_.extend({},Backbone.Events),c.prototype.initialize=function(){return this.initializeDeferred||(this.initializeDeferred=$.Deferred(),l.loadPageInfo().then(this.initializeDeferred.resolve),s.on("page.saving",_.bind((function(){this.storeNewSavedVersion=!0,this.renderCurrentPage()}),this)),l.on("design.added",_.bind((function(e){this.data[e.design_id]=null,a.once("template.update.designed",this.renderCurrentPage),a.once("template.update.restricted",this.renderCurrentPage),a.on("image.update",this.renderCurrentPage),_.delay(_.bind((function(){a.off("image.update",this.renderCurrentPage)}),this),1e4)}),this)),l.on("design.copied",_.bind((function(e){this.data[e.design_id]=this.data[e.based_on]}),this))),this.initializeDeferred.promise()},c.prototype.get=function(e){return e=e||INKIVE.Tool._current_design_id,this.data[e]=this.data[e]||u.call(this,e),this.data[e]},c.prototype.notify=function(e){var t=l.get("design",{design_id:e});this.trigger("update",t),this.trigger("update.page."+t.page_number,t),this.trigger("update.design."+t.design_id,t)},c.prototype.renderCurrentPage=function(){var e=this;if(!INKIVE.C.IS_MOBILE_APP&&INKIVE.C.PAGES_PANEL_OPEN){var t=INKIVE.Tool._current_design_id;(0,o.default)(document.getElementById("svgcontent").cloneNode(!0),{pageId:t,height:90,width:160,type:"image/jpeg",quickMode:this.currentPageId===t,notify:!1}).then((function(n){e.data[t]=n,e.storeNewSavedVersion&&e.addThumbnailVersion(n),_.defer(_.bind(e.notify,e,t))})),this.currentPageId=t}},c.prototype.initPreviewListener=function(){var e=this,t=_.debounce((function(){e.renderCurrentPage()}),3e3);INKIVE.History.on("change",t),INKIVE.History.on("undo",t),INKIVE.History.on("redo",t),INKIVE.DesignFacade.on("template.update.template_applied_on_current_page",t)},c.prototype.addThumbnailVersion=function(e){var t={timeStamp:Date.now(),base64:e,designId:INKIVE.Tool._current_design_id};this.storeNewSavedVersion=!1,_.any(this.versions,(function(t){return t.base64===e}))||this.versions.push(t)},c.prototype.checkRenderedImage=function(e){var t=$.Deferred(),n=INKIVE.Tool._current_design_id,r=i(n),o={user:e,designId:n,imageUrl:INKIVE.Helpers.getImageUrl(r,"1754"),attempts:0,xmlHttp:new XMLHttpRequest,deferred:t};return d.call(this,o),t.promise()},t.exports=new c},{"../../helpers/svgToImage":643,"../facade/design/design":47,"../facade/editor/editor":91,"../facade/project/project":113,"../utils/md5":618,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.date.now.js":879,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/web.timers.js":966}],148:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/slicedToArray")),i=r(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.flat.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.function.name.js");var s=r(e("../../../../src/config/constants"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=e("./company").instance,u=e("./desygner-api"),d=e("../ui/tool-menu/placeholders/placeholders");function p(){this.present=!1,this.canEdit={}}p.prototype.init=function(e){var t=this;e=e||{},c.getCompanyData().then((function(n){var r=n||{},o=r.metadata,i=r.features,s=o&&o.placeholders||{},a=i&&i.brand_assets||[];t.canEdit.content=a.includes("placeholders_content"),t.canEdit.style=a.includes("placeholders_brand"),t.canEdit.smartAssets=a.includes("show_smart_assets"),t.present=t.canEdit.content||t.canEdit.smartAssets,t.companyId=n.id,t.getSmartAssets().then((function(n){t.setSmartAssets(n),"function"==typeof e.callback&&e.callback({customPlaceholders:t.present&&s,smartAssets:t.smartAssets})})),t.present&&c.getProjectData().then((function(e){t.customPlaceholders=s,t.hasPlaceHolders=e.has_placeholders,t.upToDate=e.has_placeholders_up_to_date,t.initialSaveValues=l(l({},t.initialSaveValues||{}),{},{customPlaceholders:t.customPlaceholders,hasPlaceHolders:t.hasPlaceHolders,upToDate:t.upToDate}),t.companyId=e.company.id,t.templateId=e.id,t.formatId=e.format,t.addBBoxValues()}))}))},p.prototype.haveChanged=function(){return this.present&&(this.initialSaveValues.hasPlaceHolders!==this.hasPlaceHolders||this.initialSaveValues.upToDate!==this.upToDate)},p.prototype.save=function(e){var t=this;return e=e||{},this.addBBoxValues(),new Promise((function(n){var r="brand/companies/".concat(t.companyId,"/templates/").concat(t.templateId);u.get(r).then((function(o){o.smart_assets=t.getSmartAssetsInUse(),o.has_placeholders=t.hasPlaceHolders,o.has_placeholders_up_to_date=t.upToDate,e.undraft&&(o.is_draft=!1),u.put(r,o).then((function(){t.initialSaveValues.hasPlaceHolders=t.hasPlaceHolders,t.initialSaveValues.upToDate=!0,n()}))}))}))},p.prototype.addBBoxValues=function(){var e=["icon","logo","sticker","shape"];document.querySelectorAll("#svgcontent [custom-placeholder]").forEach((function(t){var n=t.id&&INKIVE.DesignFacade.get(t.id);if(n&&e.includes(n.type)){var r=t.getBBox();t.setAttribute("data-bounding-x",r.x),t.setAttribute("data-bounding-y",r.y),t.setAttribute("data-bounding-width",r.width),t.setAttribute("data-bounding-height",r.height)}}))},p.prototype.getPlaceholdersInUse=function(){return Array.from($("#svgcontent [custom-placeholder]")).map((function(e){return e.getAttribute("custom-placeholder").split(",")})).flat().filter((function(e,t,n){return e&&function(e,t,n){return n.indexOf(e)===t}(e,t,n)&&function(e){for(var t in d)for(var n in d[t])if(d[t][n].data.indexOf(e)>-1)return!1;return!0}(e)}))},p.prototype.getSmartAssetsInUse=function(){var e=this.getPlaceholdersInUse(),t=function(t){return e.find((function(e){return e===t.value}))};return Object.entries(this.initialSaveValues.smartAssets||{}).reduce((function(e,n){var r=(0,o.default)(n,2),s=r[0],a=r[1].filter(t);return a.length?l(l({},e),{},(0,i.default)({},s,a)):e}),{})},p.prototype.getSmartAssets=function(){var e=s.default.smartAssets.types;return Promise.all(e.map(this.fetchSmartAsset.bind(this))).then((function(e){return e.filter((function(e){return e&&Array.isArray(e.data)}))}))},p.prototype.fetchSmartAsset=function(e){var t=this;return new Promise((function(n){var r="brand/companies/".concat(t.companyId,"/assets/").concat(e,"?user_input=true");u.get(r).then((function(t){return n({type:e,data:t})}),n)}))},p.prototype.setSmartAssets=function(e){var t=this;return e.forEach((function(e){var n=e.type,r=e.data;return t.setSmartAsset(n,r)}))},p.prototype.setSmartAsset=function(e,t){this.smartAssets=this.smartAssets||{},function(e,t){t.forEach((function(t){var n,r,o,i,s=t.type.toLocaleLowerCase();e[s]=e[s]||[],e[s].push(l(l({},t),{},{value:t.id,placeholder_name:INKIVE.Helpers.slugify((null===(n=t.smart_asset)||void 0===n||null===(r=n.user_input)||void 0===r?void 0:r.name)||""),name:null===(o=t.smart_asset)||void 0===o||null===(i=o.user_input)||void 0===i?void 0:i.name}))}))}(this.smartAssets,t),this.initialSaveValues=l(l({},this.initialSaveValues||{}),{},{smartAssets:this.smartAssets})},t.exports=new p},{"../../../../src/config/constants":1090,"../ui/tool-menu/placeholders/placeholders":493,"./company":122,"./desygner-api":123,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.flat.js":861,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],149:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/objectWithoutProperties"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.promise.js");var s,a=["id","sticky"],l=["background"],c=e("./company").instance,u=e("./user-info"),d=e("../facade/design/design"),p=e("./restrictions/defaults.json"),h=e("../facade/project/project"),m=e("../facade/restrictions/restrictions"),f=e("../facade/design/setters/restrictions/text"),g=e("./restrictions/default-values/text");function b(){_.bindAll(this,"initialize","initListeners","getElementPermissions","getTemplatePermissions","getTemplatePermissionsType","initSimplifiedPermissions"),this.linkedPermissions={function_animation_file:"function_edit_animation_file"},this.unsavedElementChanges=[],this.unsavedTemplateChanges=[],this.elementOriginalContent={},this.listeners={logo:e("./restrictions/listeners/logo"),icon:e("./restrictions/listeners/logo"),vector:e("./restrictions/listeners/logo"),image:e("./restrictions/listeners/image"),video:e("./restrictions/listeners/video"),background:e("./restrictions/listeners/background")}}b.prototype=_.extend({},Backbone.Events),b.prototype.initialize=_.memoize((function(){var e=this,t=$.Deferred();return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE&&(h.on("design.added",_.bind(n,this)),h.on("design.copied",_.bind(n,this)),h.on("design.removed",_.bind((function(e){r.call(this,e.page_number),this.getElementPermissionsCollection().each((function(t){t.get("page_number")>e.page_number&&(t.set("page_number",t.get("page_number")-1),this.unsavedElementChanges.push(t))}),this)}),this)),d.on("template.update",_.bind((function(){r.call(this,INKIVE.Tool._current_page_number)}),this))),function(){var e=$.Deferred();return u.get().then((function(t){c.setCredentials({username:t.credentials.token,password:t.credentials.hash}),e.resolve()})),e.promise()}().then((function(){if(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE)return c.get(["templates",INKIVE.C.BOOK.encodedId]);return c.get(["designs",INKIVE.C.BOOK.encodedId]).then((function(e){var t=e.template;return t?c.get(["templates",t]):{}}))})).then((function(e){if((s=e).id)return $.when(c.get(["templates",s.id,"templatepermissions"]),c.get(["templates",s.id,"elementpermissions"]));return $.Deferred().resolve()})).then(this.initListeners).then((function(){e.initSimplifiedPermissions().then(t.resolve)})),t.promise();function n(e){this.getElementPermissionsCollection().each((function(t){t.get("page_number")>=e.design_number&&(t.set("page_number",t.get("page_number")+1),this.unsavedElementChanges.push(t))}),this)}function r(e){this.getElementPermissionsCollection().each((function(t){t.get("page_number")===e&&(this.unsavedElementChanges=_.without(this.unsavedElementChanges,t),_.defer((function(){t.destroy()})))}),this)}})),b.prototype.initListeners=function(){var e=$.Deferred();return _.each(this.listeners,(function(e){e.initialize(this)}),this),s.id&&t.call(this),e.resolve.apply(e,arguments),e.promise();function t(){this.getElementPermissionsCollection().chain().filter(n).each(this.refreshListener,this)}function n(e){return e.get("page_number")===INKIVE.Tool._current_page_number}},b.prototype.refreshListener=function(e){var t=e.get("element_id"),n="background"===t?"background":m.getElementType($("#"+t)[0]);this.listeners[n]&&this.listeners[n].refresh(e)},b.prototype.getTemplatePermissionsCollection=function(){return c.getContainer("templates",s.id,"templatepermissions")},b.prototype.getElementPermissionsCollection=function(){return c.getContainer("templates",s.id,"elementpermissions")},b.prototype.getTemplatePermissions=function(){return this.initialize().then((function(){return c.get(["templates",s.id,"templatepermissions"])}))},b.prototype.getTemplatePermissionsType=function(e){var t=["loose","moderate","tight","simplified"],n=(e.id,e.sticky,(0,i.default)(e,a));delete n.static;for(var r=0,o=t;r<o.length;r++){var s=o[r],c=this.getDefaultsByType(s),u=(c.background,(0,i.default)(c,l));if(INKIVE.Helpers.isShallowEqual(n,u))return s}return t[0]},b.prototype.getElementPermissions=function(){return this.initialize().then((function(){return c.get(["templates",s.id,"elementpermissions"])}))},b.prototype.createGlobalTemplateRestriction=function(e){var t=this,n=this.getDefaultsByType(e),r=$.Deferred(),i=this.getTemplatePermissionsCollection().find((function(e){return!e.get("group")}));i&&i.destroy();var a=[this.getTemplatePermissionsCollection().create(_.extend(_.omit(n,"background"),{template:s.id}))].concat((0,o.default)(Array.from({length:INKIVE.C.BOOK.num_pages},(function(e,r){return t.getElementPermissionsCollection().create({page_number:r+1,element_id:"background",template:s.id,restrictions:JSON.stringify(n.background)})})))),l=_.bind(r.resolve,this,a[0]);return l=_.after(a.length,l),_.each(a,(function(e){e.on("change:id",l)})),r.promise()},b.prototype.setGlobalTemplateRestriction=function(e,t){var n=this,r=$.Deferred();return function(){var e=this.getTemplatePermissionsCollection().find((function(e){return!e.get("group")}));if(e){var t=$.Deferred();return t.resolve(e),t.promise()}return this.createGlobalTemplateRestriction()}.call(this).then((function(o){var i=n.linkedPermissions[e];return i&&!t&&o.set(i,!1),o.set(e,t),n.storeTemplateChange(o),r.resolve()})),r.promise()},b.prototype.getGlobalRestrictionElementPermissions=function(e,t){var n=this,r=$.Deferred();return this.initialize().then((function(){var i=n.getElementPermissionsCollection().find((function(t){return!t.get("group")&&t.get("page_number")===INKIVE.Tool._current_page_number&&t.get("element_id")===e}));i?r.resolve(i):t?o.call(n,r):r.resolve(null)})),r.promise();function o(n){var r=this.getElementPermissionsCollection().create({page_number:INKIVE.Tool._current_page_number,element_id:e,template:s.id,restrictions:t});r.on("change:id",_.bind(n.resolve,this,r))}},b.prototype.setGlobalRestrictionName=function(e,t){var n=$.Deferred();return this.getGlobalRestrictionElementPermissions(e).then(_.bind((function(e){e&&(e.set("name",t),this.storeElementChange(e)),n.resolve()}),this)),n.promise()},b.prototype.setGlobalElementRestriction=function(e,t){var n=$.Deferred();return this.getGlobalRestrictionElementPermissions(e,t).then(_.bind((function(r){r&&(r.set("restrictions",t),this.storeElementChange(r),this.setElementContent(e,t)),n.resolve()}),this)),n.promise()},b.prototype.setElementContent=function(e,t){var n=d.get(e);if(t&&n&&"text"===n.type){var r=n.content,o=JSON.parse(t);if(f.contentCompliesWithRestrictions(r,o))return;this.elementOriginalContent[e]||(this.elementOriginalContent[e]=r);var i=g.getDefaultRestrictionValue(o);i||(i=this.elementOriginalContent[e],delete this.elementOriginalContent[e]),i&&i!==r&&INKIVE.DesignFacade.set(e,{content:i.toString()})}},b.prototype.storeElementChange=function(e){var t=e.get("group"),n=e.get("element_id"),r=e.get("restrictions")&&_.size(JSON.parse(e.get("restrictions")));(function(){this.getElementPermissionsCollection().each((function(r){r!==e&&r.get("page_number")===INKIVE.Tool._current_page_number&&r.get("element_id")===n&&r.get("group")===t&&(this.unsavedElementChanges=_.without(this.unsavedElementChanges,r),_.defer(_.bind((function(){r.set("restrictions",null),this.refreshListener(r),r.destroy()}),this)))}),this)}).call(this),this.unsavedElementChanges=_.without(this.unsavedElementChanges,e),this.refreshListener(e),r&&this.unsavedElementChanges.push(e),r||e.destroy()},b.prototype.storeTemplateChange=function(e){var t=e.get("group");(function(){this.getTemplatePermissionsCollection().each((function(n){n.get("group")===t&&n!==e&&(this.unsavedTemplateChanges=_.without(this.unsavedTemplateChanges,n),_.defer((function(){n.destroy()})))}))}).call(this),this.unsavedTemplateChanges=_.without(this.unsavedTemplateChanges,e),this.unsavedTemplateChanges.push(e)},b.prototype.isAllSaved=function(e){return!this.unsavedElementChanges.length&&!this.unsavedTemplateChanges.length},b.prototype.save=function(e){if(!(this.unsavedElementChanges.length||this.unsavedTemplateChanges.length)){var t=$.Deferred();return t.resolve(),t.promise()}for(var n=[];this.unsavedElementChanges.length;)n.push(this.unsavedElementChanges.pop().save());for(;this.unsavedTemplateChanges.length;)n.push(this.unsavedTemplateChanges.pop().save());return $.when.apply($,n)},b.prototype.getDefaultsByType=function(e){switch(e){case"simplified":return p.simplified;case"tight":return p.tight;case"moderate":return p.moderate;case"loose":default:return p.loose}},b.prototype.removeAll=function(){function e(e){_.defer((function(){e.destroy()}))}this.getTemplatePermissionsCollection().each(e),this.getElementPermissionsCollection().each(e),this.unsavedElementChanges=[]},b.prototype.copyRestrictions=function(e){var t=_.bind(this.setGlobalElementRestriction,this);return this.getElementPermissions().then((function n(r){if(_.size(r)){var o=r.pop();return o.page_number===e?t(o.element_id,o.restrictions).then(_.partial(n,r)):n(r)}var i=$.Deferred();return i.resolve(),i.promise()}))},b.prototype.initSimplifiedPermissions=function(){var e=this;return new Promise((function(t){INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.TEMPLATE?t():c.getCompanyData().then((function(n){"pro_team"===n.subscription_plan&&(INKIVE.Menus.showSimplifiedRestrictions=!0,e.getTemplatePermissions().then((function(t){t.length||e.createGlobalTemplateRestriction("simplified")}))),t()}))}))};var v=new b;t.exports=v},{"../facade/design/design":47,"../facade/design/setters/restrictions/text":75,"../facade/project/project":113,"../facade/restrictions/restrictions":118,"./company":122,"./restrictions/default-values/text":150,"./restrictions/defaults.json":151,"./restrictions/listeners/background":152,"./restrictions/listeners/image":153,"./restrictions/listeners/logo":154,"./restrictions/listeners/video":155,"./user-info":161,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/objectWithoutProperties":670,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.from.js":863,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.iterator.js":917}],150:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.date.to-string.js"),t.exports={DEFAULT_NUMBER:123456,DEFAULT_CURRENCY:99.9,DEFAULT_EMAIL:"email@domain.com",getDefaultRestrictionValue:function(e,t){var n;if(e.numeric)n=e.numeric.min?e.numeric.min:this.DEFAULT_NUMBER;else if(e.dictionary){$(".restrictions").find('[data-name="dictionary"]').find(".bootstrap-tagsinput>input").val(_.contains(e.dictionary.list,t)?"":t)}else e.date?(n=e.date.daterange?e.date.daterange.start:moment(new Date).format("MM/DD/YY"),e.date.dateformat&&(n=moment(n,"MM/DD/YY").format(e.date.dateformat))):e.currencies?(n=e.currencies.min?e.currencies.min:e.currencies.max?e.currencies.max:this.DEFAULT_CURRENCY,e.currencies.currency&&(n=e.currencies.currency+n)):e.email&&(n=this.DEFAULT_EMAIL);return n}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.date.to-string.js":882}],151:[function(e,t,n){t.exports={tight:{background:{opacity:!1,basic:{image:!1,color:!1},background_bg_removal:!1},function_add_page:!1,function_change_page_order:!1,function_draw:!1,function_download_file:!0,function_print_file:!0,function_share_file:!0,function_animation_file:!1,function_edit_animation_file:!0,function_request_download_file:!0,function_request_print_file:!0,function_request_share_file:!0,function_use_asset_background:!0,function_use_asset_images:!0,function_use_asset_logo:!0,function_use_asset_vector:!0,function_use_asset_colors:!0,function_use_desygner_font:!0,function_use_desygner_background:!1,function_use_desygner_vector:!1,function_use_own_images:!1,function_use_web_background:!1,function_use_web_images:!1,image_add:!1,image_content:!1,image_crop:!1,image_deletion:!1,image_duplication:!1,image_filter:!1,image_opacity:!1,image_position:!1,image_rotation:!1,image_size:!1,image_z_index:!1,text_add:!1,text_alignment:!1,text_change_content:!1,text_colour:!1,text_decoration:!1,text_deletion:!1,text_duplication:!1,text_font_family:!1,text_font_size:!1,text_highlight:!1,text_opacity:!1,text_position:!1,text_rotation:!1,text_size:!1,text_spacing:!1,text_z_index:!1,table_add:!1,table_edit:!1,table_content:!1,table_position:!1,table_rotation:!1,table_z_index:!1,table_duplication:!1,table_deletion:!1,table_size:!1,table_resize:!1,table_merge_split:!1,table_row_column:!1,table_object_style:!1,table_object_color:!1,table_text_style:!1,table_text_color:!1,table_opacity:!1,vector_add:!1,vector_replace:!1,vector_colour:!1,vector_deletion:!1,vector_duplication:!1,vector_opacity:!1,vector_position:!1,vector_rotation:!1,vector_size:!1,vector_stroke:!1,vector_z_index:!1,logo_size:!1,logo_opacity:!1,logo_colour:!1,logo_deletion:!1,logo_duplication:!1,logo_rotation:!1,logo_position:!1,logo_z_index:!1,logo_stroke:!1,logo_add:!1,logo_replace:!1,icon_size:!1,icon_opacity:!1,icon_colour:!1,icon_deletion:!1,icon_duplication:!1,icon_rotation:!1,icon_position:!1,icon_z_index:!1,icon_stroke:!1,icon_add:!1,icon_replace:!1,video_add:!1,video_deletion:!1,video_duplication:!1,video_flags:!1,video_position:!1,video_replace:!1,video_size:!1,video_rotation:!1},moderate:{background:{opacity:!1,basic:{image:!0,color:!0},background_bg_removal:!1},function_add_page:!1,function_change_page_order:!1,function_draw:!0,function_download_file:!0,function_print_file:!0,function_share_file:!0,function_animation_file:!0,function_edit_animation_file:!0,function_request_download_file:!0,function_request_print_file:!0,function_request_share_file:!0,function_use_asset_background:!0,function_use_asset_images:!0,function_use_asset_logo:!0,function_use_asset_vector:!0,function_use_asset_colors:!0,function_use_desygner_font:!0,function_use_desygner_background:!0,function_use_desygner_vector:!0,function_use_own_images:!0,function_use_web_background:!0,function_use_web_images:!0,image_add:!0,image_content:!0,image_crop:!0,image_deletion:!1,image_duplication:!1,image_filter:!1,image_opacity:!1,image_position:!1,image_rotation:!1,image_size:!1,image_z_index:!1,text_add:!0,text_alignment:!1,text_change_content:!0,text_colour:!1,text_decoration:!1,text_deletion:!1,text_duplication:!1,text_font_family:!1,text_font_size:!1,text_highlight:!1,text_opacity:!1,text_position:!1,text_rotation:!1,text_size:!0,text_spacing:!1,text_z_index:!1,table_add:!1,table_edit:!0,table_content:!0,table_position:!1,table_rotation:!1,table_z_index:!1,table_duplication:!1,table_deletion:!1,table_size:!0,table_resize:!0,table_merge_split:!1,table_row_column:!1,table_object_style:!1,table_object_color:!1,table_text_style:!1,table_text_color:!1,table_opacity:!1,vector_add:!0,vector_replace:!1,vector_colour:!1,vector_deletion:!1,vector_duplication:!1,vector_opacity:!1,vector_position:!1,vector_rotation:!1,vector_size:!1,vector_stroke:!1,vector_z_index:!1,logo_size:!1,logo_opacity:!1,logo_colour:!1,logo_deletion:!0,logo_duplication:!1,logo_rotation:!1,logo_position:!1,logo_z_index:!1,logo_stroke:!1,logo_add:!0,logo_replace:!1,icon_size:!1,icon_opacity:!1,icon_colour:!1,icon_deletion:!0,icon_duplication:!1,icon_rotation:!1,icon_position:!1,icon_z_index:!1,icon_stroke:!1,icon_add:!0,icon_replace:!1,video_add:!0,video_deletion:!0,video_duplication:!1,video_flags:!1,video_position:!0,video_replace:!1,video_size:!0,video_rotation:!1},loose:{background:{opacity:!0,basic:{image:!0,color:!0},background_bg_removal:!0},function_add_page:!0,function_change_page_order:!0,function_draw:!0,function_download_file:!0,function_print_file:!0,function_share_file:!0,function_animation_file:!0,function_edit_animation_file:!0,function_request_download_file:!1,function_request_print_file:!1,function_request_share_file:!1,function_use_asset_background:!0,function_use_asset_images:!0,function_use_asset_logo:!0,function_use_asset_vector:!0,function_use_asset_colors:!0,function_use_desygner_font:!0,function_use_desygner_background:!0,function_use_desygner_vector:!0,function_use_own_images:!0,function_use_web_background:!0,function_use_web_images:!0,image_add:!0,image_content:!0,image_crop:!0,image_deletion:!0,image_duplication:!0,image_filter:!0,image_opacity:!0,image_position:!0,image_rotation:!0,image_size:!0,image_z_index:!0,text_add:!0,text_alignment:!0,text_change_content:!0,text_colour:!0,text_decoration:!0,text_deletion:!0,text_duplication:!0,text_font_family:!0,text_font_size:!0,text_highlight:!0,text_opacity:!0,text_position:!0,text_rotation:!0,text_size:!0,text_spacing:!0,text_z_index:!0,table_add:!0,table_edit:!0,table_content:!0,table_position:!0,table_rotation:!0,table_z_index:!0,table_duplication:!0,table_deletion:!0,table_size:!0,table_resize:!0,table_merge_split:!0,table_row_column:!0,table_object_style:!0,table_object_color:!0,table_text_style:!0,table_text_color:!0,table_opacity:!0,vector_add:!0,vector_replace:!0,vector_colour:!0,vector_deletion:!0,vector_duplication:!0,vector_opacity:!0,vector_position:!0,vector_rotation:!0,vector_size:!0,vector_stroke:!0,vector_z_index:!0,logo_size:!0,logo_opacity:!0,logo_colour:!1,logo_deletion:!0,logo_duplication:!0,logo_rotation:!0,logo_position:!0,logo_z_index:!0,logo_stroke:!1,logo_add:!0,logo_replace:!0,icon_size:!0,icon_opacity:!0,icon_colour:!0,icon_deletion:!0,icon_duplication:!0,icon_rotation:!0,icon_position:!0,icon_z_index:!0,icon_stroke:!0,icon_add:!0,icon_replace:!0,video_add:!0,video_deletion:!0,video_duplication:!0,video_flags:!0,video_position:!0,video_replace:!0,video_size:!0,video_rotation:!0},simplified:{background:{opacity:!0,basic:{image:!0,color:!0},background_bg_removal:!0},function_add_page:!0,function_change_page_order:!0,function_draw:!0,function_download_file:!0,function_print_file:!0,function_share_file:!0,function_animation_file:!0,function_edit_animation_file:!0,function_request_download_file:!0,function_request_print_file:!0,function_request_share_file:!0,function_use_asset_background:!0,function_use_asset_images:!0,function_use_asset_logo:!0,function_use_asset_vector:!0,function_use_asset_colors:!0,function_use_desygner_font:!0,function_use_desygner_background:!0,function_use_desygner_vector:!0,function_use_own_images:!0,function_use_web_background:!0,function_use_web_images:!0,image_add:!0,image_content:!0,image_crop:!0,image_deletion:!0,image_duplication:!0,image_filter:!0,image_opacity:!0,image_position:!0,image_rotation:!0,image_size:!0,image_z_index:!1,text_add:!0,text_alignment:!0,text_change_content:!0,text_colour:!0,text_decoration:!0,text_deletion:!0,text_duplication:!0,text_font_family:!0,text_font_size:!0,text_highlight:!0,text_opacity:!0,text_position:!0,text_rotation:!0,text_size:!0,text_spacing:!0,text_z_index:!1,vector_add:!0,vector_colour:!0,vector_deletion:!0,vector_duplication:!0,vector_opacity:!0,vector_replace:!0,vector_position:!0,vector_rotation:!0,vector_size:!0,vector_stroke:!0,vector_z_index:!1,logo_size:!0,logo_opacity:!0,logo_colour:!1,logo_deletion:!0,logo_duplication:!0,logo_rotation:!0,logo_position:!0,logo_z_index:!1,logo_stroke:!1,logo_add:!0,logo_replace:!0,icon_size:!0,icon_opacity:!0,icon_colour:!0,icon_deletion:!0,icon_duplication:!0,icon_rotation:!0,icon_position:!0,icon_z_index:!1,icon_stroke:!0,icon_add:!0,icon_replace:!0,video_add:!0,video_deletion:!0,video_duplication:!0,video_flags:!0,video_position:!0,video_replace:!0,video_size:!0,video_rotation:!0}}},{}],152:[function(e,t,n){"use strict";var r=e("../../../facade/design/design"),o=e("../../images");t.exports={sourceListener:null,colorListener:null,initialize:function(e){_.bindAll(this,"onNewColor","onNewSource"),this.restrictionsFactory=e,this.canvas=INKIVE.Tool.getInstance().editor.canvas},refresh:function(e){var t=JSON.parse(e.get("restrictions")||"{}");t.images&&t.images.list?this.sourceListener||this.addSourceListener(e):this.sourceListener&&this.removeSourceListener(),t.colors&&t.colors.list?this.colorListener||this.addColorListener(e):this.colorListener&&this.removeColorListener()},removeSourceListener:function(){this.sourceListener=null,r.off("background.update.source.loaded",this.onNewSource)},addSourceListener:function(e){this.sourceListener=e,r.on("background.update.source.loaded",this.onNewSource)},removeColorListener:function(){this.colorListener=null,r.off("background.update.color",this.onNewColor)},addColorListener:function(e){this.colorListener=e,r.on("background.update.color",this.onNewColor)},onNewColor:function(e){var t=e.color,n=JSON.parse(this.colorListener.get("restrictions")||"{}");n.colors&&n.colors.list?_(n.colors.list).contains(t)||(this.canvas.call("advice.show","color-restriction-applied"),n.colors.list.push(t),this.restrictionsFactory.setGlobalElementRestriction("background",JSON.stringify(n))):this.colorListener&&this.removeSourceListener(elementId)},onNewSource:function(e){var t=o.getVersionUrl(e.source,"thumb"),n=JSON.parse(this.sourceListener.get("restrictions")||"{}");n.images&&n.images.list?_(n.images.list).contains(t)||(this.canvas.call("advice.show","source-restriction-applied"),n.images.list.push(t),this.restrictionsFactory.setGlobalElementRestriction("background",JSON.stringify(n))):this.sourceListener&&this.removeSourceListener(elementId)}}},{"../../../facade/design/design":47,"../../images":127}],153:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.map.js");var o=r(e("../../../facade/design/design")),i=r(e("../../images"));t.exports={listeners:{},initialize:function(e){_.bindAll(this,"onNewSource"),this.restrictionsFactory=e,this.canvas=INKIVE.Tool.getInstance().editor.canvas},refresh:function(e){var t=JSON.parse(e.get("restrictions")||"{}"),n=e.get("element_id");t.source&&t.source.list?this.listeners[n]||this.addListener(n,e):this.listeners[n]&&this.removeListener(n)},removeListener:function(e){this.listeners=_.omit(this.listeners,e),o.default.off(e+".source.url",this.onNewSource)},addListener:function(e,t){this.listeners[e]=t,o.default.on(e+".source",this.onNewSource)},onNewSource:function(e){var t,n=e.id,r=i.default.getVersionUrl(e.source.url,"thumb")||e.source.url.replace("/original/","/thumb/"),o=JSON.parse((null===(t=this.listeners[n])||void 0===t?void 0:t.get("restrictions"))||"{}");o.source&&o.source.list?o.source.list.map((function(e){return i.default.getVersionUrl(e,"thumb")})).includes(r)||(this.canvas.call("advice.show","source-restriction-applied"),o.source.list.push(r),this.restrictionsFactory.setGlobalElementRestriction(n,JSON.stringify(o))):this.listeners[n]&&this.removeListener(n)}}},{"../../../facade/design/design":47,"../../images":127,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.replace.js":924}],154:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../../facade/design/design");t.exports={listeners:{},initialize:function(e){_.bindAll(this,"onNewSource"),this.restrictionsFactory=e,this.canvas=INKIVE.Tool.getInstance().editor.canvas},refresh:function(e){var t=JSON.parse(e.get("restrictions")||"{}"),n=e.get("element_id");t.source&&t.source.list?this.listeners[n]||this.addListener(n,e):this.listeners[n]&&this.removeListener(n)},removeListener:function(e){this.listeners=_.omit(this.listeners,e),r.off(e+".thumb_src",this.onNewSource)},addListener:function(e,t){this.listeners[e]=t,r.on(e+".thumb_src",this.onNewSource)},onNewSource:function(e){var t=JSON.parse(this.listeners[e.id].get("restrictions")||"{}");t.source&&t.source.list?_(t.source.list).find((function(t){return t.thumb_src==e.thumb_src}))||(this.canvas.call("advice.show","source-restriction-applied"),t.source.list.push({thumb_src:e.thumb_src,is_vector:e.is_vector,sticker_id:e.sticker_id}),this.restrictionsFactory.setGlobalElementRestriction(e.id,JSON.stringify(t))):this.listeners[elementId]&&this.removeListener(elementId)}}},{"../../../facade/design/design":47,"core-js/modules/es.array.find.js":859}],155:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../../facade/design/design");t.exports={listeners:{},initialize:function(e){_.bindAll(this,"onNewSource"),this.restrictionsFactory=e,this.canvas=INKIVE.Tool.getInstance().editor.canvas},refresh:function(e){var t=JSON.parse(e.get("restrictions")||"{}"),n=e.get("element_id");t.source&&t.source.list?this.listeners[n]||this.addListener(n,e):this.listeners[n]&&this.removeListener(n)},removeListener:function(e){this.listeners=_.omit(this.listeners,e),r.off(e+".resolution_optimized",this.onNewSource)},addListener:function(e,t){this.listeners[e]=t,r.on(e+".resolution_optimized",this.onNewSource)},onNewSource:function(e){var t=JSON.parse(this.listeners[e.id].get("restrictions")||"{}");t.source&&t.source.list?t.source.list.find((function(t){return t.source===e.source}))||(this.canvas.call("advice.show","source-restriction-applied"),t.source.list.push({thumbnail:e.thumbnail,source:e.source}),this.restrictionsFactory.setGlobalElementRestriction(e.id,JSON.stringify(t)),this.canvas.selectOnly([$("#"+e.id)[0]])):this.listeners[e.id]&&this.removeListener(e.id)}}},{"../../../facade/design/design":47,"core-js/modules/es.array.find.js":859}],156:[function(e,t,n){"use strict";e("core-js/modules/es.function.name.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.bind.js");var r=e("./api");function o(){this.resource="inkiveeditor/updateSettings",this.baseUrl=INKIVE.C.BASE_URL}o.prototype=new r,o.prototype.set=function(e){var t=$.Deferred();return e=_.extend({name:Base64.decode(INKIVE.C.BOOK.name),description:Base64.decode(INKIVE.C.BOOK.description),category:INKIVE.C.BOOK.category,security:INKIVE.C.BOOK.security},e),this.data?t.resolve(this.data):this.api(this.resource,{idInkive:INKIVE.C.BOOK.id,data:_.map(e,(function(e,t){return{name:t,value:e}}))}).then(_.bind((function(){var n=["name","description"];_.each(e,(function(e,t){INKIVE.C.BOOK[t]=_.contains(n,t)?Base64.encode(e):e})),this.trigger("update"),t.resolve()}),this),(function(e){t.reject(e+" | API Init error")})),t.promise()},t.exports=new o},{"./api":120,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932}],157:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.fill.js");var r=e("../modules/shapelib/basic.json");function o(){_.bindAll(this,"initialize","getCategories","get"),this.categories=[{key:"basic",icon:"fa fa-square-o"},{key:"animal",icon:"fa fa-bug"},{key:"arrow",icon:"fa fa-arrows"},{key:"dialog_balloon",icon:"fa fa-comments-o"},{key:"electronics",icon:"fa fa-microphone"},{key:"flowchart",icon:"fa fa-sitemap"},{key:"game",icon:"fa fa-gamepad"},{key:"math",icon:"fa fa-superscript"},{key:"misc",icon:"fa fa-fire-extinguisher"},{key:"music",icon:"fa fa-music"},{key:"object",icon:"fa fa-lightbulb-o"},{key:"symbol",icon:"fa fa-plus-square-o"},{key:"web",icon:"fa fa-rss"}]}o.prototype=_.extend({},Backbone.Events),o.prototype.initialize=_.memoize((function(){var e=$.Deferred(),t=INKIVE.TranslateHelper.translate;return INKIVE.TranslateHelper.load().then(_.bind((function(){this.data={basic:this.mapResult("basic",r)},_.each(this.categories,(function(e){e.name=t("shapes.category."+e.key)})),e.resolve()}),this)),e.promise()})),o.prototype.getCategories=function(){var e=$.Deferred();return this.initialize().then(_.bind((function(){e.resolve(this.categories)}),this)),e.promise()},o.prototype.get=function(e,t){var n=$.Deferred();return e=void 0===e?0:e,this.getCategories().then(_.bind((function(r){var o=r[e]||_.find(r,{key:e});this._getCategory(o).then((function(e){var r=void 0===t;if(r&&n.resolve(e),!r){var o=e[t]||_.find(e,{key:t});n.resolve(o)}}))}),this)),n.promise()},o.prototype._getCategory=function(e){var t=$.Deferred(),n=INKIVE.C.BASE_URL+"assets/js/editor/modules/shapelib/"+e.key+".json";return this.data[e.key]&&t.resolve(this.data[e.key]),this.data[e.key]||$.getJSON(n,_.bind((function(n){this.data[e.key]=this.mapResult(e.key,n),t.resolve(this.data[e.key])}),this)),t.promise()},o.prototype.mapResult=function(e,t){INKIVE.TranslateHelper.translate;return _.map(t.data,(function(e){return _.extend({fill:t.fill||!1,size:t.size||300},e)}))},t.exports=new o},{"../modules/shapelib/basic.json":180,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],158:[function(e,t,n){"use strict";var r,o;e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js");var i={},s=INKIVE.C.IS_DEV?INKIVE.C.BASE_URL+"assets/build/swearing/swearing.":"https://static.inkive.com/assets/build/"+INKIVE.C.VERSION+"/swearing/swearing.",a={ar:[],az:[],cs:[],de:["de"],dv:[],en:["en"],es:["es"],fa:[],fr:["fr"],gr:[],hu:[],it:["it"],lt:[],lv:[],my:[],mk:[],nl:["nl"],pl:[],pt:["pt"],ro:[],ru:["ru"],sk:[],sr:[],tr:[],uk:[],vn:[]};function l(e){return o.indexOf(c(e))>-1}function c(e){var t={custom:{4:"a","@":"a",3:"e","|":"i","!":"i","¡":"i",0:"o","ø":"o","+":"t",7:"t",2:"s",5:"2",$:"s","ß":"b","©":"c","¢":"c","®":"r"}};return r&&(t.lang=r),getSlug(e,t)}function u(e){return $.get(s+e+".json?"+INKIVE.C.VERSION)}t.exports={matchSwearing:function(e,t){return e=_.isArray(e)?e:[e],_.any(e,(function(e){return r=function(e){var t;return _.any(a,(function(n,r){return!!_(n).contains(e)&&(t=r)})),t}(e),o=c(t),_.any(i[e],l)}))},preloadSweringLists:function(e){e=_.isArray(e)?e:[e];var t=$.Deferred(),n=_(e).filter((function(e){return!i[e]}));return n.length?$.when.apply($,_(n).map(u)).then((function(){var e=_.toArray(arguments);_.each(n,(function(t,r){i[t]=1===n.length?e[0].badwords:e[r][0].badwords})),t.resolve()})):t.resolve(),t.promise()}}},{"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870}],159:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("./user-info")),c=e("./uppy/translations"),u=function(){function e(t){(0,s.default)(this,e),this.id=t.id,this.button=t.button,this.loadtype=t.loadtype,this.restrictions=t.restrictions,this.serverUrl=t.serverUrl||INKIVE.C.uppy_companion_url,this.onFileUploaded=t.onFileUploaded||function(){},this.onUppyInitialized=t.onUppyInitialized||function(){},this.providers=["GoogleDrive","Dropbox"],this._awaitMeta=0}var t;return(0,a.default)(e,[{key:"importUppyScript",value:function(){return new Promise((function(e){if(document.getElementById("uppy-stylesheet"))e(window.Uppy);else{var t=document.createElement("link");document.getElementsByTagName("head")[0].appendChild(t),t.rel="stylesheet",t.type="text/css",t.id="uppy-stylesheet",t.href="https://releases.transloadit.com/uppy/v2.1.1/uppy.min.css",$.getScript("https://releases.transloadit.com/uppy/v2.1.1/uppy.min.js").then((function(){e(window.Uppy)}))}}))}},{key:"initUppyManager",value:(t=(0,i.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.importUppyScript();case 2:this.Uppy=e.sent,this.uppy=new this.Uppy.Core({id:this.id,debug:!1,autoProceed:!1,onBeforeUpload:function(e){return t._setFilesPath(e)},locale:{strings:(0,c.getUppyCoreTranslations)(INKIVE.TranslateHelper.translate)}}),this._setRestrictions(this.restrictions),this.uppy.on("file-added",function(){var e=(0,i.default)(o.default.mark((function e(n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isVideo(n.type)){e.next=6;break}return e.next=3,l.default.get();case 3:return r=e.sent,e.next=6,t.isVideoInsideTimeLimit(n.data,l.default.getPlans(r),r.roles).catch((function(){t.uppy.removeFile(n.id),t.uppy.info(INKIVE.TranslateHelper.translate("tool.videos.max_duration_error")),setTimeout(t.onUppyInitialized)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setUpUppy();case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initialiseDashboard",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uppy.use(this.Uppy.Dashboard,Object.assign({target:"body",trigger:this.button,inline:!1,showProgressDetails:!0,proudlyDisplayPoweredByUppy:!1,locale:{strings:(0,c.getUppyDashboardTranslations)(INKIVE.TranslateHelper.translate)},thumbnailWidth:280,showLinkToFileUploadResult:!1,doneButtonHandler:function(){e.uppy.reset(),e.uppy.requestCloseModal()},closeModalOnClickOutside:!0,disableThumbnailGenerator:!1,onRequestCloseModal:function(){return e.closeUppyModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light"},t)),this._setAws3Url()}},{key:"_setRestrictions",value:function(e){e.allowedFileTypes="all"===e.allowedFileTypes[0]?null:e.allowedFileTypes,this.uppy.opts.restrictions=Object.assign({},{maxFileSize:0,maxNumberOfFiles:0,minNumberOfFiles:0,allowedFileTypes:[],requiredMetaFields:[]},e)}},{key:"setProviders",value:function(e){e.length?(e.includes("GoogleDrive")&&this._useProvider(this.Uppy.GoogleDrive,"google_drive"),e.includes("Dropbox")&&this._useProvider(this.Uppy.Dropbox,"dropbox")):(this._useProvider(this.Uppy.GoogleDrive,"google_drive"),this._useProvider(this.Uppy.Dropbox,"dropbox"))}},{key:"close",value:function(){this.Uppy&&this.Uppy.close()}},{key:"getDashboard",value:function(){return this.uppy.getPlugin("Dashboard")}},{key:"_setAws3Url",value:function(){this.uppy.use(this.Uppy.AwsS3,{limit:5,companionUrl:this.serverUrl})}},{key:"_setFilesPath",value:function(e){var t=INKIVE.C.BUCKET.split(".").shift();t+="/company/"+this.loadtype,t+="original/",t+=INKIVE.Helpers.generateRandomString(15).join("");var n=Object.assign({},e);return Object.keys(n).forEach((function(e){n[e].meta.name=encodeURI(t+"/"+INKIVE.Helpers.slugify(n[e].name))})),n}},{key:"closeUppyModal",value:function(){var e=this.uppy.getPlugin("Dashboard");this.Uppy.Dashboard&&e.isModalOpen()&&(this.uppy.reset(),e.closeModal())}},{key:"_useProvider",value:function(e){var t={target:this.Uppy.Dashboard,companionUrl:this.serverUrl},n=Object.assign({},t);this.uppy.use(e,n)}},{key:"setUpUppy",value:function(){var e=this;this.initialiseDashboard(),this.setProviders(this.providers),this.uppy.on("upload-success",(function(t,n){return INKIVE.Modal.togglePageLoader(!0),e.onFileUploaded({tempLink:decodeURIComponent(n.uploadURL),name:t.name})})).on("complete",(function(t){var n=function(){t.successful.length&&!t.failed.length&&e.closeUppyModal()};if(0===e._awaitMeta)n();else var r=setInterval((function(){0===e._awaitMeta&&(clearInterval(r),n())}),100)}))}},{key:"_getVideoDuration",value:function(e){return new Promise((function(t,n){try{var r=document.createElement("video");r.src=URL.createObjectURL(e),r.preload="metadata",r.onloadedmetadata=function(){URL.revokeObjectURL(r.src),t(r.duration)}}catch(e){n(e)}}))}},{key:"isVideo",value:function(e){return["video/mp4","video/quicktime"].includes(e)}},{key:"isVideoInsideTimeLimit",value:function(e,t,n){return this._getVideoDuration(e).then((function(e){if((0===t.length||n.includes("ROLE_PRO"))&&e>30)throw new Error("VideoLimitReached");return!0})).catch((function(e){throw new Error(e)}))}}]),e}();n.default=u},{"./uppy/translations":160,"./user-info":161,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],160:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.getUppyCoreTranslations=function(e){return{youCanOnlyUploadX:{0:e("uppy.dashboard.upload_limit"),1:e("uppy.dashboard.upload_limit_plural")},youHaveToAtLeastSelectX:{0:e("uppy.dashboard.minimum_files"),1:e("uppy.dashboard.minimum_files_plural")},exceedsSize:e("uppy.exceeds_size"),youCanOnlyUploadFileTypes:"".concat(e("uppy.upload_formats")," %{types}"),companionError:e("uppy.companion_error")}},n.getUppyDashboardTranslations=function(e){return{closeModal:e("uppy.dashboard.close_modal"),dashboardWindowTitle:e("uppy.dashboard.window_title"),copyLinkToClipboardSuccess:e("uppy.dashboard.link_copy_clipboard"),copyLinkToClipboardFallback:e("uppy.dashboard.link_copy_fallback"),copyLink:e("uppy.dashboard.link_copy"),fileSource:e("uppy.dashboard.file_source"),done:e("uppy.dashboard.done"),removeFile:e("uppy.dashboard.remove_file"),myDevice:e("uppy.dashboard.my_device"),dropPasteImport:e("uppy.dashboard.drop_paste_import"),dropPaste:e("uppy.dashboard.drop_paste"),browse:e("uppy.dashboard.browse"),uploadComplete:e("uppy.dashboard.upload_complete"),uploading:e("uppy.dashboard.uploading"),complete:e("uppy.dashboard.complete"),resumeUpload:e("uppy.dashboard.resume_upload"),pauseUpload:e("uppy.dashboard.pause_upload"),retryUpload:e("uppy.dashboard.retry_upload"),cancelUpload:e("uppy.dashboard.cancel_upload"),uploadFailed:e("uppy.dashboard.upload_failed"),pleasePressRetry:e("uppy.dashboard.please_retry"),paused:e("uppy.dashboard.paused"),error:e("uppy.dashboard.error"),retry:e("uppy.dashboard.retry"),cancel:e("general.cancel"),dataUploadedOfTotal:e("uppy.dashboard.uploaded_of_total"),xTimeLeft:e("uppy.dashboard.time_left"),addMore:e("uppy.dashboard.add_more"),back:e("uppy.dashboard.back"),addMoreFiles:e("uppy.dashboard.add_more_files"),uploadingXFiles:{0:e("uppy.dashboard.uploading_file"),1:e("uppy.dashboard.uploading_files_plural")},xFilesSelected:{0:e("uppy.dashboard.files_selected"),1:e("uppy.dashboard.files_selected_plural")},filesUploadedOfTotal:{0:e("uppy.dashboard.files_of_total"),1:e("uppy.dashboard.files_of_total_plural")},uploadXFiles:{0:e("uppy.dashboard.upload_files"),1:e("uppy.dashboard.upload_files_plural")},uploadXNewFiles:{0:e("uppy.dashboard.upload_new_files"),1:e("uppy.dashboard.upload_new_files_plural")}}}},{"core-js/modules/es.object.define-property.js":895}],161:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.keys.js");var o,i,s,a=r(e("./desygner-api"));t.exports=o={canConsume:function(e){var t=$.Deferred();return INKIVE.Helpers.isDesygnerProject()?(t.resolve(),t.promise()):($.when(o.get(),o.getMembership()).then((function(n,r){var o,i,s,a;r?r.is_consumer?(o=n.credentials,i=new XMLHttpRequest,s="Basic "+btoa(o.token+":"+o.hash),a="".concat(INKIVE.C.API_URL,"brand/consume/").concat(INKIVE.C.BOOK.id,"/").concat(e),i.open("GET",a),i.setRequestHeader("Authorization",s),i.onload=function(){i.status>=400?t.reject():t.resolve()},i.send()):t.resolve():t.reject()})),t.promise())},get:function(e){return i&&!e?i:(t=$.Deferred(),a.default.get("business/users/me").then((function(e){return t.resolve(e)}),(function(){$.getJSON(INKIVE.C.BASE_URL+"api/user/current",(function(e){t.resolve({email:e.data.email,roles:e.roles,credentials:{token:e.user_token,hash:e.user_hash},details:[{type:"first_name",content:e.data.username},{type:"country_code",content:e.data.country_id}]})}))})),i=t.promise());var t},getMembership:function(t){return s&&!t?s:s=e("./company").instance.get(["memberships","me"])},getPlans:function(e){var t=e.plans_expiration||{},n=new Date,r=[];if(Object.keys(t).length)for(var o in t)n<new Date(t[o])&&r.push(o);return r}}},{"./company":122,"./desygner-api":123,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.keys.js":901}],162:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("tinycolor2"));e("../../jquery-plugins/jquery.injectCSS");var o=function(){};o.prototype.apply=function(){_.each(this.getCssCollection(),$.injectCSS),$("header").css("display","grid")},o.prototype.getCssCollection=function(){return this.getCssRules()},o.prototype.getTextColorOptions=function(){for(var e=(0,r.default)("#FFFFFF"),t=[];"#000000"!==e.toHexString();)t.push(e.toHexString()),e=e.darken(5);return t},o.prototype.getCssRules=function(){var e=INKIVE.C.WHITE_LABEL_CONFIGURATION.logoImgSmall?INKIVE.C.WHITE_LABEL_CONFIGURATION.logoImgSmall:INKIVE.C.WHITE_LABEL_CONFIGURATION.logo_url,t=INKIVE.C.WHITE_LABEL_CONFIGURATION.colors.highlight;return INKIVE.C.WHITE_LABEL_CONFIGURATION.colors.button={hover:{background:r.default.mix("#FFFFFF",t,10).toHexString(),border:t},active:{background:r.default.mix("#FFFFFF",t,24).toHexString(),border:(0,r.default)(t).darken(10).toHexString()}},[e?{"body > header":{"grid-template-columns":"75px calc(45% - 75px) 55% !important"}}:{},e?{"body > header .logo-icon > div":{background:'url("'+e+'")no-repeat center center',"background-size":"contain;",width:"32px",height:"32px"}}:{},e?{"body > header .menus .back-button-container button.desygner-clear-button[data-action=exit]":{display:"flex"}}:{},e?{"body > header .menus":{"padding-left":"16px"}}:{},{"#tool-panel #tabTutorial ul li a":{color:t}},{"#tool-panel #tabTutorial ul li a:hover":{color:(0,r.default)(t).darken(10).toHexString()}},{"#tool-panel #tabTutorial h1, body > header .ui-dropdown-content h3 > span":{color:t}},{"button.btn-primary:hover, button.btn-primary:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"button.btn-primary, button.btn-primary:active, button.btn-primary:active icon *":{background:t,color:"#FFFFFF",fill:"#FFFFFF"}},{"#tool-panel .tool-content .tab-content.inner-tabs .header-links > div.active::after":{"background-color":t}},{"#tool-panel .tool-content #tabSearch .tool-static-block ul li.ui-tabs-active a":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail a:hover":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail a.applied":{color:t}},{"#tool-panel .tool-content .tab-content.text > .library ul.thumbnail-wrapper:not(.folders) >li:hover, #tool-panel .tool-content .tab-content.text .user_library ul.thumbnail-wrapper:not(.folders) >li:focus, #tool-panel .tool-content .tab-content.text > .library ul.thumbnail-wrapper:not(.folders) >li:hover, #tool-panel .tool-content .tab-content.text .user_library ul.thumbnail-wrapper:not(.folders) >li:focus   , .categories-container .category-list .antiscroll-inner .category-element:hover, .categories-container .category-list .antiscroll-inner .category-element:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"!important"}},{"#tool-panel .tool-content .tab-content.text > .library ul.thumbnail-wrapper:not(.folders) >li:active, #tool-panel .tool-content .tab-content.text .user_library ul.thumbnail-wrapper:not(.folders) >li:active   , .categories-container .category-list .antiscroll-inner .category-element:active ":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"#tool-panel .tool-content .tab-content.inner-tabs .categories-container .category-list .category-element:selected":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail .line-container > a.item.active":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail .line-container > a a.item:hover":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail .line-container a.toggle-options.active":{color:t}},{"#tool-panel .tool-content .tab-content.text > .add .thumbnail .options ul li .btn:hover":{color:t}},{"#tool-panel #sidebar-resize-button:hover *, #tool-panel #sidebar-resize-button:focus *":{color:t,fill:t}},{"#tool-panel .tool-menu ul li.active .btn-tag:after":{color:t+" !important"}},{".thumbnail-wrapper .thumbnail.image .premium, .template-overlay-list li.hvr-shrink > span .premium-content, .template-overlay-list li.hvr-shrink > span .premium-content ":{"background-color":t}},{".modal .content #filter-picker div.ui-tabs-panel":{"border-top":"3px solid "+r.default.mix("#FFFFFF",t,10).toHexString()+" !important"}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.prev.btn.btn-green.slick-arrow":{"background-color":t}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.next.btn.btn-green.slick-arrow":{"background-color":t}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal":{"background-color":t+" !important"}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal.no-background":{"background-color":"transparent !important"}},{".modal .content #filter-picker ul li.ui-tabs-active a":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+" !important"}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-active':{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"! important"}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-active *':{color:t,"background-color":"transparent"}},{"a.desygner-clear-button[data-id=shopping-cart], button.desygner-clear-button[data-id=shopping-cart]":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"a.modal-header span *, a.modal-header icon *,a.desygner-clear-button[data-id=shopping-cart] icon *, button.desygner-clear-button[data-id=shopping-cart] icon *, a.desygner-clear-button[data-id=shopping-cart] .icon-container *, button.desygner-clear-button[data-id=shopping-cart] .icon-container *":{color:t,fill:t}},{"#tool-panel .tool-content .tab-content.inner-tabs .library-link a":{"background-color":t}},{".order-print-options > a.desygner-primary-button, a.btn-modal, a.btn-yellow , a.general-button, button.general-button, div.general-button, a.desygner-primary-button, button.desygner-primary-button, div.desygner-primary-button, a.import-button .button, button.import-button .button, div.import-button .button":{"background-color":t}},{".context-menu-active ":{color:t+"!important"}},{"#tool-panel .tool-menu ul li.active a ":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"!important"}},{"#tool-panel .tool-menu ul li.active a *":{color:t+"!important",fill:t+"!important"}},{"#tool-panel .tool-content .tab-content dt a.btn-accordion":{"border-color":t}},{"#tabImages .tab-content .add .antiscroll-inner .import-button div.drag-drop-file":{border:"1px solid"+t+"!important"}},{'.ui-dropdown-content[data-id="share"] div.tabs div.ui-tabs-panel h3':{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{'body > header .ui-dropdown-content[data-id="order-print"] .order-print-info a[data-action="request-size"]':{color:t}},{"#tool-panel .tool-content .tab-content.inner-tabs.logo > .library ul.thumbnail-wrapper:not(.folders) > li > div, #tool-panel .tool-content .tab-content.inner-tabs.icon > .library ul.thumbnail-wrapper:not(.folders) > li > div, #tool-panel .tool-content .tab-content.inner-tabs.logo > .user_library ul.thumbnail-wrapper:not(.folders) > li > div, #tool-panel .tool-content .tab-content.inner-tabs.icon > .user_library ul.thumbnail-wrapper:not(.folders) > li > div":{"border-color":t}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.prev.btn.btn-green.slick-arrow:hover, .ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.prev.btn.btn-green.slick-arrow:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.next.btn.btn-green.slick-arrow:hover, .ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.next.btn.btn-green.slick-arrow:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal:hover,div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()+" !important"}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal.no-background:hover,div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal.no-background:focus":{"background-color":"transparent !important"}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover':{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{' .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:focus, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:focus':{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:focus,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:hover i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:focus i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:focus span,panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:hover span,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:hover i, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:focus i, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:hover i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:focus i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:hover i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:focus i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:hover i,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:focus i":{color:t}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover * ':{color:t}},{"div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label .checkmark, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label .checkmark, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label .radiomark, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label .radiomark":{"border-color":t}},{".ui-slider .ui-slider-handle:hover":{"background-color":t,"border-color":t}},{".ui-slider .ui-slider-handle:focus, .ui-slider .ui-slider-handle:active":{"border-color":t,"background-color":t}},{"div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":t,"border-color":t}},{"div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString(),"border-color":(0,r.default)(t).darken(10).toHexString()}},{"body > header .options .desygner-btn:hover, body > header .options .light-border:hover, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark":{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark, div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=radio]:checked ~ .radiomark":{"border-color":t}},{"div.checkbox-container ul li.filter-line p.desygner-custom-check label input[type=checkbox]:checked ~ .checkmark":{background:t}},{".checkbox-container .filter-line:hover .desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, .checkbox-container .filter-line:focus .desygner-custom-check label input[type=checkbox]:checked ~ .checkmark":{"border-color":(0,r.default)(t).darken(10).toHexString(),"background-color":(0,r.default)(t).darken(10).toHexString()}},{".checkbox-container .filter-line .desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, .checkbox-container .filter-line .desygner-custom-check label input[type=checkbox]:checked ~ .checkmark":{"border-color":t,"background-color":t}},{"a.btn-yellow:hover, a.btn-yellow:focus, div.import-button .button:hover, div.import-button .button:focus,a.btn-modal:hover,a.btn-modal:focus,a.general-button:hover,button.general-button:hover,div.general-button:hover,a.general-button:focus,button.general-button:focus,div.general-button:focus,.order-print-options > a.desygner-primary-button:hover, .order-print-options > a.desygner-primary-button:focus,a.desygner-primary-button:hover,button.desygner-primary-button:hover,div.desygner-primary-button:hover,a.desygner-primary-button:focus,button.desygner-primary-button:focus,div.desygner-primary-button:focus,a.import-button.button:hover,button.import-button.button:hover,div.import-button.button:hover,a.import-button.button:focus,button.import-button.button:focus,div.import-button.button:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"div.search-options-container:hover, div.search-options-container:focus, div.filter-button:hover, div.filter-button:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+" !important"}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:focus icon *":{color:t+" !important",fill:t+" !important"}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:hover icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:focus icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:hover icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:focus icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:focus icon *":{color:t+" !important",fill:t+" !important"}},{"panel#tool-panel div.tool-panel-inner div.tool-menu ul li a.btn-support:hover icon *":{color:t+" !important",fill:t+" !important"}},{"a.desygner-clear-button[data-id=order-print]:hover *,button.desygner-clear-button[data-id=order-print]:hover *,div.desygner-clear-button[data-id=order-print]:hover *,a.desygner-clear-button[data-id=order-print]:focus *,button.desygner-clear-button[data-id=order-print]:focus *,div.desygner-clear-button[data-id=order-print]:focus *":{color:t+" !important",fill:t+" !important"}},{"a.desygner-clear-button[data-id=order-print]:hover,button.desygner-clear-button[data-id=order-print]:hover, div.desygner-clear-button[data-id=order-print]:hover, a.desygner-clear-button[data-id=order-print]:focus,button.desygner-clear-button[data-id=order-print]:focus, div.desygner-clear-button[data-id=order-print]:focus":{"border-color":t+"!important","background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"!important"}},{".checkbox-container li.filter-line:hover, li.checkbox-container .filter-line:focus,#tool-panel .tool-content .tab-content dt a.btn-accordion:hover, #tool-panel .tool-content .tab-content dt a.btn-accordion:focus, a.desygner-clear-button:hover, button.desygner-clear-button:hover, a.desygner-clear-button:focus, button.desygner-clear-button:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{".context-menu-root .context-menu-item:hover, .context-menu-root .context-menu-visible:hover, .context-menu-root .context-menu-item:focus, .context-menu-root .context-menu-visible:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"a.desygner-clear-button:hover .icon-container *,  button.desygner-clear-button:hover .icon-container *,  a.desygner-clear-button:focus .icon-container *,  button.desygner-clear-button:focus .icon-container *,   a.desygner-clear-button:hover icon *,   button.desygner-clear-button:hover icon *,   a.desygner-clear-button:focus icon *,   button.desygner-clear-button:focus icon *,   a.desygner-clear-button:focus icon *,   button.desygner-clear-button:focus icon *,   a.desygner-clear-button:focus::after ,   button.desygner-clear-button:focus::after,   a.desygner-clear-button:hover::after,   button.desygner-clear-button:hover::after,  a.desygner-clear-button:focus i ,   button.desygner-clear-button:focus i,   a.desygner-clear-button:hover i,   button.desygner-clear-button:hover i":{fill:t,color:t}},{"body .modalWrapper .modal .modal-header:hover span  , body .modalWrapper .modal .modal-header:hover icon":{fill:t,color:t}},{"#tool-panel .tool-content .tab-content.inner-tabs .library-link a:hover,#tool-panel .tool-content .tab-content.inner-tabs .library-link a:focus ":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"a.desygner-clear-button[data-id=shopping-cart]:hover, button.desygner-clear-button[data-id=shopping-cart]:hover, a.desygner-clear-button[data-id=shopping-cart]:focus, button.desygner-clear-button[data-id=shopping-cart]:focus":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"#tool-panel .tool-content .tab-content.inner-tabs .header-links  div > .name:hover ":{color:t+"!important"}},{'body > header .ui-dropdown-content[data-id="order-print"] .order-print-info a[data-action="request-size"]:hover, body > header .ui-dropdown-content[data-id="order-print"] .order-print-info a[data-action="request-size"]:focus ':{color:(0,r.default)(t).darken(10).toHexString()}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover':{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{'.ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover  *, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover *, .ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover *, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover *':{color:t,fill:t}},{".tab-content div.version-item:hover, .tab-content div.version-item:focus ,.categories-container .category-list .antiscroll-inner .category-element:hover, .categories-container .category-list .antiscroll-inner .category-element:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"!important",color:t+"!important",fill:t+"!important"}},{".tab-content div.version-item:hover *, .tab-content div.version-item:focus * ":{color:t+"!important",fill:t+"!important"}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.prev.btn.btn-green.slick-arrow:active":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.next.btn.btn-green.slick-arrow:active":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal:active":{"background-color":(0,r.default)(t).darken(10).toHexString(),color:"#FFFFFF !important"}},{"div.modal ul.btnWrapper.bottom li a#btn-0.btn.btn-modal.no-background:active":{"background-color":"none",color:"unset !important"}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.prev.btn.btn-green.slick-arrow:active *":{color:"#FFFFFF"}},{".ui-tabs-panel.ui-widget-content.ui-corner-bottom ul.presets-container.slick-initialized.slick-slider span.next.btn.btn-green.slick-arrow:active *":{color:"#FFFFFF"}},{"body > header .options .desygner-btn.light-border:active":{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"body > header .options .desygner-btn.light:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"body header div.options button.desygner-btn.light.request.expandable:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()+" !important"}},{"body header div.options button.desygner-btn.light.request.expandable:active *":{color:t,fill:t}},{"header div.options div.ui-dropdown-content div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all div#tabs-2.ui-tabs-panel.ui-widget-content.ui-corner-bottom h3":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"header div.options div.ui-dropdown-content div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all ul.ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active, header div.options div.ui-dropdown-content div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all div.ui-tabs-panel.ui-widget-content.ui-corner-bottom h3":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"header div.options div.ui-dropdown-content:not(data-id=download) div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all ul.ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active *, header div.options div.ui-dropdown-content div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all div.ui-tabs-panel.ui-widget-content.ui-corner-bottom h3 *":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"html.lato body header div.options div.ui-dropdown-content:not(data-id=download) div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all ul.ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+" !important"}},{"header div.options div.ui-dropdown-content:not(data-id=download) div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all ul.ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active *, header div.options div.ui-dropdown-content div.tabs.ui-tabs.ui-widget.ui-widget-content.ui-corner-all div.ui-tabs-panel.ui-widget-content.ui-corner-bottom h3 *":{color:t,fill:t}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:active':{"background-color":r.default.mix("#FFFFFF",t,24).toHexString(),color:t}},{'.ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:active *':{color:t}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.add-search-options div.search-options div:active, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.add-search-options div.search-options div:active, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.search-container div.search-options div:active, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:active, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:active, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:active,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:active,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.add-search-options div.search-options div:active *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.add-search-options div.search-options div:active *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.search-container div.search-options div:active *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.search-container div.search-options div:hover *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.tab-content div.search-container div.search-options div:active *,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:active *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:active *,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:active *,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:active *":{color:t}},{"a.btn-yellow:active, div.import-button .button:active, a.btn-modal:active,a.general-button:active,button.general-button:active,div.general-button:active,a.desygner-primary-button:active,button.desygner-primary-button:active,div.desygner-primary-button:active, .order-print-options > a.desygner-primary-button:active, a.import-button.button:active,button.import-button.button:active,div.import-button.button:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString(),color:t}},{"div.filter-button:active, div.search-options-container:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()+" !important"}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.filter-button:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.filter-button:active icon *":{color:t+" !important",fill:t+" !important"}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:active icon, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.search-container div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.add-search-options div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.add-search-options div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabImages div.add-search-options div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLogos div.add-search-options div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabIcons div.add-search-options div.search-options-container:active icon *, panel#tool-panel div.tool-panel-inner div.tool-content div#tabText div.add-search-options div.search-options-container:active icon *":{color:t+" !important",fill:t+" !important"}},{"a.desygner-clear-button[data-id=order-print]:active *,button.desygner-clear-button[data-id=order-print]:active *,div.desygner-clear-button[data-id=order-print]:active *":{color:(0,r.default)(t).darken(10).toHexString()+"!important",fill:(0,r.default)(t).darken(10).toHexString()+"!important"}},{"a.desygner-clear-button[data-id=order-print]:active, button.desygner-clear-button[data-id=order-print]:active, div.desygner-clear-button[data-id=order-print]:active":{"border-color":(0,r.default)(t).darken(10).toHexString()+"!important","background-color":r.default.mix("#FFFFFF",t,24).toHexString()+"!important"}},{'a.go-premium:active i, button.go-premium:active i, div.go-premium:active i, a.upgrade:active i, button.upgrade:active i, div.upgrade:active i, a.general-button:active icon *,button.general-button:active icon *, a.desygner-primary-button:active icon * ,button.desygner-primary-button:active icon *, a.desygner-clear-button[data-id="order-print"]:active icon *, button.desygner-clear-button[data-id="order-print"]:active icon *, a.desygner-clear-button[data-id="order-print"]:active *, button.desygner-clear-button[data-id="order-print"]:active *, a.general-button:active icon *':{color:t,fill:t}},{"a.desygner-clear-button:active, button.desygner-clear-button:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()+"!important",color:t}},{"#tool-panel .tool-menu ul li.active a, a.desygner-clear-button[data-action=file]:active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"a.desygner-clear-button[data-id=shopping-cart]:active, button.desygner-clear-button[data-id=shopping-cart]:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"#tool-panel .tool-content .tab-content.inner-tabs .library-link a:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString(),opacity:"1"}},{'body > header .ui-dropdown-content[data-id="order-print"] .order-print-info a[data-action="request-size"]:active':{color:r.default.mix("#FFFFFF",t,24).toHexString()}},{"div.tab-content div.version-item:active ,.categories-container .category-list .antiscroll-inner .category-element:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()+"!important",color:t+"!important",fill:t+"!important"}},{"#tool-panel .tool-menu .help-menu-container .help-menu a:hover":{color:t,opacity:"1"}},{"#tool-panel .tool-content .tab-content.inner-tabs .search-title span, #tool-panel .tool-content .tab-content.inner-tabs .search-title ":{"border-bottom":"2px solid "+t}},{"#login.modal .modal-dialog .modal-content .modal-body button.dsy:not(.social)":{"background-color":t}},{"body>header .options .desygner-btn.light.expandable.active":{background:t}},{"#tool-panel .tool-content .tab-content dt a.btn-accordion:hover, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion:hover, #tool-panel .tool-content .tab-content dt a.btn-accordion.active, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion.active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body > header .menus > .back-button-container button:hover, body > header .menus > .back-button-container button.active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body > header .menus > .back-button-container button span i":{color:t}},{"body > header .options .desygner-btn.light:hover, body > header .options .desygner-btn.light:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body header div.options button.desygner-btn.light.request.expandable:hover, body header div.options button.desygner-btn.light.request.expandable:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body header div.options button.desygner-btn.light.request.expandable:hover *, body header div.options button.desygner-btn.light.request.expandable:focus *":{color:t,fill:t}},{"body > header .options .desygner-btn.light.active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"#tool-panel .tool-content .tab-content.inner-tabs .library ul.thumbnail-wrapper.folders li:hover, #tool-panel .tool-content .tab-content.inner-tabs .library ul.thumbnail-wrapper.folders li.active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".tab-content.restrictions .element-restrictions h4 span, .daterangepicker .ranges button ":{background:t}},{"#tool-panel .tool-content #tabRestrictions .element-restrictions .group > label:hover, #tool-panel .tool-content #tabRestrictions .group ul.options li label:hover, #tool-panel .tool-content #tabRestrictions ul.restrictions-list li label:hover":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".tab-content.restrictions .wrapper dt.active > a.btn.btn-accordion":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".daterangepicker .ranges button ":{background:t}},{".daterangepicker .ranges button:hover, .daterangepicker .ranges button:focus":{"background-color":r.default.mix("#FFFFFF",t,50).toHexString()}},{".daterangepicker .ranges button:hover, .daterangepicker .ranges button:focus":{color:t}},{".daterangepicker .ranges button:active ":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{".daterangepicker .ranges button:active ":{color:r.default.mix("#FFFFFF",t,10).toHexString()}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabRestrictions.tab.active div.antiscroll-wrap div.antiscroll-inner div.accordion.tab-content.restrictions.active.sub-category div.element-restrictions div.group.content div.wrapper div.restrictions.group ul.options li div.restrictions.group ul.options li ul.typeahead.dropdown-menu li.active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()+"!important"}},{"div.calendar-table table.table-condensed tbody tr td.available:hover":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{"div.calendar-table table.table-condensed tbody tr td.available.active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{"div.calendar-table table.table-condensed thead tr th.next.available:hover, div.calendar-table table.table-condensed thead tr th.prev.available:hover":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{"div.calendar-table table.table-condensed thead tr th.next.available:hover *, div.calendar-table table.table-condensed thead tr th.prev.available:hover * ":{color:t,fill:t}},{".btn-green, .btn-yellow, .btn-red, .btn-primary":{background:t}},{"ul.ui-tabs-nav li.ui-tabs-active a":{border:"3px solid "+t,"border-bottom":"0"}},{"body > header .ui-dropdown-content .ui-tabs-panel":{"border-top":"3px solid "+t}},{".expand-panel .expand-button, .expand-panel .expand-button.active":{}},{".expand-panel .expand-button:hover, .expand-panel .expand-button.active:hover":{opacity:"1",color:t}},{" .expand-panel.expand-button:hover, .expand-panel.expand-button:active":{opacity:"1",color:t}},{".expand-panel .expand-button.active":{"font-weight":"bold"}},{".tab-content.restrictions button.webrand":{border:0}},{".tab-content.restrictions button.webrand:hover":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".tab-content.restrictions button.webrand.selected":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".tab-content.restrictions button.webrand.selected *":{color:t}},{"#tool-panel .tool-content #tabRestrictions .reset-restrictions button:hover":{color:t+"!important",opacity:"1"}},{"#tool-panel .tool-content .tab-content dt a.btn-accordion:hover, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion:hover, #tool-panel .tool-content .tab-content dt a.btn-accordion:active, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion:active":{color:t,"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"#tool-panel .tool-content .tab-content dt a.btn-accordion:focus, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"#tool-panel .tool-content .tab-content dt a.btn-accordion:focus span, #tool-panel .tool-content .tab-content .settings-element a.btn-accordion:focus span":{color:t}},{".tab-content.restrictions .wrapper dt.active > a.btn.btn-accordion":{"border-bottom":"1px solid "+t,"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".brand-background-color, .brand-background-color:hover":{background:t}},{".progress-button svg.progress-circle path ":{stroke:t}},{"#element-options .content-list .thumbnail:hover":{color:t}},{"#element-popupmenu > .menu .ui-dropdown-items .ui-state-default.ui-slider-handle:hover":{background:t,border:"1px solid "+t}},{".bootstrap-tagsinput .tag [data-role=remove]":{color:t}},{".desygner-custom-check label:hover input[type=checkbox] ~ .checkmark, .desygner-custom-check label:hover input[type=radio] ~ .radiomark":{border:"1px solid "+t}},{".desygner-custom-check label input[type=checkbox]:checked ~ .checkmark, .desygner-custom-check label input[type=radio]:checked ~ .radiomark":{"background-color":t}},{".desygner-custom-check label .checkmark:after, .desygner-custom-check label .radiomark:after":{"border-width":"0 3px 3px 0"}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.mns .content .arrow":{color:t}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.kwls .identificator span, #tool-panel .tool-content .tab-content.kwls .kwls-details .antiscroll-wrap .antiscroll-inner .property-details .identificator span":{background:t}},{"a.import-button .button, button.import-button .button, div.import-button .button, a.drag-drop-file, button.drag-drop-file, div.drag-drop-file":{"border-color":t}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.kwls .button button":{border:"2px solid "+t,color:t}},{"#tool-panel .tool-content .tab-content.kwls .kwls-details .antiscroll-wrap .antiscroll-inner .back-link i":{color:t}},{"div#tabKWLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:hover, div#tabKWLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:focus,div#tabMLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:hover, div#tabMLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"div#tabKWLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:hover span, div#tabKWLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:focus span,div#tabMLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:hover span, div#tabMLS.tab div.tab-content.kwls div.search-container.add-search-options .search-options div:focus span":{color:t}},{"div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.back-link span, div#tabMLS.tab.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.back-link span":{color:t}},{"div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.images-header:focus, div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.mls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.kwls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.mls div.mls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.kwls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.mls div.kwls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.kwls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabKWLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus":{color:(0,r.default)(t).darken(10).toHexString()}},{"div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:hover,div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.header span.texts-header:focus,div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.items-content div.texts div.thumbnail-wrapper div.thumbnail a.item:hover, div#tabKWLS.tab div.tab-content.kwls div.kwls div.kwls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.items-content div.texts div.thumbnail-wrapper div.thumbnail a.item:focus, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.items-content div.texts div.thumbnail-wrapper div.thumbnail a.item:hover, div#tabMLS.tab div.tab-content.mls div.mls div.mls-details div.antiscroll-wrap.no-resizable div.antiscroll-inner div.items-container div.items-content div.texts div.thumbnail-wrapper div.thumbnail a.item:focus":{color:(0,r.default)(t).darken(10).toHexString()}},{"panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.add-search-options div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabLS div.tab-content div.search-container div.search-options div:hover, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.add-search-options div.search-options div:focus,panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.add-search-options div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content.kwls div.search-container div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabKWLS div.tab-content div.search-container div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.add-search-options div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.add-search-options div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content.mls div.search-container div.search-options div:focus, panel#tool-panel div.tool-panel-inner div.tool-content div#tabMLS div.tab-content div.search-container div.search-options div:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"#tool-panel .tool-content .tab-content.kwls .kwls-details .antiscroll-wrap .antiscroll-inner .items-container .header span.active":{"border-bottom":"2px solid "+t}},{"#tool-panel .tool-content .tab-content.kwls .kwls-details .antiscroll-wrap .antiscroll-inner .items-container .items-content .texts .thumbnail-wrapper .icons i":{background:t}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.mns .content .arrow":{color:t}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.mls .identificator span, #tool-panel .tool-content .tab-content.mls .mls-details .antiscroll-wrap .antiscroll-inner .property-details .identificator span":{background:t}},{"#tool-panel .tool-content .tab-content > div .tab-content > .item.mls .button button":{border:"2px solid "+t,color:t}},{"#tool-panel .tool-content .tab-content.mls .mls-details .antiscroll-wrap .antiscroll-inner .back-link i":{color:t}},{"#tool-panel .tool-content .tab-content.mls .mls-details .antiscroll-wrap .antiscroll-inner .items-container .header span.active":{"border-bottom":"2px solid "+t}},{"#tool-panel .tool-content .tab-content.mls .mls-details .antiscroll-wrap .antiscroll-inner .items-container .items-content .texts .thumbnail-wrapper .icons i":{background:t}},{".ui-slider .ui-slider-handle:hover, .ui-slider .ui-slider-handle:focus":{background:t,border:"1px solid "+t}},{".modalWrapper .content-LinkknowledgeBase a:hover, .modalWrapper .content-LinkknowledgeBase a:visited":{color:t}},{"body > header .options .desygner-btn.light-border:hover":{border:"1px solid "+t}},{".thumbnail-wrapper.thumbmenu p":{color:t,fill:t}},{"#tool-panel .tool-content #tabLayouts li.thumbnail.image > .base .set-size":{background:t}},{".page-order-show.desygner-clear-button:hover, .page-order-show.desygner-clear-button:focus ":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".page-order-show.desygner-clear-button:hover *, .page-order-show.desygner-clear-button:focus *":{color:t+" !important",fill:t+" !important"}},{"div.pages-button-container a.btn.modal-header.page-order-show:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"div.pages-button-container a.btn.modal-header.page-order-show:active *":{color:t+"!important",fill:t+"!important"}},{".page-order-expand.desygner-clear-button:hover, .page-order-expand.desygner-clear-button:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"a.page-order-expand.desygner-clear-button:hover div *, a.page-order-expand.desygner-clear-button:focus div *":{color:t,fill:t}},{".page-order-expand.desygner-clear-button:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".page-order-expand.desygner-clear-button:active *":{color:t,fill:t}},{"#text-edit  a.text-edit-cancel.button-submenu-clear-border:hover, #text-edit a.text-edit-cancel.button-submenu-clear-border:focus":{"border-color":t,"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{"#text-edit  a.text-edit-cancel.button-submenu-clear-border:hover *, #text-edit  a.text-edit-cancel.button-submenu-clear-border:focus *":{color:t,fill:t}},{"#text-edit  a.text-edit-cancel.button-submenu-clear-border:active":{"border-color":t,"background-color":r.default.mix("#FFFFFF",t,24).toHexString(),color:t}},{"#text-edit a.text-edit-cancel.button-submenu-clear-border:active *":{color:t,fill:t}},{"#text-edit  button.button-submenu-primary":{"background-color":t}},{"#text-edit  button.button-submenu-primary:hover, #text-edit button.button-submenu-primary:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"#text-edit  button.button-submenu-primary:active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString(),color:t}},{"#text-edit button.button-submenu-primary:active *":{fill:t,color:t}},INKIVE.C.IS_WEBRAND?{"aside#content.web.landscape panel#bottom-submenu ul.tool-page":{position:"absolute",left:"110px"}}:{},INKIVE.C.IS_WEBRAND?{"aside#content.web.landscape panel#bottom-submenu ul.tool-zoom":{position:"absolute",right:"0"}}:{},INKIVE.C.IS_WEBRAND?{"#bottom-submenu":{right:"0","min-width":"430px"}}:{},{'body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="explore-templates"]:hover, body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="download-pdf"]:hover, body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="explore-templates"]:focus, body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="download-pdf"]:focus':{"border-color":t}},{'body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="explore-templates"]:active, body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="download-pdf"]:active':{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.next":{"background-color":t}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.prev":{"background-color":t}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.next:hover, body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.next:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.prev:hover, body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.prev:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.next:active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.prev:active":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.next:active i":{color:t}},{"body .modalWrapper .modal .content #filter-picker div.ui-tabs-panel .slick-arrow.prev:active i":{color:t}},{"#bottom-submenu ul.tool-zoom div.ui-dropdown-content.custom-zoom ul li a:hover, #bottom-submenu ul.tool-zoom div.ui-dropdown-content.custom-zoom ul li a:focus":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{"#bottom-submenu ul.tool-zoom div.ui-dropdown-content.custom-zoom ul li a:active":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{"button.desygner-clear-button.active":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{"button.desygner-clear-button.active icon *":{color:t,fill:t}},{'.ui-dropdown-content[data-id="versions"] .helper .helper-display .helper-content .btn.go-premium':{"background-color":r.default.mix("#fff",t,10).toHexString()}},{'.ui-dropdown-content[data-id="versions"] .helper .helper-display .helper-content .btn.go-premium:hover, .ui-dropdown-content[data-id="versions"] .helper .helper-display .helper-content .btn.go-premium:focus':{"background-color":r.default.mix("#fff",t,15).toHexString()}},{'.ui-dropdown-content[data-id="versions"] .helper .helper-display .helper-content .btn.go-premium:active':{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{"div[data-id=versions] .helper .helper-display .helper-content .big-icon icon *":{fill:t}},{"div.content.active div.antiscroll-wrap div.no-version-saved div.tab-content div.no-version-icon-container icon.no-version-image-layer1":{fill:r.default.mix("#FFFFFF",t,10).toHexString()}},{"div.content.active div.antiscroll-wrap div.no-version-saved div.tab-content div.no-version-icon-container icon.no-version-image-layer2":{fill:r.default.mix("#FFFFFF",t,24).toHexString()}},{"div.content.active div.antiscroll-wrap div.no-version-saved div.tab-content div.no-version-icon-container icon.no-version-image-layer3":{fill:t}},{"div.content.active div.antiscroll-wrap div.no-version-saved div.tab-content div.no-version-icon-container icon.no-version-image-layer4":{fill:t}},{'body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="explore-templates"]:active, body > header .ui-dropdown-content[data-id="order-print"] div.order-print-options a[data-action="download-pdf"]:active':{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .apply.btn":{"background-color":t}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .apply.btn:hover,#element-popupmenu .menu .common-buttons .editor-add-link-to-text .apply.btn:focus":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .apply.btn:active":{"background-color":r.default.mix("#fff",t,24).toHexString(),"border-color":r.default.mix("#fff",t,24).toHexString(),color:t}},{"#element-popupmenu .menu .common-buttons .editor-remove-link-to-text .remove.btn:hover, #element-popupmenu .menu .common-buttons .editor-remove-link-to-text .remove.btn:focus":{"background-color":r.default.mix("#fff",t,10).toHexString(),"border-color":t,color:t}},{"#element-popupmenu .menu .common-buttons .editor-remove-link-to-text .remove.btn:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString(),"border-color":t,color:t}},{"#element-popupmenu .menu .common-buttons .editor-remove-link-to-text .remove.btn:hover":{}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line .desygner-custom-check input[type=radio]:checked ~ .radiomark:after":{"background-color":t}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line .desygner-custom-check input[type=radio]:checked ~ .radiomark":{"border-color":t}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after,#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:focus p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark,#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:focus p.desygner-custom-check label input[type=radio]:checked ~ .radiomark":{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:hover p.desygner-custom-check label input[type=radio] ~ .radiomark:after, #element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:focus p.desygner-custom-check label input[type=radio] ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:hover p.desygner-custom-check label input[type=radio] ~ .radiomark, #element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:focus p.desygner-custom-check label input[type=radio] ~ .radiomark":{"border-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:active p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"#element-popupmenu .menu .common-buttons .editor-add-link-to-text .option .filter-line:active p.desygner-custom-check label input[type=radio] ~ .radiomark":{"border-color":(0,r.default)(t).darken(10).toHexString()}},{".options button.desygner-clear-button:focus":{"background-color":"unset"}},{".options button.desygner-clear-button:focus *":{color:"#200E32",fill:"#200E32"}},{".options button.desygner-clear-button:active":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{".options button.desygner-clear-button:active *":{color:t,fill:t}},{".options button.desygner-clear-button.active":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".options button.desygner-clear-button.active *":{color:t,fill:t}},{".options button.desygner-clear-button.ui-dropdown-button:hover":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".options button.desygner-clear-button.ui-dropdown-button:hover *":{color:t,fill:t}},{".options button.desygner-clear-button.ui-dropdown-button[data-id=shopping-cart]:hover .total.btn":{color:"#fff"}},{".menus button.desygner-clear-button:focus":{"background-color":"unset"}},{".menus button.desygner-clear-button:focus *":{color:"#200E32",fill:"#200E32"}},{"body header div.options button.desygner-btn.light.request.expandable:focus":{"background-color":"unset"}},{".options button.desygner-btn.light.request.expandable:focus:focus *":{color:"#200E32",fill:"#200E32"}},{"body header div.options button.desygner-btn.light.request.expandable:active":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".options button.desygner-btn.light.request.expandable:focus:active *":{color:t,fill:t}},{".menus button.desygner-clear-button:active":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{".menus button.desygner-clear-button:active *":{color:t,fill:t}},{".menus button.desygner-clear-button.active":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".menus button.desygner-clear-button.active *":{color:t,fill:t}},{".menus button.desygner-clear-button.ui-dropdown-button:hover":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".menus button.desygner-clear-button.ui-dropdown-button:hover *":{color:t,fill:t}},{"button.desygner-clear-button.active span, button.desygner-clear-button.active *":{color:t,fill:t}},{'#element-popupmenu > .menu .ui-dropdown[data-action="on_fontfamily"] li:hover,#element-popupmenu > .menu .ui-dropdown[data-action="on_fontfamily"] li:focus':{"background-color":r.default.mix("#fff",t,10).toHexString()}},{'#element-popupmenu > .menu .ui-dropdown[data-action="on_fontfamily"] li:active':{"background-color":r.default.mix("#fff",t,24).toHexString()}},{".linear-progress-root":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".linear-progress-root .linear-progress-bar":{"background-color":t}},{'#element-popupmenu > .menu .ui-dropdown[data-action="on_fontfamily"] li.selected-font':{"background-color":r.default.mix("#fff",t,24).toHexString()}},{'.ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-state-default:hover, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover, .ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-corner-top:hover, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover':{"background-color":r.default.mix("#fff",t,10).toHexString()}},{'.ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover  *, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-state-default a:hover *, .ui-dropdown-content[data-id="download"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover *, .ui-dropdown-content[data-id="share"] div.tabs ul.ui-tabs-nav li.ui-corner-top a:hover *':{color:t,fill:t}},{'.options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active:hover, .options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active:focus':{"background-color":r.default.mix("#fff",t,10).toHexString()+"!important"}},{'.options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active:hover *, .options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active:focus *':{color:t,fill:t}},{'.options .ui-dropdown-content[data-id="download"] .tabs .desygner-dropdown-select .desygner-dropdown-select-item:hover a span.small, .options .ui-dropdown-content[data-id="download"] .tabs .desygner-dropdown-select .desygner-dropdown-select-item:focus a span.small':{color:t,fill:t}},{"#tabs-3 icon:hover, #tabs-3 icon:focus, #tabs-3 icon:hover *, #tabs-3 icon:focus *":{color:t,fill:t}},{"div.checkbox-container ul li.filter-line:hover .desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after":{"background-color":t}},{'.options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active':{"background-color":"transparent !important"}},{'.options .ui-dropdown-content[data-id="download"] .tabs ul.desygner-dropdown-select li.ui-state-default.ui-corner-top.ui-tabs-active.ui-state-active *':{color:"#200E32",fill:"#200E32"}},{'.options .ui-dropdown-content[data-id="download"] .tabs #tabs-1 section#quality-section .slider-container div .quality-slider .ui-slider-handle.ui-state-default.ui-corner-all:active':{"border-color":(0,r.default)(t).setAlpha(.5).toRgbString()}},{'.options .ui-dropdown-content[data-id="download"] .tabs #tabs-2 section#quality-section .slider-container div .quality-slider .ui-slider-handle.ui-state-default.ui-corner-all:active':{"border-color":(0,r.default)(t).setAlpha(.5).toRgbString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper[data-active=true] .item .item-preview-wrapper .preview-item":{"border-color":t}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item":{"border-color":r.default.mix("#fff",t,10).toHexString()}},{"#pages-panel .btn-panel:hover:not(.disabled)":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{"#pages-panel .btn-panel:active:not(.disabled)":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control .btn-page-options:hover:not(.disabled)":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control.active:not(.disabled) .btn-page-options":{"background-color":r.default.mix("#FFFFFF",t,10).toHexString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control .btn-page-options:hover:not(.disabled)":{"background-color":r.default.mix("#FFFFFF",t,24).toHexString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control.active:not(.disabled) .btn-page-options .dot":{"background-color":t}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control .btn-page-options:hover:not(.disabled) .dot":{"background-color":t}},{".pages-panel .control-popover .page-options-popover .page-options-wrapper .page-options .page-option:hover:not(.disabled)":{"background-color":r.default.mix("#fff",t,10).toHexString()}},{".pages-panel .control-popover .page-options-popover .page-options-wrapper .page-options .page-option:active:not(.disabled)":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control .btn-page-options:active:not(.disabled) .dot":{"background-color":t}},{".pages-panel .pages-panel-wrapper .pages-panel .content .content-items-wrapper > :first-child > ul .content-item-wrapper .item .item-preview-wrapper .preview-item .control .btn-page-options:active:not(.disabled)":{"background-color":r.default.mix("#fff",t,24).toHexString()}},{"div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{"div.checkbox-container ul li.filter-line:active p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=checkbox]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:hover p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after, div.checkbox-container ul li.filter-line:focus p.desygner-custom-check label input[type=radio]:checked ~ .radiomark:after":{"background-color":(0,r.default)(t).darken(10).toHexString()}},{".coach-marks .au-target[ref=rootRef]":{"background-color":t+"!important"}},{".coach-marks .au-target .au-target img":{"border-color":t+"!important"}},{".coach-marks .au-target[ref=arrowRef] polyline":{fill:t+"!important",stroke:t+"!important"}},{'.coach-marks button[class*="a__nextButton"] ':{color:t+"!important"}},{'.coach-marks button[class*="a__title"], .coach-marks button[class*="a__text"], .coach-marks button[class*="a__skipButton"]  ':{color:"white !important"}},{"#tool-panel .tool-content #tabRedfin > .redfin .redfin .redfin-content .redfin-details .items-container .items-content .texts .thumbnail-wrapper .icons i":{background:t}},{"#tool-panel .tool-content #tabRedfin > .redfin .redfin .redfin-content .redfin-details .property-details .identificator span":{background:t}},{"#tool-panel .tool-content #tabRedfin > .redfin .redfin .redfin-content .redfin-details .items-container .header span.active":{"border-bottom":"2px solid "+t}}]},t.exports=new o},{"../../jquery-plugins/jquery.injectCSS":646,"@babel/runtime/helpers/interopRequireDefault":663,tinycolor2:1049}],163:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.find.js");var r=e("./user-info"),o=e("./company").instance,i=e("./restrictions"),s=e("./desygner-api");function a(){this.collections={}}a.prototype.initialize=_.memoize((function(){return this.initCredentials().then(_.bind(this.initBaseUrl,this))})),a.prototype.initBaseUrl=function(){var e=$.Deferred();return o.getCompany().then(_.bind((function(t){this.baseUrl="".concat(INKIVE.C.API_URL,"workflow/companies/").concat(t.id,"/"),this.companyId=t.id,e.resolve()}),this)),e.promise()},a.prototype.isEnabled=function(){return new Promise((function(e,t){i.initialize().always((function(n){n&&n.length?_.any(n,(function(e){return e.addons&&void 0!==e.addons.workflow}))?e(!0):t(new Error):o.getCompanyItems("add_ons").then((function(n){_.any(n,(function(e){return"workflow"===e}))?e(!0):t(new Error)}))}))}))},a.prototype.initCredentials=function(){var e=$.Deferred();return r.get().then(_.bind((function(t){this.credentials={username:t.credentials.token,password:t.credentials.hash},e.resolve()}),this)),e.promise()},a.prototype.post=function(e,t){var n=$.Deferred();return this.initialize().then(_.bind((function(r){this.collections[e]||this._initCollection(e);var o=this.collections[e].create(t,{url:this.baseUrl+e,headers:Backbone.BasicAuth.getHeader(this.credentials)});o.credentials=this.credentials,o.on("change:id",n.resolve),o.on("error",n.reject)}),this)),n.promise()},a.prototype.patch=function(e,t,n){var r=this,o=$.Deferred();return this.initialize().then((function(){var i="workflow/companies/".concat(r.companyId,"/").concat(e,"/").concat(t.id,"/").concat(n);INKIVE.DesygnerApi.patch(i).then(o.resolve)})),o.promise()},a.prototype.updateOutputEntity=function(e,t){var n=this;return new Promise((function(r,o){n.initialize().then((function(){var o=t.info.encoded_id,i=e.outputs.find((function(e){return e.info.encoded_id===o})).id,s="workflow/companies/".concat(n.companyId,"/jobs/").concat(e.id,"/outputs/").concat(i);INKIVE.DesygnerApi.patch(s,t).then(r)}))}))},a.prototype.getJobs=function(e,t,n){var r=this;return new Promise((function(o,i){r.initialize().then((function(){var i="workflow/companies/".concat(r.companyId,"/linked-jobs/").concat(t,"/").concat(e.id,"?limit=").concat(n||20);s.get(i).then(o)}))}))},a.prototype.getJobById=function(e){var t=this;return new Promise((function(n,r){t.initialize().then((function(){var r="workflow/companies/".concat(t.companyId,"/jobs/").concat(e);e?s.get(r).then(n):n()}))}))},a.prototype._initCollection=function(e){var t=Backbone.Collection.extend({model:Backbone.Model,url:this.baseUrl+e});this.collections[e]=new t,this.collections[e].credentials=this.credentials};var l=new a;t.exports=l},{"./company":122,"./desygner-api":123,"./restrictions":149,"./user-info":161,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907}],164:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.splice.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/defineProperty")),a=r(e("./gradient-stop")),l=r(e("./linear-gradient")),c=r(e("./radial-gradient")),u=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,null,[{key:"getSceneDefs",value:function(){var t=document.querySelector("#svgcontent defs");return t||(t=document.createElementNS(e.NS,"defs"),document.querySelector("#svgcontent").prepend(t)),t}},{key:"getGradientsList",value:function(){var t={linearGradients:[],radialGradients:[]},n=e.getSceneDefs();return n.querySelectorAll("linearGradient").forEach((function(e){return t.linearGradients.push({id:e.id})})),n.querySelectorAll("radialGradient").forEach((function(e){return t.radialGradients.push({id:e.id})})),t}},{key:"getGradientById",value:function(t){return e.getSceneDefs().querySelector("#".concat(t))}},{key:"getNewGradientId",value:function(){return"gradient-".concat(1e6*Math.random()|0)}},{key:"addGradient",value:function(t){var n=document.createElementNS(e.NS,t instanceof l.default?"linearGradient":"radialGradient");n.id=e.getNewGradientId(),t.toElement(n);for(var r=0,o=t.stops.length;r<o;r++){var i=document.createElementNS(e.NS,"stop");t.stops[r].toElement(i),n.appendChild(i)}e.getSceneDefs().appendChild(n)}},{key:"duplicateGradientElement",value:function(t){var n=e.getGradientById(t);if(!n)return null;var r=n.cloneNode(!0);return r.id=e.getNewGradientId(),n.parentElement.appendChild(r),r}},{key:"convertGradientElement",value:function(t){var n=e.getGradientById(t);if(!n)return null;var r,o,i="linearGradient"===n.tagName;i?(r=new l.default(n),o=new c.default):(r=new c.default(n),o=new l.default),o.stops=[],r.stops.forEach((function(e){o.stops.push(e.clone())}));var s=document.createElementNS(e.NS,i?"radialGradient":"linearGradient");s.id=e.getNewGradientId(),o.toElement(s);for(var a=0,u=o.stops.length;a<u;a++){var d=document.createElementNS(e.NS,"stop");o.stops[a].toElement(d),s.appendChild(d)}return n.parentElement.appendChild(s),s.id}},{key:"deleteGradientElement",value:function(t){var n=e.getGradientById(t);n&&n.remove()}},{key:"isUsed",value:function(e){return document.querySelectorAll('#svgcontent [fill="url(#'.concat(e,')"]')).length>0}},{key:"addNewStop",value:function(t){t.stops.push(new a.default),e.makeUniformStopOffsets(t)}},{key:"deleteStop",value:function(t,n){t.stops.length<3||n<0||n>=t.stops.length||(t.stops.splice(n,1),e.makeUniformStopOffsets(t))}},{key:"makeUniformStopOffsets",value:function(e){for(var t=Math.round(100/(e.stops.length-1)),n=0;n<e.stops.length;n++)e.stops[n].offset=t*n}},{key:"applyGradientToSelection",value:function(e){INKIVE.EditorFacade.getSelection().forEach((function(t){switch(t.type){case"shape":INKIVE.DesignFacade.set(t.id,{fill:{color:"url(#".concat(e,")")}});break;case"text":case"background":INKIVE.DesignFacade.set(t.id,{color:"url(#".concat(e,")")})}}))}}]),e}();n.default=u,(0,s.default)(u,"NS","http://www.w3.org/2000/svg")},{"./gradient-stop":165,"./linear-gradient":166,"./radial-gradient":167,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.object.define-property.js":895,"core-js/modules/web.dom-collections.for-each.js":964}],165:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.parse-float.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/defineProperty")),a=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"offset",0),(0,s.default)(this,"color","#ffffff"),(0,s.default)(this,"opacity",1),t&&this.parseElement(t)}return(0,i.default)(e,[{key:"parseElement",value:function(e){this.offset=parseFloat(e.getAttribute("offset"))||0,this.opacity=parseFloat(e.getAttribute("stop-opacity"))||0,this.color=e.getAttribute("stop-color")||"#000000"}},{key:"toElement",value:function(e){e.setAttribute("offset",this.offset+"%"),e.setAttribute("stop-opacity",this.opacity),e.setAttribute("stop-color",this.color)}},{key:"clone",value:function(){var t=new e;return t.offset=this.offset,t.color=this.color,t.opacity=this.opacity,t}}]),e}();n.default=a},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904}],166:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.for-each.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/defineProperty")),a=r(e("./gradient-stop")),l=function(){function e(t){if((0,o.default)(this,e),(0,s.default)(this,"x1",0),(0,s.default)(this,"y1",0),(0,s.default)(this,"x2",100),(0,s.default)(this,"y2",100),(0,s.default)(this,"stops",[]),t)this.parseElement(t);else{var n=new a.default,r=new a.default;r.offset=100,r.color="#87CEEB",this.stops=[n,r]}}return(0,i.default)(e,[{key:"parseElement",value:function(e){var t=this,n=this;["x1","y1","x2","y2"].forEach((function(t){n[t]=parseFloat(e.getAttribute(t))||0})),this.stops=[],e.querySelectorAll("stop").forEach((function(e){t.stops.push(new a.default(e))}))}},{key:"toElement",value:function(e){var t=this;["x1","y1","x2","y2"].forEach((function(n){e.setAttribute(n,t[n]+"%")}))}}]),e}();n.default=l},{"./gradient-stop":165,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904,"core-js/modules/web.dom-collections.for-each.js":964}],167:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.for-each.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/defineProperty")),a=r(e("./gradient-stop")),l=function(){function e(t){if((0,o.default)(this,e),(0,s.default)(this,"cx",50),(0,s.default)(this,"cy",50),(0,s.default)(this,"stops",[]),t)this.parseElement(t);else{var n=new a.default,r=new a.default;r.offset=100,r.color="#87CEEB",this.stops=[n,r]}}return(0,i.default)(e,[{key:"parseElement",value:function(e){var t=this,n=this;["cx","cy"].forEach((function(t){n[t]=parseFloat(e.getAttribute(t))||0})),this.stops=[],e.querySelectorAll("stop").forEach((function(e){t.stops.push(new a.default(e))}))}},{key:"toElement",value:function(e){var t=this;["cx","cy"].forEach((function(n){e.setAttribute(n,t[n]+"%")}))}}]),e}();n.default=l},{"./gradient-stop":165,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904,"core-js/modules/web.dom-collections.for-each.js":964}],168:[function(e,t,n){"use strict";e("./constants"),e("./editor-loader/cookies-loader.js"),e("./editor-loader/index.js");var r=e("./text/text-helpers").TextHelpers,o=e("./../helpers/image/image-helpers").ImageHelpers;INKIVE.Text||(INKIVE.Text={}),INKIVE.Image||(INKIVE.Image={}),INKIVE.Text.Helpers=r,INKIVE.Image.Helpers=o},{"./../helpers/image/image-helpers":639,"./constants":9,"./editor-loader/cookies-loader.js":26,"./editor-loader/index.js":28,"./text/text-helpers":195}],169:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("../ui/templates/modal/add-page.hbs")),a=function(){function e(t){(0,o.default)(this,e),this.opts=$.extend({baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?this.opts.wrapper:'<div style="padding-top: 10px;"></div>'),this.$wrapper.append((0,s.default)())}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"saveForm",value:function(e){e&&e(!0)}}]),e}();t.exports=a},{"../ui/templates/modal/add-page.hbs":263,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663}],170:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.slice.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=(r(e("../app/version")),r(e("../ui/templates/modal/download.hbs"))),a=function(){function e(t){(0,o.default)(this,e);var n=this;this.opts=$.extend({format:null,contentW:null,contentH:null,baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?$(this.opts.wrapper):$('<div class="tool-content"></div>')),this.$wrapper.append((0,s.default)({display_zip_option:INKIVE.C.IS_MOBILE_APP&&!window.Android,display_extended_options:"pdf"!=n.opts.format})),function(){var e=["thumb","web","mobile"],t=n.opts.contentW,r=n.opts.contentH;737==t&&521==r&&(t=842,r=595);var o=t/r;function i(e,i){var s="."+e+"Dimensions",a=i&&t>i?i:t,l=i&&t>i?parseInt(i/o):r;n.$wrapper.find(s+'[data-type="width"]').val(a),n.$wrapper.find(s+'[data-type="height"]').val(l)}"png"==n.opts.format&&n.$wrapper.find("#quality-section").addClass("disabled"),n.$wrapper.find(".ui-dropdown .input-icon").on("click",(function(e){$(e.target).parents(".ui-dropdown").find("ul").toggle()})),n.$wrapper.find("a.quality").on("click",(function(){n.$wrapper.find("a.quality").removeClass("active"),$(this).addClass("active")})),i("rangeCurrent"),i("thumb",110),i("mobile",600),i("web",800),_.each(e,(function(e){var t,r="is"+((t=e).charAt(0).toUpperCase()+t.slice(1)),o="."+e+"Dimensions";n.$wrapper.find('[type=checkbox][name="'+r+'"]').on("change",(function(e){n.$wrapper.find(o).toggleClass("disabled")}))})),_.each(_.union(["rangeCurrent"],e),(function(e){e+="Dimensions",n.$wrapper.find("."+e).change((function(t){!function(e,t){var r=parseInt(e.val()),i=e.attr("data-type");r<16&&(r=16);r>3e3&&(r=3e3);var s="width"==i?r:parseInt(r/o),a="width"!=i?r:parseInt(r/o);n.$wrapper.find("."+t+'[data-type="width"]').val(s),n.$wrapper.find("."+t+'[data-type="height"]').val(a)}($(this),e)}))}))}()}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"download",value:function(e){INKIVE.Helpers.DownloadProcedure.execute(this.$wrapper,this.opts,e)}}]),e}();t.exports=a},{"../app/version":8,"../ui/templates/modal/download.hbs":276,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.parse-int.js":905}],171:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.index-of.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=(e("../../user-search/index"),{container:e("../ui/templates/modal/friends.hbs"),item:e("../ui/templates/modal/friends/item.hbs"),loading:e("../ui/templates/modal/friends/loading.hbs"),noResults:e("../ui/templates/modal/friends/no-results.hbs")}),a=function(){function e(t){(0,o.default)(this,e);var n,r,i=this;this.opts=$.extend({type:null,bookId:INKIVE.C.BOOK.id,bookName:Base64.decode(INKIVE.C.BOOK.name),baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?$(this.opts.wrapper):$('<div class="tool-content"></div>')),i.$wrapper.append(s.container()),n=i.$wrapper.find("#email4inviting"),r=i.$wrapper.find("#inviteFriendComments").parent(),n.keyup((function(e){var t=$(this).val().trim(),n=t.length>0&&t.indexOf("@")>0?"slideDown":"slideUp";r[n]("fast",(function(){i.$wrapper.trigger("contentChanged")}))}))}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"saveForm",value:function(e){e=e||$.noop;var t=this,n=t.$wrapper.find("#email4inviting").val();if(n){var r={email:n,message:t.$wrapper.find("#inviteFriendComments").val(),scrapbook_id:t.opts.bookId,scrapbook_name:t.opts.bookName,invite_type:"admins"==t.opts.type?2:"inked"==t.opts.type?1:"tagged"==t.opts.type?3:null};$.post(t.opts.baseUrl+"inkive/inkviaemail",r,(function(e){var n=t.opts.baseUrl+"editor/?id="+t.opts.bookId;n=encodeURI(n);var r=INKIVE.disableWindowExitConfirm;INKIVE.disableWindowExitConfirm=!0,window.location.href="mailto:"+t.$wrapper.find("#email4inviting").val()+"?body="+n,_.delay((function(){INKIVE.disableWindowExitConfirm=r}),1e3),t.$wrapper.find("#email4inviting").val("")})).error((function(e){t.$wrapper.find("#email4inviting").val("")}))}}},{key:"deleteInvolvedUser",value:function(e,t,n,r){r=r||INKIVE.C.BASE_URL,t=t||INKIVE.C.BOOK.id,n=n||$.noop;var o={id:e.parents(".userHolder").data("id"),inkive_id:t};$.post(r+"friends/unsetinked",o,(function(r){var o=e.parents(".listContainer");e.parents(".userHolder").remove(),o.find(".userHolder").length||(o.parent().addClass("empty"),o.find(".emptyText").show()),n(t)}))}},{key:"initInvolvedList",value:function(e,t,n,r,o){o=o||INKIVE.C.BASE_URL,r=r||INKIVE.C.BOOK.id,n=n||$.noop;var i=e.attr("class"),s={type:t,scrapbook:r,currentPage:"mykive"},a=e.find("li:last"),l=e.parent().parent();$.getJSON(o+"inkive/getInked",s).done((function(t){if(e.find("li>:not(a)").parent().remove(),l.find(".spinnerWrapper").hide(),t.success){if(t.data.trim().length&&(e.find("li>:not(a)").parent().remove(),e.prepend(t.data),$('li[data-toggle="tooltip"]').tooltip({placement:"top"}),l.removeClass("empty"),l.find(".emptyText").hide()),null!=$(a).attr("data-position")){var o=40*$(a).attr("data-position");"co-creators-list"!=i&&(o+=40),$(e).css("width",o)}$(e).trigger("listupdate",r)}e.find(".thumb-img").unbind("mouseenter"),e.on("mouseenter",".thumb-img",(function(e){var t=$(this).parent().find(".thumb-delete");t.length>0&&($(this).fadeOut(),t.fadeIn())})),e.find(".thumb-delete").unbind("mouseleave click"),e.on("mouseleave",".thumb-delete",(function(e){$(this).fadeOut(),$(this).parent().find(".thumb-img").fadeIn()})),e.on("click",".thumb-delete",(function(e){n($(this))}))}))}}]),e}();t.exports=a},{"../../user-search/index":647,"../ui/templates/modal/friends.hbs":277,"../ui/templates/modal/friends/item.hbs":278,"../ui/templates/modal/friends/loading.hbs":279,"../ui/templates/modal/friends/no-results.hbs":280,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.function.name.js":884,"core-js/modules/es.string.trim.js":929}],172:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("../ui/templates/modal/help.hbs")),a=function(){function e(t){(0,o.default)(this,e),this.opts=$.extend({userId:INKIVE.C.USER.id,userName:Base64.decode(INKIVE.C.USER.nickname),userEmail:Base64.decode(INKIVE.C.USER.email),baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?$.parseHTML(this.opts.wrapper):$.parseHTML('<div class="tool-content"></div>'));var n=INKIVE.C.WHITE_LABEL_CONFIGURATION||{};this.$wrapper.append((0,s.default)({user_name:this.opts.userName,user_email:this.opts.userEmail,show_faq:"enterprise"!==n.subscription_plan}))}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"saveForm",value:function(e){INKIVE.Tool.getInstance();var t={email:this.$wrapper.find('[name="email"]').val(),name:this.$wrapper.find('[name="name"]').val(),help:this.$wrapper.find('[name="help"]').val(),scrapbook_id:INKIVE.C.BOOK.id,is_webrand:INKIVE.Helpers.isWeBrandProject(),thumb:INKIVE.C.BOOK.thumb},n=$("#svgcontent g.main")[0].classList,r=_.find(n,(function(e){return 0===e.indexOf("layout-id")}));r&&(t.template_id=r.split("-")[2]),INKIVE.Helpers.api("inkive/feedback","POST",t,(function(t){e&&e(t.status)}))}}]),e}();t.exports=a},{"../ui/templates/modal/help.hbs":281,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],173:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("../ui/templates/modal/kwls-login.hbs")),a=function(){function e(t){(0,o.default)(this,e),this.opts=$.extend({userId:INKIVE.C.USER.id,userName:Base64.decode(INKIVE.C.USER.nickname),baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?$.parseHTML(this.opts.wrapper):$.parseHTML('<div class="tool-content"></div>')),this.$wrapper.append((0,s.default)({user_name:this.opts.userName}))}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"sendRequest",value:function(e){$.ajax({url:this.opts.server+"/login",type:"POST",error:function(){INKIVE.Modal.togglePageLoader(!1),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.kwls_login.invalid_credentials"}))},success:e,data:{username:this.$wrapper.find('[name="kw_user_name"]').val(),password:this.$wrapper.find('[name="kw_password"]').val()}})}}]),e}();t.exports=a},{"../ui/templates/modal/kwls-login.hbs":282,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859}],174:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("../ui/templates/modal/prompt.hbs")),a=r(e("../ui/templates/modal/long-prompt.hbs")),l=function(){function e(t){var n=t.long,r=t.wrapper,i=t.title,l=t.label,c=t.defaultValue;(0,o.default)(this,e),this.long=n,this.$wrapper=$(r?$.parseHTML(r):$.parseHTML('<div class="tool-content"></div>'));var u=n?a.default:s.default;this.$wrapper.append(u({title:i,label:l,default_value:c}))}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"getValue",value:function(){return this.long?this.$wrapper.find("textarea").val():this.$wrapper.find("input").val()}}]),e}();t.exports=l},{"../ui/templates/modal/long-prompt.hbs":283,"../ui/templates/modal/prompt.hbs":284,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859}],175:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.name.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("../ui/templates/modal/share-email.hbs")),a=function(){function e(t){(0,o.default)(this,e);this.opts=$.extend({userId:INKIVE.C.USER.id,userName:Base64.decode(INKIVE.C.USER.nickname),baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.$wrapper=$(this.opts.wrapper?$(this.opts.wrapper):$('<div class="tool-content"></div>')),this.$wrapper.append((0,s.default)({thumb:INKIVE.C.BOOK.thumb,book_name:Base64.decode(INKIVE.C.BOOK.name),book_description:Base64.decode(INKIVE.C.BOOK.description).trimToLength(100),user_name:this.opts.userName}))}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"saveForm",value:function(e){e=e||$.noop;var t=INKIVE.C.BASE_URL+"share/sendemail/"+INKIVE.C.BOOK.id,n=this.$wrapper.parents("form"),r=n.serialize();$.post(t,r,(function(t){var r=INKIVE.Helpers.getFormValue(n,"share_email"),o=INKIVE.C.BASE_URL+"design/?id="+INKIVE.C.BOOK.id;o=encodeURI(o),window.location.href="mailto:"+r+"?body="+o,t.success&&e(!0)}),"json").fail((function(){e(!1)})),e(!1)}}]),e}();t.exports=a},{"../ui/templates/modal/share-email.hbs":285,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.function.name.js":884,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932}],176:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=e("../ui/templates/modal/share-embed.hbs"),a=function(){function e(t){(0,o.default)(this,e);var n=this;function r(){var e=n.$wrapper.find("a.type.active").attr("data-id"),t=INKIVE.C.EMBED.DefaultWidth,r=INKIVE.C.EMBED.DefaultHeight,o=n.$wrapper.find("[name=bookName]").is(":checked")?1:0,i=n.$wrapper.find("[name=bookViews]").is(":checked")?1:0,s=n.$wrapper.find("a.size.active");"custom"==s.attr("data-id")?(t=n.$wrapper.find("input[name=width]").val()||t,r=n.$wrapper.find("input[name=height]").val()||r):(t=parseInt(s.attr("data-id")),r="scroll"==e?Math.round(t*INKIVE.C.EMBED.W2H*1.5+40):Math.round(t*INKIVE.C.EMBED.W2H));var a='<iframe src="'+INKIVE.C.BASE_URL.replace("http:","")+"design/embedded/"+INKIVE.C.BOOK.id+"/"+t+"/"+r+"/"+e+"/"+o+"/"+i+'/" width="'+t+'" height="'+r+'" frameborder="0"></iframe>';n.$wrapper.find("textarea[name=code]").val(a)}this.opts=t||{},this.$wrapper=$(this.opts.wrapper?$(this.opts.wrapper):$('<div class="tool-content"></div>')),n.$wrapper.append(s({width:INKIVE.C.EMBED.DefaultWidth,height:INKIVE.C.EMBED.DefaultHeight})),n.$wrapper.find("a.type").on("click",(function(){n.$wrapper.find("a.type").removeClass("active"),$(this).addClass("active"),"scroll"==$(this).attr("data-id")?(n.$wrapper.find("#share-embed-checkboxes").slideUp((function(){n.$wrapper.trigger("contentChanged")})),n.$wrapper.find("#share-embed-size-text").html(n.opts.text_size+" (1.5 "+(INKIVE.C.MODE.IS_DESYGNER?"designs":"pages")+" at a time)"),n.$wrapper.find("#share-embed-size a.size:not([data-id=custom])").each((function(e,t){var n=parseInt($(t).attr("data-id")),r=Math.round(n*INKIVE.C.EMBED.W2H*1.5+40);$(t).attr("tag",n+" x "+r)}))):(n.$wrapper.find("#share-embed-checkboxes").slideDown((function(){n.$wrapper.trigger("contentChanged")})),n.$wrapper.find("#share-embed-size-text").html(n.opts.text_size),n.$wrapper.find("#share-embed-size a.size:not([data-id=custom])").each((function(e,t){var n=parseInt($(t).attr("data-id")),r=Math.round(n*INKIVE.C.EMBED.W2H);$(t).attr("tag",n+" x "+r)}))),r()})),n.$wrapper.find("a.size").on("click",(function(){n.$wrapper.find("a.size").removeClass("active"),$(this).addClass("active"),"custom"==$(this).attr("data-id")?($(this).hide(),n.$wrapper.find("#share-embed-custom-sizes").fadeIn()):(n.$wrapper.find("#share-embed-custom-sizes").hide(),n.$wrapper.find("a.size").show()),r()})),n.$wrapper.find("input[name=width]").keyup((function(e){var t=n.$wrapper.find("a.type.active").attr("data-id"),o=parseInt($(this).val())||0;parseInt(n.$wrapper.find("input[name=height]").val()),o>INKIVE.C.EMBED.MaxWidth&&($(this).val(INKIVE.C.EMBED.MaxWidth),o=$(this).val()),"scroll"==t?o>Math.round((INKIVE.C.EMBED.DefaultHeight-40)/INKIVE.C.EMBED.W2H*1.5)&&n.$wrapper.find("input[name=height]").val(Math.round(o*INKIVE.C.EMBED.W2H*1.5+40)):n.$wrapper.find("input[name=height]").val(Math.round(o*INKIVE.C.EMBED.W2H)),r()})),n.$wrapper.find("input[name=height]").keyup((function(e){var t=n.$wrapper.find("a.type.active").attr("data-id"),o=parseInt($(this).val())||0;if("scroll"!=t){var i=o/INKIVE.C.EMBED.W2H;i>INKIVE.C.EMBED.MaxWidth&&(i=INKIVE.C.EMBED.MaxWidth,$(this).val(Math.round(i*INKIVE.C.EMBED.W2H))),n.$wrapper.find("input[name=width]").val(Math.round(i))}r()})),n.$wrapper.find("textarea").on("click",(function(e){this.select()})),n.$wrapper.find("[type=checkbox]").on("change",(function(){r()})),r()}return(0,i.default)(e,[{key:"getFormHtml",value:function(){return this.$wrapper}},{key:"saveForm",value:function(e){e&&e(!0)}}]),e}();t.exports=a},{"../ui/templates/modal/share-embed.hbs":286,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],177:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getBaseEndpoint=s,n.fetchGeneratedImageUrl=function(e){return a.apply(this,arguments)},n.fetchImageData=function(e){return l.apply(this,arguments)};var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.concat.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator"));function s(){return INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.domain?"brand/companies/".concat(INKIVE.C.WHITE_LABEL_CONFIGURATION.domain):"business"}function a(){return(a=(0,i.default)(o.default.mark((function e(t){var n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(),e.next=3,INKIVE.DesygnerApi.get("".concat(n,"/background-removal/download/").concat(t));case 3:return r=e.sent,i=r.url,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,i.default)(o.default.mark((function e(t){var n,r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(),e.next=3,INKIVE.DesygnerApi.post("".concat(n,"/background-removal?edit=true&sync=true"),{image:t,edit:!0,sync:!0});case 3:if(r=e.sent,i=r.id,a=r.secret,i&&a){e.next=8;break}throw new Error("Invalid response from background removal");case 8:return e.abrupt("return",{id:i,secret:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.object.define-property.js":895}],178:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.editBackground=function(e,t){return new Promise((function(n,r){window.ClippingMagic.edit({image:{id:e,secret:t},useStickySettings:!0,locale:INKIVE.TranslateHelper.locale||"en-AU"},function(e,t){return function(n){return["result-generated","editor-exit"].includes(n.event)?e(n.event):t(n.event,n)}}(n,r))}))},n.isClippingMagicLoaded=o,n.initialize=function(){if(o())return Promise.resolve();return new Promise((function(e){var t=document.createElement("script");t.src="https://clippingmagic.com/api/v1/ClippingMagic.js",t.id="script-clipping-magic",t.onload=function(){return r()&&e()},document.body.appendChild(t)}))},n.initializeSDK=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js");var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12349;window.ClippingMagic.initialize({apiId:e})};function o(){return window.ClippingMagic&&window.ClippingMagic.initialize}n.initializeSDK=r},{"core-js/modules/es.array.includes.js":864,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907}],179:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./background-removal-sdk"),o=e("./background-removal-request"),i={API:{fetchImageData:o.fetchImageData,fetchGeneratedImageUrl:o.fetchGeneratedImageUrl},SDK:{initialize:r.initialize,editBackground:r.editBackground}};n.default=i},{"./background-removal-request":177,"./background-removal-sdk":178,"core-js/modules/es.object.define-property.js":895}],180:[function(e,t,n){t.exports={data:[{key:"line",path:"M 0 125 L 0 175 L 300 175 L 300 125 L 0 125 Z"},{key:"round_square",path:"M 30.1,0 H 270.9 C 287.5754,0 301,13.4246 301,30.1 v 240.8 c 0,16.6754 -13.4246,30.1 -30.1,30.1 H 30.1 C 13.4246,301 0,287.5754 0,270.9 V 30.1 C 0,13.4246 13.4246,0 30.1,0 Z"},{key:"square",path:"M 0 0 L 0 300 L 300 300 L 300 0 L 0 0 Z"},{key:"rectangle",path:"M 0 50 L 0 250 L 300 250 L 300 50 L 0 50 Z"},{key:"circle",path:"M 150 150 m -150, 0 a 150,150 0 1,0 300,0 a 150,150 0 1,0 -300,0"},{key:"ellipse",path:"M0,150a150,100 0 1,0 300,0a150,100 0 1,0 -300,0"},{key:"pentagon",path:"m1.00035,116.97758l148.99963,-108.4053l148.99998,108.4053l-56.91267,175.4042l-184.1741,0l-56.91284,-175.4042z"},{key:"triangle",path:"m1,280.375l149,-260.75l149,260.75z"},{key:"diamond",path:"m1,150l149,-149l149,149l-149,149l-149,-149z"},{key:"right_triangle",path:"m1,299l0,-298l298,298z"},{key:"donut",path:"m1,150l0,0c0,-82.29042 66.70958,-149 149,-149l0,0c39.51724,0 77.41599,15.69816 105.35889,43.64108c27.94293,27.94293 43.64111,65.84165 43.64111,105.35892l0,0c0,82.29041 -66.70958,149 -149,149l0,0c-82.29041,0 -149,-66.70959 -149,-149zm74.5,0l0,0c0,41.1452 33.35481,74.5 74.5,74.5c41.14522,0 74.5,-33.3548 74.5,-74.5c0,-41.1452 -33.3548,-74.5 -74.5,-74.5l0,0c-41.14519,0 -74.5,33.35481 -74.5,74.5z"},{key:"hexagon",path:"m1,149.99944l63.85715,-127.71428l170.28572,0l63.85713,127.71428l-63.85713,127.71428l-170.28572,0l-63.85715,-127.71428z"},{key:"heart",path:"m150,73c61,-175 300,0 0,225c-300,-225 -61,-400 0,-225z"},{key:"frame",path:"m70,140l160,0l0,160l-160,0zm20,-140l0,120l120,0l0,-120z"},{key:"septagon1",path:"m0.99917,191.06511l29.51249,-127.7108l119.48833,-56.83673l119.48836,56.83673l29.51303,127.7108l-82.69087,102.41679l-132.62103,0l-82.69031,-102.41679z"},{key:"heptagon",path:"m1,88.28171l87.28172,-87.28171l123.43653,0l87.28172,87.28171l0,123.43654l-87.28172,87.28172l-123.43653,0l-87.28172,-87.28172l0,-123.43654z"},{key:"decagon",path:"m1,150.00093l28.45646,-88.40318l74.49956,-54.63682l92.08794,0l74.50002,54.63682l28.45599,88.40318l-28.45599,88.40318l-74.50002,54.63681l-92.08794,0l-74.49956,-54.63681l-28.45646,-88.40318z"},{key:"dodecagon",path:"m1,110.07421l39.92579,-69.14842l69.14842,-39.92579l79.85159,0l69.14842,39.92579l39.92578,69.14842l0,79.85159l-39.92578,69.14842l-69.14842,39.92578l-79.85159,0l-69.14842,-39.92578l-39.92579,-69.14842l0,-79.85159z"},{key:"star_points_5",path:"m1,116.58409l113.82668,0l35.17332,-108.13487l35.17334,108.13487l113.82666,0l-92.08755,66.83026l35.17514,108.13487l-92.08759,-66.83208l-92.08757,66.83208l35.17515,-108.13487l-92.08758,-66.83026z"},{key:"trapezoid",path:"m1,299l55.875,-298l186.25001,0l55.87498,298z"},{key:"arrow_up",path:"m1.49805,149.64304l148.50121,-148.00241l148.50121,148.00241l-74.25061,0l0,148.71457l-148.5012,0l0,-148.71457z"},{key:"dialog_balloon_1",path:"m0.99786,35.96579l0,0c0,-19.31077 15.28761,-34.96524 34.14583,-34.96524l15.52084,0l0,0l74.50001,0l139.68748,0c9.05606,0 17.74118,3.68382 24.14478,10.24108c6.40356,6.55726 10.00107,15.45081 10.00107,24.72416l0,87.41311l0,0l0,52.44785l0,0c0,19.31078 -15.2876,34.96524 -34.14584,34.96524l-139.68748,0l-97.32507,88.90848l22.82506,-88.90848l-15.52084,0c-18.85822,0 -34.14583,-15.65446 -34.14583,-34.96524l0,0l0,-52.44785l0,0z"},{key:"arrow_u_turn",path:"m1.00059,299.00055l0,-167.62497l0,0c0,-72.00411 58.37087,-130.37499 130.375,-130.37499l0,0l0,0c34.57759,0 67.73898,13.7359 92.18906,38.18595c24.45006,24.45005 38.18593,57.61144 38.18593,92.18904l0,18.625l37.24997,0l-74.49995,74.50002l-74.50002,-74.50002l37.25,0l0,-18.625c0,-30.8589 -25.0161,-55.87498 -55.87498,-55.87498l0,0l0,0c-30.85892,0 -55.875,25.01608 -55.875,55.87498l0,167.62497z"},{key:"arrow_left_up",path:"m0.99865,224.5l74.50004,-74.5l0,37.25l111.74991,0l0,-111.75l-37.25,0l74.5,-74.5l74.5,74.5l-37.25,0l0,186.25l-186.24989,0l0,37.25l-74.50005,-74.5z"},{key:"cross",path:"m0.99844,99.71339l98.71494,0l0,-98.71495l101.26279,0l0,98.71495l98.71495,0l0,101.2628l-98.71495,0l0,98.71494l-101.26279,0l0,-98.71494l-98.71494,0z"},{key:"plaque",path:"m-0.00197,49.94376l0,0c27.5829,0 49.94327,-22.36036 49.94327,-49.94327l199.76709,0l0,0c0,27.5829 22.36037,49.94327 49.94325,49.94327l0,199.7671l0,0c-27.58289,0 -49.94325,22.36034 -49.94325,49.94325l-199.76709,0c0,-27.58292 -22.36037,-49.94325 -49.94327,-49.94325z"},{key:"page",path:"m249.3298,298.99744l9.9335,-39.73413l39.73413,-9.93355l-49.66763,49.66768l-248.33237,0l0,-298.00001l298.00001,0l0,248.33234"}]}},{}],181:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),t.exports=function(e){return function e(t){t.each((function(){_.each(_.clone(this.childNodes),(function(e){3===e.nodeType&&e.remove(),e.nodeName&&e.nodeName.includes(":")&&e.remove()})),e($(this.childNodes))}))}($(e).find("defs")),e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.string.includes.js":915}],182:[function(e,t,n){"use strict";e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.find.js"),t.exports=function(e){var t,n;return INKIVE.Tool.getInstance().editor.canvas,t=e,n=_.map($(t).find("path"),(function(e){return{element:e,d:e.getAttribute("d")}})),_.each(n,(function(e,t){_.each(n,(function(n,r){if(r>t&&n.d===e.d){var o=e.element.getAttribute("fill"),i=n.element.getAttribute("fill");o&&i&&"none"===i&&$(n.element).attr("fill",o),e.element.parentNode&&$(e.element).remove()}}))})),e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870}],183:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),t.exports=function(e){return $(e).find("g:empty").remove(),$(e).find("g").each((function(){this.innerHTML.trim()||$(this).remove()})),e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.string.trim.js":929}],184:[function(e,t,n){"use strict";var r=["defs","circle","image","ellipse","line","rect","text","polygon","path","g"];t.exports=function(e){var t,n=$(e).children();return!function(e){return 1==e.length&&"g"==e.get(0).tagName&&!e.get(0).getAttribute("class")}(n)?function(e,t){for(var n=e.childNodes.length-1;n>=0;n--){var o=e.childNodes[n];_.contains(r,e.childNodes[n].tagName)&&t.insertBefore(o,t.firstChild)}}(e,t=document.createElementNS(svgedit.NS.SVG,"g")):t=n.get(0),function(e){var t=INKIVE.Tool.getInstance().editor;e.setAttribute("class","element sticker"),e.setAttribute("id",t.getNextId())}(t),t}},{}],185:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports=function(e){return $(e).find("[display]").each((function(){"none"===this.getAttribute("display")&&$(this).remove()})),e}},{"core-js/modules/es.array.find.js":859}],186:[function(e,t,n){"use strict";var r;e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=INKIVE.Helpers.getUnusedId;t.exports=function(e){return r=[],function(e){$(e).find("[clip-path]").each((function(t,n){var i=o(e),s=n.getAttribute("clip-path").replace("url(","").replace(")","").replace(/"/g,"");r.push(i),n.setAttribute("clip-path","url(#"+i+")"),$(e).find(s).attr("id",i)}))}(e),function(e){$(e).find("[id]").each((function(e,t){var n=t.getAttribute("id");_.contains(r,n)||t.removeAttribute("id")}))}(e),function(e){$(e).find("image").each((function(t,n){n.getAttribute("id")||n.setAttribute("id",o(e))}))}(e),e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],187:[function(e,t,n){"use strict";var r;function o(e){var t=$(e).children("[transform]");_.each(t,(function(e){if("path"==e.nodeName){var t=r.pathActions.convertPath(e);e.setAttribute("d",t)}svgedit.recalculate.recalculateDimensions(e)})),_.each($(e).children(),o)}e("core-js/modules/es.array.find.js"),t.exports=function(e){var t=5;for(r=INKIVE.Tool.getInstance().editor.canvas;t>0&&$(e).find("[transform]").length;)o(e),t--;return e}},{"core-js/modules/es.array.find.js":859}],188:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.index-of.js");var o=r(e("tinycolor2")),i=["filter"];function s(e){return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}t.exports=function(e,t,n){return function(e,t,n){try{var r=$(e),o=$(t).find("style");_.chain(o).map(s).each((function(e){_.each(e.cssRules,(function(e){var t=r.find(e.selectorText);_.each(e.style,(function(n){-1===i.indexOf(n)&&t.attr(n,e.style[n])}),this)}))})),_.each(o,(function(e){document.head.removeChild(e)})),n.keepClasses||r.find("[class]").removeAttr("class")}catch(e){console.error("convertStyleTags: ",e)}}(e,t,n),function(e){$(e).find("[style]").each((function(){var e=_.map(this.style,(function(e){return e}));_.each(e,(function(e){var t=$(this),n=t.css(e);_.includes(["fill","stroke"],e)&&"none"!==n&&(n=(0,o.default)(n).toHexString()),t.css(e,""),-1===i.indexOf(e)&&n&&t.attr(e,n)}),this)}))}(e),e}},{"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.string.includes.js":915,tinycolor2:1049}],189:[function(e,t,n){"use strict";var r;e("core-js/modules/es.array.find.js"),t.exports=function(e){return r=INKIVE.Tool.getInstance().editor.canvas,$(e).find(".textarea").each((function(){$(this).addClass("subelement"),$(this).attr("id")||$(this).attr("id",r.getNextId())})),e}},{"core-js/modules/es.array.find.js":859}],190:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.parse-float.js");var r=["cm","mm","in","pt","em","pc","px"];function o(){function e(e){var t=this.getAttribute(e);if(t){var n=t.match(/([0-9|.]*)\s*(\w+)\s*$/);n&&r.indexOf(n[2])>-1&&this.setAttribute(e,function e(t,n){switch(t=parseFloat(t),n){case"cm":return Math.floor4(t*INKIVE.C.DPI/2.54);case"mm":return e(t/10,"cm");case"in":return e(2.54*t,"cm");case"pt":return Math.floor4(1.3281472327365*t);case"em":case"pc":return Math.floor4(16*t)}return Math.floor4(t)}(n[1],n[2]))}}e.call(this,"stroke"),e.call(this,"stroke-width")}t.exports=function(e){return $(e).find("[stroke], [stroke-width]").each(o),e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],191:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports=function(e){return $(e).find("animate").remove(),e}},{"core-js/modules/es.array.find.js":859}],192:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports=function(e){return $(e).find("use").each((function(){!function(e,t){INKIVE.Tool.getInstance().editor;var n=document.createElementNS(svgedit.NS.SVG,"g"),r=$(e).find(t.getAttribute("xlink:href"))[0];r&&(!function(){for(var e=r.childNodes.length-1;e>=0;e--){var t=r.childNodes[e].cloneNode(!0);n.insertBefore(t,n.firstChild)}}(),_.chain(t.getAttributeNames()).without(t.getAttributeNames(),"xlink:href").each((function(e){n.setAttribute(e,t.getAttribute(e))})),t.parentElement.insertBefore(n,t))}(e,this),$(this).remove()})),e}},{"core-js/modules/es.array.find.js":859}],193:[function(e,t,n){"use strict";function r(e,t){try{$(e).find(":empty").each((function(){(function(e,t){if(!e)return!1;var n=e.getClientRects()[0];if(!n||!t)return!1;var r=i(t),s=i(n);return!(_.any(r,_.partial(o,n))||_.any(s,_.partial(o,t)))})(this,t)&&$(this).remove()}))}catch(e){}return!1}function o(e,t){return e.x<=t.x&&e.x+e.width>=t.x&&e.y<=t.y&&e.y+e.height>=t.y}function i(e){return[{x:e.x,y:e.y},{x:e.x,y:e.y+e.height},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height}]}e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.find.js"),t.exports=function(e,t){var n=e.getAttribute("viewBox")&&e.getAttribute("viewBox").split(" ");if(n&&4===n.length){for($("body").append(e),n=e.getClientRects()[0];r(e,n););$("body")[0].removeChild(e)}return e}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],194:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var r=[e("./cleaning-pass/use-replacer"),e("./cleaning-pass/viewbox-processor"),e("./cleaning-pass/unsupported-remover"),e("./cleaning-pass/grouper"),e("./cleaning-pass/style-converter"),e("./cleaning-pass/id-setter"),e("./cleaning-pass/def-text-remover"),e("./cleaning-pass/hidden-remover"),e("./cleaning-pass/unit-converter"),e("./cleaning-pass/recalculate"),e("./cleaning-pass/duplicate-path-remover"),e("./cleaning-pass/empty-group-remover"),e("./cleaning-pass/text-add-subelement")];t.exports=function(e,t){if(e){var n=$.parseXML(e.replace(/\s+/g," ")).getElementsByTagName("svg")[0];if(t=t||{},n&&_.any(r,(function(r){return!(n=r(n,e,t))})),n&&n.childNodes.length)return n}}},{"./cleaning-pass/def-text-remover":181,"./cleaning-pass/duplicate-path-remover":182,"./cleaning-pass/empty-group-remover":183,"./cleaning-pass/grouper":184,"./cleaning-pass/hidden-remover":185,"./cleaning-pass/id-setter":186,"./cleaning-pass/recalculate":187,"./cleaning-pass/style-converter":188,"./cleaning-pass/text-add-subelement":189,"./cleaning-pass/unit-converter":190,"./cleaning-pass/unsupported-remover":191,"./cleaning-pass/use-replacer":192,"./cleaning-pass/viewbox-processor":193,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],195:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TextHelpers=void 0,e("core-js/modules/es.string.trim-end.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.reduce.js");var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"getLineBBox",value:function(e,t,n,r){if(!n||0===n.length)return null;var o=n.trimEnd();if(0===o.length)return null;if(INKIVE.Text.textMetricsCache.hiddenElement||(INKIVE.Text.textMetricsCache.hiddenElement=document.querySelector("text#text-metrics")),!INKIVE.Text.textMetricsCache.hiddenElement){var i=document.createElement("p");i.id="text-metrics",i.style.cssText="\n        position: fixed;\n        white-space: nowrap;\n        font-stretch: 100%;\n        text-align: center;\n        visibility: hidden;\n      ",document.body.append(i),INKIVE.Text.textMetricsCache.hiddenElement=i}INKIVE.Text.textMetricsCache.hiddenElement.innerHTML="",INKIVE.Text.textMetricsCache.hiddenElement.style.fontFamily=e.font_family;var s,a,l,c=e.font_weight?e.font_weight:400;if(INKIVE.Text.textMetricsCache.hiddenElement.style.fontWeight=c,r){for(var u=t+o.length,d=e.font_size||0,p=0,h=0;h<e.styles.length;h++){var m=e.styles[h],f="font-size"===m.attribute,g="font-weight"===m.attribute;if(f||g){var b=t>=m.end&&u>=m.end,v=t<=m.start&&u<=m.start;if(!(b||v)&&(f&&m.value>d&&(d=m.value),g)){var y=(a=m.value,l=void 0,(l={bold:700,normal:400})[a]?l[a]:parseFloat(a));y>p&&(p=y)}}}d=d>0?d:e.font_size,p=p>0?p:e.font_weight,s=0|d;var j=INKIVE.Text.textMetricsCache[s]&&INKIVE.Text.textMetricsCache[s][o];if(j)return j;INKIVE.Text.textMetricsCache.hiddenElement.textContent=o,INKIVE.Text.textMetricsCache.hiddenElement.style.fontSize="".concat(d,"px"),INKIVE.Text.textMetricsCache.hiddenElement.style.fontWeight="".concat(p)}else{var _=e.font_size,w=e.font_weight,I=document.createElement("span");I.style.fontSize="".concat(_,"px"),I.style.fontWeight=w;for(var x=0;x<o.length;x++){var E=N(x),k=A(x),C=_!==E,S=w!==k;(C||S)&&(I.textContent.length&&INKIVE.Text.textMetricsCache.hiddenElement.appendChild(I),C&&(_=E),S&&(w=k),(I=document.createElement("span")).style.fontSize="".concat(_,"px"),I.style.fontWeight=w),I.textContent+=o[x]}I.textContent.length&&INKIVE.Text.textMetricsCache.hiddenElement.appendChild(I)}var T=INKIVE.Text.textMetricsCache.hiddenElement.getBoundingClientRect();return r&&(INKIVE.Text.textMetricsCache[s]||(INKIVE.Text.textMetricsCache[s]={}),INKIVE.Text.textMetricsCache[s][o]=T),T;function N(n){for(var r=0;r<e.styles.length;r++){var o=e.styles[r],i=t+n;if("font-size"===o.attribute&&i>=o.start&&i<o.end)return o.value}return e.font_size}function A(n){for(var r=0;r<e.styles.length;r++){var o=e.styles[r],i=t+n;if("font-weight"===o.attribute&&i>=o.start&&i<o.end)return o.value}return e.font_weight}}},{key:"getChangedLines",value:function(e,t,n,r){var o=n-r,i=e.substring(0,o).split(/\r\n|\r|\n/g),s=t.substring(0,n).split(/\r\n|\r|\n/g);if(r>0&&s.length>i.length){var a=Object.keys(i),l=[];if(s.forEach((function(e,t){-1===a.indexOf(String(t))&&l.push(t)})),l.length>0)return{mode:"added",lines:l}}if(r<0&&s.length<i.length){var c=Object.keys(s),u=[];if(i.forEach((function(e,t){-1===c.indexOf(String(t))&&u.push(t)})),u.length>0)return{mode:"removed",lines:u}}return{mode:"none"}}},{key:"convertDxToSpace",value:function(e){function t(e,t,n){for(var r=!1,o=-1,i="",s=[],a=String.fromCharCode(160),l=n;l>=0;l--)if(!(t[l]<=2*e)){var c=Math.floor(t[l]/e);i=Array.from({length:c}).fill(a).join(""),o=l,(s=Array.from({length:c}).fill(0))[s.length-1]=t[l]-c*e,r=!0;break}return{changed:r,index:o,spaces:i,dx:s}}function n(e,n){var r=function(e){var t=e.textContent,n=t.indexOf(String.fromCharCode(160));if(-1===n&&(n=t.indexOf(" ")),-1===n){var r=e.cloneNode(!0);r.textContent=String.fromCharCode(160),e.parentElement.append(r);var o=r.getExtentOfChar(0).width;return e.parentElement.removeChild(r),o}return e.getExtentOfChar(n).width}(e),i=!1,s=(0,o.default)(n),a=e.textContent,l={index:n.length};do{(l=t(r,n,l.index-1)).changed&&(s.splice.apply(s,[l.index,1].concat((0,o.default)(l.dx))),a=a.slice(0,l.index)+l.spaces+a.slice(l.index),i=!0)}while(l.changed);return{updateRequired:i,updatedDx:s,updatedTextContent:a}}e.querySelectorAll("text").forEach((function(e){var t=e.getAttribute("dx");if(t&&-1!==t.indexOf(" ")){var r=t.split(" ");if(r.length===e.textContent.length){var i=e.querySelectorAll("tspan");if(i.length){var s=0,a=(0,o.default)(r);i.forEach((function(e){var t=n(e,r.slice(s,s+e.textContent.length));t.updateRequired&&(a.splice.apply(a,[s,1].concat((0,o.default)(t.updatedDx))),e.textContent=t.updatedTextContent),s+=e.textContent.length})),e.setAttribute("dx",a.join(" "))}else{var l=n(e,r);l.updateRequired&&(e.setAttribute("dx",l.updatedDx.join(" ")),e.textContent=l.updatedTextContent)}}}}))}},{key:"getParagraphIndexesFromCursorSelection",value:function(e,t){var n=e.text.dom.querySelectorAll("text"),r=INKIVE.Helpers.getLineArray(e.text.dom,n.length),i=INKIVE.Helpers.getCursorLineIndex(r,t.start),s=INKIVE.Helpers.getCursorLineIndex(r,t.end),a=this.getParagraphIndex(e.text,i[0]),l=this.getParagraphIndex(e.text,s[0])-a+1;return(0,o.default)(Array(l).keys()).map((function(e){return e+a}))}},{key:"getParagraphCount",value:function(e){return e.text.strings.filter((function(e){return e.isEol})).length}},{key:"getParagraphIndex",value:function(e,t){return e.strings.slice(0,t).filter((function(e){return e.isEol})).length}},{key:"handleStringAlignStart",value:function(e,t,n){return n?e.x+t*n:e.x}},{key:"handleStringAlignMiddle",value:function(e,t){return e.x+e.width/2*t}},{key:"handleStringAlignEnd",value:function(e,t,n){return n?e.x+e.width*t-n*t:e.x+e.width*t}},{key:"handleStringAlignJustifyAll",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"middle"===t.text_anchor?e.x+e.width/2*n+n*r/2:"end"===t.text_anchor?e.x+e.width*n:e.x+n*r}},{key:"handleStringAlignJustifyStart",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return"middle"===n.text_anchor?o?e.x+e.width/2*r-e.width/2+t.width/2+r*i:e.x+e.width/2*r+r*i/2:"end"===n.text_anchor?o?e.x+e.width*r-e.width+t.width+r*i:e.x+e.width*r:e.x+r*i}},{key:"handleStringAlignJustifyMiddle",value:function(e,t,n,r,o){return"middle"===n.text_anchor?e.x+e.width/2*r:"end"===n.text_anchor?o?e.x+e.width*r-e.width/2+t.width/2:e.x+e.width*r:o?e.x+e.width/2-t.width/2:e.x}},{key:"handleStringAlignJustifyEnd",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return"middle"===n.text_anchor?o?e.x+e.width/2*r+e.width/2-t.width/2-r*i:e.x+e.width/2*r-r*i/2:"end"===n.text_anchor?e.x+e.width*r-r*i:o?e.x+e.width-t.width-r*i:e.x}},{key:"handleRtlAlign",value:function(e,t,n,r){switch(t.text_anchor){case"start":return e.x+e.width+n*r;case"middle":return e.x+e.width/2;case"end":return e.x-n*r}return 0}},{key:"handleEolAlign",value:function(e,t,n,r){var o="rtl"===n.direction;switch(n.text_anchor){case"justify_middle":return o?e.x+e.width*r/2-t.width/2+e.width:e.x+e.width*r/2-t.width/2;case"justify_end":return o?e.x+e.width*r-t.width+e.width:e.x+e.width*r-t.width}return 0}},{key:"handleColumnAlignStart",value:function(e,t,n){return"rtl"===t.direction?n+e.width:n}},{key:"handleColumnAlignMiddle",value:function(e,t,n,r){var o=e.columns-2<0?n:n*(e.columns-1)+r*(e.columns-1);return"rtl"===e.direction?t+r/2+o:t+r/2}},{key:"handleColumnAlignEnd",value:function(e,t,n,r){var o=e.columns-2<0?n:n*(e.columns-1)+r*(e.columns-2);return"rtl"===e.direction?t+r+o:t+r}},{key:"handleColumnAlignJustifyAll",value:function(e,t,n){return"middle"===e.text_anchor?t+n/2:"end"===e.text_anchor?t+n:0}},{key:"handleColumnAlignJustifyStart",value:function(e,t,n,r,o){return"middle"===t.text_anchor?o?n+e.width/2:n+r/2:"end"===t.text_anchor?o?n+e.width:n+r:o?n:0}},{key:"handleColumnAlignJustifyMiddle",value:function(e,t,n,r,o){return"middle"===t.text_anchor?n+r/2:"end"===t.text_anchor?o?n+r/2+e.width/2:n+r:o?n+r/2-e.width/2:0}},{key:"handleColumnAlignJustifyEnd",value:function(e,t,n,r,o){return"middle"===t.text_anchor?o?n+r-e.width/2:n+r/2:"end"===t.text_anchor?n+r:o?n+r-e.width:0}},{key:"handleAlignmentIcon",value:function(e,t,n){e&&n.classList.add("rtl-applied"),t&&n.classList.remove("rtl-applied"),n.querySelectorAll(".horizontal icon").forEach((function(n){var r=n.parentElement,o=r.closest("li");switch(n.querySelector("use").getAttribute("xlink:href")){case"#text---align-left":n.querySelector("use").setAttribute("xlink:href","#text---align-right"),r.setAttribute("data-original-title",INKIVE.TranslateHelper.translate("popupmenu.tooltip.align_right")),r.setAttribute("data-title",INKIVE.TranslateHelper.translate("popupmenu.tooltip.align_right"));break;case"#text---align-right":n.querySelector("use").setAttribute("xlink:href","#text---align-left"),r.setAttribute("data-original-title",INKIVE.TranslateHelper.translate("popupmenu.tooltip.align_left")),r.setAttribute("data-title",INKIVE.TranslateHelper.translate("popupmenu.tooltip.align_left"));break;case"#text---align-justify-all":case"#text---align-justify-start":case"#text---align-justify-middle":case"#text---align-justify-end":e&&(o.style.display="none"),t&&(o.style.display="")}INKIVE.Helpers.initTooltips()}))}},{key:"getLineSpacing",value:function(e,t){var n,r=e.getAttribute("font-size")||t&&t.getAttribute("font-size");r=r&&r.replace(/[^0-9.]+/,"");var o=parseFloat(r)||22,i=e.getAttribute("data-dy"),s=e.getAttribute("class")||"",a=$(e).find(">tspan, >text");return i?n=i.split(" ").filter(Boolean).map((function(e){return Math.round(100*e)/100})):(n=/line-spacing-([-+]?[0-9]*\.?[0-9]+)/.test(s)?parseFloat(s.match(/line-spacing-([-+]?[0-9]*\.?[0-9]+)/i)[1]):0,!e.classList.contains("text")&&!n&&a.length>=2&&a.get(1).getAttribute("y")&&(n=parseFloat(a.get(1).getAttribute("y")-a.get(0).getAttribute("y")-o))),n||0}},{key:"getLineMargin",value:function(e){var t=(e.getAttribute("class")||"").match(/ line-margin-([-+]?[0-9]*\.?[0-9]+)/i);if(t)return parseFloat(t[1]);var n=e.getAttribute("data-margin");return n?n.split(" ").filter(Boolean).map((function(e){return Math.round(100*e)/100})):0}},{key:"getParagraphSpacing",value:function(e){var t=(e.getAttribute("class")||"").match(/paragraph-spacing-([-+]?[0-9]*\.?[0-9]+)/i);if(t)return parseFloat(t[1]);var n=e.getAttribute("data-paragraph-dy");return n?n.split(" ").filter(Boolean).map((function(e){return Math.round(100*e)/100})):0}},{key:"getFirstLineMargin",value:function(e){var t=(e.getAttribute("class")||"").match(/first-line-margin-([-+]?[0-9]*\.?[0-9]+)/i);if(t)return parseInt(t[1]);var n=e.getAttribute("data-first-line-margin");return n?n.split(" ").filter(Boolean).map((function(e){return Math.round(100*e)/100})):0}},{key:"getTextLengthBeforeLineIndex",value:function(e,t){for(var n=0,r=0;r<t&&e.strings[r];r++)n+=e.strings[r].textContent.length;return n}},{key:"getTotalLetterSpacing",value:function(e,t,n,r){return r?0:Array.isArray(e)?e.slice(t,n).reduce((function(e,t){return e+t}),0):e||0}},{key:"getListType",value:function(e,t,n){return e&&"start"===n?"bullet":t&&"start"===n?"ordered":"none"}},{key:"handleList",value:function(e,t,n,r,o,i){e.dom.innerHTML=null;var s,a=(new INKIVE.Text.Span).setSimpleText(r).render(o),l="rtl"===t.direction?-1:1;return"bullet"===i?((s=e.isNewl&&e.isEmptyLineBulletPoint(t)?(new INKIVE.Text.Span).setDefaultBullet().render(o):(new INKIVE.Text.Span).setDefaultIndent().render(o)).setAttribute("xml:space","preserve"),a.setAttribute("x",e.x+l*t.font_size)):"ordered"===i&&(s=e.isNewl&&e.isEmptyLineBulletPoint(t)?(new INKIVE.Text.Span).setListItem("".concat(e.order).concat(e.orderedMark)).render(o):(new INKIVE.Text.Span).setListIndent().render(o),a.setAttribute("x",e.x+l*e.calculateOrderedEntryWidth(e.order,t.font_size))),n.length||a.setAttribute("xml:space","preserve"),e.dom.append(a),e.dom.prepend(s),a}}]),e}();n.TextHelpers=a},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim-end.js":928,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],196:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.parse-float.js");var r,o=e("../ui/templates/thumb/placeholder.hbs"),i={render:function(e,t){var n=function(e){var t=r.find("#"+e.trim()+" rect");return 0===t.length?null:{x:parseFloat(t.attr("x")),y:parseFloat(t.attr("y")),width:parseFloat(t.attr("width")),height:parseFloat(t.attr("height"))}}(t);if(n){var i=n.width>n.height?n.width:n.height,s={x:n.x+(n.width-i)/2,y:n.y+(n.height-i)/2,id:e,size:i,clipId:t,is_vertical:n.width<n.height};return{renderData:s,svgString:o(s)}}},setClipsData:function(e){r=$("<div>").html(e)}};t.exports=i},{"../ui/templates/thumb/placeholder.hbs":293,"core-js/modules/es.array.find.js":859,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.string.trim.js":929}],197:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="palette-item addmore addmore-library-color" data-attr="fill fill-opacity" data-popover="tooltip" data-title="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.color_picker.add_more_library",{name:"t",hash:{},data:o,loc:{start:{line:1,column:121},end:{line:1,column:168}}}))+'">\n  <i class="desygner-icon-plus"></i>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],198:[function(e,t,n){"use strict";e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.reverse.js"),e("core-js/modules/es.array.slice.js");var l=r(e("tinycolor2"));function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=e("../../factory/library").instance,p=e("../../factory/library").factory,h=e("../../factory/library/library-populator"),m=e("../../factory/user-info"),f=e("./palette-selector.hbs"),g=e("./table-border-target.hbs"),b=e("./add-more-button.hbs"),v=e("../../utils/advice"),y=e("./element-color-restrictions"),j=function(){this.$addColorButton=null,this.selectedColor=null,this.$wrapper=null,this.callback=null,this.libraryColors=null,this.libraryPalettes=[],this.$elem=null};j.prototype.isLibraryShown=!1,(j.prototype=new j).constructor=j,j.prototype.initialize=function(e,t,n){return this.hasLibrary=e,this.editor=INKIVE.Tool.getInstance().editor,this.$elem=t,this.restrictedColors=[],this.buttonType=n,_.bindAll(this,"favColors","renderColors","setColor","addColor","getColorHtml","addColorPicker","addColorToList","addColorToLibrary","selectPaletteEvent"),this.hasLibrary?this._loadColors():Promise.resolve()},j.prototype._loadColors=(0,a.default)(o.default.mark((function e(){var t,n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.libraryInstance=INKIVE.Helpers.isDesygnerProject()?d:new p("member"),t.push(this._loadMembershipPalettes()),INKIVE.Helpers.isDesygnerProject()||t.push(this._loadCompanyPalettes()),e.next=6,Promise.all(t);case 6:return e.next=8,this.libraryInstance.get("colors");case 8:n=e.sent,r=this.buttonType,["cell_lines","cell_background"].includes(this.buttonType)&&(r="table"),"cell_foreground"===this.buttonType&&(r="text"),i=new y(this.$elem.attr("id"),this.libraryPalettes,n,r),this.restrictedColors=i.getRestrictedColors(),this.hasLibrary=!this.restrictedColors.length;case 15:case"end":return e.stop()}}),e,this)}))),j.prototype._loadMembershipPalettes=function(){return this._loadPalettes(this.libraryInstance,0,!1,!0)},j.prototype._loadCompanyPalettes=(0,a.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getMembership();case 2:return t=e.sent,e.abrupt("return",this._loadPalettes(d,1,!0,t.permissions.assets_manage));case 4:case"end":return e.stop()}}),e,this)}))),j.prototype._loadPalettes=function(){var e=(0,a.default)(o.default.mark((function e(t,n,r,a){var l,u,d,p,h,m,f,g,b;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.get("palettes"),t.get("colors")]);case 2:u=e.sent,d=(0,s.default)(u,2),p=d[0],h=d[1],m=c(p);try{for(m.s();!(f=m.n()).done;)(g=f.value).canAdd=a,g.isCompany=r}catch(e){m.e(e)}finally{m.f()}b=r?INKIVE.TranslateHelper.translate("tool.general.company")+" - ":"",(l=this.libraryPalettes).push.apply(l,[{id:n,isCompany:r,canAdd:a,data:{colors:h.filter((function(e){return!e.data.palette})),name:b+INKIVE.TranslateHelper.translate("tool.library.default_palette")}}].concat((0,i.default)(p)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),j.prototype.favColors=function(e,t){this.callback=t,e.css({"overflow-y":"initial","overflow-x":"initial"}),this.$wrapper=e.find(".colorLineWrapper"),this.renderColors(),this.restrictedColors.length||(this.addColorPicker(),$("#jpickerWrapper"+this.$wrapper.parents("a").attr("type")).on("color-picker-loaded",_.bind((function(e){this.selectedColor=this.$wrapper.parents("a").find("[name=hex]").val()}),this)),this.toggleLibraryColors(!0))},j.prototype.renderColors=function(){if(this.$wrapper.empty(),"cell_lines"===this.buttonType){var e=this.$wrapper;e.append(g({})),e.append('<div class="horizontal-separator"></div>'),e.find(".table-cell-border-color-target select").on("change",this.selectTargetBorderEvent)}if(this.hasLibrary){this.$wrapper.append('<div class="ui-dropdown-content-title color-title library-title">'+INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.library_colors")+'<i class="title-arrow desygner-icon-arrow-down"></i></div>');var t=$('<div class="library-colors-container"></div>');this.$wrapper.append(t);var n=this.libraryPalettes.map((function(e){return{key:e.id,tag:e.data.name}}));t.append(f(n));var r=t.find(".palette-container > select");r.val(this.libraryInstance.popupMenuColorPalette),r.on("change",this.selectPaletteEvent);var o=$("<div/>");t.append(o),this.selectPaletteEvent(),t.before('<div class="library-loader"/>'),this.$wrapper.append('<div class="horizontal-separator"></div>')}var i=this.editor.getEditorUsedColors();this.$wrapper.append('<div class="ui-dropdown-content-title color-title template-title">'+INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.template_colors")+(this.hasLibrary?'<i class="title-arrow desygner-icon-arrow-up"></i>':"")+"</div>");var s=$('<div class="template-colors-container"></div>'),a=$("<div/>"),l=$("<div/>");if(s.append(a),s.append(l),this.$wrapper.append(s),i=_.last(i,6),_.each(i,_.bind((function(e){this.addColor(e,"editor",a)}),this)),this.recentColors=_.difference(this.editor.getFavColors(),i),this.recentColors=_.last(this.recentColors,5),_.each(this.recentColors,_.bind((function(e){this.addColor(e,"recent",l)}),this)),this.restrictedColors.length)_.each(this.restrictedColors,_.bind((function(e){this.addColor(e,"restricted",a)}),this));else{var c=$('<div class="palette-item addmore-recent-color addmore" data-attr="fill fill-opacity" data-title="'+INKIVE.TranslateHelper.translate("popupmenu.color_picker.add_more_recent")+'"><i class="desygner-icon-plus"></i></div>');l.append(c),c.off("click").on("click",this.addColorToList)}this.hasLibrary&&this.$wrapper.find(".color-title").off("click").on("click",_.bind((function(){return this.toggleLibraryColors(),!1}),this)),INKIVE.Helpers.initTooltips(this.$wrapper,{placement:"bottom"})},j.prototype.addColorToList=function(e,t){var n=this;if(!this.selectedColor)return!1;t||this.editor.setFavColor(this.selectedColor);var r=this.$wrapper.parents("a").attr("type"),o=INKIVE.Tool.getInstance().editor.canvas.getSelectedElems().map((function(e){return e.id}));INKIVE.EditorFacade.editor.clearSelection(),INKIVE.EditorFacade.select(o),this.$elem.is(".subelement")&&INKIVE.Menus.elementPopupMenu.render(this.$elem);var i=$('[data-action="colormap-circle"][type='+r+"]");i.find("input[type=hidden]").val(this.selectedColor),_.defer((function(){i.trigger("click",{keepHidden:e}),!0===e&&i.find(".palette-item[data-color="+n.selectedColor+"]").trigger("click",{keepHidden:e})}))},j.prototype.addColorToLibrary=function(){if(!this.selectedColor)return!1;var e=this.$wrapper.find(".library-colors-container");e.is(":visible")?(e.css("opacity",0),INKIVE.Modal.loader(this.$wrapper.find(".library-loader"))):INKIVE.Modal.togglePageLoader(!0);var t={color_code:this.selectedColor,is_dark:(0,l.default)(this.selectedColor).isDark()},n=_.findWhere(this.libraryPalettes,{id:parseInt(this.libraryInstance.popupMenuColorPalette)});n.id&&(t.palette=n.data.id);var r=1===n.id?d:this.libraryInstance;return h.ensureUniquenes("color",t).then(h.wrappResource,_.bind(i,this,"add-to-library-duplicity")).then(_.bind((function(e){return r.post("colors",e).then(_.bind(o,this),_.bind(i,this))}),this)).always(_.partial(INKIVE.Modal.togglePageLoader,!1)),!1;function o(e){e&&n.data.colors.push(e.attributes),this.addColorToList(!0,!0),v.show("add-to-library-success")}function i(t){INKIVE.Modal.loaderClose(this.$wrapper.find(".library-loader")),e.css("opacity",1),h.onError(t)}},j.prototype.setColor=function(e){return this.selectedColor=_.isString(e)?e.toUpperCase():null,e},j.prototype.addColor=function(e,t,n,r){var o=this;if(!this.restrictedColors.length||"restricted"===t){var i=this.getColorHtml(e,t,r);n.append(i),$(i).off("click").on("click",(function(){var e=null;if("cell_lines"===o.buttonType){var t=$(".table-cell-border-color-target select").val();e=INKIVE.Table.convertBorderNameToFlag(t)||"lrtb"}o.callback(i,{where:e})}))}},j.prototype.getColorHtml=function(e,t,n){var r=INKIVE.TranslateHelper.translate("popupmenu.color_picker.thumb.".concat(t),{color:e}),o="NONE"===e?"":'style="background: '+e+';"',i=n?'data-smart-asset="'.concat(n,'"'):"";return $('\n    <div class="palette-item"\n      '.concat(i,'\n      data-attr="fill fill-opacity"\n      data-color-type="').concat(t,'"\n      data-color="').concat(e,'"\n    >\n      <span ').concat(o,'\n        data-popover="tooltip"\n        title="').concat(r,'"\n        data-original-title="').concat(r,'"\n        data-title="').concat(r,'"\n      ></span>\n    </div>\n  '))},j.prototype.addColorPicker=function(){var e=this.$wrapper.parent();e.append('<div class="horizontal-separator"></div>'),e.append('<div class="ui-dropdown-content-title color-title">'+INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.choose_color")+"</div>"),e.append('<div class="colorpicker-container"/>'),e.find(".colorpicker-container").colorpicker({isInline:!0,selectedElement:this.$elem,defaultColor:e.parents("a").find("[name=hex]").val(),onSubmit:_.bind((function(e,t,n){var r=this.$wrapper.siblings(".colorpicker-container").find(".color-selector-input").val()?e:"";if(r&&"none"!==e||(r=e),this.setColor(r),n?this.addColorToLibrary():this.addColorToList(!0),!r)return!1}),this),onChange:this.setColor,onCancel:_.bind((function(){this.$addColorButton.remove()}),this)}),e.append('<div class="horizontal-separator color-separator"/>')},j.prototype.toggleLibraryColors=function(e){e||(j.prototype.isLibraryShown=this.isLibraryShown=!this.isLibraryShown);var t=this.isLibraryShown?"library":"template",n=this.isLibraryShown?"template":"library";this.$wrapper.find(".title-arrow").removeClass("desygner-icon-arrow-down desygner-icon-arrow-up"),this.$wrapper.find("."+n+"-colors-container").slideUp(),this.$wrapper.find("."+t+"-colors-container").slideDown(),this.$wrapper.find("."+t+"-title .title-arrow").addClass("desygner-icon-arrow-up"),this.$wrapper.find("."+n+"-title .title-arrow").addClass("desygner-icon-arrow-down"),this.$wrapper.find(".palettes").val(this.libraryInstance.popupMenuColorPalette).trigger("change")},j.prototype.selectPaletteEvent=function(e){e&&(this.libraryInstance.popupMenuColorPalette=$(e.target).val());var t=this.$wrapper.find(".library-colors-container > div:not(.palette-container)"),n=parseInt(this.libraryInstance.popupMenuColorPalette),r=this.libraryPalettes.find((function(e){return e.id===n}));t.find(".palette-item").remove();var o,i=r.data.colors.slice(0,6).reverse(),s=c(i);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.addColor(a.data.color_code,"library",t,r.isCompany?a.id:null)}}catch(e){s.e(e)}finally{s.f()}if(this.libraryColors=i.map((function(e){return e.data.color_code.toUpperCase()})),this.libraryColors.length<6&&r.canAdd){var l=$(b());t.append(l),l.off("click").on("click",this.addColorToLibrary)}},t.exports=j},{"../../factory/library":128,"../../factory/library/library-populator":135,"../../factory/user-info":161,"../../utils/advice":607,"./add-more-button.hbs":197,"./element-color-restrictions":200,"./palette-selector.hbs":201,"./table-border-target.hbs":202,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.iterator.js":965,tinycolor2:1049}],199:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var s=e("../../../helpers/svgToImage").svgToCanvas;!function(e){e.fn.extend({colorpicker:function(t){var n,r,a,l,c,u=INKIVE.Tool.getInstance().editor.canvas,d=e("#svgcanvas").find("#svgroot")[0],p=null,h=null,m=null,f=null,g=[],b=null;function v(){j(!1),e("#jpickerOverlay, #jpickerWrapper, .eye-dropper-preview-container").remove(),a&&u.runExtensions("showRulersAndGuides",{}),u.runExtensions("zoomChanged",u.getZoom())}function y(t){t=t||[256,256,256];var n,r,o,i=e(".eye-dropper-preview-container"),s=("000000"+(n=t[0],r=t[1],o=t[2],(n<<16|r<<8|o).toString(16))).slice(-6);i.find(".eye-dropper-preview span").css("background-color","#"+s),i.find(".eye-dropper-input").val(s),h.find(".Text input").val(s)}function j(n){if(n)try{var r=m.find(".library-colors-container").is(":visible"),o=e("body");f=e("<div data-is-library="+r+' class="eye-dropper-preview-container"><input type="text" maxlength="6" class="eye-dropper-input"  /><div class="eye-dropper-preview"><span></span></div><input type="button" class="cancel-color-picker" value="'+INKIVE.TranslateHelper.translate("general.cancel")+'"/></div>'),e("#jpickerOverlay").unbind(),f.find(".cancel-color-picker").on("click",(function(){v(),1===g.length&&u.addToSelection(g,!0),e('[data-action="colormap-circle"][type='+c+"]").trigger("click"),r&&(m.find(".template-colors-container").hide(),m.find(".library-colors-container").show())}));var i=e(INKIVE.TemplatesHelper("modal_loader"));i.addClass("screenshot-temp-canvas-loader"),e("#svgcanvas").after(i),b=h.parent(),h.parents(".ui-dropdown").length&&h.appendTo(o),h.hide(),t.skipClearSelection||u.clearSelection();var s=document.querySelector('[data-action="colormap-circle"][type='+c+"]");s&&s.click(),o.append(f),INKIVE.Tool.disableUI(),e("#pages-panel").find(".zoom-wrapper").addClass("disabled")}catch(e){return console.error(e),j(!1)}else b&&b.append(h),h.show(),INKIVE.Tool.enableUI(),e(".screenshot-temp-canvas-loader").remove(),e(d).find(".pageLoader").remove(),e(p).remove(),e(d).find("#svgcontent > .main").show(),e("#pages-panel").find(".zoom-wrapper").removeClass("disabled"),f&&f.remove()}function w(){return _.delay((function(){e(d).find("#svgcontent > .main").hide(),e(p).removeClass("hidden"),e(".screenshot-temp-canvas-loader").remove(),e("#jpickerOverlay").remove();var t=p.getContext("2d");e(p).on("mousemove",(function(n){var r=parseInt(n.pageX-e(this).offset().left),o=parseInt(n.pageY-e(this).offset().top);y(t.getImageData(r,o,1,1).data)})),e(p).on("mouseout",(function(){y()})),e(p).on("click",(function(){h.find(".Ok").trigger("click"),e('[data-action="colormap-circle"][type='+c+"]").trigger("click")}))}),100),!1}function I(){return(I=(0,i.default)(o.default.mark((function t(){var i,a,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.contentW*r,a=u.contentH*r,t.next=4,s(n.cloneNode(!0),{pageId:INKIVE.Tool._current_design_id,useTransparentBackground:!1,width:i,height:a,quickMode:!0});case 4:(p=t.sent.canvas).className="screenshot-temp-canvas hidden",e(p).css("top",e(n).attr("y")*r),e(p).css("left",e(n).attr("x")*r),e(p).insertAfter(e("#svgcanvas")[0]),l=INKIVE.Tool.getInstance().editor.canvas,l.getSelectedElems().forEach((function(e){l.selectorManager.requestSelector(e).selectorGroup.setAttribute("display","none")})),w();case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return n=e("#svgcontent")[0],r=INKIVE.EditorFacade.handle("zoom","get"),(a=u.runExtensions("isRulersAndGuidesShown",{}))&&u.runExtensions("hideRulersAndGuides",{}),j(!0),function(){I.apply(this,arguments)}(),!1}return t=e.extend({defaultColor:null,onLoad:e.noop,onClick:e.noop,onCancel:e.noop,onChange:e.noop,onSubmit:e.noop,skipClearSelection:!0},t),this.each((function(){t.onLoad(e(this)),l=t.isInline;var n=e(this),r=e(this).find('[name="hex"]');g=t.selectedElement&&t.selectedElement.length?t.selectedElement:_.clone(u.getSelectedElems());var o=function(){_.delay((function(){var t=e(".eye-dropper-preview-container");t.length&&t.remove()}),1e3);var o=r.val()||t.defaultColor;h=e('<div id="jpickerWrapper'+(l?n.parents("a").attr("type"):"")+'"/>'),l?n.append(h):(t.skipClearSelection||u.clearSelection(),h.addClass("addmore-color-picker"),e("body").append('<div id="jpickerOverlay"></div>',h),e("#jpickerOverlay").on("click",(function(){h.find(".Cancel").trigger("click")}))),h.jPicker({images:{clientPath:INKIVE.C.BASE_URL+"assets/css/editor/jpicker/"},color:{active:new e.jPicker.Color({hex:o})}},(function(n,r){var o=n.val("all"),i=o&&"#"+o.hex||"none",s=e(".eye-dropper-preview-container");if(("#FFFFFF"===i||s.length)&&h.find(".Text input").val()&&(i="#"+h.find(".Text input").val()),v(e(this)),t.onSubmit(i,r,s.data("is-library")),l)return!1}),(function(e,n){var o=e.val("all"),i=o&&"#"+o.hex.toUpperCase()||"none";r.val(i),h.find(".selected-color span").css("background-color","#"+i),r.trigger("change"),t.onChange(i,n)}),(function(n,o){var i=n.val("all"),s=i&&"#"+i.hex||i;v(e(this)),r.val(s),r.trigger("change"),t.onCancel(s,o)})),m=n.closest("a"),h.one("color-picker-loaded",(function(){var e=h.find("input.Hex"),t=m.find("input[type=hidden]").val()||"#FFFFFFF";e.val(t.replace("#","")),e.trigger("keyup"),h.find(".selected-color span").css("background-color",t),c=m.attr("type"),h.find(".eye-dropper").on("click",x),h.find(".cancel-color-picker").one("click",(function(){h.find(".Cancel").trigger("click")}))}))};l?(o(),n.on("click",(function(){return!1}))):(n.on("click",o),t.onClick(e(this)))}))}})}(jQuery)},{"../../../helpers/svgToImage":643,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.for-each.js":964}],200:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js");var r=e("../../facade/restrictions/restrictions"),o=function(e,t,n,r){this.elementId=e,this.palettes=t,this.libraryColors=n,this.type=(r||"")+"colors"};o.prototype.getRestrictions=function(e){return r.getElementRestrictions(this.elementId,e)},o.prototype.getColorsLibraryRestrictedElements=function(){var e,t=this.getRestrictions(this.type+"-library")[0];if(t){var n=parseInt(t.palette),r=0===n?this.libraryColors:_.findWhere(_.pluck(this.palettes,"data"),{id:n}).colors;this.colors=(e=r,_.pluck(_.pluck(e,"data"),"color_code"))}},o.prototype.getRestrictedColors=function(){return this.colors=_.chain(this.getRestrictions(this.type)).pluck("list").flatten().value(),this.getColorsLibraryRestrictedElements(),this.colors},t.exports=o},{"../../facade/restrictions/restrictions":118,"core-js/modules/es.parse-int.js":905}],201:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <option value="'+l("function"==typeof(i=null!=(i=c(n,"key")||(null!=t?c(t,"key"):t))?i:a)?i.call(s,{name:"key",hash:{},data:o,loc:{start:{line:4,column:21},end:{line:4,column:30}}}):i)+'">\n        '+l("function"==typeof(i=null!=(i=c(n,"tag")||(null!=t?c(t,"tag"):t))?i:a)?i.call(s,{name:"tag",hash:{},data:o,loc:{start:{line:5,column:8},end:{line:5,column:17}}}):i)+"\n      </option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return'<div class="palette-container">\n  <select class="palettes">\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:7,column:13}}}))?i:"")+"  </select>\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],202:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="table-cell-border-color-target">\n    <label for="apply-to">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_apply_to",{name:"t",hash:{},data:o,loc:{start:{line:2,column:26},end:{line:2,column:68}}}))+'</label>\n    <select name="apply-to">\n        <optgroup label="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_quick",{name:"t",hash:{},data:o,loc:{start:{line:4,column:25},end:{line:4,column:64}}}))+'">\n            <option value="all">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_all",{name:"t",hash:{},data:o,loc:{start:{line:5,column:32},end:{line:5,column:69}}}))+'</option>\n            <option value="vertical">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_vertical",{name:"t",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:79}}}))+'</option>\n            <option value="horizontal">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_horizontal",{name:"t",hash:{},data:o,loc:{start:{line:7,column:39},end:{line:7,column:83}}}))+'</option>\n        </optgroup>\n        <optgroup label="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_single",{name:"t",hash:{},data:o,loc:{start:{line:9,column:25},end:{line:9,column:65}}}))+'">\n            <option value="left">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_left",{name:"t",hash:{},data:o,loc:{start:{line:10,column:33},end:{line:10,column:71}}}))+'</option>\n            <option value="right">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_right",{name:"t",hash:{},data:o,loc:{start:{line:11,column:34},end:{line:11,column:73}}}))+'</option>\n            <option value="top">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_top",{name:"t",hash:{},data:o,loc:{start:{line:12,column:32},end:{line:12,column:69}}}))+'</option>\n            <option value="bottom">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_bottom",{name:"t",hash:{},data:o,loc:{start:{line:13,column:35},end:{line:13,column:75}}}))+"</option>\n        </optgroup>\n    </select>\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],203:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.function.name.js");var i=r(e("./element-popupmenu/content/default-menus.json")),s=r(e("./top-submenu/contents/file/view")),a=e("../utils/humps"),l=["text","table","video","logo","icon","layout","image","sticker","group","multiselect","background","root","bleed","locked","link"],c=function(e){var t;return t="g"===e.tagName||$(e).closest("g").is(".background")||$(e).is(".logo")?INKIVE.DesignFacade.getType(e):$(e).hasClass("layoutClipperImage")?"layout":"a"===e.tagName?$(e).hasClass("video")?"video":"link":e.tagName,l.includes(t)?t:"misc"};t.exports={getElementMenuId:c,populateMenuItems:function(){this.simplified=INKIVE.Menus.showSimplifiedRestrictions;var e=this.canvas.getSelectedElems(),t=$(this.handledElement);if(this.items={},"textedit"!==this.canvas.getMode()&&(this.copiedText=null),this.items.copy={name:INKIVE.TranslateHelper.translate("editor.contextmenu.copy"),icon:this.setCustomIcon("fa fa-copy"),disabled:"svgroot"===this.handledElement.id||"textedit"===this.canvas.getMode()&&!this.getCopiedText()},this.items.cut={name:INKIVE.TranslateHelper.translate("editor.contextmenu.cut"),icon:this.setCustomIcon("fa fa-cut"),disabled:"svgroot"===this.handledElement.id||"textedit"===this.canvas.getMode()&&!this.getCopiedText()},this.items.paste={name:INKIVE.TranslateHelper.translate("editor.contextmenu.paste"),icon:this.setCustomIcon("fa fa-paste"),disabled:!($(this.handledElement).is("#svgroot")||"textedit"===this.canvas.getMode())},!t.is("#svgroot")&&"textedit"!==this.canvas.getMode()){if(this.items.sep1="---------",this.items.fold_z_index={name:INKIVE.TranslateHelper.translate("popupmenu.tooltip.order")},this.items.fold_z_index.items={bring_to_front:{name:INKIVE.TranslateHelper.translate("popupmenu.tooltip.send_top"),icon:this.setCustomIcon("desygner-icon-context-send-top")},send_to_back:{name:INKIVE.TranslateHelper.translate("popupmenu.tooltip.send_bottom"),icon:this.setCustomIcon("desygner-icon-context-send-bottom")},bring_item_forward:{name:INKIVE.TranslateHelper.translate("popupmenu.tooltip.send_forward"),icon:this.setCustomIcon("desygner-icon-context-send-forward")},send_item_backwards:{name:INKIVE.TranslateHelper.translate("popupmenu.tooltip.send_backward"),icon:this.setCustomIcon("desygner-icon-context-send-backward")}},INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN){this.items.sep2="---------";var n=function(e,t){return e.reduce((function(e,n){var r=c(n),o="string"==typeof(r=(l.includes(r)?(0,a.pascalize)(r):r).toUpperCase())&&i.default[r]||i.default.DEFAULT;return e&&o&&o.includes(t)}),!0)}(e,"GROUP_GROUP");this.items.group={name:INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.group_group"),icon:this.setCustomIcon("desygner-icon-group"),disabled:1===e.length||!n},this.items.ungroup={name:INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.group_ungroup"),icon:this.setCustomIcon("desygner-icon-ungroup"),disabled:1!==e.length||!t.is(".group")||!n}}switch(this.items.sep3="---------",this.items.lock_movement={name:INKIVE.TranslateHelper.translate("editor.contextmenu.lock_movement"),icon:this.setCustomIcon("desygner-icon-lock"),disabled:t.is(".locked")},this.items.unlock_movement={name:INKIVE.TranslateHelper.translate("editor.contextmenu.unlock_movement"),icon:this.setCustomIcon("desygner-icon-unlock"),disabled:!t.is(".locked")},this.getAddToLibraryProperties(e[0]),INKIVE.C.BOOK.book_type){case INKIVE.C.BOOK_TYPE.TEMPLATE:this.items.sep4="---------",this.items.add_to_brand_assets={name:INKIVE.TranslateHelper.translate("editor.contextmenu.add_to_brand_assets"),icon:this.setCustomIcon("desygner-icon-context-brandasset"),disabled:!this.isAddToLibraryAllowed},this.items.sep5="---------",this.items.restrict={name:INKIVE.TranslateHelper.translate(this.simplified?"popupmenu.tooltip.restrict_changes":"editor.contextmenu.restrict"),icon:this.setCustomIcon(this.simplified?"key":"fa fa-ban",this.simplified)};break;case INKIVE.C.BOOK_TYPE.DESIGN:case INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN:case INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN:this.items.sep4="---------",this.items.add_to_personal_library={name:INKIVE.TranslateHelper.translate("editor.contextmenu.add_to_personal_library"),icon:this.setCustomIcon("desygner-icon-folder"),disabled:!this.isUserPremium||!this.isAddToLibraryAllowed}}var r=INKIVE.DesignFacade.get(this.handledElement.id);$('li > a[data-action="on_bgRemoval"]').is(":visible")&&["image","background"].includes(r.type)&&(this.items.sep6="---------",this.items.remove_background={name:INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.background_bg_removal"),icon:this.setCustomIcon("bg-removal",!0),disabled:r.background_removed})}},items:{},handledElement:null,handledNode:null,canvas:null,isUserPremium:!1,lastAction:null,textArea:null,copiedText:null,handleContextMenu:function(e){this.editor=this.editor||INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.textArea=$(this.editor.curConfig.initText.input).get(0);var t=(0,o.default)(this.canvas.getSelectedElems());this.destroyMenu(),this.canvas.addToSelection(t),this.getHandledElement(e),(2===e.button||0===e.button&&e.ctrlKey)&&(this.handledElement?function(){if($(this.handledElement).data("external_source")===INKIVE.C.SHUTTERSTOCK)return;"svgroot"===this.handledElement.id||this.canvas.selectorManager.requestSelector(this.handledElement).showGrips(!1),INKIVE.UserInfoFactory.get().then(_.bind((function(e){this.isUserPremium=_(e.roles).contains("ROLE_PREMIUM"),this.populateMenuItems(),this.applyRestrictions(),$.contextMenu({selector:"#"+this.handledElement.id,build:_.bind((function(e,t){return{callback:_.bind((function(e,n){this.handleCallback(e,n,t)}),this),items:this.items}}),this)}),$(this.handledElement).contextMenu(!0)}),this))}.call(this):this.handledNode&&function(){var e=$(this.handledNode).data("units")||"px",t=_.bind(this.canvas.runExtensions,this,"updateUnits"),n={px:{name:"Pixels"},in:{name:"Inches"},cm:{name:"Centimeters"},mm:{name:"Milimeters"}};n[e].icon=this.setCustomIcon("fa fa-check"),$.contextMenu({selector:"#"+this.handledNode.id,build:function(e,r){return{items:n,callback:t}}})}.call(this))},destroyMenu:function(){this.editor=this.editor||INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,$.contextMenu("destroy"),$(".context-menu-active").removeClass("context-menu-active"),$(".desygner-clear-button").blur(),this.canvas.clearSelection(),this.fileMenu=new s.default},setCustomIcon:function(e,t){return function(n,r,o,i){r.html((t?'<icon class="svg_icon"><svg><use xlink:href="#'+e+'"></use></svg></icon>':'<i class="'+e+'"></i>')+"<span>"+i.name+"</span>")}},getAddToLibraryProperties:function(e){this.isAddToLibraryAllowed=INKIVE.PopupMenuDefault.prototype.isAddtoLibraryAvailable()},handleCallback:function(e,t,n){switch(e){case"lock_movement":case"unlock_movement":INKIVE.DesignFacade.set({locked:"lock_movement"===e}),INKIVE.Menus.elementPopupMenu.refresh();break;case"copy":case"cut":this.cutCopySelectedText(e);break;case"paste":"textedit"===this.canvas.getMode()?this.redrawText(!0):this.canvas.clipBoard.length||this.copiedText?this.canvas.pasteElements("icon-context-menu",this.canvas.lastClickPoint.x,this.canvas.lastClickPoint.y):INKIVE.EditorFacade.canvas.call("advice.show","empty-clipboard-on-paste");break;case"group":INKIVE.DesignFacade.create("group");break;case"ungroup":INKIVE.DesignFacade.handle("ungroup"),this.canvas.clearSelection();break;case"bring_to_front":INKIVE.DesignFacade.handle(this.handledElement.id,"send_top");break;case"send_to_back":INKIVE.DesignFacade.handle(this.handledElement.id,"send_bottom");break;case"bring_item_forward":INKIVE.DesignFacade.handle(this.handledElement.id,"send_forward");break;case"send_item_backwards":INKIVE.DesignFacade.handle(this.handledElement.id,"send_backward");break;case"restrict":$('.tool-menu li > a[href="#tab'.concat(this.simplified?"Simplified":"",'Restrictions"]')).trigger("click");break;case"add_to_personal_library":case"add_to_brand_assets":var r=$('li > a[data-action="on_library_add_quiet"]');r.is(":visible")?r.trigger("click"):$('li.editor-add-to-library > a[data-action="on_library_add"]').trigger("click");break;case"remove_background":document.querySelector('[data-action="on_bgRemoval"]').classList.add("disabled"),INKIVE.DesignFacade.handle("remove_background")}this.lastAction=e},getCopiedText:function(){return this.textArea.value.substring(this.textArea.selectionStart,this.textArea.selectionEnd)},redrawText:function(e){var t;if(t=this.textArea.value.substring(0,this.textArea.selectionStart),e){if(this.copiedText||_.each(this.canvas.clipBoard,_.bind((function(e){var t=(new INKIVE.Text.Textarea).setDOM(e);t&&t.text&&(this.copiedText=t.text.textContent)}),this)),!this.copiedText)return void INKIVE.EditorFacade.canvas.call("advice.show","empty-clipboard-on-paste");t+=this.copiedText}var n=t.length;t+=this.textArea.value.substring(this.textArea.selectionEnd),this.textArea.value=t,this.textArea.selectionStart=this.textArea.selectionEnd=n,$(this.textArea).trigger("keyup",{forceRedraw:!0})},applyRestrictions:function(){var e=INKIVE.RestrictionsFacade;e.canChange(this.handledElement,"z_index")||this.items.fold_z_index&&(this.items.fold_z_index.disabled=!0),e.canChange(this.handledElement,"position")||(this.items.lock_movement&&(this.items.lock_movement.disabled=!0),this.items.unlock_movement&&(this.items.unlock_movement.disabled=!0),this.items.cut&&(this.items.cut.disabled=!0)),e.canChange(this.handledElement,"duplication")||(this.items.copy&&(this.items.copy.disabled=!0),this.items.cut&&(this.items.cut.disabled=!0)),e.canChange(this.handledElement,"deletion")||this.items.cut&&(this.items.cut.disabled=!0)},getHandledElement:function(e){var t=INKIVE.Tool.getInstance().editor,n=$(e.target).is("#context-menu-layer"),r=null;($(".element").each((function(n,o){t.isElementClicked(o,e)&&(r=o,$(r).parent().is(".sticker")&&(r=document.querySelector("#"+o.id).closest(".sticker")))})),this.handledElement=null,this.handledNode=null,!r||$(r).parent().is(".background"))?(this.canvas.clearSelection(),this.handledElement=$("#svgroot")[0]):(this.handledElement=r,_.contains(this.canvas.getSelectedElems(),r)||this.canvas.selectOnly([r],!1),n&&this.canvas.selectorManager.requestSelector(this.handledElement).showGrips(!0))},cutCopySelectedText:function(e){"textedit"===this.canvas.getMode()?(this.copiedText=this.getCopiedText(),"cut"===e&&this.redrawText(!1)):this.canvas[e+"SelectedElements"]()}}},{"../utils/humps":615,"./element-popupmenu/content/default-menus.json":213,"./top-submenu/contents/file/view":575,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.string.includes.js":915}],204:[function(e,t,n){"use strict";var r="default",o=null,i={default:e("./editor-modes/default"),template:e("./editor-modes/template"),sticker:e("./editor-modes/sticker"),banner:e("./editor-modes/banner"),placeholder:e("./editor-modes/placeholder"),logo:e("./editor-modes/logo"),restrict:e("./editor-modes/restrict"),brand_template:e("./editor-modes/brand-template")},s={};_.each(i,(function(e,t){s[t]=new e})),t.exports={setMode:function(e,t){s[e]&&(s[r].disable(),r=e,o=t,s[e].enable(t))},getMode:function(){return r},getData:function(){return o},isMode:function(e){return r===e}}},{"./editor-modes/banner":205,"./editor-modes/brand-template":206,"./editor-modes/default":207,"./editor-modes/logo":208,"./editor-modes/placeholder":209,"./editor-modes/restrict":210,"./editor-modes/sticker":211,"./editor-modes/template":212}],205:[function(e,t,n){"use strict";var r=e("./sticker");function o(){this.type="banner"}o.prototype=new r,t.exports=o},{"./sticker":211}],206:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js");var r=e("./default"),o=e("../../factory/company").instance;function i(){this.type="brand_template",this.hideList=['header button[data-action="resize"]',"header > .tool-size"]}i.prototype=new r,i.prototype.enableUI=function(){r.prototype.enableUI.call(this),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().hide(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().hide()},i.prototype.disableUI=function(){r.prototype.disableUI.call(this),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().show(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().show()},i.prototype.afterUIEnable=function(t){o.get(["templates",INKIVE.C.BOOK.encodedId]).then((function(t){$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().show(),$(window).trigger("resize"),0===$("#svgroot .main").find(":not(title)").length&&$('.tool-menu a[role="tab"][href="#tabLayouts"]').trigger("click"),e("../../factory/workflow").getJobs(t,"brand_template").then((function(e){var t;Array.isArray(e)&&e[0]&&"submitted"===e[0].state&&(t=document.querySelector("header"),INKIVE.C.EDITOR_BLOCKED=!0,INKIVE.Tool.disableUI(),t.classList.remove("disabled"),t.querySelector("[data-value=project-name]").style.pointerEvents="none",t.querySelectorAll("button").forEach((function(e){["exit","download","download-video"].includes(e.dataset.action)||e.classList.add("disabled")})),localStorage.setItem("lock_elements","true"),document.querySelector("#svgcontent").classList.add("global-locked"))}))}))},t.exports=i},{"../../factory/company":122,"../../factory/workflow":163,"./default":207,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/web.dom-collections.for-each.js":964}],207:[function(e,t,n){"use strict";function r(){this.type="default",this.hideList=[],this.showList=[],this.enableList=[],this.disableList=[]}e("core-js/modules/es.array.join.js"),r.prototype.initialize=function(){this.initialized=!0,this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,_.bindAll(this,"enable","disable")},r.prototype.enable=function(e){this.initialized||this.initialize(),this.beforeUIEnable(),this.enableUI(),this.afterUIEnable(e)},r.prototype.disable=function(){this.initialized||this.initialize(),this.disableUI()},r.prototype.beforeUIEnable=function(){clearTimeout(INKIVE.Tool._autoSaveTimeout),INKIVE.Tool._autoSaveTimeout=null},r.prototype.afterUIEnable=function(e){this.canvas.runExtensions("disableRuler",{}),this.tool.load(INKIVE.Tool._current_page_number)},r.prototype.enableUI=function(){$(this.hideList.join(",")).hide(),$(this.showList.join(",")).show(),$(this.enableList.join(",")).removeClass("disabled"),$(this.disableList.join(",")).addClass("disabled")},r.prototype.disableUI=function(){$(this.hideList.join(",")).show(),$(this.showList.join(",")).hide(),$(this.enableList.join(",")).addClass("disabled"),$(this.disableList.join(",")).removeClass("disabled")},t.exports=r},{"core-js/modules/es.array.join.js":868}],208:[function(e,t,n){"use strict";var r=e("./default");function o(){this.type="logo",this.hideList=["#tool-panel .help-menu",".name.editor-header-title","#ruler-horizontal","#ruler-vertical","#ik-grid-snap","header > .tool-size"]}o.prototype=new r,o.prototype.enableUI=function(){r.prototype.enableUI.call(this),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().hide(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().hide()},o.prototype.disableUI=function(){r.prototype.disableUI.call(this),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().show(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().show()},o.prototype.afterUIEnable=function(e){$('.tool-menu a[role="tab"][href="#tabExtra"]').trigger("click"),this.editor.canvas.runExtensions("enableRuler",{})},t.exports=o},{"./default":207}],209:[function(e,t,n){"use strict";var r=e("./sticker");function o(){this.type="placeholder"}o.prototype=new r,t.exports=o},{"./sticker":211}],210:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.find.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),c=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/possibleConstructorReturn")),d=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("./default")),h=e("../../factory/company"),m=e("../../facade/restrictions/restrictions");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,c.default)(r,e);var t,n=f(r);function r(){var e;return(0,s.default)(this,r),(e=n.call(this)).type="restrict",e.hideList=['header button[data-action="resize"]'],e}return(0,a.default)(r,[{key:"enableUI",value:function(){(0,l.default)((0,d.default)(r.prototype),"enableUI",this).call(this),$('.tool-menu a[role="tab"][href="#tabImport"]').parent().hide(),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().hide(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().hide(),(0,m.isFunctionalityAllowed)("text_add")||$('.tool-menu a[role="tab"][href="#tabText"]').parent().hide(),(0,m.isFunctionalityAllowed)("function_download_file")||$('#shr-buttons > [data-id="download"]').hide(),(0,m.isFunctionalityAllowed)("function_print_file")||$("#shr-buttons > .print").hide(),(0,m.isFunctionalityAllowed)("function_share_file")||$('#shr-buttons > [data-id="share"]').hide(),(0,m.isFunctionalityAllowed)("function_add_page")||$("#pages-panel .add-new-page-wrapper").addClass(".disable"),(0,m.isFunctionalityAllowed)("function_change_page_order")||$("#pages-panel .content-items-list").addClass(".sortable-disabled"),!(0,m.isFunctionalityAllowed)("function_draw")&&!(0,m.isFunctionalityAllowed)("function_use_desygner_background")&&(!(0,m.isFunctionalityAllowed)("function_use_desygner_images")||!(0,m.isFunctionalityAllowed)("image_add"))&&(!(0,m.isFunctionalityAllowed)("function_use_desygner_vector")||!(0,m.isFunctionalityAllowed)("vector_add"))&&$('.tool-menu a[role="tab"][href="#tabExtra"]').parent().hide(),!(0,m.isFunctionalityAllowed)("text_add")&&(!(0,m.isFunctionalityAllowed)("image_add")||!(0,m.isFunctionalityAllowed)("function_use_asset_images"))&&(!(0,m.isFunctionalityAllowed)("image_add")||!(0,m.isFunctionalityAllowed)("function_use_asset_logo"))&&!(0,m.isFunctionalityAllowed)("function_use_asset_colors")&&$('.tool-menu a[role="tab"][href="#tabLibrary"]').parent().hide(),!(0,m.isFunctionalityAllowed)("function_use_own_images")&&!(0,m.isFunctionalityAllowed)("function_use_web_images")&&!(0,m.isFunctionalityAllowed)("function_use_desygner_background")&&!(0,m.isFunctionalityAllowed)("image_add")&&$('.tool-menu a[role="tab"][href="#tabImages"]').parent().hide(),!(0,m.isFunctionalityAllowed)("video_add")&&$('.tool-menu a[role="tab"][href="#tabVideo"]').parent().hide(),(!(0,m.isFunctionalityAllowed)("logo_add")||!(0,m.isFunctionalityAllowed)("function_use_asset_logo"))&&$('.tool-menu a[role="tab"][href="#tabLogos"]').parent().hide(),!(0,m.isFunctionalityAllowed)("icon_add")&&$('.tool-menu a[role="tab"][href="#tabIcons"]').parent().hide(),!(0,m.isFunctionalityAllowed)("function_animation_file")&&$('.tool-menu a[role="tab"][href="#tabAnimation"]').parent().hide(),!(0,m.isFunctionalityAllowed)("function_edit_animation_file")&&$('.tool-menu a[role="tab"][href="#tabAnimation"]').parent().hide(),$('#tabSearch a[data-id="layout"]').parent().addClass("hidden"),(!(0,m.isFunctionalityAllowed)("function_use_web_vector")||!(0,m.isFunctionalityAllowed)("function_use_desygner_vector"))&&$('#tabSearch a[data-id="sticker"]').parent().addClass("hidden"),(!(0,m.isFunctionalityAllowed)("function_use_web_background")||!(0,m.isFunctionalityAllowed)("function_use_desygner_background"))&&$('#tabSearch a[data-id="background"]').parent().addClass("hidden"),(0,m.isFunctionalityAllowed)("function_use_web_images")&&(0,m.isFunctionalityAllowed)("image_add")||$('#tabSearch a[data-id="image"]').parent().addClass("hidden").siblings("li:not(.hidden)").first().find("a").trigger("click"),(!(0,m.isFunctionalityAllowed)("function_use_web_images")||!$("#tabSearch li:not(.hidden)").length)&&$('.tool-menu a[role="tab"][href="#tabSearch"]').parent().hide(),!(0,m.isFunctionalityAllowed)("image_add")&&!(0,m.isFunctionalityAllowed)("image_content")&&!(0,m.isFunctionalityAllowed)("text_add")&&$('.tool-menu a[role="tab"][href="#tabKWLS"]').parent().hide()&&$('.tool-menu a[role="tab"][href="#tabMLS"]').parent().hide()}},{key:"disableUI",value:function(){(0,l.default)((0,d.default)(r.prototype),"disableUI",this).call(this),$('.tool-menu a[role="tab"][href="#tabAdmin"]').parent().show(),$('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().show()}},{key:"afterUIEnable",value:(t=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.instance.get(["designs",INKIVE.C.BOOK.encodedId]);case 2:((0,m.isFunctionalityAllowed)("function_add_page")||(0,m.isFunctionalityAllowed)("function_change_page_order"))&&($('.tool-menu a[role="tab"][href="#tabLayouts"]').parent().show(),0===$("#svgroot .main").find(":not(title)").length&&$('.tool-menu a[role="tab"][href="#tabLayouts"]').trigger("click"));case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),r}(p.default);t.exports=g},{"../../facade/restrictions/restrictions":118,"../../factory/company":122,"./default":207,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.reflect.construct.js":908}],211:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("./template");function o(){this.type="sticker",this.disableList=["#header #shr-buttons > a:not(.save)",'.tool-menu a[role="tab"][href="#tabLayouts"]','.tool-menu a[role="tab"][href="#tabFavourites"]','.tool-menu a[role="tab"][href="#tabImages"]','.tool-menu a[role="tab"][href="#tabSearch"]','.tool-content #tabAdmin input[name="search"]','.tool-content a[data-toggle="accordion"][href="#accordionBackgrounds"]','.tool-content #tabAdmin a[data-toggle="accordion"][href="#accordionAdminLayouts"]',".tool-content #tabAdmin .btn-new-item",'.tool-content #tabAdmin a[data-toggle="accordion"][href="#accordionAdminBackgrounds"]']}o.prototype=new r,o.prototype.afterUIEnable=function(e){this.editor.canvas.runExtensions("enableRuler",{}),this.editor.loadSvgString(Base64.decode(INKIVE.C.BLANK_SVG),_.bind(this.onBlankSVG,this,e),1e3,1e3)},o.prototype.onBlankSVG=function(e){if(e.content){var t=Math.min(this.canvas.contentW,this.canvas.contentH);t/=Math.max(e.width,e.height),INKIVE.DesignFacade.create("sticker",{sticker_id:e.id,thumb_src:e.url,banner:!0,position:{x:(this.canvas.contentW-e.width*(t/2))/2,y:(this.canvas.contentH-e.height*(t/2))/2},size:{width:e.width*(t/2),height:e.height*(t/2)}})}},t.exports=o},{"./template":212,"core-js/modules/es.function.bind.js":883}],212:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("./default");function o(){this.type="template",this.showList=["#mode-panel"],this.hideList=["header > .tool-size"],this.disableList=["#header #shr-buttons > a:not(.save)",'.tool-menu a[role="tab"][href="#tabLayouts"]','.tool-content #tabAdmin input[name="search"]',".tool-content #tabAdmin .btn-new-item",'.tool-content #tabAdmin a[data-toggle="accordion"][href="#accordionAdminBackgrounds"]','.tool-content #tabAdmin a[data-toggle="accordion"][href="#accordionAdminStickers"]']}o.prototype=new r,o.prototype.enableUI=function(){r.prototype.enableUI.call(this);var t=e("../editor-mode-manager"),n=this.tool,o=$("#mode-panel");$("#canvas-panel").addClass("mode"),o.find("a").on("click",(function(){INKIVE.Modal.togglePageLoader(!0);var e=function(){t.setMode("default"),INKIVE.Modal.togglePageLoader(!1)};!function(e,t){if("true"!==localStorage.getItem("modalAdminStickerConfirmDontShowAgain"))var n=function(){var e=document.querySelector("input#dont-show-again").checked;localStorage.setItem("modalAdminStickerConfirmDontShowAgain",e),r.close()},r=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("modal_restricted_template_confirm"),{width:550,height:250,headerIcon:"icon-cloud-download",headerTitle:INKIVE.TranslateHelper.translate("modal.admin_sticker.save_changes"),buttons:[{title:INKIVE.TranslateHelper.translate("modal.admin_sticker.save"),cls:"modal-apply-secondary-template",onClick:function(){n(),e()}},{title:INKIVE.TranslateHelper.translate("modal.admin_sticker.discard"),cls:"modal-apply-secondary-template",onClick:function(){n(),t()}}]});else e()}((function(){return n.save(null,e)}),e)}))},o.prototype.disableUI=function(){r.prototype.disableUI.call(this),$("#canvas-panel").removeClass("mode"),$("#mode-panel").find("a").off("click")},o.prototype.afterUIEnable=function(e){this.editor.canvas.runExtensions("enableRuler",{}),this.editor.loadSvgString(Base64.decode(INKIVE.C.BLANK_SVG),_.bind(this.onBlankSVG,this,e),e.format_width,e.format_height)},o.prototype.onBlankSVG=function(e){if(e.content){var t={background:Base64.decode(e.background),defs:Base64.decode(e.defs),content:Base64.decode(e.content)};this.editor.addElement("layout",t),e.old_format_width&&e.old_format_height&&INKIVE.Helpers.converterLayoutSizeChange(e.format_width,e.format_height,e.old_format_width,e.old_format_height)}},t.exports=o},{"../editor-mode-manager":204,"./default":207,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],213:[function(e,t,n){t.exports={VIDEO_YOUTUBE:["IMAGE_REPOSITION","INCREASE","DECREASE","DUPLICATE","REMOVE","GROUP_GROUP","ALIGNMENT","VIDEO_SOURCE","VIDEO_AUTOPLAY","VIDEO_MUTE","VIDEO_MOVE_TO_NEXT","VIDEO_CONTROLS","VIDEO_FULLSCREEN","VIDEO_LOOP","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","DESELECT","UNLOCK","LOCK"],VIDEO:["IMAGE_REPOSITION","ROTATE_LEFT","ROTATE_RIGHT","ROTATE","ALIGNMENT","RESTRICT_CHANGES","DESELECT","INCREASE","DECREASE","DUPLICATE","REMOVE","UNLOCK","LOCK"],TEXT_EDIT:["TEXT_FINISH_EDITING","TEXT_FONTFAMILY","TEXT_FONTSIZE","TEXT_TYPING","TEXT_BOLD","TEXT_ITALIC","TEXT_UNDERLINE","TEXT_CASE","TEXT_BULLETS","TEXT_ALIGN","FILL_COLOR","HIGHLIGHT_COLOR","REMOVE_STYLE","PARAGRAPH_SPACING","DESELECT"],TEXT:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","TEXT_FONTFAMILY","TEXT_FONTSIZE","TEXT_TYPING","OPACITY","FILL_COLOR","HIGHLIGHT_COLOR","STROKE_COLOR","STROKE","TEXT_BOLD","TEXT_ITALIC","TEXT_UNDERLINE","TEXT_CASE","TEXT_BULLETS","TEXT_LIST","TEXT_ALIGN","TEXT_SPACING","TEXT_COLUMNS","TEXT_CONVERT_DX","LOCK","UNLOCK","TEXT_AUTO_ADJUSTABLE","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],LAYOUT:["INCREASE","DECREASE","LAYOUT_CONFIRM","LAYOUT_CLOSE"],IMAGE:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","IMAGE_TAB","IMAGE_REPOSITION","IMAGE_CROP","IMAGE_FILTER","OPACITY","LOCK","UNLOCK","SET_BACKGROUND","IMAGE_BG_REMOVAL","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","FLIP_IMAGE","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],STICKER:["LINK","UNLINK","IMAGE_REPOSITION","INCREASE","DECREASE","DUPLICATE","REMOVE","OPACITY","FILL_COLOR","STROKE_COLOR","STROKE","EXPLODE_STICKER","LOCK","UNLOCK","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","FLIP","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],LOGO:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","OPACITY","LOCK","UNLOCK","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],ICON:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","OPACITY","FILL_COLOR","STROKE_COLOR","LOCK","UNLOCK","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],GROUP:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","GROUP_UNGROUP","OPACITY","LOCK","UNLOCK","GROUP_GROUP","TRANSFORM","ROTATE","ORDER","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","ALIGNMENT","DESELECT"],MULTISELECT:[],DEFAULT:["LINK","UNLINK","INCREASE","DECREASE","DUPLICATE","REMOVE","IMAGE_BOX","OPACITY","FILL_COLOR","STROKE_COLOR","STROKE","LOCK","UNLOCK","GROUP_GROUP","TRANSFORM","ARRANGE","ROTATE","FLIP","ORDER","ALIGNMENT","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT"],BACKGROUND:["BACKGROUND_REMOVE","BACKGROUND_REPOSITION","BACKGROUND_FILTER","BACKGROUND_COLOR_IMAGE","BACKGROUND_COLOR","BACKGROUND_OPACITY","BACKGROUND_BG_REMOVAL","TRANSFORM","BACKGROUND_FLIP","DESELECT","IMAGE_BOX","UNLINK_SMART_ASSET"],TABLE:["LINK","UNLINK","DUPLICATE","REMOVE","LOCK","UNLOCK","ALIGNMENT","ARRANGE","ORDER","OPACITY","CELL_TEXT_TYPING","OPEN_TABLE_EDITOR","CLOSE_TABLE_EDITOR","CELL_SELECT_ALL","CELL_INVERT_SELECTION","CELL_BACKGROUND","CELL_COLOR","CELL_BOLD","CELL_ITALIC","CELL_EDIT_BORDER","CELL_BORDER_COLOR","CELL_MERGE","CELL_SPLIT","CELL_EDIT_ALIGNMENT","ROW_INSERT_BEFORE","ROW_INSERT_AFTER","ROW_DELETE","COLUMN_INSERT_BEFORE","COLUMN_INSERT_AFTER","COLUMN_DELETE"],COMMON:["LINK","UNLINK","DUPLICATE","REMOVE","BACKGROUND_REMOVE","LOCK","UNLOCK","TRANSFORM","ARRANGE","BLEED_CLOSE"],SPECIAL:["GROUP_GROUP","PERMISSIONS","RESTRICT_CHANGES","LIBRARY_ADD","LIBRARY_ADD_QUIET","UNLINK_SMART_ASSET","DESELECT","BLEED_CLOSE","OPEN_TABLE_EDITOR","CLOSE_TABLE_EDITOR"],ROOT:["ROOT_DRAWING","ROOT_SHAPES","ROOT_FRAMES","ROOT_TEXT","ROOT_TABLE"],BLEED:["BLEED_SIZE","BLEED_CLOSE"]}},{}],214:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("./templates/drawing.hbs");t.exports=Backbone.View.extend({buttons:[{tag:"editor.square",mode:"square",icon:"desygner-icon-square"},{tag:"editor.line",mode:"line",icon:"desygner-icon-line"},{tag:"editor.circle",mode:"circle",icon:"desygner-icon-fill"},{tag:"editor.pen",mode:"fhpath",icon:"desygner-icon-drawing"},{tag:"editor.rectangle",mode:"rect",icon:"desygner-icon-rectangle"},{tag:"editor.ellipse",mode:"ellipse",icon:"desygner-icon-elipse"},{tag:"editor.path",mode:"path",icon:"fa fa-bookmark"}],initialize:function(){_.bindAll(this,"changeModeEvent","render"),this.editor=INKIVE.Tool.getInstance().editor,this.$el.closest("a").one("mousedown",this.render)},changeModeEvent:function(e){var t=$(e.currentTarget).data("mode");$("#workarea").css("cursor","crosshair"),this.editor.clearSelection(),this.editor.setMode(t)},render:function(){this.$el.html(r(this.buttons)),this.$el.find(".drawing-tool").on("click",this.changeModeEvent)}})},{"./templates/drawing.hbs":219,"core-js/modules/es.array.find.js":859}],215:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js");var r=e("../../../tool-menu/components/accordion-list/content"),o=e("../../../../analytics/decorate");t.exports=o(e("../../../tool-menu/customize/analytics/placeholders"),r.extend({apiCall:"search/stickers",callbackName:"callbackStickers",initialize:function(){this.debouncedMasonryReload=_.debounce(_.bind(this.masonryReload,this),500),r.prototype.initialize.call(this)},render:function(){this.isAlreadyThere||(this.$el.closest("a").one("mousedown",_.bind((function(){r.prototype.render.call(this);var e=this.$el.find(".thumbnail-wrapper");this.end&&this.end(),this.tool.initScrollDetect(e,this.loadData)}),this)),this.isAlreadyThere=!0)},initDataLoading:_.noop,getParams:function(){var e={from:this.from,limit:this.limit,where:{isPlaceholder:!0,active:INKIVE.C.USER.IS_SUPER?0:1}};return this.from+=this.limit,e},extractData:function(e){return _.map(e,(function(e){var t=this.idPrefix?this.idPrefix+"-":"";return{id:t+="sticker-"+e.id,src:e.url,width:122.5,height:122.5,cls:parseInt(e.active)?"":" grayscale",data:{count:e.count,changeable:e.changeable,isPlaceHolder:!0}}}),this)},getScrollHeight:function(e){return e.height()},getScrollWidth:function(e){return e.width()}}))},{"../../../../analytics/decorate":2,"../../../tool-menu/components/accordion-list/content":315,"../../../tool-menu/customize/analytics/placeholders":396,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905}],216:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js");var r=e("../../../tool-menu/components/accordion-list/content"),o=e("../../../tool-menu/components/thumbnail/shape"),i=e("../../../../analytics/decorate"),s=e("../../../../factory/shapes"),a=e("./templates/shapes.hbs");t.exports=i(e("../../../tool-menu/customize/analytics/shapes"),r.extend({apiCall:"search/shapes",dataName:"shapesCategories",$categorySelect:null,initialize:function(){_.bindAll(this,"loadCategoryContent","loadCategories"),this.$el.closest("a").one("mousedown",this.loadCategories)},initScroll:function(){this.$el&&r.prototype.initScroll.call(this)},loadCategoryContent:function(){this.categoryKey=this.$categorySelect.val(),r.prototype.initialize.call(this)},loadData:function(e,t){this.end=t,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),s.get(this.categoryKey).then(this.onMoreData)},onMoreData:function(e){e.length&&this.appendThumbnails(e),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),this.end(),this.scrollRefresh()},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper");_.each(e,(function(e){var n=$("<div>").addClass("thumbnail");new o({el:n,item:e});n.appendTo(t)}))},loadCategories:function(){s.getCategories().then(_.bind((function(e){var t=_.map(e,(function(e){return{key:e.key,tag:e.name,icon:"fa fa-ellipsis-v"}}));this.$el.html(a(t)),this.$categorySelect=this.$el.find("select.categories"),this.$el=this.$el.find(".shapes-content"),this.$categorySelect.on("change",this.loadCategoryContent),this.$categorySelect.trigger("change")}),this))},getScrollHeight:function(e){return e.parents(".ui-dropdown-items").height()-40},getScrollWidth:function(e){return e.parents(".ui-dropdown-items").width()}}))},{"../../../../analytics/decorate":2,"../../../../factory/shapes":157,"../../../tool-menu/components/accordion-list/content":315,"../../../tool-menu/components/thumbnail/shape":369,"../../../tool-menu/customize/analytics/shapes":397,"./templates/shapes.hbs":220,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],217:[function(e,t,n){"use strict";e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.parse-int.js");var r=e("./templates/text.hbs"),o=e("../../../../facade/design/design");t.exports=Backbone.View.extend({addTextEvent:function(e){var t=$(e.currentTarget);o.create("text",this.getClickElementData(t))},initialize:function(){_.bindAll(this,"render"),this.editor=INKIVE.Tool.getInstance().editor,this.$el.closest("a").one("mousedown",this.render)},render:function(){var e=[50,35,20,15];this.$el.html(r(_.map(INKIVE.C.TextDefault,(function(t,n){return _.extend({fsize:e[n]},t)})))),this.$el.find(".text-tool").on("click",_.bind(this.addTextEvent,this))},getClickElementData:function(e){var t=this.editor.getOffset(),n=this.getBaseElementData(e),r=(t.width-n.size.width)/2;return _.extend(n,{position:{x:Math.floor4(r),y:Math.floor4((t.height-n.font.size)/2)}})},getQuoteScaped:function(e){return e.replace(/^['|"](.*)['|"]$/,(function(e,t){return t}))},getBaseElementData:function(e){var t=this.editor.canvas,n=_.min([t.contentW,t.contentH]),r=e[0].getBoundingClientRect().width,o=Math.round(n*e.data("size")),i=e.text().trim(),s=r*(o/25),a=e.find("span").html();return a&&(s=parseInt($("#svgcontent").attr("width"))/2,i=a),{selected:!0,content:i,font:{size:o,family:this.getQuoteScaped(e.css("font-family"))},size:{width:Math.floor4(s)}}}})},{"../../../../facade/design/design":47,"./templates/text.hbs":222,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.trim.js":929}],218:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.concat.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("./templates/table.hbs")),a=r(e("../../../../facade/design/design")),l=function(){function e(t){(0,o.default)(this,e),this.tableSize={rows:3,columns:3},this.container=t,this.container.parentElement.addEventListener("click",this.render.bind(this)),this.editor=INKIVE.Tool.getInstance().editor}return(0,i.default)(e,[{key:"render",value:function(){var e=this,t="table-edit"===this.editor.canvas.getMode();this.container.innerHTML=(0,s.default)({editMode:t,cells:Array.from({length:5})}),this.container.querySelectorAll(".table-creation-template-cell").forEach((function(t){t.addEventListener("mouseover",e.setTableSizeFromHighlightedCell.bind(e)),t.addEventListener("click",e.createTable.bind(e))})),t&&this.container.querySelector('a[data-action="close-table-editor"]').addEventListener("click",(function(){INKIVE.Table.endTableEditingMode()}))}},{key:"setTableSizeFromHighlightedCell",value:function(e){var t=this;if(e.target){this.tableSize.rows=parseInt(e.target.getAttribute("data-row"))+1,this.tableSize.columns=parseInt(e.target.getAttribute("data-column"))+1;var n=this.container.querySelectorAll(".table-creation-template-cell"),r="table-creation-template-cell-highlighted";n.forEach((function(e){var n=parseInt(e.getAttribute("data-row")),o=parseInt(e.getAttribute("data-column")),i=e.classList.contains(r);n<t.tableSize.rows&&o<t.tableSize.columns?i||e.classList.add(r):i&&e.classList.remove(r)})),this.container.querySelector("span").innerText="".concat(this.tableSize.rows," x ").concat(this.tableSize.columns)}}},{key:"createTable",value:function(e){this.tableSize.rows=parseInt(e.target.getAttribute("data-row"))+1,this.tableSize.columns=parseInt(e.target.getAttribute("data-column"))+1;var t=this.editor.getOffset(),n=INKIVE.Table.cellSizeDefault,r=n.width,o=n.height,i=this.tableSize.columns*r,s=this.tableSize.rows*o;a.default.create("table",{x:Math.floor4(t.width-i)/2,y:Math.floor4(t.height-s)/2,width:i,height:s,rowsCount:this.tableSize.rows,columnsCount:this.tableSize.columns,cellWidth:r,cellHeight:o}),this.container.parentElement.querySelector("span.ui-dropdown-title").dispatchEvent(new Event("blur"))}}]),e}();n.default=l},{"../../../../facade/design/design":47,"./templates/table.hbs":221,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.string.iterator.js":917,"core-js/modules/web.dom-collections.for-each.js":964}],219:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <li>\n    <a class="btn btn-tag drawing-tool item" tag="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:4,column:50},end:{line:4,column:60}}}))+'" data-mode="'+l("function"==typeof(i=null!=(i=c(n,"mode")||(null!=t?c(t,"mode"):t))?i:a)?i.call(s,{name:"mode",hash:{},data:o,loc:{start:{line:4,column:73},end:{line:4,column:83}}}):i)+'">\n      <div class="icon-wrapper"><i class="'+l("function"==typeof(i=null!=(i=c(n,"icon")||(null!=t?c(t,"icon"):t))?i:a)?i.call(s,{name:"icon",hash:{},data:o,loc:{start:{line:5,column:42},end:{line:5,column:52}}}):i)+'"></i></div>\n    </a>\n  </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return"<ul>\n"+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:8,column:11}}}))?i:"")+"</ul>\n"},useData:!0})},{"hbsfy/runtime":1024}],220:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <option value="'+l("function"==typeof(i=null!=(i=c(n,"key")||(null!=t?c(t,"key"):t))?i:a)?i.call(s,{name:"key",hash:{},data:o,loc:{start:{line:5,column:21},end:{line:5,column:30}}}):i)+'">\n        '+l("function"==typeof(i=null!=(i=c(n,"tag")||(null!=t?c(t,"tag"):t))?i:a)?i.call(s,{name:"tag",hash:{},data:o,loc:{start:{line:6,column:8},end:{line:6,column:17}}}):i)+"\n      </option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return'<div>\n  <div class="categories-container">\n    <select class="categories">\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:6},end:{line:8,column:15}}}))?i:"")+'    </select>\n  </div>\n  <div class="shapes-content"></div>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],221:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a class="btn btn-modal" data-action="close-table-editor">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"editor.contextmenu.close_table_editor",{name:"t",hash:{},data:o,loc:{start:{line:3,column:62},end:{line:3,column:107}}}))+"</a>\n    <span>(Escape)</span>\n"},3:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="table-creation-template-header">\n        <i class="fa fa-table" aria-hidden="true"></i>\n        <span>1 x 1</span>\n    </div>\n\n'+(null!=(a=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"cells"):t,{name:"each",hash:{},fn:e.program(4,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:12,column:4},end:{line:18,column:13}}}))?a:"")+"\n"},4:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="table-creation-template-row">\n'+(null!=(a=l(n,"each").call(null!=t?t:e.nullContext||{},null!=s[1]?l(s[1],"cells"):s[1],{name:"each",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:14,column:8},end:{line:16,column:17}}}))?a:"")+"    </div>\n"},5:function(e,t,n,r,o,i,s){var a,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="table-creation-template-cell" data-row="'+l(e.lambda(e.data(o,1)&&c(e.data(o,1),"index"),t))+'" data-column="'+l("function"==typeof(a=null!=(a=c(n,"index")||o&&c(o,"index"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:o,loc:{start:{line:15,column:88},end:{line:15,column:98}}}):a)+'"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="table-creation-template">\n'+(null!=(a=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"editMode"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.program(3,o,0,i,s),data:o,loc:{start:{line:2,column:4},end:{line:20,column:11}}}))?a:"")+"</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],222:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <li>\n    <a class="btn text-tool item" data-size="'+c(typeof(i=null!=(i=u(n,"size")||(null!=t?u(t,"size"):t))?i:a)===l?i.call(s,{name:"size",hash:{},data:o,loc:{start:{line:4,column:45},end:{line:4,column:55}}}):i)+'"  style="font-size: '+c(typeof(i=null!=(i=u(n,"fsize")||(null!=t?u(t,"fsize"):t))?i:a)===l?i.call(s,{name:"fsize",hash:{},data:o,loc:{start:{line:4,column:76},end:{line:4,column:87}}}):i)+"px; font-family: "+c(typeof(i=null!=(i=u(n,"fontFamily")||(null!=t?u(t,"fontFamily"):t))?i:a)===l?i.call(s,{name:"fontFamily",hash:{},data:o,loc:{start:{line:4,column:104},end:{line:4,column:120}}}):i)+'">\n      '+c(typeof(i=null!=(i=u(n,"text")||(null!=t?u(t,"text"):t))?i:a)===l?i.call(s,{name:"text",hash:{},data:o,loc:{start:{line:5,column:6},end:{line:5,column:16}}}):i)+'\n      <span class="hidden">'+c(typeof(i=null!=(i=u(n,"textBlock")||(null!=t?u(t,"textBlock"):t))?i:a)===l?i.call(s,{name:"textBlock",hash:{},data:o,loc:{start:{line:6,column:27},end:{line:6,column:42}}}):i)+"</span>\n    </a>\n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return"<ul>\n"+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:9,column:11}}}))?i:"")+"</ul>\n"},useData:!0})},{"hbsfy/runtime":1024}],223:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.set.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.reverse.js");var o=e("../../../../factory/fonts"),i=e("../../../../facade/design/design");t.exports=Backbone.View.extend({initialize:function(e,t,n,r){this.$elem=e,this.popupMenuCommonFunctions=n,this.buttonSelect=t,this.defaultMenus=r,this.canvas=INKIVE.Tool.getInstance().editor.canvas,this.hasLibrary=n.hasLibrary,_.bindAll(this,"drawTextMenuItems","updateToolbarButtonsAppliedFlag","updateToolbarForResizing","toggleAppliedClass","drawTextBlockActions","updateFontStyle","updateTextAnchor","initSliders","drawFontSizes","isContainsSubset","getFontSubsetByLocale","sortByLocale","drawFontNames","drawFontGroup","drawAFont","drawFontLocaleSelector","isLocaleSubsetSelected","drawLibraryFonts","toggleFontLibraryMenu","addLibraryItems","onFavFontsPreload","prependFav","buildFontMenu","filterFont","importCSSFonts")},drawTextMenuItems:function(){var e="textedit"===this.canvas.getMode();this.$elem.find(">g.textGroup, >text").length&&(new INKIVE.Text.Textarea).setDOM(this.$elem[0]).render(this.canvas),this.$elem.popupmenu({buttons:this.defaultMenus[e?"TEXT_EDIT":"TEXT"]}),this.drawTextBlockActions(),this.highlightSelectedFont(),INKIVE.EditorFacade.on("text.selection_changed",this.updateToolbarButtonsAppliedFlag),INKIVE.EditorFacade.on("text.resized",this.updateToolbarForResizing)},updateToolbarButtonsAppliedFlag:function(e){if(!e.processed){e.processed=!0,u("on_set-bold",e.isBold),u("on_set-italic",e.isItalic),u("on_set-underline",e.isUnderlined),u("on_set-bullets",e.bullets);var t=document.querySelector('[data-action="on_fontsize"] input');t&&(t.value="?"===e.fontSize?"?":Math.precision(e.fontSize,2));var n=document.querySelector('[data-action="on_fontfamily"] span.ui-dropdown-title');n&&(n.textContent=e.fontFamily);var r=document.querySelector('[data-action="colormap-circle"] i.desygner-icon-fill');if(r&&e.fill){r.style.color=e.fill;var o=document.querySelector('[data-action="colormap-circle"] .color-selector-input');o&&(o.value=e.fill.substr(1),o.dispatchEvent(new Event("keyup")))}var i=document.querySelector('[data-action="colormap-circle"] i.fa-h-square');switch(i&&(i.style.color=e.highlight),e.textAnchor){case"start":this.toggleAlignmentAppliedClass("left");break;case"middle":this.toggleAlignmentAppliedClass("center");break;case"end":this.toggleAlignmentAppliedClass("right");break;case"justify_start":this.toggleAlignmentAppliedClass("justify_start");break;case"justify_middle":this.toggleAlignmentAppliedClass("justify_middle");break;case"justify_end":this.toggleAlignmentAppliedClass("justify_end");break;case"justify_all":this.toggleAlignmentAppliedClass("justify_all")}var s=document.querySelector("input#paragraphSpacing"),a=document.querySelector("input#firstLineMargin"),l=document.querySelector("input#lineMargin"),c=document.querySelector("input#lineSpacing");d(s,e.paragraphSpacing),d(a,e.firstLineMargin),d(l,e.lineMargin),d(c,e.lineSpacing)}function u(e,t){var n=document.querySelector('[data-action="'.concat(e,'"]'));n&&(t?n.classList.contains("applied")||n.classList.add("applied"):n.classList.contains("applied")&&n.classList.remove("applied"))}function d(e,t){if(e){e.value=t;var n=$(e.parentNode).find(".slider");n&&n.slider("value",t)}}},updateToolbarForResizing:function(e){var t=document.querySelector('[data-action="on_fontsize"] input');t&&(t.value=Math.precision(e.newFontSize,2))},drawTextBlockActions:function(e){var t=e&&"updateCursorPosition"===e.type,n=(new INKIVE.Text.Textarea).setDOM(this.$elem[0]),r=this.canvas.runExtensions("selectionRange",{});this.styles=n.text.getStyles4Range(r.start,r.end),this.drawFontSizes(),this.drawFontNames(),this.updateFontStyle(),t?this.updateFillColor():(n.text.bullets&&this.toggleAppliedClass("on_set-bullets",!0),n.text.auto_adjustable&&this.toggleAppliedClass("on_set-auto-adjustable",!0),this.updateTextAnchor(n),this.initSliders(n))},updateFontStyle:function(){this.toggleAppliedClass("on_set-bold","bold"===this.styles.font_weight||parseInt(this.styles.font_weight)>=700),this.toggleAppliedClass("on_set-italic","italic"===this.styles.font_style),this.toggleAppliedClass("on_set-underline","underline"===this.styles.text_decoration)},updateFillColor:function(){this.buttonSelect("colormap-circle").find("i.desygner-icon-fill").css("color",this.styles.fill);var e=this.buttonSelect("colormap-circle").find(".color-selector-input");e.val(this.styles.fill.substr(1)),e.trigger("keyup")},updateTextAnchor:function(e){if(this.buttonSelect("on_text-align").length){var t="rtl"===e.text.direction;switch(e.text.text_anchor){case"start":this.toggleAppliedClass("on_set-align-left",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-"+(t?"right":"left"));break;case"middle":this.toggleAppliedClass("on_set-align-center",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-center");break;case"end":this.toggleAppliedClass("on_set-align-right",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-"+(t?"left":"right"));break;case"justify_start":this.toggleAppliedClass("on_set-align-justify_start",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-justify-start");break;case"justify_middle":this.toggleAppliedClass("on_set-align-justify_middle",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-justify-middle");break;case"justify_end":this.toggleAppliedClass("on_set-align-justify_end",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-justify-end");break;case"justify_all":this.toggleAppliedClass("on_set-align-justify_all",!0),this.buttonSelect("on_text-align").find("use").get(0).setAttribute("xlink:href","#text---align-justify-all")}}},initSliders:function(e){this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-paragraph-spacing"),"paragraphSpacing",e.text.paragraph_spacing,-10,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-line-spacing"),"lineSpacing",e.text.line_spacing,-10,100),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-word-spacing"),"wordSpacing",e.text.word_spacing,0,100),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-char-spacing"),"charSpacing",e.text.letter_spacing,-5,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-first-line-margin"),"firstLineMargin",e.text.first_line_margin,0,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-line-margin"),"lineMargin",e.text.line_margin,0,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-paragraph-spacing-dy"),"paragraphSpacing",e.text.paragraph_spacing,-10,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-paragraph-first-line-margin"),"firstLineMargin",e.text.first_line_margin,0,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-paragraph-margin"),"lineMargin",e.text.line_margin,0,200),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-paragraph-dy"),"lineSpacing",e.text.line_spacing,-10,100),this.popupMenuCommonFunctions.initSliderElement(this.buttonSelect("on_set-column-number"),"columnNumber",e.text.columns,1,4)},drawFontSizes:function(){var e=this.buttonSelect("on_fontsize"),t=INKIVE.TemplatesHelper("popupmenu_font_size_list",function(){for(var e=[],t=8;t<=56;t+=2)e.push(t);return e.push(62,74,86,98,110,122,134,146,158),e}());e.find(".ui-dropdown-items").empty().append(t),_.bind((function(){e.find("input").remove();var t=e.find(".ui-dropdown-title").hide(),n=$("<input>");function r(){var e=n.parents(".ui-dropdown"),t=parseFloat(n.val());_.isNumber(t)&&(n.val(t||""),t&&e.trigger("change",[t]))}n.val(Math.precision(this.styles.font_size,1)).insertBefore(t),n.on("keyup",_.debounce(r,500)),n.on("keydown",(function(e){13===e.which&&(e.preventDefault(),r())}))}),this)()},isContainsSubset:function(e){return $.inArray(this.getFontSubsetByLocale(),e.support.subsets)>-1},getFontSubsetByLocale:function(){var e,t=INKIVE.Helpers.cookieStorage.get("locale");return this.$elem.data("font-locale-subset")?e=this.$elem.data("font-locale-subset"):(e=null,_.each(INKIVE.C.LOCALE_SUBSETS,(function(n){$.inArray(t,n.locales)>-1&&(e=n.name)}))),e||"default"},sortByLocale:function(e,t){return(this.isContainsSubset(e)===this.isContainsSubset(t)?0:this.isContainsSubset(e)?-1:1)||e.family.toLowerCase().localeCompare(t.family.toLowerCase())},drawFontNames:function(){var e=this.buttonSelect("on_fontfamily");this.buildFontMenu(e);var t=o.get(this.styles.font_family),n=t&&t.isSystem?"PDF font":this.styles.font_family.replace(/^'(.*)'$/,"$1").replace(/\\'/g,"'");t&&t.isSystem&&this.canvas.call("advice.show","pdf-text"),e.find(".ui-dropdown-title").html(n),INKIVE.Helpers.initTooltips(e)},importCSSFonts:function(e){e=parseInt(e)?e:0;var t=[],n=$("#content")[0].getBoundingClientRect().height;$("a[data-action=on_fontfamily]").find("a[data-type=all], a[data-type=library]").each((function(){var r=this.getBoundingClientRect().y;r>0&&r<n+e&&t.push({family:$(this).data("font-family"),customId:$(this).data("custom-id")})})),o.importDesignCSSFonts(t)},getFontMenu:function(){return $("#element-popupmenu").find("a[data-action=on_fontfamily] > .fullscreen")},buildFontMenu:function(e){var t=this,n=$("#element-popupmenu").find(">.fullscreen ");if(this.getFontMenu().attr("id","font-menu-list"),n.length)return this.getFontMenu().append(n.children()),void n.remove();e.append('<i class="desygner-icon-arrow-down"/>'),e.on("mousedown",(function(){var n=o.getUsableFonts(),s=_.filter(n,(function(e){return!e.isSystem&&!(e.customId||e.templateFonts)}));t.libraryFonts=_.sortBy(_.uniq(_.filter(n,(function(e){return!e.isSystem&&e.customId})),(function(e){return e.family})),"family").filter((function(e){return!e.isDeleted}));var a=Array.from(document.querySelector("#svgcontent").querySelectorAll("[font-family]")).map((function(e){return e.getAttribute("font-family").replace(/^'|'$/g,"")}));a=(0,r.default)(new Set(a));var l=[];t.libraryFonts.concat(n).forEach((function(e){a.includes(e.family)&&!l.find((function(t){return t.family===e.family}))&&!e.isDeleted&&l.push(e)})),1===t.libraryFonts.length&&(l=l.filter((function(e){return!t.libraryFonts.includes(e)}))),s=_.filter(s,t.isLocaleSubsetSelected),t.fontNamesHeader=$('<div class="ui-dropdown-font-names-header">'),t.fontNames=$("<ul>"),l.sort(t.sortByLocale),s.sort(t.sortByLocale),INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_use_desygner_font")&&t.drawFontLocaleSelector(),t.hasLibrary&&t.addLibraryItems(),t.addFontSearch(),t.fontNamesHeader.find(".ui-font-selection").length||(t.fontNamesHeader.find(".ui-dropdown-font-library-icon").css("margin-top",20),t.fontNamesHeader.find(".ui-dropdown-font-search").css("margin-top",60)),t.drawFontGroup(l,"popupmenu.font_title.recent"),t.drawFontGroup(t.libraryFonts,"popupmenu.font_title.library"),t.drawFontGroup(s,"popupmenu.font_title.all");var c=t.$libraryFontsContainer?t.$libraryFontsContainer[0].outerHTML:"";t.getFontMenu().append(t.fontNamesHeader),t.getFontMenu().append(t.fontNames),t.getFontMenu().append('<section class="up"><i class="icon-chevron-up"></i></section><section class="down"><i class="icon-chevron-down"></i></section>'),t.getFontMenu().append(c),t.highlightSelectedFont(),i.off("text.update.font").on("text.update.font",_.bind((function(t){if(t&&t.family){var n=this.getFontMenu(),r='[data-font-family="'.concat(t.family,'"]'),i=n[0].querySelector(r),s=n[0].querySelector("".concat(r,"[data-is-recent-font]"));if(s||(s=n[0].querySelector("".concat(r,'[data-type="recent"]'))),this.libraryFonts.length>1&&i&&!s){(s=i.parentElement.cloneNode(!0)).firstChild.dataset.isRecentFont=!0;var a=n[0].querySelector("div[data-type=recent]");a.parentNode.insertBefore(s,a.nextSibling)}o.importDesignCSSFonts(o.get(t.family));var l=(new INKIVE.Text.Textarea).setDOM(this.$elem[0]),c=this.canvas.runExtensions("selectionRange",{});this.styles=l.text.getStyles4Range(c.start,c.end),this.addFontMenuEvents(e),n.find(">ul").css("top","100px"),n.find("input").val("").trigger("keyup"),this.highlightSelectedFont()}}),t)),t.addFontMenuEvents(e),e.off("mousedown").off("fonts-shown").on("fonts-shown",t.importCSSFonts)}))},highlightSelectedFont:function(){var e=this.styles,t=e.font_family.replace(/^'|'$/g,""),n=this.getFontMenu().find('[data-font-family="'.concat(t,'"]'));this.getFontMenu().find("[data-font-family]").parent().removeClass("selected-font"),n.each((function(t,n){var r=$(n),o=e.font_weight||"";o&&"normal"!==o.toLowerCase()||(o="400"),(r.parent().is(".font-family-container")||r.is("[data-font-weight="+o+"]"))&&r.parent().addClass("selected-font")}))},drawFontGroup:function(e,t){var n=t.replace("popupmenu.font_title.",""),r=$('<div class="ui-dropdown-font-group-title" data-type="'+n+'"><span>'+INKIVE.TranslateHelper.translate(t)+"</span></div>").css("display","none");this.fontNames.append(r),_.each(e,_.bind((function(e){this.drawAFont(o.get(e.family),null,n)}),this))},addLibraryItems:function(){var e=_.isEmpty(this.libraryFonts),t=INKIVE.TranslateHelper.translate("popupmenu.font_title."+(e?"empty_library":"library")),n=$('<div class="ui-dropdown-font-library-icon" data-popover="tooltip" data-placement="bottom"/>');n.append($('<i class="desygner-icon-folder"></i>')),n.attr("data-original-title",t),n.toggleClass("disabled-icon",e),this.fontNamesHeader.append(n),this.drawLibraryFonts()},addFontSearch:function(){var e=$('<div class="ui-dropdown-font-search"/>'),t=$('<input type="text" placeholder="'+INKIVE.TranslateHelper.translate("popupmenu.font_title.search_font")+'"/>');e.append(t),e.append($('<i class="desygner-icon-search"/>')),this.fontNamesHeader.append(e)},filterFont:function(e){var t=$(".fullscreen>ul>li"),n=t.parent();t.find(">a").each((function(){var t=$(this);t.parent().toggle(t.html().toLowerCase().indexOf($(e.target).val().toLowerCase())>-1)})),n.find("div[data-type]").hide(),t.each((function(){var e=$(this);e.is(":visible")&&n.find("div[data-type="+e.find("a").data("type")+"]").show()})),n.css("top",100),n.siblings(".up").hide(),_.delay(this.importCSSFonts,100)},drawAFont:function(e,t,n){var r=t||this.fontNames,o=e.support.variants||["400"],i=1===o.length,s="",a=[];r.find("div[data-type="+n+"]").css("display","block"),i||$.each(e.support.variants,(function(t,n){if(!n.match(/italic/)){a.push(n);var r=INKIVE.TranslateHelper.translate("font_variant."+n);n+"".toLowerCase()==="normal"&&(n="400"),s+='<li data-popover="tooltip" data-original-title="'+r+'" data-title="'+r+'" ><a role="menuitem"  data-font-family="'+e.family+'" data-font-weight="'+n+'" style="font-family: \''+e.family.replace(/'/g,"\\'")+"'; font-weight: "+n+';" >'+e.family+"</a></li>"}}));var l="",c="",u="";jQuery.grep(a,(function(e){return 700!==e})).length>0&&(l='<section class="ui-dropdown-items sub"><ul>'+s+"</ul></section>",c=' class="dropdown-hover"',u='<i class="arrow icon-chevron-right"></i>');var d=i?o[0]:"400",p=e.customId?"data-custom-id="+e.customId:"";r.append($('<li  class="font-family-container" ><a data-type="'+n+'" role="menuitem" '+c+" style=\"font-family: '"+e.family.replace(/'/g,"\\'")+"'; font-weight: "+d+'" data-font-family="'+e.family+'" data-font-weight="'+d+'" '+p+'><span class="font-family-link-container">'+e.family+"</span></a>"+u+l+"</li>"))},drawFontLocaleSelector:function(){var e=[],t=this.getFontSubsetByLocale()||"default",n={default:INKIVE.TranslateHelper.translate("popupmenu.font_locale.languages.title.default"),arabic:"Arabic",bengali:"Bengali",chinese:"中国",cyrillic:"кириллица",devanagari:"Devanagari",greek:"ελληνικά",gujarati:"Gujarati",gurmukhi:"Gurmukhi",hebrew:"עברי",kannada:"Kannada",khmer:"Khmer",korean:"한국의",japanese:"日本の","latin-ext":"Latin Ext",malayalam:"Malayalam",myanmar:"Myanmar",oriya:"Oriya",sinhala:"Sinhala",tamil:"Tamil",telugu:"Telugu",thai:"Thai",vietnamese:"Vietnamese"},r=$('<section class="ui-font-selection"/>'),i=$('<section class="ui-dropdown-items antiscroll-wrap"/>'),s=$('<section class="antiscroll-inner"/>'),a=$("<ul/>"),l=$('<a role="menuitem"  class="dropdown-hover">'+n[t]+"</a>");$.each(INKIVE.C.LOCALE_SUBSETS,(function(r,i){if("default"===i.name||_.filter(o.get(),(function(e){return _.contains(e.support.subsets,i.name)}),"latin").length){e.push(i.name);var s=INKIVE.TranslateHelper.translate("popupmenu.font_locale.languages.tooltip."+i.name);a.append($('<li class="font-locale'+(t===i.name?" selected":"")+'"><a data-font-locale-subset="'+i.name+'" role="menuitem" data-popover="tooltip" data-original-title="'+s+'" data-title="'+s+'" data-placement="right">'+n[i.name]+"</a></li>"))}})),i.append(s),s.append(a),this.fontNamesHeader.append($('<div class="ui-dropdown-all-languages-title">'+INKIVE.TranslateHelper.translate("popupmenu.font_locale.title")+"</div>")),r.append(l),r.append($('<i class="desygner-icon-arrow-down"></i>')),r.append(i),this.fontNamesHeader.append(r)},drawLibraryFonts:function(){this.$libraryFontsContainer=$('<section class="ui-font-library-container"/>');var e=$('<div class="ui-dropdown-font-library-icons"/>');e.append('<div class="ui-dropdown-font-library-icon"><i class="desygner-icon-folder"></i></div>');var t=$('<div class="ui-dropdown-font-library-back-icon"><i class="desygner-icon-back"></i></div>');e.append(t),this.$libraryFontsContainer.append(e);var n=$("<ul/>"),r=$('<section class="ui-dropdown-font-group-title" data-type="library-fonts" ><span>'+INKIVE.TranslateHelper.translate("popupmenu.font_title.library")+"</span></section>");_.each(this.libraryFonts,_.bind((function(e){this.drawAFont(e,n,r.data("type"))}),this)),this.$libraryFontsContainer.append(r),this.$libraryFontsContainer.append(n),n.after('<section class="down"><i class="icon-chevron-down"></i><section>').after('<section class="up"><i class="icon-chevron-up"></i><section>')},addAntiScroll:function(e){e.antiscroll({autoHide:!1,width:e.width(),height:e.height()})},addFontMenuEvents:function(e){this.toggleFontLibraryMenu(!1),e.find(".ui-font-selection").off("click").on("click",_.bind((function(e){var t=$(e.target);if(t.parents().andSelf().is(".ui-dropdown-items.antiscroll-wrap")){var n=t.data("font-locale-subset")||t.find(">[data-font-locale-subset]").data("font-locale-subset");n&&(this.getFontMenu().remove(),INKIVE.EditorFacade.canvas.runExtensions("reloadFontLocaleSubset",n))}else this.getFontMenu().find(".ui-font-selection .antiscroll-wrap").toggle();this.addAntiScroll($(".ui-font-selection .antiscroll-wrap")),e.stopPropagation()}),this));var t=e.find(".ui-dropdown-items.sub").parent();t.off("mouseenter").on("mouseenter",this.toggleSubContainer),t.off("mouseleave").on("mouseleave",this.toggleSubContainer),e.find(".ui-dropdown-items.fullscreen>ul, .ui-font-library-container>ul").each(_.bind((function(e,t){var n=$(t);n.off("DOMMouseScroll mousewheel scroll").on("DOMMouseScroll mousewheel scroll",_.bind((function(e){var t=e.originalEvent;$(e.target).parents(".ui-font-selection").length||($(".ui-font-selection").find(".ui-dropdown-items").hide(),this.scroll(n,t.deltaY||t.wheelDelta))}),this)),n.siblings(".up").off("click").on("click",_.bind((function(){this.scroll(n,-500)}),this)),n.siblings(".down").off("click").on("click",_.bind((function(){this.scroll(n,500)}),this))}),this));var n=e.find(".ui-dropdown-font-names-header .ui-dropdown-font-library-icon");n.off("click").on("click",_.bind((function(e){n.is(".disabled-icon")||(this.toggleFontLibraryMenu(!0),e.stopPropagation())}),this)),e.find(".ui-dropdown-font-library-back-icon").off("click").on("click",_.partial(this.toggleFontLibraryMenu,!1)),e.find(".ui-dropdown-font-search input[type=text]").off("keyup").on("keyup",this.filterFont)},toggleSubContainer:function(e){var t=e.target.closest("li"),n="mouseenter"===e.type,r=t.querySelector(".ui-dropdown-items.sub"),o=t.closest(".fullscreen");o.dataset.originalWidth||(o.dataset.originalWidth=getComputedStyle(o).width);var i=parseFloat(o.dataset.originalWidth);o.querySelectorAll(".sub").forEach((function(e){e.style.display="none"})),n&&(i+=parseFloat(getComputedStyle(r).width),r.style.display="block"),o.style.width=i+"px"},scroll:function(e,t){var n=e.offset().top,r=e.find(">li:visible:last").offset().top,o=$(".ui-dropdown-items.fullscreen"),i=n-t-50,s=o.height();i>100?i=100:r-t<s&&(i=n-(r-s)-100),i<=100&&(e.css({top:i}),o.find(".up").toggle(100!==i)),this.importCSSFonts(t)},toggleFontLibraryMenu:function(e){var t=this.getFontMenu().parent().find(".ui-font-library-container");this.getFontMenu().parent().find(">.down").toggle(!e);var n=this.getFontMenu().parent().find(">.up");n.hide(),!e&&parseInt(this.getFontMenu().parent().find(">ul").css("top"))<100&&n.show(),t.toggle(e),e&&this.getFontMenu().find(".ui-font-selection .ui-dropdown-items").hide()},isLocaleSubsetSelected:function(e){return"default"===this.getFontSubsetByLocale()&&e.support.isDefault||this.isContainsSubset(e)?e:void 0},onFavFontsPreload:function(){var e=this.buttonSelect("on_fontfamily")&&this.buttonSelect("on_fontfamily").find(".ui-dropdown-items ul li hr").length;INKIVE.Tool._cache.favFonts.length&&!e&&(this.prependFav("on_fontsize","fontSize",(function(e){return'<li><a role="menuitem">'+Math.precision(e,1)+" pt</a></li>"})),this.prependFav("on_fontfamily","fontFamily",(function(e){return'<li><a role="menuitem" style="font-family: '+e+';" font-family="'+e+'">'+e+"</a></li>"})))},toggleAppliedClass:function(e,t){this.buttonSelect(e).toggleClass("applied",t)},toggleAlignmentAppliedClass:function(e){["right","left","center","justify_start","justify_middle","justify_end","justify_all"].forEach((function(e){var t=document.querySelector('[data-action="on_set-align-'.concat(e,'"]'));t&&t.classList.toggle("applied",!1)}));var t=document.querySelector('[data-action="on_set-align-'.concat(e,'"]')),n=document.querySelector('[data-action="on_text-align"] use');t&&t.classList.toggle("applied",!0),e.includes("justify")&&(e=e.replace("_","-")),n&&n.setAttribute("xlink:href","#text---align-".concat(e))},prependFav:function(e,t,n){var r=this.buttonSelect(e);if(r){var o=r.find(" > .ui-dropdown-items > ul"),i=_.map(this.getProcessedValues(t),n).join("");o.prepend(i)}},getProcessedValues:function(e){return _(INKIVE.Tool._cache.favFonts).chain().flatten().pluck(e).unique().value().reverse()}})},{"../../../../facade/design/design":47,"../../../../factory/fonts":125,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.set.js":912,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],224:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="add-to-library-options-type">\n        <span>'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"popupmenu.library.add_as_type_title",{name:"t",hash:{},data:o,loc:{start:{line:8,column:14},end:{line:8,column:57}}}))+"</span>\n\n        <div>\n"+(null!=(i=a(n,"each").call(s,null!=(i=null!=t?a(t,"options"):t)?a(i,"type"):i,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:10},end:{line:21,column:19}}}))?i:"")+"        </div>\n      </div>\n"},2:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='          <div class="radio-btn">\n            <input id="library-type-'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:13,column:36},end:{line:13,column:45}}}):s)+'"\n              type="radio"\n              name="library-type"\n              value="'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:16,column:21},end:{line:16,column:30}}}):s)+'"\n              ';return s=null!=(s=p(n,"selected")||(null!=t?p(t,"selected"):t))?s:c,a={name:"selected",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:17,column:14},end:{line:17,column:47}}},i=typeof s===u?s.call(l,a):s,p(n,"selected")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(h+=i),h+'\n            >\n            <label for="library-type-'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:19,column:37},end:{line:19,column:46}}}):s)+'">'+d(typeof(s=null!=(s=p(n,"title")||(null!=t?p(t,"title"):t))?s:c)===u?s.call(l,{name:"title",hash:{},data:o,loc:{start:{line:19,column:48},end:{line:19,column:57}}}):s)+"</label>\n          </div>\n"},3:function(e,t,n,r,o){return"checked"},5:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="add-to-library-options-source">\n        <span>'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"popupmenu.library.add_as_source_title",{name:"t",hash:{},data:o,loc:{start:{line:28,column:14},end:{line:28,column:59}}}))+"</span>\n\n        <div>\n"+(null!=(i=a(n,"each").call(s,null!=(i=null!=t?a(t,"options"):t)?a(i,"source"):i,{name:"each",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:10},end:{line:41,column:19}}}))?i:"")+"        </div>\n      </div>\n"},6:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='          <div class="radio-btn">\n            <input id="library-source-'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:33,column:38},end:{line:33,column:47}}}):s)+'"\n              type="radio"\n              name="library-source"\n              value="'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:36,column:21},end:{line:36,column:30}}}):s)+'"\n              ';return s=null!=(s=p(n,"selected")||(null!=t?p(t,"selected"):t))?s:c,a={name:"selected",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:37,column:14},end:{line:37,column:47}}},i=typeof s===u?s.call(l,a):s,p(n,"selected")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(h+=i),h+'\n            >\n            <label for="library-source-'+d(typeof(s=null!=(s=p(n,"value")||(null!=t?p(t,"value"):t))?s:c)===u?s.call(l,{name:"value",hash:{},data:o,loc:{start:{line:39,column:39},end:{line:39,column:48}}}):s)+'">'+d(typeof(s=null!=(s=p(n,"title")||(null!=t?p(t,"title"):t))?s:c)===u?s.call(l,{name:"title",hash:{},data:o,loc:{start:{line:39,column:50},end:{line:39,column:59}}}):s)+"</label>\n          </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="add-to-library-options">\n  <div>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"popupmenu.library.add_to_library",{name:"t",hash:{},data:o,loc:{start:{line:2,column:7},end:{line:2,column:47}}}))+"</div>\n\n  "+c("function"==typeof(s=null!=(s=u(n,"handlerType")||(null!=t?u(t,"handlerType"):t))?s:l)?s.call(a,{name:"handlerType",hash:{},data:o,loc:{start:{line:4,column:2},end:{line:4,column:17}}}):s)+'\n  <div class="options-container">\n'+(null!=(i=(u(n,"eq")||t&&u(t,"eq")||l).call(a,null!=(i=null!=(i=null!=t?u(t,"options"):t)?u(i,"type"):i)?u(i,"length"):i,2,{name:"eq",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:6},end:{line:24,column:13}}}))?i:"")+"\n"+(null!=(i=(u(n,"eq")||t&&u(t,"eq")||l).call(a,null!=(i=null!=(i=null!=t?u(t,"options"):t)?u(i,"source"):i)?u(i,"length"):i,2,{name:"eq",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:6},end:{line:44,column:13}}}))?i:"")+'  </div>\n\n  <div class="footer">\n    <button class="apply btn">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.general.add",{name:"t",hash:{},data:o,loc:{start:{line:48,column:30},end:{line:48,column:54}}}))+"</button>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],225:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.includes.js");var o,i,s=r(e("@babel/runtime/regenerator")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=e("./add-to-assets.hbs"),c=e("../../../../factory/library").factory,u=e("../../../../factory/library/library-populator"),d=e("../../../../facade/design/design"),p=e("../../../../factory/user-info"),h=e("../../../../factory/company").instance;t.exports=Backbone.View.extend({resourceType:void 0,librarySource:"member",workspaceLibrary:null,libraryInstance:null,events:{"click .apply.btn":"applyEvent",'change .add-to-library-options input[name="library-type"]':"changeType",'change .add-to-library-options input[name="library-source"]':"changeSource"},applyEvent:(i=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.libraryInstance=new c({librarySource:this.librarySource,domain:this.companyDomain}),u.setLibrary(this.libraryInstance),u.addElementToLibrary(this.element,this.resourceType,!0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),changeType:function(e){this.resourceType=e.target.value},changeSource:function(e){this.librarySource=e.target.value},initialize:(o=(0,a.default)(s.default.mark((function e(t){var n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.element=t.selectedElement,e.next=3,h.getCompanyData();case 3:return n=e.sent,this.companyDomain=null==n?void 0:n.domain,e.next=7,p.getMembership();case 7:r=e.sent,this.canManage=null==r?void 0:r.permissions.assets_manage,this.render();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),render:function(){var e=$(this.element).is(".background")?"background":this.element.getAttribute("id"),t=d.get(e);if(t){this.resourceType=["sticker","group","shape"].includes(t.type)?"icon":t.type,this.librarySource=this.canManage?"workspace":"member";var n=[{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_to_user"),value:"member",selected:"member"===this.librarySource}];this.canManage&&n.unshift({title:INKIVE.TranslateHelper.translate("popupmenu.library.add_to_workspace"),value:"workspace",selected:!0});var r={type:[],source:n};switch(this.resourceType){case"icon":r.type=[{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_as_icon"),value:"icon",selected:!0},{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_as_logo"),value:"logo",selected:!1}];break;case"logo":r.type=[{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_as_logo"),value:"logo",selected:!0},{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_as_icon"),value:"icon",selected:!1}];break;default:r.type=[{title:INKIVE.TranslateHelper.translate("popupmenu.library.add_as_".concat(this.resourceType)),value:this.resourceType,selected:!0}]}var o=l({options:r});this.$el.html(o)}}})},{"../../../../facade/design/design":47,"../../../../factory/company":122,"../../../../factory/library":128,"../../../../factory/library/library-populator":135,"../../../../factory/user-info":161,"./add-to-assets.hbs":224,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.includes.js":864}],226:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'\x3c!--\n    Vertical\n        t: top\n        c: center\n        b: bottom\n\n    Horizontal\n        s: start (left for LTR and right for RTL)\n        m: middle\n        e: end (right for LTR and left for RTL)\n--\x3e\n<div class="table-cell-alignment-form">\n    <div data-position="ts"></div>\n    <div data-position="tm"></div>\n    <div data-position="te"></div>\n\n    <div data-position="cs"></div>\n    <div data-position="cm"></div>\n    <div data-position="ce"></div>\n\n    <div data-position="bs"></div>\n    <div data-position="bm"></div>\n    <div data-position="be"></div>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],227:[function(e,t,n){"use strict";var r=e("./edit-cell-alignment.hbs");t.exports=Backbone.View.extend({events:{"click div:not(.table-cell-alignment-form)":"applyEvent"},applyEvent:function(e){var t=e.target.getAttribute("data-position");if(t&&2===t.length){var n="middle",r="center";switch(t[0]){case"t":r="top";break;case"b":r="bottom"}switch(t[1]){case"s":n="start";break;case"e":n="end"}INKIVE.Table.setTextAlignment(n,r)}},initialize:function(e){this.element=e.selectedElement,this.render()},render:function(){this.$el.html(r({}))}})},{"./edit-cell-alignment.hbs":226}],228:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n    <div class="table-cell-border-editor-form">\n\n        <div class="table-cell-border-editor-row">\n            <label for="border-width">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_width",{name:"t",hash:{},data:o,loc:{start:{line:5,column:38},end:{line:5,column:77}}}))+'</label>\n            <input type="number" name="border-width" required value="1" />\n        </div>\n\n        <div class="table-cell-border-editor-row">\n            <label for="border-dash">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_dash_size",{name:"t",hash:{},data:o,loc:{start:{line:10,column:37},end:{line:10,column:80}}}))+'</label>\n            <input type="number" name="border-dash" required value="0" />\n        </div>\n\n        <div class="table-cell-border-editor-row">\n            <label for="apply-to">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_apply_to",{name:"t",hash:{},data:o,loc:{start:{line:15,column:34},end:{line:15,column:76}}}))+'</label>\n            <select name="apply-to">\n                <optgroup label="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_quick",{name:"t",hash:{},data:o,loc:{start:{line:17,column:33},end:{line:17,column:72}}}))+'">\n                    <option value="all">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_all",{name:"t",hash:{},data:o,loc:{start:{line:18,column:40},end:{line:18,column:77}}}))+'</option>\n                    <option value="vertical">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_vertical",{name:"t",hash:{},data:o,loc:{start:{line:19,column:45},end:{line:19,column:87}}}))+'</option>\n                    <option value="horizontal">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_horizontal",{name:"t",hash:{},data:o,loc:{start:{line:20,column:47},end:{line:20,column:91}}}))+'</option>\n                </optgroup>\n                <optgroup label="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_single",{name:"t",hash:{},data:o,loc:{start:{line:22,column:33},end:{line:22,column:73}}}))+'">\n                    <option value="left">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_left",{name:"t",hash:{},data:o,loc:{start:{line:23,column:41},end:{line:23,column:79}}}))+'</option>\n                    <option value="right">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_right",{name:"t",hash:{},data:o,loc:{start:{line:24,column:42},end:{line:24,column:81}}}))+'</option>\n                    <option value="top">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_top",{name:"t",hash:{},data:o,loc:{start:{line:25,column:40},end:{line:25,column:77}}}))+'</option>\n                    <option value="bottom">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.contextmenu.border_bottom",{name:"t",hash:{},data:o,loc:{start:{line:26,column:43},end:{line:26,column:83}}}))+'</option>\n                </optgroup>\n            </select>\n        </div>\n    </div>\n    <a class="btn btn-modal">Apply</a>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],229:[function(e,t,n){"use strict";var r=e("./edit-cell-border.hbs");t.exports=Backbone.View.extend({events:{"click .btn":"applyEvent",'change input[name="border-width"]':"setWidth",'change input[name="border-dash"]':"setDash",'change select[name="apply-to"]':"setApplyTo"},color:void 0,width:1,dash:0,applyTo:"all",setWidth:function(e){var t=e.target.value;t<1&&(t=1,this.color="transparent"),t>10&&(t=10),this.width=t},setDash:function(e){var t=e.target.value;t<0&&(t=0),this.dash=t},setApplyTo:function(e){this.applyTo=e.target.value},applyEvent:function(){var e=INKIVE.Table.convertBorderNameToFlag(this.applyTo)||"lrtb";INKIVE.Table.setBorderStyle({where:e,stroke:this.color,strokeWidth:this.width,strokeDash:this.dash})},initialize:function(e){this.element=e.selectedElement,this.render()},render:function(){this.$el.html(r({}))}})},{"./edit-cell-border.hbs":228}],230:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lambda,s=e.escapeExpression;return'        <option value="'+s(i(t,t))+'">'+s(i(t,t))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="table-cell-font-form">\n\n    <label for="font-size">Font size</label>\n    <select name="font-size">\n        <option value="12">12</option>\n        <option value="14">14</option>\n        <option value="16">16</option>\n        <option value="18">18</option>\n        <option value="22">22</option>\n        <option value="28">28</option>\n        <option value="32">32</option>\n        <option value="48">48</option>\n        <option value="64">64</option>\n        <option value="72">72</option>\n    </select>\n\n    <label for="font-family">Font family</label>\n    <select name="font-family">\n'+(null!=(i=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"fonts"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:8},end:{line:21,column:17}}}))?i:"")+"    </select>\n\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],231:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js");var r=e("./edit-cell-font.hbs");t.exports=Backbone.View.extend({events:{'change select[name="font-size"]':"setFontSize",'change select[name="font-family"]':"setFontFamily"},setFontSize:function(e){INKIVE.Table.setFontSize(parseInt(e.target.value))},setFontFamily:function(e){INKIVE.Table.setFontFamily(e.target.value)},initialize:function(e){this.element=e.selectedElement,this.fonts=[],this.render()},render:function(){this.$el.html(r({fonts:this.fonts}))}})},{"./edit-cell-font.hbs":230,"core-js/modules/es.parse-int.js":905}],232:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="edit-ordered-list">\n\n    <div id="text-ordered-tools">\n        <label for="text-ordered-start">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"popupmenu.text_list.start_from",{name:"t",hash:{},data:o,loc:{start:{line:4,column:40},end:{line:4,column:78}}}))+'</label>\n        <input name="text-ordered-start" id="text-ordered-start" type="number" value="'+l("function"==typeof(i=null!=(i=c(n,"orderedStart")||(null!=t?c(t,"orderedStart"):t))?i:a)?i.call(s,{name:"orderedStart",hash:{},data:o,loc:{start:{line:5,column:86},end:{line:5,column:102}}}):i)+'">\n        <div class="btn btn-modal" id="text-ordered-toggle">Toggle</div>\n    </div>\n\n    <div id="text-ordered-marks" >\n        <div data-mark=".">Period</div>\n        <div data-mark=")">Parenthesis</div>\n        <div data-mark="-">Dash</div>\n        <div data-mark=" ">Space</div>\n    </select>\n    \n</div>'},useData:!0})},{"hbsfy/runtime":1024}],233:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js");var r=e("./edit-ordered-list.hbs");t.exports=Backbone.View.extend({ordered:!1,orderedStart:1,orderedMark:".",events:{"click div#text-ordered-toggle":"toggleTextOrdered","change input#text-ordered-start":"setOrderStart","click div#text-ordered-marks div[data-mark]":"setOrderMark"},setTextValues:function(){INKIVE.DesignFacade.set({bullet_points:!1,anchor:"start",ordered_list:this.ordered,ordered_start:this.orderedStart,ordered_mark:this.orderedMark})},toggleTextOrdered:function(e){this.ordered=!this.ordered,this.setTextValues()},setOrderStart:function(e){this.orderedStart=parseInt(e.target.value),(isNaN(this.orderedStart)||this.orderedStart<1||this.orderedStart>1e4)&&(this.orderedStart=1),this.ordered=!0,this.setTextValues()},setOrderMark:function(e){this.orderedMark=e.target.getAttribute("data-mark")||".",this.ordered=!0,this.setTextValues()},initialize:function(e){this.element=e.selectedElement;var t=(new INKIVE.Text.Textarea).setDOM(this.element);this.ordered=t&&t.text.ordered,this.orderedStart=t&&t.text.orderedStart||1,this.orderedMark=t&&t.text.orderedMark||".",this.render()},render:function(){this.$el.html(r({ordered:this.ordered,orderedStart:this.orderedStart,orderedMark:this.orderedMark}))}})},{"./edit-ordered-list.hbs":232,"core-js/modules/es.parse-int.js":905}],234:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return" disabled"},3:function(e,t,n,r,o){return" checked"},5:function(e,t,n,r,o){return"https://desygner.com"},7:function(e,t,n,r,o){return' value="'+e.escapeExpression(e.lambda(t,t))+'"'},9:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='  <div class="option';return s=null!=(s=d(n,"is_set")||(null!=t?d(t,"is_set"):t))?s:c,a={name:"is_set",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:20},end:{line:14,column:51}}},i="function"==typeof s?s.call(l,a):s,d(n,"is_set")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+='">\n  <span class="filter-line">\n  <p class="desygner-custom-check">\n      <label>\n        <input type="radio" name="link-type" value="anchor" id="anchor-link-type"',s=null!=(s=d(n,"anchor")||(null!=t?d(t,"anchor"):t))?s:c,a={name:"anchor",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:81},end:{line:18,column:111}}},i="function"==typeof s?s.call(l,a):s,d(n,"anchor")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+'/>\n        <label for="anchor-link-type">'+e.escapeExpression((d(n,"t")||t&&d(t,"t")||c).call(l,"popupmenu.dropdown_options.alignment.page",{name:"t",hash:{},data:o,loc:{start:{line:19,column:38},end:{line:19,column:87}}}))+'</label>\n        <select class="disabled desygner-select-custom" name="anchor">\n          <option value=""></option>\n'+(null!=(i=d(n,"each").call(l,null!=t?d(t,"pages"):t,{name:"each",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:10},end:{line:24,column:19}}}))?i:"")+'        </select>\n        <span class="radiomark"></span>\n      </label>\n    </p>\n\n  </span>\n  </div>\n'},10:function(e,t,n,r,o){var i=e.lambda,s=e.escapeExpression;return'            <option value="'+s(i(t,t))+'" class="desygner-option-custom"> '+s(i(t,t))+"</option>\n"},12:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="remove btn">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.tooltip.remove",{name:"t",hash:{},data:o,loc:{start:{line:34,column:33},end:{line:34,column:65}}}))+"</a>"},14:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="apply btn">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"editor.apply",{name:"t",hash:{},data:o,loc:{start:{line:35,column:32},end:{line:35,column:52}}}))+"</a>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='<div class="option';return s=null!=(s=p(n,"is_set")||(null!=t?p(t,"is_set"):t))?s:c,a={name:"is_set",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:18},end:{line:1,column:49}}},i=typeof s===u?s.call(l,a):s,p(n,"is_set")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='">\n  <span class="filter-line">\n    <p class="desygner-custom-check">\n      <label>\n        <input type="radio" name="link-type" value="url" ',s=null!=(s=p(n,"is_set")||(null!=t?p(t,"is_set"):t))?s:c,a={name:"is_set",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:5,column:57},end:{line:5,column:87}}},i=typeof s===u?s.call(l,a):s,p(n,"is_set")||(i=d.call(t,i,a)),null!=i&&(h+=i),s=null!=(s=p(n,"url")||(null!=t?p(t,"url"):t))?s:c,a={name:"url",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:87},end:{line:5,column:111}}},i=typeof s===u?s.call(l,a):s,p(n,"url")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='/>\n        <input type="text" name="url" placeholder="',s=null!=(s=p(n,"is_desygner")||(null!=t?p(t,"is_desygner"):t))?s:c,a={name:"is_desygner",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:51},end:{line:6,column:103}}},i=typeof s===u?s.call(l,a):s,p(n,"is_desygner")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='" ',s=null!=(s=p(n,"url")||(null!=t?p(t,"url"):t))?s:c,a={name:"url",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:105},end:{line:6,column:137}}},i=typeof s===u?s.call(l,a):s,p(n,"url")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='/>\n        <span class="radiomark"></span>\n      </label>\n    </p>\n  </span>\n</div>\n\n'+(null!=(i=p(n,"unless").call(l,null!=t?p(t,"hide_pages"):t,{name:"unless",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:0},end:{line:32,column:11}}}))?i:"")+"\n",s=null!=(s=p(n,"is_set")||(null!=t?p(t,"is_set"):t))?s:c,a={name:"is_set",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:34,column:0},end:{line:34,column:80}}},i=typeof s===u?s.call(l,a):s,p(n,"is_set")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n",s=null!=(s=p(n,"is_set")||(null!=t?p(t,"is_set"):t))?s:c,a={name:"is_set",hash:{},fn:e.noop,inverse:e.program(14,o,0),data:o,loc:{start:{line:35,column:0},end:{line:35,column:67}}},i=typeof s===u?s.call(l,a):s,p(n,"is_set")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+'\n\n\x3c!--\n<input type="text" value="\' + val + \'" readonly="readonly" /><a class="btn"><i class="desygner-icon-close"></i></a>\n--\x3e\n'},useData:!0})},{"hbsfy/runtime":1024}],235:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var r=e("./link.hbs");t.exports=Backbone.View.extend({mode:"url",events:{"click .apply.btn":"applyEvent","click .remove.btn":"removeEvent","click [type=radio]":"toggleEvent"},removeEvent:function(){this.canvas.removeHyperlink()},applyEvent:function(){var e=this.$el.find('[name="'+this.mode+'"]').val();e&&(e="url"===this.mode?INKIVE.Helpers.isUrlValid(e)||0===e.indexOf("https://")?e:"https://"+e:"#"+e,this.canvas.makeHyperlink(e),INKIVE.DesignFacade.trigger("link.update"))},toggleEvent:function(e){var t=$(e.currentTarget).attr("value"),n=$(e.currentTarget).is(":checked");n&&(this.mode=t),this.$el.find("[name=url],[name=anchor]").addClass("disabled"),this.$el.find('[name="'+t+'"]').toggleClass("disabled",!n)},initialize:function(e){this.href=e.href,this.canvas=e.canvas,this.render()},render:function(){for(var e=this.href&&0===this.href.indexOf("#")&&this.href.replace("#",""),t=!e&&this.href,n=[],o=1;o<=INKIVE.C.BOOK.num_pages;o++)n.push(o);var i=r({anchor:e,url:t,is_set:e||t,hide_pages:INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN||1===INKIVE.C.BOOK.num_pages,is_desygner:INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN,pages:n});this.$el.html(i),e&&this.$el.find("[name=anchor]").val(e)}})},{"./link.hbs":234,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],236:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js");var r=e("../../../utils/humps"),o=e("./default-menus.json"),i=e("./popupmenu-events"),s=e("./popupmenu-common-functions"),a=e("./popupmenu-element-items-drawer"),l=e("./dropdown/link"),c=e("./dropdown/add-to-assets"),u=e("./dropdown/edit-cell-alignment"),d=e("./dropdown/edit-cell-border"),p=e("./dropdown/edit-cell-font"),h=e("./dropdown/edit-ordered-list");t.exports=Backbone.View.extend({defaultMenus:o,initialize:function(){_.bindAll(this,"buildPopupMenu"),this.popupMenuEvents=new i,this.popupMenuCommonFunctions=new s,this.editor=INKIVE.Tool.getInstance().editor,INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE&&(this.defaultMenus.TEXT.unshift("PERMISSIONS"),this.defaultMenus.LOGO.unshift("PERMISSIONS"),this.defaultMenus.ICON.unshift("PERMISSIONS"),this.defaultMenus.VIDEO.unshift("PERMISSIONS"),this.defaultMenus.IMAGE.unshift("PERMISSIONS"),this.defaultMenus.STICKER.unshift("PERMISSIONS"),this.defaultMenus.DEFAULT.unshift("PERMISSIONS"),this.defaultMenus.BACKGROUND.unshift("PERMISSIONS"))},buildPopupMenu:function(e,t,n,o){var i=this;if(this.$elem=$(e),!INKIVE.C.IS_MOBILE_APP){if("multiselect"===t){for(var s=[],l=function(e){var t="misc"===n[e]?"DEFAULT":n[e].toUpperCase();s=0===e?i.defaultMenus[t]:s.filter((function(e){return i.defaultMenus[t].includes(e)}))},c=0;c<n.length;c++)l(c);this.defaultMenus.MULTISELECT=s}if(this.buttonSelect=_.bind(this.$elem.popupmenu,this.$elem,"button"),this.popupMenuElementItemsDrawer=new a(this.$elem,this.buttonSelect,this.popupMenuCommonFunctions,this.defaultMenus),["text","table","video","logo","icon","layout","image","sticker","group","multiselect","background","root","bleed","locked"].includes(t)?this.popupMenuElementItemsDrawer["draw"+r.pascalize(t)+"MenuItems"]():this.popupMenuElementItemsDrawer.drawDefaultMenuItems(t),!this.$elem.popupmenu("menu"))return!1;this.$elem.popupmenu("menu").find(".ui-dropdown").popupmenudropdown({onShow:function(){var e=$(this).parent();e.is('[data-action="on_fontfamily"]')&&e.trigger("fonts-shown")}}),this.$elem.is("#svgroot")||this.$elem.is("#clip_bleed_area")||(this.popupMenuCommonFunctions.initSliderElement(this.$elem.popupmenu("button","on_opacity"),"opacity",parseInt(100*this.editor.getOpacity()),0,100),this.popupMenuCommonFunctions.drawStrokeDropdownItems(this.$elem),this.initColors(e),this.initLinks(e),this.initAddToLibrary(e),this.initCellAlignment(e),this.initCellBorder(e),this.initCellFont(e),this.initOrderedList(e),this.popupMenuCommonFunctions.handleAlignmentOptions(o.find(".dropdown-options"),t)),this.popupMenuEvents.loadEvents(e),this.popupMenuCommonFunctions.highlightAppliedOptions(this.buttonSelect,this.$elem),o.find(".element-popupmenu").css("display",this.$elem.is("#svgroot")?"none":"flex"),o.find(".root-popupmenu").css("display",this.$elem.is("#svgroot")?"flex":"none"),this.editor.canvas.runExtensions("browserResize",{}),o.find(".scroll-handler i").on("click",this.popupMenuCommonFunctions.scrollHandler)}},initColors:function(e){this.$elem.popupmenu("button","colormap-circle").find(".ui-dropdown-items").each(_.partial(this.popupMenuCommonFunctions.drawColor,e))},initLinks:function(e){var t=this.$elem.popupmenu("button","on_linkElement").find(".ui-dropdown-items"),n=this.$elem.popupmenu("button","on_unlinkElement").find(".ui-dropdown-items");(t.length||n.length)&&new l({el:t.length?t:n,href:$(e).is("a")&&svgedit.utilities.getHref(e),canvas:this.editor.canvas})},initAddToLibrary:function(e){var t=this.$elem.popupmenu("button","on_library_add").find(".ui-dropdown-items");t.length&&new c({el:t,selectedElement:e})},initCellAlignment:function(e){var t=this.$elem.popupmenu("button","on_edit-cell-alignment").find(".ui-dropdown-items");t.length&&new u({el:t,selectedElement:e})},initCellBorder:function(e){var t=this.$elem.popupmenu("button","on_edit-cell-border").find(".ui-dropdown-items");t.length&&new d({el:t,selectedElement:e})},initCellFont:function(e){var t=this.$elem.popupmenu("button","on_edit-cell-font").find(".ui-dropdown-items");t.length&&new p({el:t,selectedElement:e})},initOrderedList:function(e){var t=this.$elem.popupmenu("button","on_set-list").find(".ui-dropdown-items");t.length&&new h({el:t,selectedElement:e})}})},{"../../../utils/humps":615,"./default-menus.json":213,"./dropdown/add-to-assets":225,"./dropdown/edit-cell-alignment":227,"./dropdown/edit-cell-border":229,"./dropdown/edit-cell-font":231,"./dropdown/edit-ordered-list":233,"./dropdown/link":235,"./popupmenu-common-functions":237,"./popupmenu-element-items-drawer":238,"./popupmenu-events":239,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.string.includes.js":915}],237:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.number.to-fixed.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.array.concat.js");var i=r(e("tinycolor2")),s=r(e("./drawer/table-menu-items")),a=r(e("../../colors/color-selector")),l=r(e("./drawer/drawing-menu-items")),c=r(e("./drawer/frame-menu-items")),u=r(e("./drawer/shape-menu-items")),d=r(e("./drawer/simpletext-menu-items"));t.exports=Backbone.View.extend({hasLibrary:null,initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,INKIVE.UserInfoFactory.get().then(_.bind((function(e){this.hasLibrary=_(e.roles).contains("ROLE_LIBRARY")}),this)),_.bindAll(this,"initSliderElement","getElemsForStrokeChange","updateFontRelatedMenu","highlightAppliedOptions","drawStrokeDropdownItems","drawColors","drawColor","scrollHandler")},initSliderElement:function(e,t,n,r,o,i){var s=e.find(".ui-dropdown-items"),a=Array.isArray(n)?0:n;s.length||((s=e).append('<small style="line-height: 10px; display: flex;">'+(i||s.attr("data-title"))+"</small>"),s.tooltip("disable"),s.addClass("nohover")),s.append('<span id="sliderWrapper"><div class="slider"></div></span><input type="text" id="'+t+'" value="'+a+'"/>'),s.find("#"+t).on("click",(function(){$(this).select()}));s.get(0)&&s.get(0).querySelector("#"+t).addEventListener("change",(function(t){t.preventDefault();var n=+parseFloat(this.value).toFixed(1)||0;this.value=n>o?o:n<r?r:n;try{l.slider("option","value",n),e.trigger("start",[n]),e.trigger("change",[n]),e.trigger("stop",[n])}catch(e){}}));var l=s.find(".slider").slider({max:o,min:r,value:a,slide:function(e,n){s.find("#"+t).val(n.value),s.find("#"+t).trigger("change",[n.value])},start:function(e,n){s.find("#"+t).trigger("start",[n.value])},stop:function(e,n){s.find("#"+t).trigger("stop",[n.value])}});l.slider("float")},getElemsForStrokeChange:function(e){var t=[];return e&&($(e).hasClass("textarea")?t.push(e):"g"===e.tagName?svgedit.utilities.walkTree(e,(function(e){"g"!==e.nodeName&&t.push(e)})):t.push(e)),t},updateFontRelatedMenu:function(e){if(e.button("on_fontfamily").length||e.button("on_finishTextEditing").length){var t=(new INKIVE.Text.Textarea).setDOM(e.element()),n=t.text.font_family,r=INKIVE.FontsFactory.get(n,t.text.font_weight);r||(INKIVE.FontsFactory.addFontToList(n),r=INKIVE.FontsFactory.get(n,t.text.font_weight));var o=r.support,i=e.button("on_set-bold"),s=e.li("on_set-bold").addClass("semidisabled"),a=e.button("on_set-italic"),l=e.li("on_set-italic").addClass("semidisabled"),c=e.button("on_set-underline"),u=e.li("on_set-underline").addClass("semidisabled"),d=e.$element.find(".text").attr("font-weight"),p=o.b||o.bi||!!d,h=o.i||o.bi;_.isNumber(d)&&d>400&&i.addClass("applied"),(p||i.hasClass("applied"))&&i.click(),(h||a.hasClass("applied"))&&a.click(),t.text.letter_spacing&&c.hasClass("applied")&&c.click(),p&&s.removeClass("semidisabled"),h&&l.removeClass("semidisabled"),o.b?i.attr("data-original-title",i.attr("data-title")):i.attr("data-original-title",INKIVE.TranslateHelper.translate("modal.alert.font_no_bold")),o.i?a.attr("data-original-title",a.attr("data-title")):a.attr("data-original-title",INKIVE.TranslateHelper.translate("modal.alert.font_no_italic")),i.hasClass("applied")&&!o.bi?(l.addClass("semidisabled"),a.hasClass("applied")&&a.click(),a.attr("data-original-title",INKIVE.TranslateHelper.translate("modal.alert.font_no_bolditalic"))):i.hasClass("applied")&&o.bi&&a.attr("data-original-title",a.attr("data-title")),a.hasClass("applied")&&!o.bi?(s.addClass("semidisabled"),i.hasClass("applied")&&i.click(),i.attr("data-original-title",INKIVE.TranslateHelper.translate("modal.alert.font_no_bolditalic"))):a.hasClass("applied")&&o.bi&&i.attr("data-original-title",i.attr("data-title")),t.text.letter_spacing?c.attr("data-original-title",INKIVE.TranslateHelper.translate("modal.alert.font_no_underline")):(u.removeClass("semidisabled"),c.attr("data-original-title",c.attr("data-title"))),_.contains(t.text.textContent,"\n")&&e.button("on_set-auto-adjustable").addClass("disabled");var m=e.button("on_text-align")[0],f=m&&"rtl"===t.text.direction&&!m.classList.contains("rtl-applied");f&&INKIVE.Text.Helpers.handleAlignmentIcon(f,!1,m),this.toggleTextSpacingForJustification(e,!t.text.text_anchor.includes("justify"))}},toggleTextSpacingForJustification:function(e,t){var n=e.button("on_set-auto-adjustable");t=t&&(!n.length||n.is(":not(.applied)")),e.button("on_set-char-spacing").parent().toggle(t),e.button("on_set-word-spacing").parent().toggle(t)},toggleBackgroundRemovalIcon:function(){var e=document.querySelector('[data-action="on_bgRemoval"]');e&&e.classList.remove("disabled")},highlightAppliedOptions:function(e,t){if(!t.is("#clip_bleed_area")){f("on_unlinkElement",t.is("a")||t.parent().is("a")),f("on_unlockImage",!0),f("on_flipImageH",h("horizontal")),f("on_flipImageV",h("vertical")),f("on_flipBackgroundH",m("horizontal")),f("on_flipBackgroundV",m("vertical")),f("on_imageFilter",null!==t.attr("filter")),f("on_unlockElement",!0),f("on_opacity",null!==t.attr("opacity")&&t.attr("opacity")<1),f("on_stroke",t.attr("stroke-width")>0);var n=INKIVE.DesignFacade.get(t[0].id);if(n&&n.background_removed){var r=e("on_bgRemoval"),o=r&&r[0];o&&o.classList.add("disabled")}var i=t.popupmenu()[0],s=$(i.element()).find(".text").is('[direction="rtl"]'),a=i.button("on_set-align-justify_start"),l=i.button("on_set-align-justify_middle"),c=i.button("on_set-align-justify_end"),u=i.button("on_set-align-justify_all"),d=a.length>0&&l.length>0&&c.length>0&&u.length>0,p=!s;p&&d&&(p=a.is(":not(.applied)")&&l.is(":not(.applied)")&&c.is(":not(.applied)")&&u.is(":not(.applied)")),this.toggleTextSpacingForJustification(i,p)}function h(e){var n=INKIVE.DesignFacade.get(t.attr("id"));return!(!n||!n.flipped)&&n.flipped[e]}function m(e){var n=INKIVE.DesignFacade.get(t.attr("id"));return!(!n||!n.flipped)&&n.flipped[e]}function f(t,n){e(t).toggleClass("applied",n)}},drawStrokeDropdownItems:function(e){var t,n,r,o=e.popupmenu("button","on_stroke").find(".ui-dropdown-items");this.initSliderElement(e.popupmenu("button","on_stroke"),"strokeWidth",this.editor.getStrokeWidth(),0,20),t=this.editor,n=e[0],r=INKIVE.TemplatesHelper("popupmenu_stroke_dasharray",{dashArrays:["5, 5","5, 10","10, 5","5, 1","1, 5","0.9","15, 10, 5, 10","5, 5, 1, 5"],width:t.getStrokeWidth()}),o.append(r).find("ul.stroke-dasharray li").on("click",(function(){var e=$(this),t=e.find("svg line").attr("stroke-dasharray"),r=INKIVE.DesignFacade.get(n.getAttribute("id")),o={stroke:{dasharray:t}};if(_.contains(["shape","text"],r.type))INKIVE.DesignFacade.set(o);else{var i=[];_.each(r.shapes,(function(e,t){i[t]=o})),INKIVE.DesignFacade.set({shapes:i})}e.addClass("applied").siblings(".applied").removeClass("applied")})),o.find(".stroke-dasharray").toggle(t.getStrokeWidth()>0),function(e){var t=r(e),n=o.find("li svg line");function r(e){var t=e.getAttribute("stroke-dasharray");return t||(t=$(e).find("[stroke-dasharray]").attr("stroke-dasharray")),_.map(t?t+"".split(","):[],(function(e){return e.trim()}))}_.any(n,(function(e){var n,o=r(e);if(!(n=o)&&!t||n&&t&&n.length===t.length&&_.all(n,(function(e,n){return e===t[n]})))return $(e).closest("li").addClass("applied"),!0}))||o.find("ul.stroke-dasharray li").first().addClass("applied")}(e[0])},drawColor:function(e,t,n){var r=this,s=INKIVE.Tool.getInstance().editor.canvas;$(n).append('<div class="colorLineWrapper"></div>');var l=$(n).parents(".btn-onmenu"),c=l.attr("type");c.match(/set_/)&&(c="fill");var u="fill"===c,d="stroke"===c,p=function(){if(u){var n=r.getFillColors($(e));if(n[t])return n[t].color}return INKIVE.Helpers.getColor(e,c)},h=p();function m(e){var t;e&&"none"!==e?t=e.match(/url\(#gradient-\d+\)/)?"Gradient":e.toUpperCase():t="None";var n="popupmenu.tooltip."+c+"_color",r=INKIVE.TranslateHelper.translate(n,{color:t});l.find("i").css("color",e),"background"===c?"none"===e&&l.find("i").attr("class","icon-stroke_colour").css("color","#FFFFFF"):l.attr("data-original-title",r)}m(h),l.append('<input type="hidden" name="hex" value="'+(0,i.default)(h).toHexString()+'"/>');var f=new a.default;f.initialize(this.hasLibrary,$(e),c).then((function(){f.favColors($(n),(function(n,r){var i=$(n).data("color"),a=$(n).data("smartAsset")||null;if(m(i),"textedit"===s.getMode()){var l=(new INKIVE.Text.Textarea).setDOM(e),h=s.runExtensions("selectionRange",{});l.text.setPartialStyling(h.start,h.end,c,i),l.render(s),INKIVE.DesignFacade.trigger("text.update")}else{for(var f=s.getSelectedElems(),g=0;g<f.length;g++){var b=INKIVE.DesignFacade.get(f[g].getAttribute("id")),v={},y=(0,o.default)({smart_asset:a},c,{color:i,colorGroup:t,previousColor:p()});switch(b.type){case"table":"cell_lines"===c&&(y[c].where=r.where),INKIVE.DesignFacade.set(y);break;case"text":b.id===f[g].id?INKIVE.DesignFacade.set(u?{color:i,smart_asset:a}:y):INKIVE.DesignFacade.set(b.id,u?{color:i,smart_asset:a}:y);break;case"shape":INKIVE.DesignFacade.set(y);break;case"logo":case"icon":case"sticker":if(d&&b.shapes)for(var j=0;j<Object.entries(b.shapes).length;j++){var _=b.shapes[j];(_.fill&&Object.prototype.hasOwnProperty.call(_.fill,"color")||d)&&(v[j]=y)}else{var w=$(n).closest(".btn-onmenu").attr("type").split("_")[1],I=b.shapes&&b.shapes[w];if(!I)break;(I.fill&&Object.prototype.hasOwnProperty.call(I.fill,"color")||d)&&(v[w]=y)}INKIVE.DesignFacade.set({shapes:v,smart_asset:a});break;case"background":INKIVE.DesignFacade.set("background",{color:i,smart_asset:a}),s.runExtensions("showBackgroundPopupMenu",{})}}d&&$(e).popupmenu("li","on_stroke").toggle(i&&"none"!==i)}}))})),h||d&&$(e).popupmenu("li","on_stroke").hide()},drawColors:function(e,t){this.getFillColors(e).slice(0,10).forEach((function(t,n){return e.popupmenu("appendBeforeSelector",'[data-action="colormap-circle"][type="fill"]',"FILL_COLOR",{type:"set_"+n})})),$(t("colormap-circle")).filter('[type="fill"]').last().parent().remove()},scrollHandler:function(e){var t=$(".element-popupmenu.menu"),n=$(e.target).parents().andSelf().is(".scroll-handler-left"),r=t.siblings(".scroll-handler-left").hide(),o=t.siblings(".scroll-handler-right").hide(),i=0;t.children().each((function(){i+=$(this).outerWidth()})),t.animate({left:n?0:t.width()-i},500,_.bind((function(){this.editor.canvas.runExtensions("browserResize",{skipScroll:!0,$handler:n?o:r})}),this))},getAvgDx:function(e){return _.isArray(e)?Math.precision(_.reduce(e,(function(e,t){return e+parseFloat(t)}),0)/(e.length-1),4):e},getAvgDy:function(e){var t=_.isArray(e)?_.without(e,1):e;return _.isArray(e)?Math.precision(_.reduce(t,(function(e,t){return e+parseFloat(t)}),0)/t.length,2):e},calculateDx:function(e,t){return _.isArray(t)&&1!==_.unique(t).length?t.map((function(t){return Math.precision(t+e,4)})):parseFloat(e)},getDrawingButtons:function(e){this.drawing=new l.default({el:e})},getFillColors:function(e){var t=INKIVE.DesignFacade.get(e.attr("id"),"shapes");return t?Object.values(t).reduce((function(e,t){return function(e){return e&&e.fill.color}(t)&&function(e){return["g","path","line","polygon","rect","circle","ellipse"].includes(e.type)}(t)&&!e.find(function(e){return function(t){return t.color===e.fill.color&&(!t.colorGroup||t.colorGroup===e.fill.colorGroup)}}(t))?e.concat(t.fill):e}),[]):[]},getFrameButtons:function(e){this.frames=new c.default({el:e})},getTextButtons:function(e){this.texts=new d.default({el:e})},getTableButtons:function(e){this.tables=new s.default(e.get(0))},getShapeButtons:function(e){this.shapes=new u.default({el:e})},handleAlignmentOptions:function(e,t){var n=e.find("select").find("option:not([value=page])");INKIVE.Tool.getInstance().editor.canvas.getSelectedElems().length<2&&n.attr("disabled","disabled"),e.after('<div class="slider-container">');var r=e.siblings(".slider-container");this.initSliderElement(r,"margin",5,0,30,INKIVE.TranslateHelper.translate("tool.restrictions.element.common.margin")+" (%)"),e.find("select").on("change",(function(){r.toggle(_.contains(["page","page_not_overlap"],$(this).val()))}))},isAddToLibraryAllowed:function(e){var t=$(e);if("true"===t.attr("from-library"))return!1;var n=INKIVE.PopupMenuDefault.canAccessLibrary||INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary;return n&&t.is(".group")&&t.find(">").each((function(){$(this).is("line, path, rect, circle, ellipse, .sticker, .logo, .icon, .textarea")||(n=!1)})),n&&INKIVE.C.USER.kw_uid&&INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESIGN&&(n=!1),t.data("external_source")===INKIVE.C.SHUTTERSTOCK&&(n=!1),n}})},{"../../colors/color-selector":198,"./drawer/drawing-menu-items":214,"./drawer/frame-menu-items":215,"./drawer/shape-menu-items":216,"./drawer/simpletext-menu-items":217,"./drawer/table-menu-items":218,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.number.to-fixed.js":890,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.values.js":903,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/web.dom-collections.for-each.js":964,tinycolor2:1049}],238:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.number.is-finite.js"),e("core-js/modules/es.number.constructor.js");var r=e("./drawer/text-menu-items");t.exports=Backbone.View.extend({initialize:function(e,t,n,r,o){this.$elem=e,this.popupMenuCommonFunctions=n,this.buttonSelect=t,this.defaultMenus=r,this.fontMenu=o},drawDefaultMenuItems:function(e){var t=this.defaultMenus.DEFAULT;if("link"===e&&(t=t.filter((function(e){return!["STROKE","STROKE_COLOR","FILL_COLOR"].includes(e)}))),this.$elem.popupmenu({buttons:t,disableBuild:!0}),-1===$.inArray(e,["ellipse","rect","polygon","path","square","circle","misc"])){var n=this.$elem.popupmenu("li","on_imageBox");n&&n.hide()}this.$elem.popupmenu("build")},drawMultiselectMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.MULTISELECT})},drawGroupMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.GROUP})},drawLayoutMenuItems:function(){if(this.$elem.data("popupmenu")&&this.$elem.removeData("popupmenu"),this.$elem.popupmenu({buttons:this.defaultMenus.LAYOUT}),this.$elem.popupmenu("menu").parent().find(".back-menu").hide(),this.$elem.is("image")){var e="popupmenu.dropdown_title.repositioning_"+(this.$elem.is(".background")?"background":"image"),t='<li class="double"><a class="btn btn-onmenu action ui-dropdown" style="cursor: default"><span class="ui-dropdown-title">'+INKIVE.TranslateHelper.translate(e)+"</span></a></li>";this.$elem.popupmenu("menu").parent().filter(".special-buttons").find("ul").append(t)}},drawLockedMenuItems:function(){var e="true"===localStorage.getItem("lock_elements"),t=$("#element-popupmenu"),n='<ul><li class="double"><a class="btn btn-onmenu action ui-dropdown locked-page">'+INKIVE.TranslateHelper.translate("top_submenu.file.locked_page")+"</a></li></ul>",r=t.find(".root-popupmenu");r.find("ul").toggleClass("hidden",e),r.find(".special-buttons").html(e?n:"")},drawBackgroundMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.BACKGROUND}),INKIVE.DesignFacade.get("background").source||this.$elem.popupmenu("li","on_transform").hide()},drawImageMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.IMAGE})},drawLogoMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.LOGO,disableBuild:!0}),this.popupMenuCommonFunctions.drawColors(this.$elem,this.buttonSelect),this.$elem.popupmenu("build")},drawIconMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.ICON,disableBuild:!0}),this.popupMenuCommonFunctions.drawColors(this.$elem,this.buttonSelect),this.$elem.popupmenu("build")},drawTableMenuItems:function(){this.$elem.popupmenu({buttons:this.defaultMenus.TABLE})},drawVideoMenuItems:function(){var e=this.$elem.attr("xlink:href"),t=e&&e.includes("youtube")?this.defaultMenus.VIDEO_YOUTUBE:this.defaultMenus.VIDEO;this.$elem.popupmenu({buttons:t})},drawStickerMenuItems:function(){var e=this;INKIVE.DesignFacade.get(this.$elem[0].id);this.$elem.popupmenu({buttons:this.defaultMenus.STICKER,disableBuild:!0}),this.popupMenuCommonFunctions.drawColors(this.$elem,this.buttonSelect);var t=_.contains(["sticker","banner","placeholder"],INKIVE.EditorModeManager.getMode());setTimeout((function(){var n=e.$elem.find(".textarea.subelement, .layoutBox.subelement").length>0;if(t||n){$("[data-action=on_transform]").find(".ui-dropdown-content-title.on_flip, .horizontal-separator").hide();var r=e.$elem.popupmenu("li","on_flipH");r&&r.hide();var o=e.$elem.popupmenu("li","on_flipV");o&&o.hide()}}),250),this.$elem.popupmenu("build")},drawTextMenuItems:function(){var e=new r(this.$elem,this.buttonSelect,this.popupMenuCommonFunctions,this.defaultMenus,this.fontMenu),t=_.bind((function(){e.drawTextMenuItems(),this.popupMenuCommonFunctions.updateFontRelatedMenu(this.$elem.data("popupmenu"))}),this);INKIVE.FontsFactory.fontListLoaded&&t(),INKIVE.FontsFactory.fontListLoaded||INKIVE.EditorFacade.on("fontlist.loaded",t)},drawRootMenuItems:function(e){this.$elem.popupmenu({buttons:this.defaultMenus.ROOT}),this.$elem.popupmenu("build")},drawBleedMenuItems:function(e){this.$elem.popupmenu("destroy"),this.$elem.popupmenu({buttons:this.defaultMenus.BLEED}),this.$elem.popupmenu("build"),this.drawBleedSize()},drawBleedSize:function(){var e=INKIVE.Tool.getInstance().editor.canvas,t=this.buttonSelect("on_bleedsize"),n=e.runExtensions("getBleedValues",{}).units,r=INKIVE.TemplatesHelper("popupmenu_bleed_size_list",function(){var e=[];if("px"===n)for(var t=0;t<=100;t+=7)e.push(Math.round(100*t)/100);else e={cm:[.3,.4,.5,.6],mm:[3,4,5],in:[.125,.25,.5]}[n];return e}());t.find(".ui-dropdown-items").empty().append(r),_.bind((function(){var e=INKIVE.Tool.getInstance().editor.canvas,n=e.runExtensions("getBleedValues",{}).top;t.find("input").remove();var r=t.find(".ui-dropdown-items"),o=$('<input name="bleed-value-set">');function i(){var t=parseFloat(o.val());Number.isFinite(t)&&t>0&&(o.val(t),e.runExtensions("modifyBleedValues",{size:t}))}o.val(n).insertBefore(r),o.on("keyup",_.debounce(i,500)),o.on("keydown",(function(e){13===e.which&&(e.preventDefault(),i())}))}),this)(),t.after('<span class="ui-dropdown-tag-title">'+n+"</span>")}})},{"./drawer/text-menu-items":223,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.is-finite.js":887,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.string.includes.js":915,"core-js/modules/web.timers.js":966}],239:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-float.js");var o=r(e("../../../../../../src/config/constants")),i=e("./popupmenu-common-functions"),s=e("../../../factory/library").factory,a=e("../../../factory/library/library-populator"),l=e("../../../../helpers/dataUrl").isDataURL,c=e("./popupmenu-table-events").loadTableEvents,u=e("./popupmenu-text-events").loadTextEvents;t.exports=Backbone.View.extend({initialize:function(){this.popupMenuCommonFunctions=new i},loadEvents:function(t){var n=this.popupMenuCommonFunctions,r=INKIVE.Tool.getInstance().editor.canvas,i=$(t).popupmenu()[0];function d(e,t){var n=$(e).parents(".ui-dropdown-items"),r=n.find("select").val(),o=.01*n.find("input#margin").val();INKIVE.EditorFacade.handle("align",{relative_to:r,position:t,offset:o})}function p(e){var t=r.getSelectedElems();r.runExtensions("clear",{}),t.forEach((function(t){var n=1*r.getRotationAngle(t)+e;r.selectOnly([t],!1),INKIVE.DesignFacade.set({rotation:n})})),r.selectOnly(t,!1)}function h(e,t){if(!0!==t&&!1!==t){var n=i.element().getAttribute("id");t=!INKIVE.DesignFacade.get(n)[e]}var r={};r[e]=t,INKIVE.DesignFacade.set(r),INKIVE.Menus.elementPopupMenu.refresh()}i.button("on_imageFilter").on("click",(function(){$(this).filterpicker({$svgImageElement:$(t)})})),i.button("on_align-vertical-middle").on("click",(function(e){d(e.target,"vertical_middle")})),i.button("on_align-horizontal-middle").on("click",(function(e){d(e.target,"horizontal_middle")})),i.button("on_align-left").on("click",(function(e){d(e.target,"left")})),i.button("on_align-right").on("click",(function(e){d(e.target,"right")})),i.button("on_align-top").on("click",(function(e){d(e.target,"top")})),i.button("on_align-bottom").on("click",(function(e){d(e.target,"bottom")})),i.button("on_explode_sticker").on("click",(function(){var e=i.element(),t=$(e).find(".textarea.subelement, .layoutBox.subelement").length>0,n=_.partial(INKIVE.DesignFacade.handle,e.getAttribute("id"),"explode");t&&function(e,t){var n=INKIVE.TranslateHelper.translate($(e).find(".textarea.subelement")?"modal.alert.explode_banner":"modal.alert.explode_placeholder");INKIVE.Modal.alertMessage(n,{width:450,callback:[t,$.noop]})}(e,n),t||n()})),i.button("on_opacity").on("start",$.noop).on("change",(function(e,t){r.changeSelectedAttributeNoUndo("opacity",parseInt(t)/100,r.getSelectedElems())})).on("stop",(function(e,t){INKIVE.DesignFacade.set({opacity:parseInt(t)/100}),$(i.element()[0]).is("image")&&r.runExtensions("showBackgroundPopupMenu")})),i.button("on_stroke").on("start",$.noop).on("change",(function(e,t){$(this).find("svg line").attr("stroke-width",t),$(this).find(".stroke-dasharray").toggle(t>0);for(var o=parseInt(t),i=r.getSelectedElems(),s=0;s<i.length;s++){var a=i[s];if(a.classList.contains("textarea")){var l=(new INKIVE.Text.Textarea).setDOM(a);l.text.stroke_width=o,r.runExtensions("renderTextArea",{textArea:l})}else r.setStrokeWidth(o,n.getElemsForStrokeChange(a))}})).on("stop",(function(e,t){for(var n=r.getSelectedElems(),o=0;o<n.length;o++){var i=n[o],s=INKIVE.DesignFacade.get(i.getAttribute("id")),a={};switch(s.type){case"text":case"shape":INKIVE.DesignFacade.set({stroke:{width:t}});break;case"sticker":for(var l=0;l<s.shapes.length;l++)a[l]={stroke:{width:t}};INKIVE.DesignFacade.set({shapes:a})}}})),i.button("on_sendForward").on("click",(function(){INKIVE.DesignFacade.handle(i.element().getAttribute("id"),"send_forward")})),i.button("on_sendBackward").on("click",(function(){INKIVE.DesignFacade.handle(i.element().getAttribute("id"),"send_backward")})),i.button("on_sendTop").on("click",(function(){INKIVE.DesignFacade.handle(i.element().getAttribute("id"),"send_top")})),i.button("on_sendBottom").on("click",(function(){INKIVE.DesignFacade.handle(i.element().getAttribute("id"),"send_bottom")})),i.button("on_rotateLeft").on("click",_.partial(p,-10)),i.button("on_rotateRight").on("click",_.partial(p,10)),i.button("on_setBackground").on("click",(function(){INKIVE.EditorFacade.handle(i.element().getAttribute("id"),"set_as_background"),i.destroy()})),i.button("on_backgroundReposition").on("click",(function(){INKIVE.EditorFacade.handle("background","crop")})),i.button("on_backgroundFilter").on("click",(function(){$(this).filterpicker({$svgImageElement:$(t)})})),i.button("on_removeElement").on("click",(function(){var e=r.getSelectedElems().map((function(e){return e.getAttribute("id")}));e.length>5?INKIVE.DesignFacade.handle("delete_multiple"):_.each(e,(function(e){INKIVE.DesignFacade.handle(e,"delete")})),i.destroy()})),i.button("on_copyElement").on("click",(function(){INKIVE.DesignFacade.handle(i.element().getAttribute("id"),"duplicate"),INKIVE.Tool.blinkScreen(i.element())})),i.button("on_reposition").on("click",(function(){var e=$(i.element()).is(".sticker")?$(i.element()).find("image"):$(i.element());INKIVE.EditorFacade.handle(e.attr("id"),"crop")})),i.button("on_crop").on("click",(function(){var e=i.element().getAttribute("id");INKIVE.EditorFacade.handle(e,"crop",{scale:1})})),i.button("on_lockImage").on("click",(function(){INKIVE.DesignFacade.set({locked_image:!0})})),i.button("on_unlockImage").on("click",(function(){INKIVE.DesignFacade.set({locked_image:!1})})),i.button("on_flipImageH").on("click",(function(){$("#"+r.getSelectedElems()[0].id+"-loader").length?r.call("advice.show","image-flip-disabled"):INKIVE.DesignFacade.set({flipped:{horizontal:!0}})})),i.button("on_flipImageV").on("click",(function(){$("#"+r.getSelectedElems()[0].id+"-loader").length?r.call("advice.show","image-flip-disabled"):INKIVE.DesignFacade.set({flipped:{vertical:!0}})})),i.button("on_flipBackgroundH").on("click",(function(){$("#"+r.getSelectedElems()[0].id+"-loader").length?r.call("advice.show","image-flip-disabled"):INKIVE.DesignFacade.set({flipped:{horizontal:!0}})})),i.button("on_flipBackgroundV").on("click",(function(){$("#"+r.getSelectedElems()[0].id+"-loader").length?r.call("advice.show","image-flip-disabled"):INKIVE.DesignFacade.set({flipped:{vertical:!0}})})),i.button("on_imageBox").on("click",(function(){INKIVE.EditorFacade.handle("convert_to_image_box")})),i.button("on_set_permissions").on("click",(function(){$('.tool-menu li > a[href="#tabRestrictions"]').trigger("click"),$(".simplified-restrictions").is(".hidden")||r.call("advice.show","choose-restriction-option")})),i.button("on_layoutConfirm").on("click",(function(){$(i.element()).trigger("dblclick")})),i.button("on_layoutClose").on("click",(function(){var e=$(".clipperImage .layoutClipperImage")[0];r.runExtensions("cropLayoutContent",{layout:e,elem:e,hasChanges:!1})})),i.button("on_bgRemoval").on("click",(function(){this.classList.add("disabled"),INKIVE.DesignFacade.handle("remove_background")})),i.button("on_set-left").on("click",(function(){r.moveSelectedElements(-10,0)})),i.button("on_set-right").on("click",(function(){r.moveSelectedElements(10,0)})),i.button("on_set-up").on("click",(function(){r.moveSelectedElements(0,-10)})),i.button("on_set-down").on("click",(function(){r.moveSelectedElements(0,10)})),i.button("on_flipH").on("click",(function(){INKIVE.DesignFacade.handle("flip_horizontal")})),i.button("on_flipV").on("click",(function(){INKIVE.DesignFacade.handle("flip_vertical")})),i.button("on_groupGroup").on("click",(function(){INKIVE.C.BOOK_TYPE.TEMPLATE===INKIVE.C.BOOK.book_type&&r.call("advice.show","group-template"),INKIVE.DesignFacade.create("group")})),i.button("on_groupUngroup").on("click",(function(){INKIVE.DesignFacade.handle("ungroup"),r.clearSelection()})),i.button("on_lockElement").on("click",_.partial(h,"locked",!0)),i.button("on_unlockElement").on("click",_.partial(h,"locked",!1)),i.button("on_increaseElement").on("click",(function(){new INKIVE.Gesture(r).testResize(i.element())})),i.button("on_decreaseElement").on("click",(function(){new INKIVE.Gesture(r).testResize(i.element(),!0)})),i.button("on_imageTab").on("click",(function(){r.clearSelection(),$('[data-toggle="tab"][href="#tabImages"]').tab("show")})),i.button("on_set-source").on("click",(function(){var t=new(e("../../../modal/prompt"))({label:INKIVE.TranslateHelper.translate("modal.prompt.add_video")}),n=INKIVE.Modal.modalWindow(t.getFormHtml(),{width:400,headerIcon:"fa fa-film",headerTitle:"tool.customize.add_video",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.add_video"),onClick:function(){n.close();var e=t.getValue();e&&INKIVE.DesignFacade.set({source:e})}}]})})),i.button("on_toggle-autoplay").on("click",_.partial(h,"autoplay")),i.button("on_toggle-move-to-next").on("click",_.partial(h,"movetonext")),i.button("on_toggle-controls").on("click",_.partial(h,"controls")),i.button("on_toggle-fullscreen").on("click",_.partial(h,"fullscreen")),i.button("on_toggle-loop").on("click",_.partial(h,"loop")),i.button("on_toggle-mute").on("click",_.partial(h,"mute")),i.button("on_restrictionInfo").on("click",(function(){var e=r.getSelectedElems()[0].id,t=INKIVE.RestrictionsFacade.shownRestrictionMessages[e];t&&toastr.info(t)})),i.button("on_library_add_quiet").on("click",(function(){var e=i.element();if(e.hasAttribute("xlink:href")){var t=e.getAttribute("xlink:href");if(l(t))return void r.call("advice.show","save-first")}var n=new s({librarySource:"member"});a.setLibrary(n),a.addElementToLibrary(e,null,!0)})),i.button("on_unlink_smart_asset").on("click",(function(){var e=i.element();o.default.smartAssets.attributes.forEach((function(t){e.removeAttribute(t)})),r.clearSelection()})),i.button("on_deselect").on("click",(function(){r.clearSelection(),r.runExtensions("selectedChanged")})),i.button("on_bleedsize").on("change",(function(e,t){t&&(t=parseFloat(t),_.isNumber(t)&&r.runExtensions("modifyBleedValues",{size:t}),$(this).find("input").val(t))})),i.button("on_bleedClose").on("click",(function(){r.runExtensions("hideBleedClipper",{}),r.runExtensions("disableGuideLine",{})})),u(i,n,r),c(i),i.button("on_restrict_changes").on("click",(function(){document.querySelector('.tool-menu li > a[href="#tabSimplifiedRestrictions"]').click()})),INKIVE.DesignFacade.on("background.remove_background.skip",n.toggleBackgroundRemovalIcon),INKIVE.DesignFacade.on("background.remove_background.error",n.toggleBackgroundRemovalIcon),INKIVE.DesignFacade.on("image.remove_background.skip",n.toggleBackgroundRemovalIcon),INKIVE.DesignFacade.on("image.remove_background.error",n.toggleBackgroundRemovalIcon)}})},{"../../../../../../src/config/constants":1090,"../../../../helpers/dataUrl":632,"../../../factory/library":128,"../../../factory/library/library-populator":135,"../../../modal/prompt":174,"./popupmenu-common-functions":237,"./popupmenu-table-events":240,"./popupmenu-text-events":241,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/web.dom-collections.for-each.js":964}],240:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.loadTableEvents=function(e){var t={"on_open-table-editor":function(){return INKIVE.Table.beginTableEditingMode(e.element())},"on_close-table-editor":function(){return INKIVE.Table.endTableEditingMode()},"on_select-all-cells":function(){return INKIVE.Table.tableSelectionInstance&&INKIVE.Table.tableSelectionInstance.selectAll()},"on_invert-cell-selection":function(){return INKIVE.Table.tableSelectionInstance&&INKIVE.Table.tableSelectionInstance.invertSelection()},"on_insert-row-before":function(){return INKIVE.Table.insertRow(!0)},"on_insert-row-after":function(){return INKIVE.Table.insertRow(!1)},"on_delete-row":function(){return INKIVE.Table.deleteRow()},"on_insert-column-before":function(){return INKIVE.Table.insertColumn(!0)},"on_insert-column-after":function(){return INKIVE.Table.insertColumn(!1)},"on_delete-column":function(){return INKIVE.Table.deleteColumn()},"on_merge-cells":function(){return INKIVE.Table.merge()},"on_split-cell":function(){return INKIVE.Table.split()},"on_toggle-cell-bold":function(){INKIVE.DesignFacade.set({font_bold_toggle:1}),INKIVE.Table.updateTableToolbar()},"on_toggle-cell-italic":function(){INKIVE.DesignFacade.set({font_italic_toggle:1}),INKIVE.Table.updateTableToolbar()}};Object.keys(t).forEach((function(n){e.button(n).on("click",t[n])}))},e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.keys.js")},{"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964}],241:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.loadTextEvents=function(e,t,n){var r,o,i,s,a,l=null,c=0;function u(t,r){"textedit"===INKIVE.DesignFacade.canvas.getMode()?function(t,r){var o=(new INKIVE.Text.Textarea).setDOM(e.element(),!1),i=n.runExtensions("selectionRange",{});o.text.setLineStyling(i.start,i.end,"text-anchor",t),d(r),r.includes("justify")&&(r=r.replace("_","-"));"start"!==t&&e.button("on_set-bullets").removeClass("applied"),e.button("on_text-align")[0].querySelector("use").setAttribute("xlink:href","#text---align-".concat(r)),INKIVE.DesignFacade.trigger("text.update"),n.runExtensions("renderTextArea",{textArea:o})}(t,r):function(t,n){INKIVE.DesignFacade.set({anchor:t}),d(n),n.includes("justify")&&(n=n.replace("_","-"));"start"!==t&&e.button("on_set-bullets").removeClass("applied");var r=function(e,t){var n="rtl"===e?{right:"left",left:"right"}[t]:{right:"right",left:"left"}[t];return n=n||t}((new INKIVE.Text.Textarea).setDOM(e.element()).direction,n);e.button("on_text-align")[0].querySelector("use").setAttribute("xlink:href","#text---align-".concat(r)),INKIVE.DesignFacade.trigger("text.update")}(t,r)}function d(t){_.each(["right","justify_start","justify_middle","justify_end","justify_all","center","left"],(function(n){e.button("on_set-align-"+n).toggleClass("applied",n===t)}))}function p(e){if(void 0!==e){e=parseFloat(e);for(var t=0;t<a.length;t++){0===a[t]&&0!==c&&(a[t]=e);var r=h(a[t]+(e-c));a[t]=r>0?r:1,r<=0&&0===e&&(a[t]=0)}g(a[0]),c=e,i.text.setValues({line_margin:e,first_line_margin:a}),n.runExtensions("renderTextArea",{textArea:i})}}function h(e){return e<200?e:200}function m(e,t,n,r,o){var i=e.text[t];return Array.isArray(i)||(i=Array.isArray(n)?n:Array.from({length:INKIVE.Text.Helpers.getParagraphCount(e)}).fill(n)),o.forEach((function(e){i[e]=r})),i}function f(e){if(void 0!==e){e=parseFloat(e);for(var t=m(i,"line_margin",i.text.line_margin,e,o),r=0;r<t.length;r++)if(o.includes(r)){0===a[r]&&0!==c&&(a[r]=c);var s=h(a[r]+(e-c));a[r]=s>0?s:1,s<=0&&0===e&&(a[r]=0)}c=e,g(a[o[0]]),i.text.setValues({line_margin:t,first_line_margin:a}),n.runExtensions("renderTextArea",{textArea:i})}}function g(e){var t=document.querySelector("input#firstLineMargin");if(t&&!isNaN(e)){t.value=e;var n=$(t.parentNode).find(".slider");n&&n.slider("value",e)}}function b(t){e.button("on_set-bullets").toggleClass("applied",!0===t)}function v(r,o){var i="on_removePartialStyle"===$(this).attr("data-action");if(!$(this).parents("li.semidisabled").length){o.preventDefault();for(var s=n.getSelectedElems(),a=0;a<s.length;a++){var l=s[a],c=(new INKIVE.Text.Textarea).setDOM(l);if(c){var u=n.runExtensions("selectionRange",{});r.call(this,c,u,!$(this).is(".applied")),n.runExtensions("renderTextArea",{textArea:c})}}i?$(this).closest("ul").children().each((function(e,t){$(t).children().removeClass("applied")})):$(this).toggleClass("applied"),t.updateFontRelatedMenu(e),INKIVE.DesignFacade.trigger("text.update")}}function y(e,t){t.preventDefault();for(var r=n.getSelectedElems(),o=0;o<r.length;o++){var i=r[o],s=(new INKIVE.Text.Textarea).setDOM(i),a=n.runExtensions("selectionRange",{});s.text.setTextCase(a.start,a.end,e),n.runExtensions("renderTextArea",{textArea:s})}INKIVE.DesignFacade.trigger("text.update")}INKIVE.C.IS_MOBILE_APP&&(!window.Android&&INKIVE.Helpers.mobileVersion.isGreaterThan("1.1.1")||window.Android&&!INKIVE.Helpers.mobileVersion.isLowerThan("1.1.3"))&&e.button("on_fontfamily").on("click",(function(){var n=$(e.button("on_fontfamily")),r=$(e.element()).is("text")?e.element():$(e.element()).find("text")[0],o={font_family:r.getAttribute("font-family")};"bold"===r.getAttribute("font-weight")&&(o.font_weight=r.getAttribute("font-weight")),"italic"===r.getAttribute("font-style")&&(o.font_style=r.getAttribute("font-style")),r.getAttribute("text-decoration")&&(o.text_decoration=r.getAttribute("text-decoration"));var i="";$(r).children().each((function(){i+=$(this).text(),i+=$(this).hasClass("eol")?"\n":" "})),AppBridge.callBoth("pick_font",_.extend(o,{text:i,font_size:parseFloat($(e.button("on_fontsize")).find("input").val()),position:_.extend(n.offset(),{height:n.height(),width:n.width()})})),AppBridge.off("ik.editor.text_update"),AppBridge.on("ik.editor.text_update",(function(n,r){r={font:{family:r.font_family,size:r.font_size}},AppBridge.design.set(r),INKIVE.Tool._cache.favFonts=null,t.updateFontRelatedMenu(e),r.font.size&&e.button("on_fontsize").find("input").val(parseInt(r.font.size))})),n.removeClass("active").find(".ui-dropdown-items").removeAttr("style")})),e.button("on_fontfamily").on("change",(function(r,o,i,s){if(!$(r.target).is("input")){INKIVE.Tool._cache.favFonts=null;for(var a,l=function(e){var t=!1;return $(e.dom).find("tspan").each((function(){$(this).attr("font-family")&&(t=!0)})),t},c=n.getSelectedElems(),u=null,d=0;d<c.length;d++)(u=(new INKIVE.Text.Textarea).setDOM(c[d]))&&(a=n.runExtensions("selectionRange",{}),u.text.setPartialStyling(a.start,a.end,"font-family",i),l(u)&&a.start===a.end&&0===a.start?INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("modal.alert.apply_to_whole_test")}),{callback:[function(){var e=[];u.text.styles.forEach((function(t){"font-family"!==t.attribute&&e.push(t)})),u.text.styles=e,p()},p]}):p())}function p(){s||isNaN(u.text.font_weight)||(s="normal"),u.text.setPartialStyling(a.start,a.end,"font-weight",s),n.runExtensions("renderTextArea",{textArea:u}),INKIVE.DesignFacade.trigger("text.update"),t.updateFontRelatedMenu(e)}})),e.button("on_fontsize").on("change",(function(e,t){if(t){for(var r,o=n.getSelectedElems(),i=function(e){var t=o[e];(r=$(t).closest("g.element.sticker")[0])||a(t),r&&function(e,t){var n=INKIVE.TranslateHelper.translate($(e).find(".textarea.subelement")?"modal.alert.explode_banner":"modal.alert.explode_placeholder");INKIVE.Modal.alertMessage(n,{width:450,callback:[t,$.noop]})}(r,(function(){INKIVE.DesignFacade.handle(r.getAttribute("id"),"explode"),a(t)}))},s=0;s<o.length;s++)i(s);$(this).find("input").val(t)}function a(e){t=Math.precision(parseFloat(t),1);var r=(new INKIVE.Text.Textarea).setDOM(e),o=n.runExtensions("selectionRange",{});o.start===o.end?(r.text.checkGlobalPartialStyles(),r.text.font_size=t):r.text.setPartialStyling(o.start,o.end,"font-size",t),n.runExtensions("renderTextArea",{textArea:r}),INKIVE.DesignFacade.trigger("text.update")}})),e.button("on_finishTextEditing").on("click",(function(){n.runExtensions("endEditing",{})})),e.button("on_textEditing").on("click",(function(){n.runExtensions("beginTextEditing",{elem:e.element()}),!INKIVE.C.IS_DEV&&!INKIVE.C.IS_MOBILE&&"function"==typeof ga&&ga("send",{hitType:"event",eventCategory:"Editor UI | Popupmenu | text",eventAction:"editing"})})),e.button("on_textTyping").on("click",(function(){n.runExtensions("beginTextTyping",{elem:e.element()}),!INKIVE.C.IS_DEV&&!INKIVE.C.IS_MOBILE&&"function"==typeof ga&&ga("send",{hitType:"event",eventCategory:"Editor UI | Popupmenu | text",eventAction:"typing"})})),e.button("on_set-align-justify_start").on("click",(function(){u("justify_start","justify_start")})),e.button("on_set-align-justify_middle").on("click",(function(){u("justify_middle","justify_middle")})),e.button("on_set-align-justify_end").on("click",(function(){u("justify_end","justify_end")})),e.button("on_set-align-justify_all").on("click",(function(){u("justify_all","justify_all")})),e.button("on_set-align-left").on("click",(function(){u("start","left")})),e.button("on_set-align-center").on("click",(function(){u("middle","center")})),e.button("on_set-align-right").on("click",(function(){u("end","right")})),e.button("on_set-paragraph-spacing").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element())})).on("change",_.throttle((function(e,t){void 0!==t&&(i.text.setValues({paragraph_spacing:t}),n.runExtensions("renderTextArea",{textArea:i}))}),300)).on("stop",(function(e,t){INKIVE.DesignFacade.set({spacing:{paragraph:parseFloat(t)}})})),e.button("on_set-first-line-margin").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element())})).on("change",_.throttle((function(e,t){void 0!==t&&(i.text.setValues({first_line_margin:t}),n.runExtensions("renderTextArea",{textArea:i}))}),60)).on("stop",(function(e,t){INKIVE.DesignFacade.set({spacing:{first_line_margin:parseFloat(t)}})})),e.button("on_set-line-spacing").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element())})).on("change",_.throttle((function(e,t){void 0!==t&&(i.text.setValues({line_spacing:parseFloat(t)}),n.runExtensions("renderTextArea",{textArea:i}))}),300)).on("stop",(function(e,t){INKIVE.DesignFacade.set({spacing:{line:parseFloat(t)}})})),e.button("on_set-word-spacing").on("start",(function(){e.button("on_set-underline").is(".applied")&&INKIVE.DesignFacade.set({text_decoration:"none"})})).on("change",_.throttle((function(t,r){if(void 0!==r){var o=(new INKIVE.Text.Textarea).setDOM(e.element());o.text.setValues({word_spacing:parseFloat(r)}),n.runExtensions("renderTextArea",{textArea:o})}}),300)).on("stop",(function(e,t){INKIVE.DesignFacade.set({spacing:{word:parseFloat(t)}})})),e.button("on_set-char-spacing").on("start",(function(){e.button("on_set-underline").is(".applied")&&INKIVE.DesignFacade.set({text_decoration:"none"})})).on("change",_.throttle((function(r,o){if(!_.isUndefined(o)){var i=(new INKIVE.Text.Textarea).setDOM(e.element()),s=i.text.letter_spacing;_.isArray(s)&&!l&&(l=s),s=l||s,i.text.setValues({letter_spacing:t.calculateDx(o,s)}),n.runExtensions("renderTextArea",{textArea:i})}}),300)).on("stop",(function(e,t){INKIVE.DesignFacade.set({spacing:{letter:parseFloat(t)}})})),e.button("on_set-line-margin").on("start",(function(t,n){c=parseFloat(n),i=(new INKIVE.Text.Textarea).setDOM(e.element()),s=INKIVE.Text.Helpers.getParagraphCount(i),a=Array.isArray(i.text.first_line_margin)?i.text.first_line_margin:Array.from({length:s}).fill(i.text.first_line_margin||0)})).on("change",_.throttle((function(e,t){p(t)}),60)).on("stop",(function(e,t){p(t)})),e.button("on_set-paragraph-spacing-dy").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element()),r=n.runExtensions("selectionRange",{}),o=INKIVE.Text.Helpers.getParagraphIndexesFromCursorSelection(i,r)})).on("change",_.throttle((function(e,t){if(void 0!==t){var r=m(i,"paragraph_spacing",i.text.paragraph_spacing,t,o);i.text.setValues({paragraph_spacing:r}),n.runExtensions("renderTextArea",{textArea:i})}}),60)).on("stop",(function(e,t){var n=m(i,"paragraph_spacing",i.text.paragraph_spacing,t,o);INKIVE.DesignFacade.set({spacing:{paragraph:n}})})),e.button("on_set-paragraph-first-line-margin").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element()),r=n.runExtensions("selectionRange",{}),o=INKIVE.Text.Helpers.getParagraphIndexesFromCursorSelection(i,r)})).on("change",_.throttle((function(e,t){if(void 0!==t){var r=m(i,"first_line_margin",i.text.first_line_margin,t,o);i.text.setValues({first_line_margin:r}),n.runExtensions("renderTextArea",{textArea:i})}}),60)).on("stop",(function(e,t){var n=m(i,"first_line_margin",i.text.first_line_margin,t,o);INKIVE.DesignFacade.set({spacing:{first_line_margin:n}})})),e.button("on_set-paragraph-margin").on("start",(function(t,s){c=parseFloat(s),i=(new INKIVE.Text.Textarea).setDOM(e.element()),r=n.runExtensions("selectionRange",{}),o=INKIVE.Text.Helpers.getParagraphIndexesFromCursorSelection(i,r),a=Array.isArray(i.text.first_line_margin)?i.text.first_line_margin:Array.from({length:INKIVE.Text.Helpers.getParagraphCount(i)}).fill(i.text.first_line_margin||0)})).on("change",_.throttle((function(e,t){f(t)}),60)).on("stop",(function(e,t){f(t)})),e.button("on_set-paragraph-dy").on("start",(function(){i=(new INKIVE.Text.Textarea).setDOM(e.element()),r=n.runExtensions("selectionRange",{}),o=INKIVE.Text.Helpers.getParagraphIndexesFromCursorSelection(i,r)})).on("change",_.throttle((function(e,t){if(void 0!==t){var r=m(i,"line_spacing",i.text.line_spacing,t,o);i.text.setValues({line_spacing:r}),n.runExtensions("renderTextArea",{textArea:i})}}),60)).on("stop",(function(e,t){var n=m(i,"line_spacing",i.text.line_spacing,t,o);INKIVE.DesignFacade.set({spacing:{line:n}})})),e.button("on_set-column-number").on("start",$.noop).on("change",$.noop).on("stop",(function(e,t){INKIVE.DesignFacade.set({columns:parseInt(t)})})),e.button("on_set-bullets").on("click",(function(t){var r;t.preventDefault(),"textedit"===INKIVE.DesignFacade.canvas.getMode()?function(t){var r=(new INKIVE.Text.Textarea).setDOM(e.element(),!1),o=n.runExtensions("selectionRange",{});r.text.setLineStyling(o.start,o.end,"bullets",!t),b(!t),e.button("on_text-align")[0].querySelector("use").setAttribute("xlink:href","#text---align-left"),d("left"),INKIVE.DesignFacade.trigger("text.update"),n.runExtensions("renderTextArea",{textArea:r})}($(this).hasClass("applied")):(r=$(this).hasClass("applied"),e.button("on_text-align")[0].querySelector("use").setAttribute("xlink:href","#text---align-left"),d("left"),INKIVE.DesignFacade.set({bullet_points:!r}))})),e.button("on_set-auto-adjustable").on("click",(function(n){n.preventDefault(),INKIVE.DesignFacade.set({auto_adjustable:!$(this).hasClass("applied")}),t.toggleTextSpacingForJustification(e,e.button("on_set-align-justify").is(":not(.applied)"))})),INKIVE.DesignFacade.off("text.update.bullet_points").on("text.update.bullet_points",b).off("text.update.auto_adjustable").on("text.update.auto_adjustable",(function(t){e.button("on_set-auto-adjustable").toggleClass("applied",!0===t)})).off("text.update.anchor").on("text.update.anchor",(function(n){e.button("on_set-align-left").toggleClass("applied","start"===n),e.button("on_set-align-right").toggleClass("applied","end"===n),e.button("on_set-align-center").toggleClass("applied","middle"===n),e.button("on_set-align-justify_start").toggleClass("applied","justify_start"===n),e.button("on_set-align-justify_middle").toggleClass("applied","justify_middle"===n),e.button("on_set-align-justify_end").toggleClass("applied","justify_end"===n),e.button("on_set-align-justify_all").toggleClass("applied","justify_all"===n),t.toggleTextSpacingForJustification(e,!n.includes("justify"))})),e.button("on_set-bold").on("click",_.partial(v,(function(e,t,n){e.text.setPartialStyling(t.start,t.end,"font-weight",n?"bold":"normal")}))),e.button("on_set-italic").on("click",_.partial(v,(function(e,t,n){e.text.setPartialStyling(t.start,t.end,"font-style",n?"italic":"normal")}))),e.button("on_set-underline").on("click",_.partial(v,(function(e,t,n){e.text.setPartialStyling(t.start,t.end,"text-decoration",n?"underline":"normal")}))),e.button("on_convert-dx").on("click",(function(){INKIVE.Text.Helpers.convertDxToSpace(e.element()),INKIVE.DesignFacade.trigger("text.update")})),e.button("on_removePartialStyle").on("click",_.partial(v,(function(e,t){e.text.removePartialStyling(t.start,t.end)}))),e.button("on_set-ucase").on("click",_.partial(y,!0)),e.button("on_set-lcase").on("click",_.partial(y,!1))},e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js")},{"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.for-each.js":964}],242:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.fn.popupmenudropdown=function(t){t=_.extend({left:null,forceBottom:!1,onShow:e.noop,onHide:e.noop},t);var n=e(window).height();return this.each((function(r){var o=e(this).find(">.ui-dropdown-items"),i=function(t,n,r){t.each((function(){var t=e(this).parents(".root-popupmenu").length;t&&e(this).css("visibility",n?"visible":"hidden"),t||e(this)["slide"+(n?"Down":"Up")]("fast",r)})),n||t.removeClass("active")};!o.hasClass("ui-dropdown-div")&&o.children().length&&(o.is(".horizontal")?e(this).append('<i class="icon-spacing_2"></i>'):e(this).append('<i class="desygner-icon-arrow-down"></i>')),e(this).off("click").on("click",(function(r,s){s=s||{};var a=e(r.target),l=!1;if(!a.parents(".dropdown-multiple").length&&!0!==s.keepHidden&&(a.is(e(this))||a.is(e(this).find(":not(input, select, label, .ui-dropdown-items, option, .radiomark, .desygner-custom-check label)")))){if("none"!==o.css("display")&&"hidden"!==o.css("visibility")||!o.children().length){if(!a.parents("[data-action=on_fontfamily]").length){if(a.parents(".root-popupmenu .ui-dropdown-div").length&&!a.parents("a.item").length)return;e(this).removeClass("active"),o.find(".ui-dropdown-items.sub").hide(),i(o,l,t.onHide)}}else{i(e(".ui-dropdown-items"),l),l=!0;var c=function(){var t=e(".menu").get(0).getBoundingClientRect(),n=e("#tool-panel");if(n.is(".active")){var r=n.offset();t={right:t.right-r.left,left:t.left-r.left,bottom:t.bottom,height:t.height,top:t.top,width:t.width}}return t}(),u=this.getBoundingClientRect();e(this).addClass("active"),o.hasClass("fullscreen")?o.css("left",e("#editor").offset().left+2):o.parents(".common-buttons").length?o.css("right",0):o.parents(".root-buttons").length?o.css("left",0):"number"==typeof t.left?o.css("left",t.left):u.left+o.width()<c.right?o.css("left",0):u.right-o.width()>c.left?o.css("right",0):o.css("left",c.left-u.left),!t.forceBottom&&(INKIVE.C.IS_MOBILE&&u.top-o.height()+150>c.top||!INKIVE.C.IS_MOBILE&&u.bottom+o.height()+10>n)?o.addClass("top"):o.removeClass("top"),i(o,l,t.onShow)}INKIVE.EditorFacade.trigger("element.menu.dropdown",{show:l,action:e(this).attr("data-action"),type:e(this).attr("type")})}})),o.off("click").on("click","li:not(.ui-font-selection)",(function(t){var n=e(this).parents(".ui-dropdown"),r=e(this).find("[role=menuitem]").html();if(r&&!e(this).is(".font-locale")){var o=e(this).find("[role=menuitem]").attr("data-font-family"),s=e(this).find("[role=menuitem]").attr("data-font-weight");n.find(".ui-dropdown-title").html(o),n.trigger("change",[r,o,s]),INKIVE.DesignFacade.trigger("text.update.font",{family:o}),"toggle"===n.attr("type")&&(i(e(".ui-dropdown-items"),!1),e("#sidebar-resize-button").removeClass("collapse-hidden")),"all"===e(this).find("a").data("type")&&(INKIVE.Menus.elementPopupMenu.popupMenuButtons.fontMenu=null),t.stopPropagation()}}))}))},e.fn.popupmenu=function(t,n,r,o){var i=[];return this.each((function(){var s=e(this).data("popupmenu");if(!s&&e.isPlainObject(t))s=INKIVE.C.IS_MOBILE?new INKIVE.PopupMenuMobile(this,t):new INKIVE.PopupMenuDefault(this,t),e(this).data("popupmenu",s),i.push(s);else if(!s||t||n){if(s&&void 0!==s[t]){var a=s[t](n,r,o);void 0!==a&&i.push(a)}}else i.push(s)})),"string"==typeof t?i.length>1?i:i[0]:i},e.fn.popupmenu.Constructor=INKIVE.C.IS_MOBILE?INKIVE.PopupMenuMobile:INKIVE.PopupMenuDefault},e("core-js/modules/es.array.find.js")},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.object.define-property.js":895}],243:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.number.max-safe-integer.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.starts-with.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.is-array.js");var i=r(e("../../../../../src/config/constants"));function s(e,t){this.$element=$(e),this.id=INKIVE.Math.generateUUID();var n=INKIVE.EditorFacade.canvas.getSelectedElems();if(n.length<2)this.buttons=INKIVE.RestrictionsFacade.filterMenuOptions(e,t.buttons||[]);else for(var r=Number.MAX_SAFE_INTEGER,o=0;o<n.length;o++){var i=INKIVE.RestrictionsFacade.filterMenuOptions(n[o],t.buttons||[]);i.length<r&&(this.buttons=i,r=this.buttons.length)}void 0===INKIVE.PopupMenuDefault.canAccessLibrary&&(INKIVE.PopupMenuDefault.canAccessLibrary=!0,INKIVE.Helpers.isDesygnerProject()&&(INKIVE.PopupMenuDefault.canAccessLibrary=null,INKIVE.UserInfoFactory.get().then(_.bind((function(e){INKIVE.PopupMenuDefault.canAccessLibrary=_(e.roles).contains("ROLE_LIBRARY")||_(e.roles).contains("ROLE_PREMIUM")}),this)))),void 0===INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary&&(INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary=!1,INKIVE.UserInfoFactory.getMembership().then((function(e){INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary=e.permissions.assets_manage})));var s=[];_.each(this.buttons,_.bind((function(e){if(INKIVE.PopupMenuDefault.Buttons[e]){var t=INKIVE.PopupMenuDefault.Buttons[e].isSubmenuOf;t&&s.push(_.findKey(INKIVE.PopupMenuDefault.Buttons,{action:t}))}}),this)),this.buttons=_.union(s,this.buttons),INKIVE.RestrictionsFacade.elementHasRestrictions(e)&&this.buttons.push("RESTRICTION_INFO"),$(e).is(".non-selectable")&&(this.buttons=["REMOVE"]),this.hideTextColumnButtons(),_.each(this.buttons,this.append,this),this.isReady=!1,t.disableBuild||this.build()}s.prototype={positions:{},constructor:INKIVE.PopupMenuDefault,build:function(){if(this.buttons.length){var e=this.menu(),t=e.find('li[data-additional-menu="true"]');t.length&&(t.length>5?(e.find("li.space").replaceWith(INKIVE.TemplatesHelper("popupmenu_additional")),this.append(INKIVE.TemplatesHelper("popupmenu_showmore"))):t.removeAttr("data-additional-menu").show()),this.$element.is("#svgroot")||this.isMenuValid()||INKIVE.Menus.elementPopupMenu.hide(),e.find('[data-action="on_show_more"]').on("click",(function(){e.find('li[data-additional-menu="true"]').show(),$(this).hide()}));var n=!1;e.find(">li").each((function(){$(this).hasClass("space")?(n&&$(this).remove(),n=!0):n=!1})),INKIVE.Helpers.initTooltips(e,{placement:"top"}),this.isReady=!0}else INKIVE.Menus.elementPopupMenu.hide()},isAllSelectedElementsLocked:function(){return INKIVE.EditorFacade.canvas.getSelectedElems().every((function(e){return e.classList.contains("locked")}))},buttonHtml:function(e,t){if(e){if(" "===e)return this.getSpacer();var n=_.clone(INKIVE.PopupMenuDefault.Buttons[e]);if(n&&n.toggle){var r=INKIVE.DesignFacade.get(this.$element.attr("id"));n.isApplied=_.isFunction(n.toggle)?n.toggle(r):r[n.toggle],n.isApplied||(e="off_"+e)}var o=function(e,t){t=t.toLowerCase();var n=INKIVE.TranslateHelper.translate,r="popupmenu.",o=_.omit({title:n(r+"title."+t),tooltip:n(r+"tooltip."+t),dropdownTitle:n(r+"dropdown_title."+t)},(function(e,n){return(n="dropdownTitle"===n?r+"dropdown_title."+t:r+n+"."+t)===e}));return _.extend(o,e)}($.extend({},n,t),e),i=this.isAllSelectedElementsLocked(),s=$(this.$element).closest("a").length>0,a=this.$element.hasClass("layoutBox"),l=this.$element.parent().is(".background"),c=!this.$element.attr("xlink:href")||this.$element.attr("xlink:href").indexOf("imageplaceholder")>=0;if(!(o.hide&&o.hide(this.$element)||o.forMobile&&!INKIVE.C.IS_MOBILE||o.forBoxImage&&!a||o.forBoxWithImage&&a&&c&&!l||o.notSubelement&&this.$element.hasClass("subelement")||o.notLocked&&i||o.isLocked&&!i||o.notLinked&&s||o.isLinked&&!s)){var u="btn btn-onmenu action";o.disabled&&(u+=" disabled"),o.isDropdown&&(u+=" ui-dropdown");var d=' data-action="'+o.action+'"',p=_.isFunction(o.tooltip)?o.tooltip():o.tooltip||o.dropdownTitle,h=p?' data-popover="tooltip" data-original-title="'+p+'"':"",m=o.type?' type="'+o.type+'"':"",f=' data-title="'+(o.title?o.title:p||"")+'"',g=this.getButtonWrapper(o);o.cls&&$(g).addClass(o.cls);var b=o.icon?'<i class="'+o.icon+'"></i>':"";!1===o.isApplied&&(b='<i class="'+o.icon+'"></i><span class="deny"></span>'),o.iconSvg&&(b='<icon><svg><use xlink:href="#'+o.iconSvg+'"></use></svg></icon>');var v=$('<a class="'+u+'"'+d+h+m+f+">"+b+"</a>");if(o.titleTag&&$(g).append('<span class="ui-dropdown-tag-title">'+(o.dropdownTitle||"")+"</span>"),o.isDropdown){var y="";o.dropdownWidth&&(y+=" width: "+o.dropdownWidth+";"),o.dropdownHeight&&(y+=" height: "+o.dropdownHeight+";");var j="ui-dropdown-items";o.fullscreenDropdown&&(j+=" fullscreen"),o.isHorizontal?j+=" horizontal":o.isDropdownList||(j+=" ui-dropdown-div"),o.isDropdownList&&(j+=" ui-dropdown-list"),o.hasDropdownTitle&&v.append('<span class="ui-dropdown-title">'+(o.dropdownTitle||"")+"</span>");var w=$('<div class="'+j+'" style="'+y+'"></div>');if(o.isMultipleDropdown&&w.addClass("dropdown-multiple"),v.append(w),o.dropdownContent)if(_.isFunction(o.dropdownContent))o.dropdownContent(w);else{var I=$("<ul/>");if(_.each(o.dropdownContent,_.bind((function(e,t){I.append(this.buttonHtml(t,e))}),this)),o.isSubmenuOf){var x=$("[data-action="+o.isSubmenuOf+"]");(w=x.find(".ui-dropdown-items")).append('<div class="ui-dropdown-content-title '+o.action+'">'+(INKIVE.TranslateHelper.translate("popupmenu.dropdown_title."+o.dropdownTitle)||"")+"</div>");var E=x.find("ul");E.length&&E.after('<div class="horizontal-separator"></div>')}w.append(I)}if(o.dropdownOptions){var k=$('<div class="dropdown-options">'),C=$("<select>"),S=function(t){return INKIVE.TranslateHelper.translate("popupmenu.dropdown_options."+e.toLowerCase()+"."+t)};k.append("<span>"+S("title")+"</span>"),_.each(o.dropdownOptions.options,(function(e){C.append('<option value="'+e+'">'+S(e)+"</option>")})),k.append(C),$(".ui-dropdown-content-title."+n.action).after(k)}}if(!o.isSubmenuOf&&o.action)return $(g).append(v)}}},getSpacer:function(){return'<li class="space"></li>'},getButtonWrapper:function(e){var t=e.isAdditional?' data-additional-menu="true" style="display: none;"':"";return $.parseHTML("<li"+t+"></li>")},destroy:function(){this.$element.removeData("popupmenu")},getWrapperHtml:function(){return'<div class="menu popupmenu" data-id="'+this.id+'" data-element-id="'+this.$element.attr("id")+'"/>'},wrapper:function(){var e=this.$element.is("#svgroot")?".root-popupmenu":".element-popupmenu",t=$("#element-popupmenu").find(e);return!t.data("id")!==this.id&&(t.data("id",this.id),t.data("element-id",this.$element.attr("id"))),t},getButtonContainer:function(e){var t=".specific-buttons";return _.contains(INKIVE.Menus.elementPopupMenu.popupMenuButtons.defaultMenus.ROOT,e)?t=".root-buttons":_.contains(INKIVE.Menus.elementPopupMenu.popupMenuButtons.defaultMenus.COMMON,e)?t=".common-buttons":_.contains(INKIVE.Menus.elementPopupMenu.popupMenuButtons.defaultMenus.SPECIAL,e)&&(t=".special-buttons"),this.menu().parent(t).find(">ul")},append:function(e,t){var n=e.startsWith&&e.startsWith("<li")?e:this.buttonHtml(e,t);n&&this.getButtonContainer(e).append(n)},appendBeforeSelector:function(e,t,n){var r=t.startsWith&&t.startsWith("<li")?t:this.buttonHtml(t,n);r&&this.getButtonContainer(t).find(e).parent("li").before(r)},prepend:function(e,t){var n=e.startsWith&&e.startsWith("<li")?e:this.buttonHtml(e,t);n&&this.getButtonContainer(e).prepend(n)},menu:function(){return this.wrapper().find(".special-buttons>ul, .specific-buttons>ul, .common-buttons>ul, .root-buttons>ul")},getShownMenuButtonsCount:function(){return this.menu().find("li:not(.space)").length},isMenuValid:function(){return this.getShownMenuButtonsCount()>0},button:function(e){return this.menu().find('[data-action="'+e+'"]')},li:function(e){return this.menu().find('[data-action="'+e+'"]').parent("li")},element:function(){return this.$element.get(0)},hideTextColumnButtons:function(){this.$element.is(".textarea")&&((new INKIVE.Text.Textarea).setDOM(this.$element[0]).text.columns>1&&(this.buttons=_.without(this.buttons,"STROKE","STROKE_COLOR","TEXT_FONTSIZE","TEXT_CASE","TEXT_LIST","TEXT_SPACING","TEXT_AUTO_ADJUSTABLE")))},isBackgroundImage:function(e){var t=$(e);return t.is("g")&&(t=t.find("image")),t.is("image")},isAddtoLibraryAvailable:function(e){var t=INKIVE.EditorFacade.canvas.getSelectedElems();if(!t||1!==t.length)return!1;var n=t[0];if(!INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.isAddToLibraryAllowed(n))return!1;if(void 0===e)return!0;var r=n.classList.contains("background")?"background":n.getAttribute("id"),o=INKIVE.DesignFacade.get(r);if(!o)return!1;var i=["sticker","group","icon","logo"].includes(o.type);return i&&e||!i&&!e}},s.Buttons={INCREASE:{action:"on_increaseElement",icon:"desygner-icon-plus",notSubelement:!0,forMobile:!0,notLocked:!0},DECREASE:{action:"on_decreaseElement",icon:"desygner-icon-minus",notSubelement:!0,forMobile:!0,notLocked:!0},DUPLICATE:{action:"on_copyElement",icon:"desygner-icon-duplicate",notSubelement:!0},REMOVE:{action:"on_removeElement",icon:"desygner-icon-delete",notSubelement:!0},OPACITY:{action:"on_opacity",icon:"desygner-icon-opacity",isHorizontal:!0,isDropdown:!0,dropdownWidth:"222px",notSubelement:!0},STROKE:{action:"on_stroke",icon:"desygner-icon-stroke-style",isDropdown:!0,dropdownWidth:"240px",notSubelement:!0,hide:function(e){var t=!1;return e.is(".sticker")&&(t=!e.find(">path").length),t}},TRANSFORM:{icon:"desygner-icon-transform",action:"on_transform",notSubelement:!0,isMultipleDropdown:!0,isDropdown:!0},ARRANGE:{icon:"desygner-icon-arrange",action:"on_arrange",notSubelement:!0,isMultipleDropdown:!0,isDropdown:!0},ORDER:{action:"on_order",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_arrange",dropdownTitle:"order_title",dropdownContent:{SEND_FORWARD:{action:"on_sendForward",icon:"desygner-icon-move-forward"},SEND_BACKWARD:{action:"on_sendBackward",icon:"desygner-icon-move-backward"},SEND_TOP:{action:"on_sendTop",icon:"desygner-icon-move-front"},SEND_BOTTOM:{action:"on_sendBottom",icon:"desygner-icon-move-back"}}},ROTATE:{action:"on_rotate",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_transform",dropdownTitle:"rotate_title",dropdownContent:{ROTATE_LEFT:{action:"on_rotateLeft",icon:"desygner-icon-rotate-left",cls:"quadra",notSubelement:!0},ROTATE_RIGHT:{action:"on_rotateRight",icon:"desygner-icon-rotate-right",cls:"quadra",notSubelement:!0}}},FLIP:{action:"on_flip",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_transform",dropdownTitle:"flip_title",dropdownContent:{FLIP_V:{action:"on_flipV",icon:"desygner-icon-flip-vertical",cls:"quadra",notSubelement:!0},FLIP_H:{action:"on_flipH",icon:"desygner-icon-flip-horizontal",cls:"quadra",notSubelement:!0}}},FLIP_IMAGE:{action:"on_flip_image",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_transform",dropdownTitle:"flip_title",dropdownContent:{FLIP_IMAGE_H:{action:"on_flipImageH",icon:"desygner-icon-flip-horizontal",notSubelement:!0,type:"toggle"},FLIP_IMAGE_V:{action:"on_flipImageV",icon:"desygner-icon-flip-vertical",notSubelement:!0,type:"toggle"}}},BACKGROUND_FLIP:{action:"on_flip_background",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_transform",dropdownTitle:"flip_title",dropdownContent:{BACKGROUND_FLIP_H:{action:"on_flipBackgroundH",icon:"desygner-icon-flip-horizontal",notSubelement:!0,type:"toggle"},BACKGROUND_FLIP_V:{action:"on_flipBackgroundV",icon:"desygner-icon-flip-vertical",notSubelement:!0,type:"toggle"}}},ALIGNMENT:{action:"on_alignment",notSubelement:!0,isDropdown:!0,isHorizontal:!0,isSubmenuOf:"on_arrange",dropdownTitle:"align_title",dropdownOptions:{options:["page","page_not_overlap","selection","first_selected","last_selected"]},dropdownContent:{ALIGN_VERTICAL_MIDDLE:{action:"on_align-vertical-middle",icon:"desygner-icon-align-center-vertical"},ALIGN_HORIZONTAL_MIDDLE:{action:"on_align-horizontal-middle",icon:"desygner-icon-align-center-horizontal"},ALIGN_LEFT:{action:"on_align-left",icon:"desygner-icon-align-left"},ALIGN_RIGHT:{action:"on_align-right",icon:"desygner-icon-align-right"},ALIGN_TOP:{action:"on_align-top",icon:"desygner-icon-align-top"},ALIGN_BOTTOM:{action:"on_align-bottom",icon:"desygner-icon-align-bottom"}}},FILL_COLOR:{action:"colormap-circle",icon:"desygner-icon-fill",cls:"quadra",type:"fill",isDropdown:!0,dropdownWidth:"242px"},HIGHLIGHT_COLOR:{action:"colormap-circle",icon:"fa fa-h-square",cls:"quadra",type:"highlight",isDropdown:!0,dropdownWidth:"242px"},STROKE_COLOR:{action:"colormap-circle",icon:"desygner-icon-stroke",cls:"quadra",type:"stroke",isDropdown:!0,dropdownWidth:"242px",notSubelement:!0,hide:function(e){var t=!1;return e.is(".sticker")&&(t=!e.find(">path").length),t}},IMAGE_REPOSITION:{action:"on_reposition",icon:"desygner-icon-reposition",cls:"double",isDropdown:!0,forBoxWithImage:!0,hide:function(e){var t=e.get(0),n=INKIVE.Helpers.elementHelper(t).isSticker()?t.querySelector("image"):t;if(!n)return!0;if(INKIVE.Helpers.elementHelper(t).isVideo()&&INKIVE.RestrictionsFacade.initialized&&!INKIVE.RestrictionsFacade.canChange(t,"crop"))return!0;var r=(n.getAttribute("xlink:href")||"").indexOf("imageplaceholder")>-1;return!n.classList.contains("layoutBox")||r}},IMAGE_CROP:{action:"on_crop",icon:"desygner-icon-image-crop",cls:"double",isDropdown:!0,type:"toggle",forBoxWithImage:!0,hide:function(e){return $(e).hasClass("layoutBox")}},IMAGE_BOX:{action:"on_imageBox",icon:"desygner-icon-image",cls:"double",hide:function(e){return INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e)}},IMAGE_TAB:{action:"on_imageTab",icon:"desygner-icon-image",cls:"double",isDropdown:!0,forMobile:!0,forBoxImage:!0,type:"toggle"},IMAGE_FILTER:{action:"on_imageFilter",icon:"desygner-icon-filter",cls:"double",isDropdown:!0,forBoxWithImage:!0,type:"toggle",hide:function(e){var t=INKIVE.ImagesFactory.getMimeType(e[0].getAttribute("xlink:href"));return"msie"===$.browser.name||!["image/jpeg","image/png"].includes(t)}},IMAGE_BG_REMOVAL:{action:"on_bgRemoval",iconSvg:"bg-removal",cls:"double",type:"toggle",forBoxWithImage:!0,hide:function(){return INKIVE.C.FEATURE_FLAG&&!INKIVE.C.FEATURE_FLAG.brand_assets.includes("background_remover")}},SET_BACKGROUND:{action:"on_setBackground",icon:"fa fa-th",cls:"quadra",notSubelement:!0},BACKGROUND_REMOVE:{action:"on_removeElement",icon:"desygner-icon-delete",notSubelement:!0,hide:function(e){return"none"===e.attr("fill")}},BACKGROUND_COLOR:{action:"colormap-circle",icon:"desygner-icon-fill",cls:"quadra",type:"background",isDropdown:!0,dropdownWidth:"242px",hide:function(e){return INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e)}},BACKGROUND_COLOR_IMAGE:{action:"colormap-circle",icon:"desygner-icon-fill",cls:"quadra",type:"background",isDropdown:!0,dropdownWidth:"242px",hide:function(e){return!INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e)},tooltip:function(){var e=$("g.background").find("image").attr("opacity"),t=e&&1!==e?"popupmenu.tooltip.background_color_image_set":"popupmenu.tooltip.background_color_image_change";return INKIVE.TranslateHelper.translate(t)}},BACKGROUND_OPACITY:{action:"on_opacity",icon:"desygner-icon-opacity",forBoxWithImage:!0,isDropdown:!0,dropdownWidth:"222px",notSubelement:!0,hide:function(e){return!INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e)}},BACKGROUND_REPOSITION:{action:"on_backgroundReposition",icon:"desygner-icon-reposition",cls:"double",isDropdown:!0,hasDropdownTitle:!0,type:"toggle",forBoxWithImage:!0,hide:function(e){return!INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e)}},BACKGROUND_FILTER:{action:"on_backgroundFilter",icon:"desygner-icon-filter",cls:"double",isDropdown:!0,forBoxWithImage:!0,type:"toggle",hasDropdownTitle:!0,hide:function(e){var t=INKIVE.ImagesFactory.getMimeType(e[0].getAttribute("xlink:href"));return"msie"===$.browser.name||!["image/jpeg","image/png"].includes(t)}},BACKGROUND_BG_REMOVAL:{action:"on_bgRemoval",iconSvg:"bg-removal",cls:"double",isDropdown:!0,type:"toggle",forBoxWithImage:!0,hide:function(e){var t=!INKIVE.PopupMenuDefault.prototype.isBackgroundImage(e);if(INKIVE.RestrictionsFacade.initialized){var n=INKIVE.RestrictionsFacade.getAllElementPermissions("background")[0];t=!n.basic.image||n.images}return t||INKIVE.C.FEATURE_FLAG&&!INKIVE.C.FEATURE_FLAG.brand_assets.includes("background_remover")}},EXPLODE_STICKER:{action:"on_explode_sticker",icon:"desygner-icon-unlink",on:"click",hide:function(){var e=(INKIVE.DesignFacade.canvas.getSelectedElems()||[])[0];if(!e)return!0;var t=INKIVE.DesignFacade.get(e);return"sticker"!==t.type||!t.banner||!t.texts||!Object.entries(t.texts).length}},LAYOUT_CONFIRM:{action:"on_layoutConfirm",icon:"desygner-icon-check",cls:"double",isDropdown:!0,type:"toggle",hasDropdownTitle:!0},LAYOUT_CLOSE:{action:"on_layoutClose",icon:"desygner-icon-close",cls:"double",isDropdown:!0,type:"toggle",hasDropdownTitle:!0,hide:function(){return $("#svgcontent").is(".order-print-active")}},TEXT_FONTFAMILY:{action:"on_fontfamily",hasDropdownTitle:!0,cls:"combo",type:"toggle",dropdownWidth:"280px",isDropdown:!0,isDropdownList:!0,fullscreenDropdown:!0},TEXT_FONTSIZE:{action:"on_fontsize",hasDropdownTitle:!0,cls:"combo",type:"toggle",isDropdown:!0,isDropdownList:!0,dropdownHeight:"300px",dropdownWidth:"85px"},TEXT_TYPING:{action:"on_textTyping",icon:"desygner-icon-typewriter",cls:"double",isDropdown:!0,type:"toggle"},REMOVE_STYLE:{action:"on_removePartialStyle",icon:"desygner-icon-delete",cls:"double",isDropdown:!1,type:"toggle",hide:function(e){return 0===(new INKIVE.Text.Textarea).setDOM(e.get(0)).text.styles.length}},TEXT_EDITING:{action:"on_textEditing",icon:"desygner-icon-text-edit",cls:"double",isDropdown:!0,type:"toggle"},TEXT_FINISH_EDITING:{action:"on_finishTextEditing",icon:"desygner-icon-check",cls:"double",isDropdown:!0,type:"toggle"},PARAGRAPH_SPACING:{action:"on_paragraph-spacing",icon:"desygner-icon-linespacing",notSubelement:!0,isDropdown:!0,dropdownWidth:"222px",dropdownContent:{TEXT_PARAGRAPH_SPACING:{action:"on_set-paragraph-spacing-dy"},TEXT_LINE_SPACING:{action:"on_set-paragraph-dy"},TEXT_FIRST_LINE_MARGIN:{action:"on_set-paragraph-first-line-margin"},TEXT_LINE_MARGIN:{action:"on_set-paragraph-margin"}}},TEXT_SPACING:{action:"on_text-spacing",icon:"desygner-icon-linespacing",notSubelement:!0,isDropdown:!0,dropdownWidth:"222px",dropdownContent:{TEXT_PARAGRAPH_SPACING:{action:"on_set-paragraph-spacing"},TEXT_LINE_SPACING:{action:"on_set-line-spacing"},TEXT_WORD_SPACING:{action:"on_set-word-spacing"},TEXT_CHAR_SPACING:{action:"on_set-char-spacing"},TEXT_FIRST_LINE_MARGIN:{action:"on_set-first-line-margin"},TEXT_LINE_MARGIN:{action:"on_set-line-margin"}}},TEXT_BULLETS:{action:"on_set-bullets",icon:"desygner-icon-bullet-list",notSubelement:!0},TEXT_LIST:{action:"on_set-list",icon:"fa fa-list-ol",tooltip:function(){return INKIVE.TranslateHelper.translate("popupmenu.tooltip.text_list")},notSubelement:!0,isDropdown:!0,dropdownWidth:"230px"},TEXT_AUTO_ADJUSTABLE:{action:"on_set-auto-adjustable",icon:"desygner-icon-auto-adjust",hide:function(){return!0}},TEXT_BOLD:{action:"on_set-bold",icon:"desygner-icon-bold"},TEXT_ITALIC:{action:"on_set-italic",icon:"desygner-icon-italic"},TEXT_UNDERLINE:{action:"on_set-underline",icon:"desygner-icon-underline"},TEXT_CONVERT_DX:{action:"on_convert-dx",icon:"fa fa-repeat",tooltip:function(){return INKIVE.TranslateHelper.translate("popupmenu.tooltip.text_convert_dx")}},TEXT_CASE:{action:"on_text-case",icon:"desygner-icon-casestyle",isDropdown:!0,isHorizontal:!0,dropdownContent:{TEXT_UCASE:{action:"on_set-ucase",icon:"desygner-icon-text-upper-case"},TEXT_LCASE:{action:"on_set-lcase",icon:"desygner-icon-text-lower-case"}}},TEXT_ALIGN:{action:"on_text-align",iconSvg:"text---align-left",isDropdown:!0,isHorizontal:!0,notSubelement:!0,dropdownContent:{TEXT_ALIGN_LEFT:{action:"on_set-align-left",iconSvg:"text---align-left"},TEXT_ALIGN_CENTER:{action:"on_set-align-center",iconSvg:"text---align-center"},TEXT_ALIGN_RIGHT:{action:"on_set-align-right",iconSvg:"text---align-right"},TEXT_ALIGN_JUSTIFY_ALL:{action:"on_set-align-justify_all",iconSvg:"text---align-justify-all"},TEXT_ALIGN_JUSTIFY_START:{action:"on_set-align-justify_start",iconSvg:"text---align-justify-start"},TEXT_ALIGN_JUSTIFY_MIDDLE:{action:"on_set-align-justify_middle",iconSvg:"text---align-justify-middle"},TEXT_ALIGN_JUSTIFY_END:{action:"on_set-align-justify_end",iconSvg:"text---align-justify-end"}}},TEXT_COLUMNS:{action:"on_text-column",icon:"fa fa-columns",notSubelement:!0,isDropdown:!0,dropdownWidth:"222px",dropdownContent:{TEXT_COLUMNS_NUMBER:{action:"on_set-column-number"}}},OPEN_TABLE_EDITOR:{action:"on_open-table-editor",icon:"fa fa-edit",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.open_table_editor")},hide:function(){var e=INKIVE.EditorFacade.canvas.getMode();return["table-edit","textedit"].includes(e)}},CELL_TEXT_TYPING:{action:"on_textTyping",icon:"desygner-icon-typewriter",cls:"double",isDropdown:!0,type:"toggle",hide:function(){var e=INKIVE.DesignFacade.canvas.getSelectedElems(),t="textedit"===INKIVE.EditorFacade.canvas.getMode(),n=Array.isArray(e)&&"table"===INKIVE.EditorFacade.getType(e[0]);return!(t&&n)}},CLOSE_TABLE_EDITOR:{action:"on_close-table-editor",icon:"fa fa-check-circle",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.close_table_editor")},hide:function(){return"table-edit"!==INKIVE.EditorFacade.canvas.getMode()}},CELL_SELECT_ALL:{action:"on_select-all-cells",icon:"table-icon-select-all",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.select_all_cells")},hide:function(){return!INKIVE.Table.tableSelectionInstance}},CELL_INVERT_SELECTION:{action:"on_invert-cell-selection",icon:"table-icon-invert-selection",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.invert_cell_selection")},hide:function(){return!INKIVE.Table.tableSelectionInstance}},CELL_COLOR:{action:"colormap-circle",icon:"fa fa-font",cls:"quadra",type:"cell_foreground",isDropdown:!0,dropdownWidth:"242px",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.cell_foreground_color")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_BACKGROUND:{action:"colormap-circle",icon:"desygner-icon-fill",cls:"quadra",type:"cell_background",isDropdown:!0,tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.cell_background_color")},dropdownWidth:"242px",hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_BOLD:{action:"on_toggle-cell-bold",icon:"desygner-icon-bold",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.toggle_cell_bold")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_ITALIC:{action:"on_toggle-cell-italic",icon:"desygner-icon-italic",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.toggle_cell_italic")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_EDIT_ALIGNMENT:{action:"on_edit-cell-alignment",icon:"desygner-icon-text-align-center",isDropdown:!0,dropdownWidth:"134px",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.edit_cell_alignment")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_EDIT_BORDER:{action:"on_edit-cell-border",icon:"table-icon-cell-border",isDropdown:!0,dropdownWidth:"240px",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.edit_cell_border")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_BORDER_COLOR:{action:"colormap-circle",icon:"desygner-icon-fill",cls:"quadra",type:"cell_lines",isDropdown:!0,dropdownWidth:"242px",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.cell_border_color")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_FONT:{action:"on_edit-cell-font",icon:"table-icon-cell-font",isDropdown:!0,dropdownWidth:"240px",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.edit_cell_font")},hide:function(){return!INKIVE.Table.tableSelectionInstance||!INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},CELL_MERGE:{action:"on_merge-cells",icon:"table-icon-cell-merge",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.merge_cells")},hide:function(){return!INKIVE.Table.canMerge()}},CELL_SPLIT:{action:"on_split-cell",icon:"table-icon-cell-split",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.split_cell")},hide:function(){return!INKIVE.Table.canSplit()}},ROW_INSERT_BEFORE:{action:"on_insert-row-before",icon:"table-icon-insert-row-before",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.insert_row_before")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},ROW_INSERT_AFTER:{action:"on_insert-row-after",icon:"table-icon-insert-row-after",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.insert_row_after")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},COLUMN_INSERT_BEFORE:{action:"on_insert-column-before",icon:"table-icon-insert-column-before",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.insert_column_before")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},COLUMN_INSERT_AFTER:{action:"on_insert-column-after",icon:"table-icon-insert-column-after",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.insert_column_after")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},ROW_DELETE:{action:"on_delete-row",icon:"table-icon-delete-row",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.delete_row")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},COLUMN_DELETE:{action:"on_delete-column",icon:"table-icon-delete-column",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.delete_column")},hide:function(){return!INKIVE.Table.tableSelectionInstance||1!==INKIVE.Table.tableSelectionInstance.getSelectedCellElements().length}},GROUP_GROUP:{action:"on_groupGroup",icon:"desygner-icon-group",cls:"double",isDropdown:!0,type:"toggle",hide:function(){return INKIVE.EditorFacade.canvas.getSelectedElems().length<2}},GROUP_UNGROUP:{action:"on_groupUngroup",icon:"desygner-icon-ungroup",notLocked:!0,cls:"double",isDropdown:!0,type:"toggle"},LOCK:{action:"on_lockElement",icon:"desygner-icon-unlock",notSubelement:!0,notLocked:!0},UNLOCK:{action:"on_unlockElement",icon:"desygner-icon-lock",notSubelement:!0,isLocked:!0,cls:"double",isDropdown:!0,type:"toggle"},PERMISSIONS:{action:"on_set_permissions",notSubelement:!0,hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",hide:function(){return INKIVE.Menus.showSimplifiedRestrictions}},DESELECT:{action:"on_deselect",notSubelement:!0,icon:"desygner-icon-deselect"},LIBRARY_ADD:{action:"on_library_add",notSubelement:!0,icon:"desygner-icon-context-brandasset",cls:"editor-add-to-library",isDropdown:!0,tooltip:function(){var e=INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.DESIGN||INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary?"editor.contextmenu.add_to_brand_assets":"editor.contextmenu.add_to_personal_library";return INKIVE.TranslateHelper.translate(e)},hide:function(){return!INKIVE.PopupMenuDefault.prototype.isAddtoLibraryAvailable(!0)&&!INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary}},LIBRARY_ADD_QUIET:{action:"on_library_add_quiet",notSubelement:!0,icon:"desygner-icon-context-brandasset",tooltip:function(){var e=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESIGN?"editor.contextmenu.add_to_personal_library":"editor.contextmenu.add_to_brand_assets";return INKIVE.TranslateHelper.translate(e)},hide:function(){return!INKIVE.PopupMenuDefault.prototype.isAddtoLibraryAvailable(!1)||INKIVE.PopupMenuDefault.canAccessWorkspaceLibrary}},UNLINK_SMART_ASSET:{action:"on_unlink_smart_asset",notSubelement:!0,iconSvg:"unlink-smart-asset",tooltip:function(){return INKIVE.TranslateHelper.translate("editor.contextmenu.detach_smart_asset")},hide:function(){var e=(0,o.default)(INKIVE.DesignFacade.canvas.getSelectedElems()||[])[0];return!e||!i.default.smartAssets.attributes.every((function(t){return e.hasAttribute(t)}))}},LINK:{action:"on_linkElement",icon:"desygner-icon-link",cls:"editor-add-link-to-text",forBoxWithImage:!0,isDropdown:!0,dropdownWidth:"240px",notSubelement:!0,notLinked:!0},UNLINK:{action:"on_unlinkElement",icon:"desygner-icon-unlink",cls:"editor-remove-link-to-text",forBoxWithImage:!0,isDropdown:!0,dropdownWidth:"240px",notSubelement:!0,isLinked:!0},VIDEO_SOURCE:{action:"on_set-source",icon:"fa fa-film",notSubelement:!0},VIDEO_AUTOPLAY:{action:"on_toggle-autoplay",icon:"fa fa-play-circle",notSubelement:!0,toggle:"autoplay"},VIDEO_MOVE_TO_NEXT:{action:"on_toggle-move-to-next",icon:"fa fa-forward",notSubelement:!0,toggle:"movetonext"},VIDEO_MUTE:{action:"on_toggle-mute",icon:"fa fa-volume-up",notSubelement:!0,toggle:function(e){return!e.mute}},VIDEO_CONTROLS:{action:"on_toggle-controls",icon:"fa fa-sliders",notSubelement:!0,toggle:"controls"},VIDEO_FULLSCREEN:{action:"on_toggle-fullscreen",icon:"fa fa-arrows-alt",notSubelement:!0,toggle:"fullscreen"},VIDEO_LOOP:{action:"on_toggle-loop",icon:"fa fa-refresh",notSubelement:!0,toggle:"loop"},RESTRICTION_INFO:{action:"on_restrictionInfo",icon:"desygner-icon-question-mark"},ROOT_DRAWING:{action:"on_rootDrawing",hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",dropdownWidth:"260px",dropdownContent:function(e){INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.getDrawingButtons(e)}},ROOT_SHAPES:{action:"on_rootShapes",hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",dropdownWidth:"280px",dropdownHeight:"500px",dropdownContent:function(e){INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.getShapeButtons(e)}},ROOT_FRAMES:{action:"on_rootFrames",hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",dropdownWidth:"330px",dropdownHeight:"500px",dropdownContent:function(e){INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.getFrameButtons(e)}},ROOT_TEXT:{action:"on_rootText",hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",dropdownWidth:"280px",dropdownHeight:"215px",dropdownContent:function(e){INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.getTextButtons(e)}},ROOT_TABLE:{action:"on_rootTable",hasDropdownTitle:!0,isDropdown:!0,cls:"no-icon",dropdownWidth:"158px",dropdownHeight:"190px",dropdownContent:function(e){INKIVE.Menus.elementPopupMenu.popupMenuButtons.popupMenuCommonFunctions.getTableButtons(e)}},BLEED_SIZE:{action:"on_bleedsize",titleTag:!0,cls:"combo",type:"toggle",isDropdown:!0,isDropdownList:!0,dropdownWidth:"85px"},BLEED_CLOSE:{titleTag:!0,action:"on_bleedClose",notSubelement:!0,iconSvg:"cross"},RESTRICT_CHANGES:{action:"on_restrict_changes",notSubelement:!0,iconSvg:"key",tooltip:function(){return INKIVE.TranslateHelper.translate("popupmenu.tooltip.restrict_changes")},hide:function(e){return!e||!e.length||!INKIVE.Menus.showSimplifiedRestrictions}}};var a=s;n.default=a},{"../../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.max-safe-integer.js":889,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.starts-with.js":927}],244:[function(e,t,n){"use strict";function r(e,t){INKIVE.PopupMenuDefault.call(this,e,t)}e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.object.create.js"),e("core-js/modules/es.array.find.js"),r.prototype=Object.create(INKIVE.PopupMenuDefault.prototype),r.prototype.constructor=r,r.prototype.getWrapperHtml=function(){return'<div class="menu popupmenu mobile landscape" data-id="'+this.id+'" data-element-id="'+this.$element.attr("id")+'"><div class="tool-static-block back-menu"><a class="btn" data-href=""><div class="icon-element"><i class="icon-chevron-left"></i></div><span class="text-element">Back to Main menu</span></a></div><div class="undoredo"><a class="btn btn-onmenu action" data-action="on_undo" id="ik-undo" type="toggle"><i class="icon-reply"></i><span class="ui-dropdown-title">undo</span></a><a class="btn btn-onmenu action" data-action="on_redo" id="ik-redo" type="toggle"><i class="icon-forward"></i><span class="ui-dropdown-title">redo</span></a></div></div>'},r.prototype.getSpacer=function(){return null},r.prototype.getButtonWrapper=function(){return $.parseHTML("<li></li>")},r.prototype.refresh=function(){},r.prototype.build=function(){INKIVE.PopupMenuDefault.prototype.build.call(this);var e=this;e.wrapper().find(".back-menu a").click((function(){var t=INKIVE.Tool.getInstance();t.editor.canvas.clearSelection(),t.mobileBackMenuShow(!1),e.destroy()}))};var o=r;n.default=o},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.object.create.js":893,"core-js/modules/es.object.define-property.js":895}],245:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="scroll-handler scroll-handler-left">\n  <i class="fa fa-angle-left">\n  </i>\n</div>\n<div class="element-popupmenu menu">\n  <div class="special-buttons">\n    <ul>\n    </ul>\n  </div>\n  <div class="specific-buttons">\n    <ul>\n    </ul>\n  </div>\n  <div class="common-buttons">\n    <ul>\n    </ul>\n  </div>\n</div>\n<div class="root-popupmenu menu">\n  <div class="special-buttons">\n  </div>\n  <div class="root-buttons">\n    <ul>\n    </ul>\n  </div>\n  <div class="common-buttons">\n  </div>\n</div>\n<div class="scroll-handler scroll-handler-right fa angle-double-right">\n  <i class="fa fa-angle-right">\n  </i>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],246:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("./template.hbs"),o=e("./content/popupmenu-buttons"),i=e("../context-menu").getElementMenuId;t.exports=Backbone.View.extend({popupMenuButtons:null,initialize:function(){_.bindAll(this,"hide","removeElementEvent"),this.popupMenuButtons=new o,INKIVE.DesignFacade.on("delete",this.removeElementEvent)},render:function(e,t){if((!this.canvas||!this.canvas.runExtensions("getBleedValues",{}).active||"bleed"===t)&&e&&e.length){this.$el.html()||this.$el.html(r()),this.hide();var n=[];if(!t)for(var o=0;o<e.length;o++){var s=e[o];if(s){$(s).hasClass("element")||$(s).addClass("element");var a=i(s);if(0===o&&(t=a,n.push(t)),o>0&&a!==t){t="multiselect",n.push(a);break}}}this.show(e[0],t,n)}},show:function(e,t,n){$("#workarea").css("cursor",""),this.popupMenuButtons.buildPopupMenu(e,t,n,this.$el),this.$el.find(".element-popupmenu li a:not([data-action=on_fontfamily])").click((function(){$("#sidebar-resize-button").removeClass("collapse-hidden",$("#sidebar-resize-button").is(":hidden"))})),this.$el.find("a[data-action=on_fontfamily]").click((function(){$("#sidebar-resize-button").toggleClass("collapse-hidden",$(this).is(".active"))})),this.$el.find("a[data-action=on_fontfamily] div").click((function(e){e.stopPropagation()}))},hide:function(){if(this.canvas=this.canvas||INKIVE.Tool.getInstance().editor.canvas,!this.canvas.runExtensions("getBleedValues",{}).active){_.each($(".element-popupmenu"),_.bind((function(e){var t=$(e).attr("data-element-id"),n=$("#svgcontent").find("#"+t);n.length&&n.data("popupmenu")&&n.popupmenu("destroy")}),this)),$(".element, .subelement, .background rect, .background image, .main>rect, .main>path").each((function(){var e=$(this);e.data("popupmenu")&&e.popupmenu("destroy")}));var e=$("#font-menu-list").addClass("hidden");e.children().length&&e.appendTo(this.$el),this.$el.find(".element-popupmenu>div>ul").empty(),this.$el.find(".scroll-handler i").off("click"),this.$el.find(".scroll-handler").hide(),this.$el.find(".element-popupmenu").css("display","none"),this.$el.find(".element-popupmenu").css("left",0),this.$el.find(".root-popupmenu").css("display","flex"),$("#sidebar-resize-button").removeClass("collapse-hidden")}},refresh:function(){this.hide(),this.render(this.canvas.getSelectedElems())},removeElementEvent:function(){this.hide(),this.canvas.runExtensions("clear",{}),$("#sidebar-resize-button").removeClass("collapse-hidden")}})},{"../context-menu":203,"./content/popupmenu-buttons":236,"./template.hbs":245,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],247:[function(e,t,n){"use strict";e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.map.js");var r=e("../../helpers/dataUrl").isDataURL,o=e("../factory/images"),i={container:e("./templates/filterpicker/container.hbs"),SVGImageFiltred:e("./templates/filterpicker/svg-image-filtred.hbs")};!function(t){INKIVE.C.IS_MOBILE_APP||t.fn.extend({filterpicker:function(n){var s,a,l={},c=window.NAMESPACE_URIS.SVG;n=t.extend({defaultFilter:null,$svgImageElement:null},n);var u=function(e){return INKIVE.TranslateHelper.translate("popupmenu.filters."+e)},d=[{name:u("normal"),className:"thumb-normal",template:_.template('<feColorMatrix type="saturate" values="1"></feColorMatrix>')},{name:u("cali"),className:"thumb-cali",template:e("./templates/filterpicker/filter-cali.hbs")},{name:u("drama"),className:"thumb-drama",template:e("./templates/filterpicker/filter-drama.hbs")},{name:u("edge"),className:"thumb-edge",template:e("./templates/filterpicker/filter-edge.hbs")},{name:u("epic"),className:"thumb-epic",template:e("./templates/filterpicker/filter-epic.hbs")},{name:u("festive"),className:"thumb-festive",template:e("./templates/filterpicker/filter-festive.hbs")},{name:u("grayscale"),className:"thumb-grayscale",template:e("./templates/filterpicker/filter-grayscale.hbs")},{name:u("nordic"),className:"thumb-nordic",template:e("./templates/filterpicker/filter-nordic.hbs")},{name:u("street"),className:"thumb-street",template:e("./templates/filterpicker/filter-street.hbs")},{name:u("blues"),className:"thumb-the-blues",template:e("./templates/filterpicker/filter-the-blues.hbs")}],p={to:{hue:function(e){return m(e,-180,180)},blur:function(e){return m(e,-10,10)},sharpen:function(e){return-1*m(e,-1,1)},contrast:function(e){return m(e,0,2)},brightness:function(e){return m(e,0,2)},saturation:function(e){return m(e,0,2)},matrixSaturation:function(e){return m(e,-1,1)},vignetteOpacity:function(e){return.7+m(e,0,.3,0,100)},vignetteSpecular:function(e){return m(e,0,30,0,100)}},from:{hue:function(e){return h(e,-180,180)},blur:function(e){return h(e,-10,10)},sharpen:function(e){return-1*h(e,-1,1)},contrast:function(e){return h(e,0,2)},brightness:function(e){return h(e,0,2)},saturation:function(e){return h(e,0,2)},matrixSaturation:function(e){return h(e,-1,1)},vignetteSpecular:function(e){return m(e,0,100,0,30)}}};function h(e,t,n){return m(e,-100,100,t,n)}function m(e,t,n,r,o){return t+(n-t)*(((e=parseFloat(e))-(r=void 0===r?-100:r))/((o=void 0===o?100:o)-r))}function f(){var e=a.find(".slider-wrapper.saturation-slider-wrapper input").val();if(0!==e){var t=document.createElementNS(c,"feColorMatrix");if(e<0)t.setAttribute("type","saturate"),t.setAttribute("values",p.to.saturation(e));else{var n=p.to.matrixSaturation(e),r=-.3*n,o=1+.7*n;t.setAttribute("type","matrix"),t.setAttribute("values",o+" "+r+" "+r+" 0 0 "+r+" "+o+" "+r+" 0 0 "+r+" "+r+" "+o+" 0 0 0 0 0 1 0")}return t}}function g(){var e=a.find(".slider-wrapper.blur-slider-wrapper input").val();if(0!==e){if(e>0){var t=document.createElementNS(c,"feGaussianBlur");return t.setAttribute("stdDeviation",p.to.blur(e)),t}var n=p.to.sharpen(e),r=-1*n,o=1+4*n,i=document.createElementNS(c,"feConvolveMatrix");return i.setAttribute("order","3 3"),i.setAttribute("preserveAlpha","true"),i.setAttribute("kernelMatrix","0 "+r+" 0 "+r+" "+o+" "+r+" 0 "+r+" 0"),i}}function b(){var e=a.find(".slider-wrapper.brightness-slider-wrapper input").val();if(0!==e){var t=p.to.brightness(e),n=document.createElementNS(c,"feComponentTransfer");return _.each(["R","G","B"],(function(e){var r=document.createElementNS(c,"feFunc"+e);r.setAttribute("type","linear"),r.setAttribute("slope",t),n.appendChild(r)})),n}}function v(){var e=a.find(".slider-wrapper.contrast-slider-wrapper input").val();if(0!==e){var t=p.to.contrast(e),n=.5-.5*t,r=document.createElementNS(c,"feComponentTransfer");return _.each(["R","G","B"],(function(e){var o=document.createElementNS(c,"feFunc"+e);o.setAttribute("type","linear"),o.setAttribute("slope",t),o.setAttribute("intercept",n),r.appendChild(o)})),r}}function y(){var e=a.find(".slider-wrapper.x-process-slider-wrapper input").val();if(0!==e){var t=document.createElementNS(c,"feColorMatrix");return t.setAttribute("type","hueRotate"),t.setAttribute("values",p.to.hue(e)),t}}function j(e,t){var r=a.find(".slider-wrapper.vignette-slider-wrapper input").val();if(0!==r){var o=p.to.vignetteSpecular(r),i=function(){if((t=t||n.$svgImageElement).hasClass("layoutBox")){var e=t.get(0).textContent.replace(/[^\d.-\s]/g,"").split(" ");return{leftOffset:parseFloat(e[0]),topOffset:parseFloat(e[1]),width:parseFloat(e[2]),height:parseFloat(e[3])}}return{leftOffset:parseFloat(t.attr("x")),topOffset:parseFloat(t.attr("y")),width:parseFloat(t.attr("width")),height:parseFloat(t.attr("height"))}}(),s=document.createElementNS(c,"feFlood"),l=document.createElementNS(c,"fePointLight"),u=document.createElementNS(c,"feSpecularLighting"),d=document.createElementNS(c,"feBlend"),h=document.createElementNS(c,"feBlend");return s.setAttribute("result","blackfield-"+e),s.setAttribute("x",i.leftOffset+"px"),s.setAttribute("y",i.topOffset+"px"),s.setAttribute("width",i.width+"px"),s.setAttribute("height",i.height+"px"),l.setAttribute("x",i.leftOffset+i.width/2),l.setAttribute("y",i.topOffset+i.height/2),l.setAttribute("z",_.min([i.width,i.height])),u.setAttribute("result","spotlight-"+e),u.setAttribute("lighting-color","#FFFFFF"),u.setAttribute("surfaceScale","1"),u.setAttribute("specularConstant","1"),u.setAttribute("specularExponent",o),u.setAttribute("x",i.leftOffset+"px"),u.setAttribute("y",i.topOffset+"px"),u.setAttribute("width",i.width+"px"),u.setAttribute("height",i.height+"px"),u.appendChild(l),d.setAttribute("result","A-"+e),d.setAttribute("in","blackfield-"+e),d.setAttribute("in2","spotlight-"+e),d.setAttribute("mode","lighten"),h.setAttribute("result","B-"+e),h.setAttribute("in","A-"+e),h.setAttribute("in2","SourceGraphic"),h.setAttribute("mode","multiply"),[s,u,d,h]}}function w(){var e=t.Deferred();return a=t(i.container()),C().then((function(n){a.on("change",k),a.tabs(),function(e){var n=a.find(".presets-container");_.each(d,(function(r){var o="filter-thumb-"+r.className,s=r.template({filter_id:o}),a=t("<li>",{class:"thumb "+r.className,html:i.SVGImageFiltred({width:110,height:110,image:e,filter_id:o,filter:s})});a.append('<span class="filter-name">'+r.name+"</span>"),n.append(a)}))}(n),function(e){var n=a.find(".svg-container");t(i.SVGImageFiltred({width:400,height:400,image:e,filter_id:"filtered-image-preview",filter:_.findWhere(d,{className:"thumb-normal"}).template()})).appendTo(n)}(n),e.resolve()})),e.promise()}function I(e,t){t=t||0;var r=(e.width()||400)+t,o=(e.height()||400)+t,i=r/o,s=parseInt(n.$svgImageElement.attr("width"))/parseInt(n.$svgImageElement.attr("height"));return{width:s>i?o*s:r,height:s>i?o:r/s}}function x(){C().then((function(e){var t=a.find(".presets-container"),n=t.find("li"),r=n.find("image");r.attr("xlink:href",e),t.hide(),INKIVE.Modal.loader(t.parent()),t.hasClass("slick-slider")&&t.slick("slickGoTo",0),_.delay((function(){n.width(n.width()||n.height()),INKIVE.Modal.loaderClose(t.parent()),t.show(),function(){var e=a.find(".presets-container");e.hasClass("slick-slider")&&e.slick("unslick"),e.slick({prevArrow:'<span class="prev btn btn-green"><i class="icon-chevron-left"></i></span>',nextArrow:'<span class="next btn btn-green"><i class="icon-chevron-right"></i></span>',infinite:!0,slidesToShow:4,slidesToScroll:2})}();var e=I(n,2);r.attr("width",e.width),r.attr("height",e.height),n.find("svg").attr("width",e.width),n.find("svg").attr("height",e.height),s&&s.refresh()}),2e3)}))}function E(e){var n,r,o,i,s=p.from,l=a.find(".sliders-container");!function(){var e=INKIVE.TranslateHelper.translate;function n(n,r,o,i){i=isNaN(i)?0:Math.round(i);var s=t('<div class="slider-wrapper"><div class="slider"></div></div>'),c=t('<input type="text" />').val(i);s.append(c),s.addClass(n+"-slider-wrapper"),l.append(s),c.on("click",(function(e){e.stopPropagation()})),c.keyup((function(e){var n=parseInt(t(this).val())||0;n>o?n=o:n<r&&(n=r),t(this).val(n),u.slider("option","value",n),a.trigger("change")}));var u=s.children(".slider").slider({max:o,min:r,value:i,slide:function(e,t){c.val(t.value),a.trigger("change")}});u.slider("float"),s.prepend(t("<label>",{text:e("filterpicker.sliders."+n)}))}l.empty(),n("brightness",-100,100),n("contrast",-100,100),n("saturation",-100,100),n("blur",-100,100),n("x-process",-100,100),n("vignette",0,100)}(),l.find(".blur-slider-wrapper input").val(function(){var t=e.find("feGaussianBlur"),n=e.find("feConvolveMatrix");if(t.length)return s.blur(t.attr("stdDeviation"));if(n.length){var r=n.attr("kernelMatrix");return s.sharpen(-1*parseFloat(r.split(" ")[1]))}return 0}()),l.find(".x-process-slider-wrapper input").val((n=e.find('feColorMatrix[type="hueRotate"]')).length?s.hue(n.attr("values")):0),l.find(".vignette-slider-wrapper input").val((r=e.find("feSpecularLighting")).length?s.vignetteSpecular(r.attr("specularExponent")):0),l.find(".contrast-slider-wrapper input").val((o=e.find("feComponentTransfer feFuncR[intercept]")).length?s.contrast(o.attr("slope")):0),l.find(".brightness-slider-wrapper input").val((i=e.find("feComponentTransfer feFuncR:not([intercept])")).length?s.brightness(i.attr("slope")):0),l.find(".saturation-slider-wrapper input").val(function(){var t=e.find('feColorMatrix[type="saturate"]'),n=e.find('feColorMatrix[type="matrix"]');if(t.length)return s.saturation(t.attr("values"));if(n.length){var r=n.attr("values");return s.matrixSaturation((r.split(" ")[0]-1)/.7)}return 0}()),l.find("input").trigger("keyup")}function k(){var e=a.find("#filtered-image-preview"),t=e.get(0),n=e.closest("svg").find("image"),r=function(){t.innerHTML="";var e=_.compact(_.flatten(_.map([j,f,b,v,g,y],(function(e){return e("filtered-image-preview",n)}))));return _.each(e,(function(e){t.appendChild(e)})),e.length>0}();r&&n.attr("filter","url(#filtered-image-preview)"),r||n.removeAttr("filter")}function C(){var e=t.Deferred(),i=n.$svgImageElement[0].getAttribute("xlink:href");if(r(i)){if(i=o.getImageUrl(n.$svgImageElement[0]),l[i])return l[i].promise();l[i]=e,function(e,t){var n=new Image;function r(){n.src=e.shift()}r(),n.onload=function(){t(n.src)},n.onerror=function(){e.length&&r()}}([o.getVersionUrl(i,"tab"),i],e.resolve)}else e.resolve(i);return e.promise()}return this.each((function(e){var r=n.$svgImageElement.attr("id"),o="filter_"+r;s&&s.close(),t("#filter-picker").remove(),w().then((function(){var e;e=_.debounce((function(){a.trigger("change"),p()}),400),n.$svgImageElement.on("change",(function(){t("#"+o).length&&(u(),e())})),a.find(".presets-container li").off("click").on("click",(function(e){e.stopPropagation();var n=t("#filtered-image-preview"),r=n.closest("svg").find("image"),o=t(this).attr("class").split(/\s+/),i=_.find(d,(function(e){return _.contains(o,e.className)}));i&&(n.html(i.template({filter_id:"filtered-image-preview"})),r.attr("filter","url(#filtered-image-preview)"),E(n),a.trigger("change"))})),a.off("change").on("change",k),_.defer(u)}));var i=.8*t(window).width();i>800&&(i=800);var l=INKIVE.TranslateHelper.translate;function u(){C().then((function(e){var t=a.find(".svg-container"),n=t.find("image"),r=I(t,4);n.attr("xlink:href",e),n.attr("width",r.width),n.attr("height",r.height),t.find("svg").attr("width",r.width),t.find("svg").attr("height",r.height)})),x(),E(t("#"+o))}function p(){for(var e="filter_"+n.$svgImageElement.attr("id"),r=function(){var e=document.createElementNS(c,"defs"),t=n.$svgImageElement.closest("svg");return t.children("defs").length||t.prepend(e),t.children("defs").get(0)}();t("#"+e).length;)t("#"+e).remove();var o=function(){var t=document.createElementNS(c,"filter");t.setAttribute("id",e);var n=_.compact(_.flatten(_.map([j,f,b,v,g,y],(function(t){return t(e)}))));return _.each(n,(function(e){t.appendChild(e)})),r&&n.length&&r.appendChild(t),n.length>0}();o&&n.$svgImageElement.attr("filter","url(#"+e+")"),o||n.$svgImageElement.removeAttr("filter"),t("[data-action=on_imageFilter]").toggleClass("applied",o),s&&s.close()}s=INKIVE.Modal.modalWindow(a,{width:i,headerIcon:"desygner-icon-filters",headerTitle:INKIVE.TranslateHelper.translate("popupmenu.dropdown_title.image_filter"),buttons:[{title:l("editor.apply"),onClick:function(){p(),INKIVE.DesignFacade.trigger("image.filter",r)}}]}),a.parents(".modal").addClass("allow-margins"),a.parents(".modal").addClass("filter-image-popup")}))}})}(jQuery)},{"../../helpers/dataUrl":632,"../factory/images":127,"./templates/filterpicker/container.hbs":252,"./templates/filterpicker/filter-cali.hbs":253,"./templates/filterpicker/filter-drama.hbs":254,"./templates/filterpicker/filter-edge.hbs":255,"./templates/filterpicker/filter-epic.hbs":256,"./templates/filterpicker/filter-festive.hbs":257,"./templates/filterpicker/filter-grayscale.hbs":258,"./templates/filterpicker/filter-nordic.hbs":259,"./templates/filterpicker/filter-street.hbs":260,"./templates/filterpicker/filter-the-blues.hbs":261,"./templates/filterpicker/svg-image-filtred.hbs":262,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],248:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'        <div class="control">\n          <button class="btn-page-options">\n            <span class="dot"></span>\n            <span class="dot"></span>\n            <span class="dot"></span>\n          </button>\n        </div>\n'},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"animationInUse"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:17,column:8},end:{line:26,column:15}}}))?i:""},4:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <button\n            class="duration"\n            data-action="duration"\n            data-popover="tooltip"\n            data-placement="bottom"\n            data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.pages.duration_tooltip",{name:"t",hash:{},data:o,loc:{start:{line:23,column:33},end:{line:23,column:78}}}))+'">\n            '+l("function"==typeof(i=null!=(i=c(n,"duration")||(null!=t?c(t,"duration"):t))?i:a)?i.call(s,{name:"duration",hash:{},data:o,loc:{start:{line:24,column:12},end:{line:24,column:26}}}):i)+"\n          </button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item">\n  <p class="counter">'+c("function"==typeof(s=null!=(s=u(n,"pageNumber")||(null!=t?u(t,"pageNumber"):t))?s:l)?s.call(a,{name:"pageNumber",hash:{},data:o,loc:{start:{line:2,column:21},end:{line:2,column:35}}}):s)+'</p>\n  <div class="item-preview-wrapper">\n    <div class="preview-item">\n      <div class="preview" style="background-image: url('+c("function"==typeof(s=null!=(s=u(n,"imgSrc")||(null!=t?u(t,"imgSrc"):t))?s:l)?s.call(a,{name:"imgSrc",hash:{},data:o,loc:{start:{line:5,column:56},end:{line:5,column:68}}}):s)+')">\n      </div>\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"canAddPage"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:6},end:{line:15,column:13}}}))?i:"")+(null!=(i=u(n,"if").call(a,null!=t?u(t,"showAnimation"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:6},end:{line:27,column:13}}}))?i:"")+"    </div>\n  </div>\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],249:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                        <div class="add-new-page-wrapper">\n                            <div class="shadow"></div>\n                            <button class="btn-panel btn-add-page">\n                                <div>\n                                    <icon>\n                                        <svg>\n                                            <use xlink:href="#editor-plus"></use>\n                                        </svg>\n                                    </icon>\n                                    '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"bottom_submenu.pages.new_page",{name:"t",hash:{},data:o,loc:{start:{line:95,column:36},end:{line:95,column:73}}}))+"\n                                </div>\n                            </button>\n                        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="pages-panel">\n    <div class="control-popover">\n        <div class="page-options-popover">\n            <div class="page-options-wrapper">\n                <div class="page-options">\n                    <div class="page-option" data-action="duplicate">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#editor-duplicate"></use>\n                            </svg>\n                        </icon>\n                        <div>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"popupmenu.tooltip.duplicate",{name:"t",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:64}}}))+'</div>\n                    </div>\n                    <div class="page-option" data-action="delete">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#editor-delete"></use>\n                            </svg>\n                        </icon>\n                        <div>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"editor.contextmenu.delete",{name:"t",hash:{},data:o,loc:{start:{line:20,column:29},end:{line:20,column:62}}}))+'</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="pages-btn-wrapper">\n        <div class="zoom-wrapper">\n            <button class="btn-panel btn-zoom out">\n                <icon>\n                    <svg>\n                        <use xlink:href="#editor-minus"></use>\n                    </svg>\n                </icon>\n            </button>\n            <button class="btn-panel btn-zoom custom">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.zoom.fit",{name:"t",hash:{},data:o,loc:{start:{line:35,column:54},end:{line:35,column:85}}}))+'</button>\n            <button class="btn-panel btn-zoom in">\n                <icon>\n                    <svg>\n                        <use xlink:href="#editor-plus"></use>\n                    </svg>\n                </icon>\n            </button>\n            <div class="ui-dropdown-content custom-zoom">\n                <ul>\n                    <li><a class="btn-panel" data-value="10">10%</a></li>\n                    <li><a class="btn-panel" data-value="25">25%</a></li>\n                    <li><a class="btn-panel" data-value="50">50%</a></li>\n                    <li><a class="btn-panel" data-value="75">75%</a></li>\n                    <li><a class="btn-panel" data-value="100">100%</a></li>\n                    <li><a class="btn-panel" data-value="125">125%</a></li>\n                    <li><a class="btn-panel" data-value="150">150%</a></li>\n                    <li><a class="btn-panel" data-value="175">175%</a></li>\n                    <li><a class="btn-panel" data-value="200">200%</a></li>\n                    <li><a class="btn-panel" data-value="500">500%</a></li>\n                    <li><a class="btn-panel" data-value="fit">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.zoom.fit",{name:"t",hash:{},data:o,loc:{start:{line:55,column:62},end:{line:55,column:93}}}))+'</a></li>\n                    <li><a class="btn-panel" data-value="original">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.zoom.original",{name:"t",hash:{},data:o,loc:{start:{line:56,column:67},end:{line:56,column:103}}}))+'</a></li>\n                </ul>\n            </div>\n        </div>\n        <button class="btn-panel btn-show-pages">\n            <div>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.pages.heading",{name:"t",hash:{},data:o,loc:{start:{line:61,column:17},end:{line:61,column:53}}}))+'</div>\n            <span class="panel-header-heading page-count"></span>\n        </button>\n    </div>\n\n    <div class="pages-panel-wrapper">\n        <div class="pages-panel">\n            <div class="content">\n                <div class="panel-header">\n                    <span class="panel-header-heading">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"bottom_submenu.pages.heading",{name:"t",hash:{},data:o,loc:{start:{line:70,column:55},end:{line:70,column:91}}}))+'</span>\n                    <span class="panel-header-heading page-count"></span>\n                    <button class="btn-panel-header-close">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#editor-chevron-right-alt"></use>\n                            </svg>\n                        </icon>\n                    </button>\n                </div>\n                <div class="content-items-wrapper">\n                    <div>\n                        <ul class="content-items-list">\n                        </ul>\n                    </div>\n'+(null!=(i=c(n,"if").call(s,null!=t?c(t,"canAddPage"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:85,column:20},end:{line:99,column:27}}}))?i:"")+"                </div>\n            </div>\n        </div>\n    </div>\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],250:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.weak-map.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.object.get-own-property-descriptor.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=e("@babel/runtime/helpers/typeof"),i=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find-index.js"),e("core-js/modules/es.number.constructor.js");var s=r(e("@babel/runtime/helpers/toConsumableArray")),a=r(e("@babel/runtime/helpers/slicedToArray")),l=r(e("@babel/runtime/helpers/asyncToGenerator")),c=r(e("./template.hbs")),u=r(e("./content-item.hbs")),d=r(e("../../factory/formats")),p=e("../../factory/company"),h=r(e("../../factory/page-thumbnail")),m=e("../../../../../src/components/sidebar-animation/constants"),f=e("../../../helpers/shortcut-helpers"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("../top-submenu/contents/download/download-content-settings")),b=r(e("../top-submenu/contents/download/download-storage-manage"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var y=[],j={},_=!1,w=!1,I=!1,x=function(){var e=(0,l.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.instance.initCredentials();case 2:return e.next=4,p.instance.initProject();case 4:return e.next=6,p.instance.getProjectData();case 6:if(t=e.sent,w=!1,t&&t.metadata&&t.metadata.animation&&t.metadata.animation.pages){e.next=10;break}return e.abrupt("return",j);case 10:return w=!0,n=t.metadata.animation.pages,Object.entries(n).forEach((function(e,t){var n=(0,a.default)(e,2),r=n[0],o=n[1],i=o.pageDuration,s=o.inOutDuration;y.find((function(e){return String(e.designId)===String(r)}))&&(j[r]={inOutDuration:isNaN(s)?m.defaultInOutDuration:s,pageDuration:isNaN(i)?m.defaultPageDuration:i})})),e.abrupt("return",j);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){return INKIVE.ProjectFacade.get("design",{page_number:e+1})},k=function(){var e=(0,l.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","");case 2:return e.abrupt("return",h.default.get(t.design_id,t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,l.default)(i.default.mark((function e(t){var n,r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t)){e.next=15;break}return o=E(r),s=o.design_id,e.t0=n,e.next=8,k(o);case 8:e.t1=e.sent,e.t2=s,e.t3={imgSrc:e.t1,designId:e.t2},e.t0.push.call(e.t0,e.t3);case 12:r++,e.next=2;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=0;t.exports=Backbone.View.extend({events:{"click .btn-add-page:not(.disabled)":"addPage","click .btn-show-pages:not(.disabled)":"togglePagesOpen","click .btn-panel-header-close:not(.disabled)":"setPagesClosed","click .btn-zoom.custom:not(.disabled)":"showCustomZoom","click .custom-zoom:not(.disabled) a":"customZoom","click .btn-zoom.in:not(.disabled)":"zoomInOut","click .btn-zoom.out:not(.disabled)":"zoomInOut","click .item:not(.disabled)":"changePage","click .page-option:not(.disabled)":"triggerPageOption","click .btn-page-options:not(.disabled)":"showPageOptions"},get isMobile(){return INKIVE.C.IS_MOBILE},initialize:function(){var e=this;this.isMobile||(this.pageLocked=!1,this.zoom="fit",function(){var t=(0,l.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasRestrictions()){t.next=3;break}return t.next=3,INKIVE.RestrictionsFacade.initialize();case 3:return t.next=5,h.default.initialize();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()().then((0,l.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.render(),e.addEventListeners(),e.pagesLength=INKIVE.C.BOOK.num_pages,t.next=5,C(e.pagesLength);case 5:return y=t.sent,t.next=8,x();case 8:if(j=t.sent,e.initList(),e.update(),!INKIVE.RestrictionsFactory||_){t.next=15;break}return t.next=14,INKIVE.RestrictionsFactory.initialize();case 14:_=!0;case 15:case"end":return t.stop()}}),t)})))),this.debouncedPageMoveTo=this.debounce(this.pageMoveTo,100),INKIVE.EditorFacade.on("page.move_to",(function(t){var n=t.page_number;e.pageLocked=!1,S=n-1,e.toggleSVGLoadingIndicator(!1),e.updateActivePageStyles(),e.el.querySelectorAll(".item").forEach((function(e){return e.classList.remove("disabled")}))})),h.default.on("update",(function(){return e.update()})),INKIVE.EditorFacade.on("page.saved",(function(){return e.update()})),INKIVE.ProjectFacade.on("design.removed",(function(){return e.update()})),INKIVE.ProjectFacade.on("design.copied",(function(){return e.update()})),INKIVE.ProjectFacade.on("design.added",(function(){return e.update()})),INKIVE.DesignFacade.on("template.update.designed",(function(){return e.update()})),INKIVE.DesignFacade.on("template.update.restricted",(function(){return e.update()})),INKIVE.DesignFacade.on("template.update.template_applied_on_current_page",(function(){return e.update()})))},render:function(){this.isMobile||this.$el.html((0,c.default)({canAddPage:this.canAddPage()}))},update:function(){var e=this;this.pagesLength=INKIVE.C.BOOK.num_pages,this.el.querySelectorAll(".page-count").forEach((function(t){t.innerHTML="(".concat(e.pagesLength,")")})),this.el.querySelector(".btn-zoom.custom").innerHTML=this.getZoomDisplayText(),this.canChangePageOrder()&&!this.sortableCreated&&(this.sortableCreated=!0,INKIVE.Helpers.initTooltips(this.$el),this.$el.find(".content-items-list:not(.sortable-disabled)").sortable({axis:"y",update:function(t,n){var r=n.item.index();e.updatePageOrder(r)}})),C(this.pagesLength).then((function(t){y=t,e.recycleDOM()})),this.recycleDOM()},resetDOM:function(){var e=this;C(this.pagesLength).then((function(t){y=t,e.initList(),e.update()}))},updatePageOrder:function(e){var t=this;return(0,l.default)(i.default.mark((function n(){var r,o;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.el.querySelectorAll(".content-item-wrapper"),o=(0,s.default)(r).map((function(e){return e.classList.add("disabled"),e.dataset.designid})).filter((function(e){return!!e})),n.next=4,INKIVE.ProjectFacade.changePageOrder(o);case 4:t.resetDOM(),t.changePage(null,e),t.el.querySelectorAll(".content-item-wrapper").forEach((function(e){return e.classList.remove("disabled")}));case 7:case"end":return n.stop()}}),n)})))()},durationPrettyPrint:function(e){return"".concat(e/1e3," sec")},createListItem:function(e){var t=e.pageNumber,n=e.imgSrc,r=e.durationInMs,o=e.designId;w&&(I=!0);var i=document.createElement("LI");return i.dataset.currpage=t,i.dataset.designid=o,i.setAttribute("class","content-item-wrapper"),i.setAttribute("id","content-item-".concat(t)),i.appendChild($((0,u.default)({showAnimation:this.showAnimation(),canAddPage:this.canAddPage(),animationInUse:w,pageNumber:t+1,imgSrc:"",duration:this.durationPrettyPrint(r)}))[0]),n&&(i.querySelector(".preview").style.backgroundImage="url(".concat(n,")")),i},initList:function(){var e=this.el.querySelector(".content-items-list"),t=e.clientHeight/130;e.innerHTML="";for(var n=0;n<this.pagesLength;n++){var r=y[n]?y[n].designId:"",o=y[n]&&n<Math.ceil(t)?y[n].imgSrc:"",i=m.defaultPageDuration,s=m.defaultInOutDuration;j[r]&&(i=j[r].pageDuration||i,s=j[r].inOutDuration||s);var a=n===y.length-1?i+s:i+s+s,l=this.createListItem({pageNumber:n,imgSrc:o,duration:a,designId:r});e.appendChild(l)}},recycleDOM:function(){for(var e=this,t=this.el.querySelector(".content-items-list"),n=t.scrollTop/130,r=t.clientHeight/130,o=Math.floor(n),i=Math.ceil(n+r),s=t.querySelectorAll("li").length;s<this.pagesLength;){var a=y[s]?y[s].designId:"",l=y[s]&&s<Math.ceil(i)?y[s].imgSrc:"",c=m.defaultPageDuration,u=m.defaultInOutDuration;j[a]&&(c=j[a].pageDuration||c,u=j[a].inOutDuration||u);var d=s===y.length-1?c+u:c+u+u,p=this.createListItem({pageNumber:s,imgSrc:l,duration:d,designId:a});t.appendChild(p),p.classList.add("disabled"),s++,this.sortableCreated&&this.$el.find(".content-items-list").sortable("refresh")}for(var h=function(n){var r=t.querySelector("#content-item-".concat(n));if(r)if(r.classList.remove("disabled"),k(E(n)).then((function(e){r.querySelector(".preview").style.backgroundImage="url(".concat(e,")"),r.querySelector(".preview").dataset.backgroundImage="url(".concat(e,")")})),y[n]){var o=y[n].designId;r.dataset.designid=o;var i=r.querySelector(".duration");if(i){var s=m.defaultPageDuration,a=m.defaultInOutDuration;j[o]&&(s=j[o].pageDuration||s,a=j[o].inOutDuration||a);var l=n===y.length-1?s+a:s+a+a;i.innerHTML=e.durationPrettyPrint(l)}}else r.remove()},f=o;f<i;f++)h(f);this.updateActivePageStyles()},attemptImageLoad:function(e,t){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500;if(o>i)clearTimeout(n);else{var a=new Image;a.src=t,a.onload=function(){e.style.backgroundImage="url(".concat(t,")"),clearTimeout(n)},a.onerror=function(){n=setTimeout((function(){r.attemptImageLoad(e,t,o+1,i,s)}),o*s)}}},addEventListeners:function(){var e=this,t=INKIVE.Tool.getInstance().editor;document.addEventListener("keydown",(function(n){var r=n.target,o=t.canvas.getMode(),i="select"===o,s=t.canvas.getSelectedElems(),a=s&&s.length,l=a&&INKIVE.RestrictionsFacade.isActionAllowed("text_decoration",s[0]);if(!("INPUT"===r.nodeName||r.shadowRoot||e.pageLocked||i&&a))if("textedit"!==o){var c=["ArrowUp","Up","ArrowLeft"].includes(n.key)||(n.ctrlKey||n.metaKey)&&188===n.keyCode,u=["ArrowDown","Down","ArrowRight"].includes(n.key)||(n.ctrlKey||n.metaKey)&&190===n.keyCode;if(c){var d=0===S?e.pagesLength-1:S-1;e.changePage(null,d)}else if(u){var p=S===e.pagesLength-1?0:S+1;e.changePage(null,p)}}else(0,f.handleTextShortcuts)(n,l)}));var n=this.debounce(this.recycleDOM,250);this.el.querySelector(".content-items-list").addEventListener("scroll",n),this.el.querySelector(".content-items-wrapper > :first-child").addEventListener("scroll",this.removeActiveClass.bind(this)),document.addEventListener("mouseup",this.removeActiveClass.bind(this)),document.addEventListener("Animation.pageSetProperties",(function(t){var n=t.detail,r=n.pageId,o=n.properties,i=o.pageDuration,s=o.inOutDuration,a=y.findIndex((function(e){return String(e.designId)===String(r)}));I||(w=!0,e.initList()),j[r]={inOutDuration:isNaN(s)?m.defaultInOutDuration:s,pageDuration:isNaN(i)?m.defaultPageDuration:i};var l=e.el.querySelector("#content-item-".concat(a," .duration"));if(l){var c=m.defaultPageDuration,u=m.defaultInOutDuration;j[r]&&(c=j[r].pageDuration||c,u=j[r].inOutDuration||u);var d=a===y.length-1?c+u:c+u+u;l.innerHTML=e.durationPrettyPrint(d)}}))},removeActiveClass:function(e){this.el.querySelectorAll(".control.active").forEach((function(e){return e.classList.remove("active")})),this.el.querySelector(".page-options-popover").classList.remove("active")},setPagesOpen:function(){document.querySelector("[data-action=order-print]").classList.contains(".order-print-shown")||(this.el.querySelector(".pages-panel").classList.add("pages-panel-opened"),INKIVE.C.PAGES_PANEL_OPEN=!0,this.changeVerticalScrollPositionX(),h.default.renderCurrentPage())},hideCustomZoom:function(){this.el.querySelector(".custom-zoom").style.visibility="visible"},updateActivePageStyles:function(e){var t=this.el.querySelector('.content-item-wrapper[data-currpage="'.concat(e||S,'"]'));t&&(this.el.querySelectorAll(".content-item-wrapper").forEach((function(e){return delete e.dataset.active})),t.dataset.active=!0,this.zoom="fit",document.querySelector(".zoom-wrapper .custom").textContent=this.getZoomDisplayText())},addPage:function(){var e=this;return(0,l.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.canAddPage()){t.next=6;break}return localStorage.setItem("pageActions","true"),n=++e.pagesLength,t.next=5,INKIVE.ProjectFacade.handle("design","add",{page_number:n,quiet:!0});case 5:document.querySelector(".content-items-list >:last-child").scrollIntoView({behavior:"smooth"});case 6:case"end":return t.stop()}}),t)})))()},togglePagesOpen:function(){if(!INKIVE.C.PAGES_PANEL_OPEN){this.setPagesOpen();var e=document.querySelector('pages-sidebar-story button[data-button-name="skip"]');e&&e.click()}},setPagesClosed:function(){this.el.querySelector(".pages-panel").classList.remove("pages-panel-opened"),INKIVE.C.PAGES_PANEL_OPEN=!1,this.changeVerticalScrollPositionX()},showCustomZoom:function(){this.el.querySelector(".custom-zoom").style.display="block"},customZoom:function(e){this.zoom=e.currentTarget.dataset.value,this.el.querySelector(".custom-zoom").style.display="none","fit"===this.zoom?INKIVE.EditorFacade.handle("zoom","fit"):"original"===this.zoom?INKIVE.EditorFacade.handle("zoom","original"):INKIVE.EditorFacade.handle("zoom","set",{zoom:this.zoom/100}),document.querySelector(".zoom-wrapper .custom").textContent=this.getZoomDisplayText(),this.changeVerticalScrollPositionX(),$("#ik-editor").antiscroll(),this.moveEditorHScrollUpOnRulerVisible()},zoomInOut:function(e){INKIVE.EditorFacade.handle("zoom",e.currentTarget.classList.contains("in")?"in":"out"),this.changeVerticalScrollPositionX(),this.moveEditorHScrollUpOnRulerVisible()},moveEditorHScrollUpOnRulerVisible:function(){var e=document.querySelector("#ruler-horizontal"),t=document.querySelector("#ik-editor .antiscroll-scrollbar-horizontal"),n=e.classList.contains("hidden");t&&t.classList.toggle("display-ruler",!n)},toggleSVGLoadingIndicator:function(e){var t=INKIVE.Tool.getInstance().editor;t.loadingElement(e),setTimeout((function(){return t.loadingElement(!1)}),5e3)},changePage:function(e,t){var n,r=this;if(e&&e.currentTarget&&(n=e.currentTarget.parentElement).dataset.active)return;var o=b.default.getDownloadFormat();if(1===g.selectedPages.length&&("png"===o||"jpg"===o)){b.default.setUrlValue();var i=new Number(n.getAttribute("data-currpage"))+1;g.selectedPages=[i],b.default.saveFieldOnStore([i],"pages-to-dowload")}this.pageLocked=!1,this.el.querySelectorAll(".item").forEach((function(e){return e.classList.add("disabled")}));var s="number"==typeof t?t:Number(n.dataset.currpage);S=s,this.updateActivePageStyles(s);var a=this.el.querySelector('.content-item-wrapper[data-currpage="'.concat(s,'"]'));a&&!this.inViewport(a)&&a.scrollIntoView(),d.default.getCurrentFormat().then((function(e){e&&localStorage.setItem("currentFormatId",JSON.stringify(e.id)),r.debouncedPageMoveTo(s)}))},pageMoveTo:function(e){"boolean"==typeof this.pageLocked?(this.toggleSVGLoadingIndicator(!0),this.pageLocked=INKIVE.Tool._current_page_number-1,S=e,INKIVE.EditorFacade.handle("page","move_to",{page_number:e+1,quiet:!0,save:!0})):this.toggleSVGLoadingIndicator(!1)},triggerPageOption:function(e){e.stopImmediatePropagation();var t=e.currentTarget.dataset.action;"duplicate"===t?(this.pagesLength++,INKIVE.ProjectFacade.handle("design","copy",{page_number:this.pageOptionsActivePage+1,quiet:!0})):"delete"===t&&(this.pagesLength--,INKIVE.ProjectFacade.handle("design","remove",{page_number:this.pageOptionsActivePage+1,quiet:!1}))},updateControlPopoverPos:function(e){var t=e.querySelector(".control"),n=this.el.querySelector(".control-popover"),r=t.getBoundingClientRect(),o=n.getBoundingClientRect();n.style.top="".concat(r.top+r.height,"px"),n.style.left="".concat(r.left-o.width+r.width,"px")},showPageOptions:function(e){e.stopImmediatePropagation();var t=e.currentTarget.closest(".content-item-wrapper"),n=e.currentTarget.closest(".control");this.pageOptionsActivePage=+t.dataset.currpage,this.removeActiveClass(),n.classList.add("active"),this.el.querySelector(".page-options-popover").classList.add("active"),this.updateControlPopoverPos(t)},changeVerticalScrollPositionX:function(){var e=document.querySelector("#ik-editor > .antiscroll-scrollbar-vertical");e&&e.classList.toggle("vertical-scroll-open-panel",!0===INKIVE.C.PAGES_PANEL_OPEN)},inViewport:function(e){if(!e||1!==e.nodeType)return!1;var t=e.getBoundingClientRect(),n=this.el.querySelector(".content-items-list");return!!t&&t.bottom-2*t.height>=0&&t.top-t.height<=n.offsetHeight},debounce:function(e,t){var n=this,r=null;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];clearTimeout(r),r=setTimeout((function(){e.apply(n,i)}),t)}},getZoomDisplayText:function(){return"fit"===this.zoom||"original"===this.zoom?INKIVE.TranslateHelper.translate("bottom_submenu.zoom.".concat(this.zoom)):"".concat(this.zoom,"%")},hasRestrictions:function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN},showAnimation:function(){return INKIVE.C.SHOW_ANIMATION&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_animation_file")&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_edit_animation_file")},canChangePageOrder:function(){return!INKIVE.RestrictionsFacade||!this.hasRestrictions()||INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_change_page_order")},canAddPage:function(){return!INKIVE.RestrictionsFacade||!this.hasRestrictions()||INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_add_page")}})},{"../../../../../src/components/sidebar-animation/constants":1081,"../../../helpers/shortcut-helpers":642,"../../factory/company":122,"../../factory/formats":126,"../../factory/page-thumbnail":147,"../top-submenu/contents/download/download-content-settings":568,"../top-submenu/contents/download/download-storage-manage":570,"./content-item.hbs":248,"./template.hbs":249,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find-index.js":858,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966}],251:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/web.timers.js");var i,s,a,l=r(e("../facade/editor/editor")),c=r(e("../factory/images"));t.exports={init:function(){i=INKIVE.Tool.getInstance(),m.call(this),b.call(this),l.default.on("library.root",(function(e){var t=e.type,n=e.content;"videos"===t&&(h=n)}))}};var u,d,p={},h=[];function m(){var e=this,t=$("#svgcanvas");function n(e){return e.type.match(/image.*/)}function r(e){return!h.reduce((function(t,n){return t||e.name===n.data.name}),!1)&&["video/mp4","video/quicktime"].includes(e.type)}t.on("dragover",(function(e){var t;e.stopPropagation(),e.preventDefault(),(e=e.originalEvent).dataTransfer.dropEffect="copy",t=$("#svgcontent").offset(),s={x:e.clientX-t.left,y:e.clientY-t.top}})),t.on("drop",(function(t){t.stopPropagation(),t.preventDefault();var s=t.originalEvent.dataTransfer.files,h=(0,o.default)(s).filter(n),m=(0,o.default)(s).filter(r);a=h.length,u=0,h.length?h.forEach((function(e){return t=e,void $.when(function(e){var t=$.Deferred();return $('.btn-tag[href="#tabImages"]').trigger("click"),_.defer((function(){$("#tabImages").find(".header-links").find("[data-key=add]").trigger("click");var n=INKIVE.Tabs.images.$el.find(".import-button.uploader.progress-button");INKIVE.Tabs.images.$el.find('.btn-accordion[data-key="project"]').trigger("click"),n.fineUploaderS3("addFiles",e),t.resolve(_.last(n.fineUploaderS3("getUploads")).id)})),t.promise()}(t),function(e){var t=$.Deferred(),n=new FileReader;return n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=r,n.onerror=t.reject},n.readAsDataURL(e),t.promise();function r(e){var n=e.currentTarget,r=1/l.default.handle("zoom","get"),o=i.getImageSizeBasedOnSVGSize($(n)),s=a>1?Math.log(a):1,c=o.width/s,u=o.height/s,d=g(),p=i.editor.addElement("image",{url:n.src,x:d.x*r-c/2,y:d.y*r-u/2,width:c,height:u});$(p).addClass("drag-and-drop-upload"),i.editor.canvas.call("loading.show",p),svgedit.select.getSelectorManager().releaseAllSelectors(),t.resolve(p)}}(t)).done((function(e,t){p[e]=t,d||function(){var e=INKIVE.Tabs.images.$el.find(".import-button.uploader.progress-button");function t(e){var t=p[e];t.parentNode.removeChild(t),p=_.omit(p,e),i.editor.canvas.call("loading.hide",t)}e.on("error",(function(e,n,r,o){p[n]&&(t(n),i.editor.canvas.call("advice.show","upload-error"))})),e.on("cancel",(function(e,n,r,o){p[n]&&t(n)})),e.on("complete",(function(e,t,n,r){p[t]&&function(e,t){var n=t.tempLink,r=c.default.getVersionUrl(n,"thumb"),o={width:e.getAttribute("width"),height:e.getAttribute("height")};c.default.smartLoad(n,o,(function(t,n){var o=t===INKIVE.C.Status.success?n.src:r;i.editor.canvas.call("loading.hide",e),svgedit.utilities.assignAttributes(e,{"xlink:href":o}),$(e).removeClass("drag-and-drop-upload")}))}(p[t],r)})),d=!0}()}));var t})):m.length?(i.editor.canvas.call("advice.show","uploading-file"),m.forEach((function(t){return f.call(e,t)}))):i.editor.canvas.call("advice.show","file-not-allowed")}))}function f(e){var t=this;function n(t){t.addFile({name:e.name,type:e.type,data:e}),t.upload().then((function(e){INKIVE.SVGElementLoading.hide(document.body),e&&!e.failed.length&&e.successful.length||i.editor.canvas.call("advice.show","file-not-allowed")}))}document.querySelector('.btn-tag[href="#tabVideo"]').click(),setTimeout((function(){INKIVE.SVGElementLoading.show(document.body),document.getElementById("tabVideo").querySelector("[data-key=".concat(t.libraryName,"]")).click(),t.uppyFactory?n(t.uppyFactory.uppy):l.default.once("video-uppy-loaded",n)}),100)}function g(){if(1===a)return s;var e=2*Math.PI,t=20*a,n=u*e/a;return u++,{x:s.x+t*Math.cos(n),y:s.y+t*Math.sin(n)}}function b(){var e=this;this.libraryName=INKIVE.Helpers.projectIsLinkedToRestrictions()?"user_library":"library",l.default.on("videos-".concat(this.libraryName,"-upload-button-appended"),(function(t){e.uppyFactory=t,l.default.trigger("video-uppy-loaded",e.uppyFactory.uppy)}))}},{"../facade/editor/editor":91,"../factory/images":127,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],252:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="filter-picker">\n    <ul class="filter-container">\n        <li><a href="#filter-tab-1">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"filterpicker.container.presets_label",{name:"t",hash:{},data:o,loc:{start:{line:3,column:36},end:{line:3,column:80}}}))+'</a></li>\n        <li><a href="#filter-tab-2">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"filterpicker.container.advanced_label",{name:"t",hash:{},data:o,loc:{start:{line:4,column:36},end:{line:4,column:81}}}))+'</a></li>\n    </ul>\n\n    <div id="filter-tab-1"><ul class="presets-container"></ul></div>\n    <div id="filter-tab-2"><div class="sliders-container"></div></div>\n\n    <div class="svg-container"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],253:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="matrix" values="1.238 -0.1 -0.1 0 0 -0.1 1.238 -0.1 0 0 -0.1 -0.1 1.238 0 0 0 0 0 1 0"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.22"></feFuncR>\n    <feFuncG type="linear" slope="1.22"></feFuncG>\n    <feFuncB type="linear" slope="1.22"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncR>\n    <feFuncG type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncG>\n    <feFuncB type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncB>\n</feComponentTransfer>\n\n<feColorMatrix type="hueRotate" values="7.200000000000017"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],254:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="saturate" values="0.93"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.91"></feFuncR>\n    <feFuncG type="linear" slope="0.91"></feFuncG>\n    <feFuncB type="linear" slope="0.91"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.2" intercept="-0.09999999999999998"></feFuncR>\n    <feFuncG type="linear" slope="1.2" intercept="-0.09999999999999998"></feFuncG>\n    <feFuncB type="linear" slope="1.2" intercept="-0.09999999999999998"></feFuncB>\n</feComponentTransfer>\n\n<feConvolveMatrix order="3 3" preserveAlpha="true" kernelMatrix="0 -0.12 0 -0.12 1.48 -0.12 0 -0.12 0"></feConvolveMatrix>\n<feColorMatrix type="hueRotate" values="23.399999999999977"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],255:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="matrix" values="1.119 -0.05 -0.05 0 0 -0.05 1.119 -0.05 0 0 -0.05 -0.05 1.119 0 0 0 0 0 1 0"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.09"></feFuncR>\n    <feFuncG type="linear" slope="1.09"></feFuncG>\n    <feFuncB type="linear" slope="1.09"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.91" intercept="0.044999999999999984"></feFuncR>\n    <feFuncG type="linear" slope="0.91" intercept="0.044999999999999984"></feFuncG>\n    <feFuncB type="linear" slope="0.91" intercept="0.044999999999999984"></feFuncB>\n</feComponentTransfer>\n\n<feConvolveMatrix order="3 3" preserveAlpha="true" kernelMatrix="0 -0.44999999999999996 0 -0.44999999999999996 2.8 -0.44999999999999996 0 -0.44999999999999996 0"></feConvolveMatrix>\n\n<feColorMatrix type="hueRotate" values="36"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],256:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<feFlood result="blackfield-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:1,column:28},end:{line:1,column:43}}}):i)+'" flood-color="#000000" flood-opacity="0.868"></feFlood>\n\n<feSpecularLighting result="spotlight-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:3,column:38},end:{line:3,column:53}}}):i)+'" lighting-color="#FFFFFF" surfaceScale="1" specularConstant="1" specularExponent="28.000000000000004">\n    <fePointLight z="500"></fePointLight>\n</feSpecularLighting>\n\n<feBlend result="A-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:19},end:{line:7,column:34}}}):i)+'" in="blackfield-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:51},end:{line:7,column:66}}}):i)+'" in2="spotlight-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:83},end:{line:7,column:98}}}):i)+'" mode="lighten"></feBlend>\n<feBlend result="B-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:8,column:19},end:{line:8,column:34}}}):i)+'" in="A-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:8,column:42},end:{line:8,column:57}}}):i)+'" in2="SourceGraphic" mode="multiply"></feBlend>\n\n<feColorMatrix type="saturate" values="0.93"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.05"></feFuncR>\n    <feFuncG type="linear" slope="1.05"></feFuncG>\n    <feFuncB type="linear" slope="1.05"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncR>\n    <feFuncG type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncG>\n    <feFuncB type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncB>\n</feComponentTransfer>\n\n<feGaussianBlur stdDeviation="0.09999999999999964"></feGaussianBlur>\n<feColorMatrix type="hueRotate" values="39.599999999999994"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],257:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="matrix" values="1.154 -0.066 -0.066 0 0 -0.066 1.154 -0.066 0 0 -0.066 -0.066 1.154 0 0 0 0 0 1 0"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.07"></feFuncR>\n    <feFuncG type="linear" slope="1.07"></feFuncG>\n    <feFuncB type="linear" slope="1.07"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.15" intercept="-0.07499999999999996"></feFuncR>\n    <feFuncG type="linear" slope="1.15" intercept="-0.07499999999999996"></feFuncG>\n    <feFuncB type="linear" slope="1.15" intercept="-0.07499999999999996"></feFuncB>\n</feComponentTransfer>\n\n<feConvolveMatrix order="3 3" preserveAlpha="true" kernelMatrix="0 -0.06000000000000005 0 -0.06000000000000005 1.2400000000000002 -0.06000000000000005 0 -0.06000000000000005 0"></feConvolveMatrix>\n\n<feColorMatrix type="hueRotate" values="7.200000000000017"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],258:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="saturate" values="0"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.1"></feFuncR>\n    <feFuncG type="linear" slope="1.1"></feFuncG>\n    <feFuncB type="linear" slope="1.1"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncR>\n    <feFuncG type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncG>\n    <feFuncB type="linear" slope="0.95" intercept="0.025000000000000022"></feFuncB>\n</feComponentTransfer>\n'},useData:!0})},{"hbsfy/runtime":1024}],259:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="saturate" values="0.52"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.1">\n    </feFuncR><feFuncG type="linear" slope="1.1"></feFuncG>\n    <feFuncB type="linear" slope="1.1"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.97" intercept="0.015000000000000013"></feFuncR>\n    <feFuncG type="linear" slope="0.97" intercept="0.015000000000000013"></feFuncG>\n    <feFuncB type="linear" slope="0.97" intercept="0.015000000000000013"></feFuncB>\n</feComponentTransfer>\n'},useData:!0})},{"hbsfy/runtime":1024}],260:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<feFlood result="blackfield-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:1,column:28},end:{line:1,column:43}}}):i)+'" flood-color="#000000" flood-opacity="0.7839999999999999"></feFlood>\n\n<feSpecularLighting result="spotlight-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:3,column:38},end:{line:3,column:53}}}):i)+'" lighting-color="#FFFFFF" surfaceScale="1" specularConstant="1" specularExponent="14.000000000000002">\n    <fePointLight z="500"></fePointLight>\n</feSpecularLighting>\n\n<feBlend result="A-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:19},end:{line:7,column:34}}}):i)+'" in="blackfield-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:51},end:{line:7,column:66}}}):i)+'" in2="spotlight-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:7,column:83},end:{line:7,column:98}}}):i)+'" mode="lighten"></feBlend>\n<feBlend result="B-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:8,column:19},end:{line:8,column:34}}}):i)+'" in="A-'+c(typeof(i=null!=(i=u(n,"filter_id")||(null!=t?u(t,"filter_id"):t))?i:a)===l?i.call(s,{name:"filter_id",hash:{},data:o,loc:{start:{line:8,column:42},end:{line:8,column:57}}}):i)+'" in2="SourceGraphic" mode="multiply"></feBlend>\n\n<feColorMatrix type="saturate" values="0.05"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.94"></feFuncR>\n    <feFuncG type="linear" slope="0.94"></feFuncG>\n    <feFuncB type="linear" slope="0.94"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncR>\n    <feFuncG type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncG>\n    <feFuncB type="linear" slope="1.12" intercept="-0.06000000000000005"></feFuncB>\n</feComponentTransfer>\n\n<feConvolveMatrix order="3 3" preserveAlpha="true" kernelMatrix="0 -0.07999999999999996 0 -0.07999999999999996 1.3199999999999998 -0.07999999999999996 0 -0.07999999999999996 0"></feConvolveMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],261:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<feColorMatrix type="saturate" values="0.76"></feColorMatrix>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="1.61"></feFuncR>\n    <feFuncG type="linear" slope="1.61"></feFuncG>\n    <feFuncB type="linear" slope="1.61"></feFuncB>\n</feComponentTransfer>\n\n<feComponentTransfer>\n    <feFuncR type="linear" slope="0.73" intercept="0.135"></feFuncR>\n    <feFuncG type="linear" slope="0.73" intercept="0.135"></feFuncG>\n    <feFuncB type="linear" slope="0.73" intercept="0.135"></feFuncB>\n</feComponentTransfer>\n\n<feConvolveMatrix order="3 3" preserveAlpha="true" kernelMatrix="0 -0.13 0 -0.13 1.52 -0.13 0 -0.13 0"></feConvolveMatrix>\n<feColorMatrix type="hueRotate" values="55.80000000000001"></feColorMatrix>\n'},useData:!0})},{"hbsfy/runtime":1024}],262:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<svg class="filter-thumb" xmlns="http://www.w3.org/2000/svg" width="'+u(typeof(s=null!=(s=d(n,"width")||(null!=t?d(t,"width"):t))?s:l)===c?s.call(a,{name:"width",hash:{},data:o,loc:{start:{line:1,column:68},end:{line:1,column:79}}}):s)+'" height="'+u(typeof(s=null!=(s=d(n,"height")||(null!=t?d(t,"height"):t))?s:l)===c?s.call(a,{name:"height",hash:{},data:o,loc:{start:{line:1,column:89},end:{line:1,column:101}}}):s)+'">\n    <defs><filter id="'+u(typeof(s=null!=(s=d(n,"filter_id")||(null!=t?d(t,"filter_id"):t))?s:l)===c?s.call(a,{name:"filter_id",hash:{},data:o,loc:{start:{line:2,column:22},end:{line:2,column:37}}}):s)+'">'+(null!=(i=typeof(s=null!=(s=d(n,"filter")||(null!=t?d(t,"filter"):t))?s:l)===c?s.call(a,{name:"filter",hash:{},data:o,loc:{start:{line:2,column:39},end:{line:2,column:53}}}):s)?i:"")+'</filter></defs>\n    <g stroke="null">\n        <image filter="url(#'+u(typeof(s=null!=(s=d(n,"filter_id")||(null!=t?d(t,"filter_id"):t))?s:l)===c?s.call(a,{name:"filter_id",hash:{},data:o,loc:{start:{line:4,column:28},end:{line:4,column:43}}}):s)+')" xlink:href="'+u(typeof(s=null!=(s=d(n,"image")||(null!=t?d(t,"image"):t))?s:l)===c?s.call(a,{name:"image",hash:{},data:o,loc:{start:{line:4,column:58},end:{line:4,column:69}}}):s)+'" x="0" y="0" width="'+u(typeof(s=null!=(s=d(n,"width")||(null!=t?d(t,"width"):t))?s:l)===c?s.call(a,{name:"width",hash:{},data:o,loc:{start:{line:4,column:90},end:{line:4,column:101}}}):s)+'" height="'+u(typeof(s=null!=(s=d(n,"height")||(null!=t?d(t,"height"):t))?s:l)===c?s.call(a,{name:"height",hash:{},data:o,loc:{start:{line:4,column:111},end:{line:4,column:123}}}):s)+'" style="pointer-events:inherit"/>\n    </g>\n</svg>\n'},useData:!0})},{"hbsfy/runtime":1024}],263:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="filterWrapper" style="position: relative;">\n        <input type="text" name="filter" placeholder="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"common.search_sizes",{name:"t",hash:{},data:o,loc:{start:{line:5,column:54},end:{line:5,column:81}}}))+'"/>\n    </div>\n\n    <div class="tool-content">\n        <div style="height: 200px;" role="tabpanel">\n            <div class="antiscroll-wrap">\n                <div class="antiscroll-inner">\n                    <div class="tab-content"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n'},3:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div style="display: table-cell; width:260px; padding-right: 5px; vertical-align: top; font-size: 13px;">\n        <div class="filterWrapper">\n            <ul class="filter">\n                <li class="active" data-type="all">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.add_page.show_all",{name:"t",hash:{},data:o,loc:{start:{line:23,column:51},end:{line:23,column:82}}}))+'</li>\n                <li data-type="category">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.add_page.filter_by",{name:"t",hash:{},data:o,loc:{start:{line:24,column:41},end:{line:24,column:73}}}))+'</li>\n            </ul>\n        </div>\n        <div class="filterWrapper subfilter" style="display: none;"></div>\n    </div>\n\n    <div class="tool-content" style="display: table-cell;">\n        <div style="height: 200px;" role="tabpanel">\n            <div class="antiscroll-wrap">\n                <div class="antiscroll-inner">\n                    <div class="tab-content"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='<input type="hidden" id="layout-id" />\n<div style="display: table; width:100%">\n';return s=null!=(s=d(n,"Desygner")||(null!=t?d(t,"Desygner"):t))?s:c,a={name:"Desygner",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:17,column:17}}},i="function"==typeof s?s.call(l,a):s,d(n,"Desygner")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n",s=null!=(s=d(n,"Photobooky")||(null!=t?d(t,"Photobooky"):t))?s:c,a={name:"Photobooky",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:4},end:{line:39,column:19}}},i="function"==typeof s?s.call(l,a):s,d(n,"Photobooky")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],264:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<b style="font-weight: 400">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?i(t,"message"):t,{name:"t",hash:{},data:o,loc:{start:{line:1,column:28},end:{line:1,column:41}}}))+"</b>\n"},useData:!0})},{"hbsfy/runtime":1024}],265:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<br><b>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"common.try_again",{name:"t",hash:{},data:o,loc:{start:{line:3,column:21},end:{line:3,column:45}}}))+"</b>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<br><b>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"common.check_network",{name:"t",hash:{},data:o,loc:{start:{line:4,column:25},end:{line:4,column:53}}}))+"</b>"},5:function(e,t,n,r,o){var i;return"<br><b>"+(null!=(i=e.lambda(t,t))?i:"")+"</b>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="<b>"+e.escapeExpression((d(n,"t")||t&&d(t,"t")||c).call(l,"common.error",{name:"t",hash:{},data:o,loc:{start:{line:1,column:3},end:{line:1,column:23}}}))+" - </b>\n<i>"+(null!=(i=(d(n,"t")||t&&d(t,"t")||c).call(l,null!=t?d(t,"message"):t,{name:"t",hash:{},data:o,loc:{start:{line:2,column:3},end:{line:2,column:19}}}))?i:"")+"</i>\n";return s=null!=(s=d(n,"try_again")||(null!=t?d(t,"try_again"):t))?s:c,a={name:"try_again",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:3,column:63}}},i="function"==typeof s?s.call(l,a):s,d(n,"try_again")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n",s=null!=(s=d(n,"check_network")||(null!=t?d(t,"check_network"):t))?s:c,a={name:"check_network",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:4,column:75}}},i="function"==typeof s?s.call(l,a):s,d(n,"check_network")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n",s=null!=(s=d(n,"more_info")||(null!=t?d(t,"more_info"):t))?s:c,a={name:"more_info",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:0},end:{line:5,column:48}}},i="function"==typeof s?s.call(l,a):s,d(n,"more_info")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"\n"},useData:!0})},{"hbsfy/runtime":1024}],266:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+(null!=(i=(c(n,"t")||t&&c(t,"t")||l).call(a,"modal.alert.delete_confirm_0",{name:"t",hash:{},data:o,loc:{start:{line:2,column:4},end:{line:2,column:42}}}))?i:"")+" <i>"+e.escapeExpression("function"==typeof(s=null!=(s=c(n,"title")||(null!=t?c(t,"title"):t))?s:l)?s.call(a,{name:"title",hash:{},data:o,loc:{start:{line:2,column:46},end:{line:2,column:57}}}):s)+"</i>?<br>\n    "+(null!=(i=(c(n,"t")||t&&c(t,"t")||l).call(a,"modal.alert.delete_confirm_1",{name:"t",hash:{},data:o,loc:{start:{line:3,column:4},end:{line:3,column:42}}}))?i:"")+"\n"},3:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+(null!=(i=(c(n,"t")||t&&c(t,"t")||l).call(a,"modal.alert.delete_confirm_0",{name:"t",hash:{},data:o,loc:{start:{line:6,column:4},end:{line:6,column:42}}}))?i:"")+" "+e.escapeExpression("function"==typeof(s=null!=(s=c(n,"title")||(null!=t?c(t,"title"):t))?s:l)?s.call(a,{name:"title",hash:{},data:o,loc:{start:{line:6,column:43},end:{line:6,column:54}}}):s)+"?\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="";return s=null!=(s=d(n,"admin")||(null!=t?d(t,"admin"):t))?s:c,a={name:"admin",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:4,column:10}}},i="function"==typeof s?s.call(l,a):s,d(n,"admin")||(i=u.call(t,i,a)),null!=i&&(p+=i),s=null!=(s=d(n,"admin")||(null!=t?d(t,"admin"):t))?s:c,a={name:"admin",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:5,column:0},end:{line:7,column:10}}},i="function"==typeof s?s.call(l,a):s,d(n,"admin")||(i=u.call(t,i,a)),null!=i&&(p+=i),p},useData:!0})},{"hbsfy/runtime":1024}],267:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"text")||(null!=t?s(t,"text"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:o,loc:{start:{line:1,column:6},end:{line:1,column:16}}}):i)+"</span>\n"},useData:!0})},{"hbsfy/runtime":1024}],268:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal alert" style="'+e.escapeExpression("function"==typeof(s=null!=(s=c(n,"width")||(null!=t?c(t,"width"):t))?s:l)?s.call(a,{name:"width",hash:{},data:o,loc:{start:{line:1,column:32},end:{line:1,column:43}}}):s)+'">\n    <p class="content">'+(null!=(i="function"==typeof(s=null!=(s=c(n,"message")||(null!=t?c(t,"message"):t))?s:l)?s.call(a,{name:"message",hash:{},data:o,loc:{start:{line:2,column:23},end:{line:2,column:38}}}):s)?i:"")+"</p>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],269:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li style="'+l("function"==typeof(i=null!=(i=c(n,"width")||(null!=t?c(t,"width"):t))?i:a)?i.call(s,{name:"width",hash:{},data:o,loc:{start:{line:2,column:22},end:{line:2,column:33}}}):i)+'"><a id="btn-'+l("function"==typeof(i=null!=(i=c(n,"key")||o&&c(o,"key"))?i:a)?i.call(s,{name:"key",hash:{},data:o,loc:{start:{line:2,column:46},end:{line:2,column:56}}}):i)+'" class="btn btn-modal '+l("function"==typeof(i=null!=(i=c(n,"class")||(null!=t?c(t,"class"):t))?i:a)?i.call(s,{name:"class",hash:{},data:o,loc:{start:{line:2,column:79},end:{line:2,column:88}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"title"):t,{name:"t",hash:{},data:o,loc:{start:{line:2,column:90},end:{line:2,column:102}}}))+"</a></li>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return'<ul class="btnWrapper bottom">\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:2,column:120}}}))?i:"")+"\n</ul>\n"},useData:!0})},{"hbsfy/runtime":1024}],270:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='    <p style="margin-top: 10px;">'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"modal.layout_load.different_size",null!=t?d(t,"new_size"):t,{name:"t",hash:{},data:o,loc:{start:{line:3,column:33},end:{line:3,column:83}}}))+'</p>\n    <div class="checkbox">\n        <input type="checkbox" name="keep-size-input"';return s=null!=(s=d(n,"keep_size")||(null!=t?d(t,"keep_size"):t))?s:c,a={name:"keep_size",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:53},end:{line:5,column:89}}},i="function"==typeof s?s.call(l,a):s,d(n,"keep_size")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(p+=i),p+'/>\n        <label for="keep-size-input">'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"modal.layout_load.keep_current_size",null!=t?d(t,"current_size"):t,{name:"t",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:94}}}))+"</label>\n    </div>\n"},2:function(e,t,n,r,o){return" checked"},4:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d='    <div class="checkbox">\n        <input type="checkbox" name="keep-images-input"';return s=null!=(s=u(n,"keep_images")||(null!=t?u(t,"keep_images"):t))?s:c,a={name:"keep_images",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:55},end:{line:11,column:95}}},i="function"==typeof s?s.call(l,a):s,u(n,"keep_images")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(d+=i),d+'/>\n        <label for="keep-images-input">'+e.escapeExpression((u(n,"t")||t&&u(t,"t")||c).call(l,"modal.layout_load.keep_images",{name:"t",hash:{},data:o,loc:{start:{line:12,column:39},end:{line:12,column:76}}}))+"</label>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="<p>"+e.escapeExpression((d(n,"t")||t&&d(t,"t")||c).call(l,"modal.restricted_template_load.about",{name:"t",hash:{},data:o,loc:{start:{line:1,column:3},end:{line:1,column:47}}}))+"</p>\n";return s=null!=(s=d(n,"is_same_size")||(null!=t?d(t,"is_same_size"):t))?s:c,a={name:"is_same_size",hash:{},fn:e.noop,inverse:e.program(1,o,0),data:o,loc:{start:{line:2,column:0},end:{line:8,column:17}}},i="function"==typeof s?s.call(l,a):s,d(n,"is_same_size")||(i=u.call(t,i,a)),null!=i&&(p+=i),s=null!=(s=d(n,"has_images")||(null!=t?d(t,"has_images"):t))?s:c,a={name:"has_images",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:14,column:15}}},i="function"==typeof s?s.call(l,a):s,d(n,"has_images")||(i=u.call(t,i,a)),null!=i&&(p+=i),p},useData:!0})},{"hbsfy/runtime":1024}],271:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="loader-wrapper">\n  <div class="int-loader"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],272:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal '+l("function"==typeof(i=null!=(i=c(n,"classes")||(null!=t?c(t,"classes"):t))?i:a)?i.call(s,{name:"classes",hash:{},data:o,loc:{start:{line:1,column:18},end:{line:1,column:31}}}):i)+'" style="'+l("function"==typeof(i=null!=(i=c(n,"width")||(null!=t?c(t,"width"):t))?i:a)?i.call(s,{name:"width",hash:{},data:o,loc:{start:{line:1,column:40},end:{line:1,column:51}}}):i)+'">\n    <a class="btn modal-header" id="page-order-show">\n        <i class="'+l("function"==typeof(i=null!=(i=c(n,"icon")||(null!=t?c(t,"icon"):t))?i:a)?i.call(s,{name:"icon",hash:{},data:o,loc:{start:{line:3,column:18},end:{line:3,column:28}}}):i)+'"></i>\n        <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"title"):t,{name:"t",hash:{},data:o,loc:{start:{line:4,column:14},end:{line:4,column:26}}}))+'</span>\n        <icon class="desygner-icon-close action">\n        </icon>\n    </a>\n    <section class="content">\n        <form action="#" autocomplete="on" id="form_'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:9,column:52},end:{line:9,column:60}}}):i)+'" onsubmit="return false;">\n            <button type="submit" name="testname" value="test" style="display: none;"/>\n        </form>\n    </section>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],273:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="checkbox-container ">\n  <ul>\n    <li class="filter-line">\n      <p class="desygner-custom-check">\n        <label>\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"modal.buttons.checkbox.dont_show_again",{name:"t",hash:{},data:o,loc:{start:{line:6,column:12},end:{line:6,column:58}}}))+'\n            <input type="checkbox" id="dont-show-again">\n          <span class="checkmark"></span>\n        </label>\n      </p>\n    </li>\n  </ul>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],274:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="checkbox-container">\n    <ul>\n      <li class="filter-line">\n        <p class="desygner-custom-check">\n          <label>\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"modal.restricted_template_load.keep_restrictions",{name:"t",hash:{},data:o,loc:{start:{line:8,column:12},end:{line:8,column:68}}}))+'\n            <input type="checkbox" name="copy-restrictions" checked>\n            <span class="checkmark"></span>\n          </label>\n        </p>\n      </li>\n    </ul>\n  </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d="<p>"+e.escapeExpression((u(n,"t")||t&&u(t,"t")||c).call(l,"modal.restricted_template_load.about",{name:"t",hash:{},data:o,loc:{start:{line:1,column:3},end:{line:1,column:47}}}))+"</p>\n";return s=null!=(s=u(n,"has_restrictions")||(null!=t?u(t,"has_restrictions"):t))?s:c,a={name:"has_restrictions",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:16,column:21}}},i="function"==typeof s?s.call(l,a):s,u(n,"has_restrictions")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(d+=i),d},useData:!0})},{"hbsfy/runtime":1024}],275:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"mobile"},3:function(e,t,n,r,o){return"web"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='<div class="modalWrapper overlay nodrag ';return s=null!=(s=d(n,"Mobile")||(null!=t?d(t,"Mobile"):t))?s:c,a={name:"Mobile",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:40},end:{line:1,column:68}}},i="function"==typeof s?s.call(l,a):s,d(n,"Mobile")||(i=u.call(t,i,a)),null!=i&&(p+=i),s=null!=(s=d(n,"Desktop")||(null!=t?d(t,"Desktop"):t))?s:c,a={name:"Desktop",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:68},end:{line:1,column:95}}},i="function"==typeof s?s.call(l,a):s,d(n,"Desktop")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+'" data-id="'+e.escapeExpression("function"==typeof(s=null!=(s=d(n,"id")||(null!=t?d(t,"id"):t))?s:c)?s.call(l,{name:"id",hash:{},data:o,loc:{start:{line:1,column:106},end:{line:1,column:114}}}):s)+'"></div>\n'},useData:!0})},{"hbsfy/runtime":1024}],276:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="checkbox">\n                <input type="checkbox" name="isZip" value="1"/>\n                <label for="isZip">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"modal.download.zip_label",{name:"t",hash:{},data:o,loc:{start:{line:40,column:35},end:{line:40,column:67}}}))+"</label>\n            </div>\n"},3:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <section>\n        <span>"+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.include_label",{name:"t",hash:{},data:o,loc:{start:{line:47,column:14},end:{line:47,column:50}}}))+'</span>\n        <div class="checkbox"><input type="checkbox" name="isThumb" value="1"/>\n            <label for="isThumb" style="width: 90px;">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.thumb_label",{name:"t",hash:{},data:o,loc:{start:{line:49,column:54},end:{line:49,column:88}}}))+'</label>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled thumbDimensions" data-type="width" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.width_label",{name:"t",hash:{},data:o,loc:{start:{line:50,column:158},end:{line:50,column:192}}}))+'"/><span>X</span>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled thumbDimensions" data-type="height" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.height_label",{name:"t",hash:{},data:o,loc:{start:{line:51,column:159},end:{line:51,column:194}}}))+'"/><span>px</span>\n        </div>\n\n        <div class="checkbox"><input type="checkbox" name="isWeb" value="1"/>\n            <label for="isWeb" style="width: 90px;">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.web_label",{name:"t",hash:{},data:o,loc:{start:{line:55,column:52},end:{line:55,column:84}}}))+'</label>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled webDimensions" data-type="width" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.width_label",{name:"t",hash:{},data:o,loc:{start:{line:56,column:156},end:{line:56,column:190}}}))+'"/><span>X</span>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled webDimensions" data-type="height" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.height_label",{name:"t",hash:{},data:o,loc:{start:{line:57,column:157},end:{line:57,column:192}}}))+'"/><span>px</span>\n        </div>\n\n        <div class="checkbox"><input type="checkbox" name="isMobile" value="1"/>\n            <label for="isMobile" style="width: 90px;">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.mobile_label",{name:"t",hash:{},data:o,loc:{start:{line:61,column:55},end:{line:61,column:90}}}))+'</label>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled mobileDimensions" data-type="width" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.width_label",{name:"t",hash:{},data:o,loc:{start:{line:62,column:159},end:{line:62,column:193}}}))+'"/><span>X</span>\n            <input type="number" style="margin: 0 5px; position:relative;" class="form-control small disabled mobileDimensions" data-type="height" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.download.height_label",{name:"t",hash:{},data:o,loc:{start:{line:63,column:160},end:{line:63,column:195}}}))+'"/><span>px</span>\n        </div>\n    </section>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='<section style="display: block; float: left; margin-right: 10px;">\n    <section id="quality-section">\n        <span>'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.quality_label",{name:"t",hash:{},data:o,loc:{start:{line:3,column:14},end:{line:3,column:50}}}))+'</span>\n\n        <ul class="btnWrapper">\n            <li>\n                <a class="btn btn-squire btn-tag quality active" tag="'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.high_label",{name:"t",hash:{},data:o,loc:{start:{line:7,column:70},end:{line:7,column:103}}}))+'" data-value="92">\n                    <div class="icon-wrapper"><i class="icon-brightness_1"></i></div>\n                </a>\n            </li>\n            <li>\n                <a class="btn btn-squire btn-tag quality" tag="'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.medium_label",{name:"t",hash:{},data:o,loc:{start:{line:12,column:63},end:{line:12,column:98}}}))+'" data-value="75">\n                    <div class="icon-wrapper"><i class="icon-brightness_2"></i></div>\n                </a>\n            </li>\n            <li>\n                <a class="btn btn-squire btn-tag quality" tag="'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.low_label",{name:"t",hash:{},data:o,loc:{start:{line:17,column:63},end:{line:17,column:95}}}))+'" data-value="60">\n                    <div class="icon-wrapper"><i class="icon-brightness_3"></i></div>\n                </a>\n            </li>\n        </ul>\n    </section>\n\n    <span>'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.resize_label",{name:"t",hash:{},data:o,loc:{start:{line:24,column:10},end:{line:24,column:45}}}))+'</span>\n    <section>\n        <input type="number" style="margin: 0 5px; position:relative;" class="form-control small rangeCurrentDimensions" data-type="width" placeholder="'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.width_label",{name:"t",hash:{},data:o,loc:{start:{line:26,column:152},end:{line:26,column:186}}}))+'"/><span>X</span>\n        <input type="number" style="margin: 0 5px; position:relative;" class="form-control small rangeCurrentDimensions" data-type="height" placeholder="'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.height_label",{name:"t",hash:{},data:o,loc:{start:{line:27,column:153},end:{line:27,column:188}}}))+'"/><span>px</span>\n    </section>\n</section>\n\n<section style="display: block; float: right;">\n    <section>\n        <span>'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.settings_label",{name:"t",hash:{},data:o,loc:{start:{line:33,column:14},end:{line:33,column:51}}}))+'</span>\n        <div class="checkbox"><input type="checkbox" name="isBleed" value="1"/>\n            <label for="isBleed">'+u((p(n,"t")||t&&p(t,"t")||c).call(l,"modal.download.bleed_label",{name:"t",hash:{},data:o,loc:{start:{line:35,column:33},end:{line:35,column:67}}}))+"</label></div>\n\n";return s=null!=(s=p(n,"displayZipOption")||(null!=t?p(t,"displayZipOption"):t))?s:c,a={name:"displayZipOption",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:37,column:12},end:{line:42,column:34}}},i="function"==typeof s?s.call(l,a):s,p(n,"displayZipOption")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="    </section>\n\n",s=null!=(s=p(n,"display_extended_options")||(null!=t?p(t,"display_extended_options"):t))?s:c,a={name:"display_extended_options",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:45,column:4},end:{line:66,column:34}}},i="function"==typeof s?s.call(l,a):s,p(n,"display_extended_options")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+"</section>\n"},useData:!0})},{"hbsfy/runtime":1024}],277:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section data-description="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.friends.invite_description",{name:"t",hash:{},data:o,loc:{start:{line:1,column:27},end:{line:1,column:67}}}))+'">\n    <input type="text" id="email4inviting" name="emails" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"general.invite_by_email",{name:"t",hash:{},data:o,loc:{start:{line:2,column:70},end:{line:2,column:101}}}))+'"/>\n</section>\n\n\x3c!--<section style="display: none;">\n    <textarea id="inviteFriendComments" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"general.personal_message",{name:"t",hash:{},data:o,loc:{start:{line:6,column:53},end:{line:6,column:85}}}))+'"></textarea>\n</section>--\x3e\n'},useData:!0})},{"hbsfy/runtime":1024}],278:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return e.escapeExpression(e.lambda(t,t))},3:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="            ";return s=null!=(s=d(n,"Desygner")||(null!=t?d(t,"Desygner"):t))?s:c,a={name:"Desygner",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:12},end:{line:10,column:46}}},i="function"==typeof s?s.call(l,a):s,d(n,"Desygner")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n            ",s=null!=(s=d(n,"Photobooky")||(null!=t?d(t,"Photobooky"):t))?s:c,a={name:"Photobooky",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:12},end:{line:11,column:52}}},i="function"==typeof s?s.call(l,a):s,d(n,"Photobooky")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"\n"},4:function(e,t,n,r,o){return"Desygner"},6:function(e,t,n,r,o){return"Photobooky"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='<li class="media grayscale" data-id="'+d(typeof(s=null!=(s=h(n,"user_id")||(null!=t?h(t,"user_id"):t))?s:c)===u?s.call(l,{name:"user_id",hash:{},data:o,loc:{start:{line:1,column:37},end:{line:1,column:50}}}):s)+'" data-network="Inkive">\n    <img class="media-object pull-left" alt="'+d(typeof(s=null!=(s=h(n,"user_name")||(null!=t?h(t,"user_name"):t))?s:c)===u?s.call(l,{name:"user_name",hash:{},data:o,loc:{start:{line:2,column:45},end:{line:2,column:60}}}):s)+'" src="'+d(typeof(s=null!=(s=h(n,"profile_pic")||(null!=t?h(t,"profile_pic"):t))?s:c)===u?s.call(l,{name:"profile_pic",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:84}}}):s)+'" style="width: 42px; height: 42px">\n    <a style="width:20%" class="pull-right btn btn-inkive btn-black btn-xs btn-add-request">'+d((h(n,"t")||t&&h(t,"t")||c).call(l,"general.add_user",{name:"t",hash:{},data:o,loc:{start:{line:3,column:92},end:{line:3,column:116}}}))+'</a>\n\n    <div class="media-body">\n        <span class="media-heading">\n            <strong>'+d(typeof(s=null!=(s=h(n,"user_name")||(null!=t?h(t,"user_name"):t))?s:c)===u?s.call(l,{name:"user_name",hash:{},data:o,loc:{start:{line:7,column:20},end:{line:7,column:35}}}):s)+"</strong><br />\n            ";return s=null!=(s=h(n,"source")||(null!=t?h(t,"source"):t))?s:c,a={name:"source",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:12},end:{line:8,column:41}}},i=typeof s===u?s.call(l,a):s,h(n,"source")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+="\n",s=null!=(s=h(n,"source")||(null!=t?h(t,"source"):t))?s:c,a={name:"source",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:9,column:12},end:{line:12,column:23}}},i=typeof s===u?s.call(l,a):s,h(n,"source")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+"        </span>\n    </div>\n</li>\n"},useData:!0})},{"hbsfy/runtime":1024}],279:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="info-message text-center">\n    <div class="spinner-wrapper">\n        <div class="spinner small">\n            <circle class="path"></circle>\n        </div>\n    </div>\n    <div class="empty-text">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"general.loading",{name:"t",hash:{},data:o,loc:{start:{line:7,column:28},end:{line:7,column:51}}}))+"</div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],280:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="info-message text-center">\n    <div class="empty-text">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"general.no_results",{name:"t",hash:{},data:o,loc:{start:{line:2,column:28},end:{line:2,column:54}}}))+"</div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],281:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section class="content-LinkknowledgeBase">\n    <a href="https://desygner.com/kb/" target="_blank" class="LinkknowledgeBase">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"modal.help.faq",{name:"t",hash:{},data:o,loc:{start:{line:19,column:81},end:{line:19,column:103}}}))+"</a>\n</section>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p>\n    "+c((u(n,"t")||t&&u(t,"t")||l).call(a,"modal.help.hello",{name:"t",hash:{},data:o,loc:{start:{line:2,column:4},end:{line:2,column:28}}}))+" "+c("function"==typeof(s=null!=(s=u(n,"user_name")||(null!=t?u(t,"user_name"):t))?s:l)?s.call(a,{name:"user_name",hash:{},data:o,loc:{start:{line:2,column:29},end:{line:2,column:44}}}):s)+",<br />\n    <small>"+c((u(n,"t")||t&&u(t,"t")||l).call(a,"modal.help.message",{name:"t",hash:{},data:o,loc:{start:{line:3,column:11},end:{line:3,column:37}}}))+'</small>\n</p>\n<section>\n    <label for="name">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"general.your_name",{name:"t",hash:{},data:o,loc:{start:{line:6,column:22},end:{line:6,column:47}}}))+'</label>\n    <input type="text" name="name" class="form-control" id="name" value="'+c("function"==typeof(s=null!=(s=u(n,"user_name")||(null!=t?u(t,"user_name"):t))?s:l)?s.call(a,{name:"user_name",hash:{},data:o,loc:{start:{line:7,column:73},end:{line:7,column:88}}}):s)+'"/>\n</section>\n<section>\n    <label for="email">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"general.email_address",{name:"t",hash:{},data:o,loc:{start:{line:10,column:23},end:{line:10,column:52}}}))+'</label>\n    <input type="text" name="email" class="form-control" id="email" value="'+c("function"==typeof(s=null!=(s=u(n,"user_email")||(null!=t?u(t,"user_email"):t))?s:l)?s.call(a,{name:"user_email",hash:{},data:o,loc:{start:{line:11,column:75},end:{line:11,column:91}}}):s)+'"/>\n</section>\n<section>\n    <label for="help">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"general.how_help",{name:"t",hash:{},data:o,loc:{start:{line:14,column:22},end:{line:14,column:46}}}))+'</label>\n    <textarea name="help" rows="3" class="form-control"></textarea>\n</section>\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"show_faq"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:17,column:0},end:{line:21,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],282:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section class="kwls_search_login">\n<p>\n  <small>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.kwls_login.message",{name:"t",hash:{},data:o,loc:{start:{line:3,column:9},end:{line:3,column:41}}}))+'</small>\n</p>\n<br/>\n<section>\n  <input type="text" name="kw_user_name" class="form-control" id="kw_name" value="" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"modal.kwls_login.user_name",{name:"t",hash:{},data:o,loc:{start:{line:7,column:97},end:{line:7,column:131}}}))+'"/>\n</section>\n<section>\n  <input type="password" name="kw_password" class="form-control" id="kw_password" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"general.password",{name:"t",hash:{},data:o,loc:{start:{line:10,column:95},end:{line:10,column:119}}}))+'"/>\n</section>\n</section>'},useData:!0})},{"hbsfy/runtime":1024}],283:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"<p><small>"+e.escapeExpression(e.lambda(t,t))+"</small></p>"},3:function(e,t,n,r,o){return'<label for="name">'+e.escapeExpression(e.lambda(t,t))+"</label>"},5:function(e,t,n,r,o){return e.escapeExpression(e.lambda(t,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="";return s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:c,a={name:"title",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:1,column:49}}},i="function"==typeof s?s.call(l,a):s,d(n,"title")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n<section>\n  ",s=null!=(s=d(n,"label")||(null!=t?d(t,"label"):t))?s:c,a={name:"label",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:55}}},i="function"==typeof s?s.call(l,a):s,d(n,"label")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+='\n  <textarea class="form-control">',s=null!=(s=d(n,"default_value")||(null!=t?d(t,"default_value"):t))?s:c,a={name:"default_value",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:33},end:{line:4,column:76}}},i="function"==typeof s?s.call(l,a):s,d(n,"default_value")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"</textarea>\n</section>\n"},useData:!0})},{"hbsfy/runtime":1024}],284:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"<p><small>"+e.escapeExpression(e.lambda(t,t))+"</small></p>"},3:function(e,t,n,r,o){return'<label for="name">'+e.escapeExpression(e.lambda(t,t))+"</label>"},5:function(e,t,n,r,o){return' value="'+e.escapeExpression(e.lambda(t,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="";return s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:c,a={name:"title",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:1,column:49}}},i="function"==typeof s?s.call(l,a):s,d(n,"title")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n<section>\n  ",s=null!=(s=d(n,"label")||(null!=t?d(t,"label"):t))?s:c,a={name:"label",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:55}}},i="function"==typeof s?s.call(l,a):s,d(n,"label")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+='\n  <input type="text" class="form-control"',s=null!=(s=d(n,"default_value")||(null!=t?d(t,"default_value"):t))?s:c,a={name:"default_value",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:41},end:{line:4,column:92}}},i="function"==typeof s?s.call(l,a):s,d(n,"default_value")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+'"/>\n</section>\n'},useData:!0})},{"hbsfy/runtime":1024}],285:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section>\n    <img src="'+l("function"==typeof(i=null!=(i=c(n,"thumb")||(null!=t?c(t,"thumb"):t))?i:a)?i.call(s,{name:"thumb",hash:{},data:o,loc:{start:{line:3,column:14},end:{line:3,column:25}}}):i)+'" width="124"/>\n    <div style="display: inline-block; vertical-align: top; padding-left: 10px; width: 340px;">\n        <strong>'+l("function"==typeof(i=null!=(i=c(n,"book_name")||(null!=t?c(t,"book_name"):t))?i:a)?i.call(s,{name:"book_name",hash:{},data:o,loc:{start:{line:5,column:16},end:{line:5,column:31}}}):i)+"</strong><br/>\n        <span>"+l("function"==typeof(i=null!=(i=c(n,"book_description")||(null!=t?c(t,"book_description"):t))?i:a)?i.call(s,{name:"book_description",hash:{},data:o,loc:{start:{line:6,column:14},end:{line:6,column:36}}}):i)+"</span>\n    </div>\n</section>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="";return s=null!=(s=d(n,"Desktop")||(null!=t?d(t,"Desktop"):t))?s:c,a={name:"Desktop",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:9,column:12}}},i="function"==typeof s?s.call(l,a):s,d(n,"Desktop")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(p+=i),p+'\n<section>\n    <label for="share_email">'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"general.email_address",{name:"t",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:58}}}))+'</label>\n    <input type="email" name="share_email" class="form-control" id="share_email" placeholder="'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"modal.share_email.address_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:13,column:94},end:{line:13,column:139}}}))+'"/>\n</section>\n\n<section>\n    <label for="sender_username">'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"general.name",{name:"t",hash:{},data:o,loc:{start:{line:17,column:33},end:{line:17,column:53}}}))+'</label>\n    <input type="text" name="sender_username" class="form-control" id="sender_username" placeholder="'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"general.enter_your_name",{name:"t",hash:{},data:o,loc:{start:{line:18,column:101},end:{line:18,column:132}}}))+'" value="'+u("function"==typeof(s=null!=(s=d(n,"user_name")||(null!=t?d(t,"user_name"):t))?s:c)?s.call(l,{name:"user_name",hash:{},data:o,loc:{start:{line:18,column:141},end:{line:18,column:156}}}):s)+'"/>\n</section>\n\n\x3c!--<section>\n    <label for="share_comments">'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"common.share_message",{name:"t",hash:{},data:o,loc:{start:{line:22,column:32},end:{line:22,column:60}}}))+'</label>\n    <textarea name="share_comments" class="form-control" placeholder="'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"editor.add_message_optional",{name:"t",hash:{},data:o,loc:{start:{line:23,column:70},end:{line:23,column:105}}}))+'"></textarea>\n</section>--\x3e\n'},useData:!0})},{"hbsfy/runtime":1024}],286:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section style="display: block; float: left; margin-right: 10px;">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.type_label",{name:"t",hash:{},data:o,loc:{start:{line:2,column:10},end:{line:2,column:46}}}))+'</span>\n\n    <ul class="btnWrapper">\n        <li>\n            <a class="btn btn-squire btn-tag type active" tag="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.slideshow",{name:"t",hash:{},data:o,loc:{start:{line:6,column:63},end:{line:6,column:98}}}))+'" data-id="slide">\n                <div class="icon-wrapper"><i class="fa fa-square-o"></i></div>\n            </a>\n        </li>\n        <li>\n            <a class="btn btn-squire btn-tag type" tag="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.scrolling",{name:"t",hash:{},data:o,loc:{start:{line:11,column:56},end:{line:11,column:91}}}))+'" data-id="scroll">\n                <div class="icon-wrapper"><i class="fa fa-square-o"></i></div>\n            </a>\n        </li>\n    </ul>\n</section>\n\n<section style="display: block; float: left;" id="share-embed-size">\n    <span id="share-embed-size-text">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.size_label",{name:"t",hash:{},data:o,loc:{start:{line:19,column:37},end:{line:19,column:73}}}))+'</span>\n\n    <ul class="btnWrapper">\n        <li>\n            <a class="btn btn-squire btn-tag size active" tag="290 x 205" data-id="290">\n                <div class="icon-wrapper"><i class="fa fa-square-o" style="font-size:0.6em;"></i></div>\n            </a>\n        </li>\n        <li>\n            <a class="btn btn-squire btn-tag size" tag="500 x 354" data-id="500">\n                <div class="icon-wrapper"><i class="fa fa-square-o" style="font-size:0.8em;"></i></div>\n            </a>\n        </li>\n        <li>\n            <a class="btn btn-squire btn-tag size" tag="800 x 566" data-id="800">\n                <div class="icon-wrapper"><i class="fa fa-square-o" style="font-size:1.0em;"></i></div>\n            </a>\n        </li>\n        <li>\n            <a class="btn btn-squire btn-tag size" tag="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.custom",{name:"t",hash:{},data:o,loc:{start:{line:38,column:56},end:{line:38,column:88}}}))+'" data-id="custom">\n                <div class="icon-wrapper"><i class="fa fa-square-o" style="font-size:1.2em;"></i></div>\n            </a>\n        </li>\n        <li>\n            <div id="share-embed-custom-sizes" style="display: none;">\n                <input type="number" name="width" class="form-control small" value="'+l("function"==typeof(i=null!=(i=c(n,"width")||(null!=t?c(t,"width"):t))?i:a)?i.call(s,{name:"width",hash:{},data:o,loc:{start:{line:44,column:84},end:{line:44,column:95}}}):i)+'"/>\n                <span>&nbsp;X&nbsp;</span>\n                <input type="number" name="height" class="form-control small" value="'+l("function"==typeof(i=null!=(i=c(n,"height")||(null!=t?c(t,"height"):t))?i:a)?i.call(s,{name:"height",hash:{},data:o,loc:{start:{line:46,column:85},end:{line:46,column:97}}}):i)+'"/>\n            </div>\n        </li>\n    </ul>\n</section>\n\n<section style="clear: both;" id="share-embed-checkboxes">\n<span class="filter-line">\n  <p class="desygner-custom-check">\n    <label>\n      '+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.display_project",{name:"t",hash:{},data:o,loc:{start:{line:56,column:6},end:{line:56,column:47}}}))+'\n      <input type="checkbox" name="bookName" id="bookName" value="1" checked="checked"/>\n      <span class="checkmark"></span>\n    </label>\n  </p>\n  </span>\n<span class="filter-line">\n  <p class="desygner-custom-check">\n    <label>\n      '+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.display_numbers",{name:"t",hash:{},data:o,loc:{start:{line:65,column:6},end:{line:65,column:47}}}))+'\n      <input type="checkbox" name="bookViews" id="bookViews" value="1" checked="checked"/>\n      <span class="checkmark"></span>\n    </label>\n  </p>\n  </span>\n</section>\n\n<section style="clear: both;">\n    <label for="code">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"modal.share_embed.code_label",{name:"t",hash:{},data:o,loc:{start:{line:74,column:22},end:{line:74,column:58}}}))+'</label>\n    <textarea name="code" class="form-control" readonly="readonly"></textarea>\n</section>\n'},useData:!0})},{"hbsfy/runtime":1024}],287:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<li class="space" data-additional-menu="true" style="display: none;"></li>\n'},useData:!0})},{"hbsfy/runtime":1024}],288:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'<li><a role="menuitem">'+e.escapeExpression(e.lambda(t,t))+"</a></li>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return"<ul>\n    "+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:4},end:{line:2,column:63}}}))?i:"")+"\n</ul>\n"},useData:!0})},{"hbsfy/runtime":1024}],289:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'<li><a role="menuitem">'+e.escapeExpression(e.lambda(t,t))+" pt</a></li>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i;return"<ul>\n    "+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:4},end:{line:2,column:66}}}))?i:"")+"\n</ul>\n"},useData:!0})},{"hbsfy/runtime":1024}],290:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\n    <a class="btn btn-onmenu" data-action="on_show_more">\n        '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.show_more",{name:"t",hash:{},data:o,loc:{start:{line:3,column:8},end:{line:3,column:35}}}))+"\n    </a>\n</li>\n"},useData:!0})},{"hbsfy/runtime":1024}],291:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o,i,s){var a=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li>\n        <svg width="200" height="30" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <line stroke-dasharray="'+l(a(t,t))+'" stroke-width="'+l(a(null!=s[1]?c(s[1],"width"):s[1],t))+'" x1="0" y1="15" x2="200" y2="15"/>\n        </svg>\n    </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="stroke-dasharray">\n    <li>\n        <svg width="200" height="30" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <line stroke-width="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"width")||(null!=t?u(t,"width"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"width",hash:{},data:o,loc:{start:{line:4,column:32},end:{line:4,column:43}}}):l)+'" x1="0" y1="15" x2="200" y2="15"/>\n        </svg>\n    </li>\n'+(null!=(a=u(n,"each").call(c,null!=t?u(t,"dashArrays"):t,{name:"each",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:7,column:4},end:{line:13,column:13}}}))?a:"")+"</ul>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],292:[function(e,t,n){"use strict";var r={modal:e("./modal/base/modal.hbs"),modal_alert:e("./modal/base/alert.hbs"),modal_wrapper:e("./modal/base/wrapper.hbs"),modal_buttons:e("./modal/base/buttons.hbs"),modal_loader:e("./modal/base/loader.hbs"),modal_restricted_template_load:e("./modal/base/restricted-template-load.hbs"),modal_restricted_template_confirm:e("./modal/base/restricted-template-confirm.hbs"),modal_layout_load:e("./modal/base/layout-load.hbs"),alert_default:e("./modal/alert/default.hbs"),alert_delete_confirm:e("./modal/alert/delete-confirm.hbs"),alert_span:e("./modal/alert/span.hbs"),alert_bold:e("./modal/alert/bold.hbs"),popupmenu_showmore:e("./popupmenu/show-more.hbs"),popupmenu_additional:e("./popupmenu/additional.hbs"),popupmenu_font_size_list:e("./popupmenu/font-size-list.hbs"),popupmenu_bleed_size_list:e("./popupmenu/bleed-size-list.hbs"),popupmenu_stroke_dasharray:e("./popupmenu/stroke-dasharray.hbs")};t.exports=function(e,t){if(r[e])return r[e](t)}},{"./modal/alert/bold.hbs":264,"./modal/alert/default.hbs":265,"./modal/alert/delete-confirm.hbs":266,"./modal/alert/span.hbs":267,"./modal/base/alert.hbs":268,"./modal/base/buttons.hbs":269,"./modal/base/layout-load.hbs":270,"./modal/base/loader.hbs":271,"./modal/base/modal.hbs":272,"./modal/base/restricted-template-confirm.hbs":273,"./modal/base/restricted-template-load.hbs":274,"./modal/base/wrapper.hbs":275,"./popupmenu/additional.hbs":287,"./popupmenu/bleed-size-list.hbs":288,"./popupmenu/font-size-list.hbs":289,"./popupmenu/show-more.hbs":290,"./popupmenu/stroke-dasharray.hbs":291}],293:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'class="vertical"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='<g clip-path="url(#'+d(typeof(s=null!=(s=p(n,"clipId")||(null!=t?p(t,"clipId"):t))?s:c)===u?s.call(l,{name:"clipId",hash:{},data:o,loc:{start:{line:1,column:19},end:{line:1,column:31}}}):s)+')" height="'+d(typeof(s=null!=(s=p(n,"size")||(null!=t?p(t,"size"):t))?s:c)===u?s.call(l,{name:"size",hash:{},data:o,loc:{start:{line:1,column:42},end:{line:1,column:52}}}):s)+'" width="'+d(typeof(s=null!=(s=p(n,"size")||(null!=t?p(t,"size"):t))?s:c)===u?s.call(l,{name:"size",hash:{},data:o,loc:{start:{line:1,column:61},end:{line:1,column:71}}}):s)+'" y="'+d(typeof(s=null!=(s=p(n,"y")||(null!=t?p(t,"y"):t))?s:c)===u?s.call(l,{name:"y",hash:{},data:o,loc:{start:{line:1,column:76},end:{line:1,column:83}}}):s)+'" x="'+d(typeof(s=null!=(s=p(n,"x")||(null!=t?p(t,"x"):t))?s:c)===u?s.call(l,{name:"x",hash:{},data:o,loc:{start:{line:1,column:88},end:{line:1,column:95}}}):s)+'">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n     id="'+d(typeof(s=null!=(s=p(n,"id")||(null!=t?p(t,"id"):t))?s:c)===u?s.call(l,{name:"id",hash:{},data:o,loc:{start:{line:3,column:9},end:{line:3,column:17}}}):s)+'" height="'+d(typeof(s=null!=(s=p(n,"size")||(null!=t?p(t,"size"):t))?s:c)===u?s.call(l,{name:"size",hash:{},data:o,loc:{start:{line:3,column:27},end:{line:3,column:37}}}):s)+'" width="'+d(typeof(s=null!=(s=p(n,"size")||(null!=t?p(t,"size"):t))?s:c)===u?s.call(l,{name:"size",hash:{},data:o,loc:{start:{line:3,column:46},end:{line:3,column:56}}}):s)+'" y="'+d(typeof(s=null!=(s=p(n,"y")||(null!=t?p(t,"y"):t))?s:c)===u?s.call(l,{name:"y",hash:{},data:o,loc:{start:{line:3,column:61},end:{line:3,column:68}}}):s)+'" x="'+d(typeof(s=null!=(s=p(n,"x")||(null!=t?p(t,"x"):t))?s:c)===u?s.call(l,{name:"x",hash:{},data:o,loc:{start:{line:3,column:73},end:{line:3,column:80}}}):s)+'" ';return s=null!=(s=p(n,"is_vertical")||(null!=t?p(t,"is_vertical"):t))?s:c,a={name:"is_vertical",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:82},end:{line:3,column:132}}},i=typeof s===u?s.call(l,a):s,p(n,"is_vertical")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(h+=i),h+'\n     viewBox="0 0 1280 1280" enable-background="new 0 0 1280 1280" xml:space="preserve">\n        <g id="bg">\n            <rect fill="#9BC9D4" width="1280" height="936"/>\n            <rect y="914" fill="#72A862" width="1280" height="366"/>\n        </g>\n        <g class="sky">\n            <g class="cloud">\n                <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M199.331,430.797c-1.287-7.37,0.87-13.442,7.053-17.595\n                    c6.536-4.389,13.351-4.055,19.751-0.271c2.852-3.395,5.261-7.127,8.479-9.933c10.082-8.788,21.739-10.796,34.015-5.625\n                    c12.268,5.165,18.91,14.864,19.809,28.24c0.138,2.053,0.498,3.153,2.718,3.989c10.525,3.957,17.133,16.158,15.34,27.738\n                    c-1.622,10.467-6.968,17.88-17.418,20.954c-1.912,0.562-4,0.732-6.006,0.735c-26.073,0.048-52.145,0.045-78.218,0.025\n                    c-12.834-0.009-22.492-8.336-24.433-20.987c-1.78-11.604,5.839-23.202,17.576-26.768\n                    C198.429,431.171,198.845,430.982,199.331,430.797z"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" fill="#F2F2F2" d="M405.854,465.442c11.737,3.564,19.356,15.162,17.576,26.766\n                    c-1.941,12.653-11.599,20.979-24.433,20.987c-26.073,0.021-73.944,0.023-100.018-0.024c-2.007-0.003-4.094-0.174-6.006-0.736\n                    c-10.45-3.073-15.797-10.487-17.418-20.953c-1.794-11.58,4.814-23.782,15.339-27.739c2.22-0.835,2.58-1.937,2.718-3.989\n                    c0.898-13.375,7.541-23.073,19.809-28.24c12.276-5.169,38.33-10.775,55.814,5.626c3.219,2.805,5.628,6.538,8.479,9.933\n                    c6.401-3.783,13.215-4.117,19.751,0.271c6.183,4.151,8.339,10.226,7.052,17.594C405.006,465.122,405.421,465.311,405.854,465.442z\n                    "/>\n            </g>\n            <circle class="sun" fill="#FFD300" cx="897.401" cy="443.524" r="97.165"/>\n        </g>\n        <g class="mountain">\n            <polygon class="small" fill="#927983" points="657.588,914 842.176,594.252 1026.777,914"/>\n            <g class="big">\n                <g>\n                    <polygon fill="#735C65" points="331.002,914 613.958,423.855 896.934,914"/>\n                </g>\n                <polygon fill="#FEFEFE" points="606.685,610.174 649.338,552.498 710.109,590.374 710.109,590.374 613.958,423.827\n                    518.706,588.824 573.51,560.886"/>\n            </g>\n            <g class="trees">\n                <g>\n                    <rect x="357" y="978" fill="#A76743" width="8" height="34"/>\n                    <polygon fill="#858651" points="329.142,995 363.145,936.109 397.153,995"/>\n                </g>\n                <g>\n                    <rect x="272" y="948" fill="#A76743" width="8" height="34"/>\n                    <polygon fill="#858651" points="244.142,965 278.145,906.109 312.153,965"/>\n                </g>\n                <g>\n                    <rect x="225" y="957" fill="#A76743" width="9" height="33"/>\n                    <polygon fill="#009245" points="195.77,973 230.921,912.12 266.08,973"/>\n                </g>\n                <g>\n                    <rect x="310" y="987" fill="#A76743" width="9" height="33"/>\n                    <polygon fill="#009245" points="280.77,1003 315.922,942.12 351.08,1003"/>\n                </g>\n            </g>\n        </g>\n        <g class="text">\n            <g>\n                <g>\n                    <g>\n                        <g>\n                            <path fill="#FFFFFF" d="M451.408,822.89V710.513h25.784c9.459,0,16.877,0.437,22.24,1.296\n                                c5.368,0.872,9.984,2.268,13.848,4.197c8.138,4.021,14.316,10.341,18.542,18.962c4.217,8.621,6.334,19.236,6.334,31.85\n                                c0,12.668-2.123,23.314-6.375,31.964c-4.245,8.655-10.416,14.86-18.501,18.617c-4.02,1.936-8.834,3.333-14.458,4.196\n                                c-5.619,0.867-12.832,1.295-21.63,1.295H451.408z M456.745,818.087h21.671c8.437,0,15.177-0.448,20.219-1.34\n                                c5.028-0.884,9.454-2.324,13.275-4.304c6.709-3.546,11.844-9.242,15.411-17.078c3.555-7.826,5.339-17.384,5.339-28.661\n                                c0-9.495-1.249-17.736-3.74-24.712c-2.491-6.948-6.207-12.621-11.135-16.995c-3.918-3.496-8.729-5.992-14.423-7.46\n                                c-5.697-1.483-14.014-2.211-24.947-2.211h-21.671V818.087z"/>\n                            <path fill="#FFFFFF" d="M556.994,822.89v-81.098h5.036v14.575c2.039-5.389,5.088-9.449,9.156-12.169\n                                c4.073-2.721,9.084-4.082,15.029-4.082v4.805c-8.751,0.355-14.964,3.406-18.651,9.156c-3.69,5.747-5.534,15.57-5.534,29.452\n                                v39.36H556.994z"/>\n                            <path fill="#FFFFFF" d="M664.566,823.35c-0.558,0.052-1.317,0.142-2.288,0.268c-0.967,0.131-1.675,0.188-2.136,0.188\n                                c-3.711,0-6.404-1.14-8.085-3.429c-1.679-2.29-2.519-6.028-2.519-11.213c-3.259,5.035-7.693,8.923-13.317,11.672\n                                c-5.614,2.747-12.063,4.116-19.333,4.116c-7.224,0-13.056-2.095-17.51-6.293c-4.452-4.19-6.676-9.701-6.676-16.517\n                                c0-7.176,2.445-12.643,7.324-16.403c4.881-3.765,13.224-6.484,25.023-8.163c2.083-0.302,4.911-0.656,8.469-1.07\n                                c10.683-1.225,16.021-3.994,16.021-8.314v-6.867c0-5.488-1.887-9.7-5.647-12.623c-3.756-2.926-9.181-4.389-16.249-4.389\n                                c-8.084,0-14.452,1.755-19.109,5.261c-4.656,3.515-7.188,8.469-7.592,14.879h-4.654c0.303-7.576,3.217-13.551,8.739-17.93\n                                c5.518-4.373,12.901-6.555,22.156-6.555c5.647,0,10.494,0.785,14.539,2.36c4.04,1.576,7.136,3.894,9.269,6.942\n                                c1.219,1.778,2.098,3.801,2.628,6.064c0.533,2.262,0.802,5.838,0.802,10.721v3.436v36.082c0,5.747,0.511,9.529,1.528,11.333\n                                c1.017,1.801,2.899,2.704,5.648,2.704c0.502,0,1.349-0.069,2.513-0.228c0.211-0.049,0.358-0.077,0.457-0.077V823.35z\n                                 M649.539,776.506c-1.267,1.732-6.971,3.181-17.086,4.35c-1.627,0.206-2.903,0.361-3.817,0.457\n                                c-11.546,1.479-19.572,3.727-24.073,6.752c-4.499,3.027-6.753,7.446-6.753,13.238c0,6,1.784,10.63,5.346,13.886\n                                c3.56,3.25,8.62,4.884,15.179,4.884c4.38,0,8.583-0.698,12.626-2.103c4.042-1.401,7.541-3.343,10.493-5.836\n                                c3.002-2.645,5.095-5.604,6.289-8.887c1.202-3.281,1.797-8.197,1.797-14.76V776.506z"/>\n                            <path fill="#FFFFFF" d="M740.171,805.573c-2.689,6.26-6.724,11.105-12.083,14.537c-5.37,3.431-11.663,5.147-18.887,5.147\n                                c-10.94,0-19.587-3.812-25.941-11.44c-6.354-7.632-9.538-18.036-9.538-31.207c0-13.228,3.194-23.612,9.573-31.163\n                                c6.387-7.558,15.122-11.331,26.215-11.331c7.37,0,13.769,1.751,19.186,5.26c5.414,3.514,9.246,8.373,11.476,14.577v-18.161\n                                h4.81v76.754c0,6.152-0.394,10.845-1.181,14.074c-0.792,3.231-2.099,6.192-3.927,8.886c-3.16,4.632-7.48,8.131-12.974,10.492\n                                c-5.496,2.371-12,3.544-19.533,3.544c-9.154,0-16.474-2.167-21.967-6.522c-5.498-4.343-8.292-10.13-8.395-17.354h4.732\n                                c0.299,6.1,2.82,10.887,7.552,14.341c4.733,3.46,11.164,5.188,19.297,5.188c6.767,0,12.481-1.153,17.13-3.467\n                                c4.654-2.316,8.272-5.761,10.871-10.342c1.277-2.284,2.192-4.957,2.75-8.007c0.563-3.052,0.834-8.243,0.834-15.562V805.573z\n                                 M740.171,782.61c0-11.854-2.744-21.169-8.237-27.966c-5.488-6.783-12.974-10.175-22.424-10.175\n                                c-9.459,0-16.95,3.392-22.473,10.175c-5.519,6.797-8.278,16.112-8.278,27.966c0,11.798,2.76,21.099,8.278,27.883\n                                c5.522,6.793,13.014,10.187,22.473,10.187c9.45,0,16.936-3.394,22.424-10.187C737.427,803.709,740.171,794.408,740.171,782.61z\n                                "/>\n                        </g>\n                        <g>\n                            <path fill="#FFFFFF" d="M618.807,833.938v110.425h-4.725v-17.729c-2.557,6.515-6.405,11.457-11.534,14.84\n                                c-5.132,3.38-11.357,5.073-18.669,5.073c-10.916,0-19.518-3.737-25.803-11.197c-6.283-7.46-9.429-17.682-9.429-30.656\n                                c0-12.97,3.157-23.184,9.466-30.646c6.306-7.46,14.898-11.194,25.766-11.194c7.212,0,13.459,1.683,18.738,5.035\n                                c5.292,3.358,9.109,8.086,11.465,14.199v-48.15H618.807z M614.082,904.694c0-11.662-2.711-20.839-8.116-27.523\n                                c-5.41-6.684-12.768-10.029-22.087-10.029c-9.31,0-16.688,3.346-22.121,10.029c-5.43,6.685-8.151,15.861-8.151,27.523\n                                c0,11.626,2.722,20.776,8.151,27.466c5.434,6.687,12.811,10.03,22.121,10.03c9.319,0,16.677-3.344,22.087-10.03\n                                C611.371,925.471,614.082,916.32,614.082,904.694z"/>\n                            <path fill="#FFFFFF" d="M640.144,944.363V864.51h4.958v14.352c2-5.31,5.007-9.309,9.02-11.98\n                                c4.002-2.687,8.936-4.026,14.789-4.026v4.739c-8.611,0.346-14.729,3.354-18.362,9.013c-3.63,5.659-5.446,15.324-5.446,29.001\n                                v38.756H640.144z"/>\n                            <path fill="#FFFFFF" d="M676.802,904.694c0-12.97,3.137-23.184,9.396-30.646c6.262-7.46,14.815-11.194,25.689-11.194\n                                c10.863,0,19.451,3.734,25.766,11.194c6.309,7.462,9.465,17.676,9.465,30.646c0,12.928-3.156,23.131-9.465,30.616\n                                c-6.314,7.487-14.902,11.237-25.766,11.237c-10.874,0-19.428-3.737-25.689-11.197\n                                C679.938,927.891,676.802,917.669,676.802,904.694z M681.759,904.694c0,11.626,2.697,20.776,8.081,27.466\n                                c5.382,6.687,12.733,10.03,22.047,10.03c9.314,0,16.692-3.344,22.159-10.03c5.454-6.689,8.188-15.84,8.188-27.466\n                                c0-11.662-2.733-20.839-8.188-27.523c-5.467-6.684-12.845-10.029-22.159-10.029c-9.313,0-16.665,3.346-22.047,10.029\n                                C684.456,883.855,681.759,893.032,681.759,904.694z"/>\n                            <path fill="#FFFFFF" d="M764.475,976.065V864.51h4.957v18.325c2.55-6.55,6.367-11.529,11.449-14.912\n                                c5.083-3.374,11.309-5.068,18.671-5.068c10.916,0,19.519,3.722,25.802,11.161c6.283,7.437,9.428,17.66,9.428,30.679\n                                c0,12.928-3.156,23.131-9.463,30.616c-6.312,7.487-14.901,11.237-25.767,11.237c-7.27,0-13.485-1.674-18.671-5.002\n                                c-5.177-3.327-9-8.128-11.449-14.383v48.902H764.475z M769.432,904.694c0,11.626,2.685,20.776,8.073,27.466\n                                c5.382,6.687,12.728,10.03,22.047,10.03c9.368,0,16.764-3.344,22.196-10.03c5.437-6.689,8.145-15.84,8.145-27.466\n                                c0-11.662-2.708-20.839-8.145-27.523c-5.433-6.684-12.828-10.029-22.196-10.029c-9.319,0-16.665,3.346-22.047,10.029\n                                C772.116,883.855,769.432,893.032,769.432,904.694z M778.844,874.899h-4.958v-20.423h4.958v10.627"/>\n                        </g>\n                    </g>\n                    <g>\n                        <path fill="#FFFFFF" d="M488.177,891.47l16.338,19.965c1.273-2.285,2.26-4.757,2.96-7.414c0.703-2.652,1.167-5.565,1.387-8.73\n                            h13.9c-0.305,5.098-1.219,9.895-2.73,14.394c-1.516,4.508-3.68,8.738-6.493,12.683l17.986,21.741h-18.907l-8.233-10.144\n                            c-3.865,4.215-8.271,7.367-13.211,9.457c-4.941,2.084-10.463,3.127-16.568,3.127c-8.258,0-15.079-2.7-20.452-8.098\n                            c-5.381-5.405-8.074-12.238-8.074-20.497c0-5.973,1.67-11.198,5.005-15.675c3.335-4.481,8.918-8.945,16.736-13.377\n                            c-3.782-4.478-6.403-8.301-7.878-11.462c-1.467-3.164-2.204-6.39-2.204-9.678c0-6.597,2.204-11.953,6.621-16.077\n                            c4.417-4.135,10.197-6.195,17.362-6.195c7.241,0,12.967,1.902,17.157,5.699c4.199,3.791,6.296,8.95,6.296,15.447\n                            c0,4.964-1.385,9.476-4.148,13.541C498.256,884.238,493.975,888.005,488.177,891.47z M496.146,923.749l-20.488-25.101\n                            c-5.005,2.903-8.637,5.809-10.898,8.731c-2.265,2.926-3.395,6.164-3.395,9.721c0,4.656,1.494,8.475,4.478,11.463\n                            c2.989,2.986,6.848,4.481,11.592,4.481c3.384,0,6.683-0.804,9.886-2.408C490.527,929.029,493.47,926.736,496.146,923.749z\n                             M480.534,882.581c3.87-2.372,6.723-4.809,8.566-7.319c1.844-2.501,2.764-5.22,2.764-8.161c0-3.075-0.88-5.519-2.633-7.322\n                            c-1.755-1.793-4.125-2.695-7.118-2.695c-3.291,0-5.862,0.854-7.704,2.567c-1.849,1.714-2.765,4.042-2.765,6.985\n                            c0,2.281,0.666,4.644,2.005,7.08C474.992,876.153,477.288,879.109,480.534,882.581z"/>\n                    </g>\n                    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M847.512,789.331c-2.453-0.247-4.932-0.68-7.282-1.405\n                        c-3.089-0.95-3.977-3.455-2.442-6.312c0.581-1.081,1.389-2.051,2.167-3.01c1.868-2.301,3.08-4.871,3.45-7.829\n                        c0.618-4.937,0.148-9.783-1.248-14.536c-2.104-7.146-2.537-14.366-1.257-21.713c4.244-24.352,27.95-41.397,52.297-37.578\n                        c24.851,3.898,41.795,25.813,39.293,50.819c-1.818,18.158-14.807,34.036-32.273,39.242c-10.099,3.011-20.497,3.871-31.021,4.237\n                        C861.965,790.618,854.731,790.055,847.512,789.331z M891.669,729.427c-0.023-3.225-2.114-5.452-4.878-5.321\n                        c-2.529,0.123-4.386,2.175-4.404,5.005c-0.033,5.825-0.009,11.65-0.009,18.033c-2.742-2.657-5.107-4.986-7.514-7.269\n                        c-2.413-2.288-5.22-2.416-7.195-0.39c-1.981,2.035-1.779,4.809,0.569,7.188c4.741,4.803,9.487,9.601,14.259,14.369\n                        c3.143,3.139,5.49,3.101,8.572-0.144c4.7-4.951,9.399-9.903,14.021-14.928c1.76-1.913,1.771-4.17,0.335-6.074\n                        c-1.264-1.676-3.67-2.4-5.519-1.436c-0.99,0.517-1.834,1.375-2.63,2.191c-1.72,1.764-3.364,3.6-5.042,5.405\n                        c-0.185-0.06-0.369-0.119-0.557-0.18C891.678,740.395,891.705,734.911,891.669,729.427z"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M766.341,867.598c-22.604,3.208-49.405-2.221-62.396-12.645\n                        c1.058-0.108,1.926-0.221,2.798-0.284c18.194-1.316,31.799-9.829,40.496-25.936c4.403-8.155,7.064-16.924,8.071-26.1\n                        c0.833-7.603,1.581-15.161,4.448-22.354c6.238-15.649,19.772-25.348,36.579-23.165c10.56,1.371,18.463,7.979,20.56,18.397\n                        c0.647,3.222,0.792,6.544,1.185,9.959c3.326,0.272,6.612,0.539,10.29,0.837c-0.592,0.512-0.838,0.748-1.108,0.955\n                        c-5.374,4.101-8.685,8.854-9.513,16.19c-2.904,25.753-14.197,46.524-38.134,58.827 M803.558,786.809\n                        c3.398,0.116,6.273-2.629,6.279-5.999c0.007-3.24-2.726-6.021-5.974-6.079c-3.238-0.057-6.035,2.654-6.1,5.909\n                        C797.699,784.001,800.231,786.696,803.558,786.809z"/>\n                </g>\n                <g>\n                    <path fill="#FFFFFF" d="M490.413,957.762h2.495v40.48h-2.495V957.762z"/>\n                    <path fill="#FFFFFF" d="M499.71,969.101h2.155v5.953h0.112c0.227-0.906,0.625-1.766,1.191-2.58\n                        c0.567-0.812,1.256-1.521,2.069-2.125c0.812-0.604,1.72-1.077,2.722-1.417c1.001-0.341,2.05-0.511,3.146-0.511\n                        c1.398,0,2.609,0.179,3.629,0.539c1.02,0.357,1.89,0.831,2.608,1.416c0.717,0.587,1.284,1.249,1.701,1.986\n                        c0.416,0.735,0.699,1.481,0.851,2.236h0.113c0.87-2.04,2.032-3.58,3.488-4.618c1.454-1.039,3.373-1.56,5.753-1.56\n                        c1.323,0,2.542,0.198,3.657,0.595c1.114,0.397,2.078,1.003,2.892,1.814c0.812,0.814,1.445,1.843,1.898,3.09\n                        c0.454,1.247,0.681,2.721,0.681,4.422v19.9h-2.155v-19.957c0-1.852-0.283-3.307-0.85-4.365c-0.568-1.058-1.238-1.862-2.013-2.409\n                        c-0.775-0.548-1.551-0.89-2.324-1.022c-0.775-0.13-1.371-0.196-1.786-0.196c-1.323,0-2.542,0.227-3.656,0.681\n                        c-1.116,0.452-2.079,1.133-2.892,2.04c-0.813,0.907-1.446,2.031-1.899,3.374c-0.454,1.341-0.68,2.884-0.68,4.619v17.236h-2.154\n                        v-19.957c0-1.813-0.274-3.259-0.822-4.336c-0.549-1.079-1.19-1.88-1.928-2.41c-0.737-0.529-1.493-0.869-2.267-1.021\n                        c-0.776-0.15-1.389-0.227-1.843-0.227c-1.02,0-2.079,0.208-3.174,0.622c-1.097,0.416-2.098,1.06-3.004,1.93\n                        c-0.908,0.868-1.645,1.983-2.212,3.345c-0.567,1.359-0.849,2.965-0.849,4.817v17.236h-2.155V969.101z"/>\n                    <path fill="#FFFFFF" d="M564.113,992.458H564c-0.34,0.87-0.833,1.693-1.475,2.466c-0.643,0.776-1.427,1.467-2.353,2.071\n                        c-0.927,0.604-1.975,1.076-3.146,1.416c-1.172,0.341-2.458,0.51-3.855,0.51c-3.1,0-5.499-0.672-7.2-2.013\n                        c-1.701-1.34-2.552-3.41-2.552-6.208c0-1.701,0.342-3.088,1.021-4.166c0.68-1.078,1.54-1.929,2.579-2.552\n                        c1.04-0.623,2.192-1.066,3.458-1.332c1.267-0.265,2.485-0.452,3.657-0.566l3.344-0.284c1.55-0.114,2.769-0.292,3.658-0.539\n                        c0.887-0.244,1.559-0.584,2.012-1.02c0.454-0.434,0.737-0.992,0.851-1.672c0.113-0.682,0.169-1.531,0.169-2.552\n                        c0-0.795-0.151-1.53-0.453-2.211c-0.304-0.68-0.775-1.285-1.418-1.815c-0.642-0.529-1.474-0.943-2.493-1.246\n                        c-1.021-0.304-2.269-0.453-3.743-0.453c-2.607,0-4.715,0.644-6.321,1.928c-1.608,1.285-2.486,3.229-2.637,5.84h-2.153\n                        c0.15-3.213,1.18-5.623,3.088-7.229c1.909-1.605,4.621-2.409,8.137-2.409c3.515,0,6.075,0.689,7.682,2.067\n                        c1.606,1.382,2.41,3.186,2.41,5.417v16.95c0,0.416,0.009,0.831,0.027,1.246c0.019,0.419,0.086,0.795,0.199,1.136\n                        c0.112,0.34,0.301,0.614,0.567,0.821c0.265,0.208,0.642,0.312,1.133,0.312c0.378,0,0.908-0.058,1.588-0.17v1.814\n                        c-0.567,0.152-1.153,0.228-1.757,0.228c-0.87,0-1.559-0.114-2.069-0.342s-0.898-0.53-1.163-0.905\n                        c-0.264-0.38-0.444-0.823-0.539-1.334c-0.095-0.51-0.142-1.065-0.142-1.674V992.458z M564.113,981.686\n                        c-0.529,0.644-1.333,1.079-2.409,1.305c-1.077,0.228-2.277,0.396-3.6,0.511l-3.628,0.34c-1.059,0.113-2.117,0.273-3.175,0.482\n                        c-1.059,0.208-2.013,0.558-2.863,1.048c-0.85,0.493-1.541,1.163-2.069,2.014c-0.529,0.851-0.793,1.956-0.793,3.315\n                        c0,2.155,0.68,3.753,2.042,4.79c1.359,1.042,3.231,1.561,5.612,1.561c2.456,0,4.402-0.444,5.838-1.332\n                        c1.438-0.888,2.533-1.907,3.289-3.062c0.757-1.152,1.237-2.268,1.446-3.346c0.208-1.075,0.312-1.802,0.312-2.181V981.686z"/>\n                    <path fill="#FFFFFF" d="M597.165,969.101v27.61c0,1.625-0.188,3.202-0.565,4.733c-0.378,1.53-1.027,2.882-1.951,4.055\n                        c-0.925,1.169-2.197,2.105-3.818,2.804c-1.621,0.7-3.677,1.051-6.165,1.051c-1.546,0-2.998-0.163-4.354-0.483\n                        c-1.357-0.32-2.545-0.832-3.564-1.531c-1.018-0.697-1.838-1.623-2.459-2.776c-0.622-1.153-0.971-2.58-1.046-4.28h2.154\n                        c0.113,1.284,0.434,2.383,0.965,3.288c0.528,0.906,1.217,1.653,2.068,2.238c0.851,0.587,1.805,1.013,2.863,1.277\n                        s2.191,0.396,3.401,0.396c2.003,0,3.675-0.301,5.018-0.906c1.34-0.605,2.409-1.39,3.202-2.352\n                        c0.794-0.966,1.352-2.062,1.673-3.289c0.32-1.229,0.481-2.467,0.481-3.713v-6.691h-0.165c-1.02,2.156-2.404,3.799-4.159,4.933\n                        c-1.753,1.134-3.874,1.702-6.362,1.702c-2.15,0-4.008-0.371-5.573-1.106c-1.564-0.738-2.867-1.759-3.903-3.061\n                        c-1.038-1.306-1.811-2.825-2.32-4.563s-0.763-3.63-0.763-5.67c0-1.929,0.273-3.762,0.821-5.501\n                        c0.547-1.736,1.351-3.259,2.409-4.563c1.058-1.304,2.372-2.342,3.94-3.118c1.569-0.772,3.374-1.161,5.414-1.161\n                        c2.305,0,4.431,0.585,6.378,1.756c1.947,1.174,3.336,2.836,4.167,4.99h0.114v-6.066H597.165z M584.409,970.292\n                        c-1.776,0-3.316,0.359-4.62,1.076c-1.304,0.72-2.381,1.664-3.232,2.834c-0.85,1.173-1.493,2.505-1.926,3.999\n                        c-0.436,1.491-0.653,3.014-0.653,4.563c0,1.699,0.217,3.315,0.653,4.848c0.433,1.531,1.095,2.862,1.983,3.996\n                        s1.984,2.032,3.29,2.691c1.303,0.664,2.806,0.992,4.506,0.992c1.776,0,3.325-0.338,4.649-1.02\n                        c1.322-0.682,2.428-1.606,3.317-2.777c0.887-1.172,1.548-2.506,1.984-3.997c0.434-1.492,0.652-3.072,0.652-4.733\n                        c0-1.625-0.218-3.194-0.652-4.705c-0.436-1.513-1.097-2.845-1.984-3.998c-0.889-1.151-1.995-2.07-3.317-2.75\n                        C587.734,970.633,586.186,970.292,584.409,970.292z"/>\n                    <path fill="#FFFFFF" d="M604.364,983.954v0.34c0,1.7,0.227,3.328,0.682,4.876c0.455,1.551,1.126,2.91,2.018,4.081\n                        c0.891,1.174,2.008,2.099,3.354,2.778c1.345,0.682,2.908,1.021,4.689,1.021c2.918,0,5.23-0.765,6.935-2.297\n                        c1.705-1.53,2.882-3.656,3.526-6.378h2.153c-0.643,3.402-2.031,6.01-4.166,7.824c-2.136,1.814-4.961,2.721-8.476,2.721\n                        c-2.155,0-4.036-0.389-5.642-1.162c-1.605-0.773-2.947-1.832-4.024-3.176c-1.077-1.34-1.88-2.929-2.409-4.76\n                        c-0.53-1.833-0.793-3.807-0.793-5.925c0-2.042,0.274-3.999,0.822-5.868c0.548-1.872,1.369-3.515,2.466-4.933\n                        c1.095-1.417,2.466-2.551,4.11-3.401c1.645-0.851,3.581-1.275,5.811-1.275c2.041,0,3.847,0.378,5.415,1.134\n                        c1.568,0.755,2.881,1.786,3.939,3.091c1.058,1.304,1.861,2.814,2.41,4.535c0.548,1.72,0.821,3.562,0.821,5.525\n                        c0,0.191-0.009,0.407-0.026,0.653c-0.022,0.246-0.029,0.445-0.029,0.595H604.364z M625.793,982.084\n                        c-0.075-1.589-0.339-3.091-0.794-4.508c-0.456-1.418-1.128-2.665-2.019-3.74c-0.89-1.079-1.971-1.937-3.239-2.58\n                        c-1.271-0.644-2.72-0.964-4.349-0.964c-1.744,0-3.279,0.329-4.604,0.991c-1.328,0.661-2.446,1.531-3.354,2.608\n                        c-0.91,1.077-1.611,2.334-2.104,3.77c-0.493,1.438-0.795,2.912-0.909,4.423H625.793z"/>\n                    <path fill="#FFFFFF" d="M650.909,957.762v17.575h0.114c0.376-1.096,0.916-2.07,1.614-2.92c0.7-0.851,1.513-1.578,2.438-2.182\n                        c0.925-0.605,1.938-1.059,3.032-1.361c1.098-0.303,2.212-0.453,3.345-0.453c1.703,0,3.147,0.209,4.338,0.623\n                        c1.191,0.416,2.164,0.964,2.921,1.645c0.755,0.68,1.35,1.446,1.786,2.296c0.433,0.852,0.745,1.711,0.935,2.579\n                        c0.187,0.87,0.301,1.712,0.34,2.523c0.038,0.813,0.057,1.521,0.057,2.125v18.03h-2.153v-18.427c0-0.717-0.059-1.624-0.173-2.72\n                        c-0.11-1.097-0.442-2.146-0.989-3.146c-0.549-1.002-1.381-1.861-2.497-2.581c-1.114-0.717-2.654-1.076-4.618-1.076\n                        c-1.663,0-3.139,0.303-4.423,0.905c-1.286,0.606-2.38,1.448-3.289,2.524c-0.905,1.077-1.597,2.362-2.069,3.854\n                        c-0.472,1.494-0.708,3.128-0.708,4.905v15.761h-2.154v-40.48H650.909z"/>\n                    <path fill="#FFFFFF" d="M678.973,983.954v0.34c0,1.7,0.228,3.328,0.683,4.876c0.453,1.551,1.125,2.91,2.018,4.081\n                        c0.89,1.174,2.007,2.099,3.353,2.778c1.346,0.682,2.908,1.021,4.689,1.021c2.918,0,5.23-0.765,6.936-2.297\n                        c1.706-1.53,2.88-3.656,3.525-6.378h2.153c-0.644,3.402-2.031,6.01-4.166,7.824c-2.136,1.814-4.961,2.721-8.477,2.721\n                        c-2.153,0-4.035-0.389-5.641-1.162c-1.606-0.773-2.947-1.832-4.024-3.176c-1.078-1.34-1.881-2.929-2.41-4.76\n                        c-0.528-1.833-0.793-3.807-0.793-5.925c0-2.042,0.273-3.999,0.822-5.868c0.547-1.872,1.368-3.515,2.466-4.933\n                        c1.096-1.417,2.466-2.551,4.109-3.401c1.645-0.851,3.581-1.275,5.812-1.275c2.04,0,3.847,0.378,5.414,1.134\n                        c1.568,0.755,2.882,1.786,3.939,3.091c1.06,1.304,1.861,2.814,2.412,4.535c0.545,1.72,0.82,3.562,0.82,5.525\n                        c0,0.191-0.011,0.407-0.027,0.653c-0.021,0.246-0.029,0.445-0.029,0.595H678.973z M700.402,982.084\n                        c-0.076-1.589-0.34-3.091-0.796-4.508c-0.456-1.418-1.129-2.665-2.017-3.74c-0.892-1.079-1.972-1.937-3.241-2.58\n                        c-1.271-0.644-2.721-0.964-4.349-0.964c-1.744,0-3.278,0.329-4.604,0.991c-1.327,0.661-2.446,1.531-3.355,2.608\n                        s-1.608,2.334-2.103,3.77c-0.493,1.438-0.797,2.912-0.909,4.423H700.402z"/>\n                    <path fill="#FFFFFF" d="M709.756,975.563h0.169c0.265-0.943,0.748-1.833,1.447-2.664c0.7-0.83,1.548-1.549,2.551-2.154\n                        c1.002-0.604,2.115-1.067,3.344-1.389c1.23-0.322,2.506-0.463,3.828-0.425v2.153c-1.133-0.149-2.429-0.037-3.883,0.34\n                        c-1.455,0.379-2.845,1.211-4.168,2.495c-0.528,0.567-0.991,1.114-1.389,1.644c-0.396,0.529-0.728,1.116-0.991,1.758\n                        c-0.265,0.643-0.475,1.36-0.625,2.154c-0.151,0.794-0.245,1.739-0.283,2.835v15.932h-2.154v-29.142h2.154V975.563z"/>\n                    <path fill="#FFFFFF" d="M723.477,983.954v0.34c0,1.7,0.227,3.328,0.683,4.876c0.454,1.551,1.126,2.91,2.018,4.081\n                        c0.89,1.174,2.008,2.099,3.354,2.778c1.344,0.682,2.908,1.021,4.689,1.021c2.918,0,5.23-0.765,6.935-2.297\n                        c1.705-1.53,2.88-3.656,3.526-6.378h2.153c-0.644,3.402-2.032,6.01-4.166,7.824c-2.136,1.814-4.962,2.721-8.478,2.721\n                        c-2.153,0-4.034-0.389-5.64-1.162c-1.606-0.773-2.948-1.832-4.025-3.176c-1.077-1.34-1.881-2.929-2.409-4.76\n                        c-0.53-1.833-0.794-3.807-0.794-5.925c0-2.042,0.273-3.999,0.823-5.868c0.547-1.872,1.368-3.515,2.465-4.933\n                        c1.095-1.417,2.467-2.551,4.11-3.401s3.58-1.275,5.812-1.275c2.04,0,3.847,0.378,5.414,1.134\n                        c1.568,0.755,2.882,1.786,3.939,3.091c1.059,1.304,1.86,2.814,2.409,4.535c0.547,1.72,0.822,3.562,0.822,5.525\n                        c0,0.191-0.01,0.407-0.028,0.653c-0.02,0.246-0.027,0.445-0.027,0.595H723.477z M744.905,982.084\n                        c-0.074-1.589-0.341-3.091-0.794-4.508c-0.456-1.418-1.127-2.665-2.019-3.74c-0.892-1.079-1.97-1.937-3.241-2.58\n                        c-1.27-0.644-2.719-0.964-4.348-0.964c-1.743,0-3.277,0.329-4.604,0.991c-1.326,0.661-2.444,1.531-3.353,2.608\n                        c-0.912,1.077-1.61,2.334-2.104,3.77c-0.494,1.438-0.798,2.912-0.91,4.423H744.905z"/>\n                </g>\n            </g>\n        </g>\n    </svg>\n</g>\n'},useData:!0})},{"hbsfy/runtime":1024}],294:[function(e,t,n){"use strict";var r=e("../../../customize/contents/pattern/patterns");t.exports=r.extend({callbackName:"callbackAdminBackgrounds"})},{"../../../customize/contents/pattern/patterns":400}],295:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.find.js");var r=e("./backgrounds"),o=e("../../../components/accordion-list/categories-director"),i=e("../../../components/mixins/create");t.exports=Backbone.mixin(o.extend({class:"sub-category backgrounds",CategoriesView:r,views:{},addNewEvent:function(e,t){this.modalData=new INKIVE.ModalAdminBackground({data:t}),this.modal=INKIVE.Modal.modalWindow(this.modalData.getFormHtml(),{width:850,headerIcon:"icon-news",headerTitle:"modal.title.new_background",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.create_background"),onClick:_.bind(this.createTemplate,this)}]})},loadButtons:function(){var e=$.Deferred();return INKIVE.Tool.preloadBackgroundCategories((function(){var t=INKIVE.Tool._cache.backgroundCategories;e.resolve(_.map(t,(function(e){return{key:e.id,tag:e.name,icon:"fa fa-ellipsis-v"}})))})),e.promise()},initialize:function(){this.createButtonMargin=31,this.modalData=new INKIVE.ModalAdminBackground,this.mode="template",this.addButtonText="tool.admin.new_background",this.createCallback=$.noop,o.prototype.initialize.call(this),this.render()},_render:function(){o.prototype._render.apply(this,arguments),this.$el.find(".wrapper").css("top",this.createButtonMargin+"px")},toggleAcordionElement:function(e,t){var n=e.closest("dt"),r=n.closest(".wrapper"),i=this.createButtonMargin-n.position().top;o.prototype.toggleAcordionElement.apply(this,arguments),r.css("top",t?i+"px":this.createButtonMargin+"px")}}),i)},{"../../../components/accordion-list/categories-director":313,"../../../components/mixins/create":331,"./backgrounds":294,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],296:[function(e,t,n){"use strict";var r=e("../sticker/stickersall");t.exports=r.extend({where:{isText:!0},idPrefix:"banner"})},{"../sticker/stickersall":304}],297:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../../../components/accordion-list/categories-director"),o=e("./stickers"),i=e("../../../components/mixins/create");t.exports=Backbone.mixin(r.extend({CategoriesView:o,views:{},initialize:function(){this.createButtonMargin=31,this.tool=INKIVE.Tool.getInstance(),this.modalData=new INKIVE.ModalAdminSticker({isText:!0}),this.mode="banner",this.addButtonText="tool.admin.new_banner",this.createCallback=$.noop,r.prototype.initialize.call(this),this.render()},_render:function(){r.prototype._render.apply(this,arguments),this.$el.find(".wrapper").css("top",this.createButtonMargin+"px")},addNewEvent:function(e,t){this.modalData=new INKIVE.ModalAdminSticker({isText:!0,data:t}),this.modal=INKIVE.Modal.modalWindow(this.modalData.getFormHtml(),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.new_banner",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.create_banner"),onClick:_.bind(this.createTemplate,this)}]})},toggleAcordionElement:function(e,t){var n=e.closest("dt"),o=n.closest(".wrapper"),i=this.createButtonMargin-n.position().top;r.prototype.toggleAcordionElement.apply(this,arguments),o.css("top",t?i+"px":this.createButtonMargin+"px")},extractData:function(e){return[]}}),i)},{"../../../components/accordion-list/categories-director":313,"../../../components/mixins/create":331,"./stickers":296,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],298:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o,i,s){var a,l,c,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d="            ";return l=null!=(l=u(n,"data")||(null!=t?u(t,"data"):t))?l:e.hooks.helperMissing,c={name:"data",hash:{},fn:e.program(2,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:8,column:12},end:{line:8,column:89}}},a="function"==typeof l?l.call(null!=t?t:e.nullContext||{},c):l,u(n,"data")||(a=e.hooks.blockHelperMissing.call(t,a,c)),null!=a&&(d+=a),d+"\n"},2:function(e,t,n,r,o,i,s){var a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option value="'+u("function"==typeof(a=null!=(a=d(n,"id")||(null!=t?d(t,"id"):t))?a:c)?a.call(l,{name:"id",hash:{},data:o,loc:{start:{line:8,column:36},end:{line:8,column:44}}}):a)+'">'+u(e.lambda(null!=s[1]?d(s[1],"name"):s[1],t))+": "+u("function"==typeof(a=null!=(a=d(n,"name")||(null!=t?d(t,"name"):t))?a:c)?a.call(l,{name:"name",hash:{},data:o,loc:{start:{line:8,column:61},end:{line:8,column:71}}}):a)+"</option>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c,u=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <div class="load-process">\n      <div class="select-wrapper">\n        <select class="from-format">\n          <option value="" disabled selected>From format...</option>\n';return l=null!=(l=h(n,"groups")||(null!=t?h(t,"groups"):t))?l:d,c={name:"groups",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:7,column:10},end:{line:9,column:21}}},a="function"==typeof l?l.call(u,c):l,h(n,"groups")||(a=p.call(t,a,c)),null!=a&&(m+=a),m+='        </select>\n      </div>\n\n      <div class="select-wrapper">\n        <select class="to-format">\n          <option value="" disabled selected>To format...</option>\n',l=null!=(l=h(n,"groups")||(null!=t?h(t,"groups"):t))?l:d,c={name:"groups",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:16,column:10},end:{line:18,column:21}}},a="function"==typeof l?l.call(u,c):l,h(n,"groups")||(a=p.call(t,a,c)),null!=a&&(m+=a),m+'        </select>\n      </div>\n      <button class="load btn btn-primary">Load</button>\n    </div>\n\n    <button class="generate btn btn-primary hidden">Generate missing</button>\n    <div class="progress hidden"><p class="message"></p></div>\n\n    <ul class="thumbnail-wrapper"></ul>\n  </div>\n</div>\n'},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],299:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"ok"},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(i=null!=(i=s(n,"url")||(null!=t?s(t,"url"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"url",hash:{},data:o,loc:{start:{line:7,column:24},end:{line:7,column:33}}}):i)},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='<div class="container" style="height: '+d(typeof(s=null!=(s=h(n,"thumb_height")||(null!=t?h(t,"thumb_height"):t))?s:c)===u?s.call(l,{name:"thumb_height",hash:{},data:o,loc:{start:{line:1,column:38},end:{line:1,column:56}}}):s)+'px">\n  <div class="wrapper from-format" style="transform: skewX(-'+d(typeof(s=null!=(s=h(n,"angle")||(null!=t?h(t,"angle"):t))?s:c)===u?s.call(l,{name:"angle",hash:{},data:o,loc:{start:{line:2,column:60},end:{line:2,column:71}}}):s)+'deg);">\n    <img src="'+d(typeof(s=null!=(s=h(n,"url")||(null!=t?h(t,"url"):t))?s:c)===u?s.call(l,{name:"url",hash:{},data:o,loc:{start:{line:3,column:14},end:{line:3,column:23}}}):s)+'" style="transform: skewX('+d(typeof(s=null!=(s=h(n,"angle")||(null!=t?h(t,"angle"):t))?s:c)===u?s.call(l,{name:"angle",hash:{},data:o,loc:{start:{line:3,column:49},end:{line:3,column:60}}}):s)+'deg);">\n  </div>\n\n  <div class="wrapper to-format ';return s=null!=(s=h(n,"has_perfect_match")||(null!=t?h(t,"has_perfect_match"):t))?s:c,a={name:"has_perfect_match",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:32},end:{line:6,column:78}}},i=typeof s===u?s.call(l,a):s,h(n,"has_perfect_match")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+='" style="transform: skewX(-'+d(typeof(s=null!=(s=h(n,"angle")||(null!=t?h(t,"angle"):t))?s:c)===u?s.call(l,{name:"angle",hash:{},data:o,loc:{start:{line:6,column:105},end:{line:6,column:116}}}):s)+'deg);" >\n    <img src="',s=null!=(s=h(n,"match")||(null!=t?h(t,"match"):t))?s:c,a={name:"match",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:14},end:{line:7,column:43}}},i=typeof s===u?s.call(l,a):s,h(n,"match")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+'" style="transform: skewX('+d(typeof(s=null!=(s=h(n,"angle")||(null!=t?h(t,"angle"):t))?s:c)===u?s.call(l,{name:"angle",hash:{},data:o,loc:{start:{line:7,column:69},end:{line:7,column:80}}}):s)+'deg);">\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],300:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.parse-float.js");var r=e("./template.hbs"),o=e("./thumbnail.hbs"),i=e("../../../components/mixins/scrollable"),s=e("../../../../../factory/formats"),a=e("../../../../../facade/design/design"),l=e("../../../../editor-mode-manager");t.exports=Backbone.mixin(Backbone.View.extend({mismatchPerfect:20,mismatchSame:50,events:{"click button.load":"loadEvent","click button.generate":"generateEvent","click li.thumbnail":"migrateEvent"},loadEvent:function(){var e=this.$el.find("select.from-format").val(),t=this.$el.find("select.to-format").val();this.$el.find(".load-process").addClass("hidden"),this.$el.find(".progress").removeClass("hidden"),INKIVE.Modal.loader(this.$el.find(".progress")),$.when(this.loadAllTemplatesByFormat(e,1),this.loadAllTemplatesByFormat(t,0)).then(this.preloadThumbnails).then(this.compare).then(this.renderThumbnails).then(_.bind((function(){INKIVE.Modal.loaderClose(this.$el.find(".progress")),this.$el.find("button.generate").removeClass("hidden"),this.$el.find(".progress").addClass("hidden")}),this)),$.when(s.getFormat(e),s.getFormat(t)).then(_.bind((function(e,t){this.fromFormat=e,this.toFormat=t}),this))},generateEvent:function(){var e=_.bind(e,this),t=_.filter(this.templates,(function(e){return!e.match})),n=t.length;function e(){if(INKIVE.Modal.togglePageLoader(!1),t.length){try{this.generateMatch(t.pop()).then(e)}catch(t){e()}INKIVE.Modal.togglePageLoader(!0,"Generating matching template "+(n-t.length)+" of "+n)}}e()},migrateEvent:function(e){var t=$(e.currentTarget),n=_.findWhere(this.templates,{id:t.data("templateid")});if(n.match||this.generateMatch(n),n.match)var r=INKIVE.Modal.modalWindow("Edit copy or create a new one?",{headerIcon:"icon-info",headerTitle:"Migrate template",buttons:[{title:"Edit current",onClick:_.bind((function(){this.editMatch(n.match),r.close()}),this)},{title:"Create new",onClick:_.bind((function(){this.generateMatch(n),r.close()}),this)}]})},editMatch:function(e){INKIVE.Helpers.api("search/layout","GET",{id:e.id},_.bind((function(e){l.setMode("template",e)}),this))},generateMatch:function(e){return function(){var t=$.Deferred();return INKIVE.Helpers.api("search/layout","GET",{id:e.id},(function(e){t.resolve(e)})),t.promise()}.call(this).then(_.bind((function(e){var t=$.Deferred(),n=INKIVE.Helpers.convertUnitsToPixels,r={name:e.name,orientation:e.orientation,text:e.text,isBackground:e.background?1:0,set:e.set,num:e.num,active:0,format_id:this.toFormat.id,format_width:n(this.toFormat.width,this.toFormat.unit),format_height:n(this.toFormat.height,this.toFormat.unit),tag:e.tag};return INKIVE.Helpers.api("management/layoutinfo","POST",{info:r},(function(e){e&&"success"==e.status?t.resolve(_.extend(r,{id:e.id})):t.reject()})),t.promise()}),this)).then(_.bind((function(t){var n=$.Deferred();return l.setMode("template",t),a.once("template.update.designed",(function(){n.resolve(t)})),a.set("template",{keep_stage_size:!0,designed:{id:e.id}}),n.promise()}),this)).then(_.bind((function(t){var n=$.Deferred();return this.tool.save(null,(function(){n.resolve(e,t.id)})),n.promise()}),this)).then(this.updateThumbnail)},updateThumbnail:function(e,t){var n=$.Deferred(),r=this.mismatchPerfect,o=_.find(this.$el.find("ul.thumbnail-wrapper li.thumbnail"),(function(t){return $(t).data("templateid")==e.id}));return INKIVE.Helpers.api("search/layout","GET",{id:t},(function(t){$(o).find(".to-format img").attr("src",t.url),e.match=t,resemble(e.url).compareTo(t.url.replace(/\/\/static\./,"//oregon.")).onComplete((function(e){var t=parseFloat(e.misMatchPercentage)<r;$(o).find(".to-format").toggleClass("ok",t),n.resolve()}))})),n.promise()},loadAllTemplatesByFormat:function(e,t){var n=0,r=[],o=$.Deferred();return function i(){var s={from:n,limit:10,where:{format:e,active:t}};n+=10,this.$el.find(".progress p").text("Loading format "+e+", page "+Math.round(n/10)),INKIVE.Helpers.api("search/layouts","GET",s,_.bind((function(e){e&&e.data&&e.data.length?(r=_.union(r,e.data),i.call(this)):o.resolve(r)}),this))}.call(this),o.promise()},preloadThumbnails:function(e,t){var n=$.Deferred(),r={},o=_.union(e,t),i=o.length;return function s(){var a=o.length>3?3:o.length,l=_.after(a,_.bind(s,this)),c=Math.round((i-o.length)/i*100);this.$el.find(".progress p").text("Loading thumbnails "+c+"%"),o.length||n.resolve(e,t,r);for(;a-- >0&&o.length;){var u=o.pop();if(u.url){var d=new Image;d.setAttribute("crossOrigin","anonymous"),d.src=INKIVE.Helpers.getCORSSecureUrl(u.url),d.onerror=l,d.onload=function(){_.defer(l);var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0),this.rawData=e.toDataURL("image/png")},r[u.id]=d}else l()}}.call(this),n.promise()},compare:function(e,t,n){var r=_.filter(e,d),o=_.filter(t,d),i=$.Deferred(),s=_.bind(s,this),a=r.length,l=[],c=this.mismatchSame,u=this.mismatchPerfect;return s(),i.promise();function d(e){return n[e.id]}function s(){if(!r.length)return this.templates=_.filter(e,d),p=[],h=[],_.each(_.sortBy(l,"misMatch"),(function(n){if(!_.contains(p,n.toId)&&!_.contains(h,n.fromId)){var r=_.find(e,{id:n.fromId});r.match=_.find(t,{id:n.toId}),r.hasPerfectMatch=n.misMatch<u,p.push(n.toId),h.push(n.fromId)}})),void i.resolve();var p,h,m=r.pop().id,f=_.after(o.length,_.bind(s,this)),g=Math.round((a-r.length)/a*100);this.$el.find(".progress p").text("Matching templates "+g+"%"),o.length||s.call(this),_.each(o,(function(e){var t=e.id,r=n[m].rawData,o=n[t].rawData;r&&o?resemble(r).compareTo(o).onComplete((function(e){var n=parseFloat(e.misMatchPercentage);n<c&&l.push({fromId:m,toId:t,misMatch:n}),_.defer(f)})):_.defer(f)}))}},renderThumbnails:function(){_.each(this.templates,(function(e){e.url&&this.$el.find("ul.thumbnail-wrapper").append($('<li class="thumbnail"></li>').html(this.getThumbnailHTML(e)).data("templateid",e.id))}),this),this.initScroll()},getThumbnailHTML:function(e){var t=(Math.PI/2-Math.atan(this.fromFormat.height/this.fromFormat.width))/(Math.PI/180),n=_.extend(r(e),{angle:t});return e.match&&(n.match=r(e.match)),o(n);function r(e){return{url:e.url,has_perfect_match:e.hasPerfectMatch,thumb_height:e.format_height/e.format_width*255}}},initialize:function(){_.bindAll(this,"render","compare","updateThumbnail","renderThumbnails","preloadThumbnails","loadAllTemplatesByFormat"),s.getGroups().then(this.render),this.tool=INKIVE.Tool.getInstance()},render:function(e){this.$el.html(r({groups:e}))}}),i)},{"../../../../../facade/design/design":47,"../../../../../factory/formats":126,"../../../../editor-mode-manager":204,"../../../components/mixins/scrollable":334,"./template.hbs":298,"./thumbnail.hbs":299,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924}],301:[function(e,t,n){"use strict";var r=e("../sticker/stickersall");t.exports=r.extend({where:{isPlaceholder:!0},idPrefix:"placeholder"})},{"../sticker/stickersall":304}],302:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../../../components/accordion-list/categories-director"),o=e("./stickers"),i=e("../../../components/mixins/create");t.exports=Backbone.mixin(r.extend({class:"sub-category stickers",CategoriesView:o,views:{},initialize:function(){this.createButtonMargin=31,this.tool=INKIVE.Tool.getInstance(),this.modalData=new INKIVE.ModalAdminSticker({isPlaceholder:!0}),this.mode="sticker",this.addButtonText="tool.admin.new_placeholder",this.createCallback=$.noop,r.prototype.initialize.call(this),this.render()},_render:function(){r.prototype._render.apply(this,arguments),this.$el.find(".wrapper").css("top",this.createButtonMargin+"px")},addNewEvent:function(e,t){this.modalData=new INKIVE.ModalAdminSticker({isPlaceholder:!0,data:t}),this.modal=INKIVE.Modal.modalWindow(this.modalData.getFormHtml(),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.new_placeholder",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.create_placeholder"),onClick:_.bind(this.createTemplate,this)}]})},toggleAcordionElement:function(e,t){var n=e.closest("dt"),o=n.closest(".wrapper"),i=this.createButtonMargin-n.position().top;r.prototype.toggleAcordionElement.apply(this,arguments),o.css("top",t?i+"px":this.createButtonMargin+"px")},extractData:function(e){return[]}}),i)},{"../../../components/accordion-list/categories-director":313,"../../../components/mixins/create":331,"./stickers":301,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],303:[function(e,t,n){"use strict";e("core-js/modules/es.function.name.js");var r=e("../../../customize/contents/sticker/stickers");t.exports=r.extend({callbackName:"callbackAdminStickers",getParams:function(){var e={from:this.from,limit:this.limit,where:{category:this.category.name,active:INKIVE.C.USER.IS_SUPER?0:1}};return this.from+=this.limit,e}})},{"../../../customize/contents/sticker/stickers":401,"core-js/modules/es.function.name.js":884}],304:[function(e,t,n){"use strict";e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.function.name.js");var r=e("../../../components/accordion-list/content"),o=e("../../../../../analytics/decorate");t.exports=o(e("../../../customize/analytics/stickers"),r.extend({apiCall:"search/stickers",dataName:"stickerCategories",callbackName:"callbackAdminStickers",where:{},idPrefix:"",initialize:function(e){this.category={id:0,name:"All"},r.prototype.initialize.call(this,e)},getScrollHeight:function(e){return e.closest(".tool-content").height()},getParams:function(){var e={from:this.from,limit:this.limit,where:$.extend(this.where,{active:INKIVE.C.USER.IS_SUPER?0:1})};return this.from+=this.limit,e},extractData:function(e){var t=this;return _.map(e,(function(e){var n=t.idPrefix?t.idPrefix+"-":"";return{id:n+="sticker-"+e.id,src:e.url,width:e.width,height:e.height,cls:parseInt(e.active)?"":" grayscale",isNocover:!0,data:{name:e.name,count:e.count,changeable:e.changeable,width:e.width,height:e.height}}}))}}))},{"../../../../../analytics/decorate":2,"../../../components/accordion-list/content":315,"../../../customize/analytics/stickers":398,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905}],305:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("./stickers"),o=e("../../../customize/contents/sticker/view"),i=e("../../../components/mixins/create");t.exports=Backbone.mixin(o.extend({CategoriesView:r,views:{},initialize:function(){this.createButtonMargin=31,this.tool=INKIVE.Tool.getInstance(),this.modalData=new INKIVE.ModalAdminSticker,this.mode="sticker",this.addButtonText="tool.admin.new_sticker",this.createCallback=$.noop,o.prototype.initialize.call(this),this.render()},_render:function(){o.prototype._render.apply(this,arguments),this.$el.find(".wrapper").css("top",this.createButtonMargin+"px")},addNewEvent:function(e,t){this.modalData=new INKIVE.ModalAdminSticker({data:t}),this.modal=INKIVE.Modal.modalWindow(this.modalData.getFormHtml(),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.new_sticker",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.create_sticker"),onClick:_.bind(this.createTemplate,this)}]})},toggleAcordionElement:function(e,t){var n=e.closest("dt"),r=n.closest(".wrapper"),i=this.createButtonMargin-n.position().top;o.prototype.toggleAcordionElement.apply(this,arguments),r.css("top",t?i+"px":this.createButtonMargin+"px")},extractData:function(e){return[]}}),i)},{"../../../components/mixins/create":331,"../../../customize/contents/sticker/view":402,"./stickers":303,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],306:[function(e,t,n){"use strict";var r=e("../../../templates/sub-categories");t.exports=r.extend({TemplatesView:e("./templates")})},{"../../../templates/sub-categories":551,"./templates":307}],307:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js");var r=e("../../../templates/templates-base"),o=e("../../../components/accordion-list/content");t.exports=r.extend({callbackName:"callbackAdminLayouts",appendThumbnails:o.prototype.appendThumbnails,render:function(){r.prototype.render.apply(this,arguments),this.$el.find("ul.thumbnail-wrapper").toggleClass("thumbnail-wrapper thumbnail-wrapper").css("padding-left","5px")},extractData:function(e){return _.compact(_.map(e,(function(e){var t=parseInt(e.format_width),n=parseInt(e.format_height)/t*255;if(e.id)return{id:"layout-"+e.id,src:e.url,width:255,height:n,isNocover:INKIVE.C.USER.IS_SUPER,cls:parseInt(e.active)?"":"grayscale",data:{count:e.count,set:e.set,num:e.num,orientation:e.orientation,text:e.text,active:e.active}}})))}})},{"../../../components/accordion-list/content":315,"../../../templates/templates-base":552,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-int.js":905}],308:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("./sub-categories"),o=e("../../../templates/view-base"),i=e("../../../components/mixins/create");t.exports=Backbone.mixin(o.extend({CategoriesView:r,views:{},addNewEvent:function(e,t){this.modalData=new INKIVE.ModalAdminLayout({data:t}),this.modal=INKIVE.Modal.modalWindow(this.modalData.getFormHtml(),{width:500,headerIcon:"icon-news",headerTitle:"modal.title.new_template",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.create_template"),onClick:_.bind(this.createTemplate,this)}]})},listContentToggleEvent:function(e){o.prototype.listContentToggleEvent.apply(this,arguments),e.stopPropagation()},initialize:function(){this.createButtonMargin=31,this.modalData=new INKIVE.ModalAdminLayout,this.mode="template",this.addButtonText="tool.admin.new_template",this.createCallback=$.noop,o.prototype.initialize.call(this),this.render(),this.$el.find(".wrapper").css("top",this.createButtonMargin+"px")},toggleAcordionElement:function(e,t){var n=e.closest("dt"),r=n.closest(".wrapper"),i=this.createButtonMargin-n.position().top;o.prototype.toggleAcordionElement.apply(this,arguments),r.css("top",t?i+"px":this.createButtonMargin+"px")},extractData:function(e){return[]}}),i)},{"../../../components/mixins/create":331,"../../../templates/view-base":555,"./sub-categories":306,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],309:[function(e,t,n){"use strict";var r=e("../components/accordion-list/director");t.exports=r.extend({class:"admin",views:{},Views:{templates:e("./contents/template/view"),backgrounds:e("./contents/background/view"),stickers:e("./contents/sticker/view"),banners:e("./contents/banners/view"),placeholders:e("./contents/placeholders/view"),migrate:e("./contents/migrate/view")},buttons:[{key:"templates",tag:"editor.templates",icon:"icon-news"},{key:"backgrounds",tag:"editor.backgrounds",icon:"icon-backgrounds"},{key:"stickers",tag:"editor.stickers",icon:"icon-hipster"},{key:"banners",tag:"editor.text_banners",icon:"icon-font_download"},{key:"placeholders",tag:"common.image_placeholders",icon:"icon-image"},{key:"migrate",tag:"tool.admin.migrate",icon:"icon-forward"}],render:function(){var e=this.template({class:this.class,buttons:this.buttons});this.$el.html(e)}})},{"../components/accordion-list/director":317,"./contents/background/view":295,"./contents/banners/view":297,"./contents/migrate/view":300,"./contents/placeholders/view":302,"./contents/sticker/view":305,"./contents/template/view":308}],310:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("../../../../../../src/components/sidebar-animation");var s=document.querySelector('.options button[data-action="download-video"]')||document.createElement("button"),a=document.querySelector('[data-action="download"].desygner-clear-button')||document.createElement("button"),l=!1;t.exports=Backbone.View.extend({render:function(){var e=this;return(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$el.html("<sidebar-animation></sidebar-animation>"),e.sidebarElement=document.querySelector("sidebar-animation"),e.sidebarElement.startRecordingButton=s,e.sidebarElement.downloadMainButton=a,e.sidebarElement.pageMoveTo=function(e){return INKIVE.EditorFacade.handle("page","move_to",{page_number:e+1,quiet:!0,save:!0})},e.sidebarElement.getPageId=function(e){var t=INKIVE.ProjectFacade.get("design",{page_number:e+1});return t?parseInt(t.design_id):null},e.sidebarElement.getPageNumber=function(e){var t=INKIVE.ProjectFacade.get("design",{design_id:e});return t?t.page_number-1:null},e.sidebarElement.currPage=function(){return INKIVE.Tool._current_design_id},e.sidebarElement.colors=function(){return INKIVE.C.WHITE_LABEL_CONFIGURATION.colors},e.sidebarElement.pagesLength=function(){return INKIVE.C.BOOK.num_pages},e.sidebarElement.translateKey=function(e){return INKIVE.TranslateHelper.translate("top_submenu.animation.".concat(e))},e.sidebarElement.debug=function(){return INKIVE.C.DEBUG},e.sidebarElement.getSelectedElements=function(){return INKIVE.EditorFacade.selectedElements||[]},t.abrupt("return",new Promise((function(t){e.sidebarElement.afterRender=t})));case 14:case"end":return t.stop()}}),t)})))()},registerHandlers:function(){var e=this;INKIVE.EditorFacade.on("page.move_to",(function(){return e.sidebarElement.pageHasChanged()})),INKIVE.EditorFacade.on("select",(function(t){return e.sidebarElement.onElementSelectionChanged(t)})),INKIVE.ProjectFacade.on("design.copied",(function(t){var n=t.status,r=t.design_id,o=t.based_on;return e.sidebarElement.onDesignCopied({status:n,basedOn:o,designId:r})}))},show:function(){var e=this;return(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=4;break}return t.next=3,e.render();case 3:e.registerHandlers();case 4:l=!0;case 5:case"end":return t.stop()}}),t)})))()}})},{"../../../../../../src/components/sidebar-animation":1084,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907}],311:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),t.exports={initializeUploadCheckOnce:function(){return window.Android},initializeUpload:function(){var e=this.loadListContent(this.uploadViewKey),t=this.$el.find('dt a[data-key="add"]'),n=_.debounce(_.bind((function(){this.showListContent(r),r.parent().addClass("active")}),this),600),r=this.$el.find('dt a[data-key="'+this.uploadViewKey+'"]');this.appBridge.on("ik.editor.photoupload",(function(t,r){var o=r.photoId;n(),e.views[o]=e.getNewThumbnail(),e.views[o].toggleProgressBar(!0),e.views[o].updateProgressBar(1),e.complete(o,r)})),t.on("click",_.bind((function(e){this.appBridge.callAndroid("photo_upload",{size_name:"o"})}),this))}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],312:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="tool-static-block" style="z-index: 3; position: relative; margin: 0 20px; background: #2B3031;">\n        <a class="btn btn-black btn-new-item">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"t",hash:{},data:o,loc:{start:{line:6,column:46},end:{line:6,column:54}}}))+"</a>\n      </div>\n"},3:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='        <dt>\n          <a class="btn btn-accordion" data-key="'+u("function"==typeof(s=null!=(s=p(n,"key")||(null!=t?p(t,"key"):t))?s:c)?s.call(l,{name:"key",hash:{},data:o,loc:{start:{line:12,column:49},end:{line:12,column:58}}}):s)+'" data-type="'+u("function"==typeof(s=null!=(s=p(n,"type")||(null!=t?p(t,"type"):t))?s:c)?s.call(l,{name:"type",hash:{},data:o,loc:{start:{line:12,column:71},end:{line:12,column:81}}}):s)+'">\n            ';return s=null!=(s=p(n,"icon")||(null!=t?p(t,"icon"):t))?s:c,a={name:"icon",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:12},end:{line:13,column:58}}},i="function"==typeof s?s.call(l,a):s,p(n,"icon")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n            ",s=null!=(s=p(n,"image")||(null!=t?p(t,"image"):t))?s:c,a={name:"image",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:12},end:{line:14,column:78}}},i="function"==typeof s?s.call(l,a):s,p(n,"image")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+'\n            <i class="collapse-accordion fa fa-chevron-up hidden"></i>\n            <i class="back fa fa-chevron-left hidden"></i>\n            <span class="name">'+u((p(n,"t")||t&&p(t,"t")||c).call(l,null!=t?p(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:17,column:31},end:{line:17,column:40}}}))+"</span>\n          </a>\n        </dt>\n"},4:function(e,t,n,r,o){return'<i class="'+e.escapeExpression(e.lambda(t,t))+' main"></i>'},6:function(e,t,n,r,o){var i=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="'+i(e.lambda(t,t))+' main" src="'+i((s(n,"route")||t&&s(t,"route")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"route",hash:{},data:o,loc:{start:{line:14,column:53},end:{line:14,column:65}}}))+'"/>'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d='<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <div class="tab-content '+e.escapeExpression("function"==typeof(s=null!=(s=u(n,"class")||(null!=t?u(t,"class"):t))?s:c)?s.call(l,{name:"class",hash:{},data:o,loc:{start:{line:3,column:28},end:{line:3,column:39}}}):s)+' accordion active">\n';return s=null!=(s=u(n,"add_button")||(null!=t?u(t,"add_button"):t))?s:c,a={name:"add_button",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:6},end:{line:8,column:21}}},i="function"==typeof s?s.call(l,a):s,u(n,"add_button")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(d+=i),d+'      <div class="wrapper">\n'+(null!=(i=u(n,"each").call(l,null!=t?u(t,"buttons"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:8},end:{line:20,column:17}}}))?i:"")+"      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],313:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("./director"),o=e("../mixins/scrollable");t.exports=Backbone.mixin(r.extend({views:{},template:e("./categories-director.hbs"),CategoriesView:null,loadListContent:function(e){var t=this.$el,n=t.find('dt a[data-key="'+e+'"]');return this.views[e]=new this.CategoriesView({el:function(){var e=$("<div></div>").addClass("image-list");n.length?e.insertAfter(n):t.find(".wrapper").append(e);return e}(),key:e}),this.views[e].on("open_new_view",_.partial(this.openSubView,n)),this.views[e]},listContentToggleEvent:function(e){r.prototype.listContentToggleEvent.apply(this,arguments),e.stopPropagation()},initialize:function(){_.bindAll(this,"_render","initScroll"),this.scrollRefresh=_.debounce(this.initScroll,2e3),r.prototype.initialize.apply(this,arguments)},toggleAcordionElement:function(e,t){this.$el.find(".antiscroll-wrap:first > .antiscroll-inner").scrollTop(0),this.toggleScroll(t),r.prototype.toggleAcordionElement.apply(this,arguments)},openSubView:function(e,t){if(e.children(".collapse-accordion").addClass("hidden"),e.children(".back").removeClass("hidden"),!INKIVE.C.IS_MOBILE){var n=this.getCategoryName(t),r=$('<span class="category">').text(": "+n);e.children(".category").remove(),e.append(r)}},closeView:function(){var e=this.$el.find(".wrapper dt.active").length;return e&&this.closeAccordion(),!e},closeSubView:function(e){var t=e.data("key");(!this.views[t].closeView||this.views[t].closeView())&&(e.children(".category").remove(),e.children(".collapse-accordion").removeClass("hidden"),e.children(".back").addClass("hidden"))},getCategoryName:function(e){return""},refreshView:function(){this.scrollRefresh()},render:function(){INKIVE.Modal.togglePageLoader(!0),this.loadButtons().then(this._render)},_render:function(e){INKIVE.Modal.togglePageLoader(!1),this.$el.html(this.template({class:this.class,buttons:e,add_button:this.addButtonText})),this.scrollRefresh(),e.length||(this.loadListContent(0),this.$el.find(".image-list").css({top:10,height:this.$el.closest('[role="tabpanel"]').height()}))},getScrollHeight:function(){return this.$el.closest(".image-list").height()},loadButtons:function(){var e=$.Deferred();return e.resolve([]),e.promise()}}),o)},{"../mixins/scrollable":334,"./categories-director.hbs":312,"./director":317,"core-js/modules/es.array.find.js":859}],314:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="antiscroll-wrap">\n  <div class="antiscroll-inner"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],315:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.filter.js");var o=r(e("../../../../../../../src/config/constants")),i=r(e("../mixins/scrollable")),s=r(e("../../../../factory/images"));t.exports=Backbone.mixin(Backbone.mixin(Backbone.View.extend({from:0,limit:10,apiCall:"",callbackName:"callbackImages",template:e("./content.hbs"),initialize:function(){_.bindAll(this,"masonryReload","render","loadData","onMoreData","closeView"),this.views={},this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,this.imagesFactory=s.default,this.scrollRefresh=_.debounce(_.bind(this.initScroll,this),2e3),this.render(),_.delay(_.bind((function(){this.initScroll(),this.initDataLoading()}),this),1e3)},initDataLoading:function(){var e=this.$el.find(".thumbnail-wrapper");this.end&&this.end(),this.tool.initScrollDetect(e,this.loadData)},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),INKIVE.Helpers.api(this.apiCall,"GET",this.getParams(),this.onMoreData)},onMoreData:function(e){var t=e&&e.data&&e.data.length>0,n=INKIVE.Helpers.getActiveTab(),r="admin"===n,o="text"===n;if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),t){var i=e.data.filter((function(e){return r||function(e){return"1"===e.active&&(o||"0"===e.isText)}(e)||function(e){return o&&"text"===e.type&&e.text}(e)}));this.appendThumbnails(i),this.repeat()}else this.end();this.scrollRefresh()},appendThumbnails:function(e){var t=_.bind(this.tool[this.callbackName],this.tool);this.tool.addThumbItem(this.$el,this.extractData(e),t),this.masonryReload(),this.canvas.showOverlayElements()},render:function(){this.$el.html(this.template()),this.$el.find(".antiscroll-inner").addThumb()},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)},getParams:function(){return{}},extractData:function(e){return e},openNewView:function(e,t,n){var r=$("<div></div>").addClass("image-list out right");r.insertAfter(this.$el),this.$el.addClass("out left"),this.views[e]=new t(_.extend({el:r},n)),this.trigger("open_new_view",n),_.defer((function(){r.removeClass("out right")}))},closeView:function(){return this.$el.removeClass("out left"),_.each(this.views,(function(e,t){"uploadThumbnail"!==t&&(e.$el.addClass("out right"),_.delay((function(){e.remove()}),1e3))})),this.views={},!0},getScrollHeight:function(e){return e.closest(".tool-content").height()-e.siblings(".btn.btn-accordion").height()},masonryReload:function(){this.$el.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),this.initScroll(),this.scrollRefresh()}}),Backbone.Events),i.default)},{"../../../../../../../src/config/constants":1090,"../../../../factory/images":127,"../mixins/scrollable":334,"./content.hbs":314,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],316:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="tool-static-block" style="z-index: 3; position: relative; margin: 0 10px; background: #2B3031;">\n    <a class="btn btn-black btn-new-item">'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"t",hash:{},data:o,loc:{start:{line:4,column:42},end:{line:4,column:50}}}))+"</a>\n  </div>\n"},3:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='    <dt>\n      <a class="btn btn-accordion" data-key="'+u("function"==typeof(s=null!=(s=p(n,"key")||(null!=t?p(t,"key"):t))?s:c)?s.call(l,{name:"key",hash:{},data:o,loc:{start:{line:10,column:45},end:{line:10,column:54}}}):s)+'" data-type="'+u("function"==typeof(s=null!=(s=p(n,"type")||(null!=t?p(t,"type"):t))?s:c)?s.call(l,{name:"type",hash:{},data:o,loc:{start:{line:10,column:67},end:{line:10,column:77}}}):s)+'">\n        ';return s=null!=(s=p(n,"icon")||(null!=t?p(t,"icon"):t))?s:c,a={name:"icon",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:8},end:{line:11,column:54}}},i="function"==typeof s?s.call(l,a):s,p(n,"icon")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"image")||(null!=t?p(t,"image"):t))?s:c,a={name:"image",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:8},end:{line:12,column:74}}},i="function"==typeof s?s.call(l,a):s,p(n,"image")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+'\n        <i class="collapse-accordion fa fa-chevron-up hidden"></i>\n        <i class="back fa fa-chevron-left hidden"></i>\n        <span class="name">'+u((p(n,"t")||t&&p(t,"t")||c).call(l,null!=t?p(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:15,column:27},end:{line:15,column:36}}}))+"</span>\n      </a>\n    </dt>\n"},4:function(e,t,n,r,o){return'<i class="'+e.escapeExpression(e.lambda(t,t))+' main"></i>'},6:function(e,t,n,r,o){var i=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="'+i(e.lambda(t,t))+' main" src="'+i((s(n,"route")||t&&s(t,"route")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"route",hash:{},data:o,loc:{start:{line:12,column:49},end:{line:12,column:61}}}))+'"/>'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d='<div class="tab-content '+e.escapeExpression("function"==typeof(s=null!=(s=u(n,"class")||(null!=t?u(t,"class"):t))?s:c)?s.call(l,{name:"class",hash:{},data:o,loc:{start:{line:1,column:24},end:{line:1,column:35}}}):s)+' accordion active">\n';return s=null!=(s=u(n,"add_button")||(null!=t?u(t,"add_button"):t))?s:c,a={name:"add_button",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:6,column:17}}},i="function"==typeof s?s.call(l,a):s,u(n,"add_button")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(d+=i),d+'  <div class="wrapper">\n'+(null!=(i=u(n,"each").call(l,null!=t?u(t,"buttons"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:4},end:{line:18,column:13}}}))?i:"")+"  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],317:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var r=e("../../../../app/decorate");t.exports=r(e("./app/director"),Backbone.View.extend({views:{},Views:{},uploadViewKey:"",buttons:[],template:e("./director.hbs"),events:{'click dt > a:not([data-key="add"])':"listContentToggleEvent"},listContentToggleEvent:function(e){var t=$(e.currentTarget),n=t.closest("dt");if(n.hasClass("active")){var r=!t.children(".back").is(".hidden");r&&this.closeSubView(t),r||function(){this.hideListContent(t)&&n.removeClass("active")}.call(this)}else(function(){this.showListContent(t),n.addClass("active")}).call(this)},initialize:function(){_.bindAll(this,"show","render","hideListContent","closeAccordion","openSubView")},render:function(){var e=this.template({class:this.class,buttons:this.buttons.filter((function(e){return!e.disabled}))});this.$el.html(e),this.initializeUpload()},initializeUpload:function(){var e=this.loadListContent(this.uploadViewKey),t=this.$el.find('dt a[data-key="'+this.uploadViewKey+'"]'),n=this.$el.find('dt a[data-key="add"]').parent(),r=_.debounce(_.bind((function(){this.showListContent(t),t.parent().addClass("active")}),this),600);n.fineUploaderS3(e.getUploaderOptions(n)).on("progress",e.progressEvent).on("error",e.errorEvent).on("cancel",e.cancelEvent).on("complete",e.completeEvent).on("submitted",_.bind((function(){r(),e.submittedEvent.apply(e,arguments)}),this)),this.beforeSubmitEvent&&n.on("click",this.beforeSubmitEvent)},show:function(){var e=new Date,t=this.$el.find(".tab-content."+this.class.split(" ").join(".")).length,n=e-this.showingTime<600;t||this.render(),t&&n&&this.closeAccordion(),this.showingTime=e},closeAccordion:function(){_.each(this.views,(function(e,t){var n=this.$el.find('dt a[data-key="'+t+'"]');n.closest("dt").removeClass("active"),this.hideListContent(n,t)}),this)},loadListContent:function(e,t){var n,r=t||this.$el.find('dt a[data-key="'+e+'"]');return this.views[e]=new this.Views[e]({el:(n=$("<div></div>").addClass("image-list content "+e),n.insertAfter(r),n)}),this.views[e].on("open_new_view",_.partial(this.openSubView,r)),this.views[e]},openSubView:function(e,t){e.children(".collapse-accordion").addClass("hidden"),e.children(".back").removeClass("hidden")},closeSubView:function(e){var t=e.data("key");(!this.views[t].closeView||this.views[t].closeView())&&(e.children(".collapse-accordion").removeClass("hidden"),e.children(".back").addClass("hidden"))},showListContent:function(e,t){t=void 0!==t?t:e.data("key"),this.toggleAcordionElement(e,!0),this.views[t]||this.loadListContent(t,e),this.views[t]&&this.views[t].refreshView&&this.views[t].refreshView()},hideListContent:function(e,t){if(t=t||e.data("key"),this.toggleAcordionElement(e,!1),!this.views[t].closeView)return!0;for(;!this.views[t].closeView(););return!0},toggleAcordionElement:function(e,t){var n=e.closest("dt"),r=n.closest(".wrapper");e.children("i").addClass("hidden",t),e.children(".main").toggleClass("hidden",t),e.children(".collapse-accordion").toggleClass("hidden",!t);var o=t?"-"+n.position().top+"px":0,i=t?n.closest('[role="tabpanel"]').height():"";r.css("top",o),n.height(i)}}))},{"../../../../app/decorate":5,"./app/director":311,"./director.hbs":316,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],318:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'      <div class="crown-premium-option"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="top-content"></div>\n<div class="import-button uploader progress-button">\n  <div class="drag-drop-file" data-key="'+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:3,column:40},end:{line:3,column:48}}}):s)+'-import">\n'+(null!=(i=u(n,"unless").call(a,null!=t?u(t,"canUseUpload"):t,{name:"unless",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:4},end:{line:6,column:15}}}))?i:"")+'    <i class="fa fa-upload"></i>\n    <div>'+c("function"==typeof(s=null!=(s=u(n,"dragdrop_text")||(null!=t?u(t,"dragdrop_text"):t))?s:l)?s.call(a,{name:"dragdrop_text",hash:{},data:o,loc:{start:{line:8,column:9},end:{line:8,column:26}}}):s)+'</div>\n  </div>\n</div>\n\n<div class="imported-elements">\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],319:[function(e,t,n){t.exports=["team","oxfordshire","asset-bank","matthey","britishschoolbahrain","brookhouse","knowledgegate","reddamhouse-s-africa","reddamhouse-au","reddamhouse-uk","acgschools-indonesia","acgschools-nz","australianschool","europeanschool","stjohnsinternational","slsschoolsgroup","iseschools-italy","kingscollege-pt","parkis","stpetersschool","sanpatricioschools","kensingtonschool","kingscollege-latvia","mirabalschool","sotogrande","iseschools-swiss","stgeorges-school","fulhamschool","kingscollege-spain","colegiosanmateo","bluevalleyschool","americaninstitute","kingscollege-panama","kingscollege-bahamas","cambridgecollegelima","colegioaltair","kingsinterhigh","inspired-edu","reddfordhouse"]},{}],320:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='      <div data-key="'+u("function"==typeof(s=null!=(s=p(n,"key")||(null!=t?p(t,"key"):t))?s:c)?s.call(l,{name:"key",hash:{},data:o,loc:{start:{line:4,column:21},end:{line:4,column:30}}}):s)+'">\n        ';return s=null!=(s=p(n,"icon")||(null!=t?p(t,"icon"):t))?s:c,a={name:"icon",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:8},end:{line:5,column:49}}},i="function"==typeof s?s.call(l,a):s,p(n,"icon")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n        ",s=null!=(s=p(n,"label")||(null!=t?p(t,"label"):t))?s:c,a={name:"label",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:8},end:{line:6,column:36}}},i="function"==typeof s?s.call(l,a):s,p(n,"label")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+'\n        <span class="name">'+u((p(n,"t")||t&&p(t,"t")||c).call(l,null!=t?p(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:7,column:27},end:{line:7,column:36}}}))+"</span>\n      </div>\n"},2:function(e,t,n,r,o){return'<i class="'+e.escapeExpression(e.lambda(t,t))+'"></i>'},4:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"t",hash:{},data:o,loc:{start:{line:6,column:18},end:{line:6,column:25}}}))+" "},6:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="filter-button">\n        <icon>\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" clip-rule="evenodd"\n              d="M10.25 7C10.25 4.92893 11.9289 3.25 14 3.25C15.8142 3.25 17.3275 4.53832 17.675 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H17.675C17.3275 9.46168 15.8142 10.75 14 10.75C11.9289 10.75 10.25 9.07107 10.25 7ZM14 4.75C15.2426 4.75 16.25 5.75736 16.25 7C16.25 8.24264 15.2426 9.25 14 9.25C12.7574 9.25 11.75 8.24264 11.75 7C11.75 5.75736 12.7574 4.75 14 4.75ZM2 6.25C1.58579 6.25 1.25 6.58579 1.25 7C1.25 7.41421 1.58579 7.75 2 7.75H8C8.41421 7.75 8.75 7.41421 8.75 7C8.75 6.58579 8.41421 6.25 8 6.25H2ZM2 16.25C1.58579 16.25 1.25 16.5858 1.25 17C1.25 17.4142 1.58579 17.75 2 17.75H5.32501C5.67247 19.4617 7.18578 20.75 9 20.75C11.0711 20.75 12.75 19.0711 12.75 17C12.75 14.9289 11.0711 13.25 9 13.25C7.18578 13.25 5.67247 14.5383 5.32501 16.25H2ZM6.75 17C6.75 18.2426 7.75736 19.25 9 19.25C10.2426 19.25 11.25 18.2426 11.25 17C11.25 15.7574 10.2426 14.75 9 14.75C7.75736 14.75 6.75 15.7574 6.75 17ZM15 16.25C14.5858 16.25 14.25 16.5858 14.25 17C14.25 17.4142 14.5858 17.75 15 17.75H21C21.4142 17.75 21.75 17.4142 21.75 17C21.75 16.5858 21.4142 16.25 21 16.25H15Z"\n              fill="#200E32" />\n          </svg>\n        </icon>\n        <span>'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.dropdown_title.image_filter",{name:"t",hash:{},data:o,loc:{start:{line:27,column:14},end:{line:27,column:59}}}))+"</span>\n      </div>\n"},8:function(e,t,n,r,o){return'      <div class="search-options-container">\n        <span data-popover="tooltip"></span>\n        <icon>\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" clip-rule="evenodd"\n              d="M10.25 7C10.25 4.92893 11.9289 3.25 14 3.25C15.8142 3.25 17.3275 4.53832 17.675 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H17.675C17.3275 9.46168 15.8142 10.75 14 10.75C11.9289 10.75 10.25 9.07107 10.25 7ZM14 4.75C15.2426 4.75 16.25 5.75736 16.25 7C16.25 8.24264 15.2426 9.25 14 9.25C12.7574 9.25 11.75 8.24264 11.75 7C11.75 5.75736 12.7574 4.75 14 4.75ZM2 6.25C1.58579 6.25 1.25 6.58579 1.25 7C1.25 7.41421 1.58579 7.75 2 7.75H8C8.41421 7.75 8.75 7.41421 8.75 7C8.75 6.58579 8.41421 6.25 8 6.25H2ZM2 16.25C1.58579 16.25 1.25 16.5858 1.25 17C1.25 17.4142 1.58579 17.75 2 17.75H5.32501C5.67247 19.4617 7.18578 20.75 9 20.75C11.0711 20.75 12.75 19.0711 12.75 17C12.75 14.9289 11.0711 13.25 9 13.25C7.18578 13.25 5.67247 14.5383 5.32501 16.25H2ZM6.75 17C6.75 18.2426 7.75736 19.25 9 19.25C10.2426 19.25 11.25 18.2426 11.25 17C11.25 15.7574 10.2426 14.75 9 14.75C7.75736 14.75 6.75 15.7574 6.75 17ZM15 16.25C14.5858 16.25 14.25 16.5858 14.25 17C14.25 17.4142 14.5858 17.75 15 17.75H21C21.4142 17.75 21.75 17.4142 21.75 17C21.75 16.5858 21.4142 16.25 21 16.25H15Z"\n              fill="#200E32" />\n          </svg>\n        </icon>\n      </div>\n'},10:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="'+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"key")||(null!=t?s(t,"key"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:o,loc:{start:{line:43,column:16},end:{line:43,column:25}}}):i)+'"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tab-content '+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:1,column:24},end:{line:1,column:32}}}):s)+' accordion active inner-tabs">\n  <div class="header-links">\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"tabs"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:9,column:13}}}))?i:"")+'  </div>\n  <div class="search-container">\n    <icon>\n      <svg>\n        <use xlink:href="#search"></use>\n      </svg>\n    </icon>\n    <input type="text" name="search" placeholder="'+c((u(n,"t")||t&&u(t,"t")||l).call(a,null!=t?u(t,"searchTitle"):t,{name:"t",hash:{},data:o,loc:{start:{line:17,column:50},end:{line:17,column:67}}}))+'"/>\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"has_filter"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:18,column:4},end:{line:40,column:11}}}))?i:"")+"  </div>\n"+(null!=(i=u(n,"each").call(a,null!=t?u(t,"tabs"):t,{name:"each",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:2},end:{line:44,column:11}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],321:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.object.keys.js");var a,l=r(e("../../../../factory/user-info")),c=r(e("./library-component")),u=r(e("../../../../factory/library")),d=r(e("../../../../factory/company")),p=r(e("../../../../factory/fonts")),h=r(e("../../../../facade/editor/editor")),m=r(e("../../embeded-import/view")),f=r(e("../../../../utils/humps")),g=r(e("./add-template.hbs")),b=r(e("../../../../facade/restrictions/decorate")),v=u.default.instance,y=d.default.instance;t.exports=(0,b.default)(e("./restrict/view"),Backbone.View.extend({commonTemplate:e("./common-component.hbs"),assetbankCompanies:e("./assetbank-companies.json"),events:{"click .header-links > div":"selectTabEvent","click .header-links > div[data-key]":"toggleTabViewEvent","click .search-container input:checkbox":"checkboxClickEvent","keyup .search-container input":"searchKeyupEvent","click .search-container input":"searchClickEvent","click .search-container .search-options-container":"searchClickEvent","click .search-container .filter-button":"searchClickEvent","click .search-container .search-button":"searchTriggerEvent","click .search-container button.upgrade":"upgradeEvent","click .search-container [data-id=apply-filter-button]":"applyFilterEvent","click .search-container .search-options > div":"selectSearchOptionEvent"},checkboxClickEvent:function(e){var t=$(e.currentTarget),n=$("#filter-option-assetbank");n.length&&(t.is(n)&&t.parents("ul").find("input:checkbox").prop("checked",!1),n.prop("checked",t.is(n))),t.parents("ul").find("input:checkbox:checked").length||e.preventDefault()},selectSearchOptionEvent:function(e){this.invokeChildSearch("selectSearchOptionEvent",e),this.setSelectedTabSearchOptionLabel()},searchClickEvent:function(e){$(e.currentTarget).is("[type=checkbox]")||this.invokeChildSearch("searchClickEvent",e)},searchOptionsEvent:function(e){this.invokeChildSearch("searchOptionsEvent",e)},searchKeyupEvent:function(e){"Enter"===e.key&&this.applyFilterEvent(e)},applyFilterEvent:function(){this.$el.find(".search-title").is(".hidden")&&this.$el.find("input[type=text]").toggleClass("searching"),this.$el.find(".filter-container").hide(),this.invokeChildSearch("search",this.$el.find("input[type=text]"))},searchTriggerEvent:function(e){var t=$(e.currentTarget).siblings("input");t.val()&&this.invokeChildSearch("search",t)},invokeChildSearch:function(e,t){this.selectedTab&&this.selectedTab.searchable&&this.selectedTab.view&&this.selectedTab.view[e]&&this.selectedTab.view[e](t)},toggleTabViewEvent:function(e){var t=$(e.currentTarget).data("key");this.tabs[t].view?(this.tabs[t].view.$el.show(),"add"===t&&this.embededImportView&&this.embededImportView.refresh()):this["init"+f.default.pascalize(t)+"View"](e)},selectTabEvent:function(e){var t=$(e.currentTarget),n=this.$el.find(">.tab-content>div:not(.header-links)");this.selectedTab=_.clone(this.tabs[t.data("key")]),t.siblings().removeClass("active"),this.$el.find(".library").hide(),n.hide(),this.updateSearchContainer(),n.filter("."+this.selectedTab.key).show(),this.refreshView(this.selectedTab.key),t.addClass("active"),h.default.trigger("switch_tab",{panel:INKIVE.Helpers.getActiveTab(),tab:this.selectedTab.key})},show:function(){var e=this;function t(){this.isAlreadyThere&&(this.isAlreadyThere()?this.refresh():this.render())}this.companyData?t.call(this):y.getCompany().then((function(n){e.companyData=n,t.call(e)}))},initialize:function(){this.isCompanyProject=INKIVE.Helpers.projectIsLinkedToRestrictions(),this.tabs=JSON.parse(JSON.stringify(e("./tabs.json"))),this.isCompanyProject?this.tabs.library.tag="tool.general.company":this.tabs.user_library&&(this.tabs.user_library.type=[]),l.default.get().then(_.bind((function(e){function t(t){return _(e.roles).contains(t)}this.isPro=t("ROLE_PRO"),this.isBusiness=t("ROLE_BUSINESS"),this.hasContentPlan=t("ROLE_CONTENT2"),this.canUseUpload=t("ROLE_PREMIUM"),this.canUseFilters=this.canUseUpload||INKIVE.Helpers.projectIsLinkedToRestrictions(),this.canUseLibrary=t("ROLE_LIBRARY")||INKIVE.Helpers.projectIsLinkedToRestrictions(),t("ROLE_COMPANY_MEMBER")&&this.isCompanyProject&&(this.canUseUpload=this.canUseLibrary=!0)}),this))},render:function(){var e=INKIVE.C.WHITE_LABEL_CONFIGURATION||{};this.domain=this.companyData.domain,this.workspace=INKIVE.C.WORKSPACE,this.isAssetBankCompany=this.assetbankCompanies.includes(this.companyData.domain),this.isKW=void 0!==INKIVE.C.USER.kw_uid,this.isEnterprise="enterprise"===e.subscription_plan,this.parentCompany=this.workspace&&e.parent_company;var t=_.include(["image","icon","search"],this.type)&&!this.isKW;this.companyData&&22047===this.companyData.id||(this.tabs.gradients.type=[]),this.$el.html(this.commonTemplate({type:this.type,tabs:_.filter(this.tabs,(function(e){return _.contains(e.type,this.type)}),this),has_filter:t})),this.$el.find(".search-container").append(),this.$headerLinks=this.$el.find(".header-links > div")},refresh:function(){for(var e in this.tabs)this.refreshView(e);this.embededImportView&&this.embededImportView.refresh()},refreshView:function(e){this.tabs[e].view&&this.tabs[e].view.refresh&&this.tabs[e].view.refresh()},initAddView:function(){var e=(0,g.default)({type:this.type,dragdrop_text:INKIVE.TranslateHelper.translate("tool.general.dragdrop."+this.type),isDesygner:!this.isCompanyProject,canUseUpload:this.canUseUpload||"image"===this.type});this.$el.find(".tab-content > .add").html(e),this.embededImportView=new m.default({canUse:this.canUseUpload}),this.embededImportView.loadImportedListContent(this.type,this.$el.find('[data-key="'+this.type+'-import"]'))},initStockView:function(){var e=this.$el.find(".tab-content > .stock");this.registerTabView("stock",new this.StockView({el:e[0],isAssetBankCompany:this.isAssetBankCompany,isKW:this.isKW,initSearch:_.bind(this.initSearchOptions,this)}))},initLibraryView:function(e){var t=this.$el.find(".tab-content > .library");t.length&&(this.registerTabView("library",new c.default({el:t})),this.tabs.library.view.initLibraryView(this.canUseLibrary,this.type,{assetsDomains:this.parentCompany?[this.domain,this.parentCompany]:[this.domain],domain:this.domain,librarySource:e.src,parentDomain:this.parentCompany,refreshLibrary:e.refresh,workspace:this.workspace}),t.show())},initUserLibraryView:function(e,t){var n=this.$el.find(".tab-content > .user_library");n.length&&(this.registerTabView("user_library",new c.default({el:n,librarySouce:"member",refresh:t&&t.refresh})),this.tabs.user_library.view.initLibraryView(this.canUseLibrary,this.type,{librarySource:"member"},!e),e&&$(document).on("addedAssets",_.bind(this.refreshUserLibrary,this)),n.show())},refreshUserLibrary:function(e){var t=e.originalEvent&&e.originalEvent.detail;_.intersection(t,this.memberType).length&&(this.tabs.user_library.view=null,this.initUserLibraryView()),_.contains(t,"brand")&&(v.cache.member=null,p.default.initialize().then((function(){var e=INKIVE.Tool.getInstance();$("#font-menu-list").remove(),e.editor.canvas.clearSelection()})))},refreshSelectedLibrary:function(e){var t={refresh:!0};"member"===e?this.initUserLibraryView(null,t):this.initLibraryView(t)},updateSearchContainer:function(){this.selectedTab.searchable&&this.displaySearchContainer(this.$el.find(".search-container"))},displaySearchContainer:function(e){var t=e.find("input");t.attr("autocomplete","off"),e.show(),e.find(".search-options, .filter-container").hide(),this.setSelectedTabSearchTitle(),t.attr("placeholder",this.selectedTab.searchTitle),t.val(""),this.selectedTab.view&&this.selectedTab.view.getSearchOptions&&this.initSearchOptions()},initSearchOptions:(a=(0,s.default)(o.default.mark((function e(){var t,n,r,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedTab.view&&(!this.searchLoaded||["mns"].includes(this.selectedTab.key))){e.next=2;break}return e.abrupt("return");case 2:return t=this.$el.find(".search-container:first").addClass("disabled"),this.selectedTabView=this.selectedTab.view,this.searchLoaded=!0,e.next=7,INKIVE.DesygnerApi.get("business/marketplace/providers");case 7:n=e.sent,y.getCompanyItems("is_legacy").then((function(e){INKIVE.C.IS_DESYGNER_BUSINESS=!1===e})),this.selectedTabView.canUseLibrary=this.canUseLibrary,this.selectedTabView.canUseFilters=this.canUseFilters,this.types=this._getSearchTypes(),this.providers=this._getProviders(n),r=this.selectedTabView.getSearchOptions(this.providers,this.types).hide(),s=[].concat((0,i.default)(this._getSelectedProviders()),(0,i.default)(this._getSelectedTypes())).map((function(e){return"input#filter-option-".concat(e)})).join(),t.append(r),r.is(".filter-container")||this.setSelectedTabSearchOptionLabel(),t.removeClass("disabled"),r.find(s).trigger("click"),this.delegateEvents();case 20:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),_getSelectedTypes:function(){var e=["free"],t=this.companyData.allows_user_upselling;if(t){var n=e.indexOf("free");e.splice(n,1)}return this.isPro&&this.isBusiness&&!t||e.push("upsale"),(this.isPro||this.hasContentPlan)&&e.push("plan"),e},_getSelectedProviders:function(){var e=["photodexia","sstk"];return this.canUseFilters&&e.push("unsplash","pixabay"),e},_getProviders:function(e){return"icon"===this.type&&delete e.unsplash,this.isKW&&(delete e.google,delete e.pixabay),Object.keys(e).map((function(e){return{key:e,label:INKIVE.TranslateHelper.translate("tool.search.providers."+e)}}))},_getSearchTypes:function(){var e=["free","plan","upsale","oneoff"],t=this.companyData.allows_user_upselling,n="enterprise"===INKIVE.C.WHITE_LABEL_CONFIGURATION.subscription_plan;if(!this.isPro){var r=e.indexOf("plan");e.splice(r,1)}if(!t||this.hasContentPlan||this.isBusiness&&!n){var o=e.indexOf("upsale");e.splice(o,1)}return e.map((function(e){return{key:e,label:INKIVE.TranslateHelper.translate("tool.search.types."+e)}}))},setSelectedTabSearchOptionLabel:function(){var e=this.selectedTab.view.getSearchOptions(this.providers,this.types),t=e.find(".selected"),n=this.$el.find(".search-options-container");t.length||(t=e.find(":first"),$('<i class="desygner-icon-check">').prependTo(t.addClass("selected")));var r=t.find("span").html();n.find(">span").html(r).attr("data-original-title",r),e.find(">div").length>1&&n.css("display","grid").parent().addClass("add-search-options"),INKIVE.Helpers.initTooltips(n)},setSelectedTabSearchTitle:function(){var e=this.selectedTab.key;this.selectedTab.searchTitle=INKIVE.TranslateHelper.translate("tool.search."+e,{type:INKIVE.TranslateHelper.translate("tool.library."+this.type),origin:INKIVE.TranslateHelper.translate("tool.general."+(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESIGN?"my_library":"company"))})},registerTabView:function(e,t){this.tabs[e].view=t,this.selectedTab.key===e&&(this.selectedTab.view=t,this.tabs[e].view.getSearchOptions&&this.initSearchOptions())},upgradeEvent:function(){INKIVE.Helpers.displaySubscriptionModal()},checkEmptyLibrary:function(e){var t=0,n=0,r=this.$headerLinks.addClass("loading"),o=this.$headerLinks.filter("[data-key=user_library]");o.length||(o=this.$headerLinks.filter("[data-key=library]")),h.default.on("library.root",(function o(i){t+=i.content.length,++n>1&&(t||e.trigger("click"),h.default.off("library.root",o),r.removeClass("loading"))})),o.trigger("click")}}))},{"../../../../facade/editor/editor":91,"../../../../facade/restrictions/decorate":114,"../../../../factory/company":122,"../../../../factory/fonts":125,"../../../../factory/library":128,"../../../../factory/user-info":161,"../../../../utils/humps":615,"../../embeded-import/view":432,"./add-template.hbs":318,"./assetbank-companies.json":319,"./common-component.hbs":320,"./library-component":323,"./restrict/view":324,"./tabs.json":327,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.string.includes.js":915}],322:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"premium"},3:function(e,t,n,r,o){return"disabled"},5:function(e,t,n,r,o){var i=e.lambda,s=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li class="filter-line">\n              <p class="desygner-custom-check">\n                <label>\n                  '+s(i(null!=t?a(t,"label"):t,t))+'\n                  <input type="checkbox" name="'+s(i(null!=t?a(t,"key"):t,t))+'" id="filter-option-'+s(i(null!=t?a(t,"key"):t,t))+'"/>\n                  <span class="checkmark"></span>\n                </label>\n              </p>\n            </li>\n'},7:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li class="filter-line assetbank">\n              <p class="desygner-custom-check">\n                <label>\n                  '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.images.assetbank",{name:"t",hash:{},data:o,loc:{start:{line:23,column:18},end:{line:23,column:47}}}))+'\n                  <input type="checkbox" name="assetbank" id="filter-option-assetbank"/>\n                  <span class="checkmark"></span>\n                </label>\n              </p>\n            </li>\n'},9:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button data-action="apply-filter-button" class="general-button" data-id="apply-filter-button">\n      <span>Apply\x3c!-- '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.apply",{name:"t",hash:{},data:o,loc:{start:{line:83,column:22},end:{line:83,column:47}}}))+"--\x3e</span>\n    </button>\n"},11:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="upgrade">\n      <i class="fa fa-rocket"></i>\n      <span>'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.upgrade_to_pro",{name:"t",hash:{},data:o,loc:{start:{line:90,column:12},end:{line:90,column:46}}}))+"</span>\n    </button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="filter-container '+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isPremium"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:29},end:{line:1,column:60}}}))?i:"")+'" id="filter-'+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:1,column:73},end:{line:1,column:81}}}):s)+'">\n  <div class="filters-box">\n\n    <div class="filters-group '+(null!=(i=u(n,"unless").call(a,null!=t?u(t,"isPremium"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:30},end:{line:4,column:70}}}))?i:"")+'">\n      <h2 class="filters-title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.sourced_from",{name:"t",hash:{},data:o,loc:{start:{line:5,column:32},end:{line:5,column:64}}}))+'</h2>\n      <div class="checkbox-container providers-filter">\n        <ul>\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"providers"):t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:10},end:{line:18,column:19}}}))?i:"")+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isAssetBankCompany"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:10},end:{line:29,column:17}}}))?i:"")+'        </ul>\n      </div>\n    </div>\n\n    <div class="filters-group '+(null!=(i=u(n,"unless").call(a,null!=t?u(t,"isPremium"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:34,column:30},end:{line:34,column:70}}}))?i:"")+'">\n      <h2 class="filters-title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.orientation",{name:"t",hash:{},data:o,loc:{start:{line:35,column:32},end:{line:35,column:63}}}))+' </h2>\n      <div class="checkbox-container orientation-filter">\n        <ul>\n          <li class="filter-line">\n            <p class="desygner-custom-check">\n              <label>\n                '+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.portrait",{name:"t",hash:{},data:o,loc:{start:{line:41,column:16},end:{line:41,column:44}}}))+'\n                <input type="checkbox" name="portrait" id="portrait" checked="checked"/>\n                <span class="checkmark"></span>\n              </label>\n            </p>\n          </li>\n          <li class="filter-line">\n            <p class="desygner-custom-check">\n              <label>\n                '+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.landscape",{name:"t",hash:{},data:o,loc:{start:{line:50,column:16},end:{line:50,column:45}}}))+'\n                <input type="checkbox" name="landscape" id="landscape" checked="checked"/>\n                <span class="checkmark"></span>\n              </label>\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="filters-group '+(null!=(i=u(n,"unless").call(a,null!=t?u(t,"isPremium"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:60,column:30},end:{line:60,column:70}}}))?i:"")+'">\n      <h2 class="filters-title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.type",{name:"t",hash:{},data:o,loc:{start:{line:61,column:32},end:{line:61,column:56}}}))+' </h2>\n      <div class="checkbox-container types-filter">\n        <ul>\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"types"):t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:64,column:10},end:{line:74,column:19}}}))?i:"")+"        </ul>\n      </div>\n    </div>\n\n  </div>\n\n"+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isPremium"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:81,column:2},end:{line:85,column:9}}}))?i:"")+"\n"+(null!=(i=u(n,"unless").call(a,null!=t?u(t,"isPremium"):t,{name:"unless",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:87,column:2},end:{line:92,column:13}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],323:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var o=r(e("../../library/contents/folders")),i=r(e("../../library/helper"));t.exports=Backbone.mixin(Backbone.View.extend({events:{"click .library-link a.empty":"goToLibraryEvent"},goToLibraryEvent:_.partial(Backbone.Events.trigger,"go_to_libray"),initialize:function(){_.bindAll(this,"initHelper")},initLibraryView:function(e,t,n){e?(n=Object.assign({el:this.$el},n),this.folderLibraryView=new o.default(n),n.refreshLibrary?this.folderLibraryView.refresh():this.folderLibraryView.loadData(t)):this.initHelper(),INKIVE.Modal.togglePageLoader(!1)},refresh:function(){this.folderLibraryView&&this.folderLibraryView.refresh()},initHelper:function(){if(this.$el.siblings(".search-container").hide(),!this.$el.find(".helper-view").length){var e=$('<div class="helper-view">');this.$el.append(e),this.helperView=new i.default({el:e}),this.helperView.on("toggle",_.bind((function(e){this.$el.find(".wrapper").toggleClass("blur",e)}),this)),this.helperView.toggle(!0)}}}),Backbone.Events)},{"../../library/contents/folders":474,"../../library/helper":482,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.assign.js":892}],324:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.function.bind.js");var i,s=r(e("@babel/runtime/helpers/asyncToGenerator"));t.exports={render:(i=(0,s.default)(o.default.mark((function t(){var n,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e("../../../../../facade/restrictions/restrictions"),r=_.bind(n.isFunctionalityAllowed,n),t.next=4,n.initialize();case 4:_.each(this.tabs,(function(e){switch(e.key){case"add":e.type=r("icon_add")?e.type:_.without(e.type,"icon"),e.type=r("video_add")?e.type:_.without(e.type,"video"),e.type=r("function_use_own_images")?e.type:_.without(e.type,"image");break;case"stock":e.type=r("function_use_desygner_vector")?e.type:_.without(e.type,"icon"),"image"===this.type&&(e.searchable=r("function_use_web_images"),e.type=r("function_use_desygner_background")||e.searchable?e.type:_.without(e.type,"image"));break;case"library":e.type=r("function_use_asset_vector")?e.type:_.without(e.type,"icon"),e.type=r("function_use_asset_images")?e.type:_.without(e.type,"image");break;case"user_library":e.type=r("function_use_own_images")?e.type:_.without(e.type,"image");break;case"mns":e.type=r("image_add")||r("image_content")?e.type:_.without(e.type,"kwls")}}),this),this._parentObject.prototype.render.call(this);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}},{"../../../../../facade/restrictions/restrictions":118,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.function.bind.js":883}],325:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../../components/accordion-list/categories-director");t.exports=r.extend({selectedCategory:"all",views:{},template:e("./stock-template.hbs"),events:_.extend({"click .search-close":"closeSearchEvent","click .categories-container .category-list .category-element":"selectCategoryEvent","click .categories-container .category-title":"toggleCategoryDropdownEvent","click .categories-container .category-title + icon":"toggleCategoryDropdownEvent"},r.prototype.events),clickAwayFromSearchOptions:function(e){if(!this.isHidden&&!$(e.target).parents(".search-container").length){if(this.$searchOptions){this.$searchOptions.hide&&this.$searchOptions.hide();var t=this.$searchOptions.find('[data-action="apply-filter-button"]');t&&t.click()}this.isHidden=!0}},toggleCategoryDropdownEvent:function(){var e=this.$el.find(".category-list");e.toggleClass("hidden"),e.antiscroll({autoHide:!1}),e.is(".hidden")||$(document).on("mouseup",(function t(n){$(n.target).parents(".categories-container").length||(e.addClass("hidden"),$(document).off("mouseup",t))}))},searchClickEvent:function(e){this.isHidden=!1,this.$searchOptions&&this.$searchOptions[$(e.target).is("input")?"hide":"toggle"]()},selectCategoryEvent:function(e){var t=$(e.currentTarget),n=t.closest(".category-list");n.addClass("hidden"),n.find(".category-element").removeClass("selected"),t.toggleClass("selected"),this.$el.find(".category-title").html(t.html()),t.addClass("selected"),this.loadListContent(t.data("key"))},closeSearchEvent:function(e){var t=$(e.currentTarget).parents(".search-title"),n=t.siblings(".categories-container"),r=n.find(".category-element:first-child").html(),o=this.$el.closest(".tab-content").find(".search-container input");t.addClass("hidden"),this.$searchOptions&&this.$searchOptions.hide(),n.removeClass("hidden"),n.find(".category-title").html(r),o.val(""),o.toggleClass("searching"),this.$el.find(".thumbnail-wrapper").empty().css("height",""),this.hasDefaults&&this.loadListContent("all")},initialize:function(e){document.querySelector("body").addEventListener("click",this.clickAwayFromSearchOptions.bind(this)),document.querySelector("#svgroot").addEventListener("click",this.clickAwayFromSearchOptions.bind(this)),_.bindAll(this,"refreshAntiscroll"),this.tool=INKIVE.Tool.getInstance(),this.hasDefaults=!e.simplified,r.prototype.initialize.call(this),this.render()},_render:function(e){INKIVE.Modal.loaderClose(this.$el),this.$el.html(this.template({categories:this.hasDefaults&&e})),this.hasDefaults&&(this.loadListContent("all"),this.initCategoryGroup()),this.focusSearchInput()},focusSearchInput:function(){document.querySelector(".tab.active .search-container > input[name=search]").focus()},loadListContent:function(e){return this.selectedCategory=this.cid+e,this.views[this.cid+e]=new this.CategoriesView({el:this.$el.find(".image-list"),key:e}),this.views[this.cid+e]},initCategoryGroup:function(){var e=this.$el.find(".category-list");this.tool.initScroll(e),e.addClass("hidden")},refreshAntiscroll:function(){this.$el.find(".antiscroll-inner").width(""),this.$el.find(".antiscroll-wrap").antiscroll({horizontal:!1})},refresh:function(){this.refreshAntiscroll(),_.each(this.views,(function(e){function t(){e.$el.find(".antiscroll-inner").trigger("scroll")}e.masonryReload(),t(),_.delay(t,2e3)})),this.focusSearchInput()},getRandomSearchValue:function(){var e=["landscape","autumn OR spring","summer holidays"];return e[Math.floor(Math.random()*e.length)]}})},{"../../components/accordion-list/categories-director":313,"./stock-template.hbs":326,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],326:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="categories-container">\n    <span class="category-title">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.general.all",{name:"t",hash:{},data:o,loc:{start:{line:17,column:33},end:{line:17,column:57}}}))+'</span>\n    <icon>\n      <svg>\n        <use xlink:href="#editor-chevron-left"></use>\n      </svg>\n    </icon>\n    <div role="tabpanel" class="no-resizable category-list antiscroll-wrap">\n        <div class="antiscroll-inner">\n          <div data-key="all" class="category-element">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.general.all",{name:"t",hash:{},data:o,loc:{start:{line:25,column:55},end:{line:25,column:79}}}))+"</div>\n"+(null!=(i=c(n,"each").call(s,null!=t?c(t,"categories"):t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:10},end:{line:28,column:19}}}))?i:"")+"        </div>\n      </div>\n  </div>\n"},2:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="category-element" data-key="'+l("function"==typeof(i=null!=(i=c(n,"key")||(null!=t?c(t,"key"):t))?i:a)?i.call(s,{name:"key",hash:{},data:o,loc:{start:{line:27,column:52},end:{line:27,column:61}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"tag")||(null!=t?c(t,"tag"):t))?i:a)?i.call(s,{name:"tag",hash:{},data:o,loc:{start:{line:27,column:63},end:{line:27,column:70}}}):i)+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="stock-content">\n  <div class="search-title hidden">\n    <span>\n      '+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.search.results",{name:"t",hash:{},data:o,loc:{start:{line:4,column:6},end:{line:4,column:33}}}))+'\n    </span>\n    <div class="search-close pull-right">\n      <icon>\n        <svg>\n          <use xlink:href="#cross"></use>\n        </svg>\n      </icon>\n    </div>\n  </div>\n\n'+(null!=(i=a(n,"if").call(s,null!=t?a(t,"categories"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:2},end:{line:32,column:9}}}))?i:"")+'\n  <div class="image-list">\n    <div class="antiscroll-wrap">\n      <div class="antiscroll-inner">\n        <ul class="thumbnail-wrapper"></ul>\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],327:[function(e,t,n){t.exports={add:{key:"add",tag:"tool.general.add",type:["text","image","template"],searchable:!0},stock:{key:"stock",tag:"tool.general.stock",type:["icon","image"],searchable:!0},banners:{key:"banners",tag:"tool.general.banners",type:["text"]},grid:{key:"grid",tag:"tool.customize.grids",type:["template"]},library:{key:"library",tag:"tool.general.my_library",type:["text","icon","image","logo","video"]},kwls:{key:"kwls",tag:"tool.general.listings",type:["kwls"],searchable:!0},mns:{key:"mns",tag:"tool.general.snapshots",type:["kwls"],searchable:!0},mls:{key:"mls",tag:"tool.general.listings",type:["mls"],searchable:!0},redfin:{key:"redfin",tag:"tool.general.listings",type:["redfin"],searchable:!1},user_library:{key:"user_library",tag:"tool.general.my_library",type:["text","icon","image","logo","video"]},images:{key:"images",tag:"editor.images",type:["search"],searchable:!0},icons:{key:"icons",tag:"editor.icons",type:["search"],searchable:!0},gradients:{key:"gradients",tag:"tool.gradients.gradients",type:["image"],searchable:!1}}},{}],328:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"t",hash:{},data:o,loc:{start:{line:3,column:22},end:{line:3,column:30}}}))+"</h3>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d='<div class="helper-display">\n  <div class="helper-content">\n    ';return s=null!=(s=u(n,"sub_title")||(null!=t?u(t,"sub_title"):t))?s:c,a={name:"sub_title",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:3,column:49}}},i="function"==typeof s?s.call(l,a):s,u(n,"sub_title")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(d+=i),d+"\n    "+(null!=(i="function"==typeof(s=null!=(s=u(n,"content")||(null!=t?u(t,"content"):t))?s:c)?s.call(l,{name:"content",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:19}}}):s)?i:"")+"\n  </div>\n</div>\n\n"},useData:!0})},{"hbsfy/runtime":1024}],329:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var o=r(e("plyr"));t.exports=Backbone.mixin(Backbone.View.extend({template:e("./template.hbs"),displayDelay:500,data:{title:"",sub_title:null,content:"",button:"fa fa-info"},toggle:function(e){_.delay(_.bind(this._toggle,this,e),this.displayDelay)},_toggle:function(e){this.$el.toggleClass("show",e),this.trigger("toggle",this.$el.hasClass("show"))},initialize:function(){_.bindAll(this,"toggle"),this.$el.addClass("helper")},render:function(e){e=_.extend({},this.data,e),this.$el.html(this.template(e)),this.setElementStyle()},setElementStyle:function(){var e=this.$el.closest(".tool-content"),t=e.outerWidth(),n=e.outerHeight();e.offset();this.$el.addClass("helper").css({height:n+"px",width:t+"px"}),this.$el.find(".helper-content").css({height:n+"px",width:t+"px"})},openVideoContent:function(e,t){t=t||{},INKIVE.Modal.modalWindow('<div class="plyr-player" data-type="youtube" data-video-id="'+e+'"></div>',_.extend({headerTitle:"general.close"},t)),o.default.setup(document.querySelector(".plyr-player"),{controls:[]})}}),Backbone.Events)},{"./template.hbs":328,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,plyr:1044}],330:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),t.exports={initializeUploadCheckOnce:function(){return window.Android},initializeUpload:function(){this.$el.find(".uploader.progress-button").on("click",_.bind((function(e){this.appBridge.callAndroid("photo_upload",{size_name:"o"})}),this))}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],331:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../../../editor-mode-manager");t.exports={events:{"click .btn-new-item":"addNewEvent"},addNewEvent:function(){},createTemplate:function(){this.$el.find(".btn-new-item").addClass("disabled"),this.modalData.saveForm(_.bind(this.onFormSaved,this))},onFormSaved:function(e,t){if(e&&t.id){this.modal.close(),r.setMode(this.mode,t);var n=this.extractData([t]),o=_.bind(this.createCallback,this.tool);this.tool.addThumbItem(this.$el,n,o,"prepend")}else this.$el.find(".btn-new-item").removeClass("disabled")},render:function(){this.$el.html(this.template({placeholder:this.filterPlaceholder,add_button:this.addButtonText})),this.$el.find(".antiscroll-inner").addThumb()}}},{"../../../editor-mode-manager":204,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],332:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.index-of.js"),t.exports={draggableOpacity:.7,outline:0,mouseDownEvent:function(e){},mouseMoveEvent:function(e){},mouseUpEvent:function(e){},clickEvent:function(e){},mouseDown:function(e){this.$draggableClone=this.createDraggableClone(),this.$draggable.css("outline",this.outline),this.uppdateDraggableCloneDataPosition(e),this.bindDragDrop(),this.mouseDownEvent(e)},createDraggableClone:function(){var e=this.$draggable.get(0).getBoundingClientRect(),t=this.$draggable.clone(!0).off();return $("#draggingObject").remove(),t.attr("id","draggingObject"),t.attr("style",this.$draggable.attr("style")),t.css({position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,"z-index":5e3,opacity:"0"}),t.find(".tooltip").remove(),t.find("svg *").each((function(){var e=$(this).attr("id");e&&$(this).attr("id","clone-"+e)})),$("body").append(t),t},uppdateDraggableCloneDataPosition:function(e){var t=this.$draggable.get(0).getBoundingClientRect(),n=this.getCursorPosition(e);this.$draggableClone.data("offset",{x:(n.x-t.left)/t.width,y:(n.y-t.top)/t.height})},bindDragDrop:function(){$(window).unbind("mousemove touchmove",this.mouseMove),$(window).unbind("mouseup touchend touchcancel",this.mouseUp),$(window).on("mousemove touchmove",this.mouseMove),$(window).on("mouseup touchend touchcancel",this.mouseUp)},mouseMove:function(e){var t=_.partial(this.processDraggable,e);$("#draggingObject").length&&_.defer(t)},mouseUp:function(e){e.preventDefault();var t=$("#canvas-panel").offset();this.$draggableClone.length&&(this.getCursorPosition(e).x>t.left?this.mouseUpEvent(e):this.$draggableClone.data("dragging")||this.clickEvent(e),this.endDragging())},endDragging:function(){this.$draggable.css("outline","none"),this.$draggableClone.remove(),$(window).unbind("mousemove touchmove",this.mouseMove),$(window).unbind("mouseup touchend",this.mouseUp)},processDraggable:function(e){var t=this.$draggableClone.data("offset");if(this.$draggableClone.length&&t){var n=this.$draggable.get(0).getBoundingClientRect(),r=function(){var r=this.getCursorPosition(e);return{x:r.x-n.width*t.x,y:r.y-n.height*t.y}}.call(this),o=Math.abs(r.x-n.left),i=Math.abs(r.y-n.top),s=Math.round(Math.sqrt(o*o+i*i));(function(){var e=o<122.5,t=s<80,i=t?n.left:r.x,a=e?n.top:r.y;this.$draggableClone.css("left",i),this.$draggableClone.css("top",a),this.$draggableClone.css("opacity",t&&e?"0":this.draggableOpacity)}).call(this),function(){var e=1;s>130&&(e+=(s-130)/170)>2&&(e=2);this.$draggableClone.css("transform","scale("+e+")")}.call(this),o>122.5&&e.preventDefault(),s>10&&this.$draggableClone.data("dragging",!0),this.mouseMoveEvent(e)}},getCursorPosition:function(e){if(0===e.type.indexOf("touch")){var t=e.originalEvent?e.originalEvent.changedTouches:e.changedTouches,n={x:t&&t[0].clientX,y:t&&t[0].clientY};return e.clientX=n.x,e.clientY=n.y,n}return{x:e.clientX,y:e.clientY}},initDraggable:function(){_.bindAll(this,"mouseMove","mouseUp","processDraggable")}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865}],333:[function(e,t,n){"use strict";e("core-js/modules/es.array.last-index-of.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var r=e("../thumbnail/upload"),o=INKIVE.Helpers.getBucketUrl(INKIVE.C.BUCKET);o=o.substr(0,o.lastIndexOf("/")),t.exports={uploadingThumbs:{},uploadAttempt:{},files:{},uploadPath:"/uploads",uploadConfig:{request:{endpoint:o,accessKey:INKIVE.C.UPLOAD_KEY,forceMultipart:!1}},initialize:function(e){_.bindAll(this,"complete","errorEvent","getUploadKey","completeEvent","uploadFileContent"),this.uploadPath=e||this.uploadPath,this.addUploadThumbnail(),this.initializeUpload()},addUploadThumbnail:function(){this.$el.find(".thumbnail-wrapper:not(.folders)").after($('<ul class="uploader-wrapper hidden"></ul>'));var e=this.$el.find(".uploader-wrapper");this.$uploaderThumbnail=$("<div></div>").addClass("thumbnail uploader"),e.append(this.$uploaderThumbnail),this.views={},this.views.uploadThumbnail=new r({el:this.$uploaderThumbnail})},initializeUpload:function(){this.$container=this.$el.find(".uploader.progress-button"),this.$container.fineUploaderS3(this.getUploaderOptions()).on("error",this.errorEvent).on("complete",this.completeEvent)},uploadFileContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"text/plain;charset=utf-8"},n=new Blob([new Uint8Array([239,187,191]),e],t),r=new File([n],(new Date).valueOf()+".svg",t);this.$container.fineUploaderS3("addFiles",r)},getUploaderOptions:function(){var e=INKIVE.C.DEFAULT_FINEUPLOADER,t=$.extend(!0,{button:this.$el.find(".uploader.progress-button"),objectProperties:{acl:"public-read",key:this.getUploadKey}},e,this.uploadConfig);return t.uploadSuccess={},t},getUploadKey:function(e){var t=this.$container.fineUploaderS3("getName",e),n=this.$container.fineUploaderS3("getUuid",e),r=/(?:\.([^.]+))?$/.exec(t)[1];return INKIVE.Helpers.getBucketUrl(INKIVE.C.BUCKET).split("/").pop().split(".")[0]+this.uploadPath+"/"+n+"."+r},errorEvent:function(e,t){var n=this.views[t];return INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.upload_image",try_again:!0})),this.clean(t),_.delay((function(){n&&n.remove()}),1e3),$(document).trigger("file-content-upload:error"),!0},completeEvent:function(e,t,n,r,o){var i=$(e.currentTarget);r.success?this.complete(t,n,r):this.errorEvent(e,t)&&i.fineUploaderS3("cancel",t)},complete:function(e,t,n){var r=this.getUploadKey(e);this.clean(e),$(document).trigger("file-content-upload:complete",[o+"/"+r,t])},clean:function(e){this.files=_.omit(this.files,e),this.uploadAttempt=_.omit(this.uploadAttempt,e)},forceFallbackUpload:function(){INKIVE.C.USE_FALLBACK_UPLOAD="FORCE"},isFallbackUploadForced:function(){return"FORCE"===INKIVE.C.USE_FALLBACK_UPLOAD}}},{"../thumbnail/upload":393,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.last-index-of.js":869,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958}],334:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports={initScroll:function(e,t){var n=(e=e||this.$el).find(".accordion dd:visible");if(n.length)return this.initScroll(n,t);t=$.extend({autoHide:!1,width:this.getScrollWidth(e),height:this.getScrollHeight(e)},t);e.hasClass("antiscroll-wrap")?e.antiscroll(t):e.find(".antiscroll-wrap").antiscroll(t)},getScrollWidth:function(e){return e.parents(".tool-content").width()},getScrollHeight:function(e){return e.parents(".tool-content").height()},toggleScroll:function(e){var t=this.$el.find(".antiscroll-wrap:first");t.children(".antiscroll-inner").css("overflow",e?"hidden":"auto"),t.children(".antiscroll-scrollbar").toggleClass("antiscroll-scrollbar-shown",!e)}}},{"core-js/modules/es.array.find.js":859}],335:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.function.name.js");var r=e("../thumbnail/upload"),o=e("../../../../app/decorate"),i=e("../../../../factory/images");t.exports=o(e("./app/upload-list"),{uploadingThumbs:{},uploadAttempt:{},files:{},uploadConfig:{validation:{acceptFiles:"image/*;capture=camera",allowedExtensions:["jpg","jpeg","gif","png"]},scaling:{includeExif:!1,sendOriginal:!1,sizes:[{name:"o",maxSize:INKIVE.C.VersionUploadSize.o}]}},initialize:function(){_.bindAll(this,"complete","submittedEvent","progressEvent","errorEvent","cancelEvent","completeEvent","getUploaderOptions"),this.debouncedMasonryReload=_.debounce(this.masonryReload,800),this.addUploadThumbnail(),this.initializeUpload()},addUploadThumbnail:function(){var e=this.$el.find(".thumbnail-wrapper");this.$uploaderThumbnail=$("<div></div>").addClass("thumbnail uploader"),e.prependThumb(this.$uploaderThumbnail),this.views.uploadThumbnail=new r({el:this.$uploaderThumbnail})},getNewThumbnail:function(){var e=$("<div></div>").addClass("thumbnail uploading");return e.insertAfter(this.$uploaderThumbnail),this.$uploaderThumbnail.parent().masonry("prepended",e),new r({el:e})},initializeUpload:function(){var e=this.$el.find(".uploader.progress-button");e.fineUploaderS3(this.getUploaderOptions(e)).on("submitted",this.submittedEvent).on("progress",this.progressEvent).on("error",this.errorEvent).on("cancel",this.cancelEvent).on("complete",this.completeEvent)},getUploaderOptions:function(e){var t=INKIVE.C.DEFAULT_FINEUPLOADER;return $.extend(!0,{button:e,objectProperties:{acl:"public-read",key:function(t){var n=e.fineUploaderS3("getName",t),r=e.fineUploaderS3("getUuid",t),o=/(?:\.([^.]+))?$/.exec(n)[1];return INKIVE.C.UPLOAD_SERVER.split("/").pop().split(".")[0]+"/original/"+r+"."+o}}},t,this.uploadConfig)},submittedEvent:function(e,t,n){var r=$(e.currentTarget);this.views[t]=this.getNewThumbnail(),this.views[t].toggleProgressBar(!0),this.files[t]=r.fineUploaderS3("getFile",t),this.views[t].on("thumbnail_load_error",_.bind((function(){this.errorEvent(null,t)}),this)),this.views[t].on("cancel",_.bind((function(){var e=this.uploadAttempt[t];e&&e.abort&&e.abort(),r.fineUploaderS3("cancel",t)}),this)),this.isFallbackUploadForced()&&_.defer(_.bind((function(){r.fineUploaderS3("cancel",t),this.regularUploadFallback(t)}),this))},progressEvent:function(e,t,n,r,o){this.views[t]&&this.views[t].updateProgressBar(r/o)},cancelEvent:function(e,t){if(!this.isFallbackUploadForced()||this.uploadAttempt[t]){var n=this.views[t];this.tool.editor.canvas.call("advice.show","upload-cancel"),this.clean(t),_.delay(_.bind((function(){n.remove(),this.debouncedMasonryReload()}),this),1e3)}},errorEvent:function(e,t,n){var r=this.views[t];return this.uploadAttempt[t]&&"complete"!==e.type||n?(INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.upload_image",try_again:!0})),this.clean(t),_.delay(_.bind((function(){r&&r.remove(),this.debouncedMasonryReload()}),this),1e3),!0):("complete"!==(e&&e.type)&&this.regularUploadFallback(t),!1)},regularUploadFallback:function(e){var t=this.files[e],n=this.errorEvent,r=_.partial(this.complete,e);this.$el.find(".uploader.progress-button");function o(){var n=_.bind(this.progressEvent,this),r=new FormData;r.append("userfile",t),r.append("project_id",INKIVE.C.BOOK.id),this.uploadAttempt[e]=$.ajax({url:this.regularUploadFallbackUrl,type:"POST",success:i,error:_.bind((function(t){this.errorEvent(t,e)}),this),data:r,cache:!1,contentType:!1,processData:!1,dataType:"json",xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(t){n(t,e,null,t.loaded,t.total)}),!1),t}})}function i(o){if(t){var i=o.key;$.ajax({url:INKIVE.C.BASE_URL+"upload/successasync",type:"POST",dataType:"json",success:r,error:_.bind((function(t){n(t,e)}),this),data:{type:"editor",scrapbookId:INKIVE.C.BOOK.id,key:i,name:t.name,bucket:"virginia.inkive.com"}})}}this.uploadAttempt[e]=!0,this.forceFallbackUpload(),this.regularUploadFallbackUrl&&o.call(this),this.regularUploadFallbackUrl||$.get(BASE_URL+"upload/getdirectuploadendpoint",_.bind((function(e){this.regularUploadFallbackUrl=e,o.call(this)}),this))},completeEvent:function(e,t,n,r,o){var i=$(e.currentTarget);r.success?(r.name||(r.name=n),this.complete(t,r)):this.errorEvent(e,t)&&i.fineUploaderS3("cancel",t)},complete:function(e,t){var n=i.getVersionUrl(t.tempLink,"thumb");this.clean(e),this.views[e].setImage("photo-saved-"+t.photoId,n),this.views[e].on("resize",this.debouncedMasonryReload)},clean:function(e){this.files=_.omit(this.files,e),this.uploadAttempt=_.omit(this.uploadAttempt,e)},forceFallbackUpload:function(){INKIVE.C.USE_FALLBACK_UPLOAD="FORCE"},isFallbackUploadForced:function(){return"FORCE"===INKIVE.C.USE_FALLBACK_UPLOAD}})},{"../../../../app/decorate":5,"../../../../factory/images":127,"../thumbnail/upload":393,"./app/upload-list":330,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],336:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign.js");var o=r(e("./base")),i=r(e("../../../../../facade/design/design"));t.exports=o.default.extend({addElement:function(e,t){i.default.create("sticker",Object.assign({sticker_id:this.svg.id,thumb_src:this.svg.url,banner:t&&t.parentElement&&t.parentElement.dataset.banner},e))},initialize:function(e){this.svg=e.svg,o.default.prototype.initialize.call(this),this.setImageListeners()},setImageListeners:function(){this.el.querySelector("img").onload=this.resize},getTemplateRenderData:function(){return{image:{src:this.svg.url}}}})},{"../../../../../facade/design/design":47,"./base":337,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.assign.js":892}],337:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../mixins/draggable"),o=e("../../../../../facade/editor/editor"),i=e("../../../../../facade/design/design");t.exports=Backbone.mixin(Backbone.mixin(Backbone.View.extend({template:e("../templates/base.hbs"),elementType:"",height:86,width:122.5,events:{"touchstart .item":"mouseDown","mousedown .item":"mouseDown"},getClickElementData:function(e){var t=this.el.querySelector("img"),n=e.isDefinedPlaceholder,r=(t||this.el).getBoundingClientRect(),o=Math.min(this.canvas.contentW,this.canvas.contentH);return o/=Math.max(r.width,r.height),{position:{x:(this.canvas.contentW-r.width*(o/2))/2,y:(this.canvas.contentH-r.height*(o/2))/2},size:{width:r.width*(o/2),height:r.height*(o/2)},is_defined_placeholder:n}},getMouseUpElementData:function(e){var t=this.$draggableClone.get(0).getBoundingClientRect(),n=o.handle("zoom","get"),r=this.editor.getOffset();return{position:{x:Math.floor4((t.left-r.x)/n),y:Math.floor4((t.top-r.y)/n)},size:{width:Math.floor4(t.width/n),height:Math.floor4(t.height/n)}}},clickEvent:function(e){this.addElement(this.getClickElementData(e),e.target)},mouseUpEvent:function(e){this.addElement(_.extend(this.getMouseUpElementData(e),{selected:!0}))},addElement:function(e){var t=this.editor.addElement(this.elementType,e);INKIVE.Tool.blinkScreen(t)},initialize:function(){_.bindAll(this,"resize"),this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.render(),this.initDraggable()},render:function(){var e=this.template(this.getTemplateRenderData());this.$el.html(e),this.width&&this.$el.css("width",this.width),this.height&&this.$el.css("height",this.height),this.$draggable=this.$el.find("a.item")},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)},resize:function(){var e=this.$el.find("img").height();this.$el.height(e),this.trigger("resize")},getTemplateRenderData:function(){},replaceElement:function(){var e=this.canvas.getSelectedElems(),t=1===e.length?$(e[0]):null;if(t&&t.is(this.replaceType)&&t.is(".element")){var n=t[0].getBBox(),r=Math.max(n.width,n.height);this.replaceData.size=this.replaceData.size||{width:r,height:r},this.replaceData.position={x:n.x,y:n.y},t.is(".sticker")&&t.removeClass("sticker").addClass("icon"),i.set(t.attr("id"),this.replaceData)}}}),Backbone.Events),r)},{"../../../../../facade/design/design":47,"../../../../../facade/editor/editor":91,"../../mixins/draggable":332,"../templates/base.hbs":372,"core-js/modules/es.array.find.js":859}],338:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/web.timers.js");var r=e("./base"),o=e("../../../../../analytics/decorate");t.exports=o(e("../analytics/template"),r.extend({events:{click:"addEvent"},addEvent:function(e){var t=0===$("#svgroot .main").find(":not(title)").length;!this.isSameSize()&&this.isCustomFormat;t||this.setCurrentPage?this.setTemplate():this.displayModalOptions()},render:function(){r.prototype.render.apply(this,arguments),this.baseTemplate&&this.baseTemplate.is_multipage&&this.$el.addClass("set")},initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,_.bindAll(this,"setTemplate","onTemplateSet","acceptModal","closeModal")},displayModalOptions:function(){this.modal=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("modal_layout_load",{new_size:0,current_size:Math.round(this.canvas.contentW)+"x"+Math.round(this.canvas.contentH),keep_images:!INKIVE.C.MODE.IS_DESYGNER,has_images:$("#svgcontent .main image").length>0,keep_size:!INKIVE.C.MODE.IS_DESYGNER,is_same_size:!0}),{width:600,headerIcon:"icon-cloud-download",headerTitle:"modal.title.change_name",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.apply_name"),onClick:this.acceptModal},{title:INKIVE.TranslateHelper.translate("general.cancel"),onClick:this.closeModal}]})},acceptModal:function(){this.keepSize=$('input[name="keep-size-input"]').is(":checked"),this.keepImages=$('input[name="keep-images-input"]').is(":checked"),this.setTemplate(),this.modal.close()},closeModal:function(){this.modal.close()},setTemplate:function(){this.oldImages=_.map($("#svgcontent .main image"),(function(e){return e.getAttribute("xlink:href")})),this.editor.loadingElement(1),INKIVE.DesignFacade.once(this.designAddedEvent,this.onTemplateSet)},onTemplateSet:function(){var e=$("#svgcontent .main .layoutBox");this.keepImages&&_.any(e,(function(e,t){if(!(this.oldImages.length>t))return!0;this.canvas.runExtensions("addLayoutImage",{elem:e,data:this.oldImages[t]})}),this),INKIVE.C.IS_MOBILE&&this.canvas.call("advice.show","template-back"),INKIVE.C.IS_MOBILE||e.length&&INKIVE.C.MODE.IS_DESYGNER&&this.canvas.call("advice.show","template-placeholders"),INKIVE.Helpers.displayImagesLoadingAnimation(),this.editor.loadingElement(0),setTimeout((function(){INKIVE.DesignFacade.trigger("template.update.template_applied_on_current_page")}),5e3)}}))},{"../../../../../analytics/decorate":2,"../analytics/template":345,"./base":337,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/web.timers.js":966}],339:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize",clickEvent:function(){this.trackEvent({eventAction:"backgrounds_set_color",eventLabel:this.color})}}},{}],340:[function(e,t,n){"use strict";t.exports={}},{}],341:[function(e,t,n){"use strict";t.exports={}},{}],342:[function(e,t,n){"use strict";t.exports={}},{}],343:[function(e,t,n){"use strict";t.exports={}},{}],344:[function(e,t,n){"use strict";t.exports={}},{}],345:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),t.exports={eventCategory:"Editor UI | Tool Menu | templates",addEvent:function(e){var t=0===$("#svgroot .main").find(":not(title)").length,n=!this.isSameSize()&&!t;(n||t)&&this.trackEvent({eventAction:"add_"+(this.design?"designed":"grid"),eventLabel:n?"new_page":"current_empty_page"})},acceptModal:function(e){this.trackEvent({eventAction:"add_"+(this.design?"designed":"grid"),eventLabel:"current_page"})},closeModal:{eventAction:"cancel_adding"}}},{"core-js/modules/es.array.find.js":859}],346:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | text banners",clickEvent:function(e){this.trackEvent({eventAction:"add_click",eventLabel:this.svg.id})},mouseUpEvent:function(){this.trackEvent({eventAction:"add_drop",eventLabel:this.svg.id})}}},{}],347:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | text",eventAction:"text_edit",toggleBoldFontEvent:{eventLabel:"toggle_bold"},toggleItalicFontEvent:{eventLabel:"toggle_italic"},toggleOptionsEvent:{eventLabel:"toggle_options"},endEditingEvent:{eventLabel:"change_content"},toggleUnderlineFontEvent:{eventLabel:"toggle_underline"},clickEvent:{eventAction:"add_click"},mouseUpEvent:{eventAction:"add_drop"},changeFontFamilyEvent:function(e){var t=$(e.currentTarget).css("font-family");this.trackEvent({eventLabel:"change_font_family "+this.getQuoteScaped(t)})}}},{}],348:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),t.exports={displayFontFamiliesEventCheckOnce:function(){return this.appBridge.version.isApp("webrand")||this.appBridge.version.isApp("pdf")||!window.Android&&this.appBridge.version.isGreaterThan("1.1.1")||window.Android&&!this.appBridge.version.isLowerThan("1.1.3")},displayFontFamiliesEvent:function(e){var t=this.$el.find(".fonts-list");this.appBridge.callBoth("pick_font",_.extend(this.getTextData("_"),{position:_.extend(t.offset(),{height:t.height(),width:t.width()})})),t.find(".ui-dropdown-items").removeAttr("style").hide(),this.appBridge.off("ik.editor.text_update"),this.appBridge.on("ik.editor.text_update",_.bind((function(e,t){this.setTextData(t)}),this))}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],349:[function(e,t,n){"use strict";var r=e("../../../../facade/design/design"),o=e("./templates/color.hbs"),i=e("../../../../analytics/decorate");t.exports=i(e("./analytics/color"),Backbone.View.extend({events:{click:"clickEvent"},clickEvent:function(e){r.set("background",{color:this.color})},initialize:function(e){this.editor=INKIVE.Tool.getInstance().editor,this.color=e.color,this.render()},render:function(){this.$el.html(o({color:this.color})),this.$el.data("attr","fill fill-opacity"),this.$el.attr("title",this.color)}}))},{"../../../../analytics/decorate":2,"../../../../facade/design/design":47,"./analytics/color":339,"./templates/color.hbs":373}],350:[function(e,t,n){"use strict";function r(e){this.$el=e,this.caption="",this.captionLength=0,_.bindAll(this,"type","erase","startTyping","startErasing");var t=this.$el.height();this.$el.empty(),this.$text=$('<span class="content avoid-shortcuts"></span>').height(t).appendTo(this.$el),this.$cursor=$('<span class="cursor">|</span>').appendTo(this.$el)}t.exports=r,r.prototype.hide=function(){this.$cursor.hide()},r.prototype.show=function(){this.$cursor.show()},r.prototype.startTyping=function(e){return this.deferred=$.Deferred(),this.show(),this.caption=e,this.captionLength=0,this.type(),this.deferred.promise()},r.prototype.startErasing=function(){return this.deferred=$.Deferred(),this.show(),this.caption=this.$text.text(),this.captionLength=this.caption.length,this.erase(),this.deferred.promise()},r.prototype.type=function(){this.$text.html(this.caption||"&nbsp;"),this.deferred.resolve()},r.prototype.erase=function(){this.$text.html(this.caption.substr(0,this.captionLength--)||"&nbsp;"),this.captionLength>=0?_.delay(this.erase,50):(this.captionLength=0,this.caption="",this.deferred.resolve())}},{}],351:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/web.timers.js"),t.exports=s;var r;r=document.createElement("p").style;function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e){this.el=e,this.paths=[].slice.call(this.el.querySelectorAll("path")),this.pathsArr=new Array,this.lengthsArr=new Array,this._init()}function s(e,t){this.el=e,this.options=o({},this.options),o(this.options,t),this._init()}i.prototype._init=function(){var e=this;this.paths.forEach((function(t,n){e.pathsArr[n]=t,t.style.strokeDasharray=e.lengthsArr[n]=t.getTotalLength()})),this.draw(0)},i.prototype.draw=function(e){for(var t=0,n=this.pathsArr.length;t<n;++t)this.pathsArr[t].style.strokeDashoffset=this.lengthsArr[t]*(1-e)},s.prototype.options={},s.prototype._init=function(){this.progressEl=new i(this.el.querySelector("svg.progress-circle")),this.successEl=new i(this.el.querySelector("svg.checkmark")),this.errorEl=new i(this.el.querySelector("svg.cross")),$(this.el).addClass("error plus"),this.errorEl.draw(1)},s.prototype._submit=function(){$(this.el).addClass("loading").removeClass("plus")},s.prototype.stop=function(e){var t=this;setTimeout((function(){if(t.progressEl.draw(0),"number"==typeof e){var n=e>=0?"success":"error",r=e>=0?t.successEl:t.errorEl;r.draw(1),$(t.el).addClass(n),t.clear=function(){$(t.el).removeClass(n),r.draw(0)}}$(t.el).removeClass("loading error")}),300)},s.prototype.clear=function(){},s.prototype.setProgress=function(e){this.progressEl.draw(e)}},{"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.slice.js":874,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],352:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("./abstract/template"),o=e("../../../../factory/user-info"),i=e("../../../../facade/project/project");t.exports=r.extend({height:null,template:e("./templates/template.hbs"),designAddedEvent:"template.update.designed",events:{"click .base":"addEvent",'click .options li[data-type="this-page"]':"addEvent",'click .options li[data-type="new-page"]':"addToNewPageEvent"},addEvent:function(e){if(e.stopPropagation(),this.design){var t="1"===this.design.is_premium&&!this.canUse;this.keepImages=!0,t?this.displayLockedTemplateModal():this._addEvent()}},addToNewPageEvent:function(e){if(e.stopPropagation(),this.design){var t="1"===this.design.is_premium&&!this.canUse;this.keepImages=!1,t?this.displayLockedTemplateModal():i.handle("design","add",{quiet:!0}).then(_.bind(this._addEvent,this))}},displayLockedTemplateModal:function(){INKIVE.Helpers.displaySubscriptionModal("tool.templates.helper.description")},_addEvent:function(e){r.prototype.addEvent.apply(this,arguments)},initialize:function(e){r.prototype.initialize.call(this),this.width=e.width,this.design=e.design,this.isCustomFormat=e.isCustomFormat,o.get().then(_.bind((function(e){var t;this.canUse=(t="ROLE_PREMIUM",_(e.roles).contains(t)||INKIVE.Helpers.projectIsLinkedToRestrictions()),this.render(),this.initImageLoad()}),this))},render:function(){r.prototype.render.apply(this,arguments),this.$el.toggleClass("locked",this.design&&"1"===this.design.is_premium&&!this.canUse),INKIVE.Helpers.initTooltips(this.$el)},getTemplateRenderData:function(){var e=this.isCustomFormat?this.canvas.contentW/this.canvas.contentH:this.design.format_width/this.design.format_height,t=this.width*(1/e);return{url:this.design.url,can_use:this.canUse,show_options:!0,show_lock_icon:"1"===this.design.is_premium,thumb_height:Math.floor(t)}},initImageLoad:function(){var e=this.isCustomFormat,t=this.canvas.contentW/this.canvas.contentH;function n(){var n=$(this);if(n.closest(".thumbnail.image").removeClass("loading"),e){var r=this.naturalWidth/this.naturalHeight;n.parent().height(n.height()).addClass("custom"),t>r&&n.removeAttr("height")}else n.removeAttr("height")}this.$el.find("img").each((function(){this.onload=n,this.src=$(this).data("src")}))},setTemplate:function(){r.prototype.setTemplate.apply(this,arguments),INKIVE.DesignFacade.set("template",{keep_stage_size:this.isCustomFormat,designed:{id:this.design.id}})},isSameSize:function(){return this.canvas.contentW==this.design.format_width&&this.canvas.contentH==this.design.format_height}})},{"../../../../facade/project/project":113,"../../../../factory/user-info":161,"./abstract/template":338,"./templates/template.hbs":389,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],353:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var r=e("./abstract/template");e("../../../../facade/project/project");t.exports=r.extend({height:null,template:e("./templates/template.hbs"),addEvent:$.noop,initialize:function(e){r.prototype.initialize.call(this),this.width=e.width,this.format=e.format,this.design=e.design,this.isCustomFormat=e.isCustomFormat,this.render(),this.initImageLoad()},getTemplateRenderData:function(){return this.getFormatRenderData()},getFormatRenderData:function(){var e=this.format.thumb_width?this.format.thumb_width/this.format.thumb_height:this.format.width/this.format.height,t=this.width*(1/e);return _.extend(this.format,{url:this.format.url||this.format.thumbnail,is_single_line:t<56,thumb_width:Math.floor(this.format.thumb_width||this.format.width),thumb_height:Math.floor(t)})},initImageLoad:function(){var e=this.isCustomFormat;function t(){var t=$(this);if(t.closest(".thumbnail.image").removeClass("loading"),e){var n=t.parent();n.height(t.height()).addClass("custom"),n.width()>t.width()&&t.width(n.width()).removeAttr("height")}else"blank.jpg"!==this.src.split("/").pop()&&t.removeAttr("height")}this.$el.find("img").each((function(){this.onload=t,this.src=$(this).data("src")}))}})},{"../../../../facade/project/project":113,"./abstract/template":338,"./templates/template.hbs":389,"core-js/modules/es.array.find.js":859,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],354:[function(e,t,n){"use strict";e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var r=e("./abstract/template"),o=0;t.exports=r.extend({width:null,height:null,setCurrentPage:!1,template:e("./templates/grid.hbs"),designAddedEvent:"template.update.grid",initialize:function(e){r.prototype.initialize.call(this),this.setCurrentPage=e.setCurrentPage,this.size=e.size,this.format=e.format,this.numberOfPhotos=e.numberOfPhotos,this.processSVGData(e.data),this.render()},getTemplateRenderData:function(){return{defs:this.defs,content:this.svg,width:this.size.width,height:this.size.height}},processSVGData:function(e){function t(e){return e.replace(/id="(.*?)"/g,'id="$1-thumb-'+o+'"')}o++,this.defs=t(e.defs),this.svg=function(e,t){INKIVE.SVGPlaceholderImage.setClipsData(t);return e.replace(/<image xmlns:xlink="[^"]*" id="([^"]*)" clip-path="url\(#([^"]*)\)" [^>]*">[^<]*<\/image>/g,(function(e,t,n){var r=INKIVE.SVGPlaceholderImage.render(t,n);return r?r.svgString:e}))}(e.svg,e.defs),this.svg=t(this.svg),this.svg=this.svg.replace(/clip-path="url\(#(.*?)\)"/g,'clip-path="url(#$1-thumb-'+o+')"'),this.name=e.name},setTemplate:function(){r.prototype.setTemplate.apply(this,arguments),INKIVE.DesignFacade.set("template",{size:this.format,setCurrentPage:this.setCurrentPage,grid:{index_in_set:this.name,number_of_photos:this.numberOfPhotos}})},isSameSize:function(){return this.canvas.contentW==this.format.width&&this.canvas.contentH==this.format.height}})},{"./abstract/template":338,"./templates/grid.hbs":374,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],355:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.map.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design"),i=e("../../../../../facade/editor/editor"),s=e("../../../../../analytics/decorate"),a=e("../../../../../facade/restrictions/decorate");t.exports=s(e("../analytics/library-color"),a(e("../restrict/library-color"),r.extend({template:e("../templates/library-color.hbs"),events:{mouseover:"overThumbnailEvent",'click ul.options li[data-type="font"]':"setFontColorEvent",'click ul.options li[data-type="fill"]':"setFillColorEvent",'click ul.options li[data-type="stroke"]':"setStrokeColorEvent",'click ul.options li[data-type="background"]':"setBackgroundColorEvent"},setBackgroundColorEvent:function(e){var t=$(e.currentTarget).closest(".color").find(".info .code").text();o.set("background",{color:t})},setFontColorEvent:function(e){var t,n,r=this.getSelectionFacadeElements(),i=this.getElementsWithText(r),s=$(e.currentTarget).closest(".color").find(".info .code").text();t=_.filter(i,this.isText),_.each(t,(function(e){o.set(e.id,{color:s})})),n=_.filter(i,this.isSticker),_.each(n,(function(e){var t={};_.each(o.get(e.id,"texts"),(function(e,n){t[n]={color:s}})),o.set(e.id,{texts:t})}))},setFillColorEvent:function(e){var t,n,r=this.getSelectionFacadeElements(),i=this.getElementsWithFill(r),s=$(e.currentTarget).closest(".color").find(".info .code").text();t=_.filter(i,this.isShape),_.each(t,(function(e){o.set(e.id,{fill:{color:s}})})),n=_.filter(i,this.isSticker),_.each(n,(function(e){var t={};_.each(o.get(e.id,"shapes"),(function(e,n){e.fill&&e.fill.color&&(t[n]={fill:{color:s}})})),o.set(e.id,{shapes:t})}))},setStrokeColorEvent:function(e){var t,n,r,i=this.getSelectionFacadeElements(),s=this.getElementsWithStroke(i),a=$(e.currentTarget).closest(".color").find(".info .code").text();t=_.filter(s,this.isText),_.each(t,(function(e){o.set(e.id,{stroke:{color:a}})})),n=_.filter(s,this.isShape),_.each(n,(function(e){o.set(e.id,{stroke:{color:a}})})),r=_.filter(s,this.isSticker),_.each(r,(function(e){var t={};_.each(o.get(e.id,"shapes"),(function(e,n){e.stroke&&e.stroke.color&&0!==e.stroke.width&&(t[n]={stroke:{color:a}})})),o.set(e.id,{shapes:t})}))},overThumbnailEvent:function(e){var t=this.$el.find("ul.options li"),n=this.getSelectionFacadeElements();t.filter('[data-type="font"]').toggleClass("disabled",!this.getElementsWithText(n).length),t.filter('[data-type="fill"]').toggleClass("disabled",!this.getElementsWithFill(n).length),t.filter('[data-type="stroke"]').toggleClass("disabled",!this.getElementsWithStroke(n).length)},getSelectionFacadeElements:function(){var e=_.compact(_.toArray(this.canvas.getSelectedElems()));return _.map(e,(function(e){return{type:i.getType(e),id:e.getAttribute("id")}}))},getElementsWithText:function(e){var t=_.filter(e,this.isSticker);return _.union(_.filter(e,this.isText),_.filter(t,(function(e){return!_.isEmpty(o.get(e.id,"texts"))})))},getElementsWithStroke:function(e){var t=_.filter(e,this.isText),n=_.filter(e,this.isShape),r=_.filter(e,this.isSticker);return _.union(_.filter(t,(function(e){var t=o.get(e.id,"stroke");return t&&t.color&&0!==t.width})),_.filter(n,(function(e){var t=o.get(e.id,"stroke");return t&&t.color&&0!==t.width})),_.filter(r,(function(e){return _.any(o.get(e.id,"shapes"),(function(e){return e.stroke&&e.stroke.color&&0!==e.stroke.width}))})))},getElementsWithFill:function(e){var t=_.filter(e,this.isShape),n=_.filter(e,this.isSticker);return _.union(_.filter(t,(function(e){return o.get(e.id,"fill.color")})),_.filter(n,(function(e){return _.any(o.get(e.id,"shapes"),(function(e){return e.fill&&e.fill.color}))})))},isText:function(e){return"text"===e.type},isShape:function(e){return"shape"===e.type},isSticker:function(e){return"sticker"===e.type},initialize:function(e){this.item=e.item,r.prototype.initialize.call(this)},render:function(){this.$el.html(this.template(this.item))}})))},{"../../../../../analytics/decorate":2,"../../../../../facade/design/design":47,"../../../../../facade/editor/editor":91,"../../../../../facade/restrictions/decorate":114,"../abstract/base":337,"../analytics/library-color":340,"../restrict/library-color":367,"../templates/library-color.hbs":375,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870}],356:[function(e,t,n){"use strict";var r=e("../abstract/base"),o=e("../../../../../facade/design/design");t.exports=r.extend({template:e("../templates/library-folder.hbs"),addElement:function(e){o.create("image",_.extend({source:{url:this.item.data.thumb}},e))},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.editor=t.editor,this.canvas=this.editor.canvas,r.prototype.initialize.call(this)},render:function(){this.$el.html(this.template(this.item))}})},{"../../../../../facade/design/design":47,"../abstract/base":337,"../templates/library-folder.hbs":376}],357:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var o=r(e("./logo")),i=r(e("../abstract/base")),s=r(e("../../../../../facade/design/design")),a=r(e("../../../../../analytics/decorate"));t.exports=(0,a.default)(e("../analytics/library-icon"),o.default.extend({template:e("../templates/library-icon.hbs"),type:"icon",addElement:function(e,t){if($(t).is(".replace-icon"))this.replaceElement(e);else if(this.iconOnPosition)s.default.set(this.iconOnPosition.getAttribute("id"),{is_vector:1!=this.item.data.type,thumb_src:this.getSource()}),this.canvas.runExtensions("outIcon");else{if(!INKIVE.RestrictionsFacade.isFunctionalityAllowed("icon_add"))return;var n=s.default.create("icon",_.extend({is_vector:1!=this.item.data.type,thumb_src:this.getSource(),smart_asset:this.item.is_smart_asset&&this.item.id},e));if($(t).closest('[library-item="true"]')){var r=document.getElementById(n);r.setAttribute("from-library","true"),this.canvas.clearSelection(),this.canvas.selectOnly([r])}}},setImageListeners:function(){var e=new Image,t=this.$el;e.src=this.getSource(),e.onload=function(){var n=e.width/e.height;t.height(t.width()/n),t.find(".loading").addClass("disappear"),t.find("img.draggable").attr("src",e.src),t.find(".image").css("background-image",'url("'+e.src+'")')},e.onerror=_.bind((function(){this.setSource(this.item.data.original),e.src=this.getSource(),e.onerror=_.bind(this.remove,this)}),this)},mouseMove:function(e){i.default.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset();this.iconOnPosition=this.canvas.runExtensions("dragIcon",{thumb:this.getSource(),x:e.clientX-t.x,y:e.clientY-t.y}),this.draggableOpacity=this.iconOnPosition?.2:1},getSource:function(){return this.item.data.thumb}}))},{"../../../../../analytics/decorate":2,"../../../../../facade/design/design":47,"../abstract/base":337,"../analytics/library-icon":341,"../templates/library-icon.hbs":377,"./logo":359,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],358:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var i=r(e("../../../../../../../../src/config/constants"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=e("../abstract/base"),c=e("../../../../../facade/design/design"),u=e("../../../../../factory/images"),d=e("../../../../../analytics/decorate");t.exports=d(e("../analytics/library-image"),l.extend({template:e("../templates/library-image.hbs"),events:{"touchstart .item":"mouseDown","mousedown .item":"mouseDown",'click ul.options li[data-type="background"]':"setBackgroundImageEvent",'click ul.options li[data-type="replace-image"]':"replaceImageEvent"},addElement:function(e,t){if(!$(t).hasClass("replace-image")&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("image_add"))if(!0!==INKIVE.RestrictionsFacade.isReplaceRestrictedSelected()&&"replace-image"!==this.canvas.getMode())if("replace-background"!==this.canvas.getMode()){var n=c.create("image",Object.assign({source:{url:this.getSource()},smart_asset:this.item.is_smart_asset&&this.item.id},e));if($(t).closest('[library-item="true"]')){var r=document.getElementById(n);r.setAttribute("from-library","true"),this.canvas.clearSelection(),this.canvas.selectOnly([r])}}else this.setBackgroundImageEvent();else this.replaceImageEvent()},getMouseUpElementData:function(e){return _.extend({placeholder:!1},l.prototype.getMouseUpElementData.call(this,e))},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.editor=t.editor,this.canvas=this.editor.canvas,l.prototype.initialize.call(this),this.setImageListeners()},render:function(){var e=INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN;if(!e){var t=INKIVE.RestrictionsFacade.getElementRestrictions("background");e=t&&t.length&&t[0].image}this.$el.html(this.template(_.extend(this.item,{show_background:e}))),this.$draggable=this.$el.find(".draggable")},mouseMove:function(e){l.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset(),n=e.clientX,r=e.clientY;this.layoutTarget=this.canvas.runExtensions("overLayoutImage",{elem:this.$draggableClone.get(0),type:"image",mouse_x:n-t.x,mouse_y:r-t.y,skipHistory:!0})},mouseUp:function(e){var t,n=INKIVE.Tool.getInstance(),r=n.editor.canvas,o=e.target.parentElement.dataset.type,i=e.target.closest(".library"),s=this.getSmartAssetsAttributes(),a=s.is_defined_placeholder,c=void 0!==a&&a;if(e.preventDefault(),i&&(e.isDefinedPlaceholder=c),"background"!==o){if("replace-image"===o){var u=r.getSelectedElems()[0];"image"!==u.tagName&&(u=u.querySelector("image.subelement")),t=u.getAttribute("xlink:href")}else t=r._t.layout_prvAttr&&r._t.layout_prvAttr.url;this.isPlaceHolder=t&&/imageplaceholder_new\.svg$/.test(t),r._t.layout_prvElem&&(r._t.layout_prvElem=null,r._t.layout_prvAttr=null),this.layoutTarget&&this.dropOverLayoutbox(),this.layoutTarget||l.prototype.mouseUp.apply(this,arguments)}else this.endDragging()},dropOverLayoutbox:function(){this.endDragging(),c.set(this.layoutTarget.getAttribute("id"),a({source:{url:this.getSource()},img_frame:this.isPlaceHolder,skipHistory:!0},this.getSmartAssetsAttributes(this.layoutTarget)))},setImageListeners:function(){var e=new Image,t=this.$el;e.src=this.getSource(),e.onload=_.bind((function(){var n=e.width/e.height;t.find(".loading").addClass("disappear"),t.height(t.width()/n),t.find("img").attr("src",e.src),this.trigger("resize")}),this),e.onerror=_.bind((function(){this.setSource(this.item.data.original),e.src=this.getSource(),e.onerror=_.bind(this.remove,this)}),this)},setBackgroundImageEvent:function(e){e&&e.preventDefault(),this.canvas.clearSelection(),c.set("background",{source:this.getSource()})},replaceImageEvent:function(e){e&&e.preventDefault();var t=this.canvas.getSelectedElems(),n=$(1===t.length?t[0]:null),r=n.is(".sticker")&&n.find("image.subelement").length;if((e=e||{}).$element=$(1===t.length?t[0]:null),n.is("image.element")||r){var o=$(e.currentTarget).closest(".image.item").find("img"),i=this.canvas.runExtensions("overLayoutImage",{elem:o[0],type:"image"});i&&o.data("layoutTarget",i),o.attr("style",""),this.canvas._t.layout_prvElem=null,this.canvas._t.layout_prvAttr=null;var s=n.closest(".background").length?"background":n.attr("id");u.removeImageFilter(n,this.item.data.thumb),INKIVE.DesignFacade.set(s,a({source:{url:this.getSource(),preload:!0},keep_box_size:!0,img_frame:this.isPlaceHolder},this.getSmartAssetsAttributes(n.get(0))))}else this.canvas.call("advice.show","image-replacement-selection")},getSource:function(){return this.item.data.thumb},setSource:function(e){this.item.data.thumb=e},getSmartAssetsAttributes:function(e){var t,n,r,o,s=i.default.featureFlag.keys.smartAssets,l=(null===(t=this.item)||void 0===t?void 0:t.id)||(null==e||null===(n=e.getAttribute)||void 0===n?void 0:n.call(e,"custom-placeholder"));return null!==(r=INKIVE.C.FEATURE_FLAG)&&void 0!==r&&null!==(o=r.brand_assets)&&void 0!==o&&o.includes(s)?a({is_defined_placeholder:!0},l&&{smart_asset:l}):{}}}))},{"../../../../../../../../src/config/constants":1090,"../../../../../analytics/decorate":2,"../../../../../facade/design/design":47,"../../../../../factory/images":127,"../abstract/base":337,"../analytics/library-image":342,"../templates/library-image.hbs":378,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],359:[function(e,t,n){"use strict";e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design"),i=e("../../../../../analytics/decorate"),s=0,a=0;t.exports=i(e("../analytics/library-logo"),r.extend({template:e("../templates/library-logo.hbs"),type:"logo",addElement:function(e,t){if($(t).is(".replace-logo"))this.replaceElement(e);else if(this.logoOnPosition){var n=this.logoOnPosition.getAttribute("id"),r=INKIVE.DesignFacade.get(n).size.width,i=parseFloat(this.$draggable[0].width/this.$draggable[0].height)||1;o.set(this.logoOnPosition.getAttribute("id"),{is_vector:1!==this.item.data.type,thumb_src:this.getSource(),smart_asset:this.item.is_smart_asset&&this.item.id,size:{width:r,height:r/i},position:{y:INKIVE.DesignFacade.get(n).position.y,x:INKIVE.DesignFacade.get(n).position.x}}),this.canvas.runExtensions("outLogo"),this.checkPosition(n)}else{if(!INKIVE.RestrictionsFacade.isFunctionalityAllowed("logo_add"))return;s=e.position.y,a=e.position.x;var l=o.create("logo",_.extend({is_vector:1!==this.item.data.type,thumb_src:this.getSource(),smart_asset:this.item.is_smart_asset&&this.item.id},e));if($(t).closest('[library-item="true"]')){var c=document.getElementById(l);c.setAttribute("from-library","true"),this.canvas.clearSelection(),this.canvas.selectOnly([c])}}},checkPosition:function(e){s=INKIVE.DesignFacade.get(e).position.y,a=INKIVE.DesignFacade.get(e).position.x,setTimeout((function(){o.set(e,{position:{y:s,x:a}})}),500)},initialize:function(e){this.item=e.item,r.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},mouseMove:function(e){r.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset();this.logoOnPosition=this.canvas.runExtensions("dragLogo",{thumb:this.getSource(),x:e.clientX-t.x,y:e.clientY-t.y}),this.draggableOpacity=this.logoOnPosition?.2:1},setImageListeners:function(){var e=new Image,t=this.$el;e.src=this.getSource(),e.onload=function(){var n=e.width/e.height;t.height(t.width()/n),t.find(".loading").addClass("disappear"),t.find("img.draggable").attr("src",e.src),t.find(".image").css("background-image",'url("'+e.src+'")')},e.onerror=_.bind((function(){this.setSource(this.item.data.original),e.src=this.getSource(),e.onerror=_.bind(this.remove,this)}),this)},getSource:function(){return this.item.data.thumb},setSource:function(e){this.item.data.thumb=e},replaceElement:function(){this.replaceType="."+this.type;var e=this.canvas.getSelectedElems(),t=$(1===e.length?e[0]:null),n=INKIVE.DesignFacade.get(t[0].getAttribute("id")).size.width,o=parseFloat(this.$draggable[0].width/this.$draggable[0].height)||1,i=t[0].getAttribute("id");this.checkPosition(i),t.attr("class","element "+this.type+" selected"),this.replaceData={is_vector:1!==this.item.data.type,thumb_src:this.getSource(),smart_load:this.item.data.original!==this.item.data.thumb,smart_asset:this.item.is_smart_asset&&this.item.id,size:{width:n,height:n/o}},r.prototype.replaceElement.call(this)}}))},{"../../../../../analytics/decorate":2,"../../../../../facade/design/design":47,"../abstract/base":337,"../analytics/library-logo":343,"../templates/library-logo.hbs":379,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-float.js":904,"core-js/modules/web.timers.js":966}],360:[function(e,t,n){"use strict";e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.italics.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.find.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design"),i=e("../../../../../analytics/decorate");t.exports=i(e("../analytics/library-text"),r.extend({template:e("../templates/library-text.hbs"),addElement:function(e,t){var n=this.item.data;if($(t).is(".replace-text"))this.replaceElement();else{o.once("text.create",(function(e){o.set(e.id,{color:n.color_code,spacing:{paragraph:n.paragraph_spacing,first_line_margin:n.first_line_margin,letter:n.letter_spacing,word:n.word_spacing,line:n.line_spacing},stroke:{color:n.stroke_width?n.stroke_color:null,width:n.stroke_width,dasharray:n.stroke_dasharray}})}));var r=o.create("text",_.extend({library_text:!0,content:n.default_content||n.name||n.family,decoration:n.underline?"underline":null,smart_asset:this.item.is_smart_asset&&this.item.id,font:{family:n.family,size:n.size,weight:n.weight,style:n.italic?"italic":null}},e,{size:this.getContainerSize(n)}));if($(t).closest('[library-item="true"]')){var i=document.getElementById(r);i.setAttribute("from-library","true"),this.canvas.clearSelection(),this.canvas.selectOnly([i])}}},initialize:function(e){this.item=e.item,r.prototype.initialize.call(this)},render:function(){var e=this.item.data.family;e.match(/'.*?'/)&&(this.item.data.family=e.substring(1,e.length-1)),this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},getContainerSize:function(e){var t=this.$el.find(".draggable")[0].getBoundingClientRect().width*(e.size/14);return{width:Math.floor4(t)}},replaceElement:function(){var e=this.item.data;this.replaceType=".textarea",this.replaceData={content:e.default_content,smart_asset:this.item.is_smart_asset&&this.item.id},r.prototype.replaceElement.call(this)}}))},{"../../../../../analytics/decorate":2,"../../../../../facade/design/design":47,"../abstract/base":337,"../analytics/library-text":344,"../templates/library-text.hbs":380,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.italics.js":916,"core-js/modules/es.string.match.js":920}],361:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js");var i=r(e("@babel/runtime/helpers/toArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("../abstract/base")),c=r(e("../../../../../facade/design/design")),u=r(e("../../../../../video/parseThumbnails"));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.exports=l.default.extend({template:e("../templates/library-video.hbs"),addElement:function(t,n){if(!$(n).is(".replace-video")&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("video_add")){var r,i,a=this.item.is_smart_asset&&this.item.id,l=!this.item.data.file&&!!this.item.data.source,u=this.item.data.source||this.item.data.file;u?h(u,this.thumb_src):(r=new(e("../../../../../modal/prompt"))({label:INKIVE.TranslateHelper.translate("modal.prompt.add_video_source")}),i=INKIVE.Modal.modalWindow(r.getFormHtml(),{width:400,headerIcon:"fa fa-film",headerTitle:"tool.customize.add_video",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.add_video"),onClick:function(){i.close(),r.getValue()&&h(r.getValue(),this.thumb_src)}}]}))}else this.replaceElement(t);function d(e,r){var o=c.default.create("video",p(p({},t),{},{thumb_src:r,source:e,smart_asset:a}));$(n).closest('[library-item="true"]')&&document.getElementById(o).setAttribute("from-library","true")}function h(e,t){return m.apply(this,arguments)}function m(){return(m=(0,s.default)(o.default.mark((function e(r,i){var s,u,p,h,m,f,g,b;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return",d(r,i));case 2:return(s=new Image).src=i,e.next=6,new Promise((function(e){s.onload=e}));case 6:u=t.size,p=u.width,h=u.height,m=Math.min(p/s.width,h/s.height),f=Math.floor(s.width*m)||p,g=Math.floor(s.height*m)||h,b=c.default.create("video",{position:t&&t.position?t.position:{},size:{width:f,height:g},thumb_src:i,url:r,smart_asset:a}),$(n).closest('[library-item="true"]')&&document.getElementById(b).setAttribute("from-library","true");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},initialize:function(e){this.item=e.item,this.item.data=(0,u.default)(this.item.data),this.thumb_src=this.item.data.original,l.default.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},setImageListeners:function(){var e=this,t=new Image,n=this.$el;t.src=this.thumb_src,t.onload=_.bind((function(){this.thumb=t.src;var e=t.width/t.height;n.height(n.width()/e),n.find(".loading").addClass("disappear"),n.find("img.draggable").attr("src",t.src),n.find(".image").css("background-image",'url("'+t.src+'")')}),this),t.onerror=function(){var n=INKIVE.Helpers.getCORSSecureUrl("https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg"),r=e.item.data.selected_thumbnail;void 0!==r?(t.src=r,t.onerror=function(){t.src=n}):t.src=n}},replaceElement:function(){var e=this.canvas.getSelectedElems(),t=(0,i.default)(e),n=t[0],r=t.slice(1);n&&!r.length&&(INKIVE.DesignFacade.set(n.id,{source:this.item.data.source||this.item.data.file,thumb_src:this.thumb_src,smart_asset:this.item.is_smart_asset&&this.item.id,keep_box_size:!0}),this.canvas.clearSelection(),this.canvas.selectOnly([n]))},mouseMove:function(e){l.default.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset(),n=e.clientX,r=e.clientY;this.layoutTarget=this.canvas.runExtensions("overLayoutImage",{elem:this.$draggableClone.get(0),type:"video",mouse_x:n-t.x,mouse_y:r-t.y})},mouseUp:function(e){var t=INKIVE.Tool.getInstance(),n=t.editor.canvas,r=e.target.parentElement.dataset.type,o=i();function i(){if("replace-image"===r){var e=n.getSelectedElems()[0];return("image"===e.tagName?e:e.querySelector("image.subelement")).getAttribute("xlink:href")}return n._t.layout_prvAttr&&n._t.layout_prvAttr.url}e.preventDefault(),"background"!==r?(this.isPlaceHolder=o&&/imageplaceholder_new\.svg$/.test(o),n._t.layout_prvElem&&(n._t.layout_prvElem=null,n._t.layout_prvAttr=null),this.layoutTarget?this.dropOverLayoutbox():l.default.prototype.mouseUp.apply(this,arguments)):this.endDragging()},dropOverLayoutbox:function(){this.endDragging();var e=this.layoutTarget.id;this.layoutTarget=null,c.default.set(e,this.getVideoData())},getVideoData:function(){var e=this.item.data,t=e.file,n=e.selected_thumbnail,r=e.source,o=e.thumbnail;return{source:r||t,thumb_src:e.thumb_src||o||n}}})},{"../../../../../facade/design/design":47,"../../../../../modal/prompt":174,"../../../../../video/parseThumbnails":626,"../abstract/base":337,"../templates/library-video.hbs":381,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toArray":677,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],362:[function(e,t,n){"use strict";var r=e("../../../../../facade/design/design");t.exports=Backbone.View.extend({template:e("../templates/option-color.hbs"),events:{"click .item":"addElementEvent"},addElementEvent:function(){var e,t=this.selection,n=t.type,o=t.id,i={color:this.item.color};switch(n){case"text":case"background":e=i;break;case"table":e={cell_background:i};break;default:e={fill:i}}r.set(o,e)},initialize:function(e){this.item=e.item,this.selection=e.selection,this.render()},render:function(){this.$el.html(this.template(this.item))}})},{"../../../../../facade/design/design":47,"../templates/option-color.hbs":382}],363:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design");t.exports=r.extend({template:e("../templates/option-image.hbs"),getClickElementData:function(){return!0},getMouseUpElementData:function(){return this.layoutTarget},addElement:function(e){e&&o.set({keep_box_size:!0,source:{preload:!0,url:this.item.source}})},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.selection=e.selection,this.editor=t.editor,this.canvas=this.editor.canvas,r.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},mouseMove:function(e){r.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset(),n=e.clientX,o=e.clientY,i=this.canvas.runExtensions("overLayoutImage",{elem:this.$draggableClone.get(0),type:"image",selection:this.selection,mouse_x:n-t.x,mouse_y:o-t.y});this.layoutTarget=i},setImageListeners:function(){var e=this,t=new Image,n=this.$el;t.src=this.item.source,t.onload=_.bind((function(){var e=t.width/t.height;n.find(".loading").addClass("disappear"),n.height(n.width()/e),this.trigger("resize")}),this);var r=!1;t.onerror=function(){r||(t.src=INKIVE.ImagesFactory.getVersionUrl(e.item.thumb_src,"original"),e.$el.find("img").attr("src",t.src),r=!0)}}})},{"../../../../../facade/design/design":47,"../abstract/base":337,"../templates/option-image.hbs":383,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],364:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design");t.exports=r.extend({template:e("../templates/option-logo.hbs"),getClickElementData:function(){return!0},getMouseUpElementData:function(){return this.logoOnPosition},addElement:function(e){this.logoOnPosition&&(this.canvas.runExtensions("outLogo"),this.logoOnPosition=null);var t=$(this.canvas.getSelectedElems()[0]);this.item.sticker_id||t.is(".sticker")&&t.attr("class","element icon selected"),this.item.sticker_id&&t.attr("class","element sticker selected"),e&&o.set(this.item)},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.selection=e.selection,this.editor=t.editor,this.canvas=this.editor.canvas,r.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},mouseMove:function(e){r.prototype.mouseMove.apply(this,arguments);var t=this.editor.getOffset();this.logoOnPosition=this.canvas.runExtensions("dragLogo",{thumb:this.item.thumb_src,x:e.clientX-t.x,y:e.clientY-t.y}),this.draggableOpacity=this.logoOnPosition?.2:1},setImageListeners:function(){var e=this,t=new Image,n=this.$el;t.src=this.item.thumb_src,t.onload=_.bind((function(){var e=t.width/t.height;n.find(".loading").addClass("disappear"),n.height(n.width()/e),this.trigger("resize")}),this);var r=!1;t.onerror=function(){r||(t.src=INKIVE.ImagesFactory.getVersionUrl(e.item.thumb_src,"original"),e.$el.find("img").attr("src",t.src),r=!0)}}})},{"../../../../../facade/design/design":47,"../abstract/base":337,"../templates/option-logo.hbs":384,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],365:[function(e,t,n){"use strict";e("../abstract/base");var r=e("../../../../../facade/design/design");t.exports=Backbone.View.extend({template:e("../templates/option-text.hbs"),events:{"click .item":"setContentEvent"},setContentEvent:function(){r.set({content:this.item.content,text_content:this.item.content,force_redraw:!0})},initialize:function(e){this.item=e.item,this.selection=e.selection,this.render()},render:function(){var e=_.extend({family:this.selection.font.family,weight:this.selection.font.weight,italic:this.selection.font.style,underline:this.selection.decoration,word_spacing:this.selection.spacing.word,letter_spacing:this.selection.spacing.letter},this.item);this.$el.html(this.template(e))}})},{"../../../../../facade/design/design":47,"../abstract/base":337,"../templates/option-text.hbs":385}],366:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../abstract/base"),o=e("../../../../../facade/design/design");t.exports=r.extend({template:e("../templates/option-video.hbs"),addElement:function(e){o.set(this.item)},mouseMove:function(e){},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.selection=e.selection,this.editor=t.editor,this.canvas=this.editor.canvas,r.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},setImageListeners:function(){var e=this,t=new Image,n=this.$el;t.src=this.item.thumbnail,t.onload=_.bind((function(){var e=t.width/t.height;n.find(".loading").addClass("disappear"),n.height(n.width()/e),this.trigger("resize")}),this);var r=!1;t.onerror=function(){r||(t.src=INKIVE.ImagesFactory.getVersionUrl(e.item.thumbnail,"original"),e.$el.find("img").attr("src",t.src),r=!0)}}})},{"../../../../../facade/design/design":47,"../abstract/base":337,"../templates/option-video.hbs":386,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],367:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var r=e("../../../../../facade/restrictions/restrictions");t.exports={overThumbnailEvent:function(e){var t=this.$el.find("ul.options li"),n=this.getSelectionFacadeElements();this.backgroundPermissions||this.readBackgroundPermissions(),this.readColorChangePermissions(n),t.filter('[data-type="background"]').toggleClass("disabled",!this.canChangeBackgroundColor()),t.filter('[data-type="font"]').toggleClass("disabled",!this.getElementsWithText(n).length||!this.canChangeElementColor(["text_colour","color"])),t.filter('[data-type="fill"]').toggleClass("disabled",!this.getElementsWithFill(n).length||!this.canChangeElementColor(["vector_colour"])),t.filter('[data-type="stroke"]').toggleClass("disabled",!this.getElementsWithStroke(n).length||!this.canChangeElementColor(["text_colour","color","vector_colour"]))},canChangeBackgroundColor:function(){return _.any(this.backgroundPermissions,(function(e){return e.basic&&e.basic.color}))},canChangeElementColor:function(e){return _.any(this.colorChangePermissions,(function(t){var n=!1;return _.each(e,(function(e){t.basic&&t.basic[e]&&(n=!0)})),n}))},readBackgroundPermissions:function(){this.backgroundPermissions=r.getAllElementPermissions("background")},readColorChangePermissions:function(e){e.length&&(this.colorChangePermissions=r.getAllElementPermissions(e[0].id))}}},{"../../../../../facade/restrictions/restrictions":118,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],368:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.number.is-integer.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.concat.js");var r=e("../../../../utils/md5"),o=e("./abstract/template"),i=e("../../../../facade/project/project"),s=e("../../../../factory/user-info"),a=e("../../../../factory/restrictions");t.exports=o.extend({height:null,setLoaded:!1,template:e("./templates/template.hbs"),designAddedEvent:"template.update.restricted",events:{"click .base":"addEvent",'click .options li[data-type="this-page"]':"addToCurrentPageEvent",'click .options li[data-type="new-page"]':"addToNewPageEvent","click .set .set-page":"addPageEvent","click .set .close":"closeSetEvent"},closeSetEvent:function(){this.toggleSet(!1)},isCanvasMainTagEmpty:function(){return!INKIVE.DesignFacade.get().filter((function(e){return"background"!==e.id})).length},togglePopupOnAddOrReplaceTemplate:function(e){var t=e.currentTarget;"this-page"===t.dataset.type?this.isCanvasMainTagEmpty()?this._addToCurrentPageEvent(e):this.displayModalConfirm(e,_.bind(this._addToCurrentPageEvent,this)):"new-page"===t.dataset.type&&(this.isCanvasMainTagEmpty()?this._addToNewPageEvent(e):this.displayModalConfirm(e,_.bind(this._addToNewPageEvent,this)))},addToCurrentPageEvent:function(e){var t=this.baseTemplate.is_premium&&!this.canUse;e.stopPropagation(),t?this.displayLockedTemplateModal():this.togglePopupOnAddOrReplaceTemplate(e)},addToNewPageEvent:function(e){var t=this.baseTemplate.is_premium&&!this.canUse;e.stopPropagation(),t?this.displayLockedTemplateModal():this.togglePopupOnAddOrReplaceTemplate(e)},addEvent:function(e){this.baseTemplate.is_premium&&!this.canUse?this.displayLockedTemplateModal():this._addEvent(e)},_addToCurrentPageEvent:function(e){this.isMultiPage()?this.setTemplate(this.getPageNumberFromEvent(e)):this.setTemplate()},displayModalConfirm:function(e,t){if("true"!==localStorage.getItem("modalRestrictedTemplateConfirmDontShowAgain")){var n=this;this.modal=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("modal_restricted_template_confirm"),{width:550,height:250,headerIcon:"icon-cloud-download",headerTitle:INKIVE.TranslateHelper.translate("modal.title.apply_template"),buttons:[{title:INKIVE.TranslateHelper.translate("modal.title.add_new_page"),cls:"modal-apply-secondary-template",onClick:function(){localStorage.setItem("modalRestrictedTemplateConfirmDontShowAgain",$("input#dont-show-again").is(":checked")),n.modal.close(),n._addToNewPageEvent(e)}},{title:INKIVE.TranslateHelper.translate("modal.title.replace_current_page"),cls:"modal-apply-secondary-template",onClick:function(){localStorage.setItem("modalRestrictedTemplateConfirmDontShowAgain",$("input#dont-show-again").is(":checked")),n.modal.close(),t(e)}}]})}else t&&t(e)},_addToNewPageEvent:function(e){var t=this.isMultiPage()?_.bind(this._setTemplate,this,this.getPageNumberFromEvent(e)):_.bind(this._setTemplate,this);i.handle("design","add",{quiet:!0}).then(t)},_addEvent:function(e){this.isMultiPage()?this.toggleSet():this.displayModalConfirm(e,_.bind(this.setTemplate,this))},addPageEvent:function(e){this.setTemplate(this.getPageNumberFromEvent(e))},getPageNumberFromEvent:function(e){return $(e.currentTarget).closest(".set-page").index()+1},setTemplate:function(e){function t(e,t){INKIVE.Modal.togglePageLoader(!1),this.templatePermissions=e||[],this.elementPermissions=t||[];var n=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE&&(this.templatePermissions.length||this.templatePermissions.length);n&&this.applyTemplateOnSamePage(),n||this._setTemplate()}this.page=Number.isInteger(e)?e:1,INKIVE.Modal.togglePageLoader(!0),INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN?t.call(this):$.when(a.getTemplatePermissions(),a.getElementPermissions()).then(_.bind(t,this))},displayModalOptions:function(){var e=this.templatePermissions.length||this.elementPermissions.length;this.modal=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("modal_restricted_template_load",{has_restrictions:e}),{width:600,headerIcon:"icon-cloud-download",headerTitle:"modal.title.change_name",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.apply_name"),cls:"modal-apply-secondary-template",onClick:this.applyTemplateOnSamePage},{title:INKIVE.TranslateHelper.translate("general.cancel"),cls:"modal-apply-secondary-template",onClick:this.closeModal}]})},applyTemplateOnSamePage:function(){var e=!!this.isCanvasMainTagEmpty()||$('input[name="copy-restrictions"]').is(":checked"),t=this.templatePermissions.length||this.elementPermissions.length;this._setTemplate(),t&&e&&this._copyRestrictions()},_copyRestrictions:function(){this._copyTemplatePermissions(this.templatePermissions),this._copyElementPermissions(this.elementPermissions)},_copyTemplatePermissions:function(e){if(_.size(e)){var t=Object.keys(e)[0],n=e[t];return a.setGlobalTemplateRestriction(t,n).then(_.bind(this._copyTemplatePermissions,this,_(e).omit(t)))}var r=$.Deferred();return r.resolve(),r.promise()},_copyElementPermissions:function(e){if(_.size(e)){var t=e.pop();return t.page_number===this.page?a.setGlobalElementRestriction(t.element_id,t.restrictions).then(_.bind(this._copyTemplatePermissions,this,e)):this._copyTemplatePermissions(e)}var n=$.Deferred();return n.resolve(),n.promise()},_setTemplate:function(e){this.page=Number.isInteger(e)?e:this.page||1,o.prototype.setTemplate.call(this),INKIVE.DesignFacade.set("template",{restricted:{page:this.page,id:this.baseTemplate.encoded_id}})},toggleSet:function(e){var t=this.$el.find(".set"),n=void 0!==e;n||t.toggleClass("collapsed"),n&&t.toggleClass("collapsed",!e),t.is(".collapsed")?t.removeAttr("style"):(this.setLoaded||(this.setLoaded=!0,this.initImageLoad(t)),t.height(t.find("ul").outerHeight(!0)+t.find(".line").outerHeight(!0)+t.find(".info").outerHeight(!0)))},initialize:function(e){o.prototype.initialize.call(this),this.width=e.width,this.format=e.format,this.baseTemplate=e.baseTemplate,s.get().then(_.bind((function(t){var n;this.canUse=(n="ROLE_PREMIUM",_(t.roles).contains(n)||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN),this.render(),INKIVE.Helpers.initTooltips(this.$el),this.initImageLoad(this.$el.find(".base")),this.isMultiPage()&&e.openSet&&this.toggleSet()}),this))},getTemplateRenderData:function(){var e=this.format.width/this.format.height,t=this.width*(1/e),n=(this.width-5)/2*(1/e);return{url:this.getThumbnailURL(),show_options:INKIVE.Helpers.isDesygnerProject()||INKIVE.Helpers.isWeBrandTemplate(),thumb_height:Math.floor(t),can_use:this.canUse,half_thumb_height:Math.floor(n),is_set:this.isMultiPage(),name:this.baseTemplate.name||"Multiple pages set",set:function(){return _.map(this.baseTemplate.pages,this.getThumbnailURL,this)}.call(this),show_lock_icon:this.baseTemplate.is_premium&&!INKIVE.Helpers.isWeBrandTemplate()}},getThumbnailURL:function(e){if(!e&&this.baseTemplate&&this.baseTemplate.cover)return this.baseTemplate.cover;if(!this.baseTemplate.pages)return"";if(!(e=e||this.baseTemplate.pages[0]))return"";var t=r(e.design_id),n=INKIVE.Helpers.getBucketUrl(this.baseTemplate.master_bucket);return"".concat(n,"/344/").concat(this.baseTemplate.encoded_id,"/").concat(t,".jpg?").concat(e.last_mod)},displayLockedTemplateModal:function(){INKIVE.Helpers.displaySubscriptionModal("tool.templates.helper.description")},initImageLoad:function(e){function t(){$(this).removeAttr("height").closest(".thumbnail.image").removeClass("loading")}e.find("img").each((function(){this.onload=t,this.src=$(this).data("src")}))},isMultiPage:function(){return this.baseTemplate.is_multipage&&this.baseTemplate.pages&&this.baseTemplate.pages.length>1}})},{"../../../../facade/project/project":113,"../../../../factory/restrictions":149,"../../../../factory/user-info":161,"../../../../utils/md5":618,"./abstract/template":338,"./templates/template.hbs":389,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.is-integer.js":888,"core-js/modules/es.object.keys.js":901}],369:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.join.js");e("../../../../facade/design/design");var r=e("../../../../facade/editor/editor"),o=e("./abstract/base");t.exports=o.extend({width:66,height:66,template:e("./templates/shape.hbs"),fillColor:"#200E32",strokeColor:"#000",addElement:function(e){INKIVE.DesignFacade.create("shape",_.extend(e,{content:this.item.path}))},getClickElementData:function(e){var t=svgedit.utilities.getBBox(this.$draggableClone.find("svg path")[0]),n=Math.min(this.canvas.contentW,this.canvas.contentH);return n/=Math.max(t.width,t.height),{position:{x:(this.canvas.contentW-t.width*(n/2))/2,y:(this.canvas.contentH-t.height*(n/2))/2},size:{width:t.width*(n/2),height:t.height*(n/2)}}},getMouseUpElementData:function(e){var t=svgedit.utilities.getBBox(this.$draggableClone.find("svg path")[0]),n=this.$draggableClone.get(0).getBoundingClientRect(),o=r.handle("zoom","get"),i=this.editor.getOffset(),s=Math.min(this.canvas.contentW,this.canvas.contentH)/Math.max(t.width,t.height);return{position:$(e.target).parents(".root-popupmenu").length?{x:(this.canvas.contentW-t.width*(s/4))/2,y:(this.canvas.contentH-t.height*(s/4))/2}:{x:Math.floor4((n.left-i.x)/o),y:Math.floor4((n.top-i.y)/o)},size:{width:Math.floor4(t.width*(s/4)),height:Math.floor4(t.height*(s/4))},selected:!0}},initialize:function(e){e.width&&(this.width=e.width),e.height&&(this.height=e.height),this.item=e.item;var t=INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.theme;t&&(this.strokeColor=this.fillColor="dark"===t?"#D6D6D6":"#585858"),o.prototype.initialize.call(this)},getTemplateRenderData:function(){return{path:this.item.path,size:this.width,view_box:this.getViewBox(),stroke_width:1,stroke:this.strokeColor,fill:this.fillColor}},getViewBox:function(){var e=this.item.size,t=.05*e;return[-t,-t,e+2*t,e+2*t].join(" ")}})},{"../../../../facade/design/design":47,"../../../../facade/editor/editor":91,"./abstract/base":337,"./templates/shape.hbs":387,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868}],370:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var o=r(e("@babel/runtime/helpers/defineProperty")),i=e("./abstract/base"),s=e("../../../../facade/design/design");t.exports=i.extend({template:e("./templates/sticker.hbs"),events:(0,o.default)({"touchstart .item > .type":"toggleType","mousedown .item > .type":"toggleType","click .licence .close":"toggleType","mousedown .item":"mouseDown"},"mousedown .item","mouseDown"),toggleType:function(e){e.stopPropagation(),this.$el.toggleClass("details"),this.$el.css("height",""),this.trigger("resize",this.$el[0])},addElement:function(e,t){$(t).is(".replace-icon")?this.replaceElement():s.create("sticker",_.extend(this.item,e))},initialize:function(e){var t=INKIVE.Tool.getInstance();this.item=e.item,this.editor=t.editor,this.canvas=this.editor.canvas,i.prototype.initialize.call(this),this.setImageListeners()},render:function(){this.$el.html(this.template(this.item)),this.$draggable=this.$el.find(".draggable")},setImageListeners:function(){var e=new Image,t=this.$el;e.src=this.item.thumb_src,e.onload=_.bind((function(){var n=e.width/e.height;t.height(this.width/n),t.find("img").attr("src",e.src),this.trigger("loaded")}),this),e.onerror=_.bind(this.remove,this)},replaceElement:function(){var e=this.canvas.getSelectedElems(),t=1===e.length?$(e[0]):null;if(t&&t.is(".sticker, .icon, .logo")&&t.is(".element")){var n=t[0].getBBox(),r=Math.max(n.width,n.height),o={size:{width:r,height:r},position:{x:n.x,y:n.y},selected:!0};s.handle(t.attr("id"),"delete"),s.create("sticker",_.extend(this.item,o))}}})},{"../../../../facade/design/design":47,"./abstract/base":337,"./templates/sticker.hbs":388,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],371:[function(e,t,n){"use strict";e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js");var r=e("../../../../utils/md5"),o=e("./abstract/template"),i=e("../../../../facade/design/design"),s=e("../../../../facade/project/project");t.exports=o.extend({height:null,template:e("./templates/template.hbs"),events:{"click .base":"addEvent",'click .options li[data-type="new-page"]':"addToNewPageEvent",'click .options li[data-type="this-page"]':"addToThisPageEvent"},addEvent:function(e){this.setTemplate()},addToNewPageEvent:function(e){e.stopPropagation(),this.setOnNewPage()},addToThisPageEvent:function(e){e.stopPropagation(),this.setTemplate()},setOnNewPage:function(){s.handle("design","add",{quiet:!0}).then(this.setTemplate)},setTemplate:function(){var e=this;this.editor.loadingElement(1),i.once("template.update.restricted",(function(){e.editor.loadingElement(0),setTimeout((function(){INKIVE.DesignFacade.trigger("template.update.template_applied_on_current_page")}),5e3)})),i.set("template",{restricted:{keep_permissions:!0,page:this.pageNumber+1,id:this.baseTemplate.encoded_id}})},initialize:function(e){_.bindAll(this,"setTemplate","setOnNewPage"),o.prototype.initialize.call(this),this.width=e.width,this.format=e.format,this.pageNumber=e.pageNumber,this.baseTemplate=e.template,this.canChangePageOrder=e.canChangePageOrder,this.render(),this.initImageLoad(this.$el.find(".base"))},getTemplateRenderData:function(){var e=this.format.width/this.format.height,t=this.width*(1/e);return{url:function(){var e=this.baseTemplate.pages[this.pageNumber],t=r(e.design_id);return INKIVE.Helpers.getBucketUrl(this.baseTemplate.master_bucket)+"/344/"+this.baseTemplate.encoded_id+"/"+t+".jpg?"+e.last_mod}.call(this),show_options:this.canChangePageOrder,thumb_height:Math.floor(t)}},initImageLoad:function(e){function t(){$(this).removeAttr("height").closest(".thumbnail.image").removeClass("loading")}e.find("img").each((function(){this.onload=t,this.src=$(this).data("src")}))}})},{"../../../../facade/design/design":47,"../../../../facade/project/project":113,"../../../../utils/md5":618,"./abstract/template":338,"./templates/template.hbs":389,"core-js/modules/es.array.find.js":859,"core-js/modules/web.timers.js":966}],372:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'<div class="uploader progress-button">\n  <svg class="progress-circle" width="70" height="70">\n    <path d="m35,2.5c17.955803,0 32.5,14.544199 32.5,32.5c0,17.955803 -14.544197,32.5 -32.5,32.5c-17.955803,0 -32.5,-14.544197 -32.5,-32.5c0,-17.955801 14.544197,-32.5 32.5,-32.5z"/>\n  </svg>\n\n  <svg class="checkmark" width="70" height="70">\n    <path d="m31.5,46.5l15.3,-23.2"/>\n    <path d="m31.5,46.5l-8.5,-7.1"/>\n  </svg>\n\n  <svg class="cross" width="70" height="70">\n    <path d="m35,35l-9.3,-9.3"/>\n    <path d="m35,35l9.3,9.3"/>\n    <path d="m35,35l-9.3,9.3"/>\n    <path d="m35,35l9.3,-9.3"/>\n  </svg>\n</div>\n'},3:function(e,t,n,r,o){return" hidden"},5:function(e,t,n,r,o){return'style="opacity: 0"'},7:function(e,t,n,r,o){return'data-banner="true"'},9:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img id="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:22,column:21},end:{line:22,column:29}}}):i)+'" src="'+l("function"==typeof(i=null!=(i=c(n,"src")||(null!=t?c(t,"src"):t))?i:a)?i.call(s,{name:"src",hash:{},data:o,loc:{start:{line:22,column:36},end:{line:22,column:45}}}):i)+'">'},11:function(e,t,n,r,o){var i=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="thumb_sticker" data-popover="tooltip" data-original-title="'+i((s(n,"t")||t&&s(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.images.times_used",t,{name:"t",hash:{},data:o,loc:{start:{line:26,column:73},end:{line:26,column:105}}}))+'">'+i(e.lambda(t,t))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h="";return s=null!=(s=p(n,"upload")||(null!=t?p(t,"upload"):t))?s:c,a={name:"upload",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:19,column:11}}},i=typeof s===u?s.call(l,a):s,p(n,"upload")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='\n<a class="item',s=null!=(s=p(n,"image")||(null!=t?p(t,"image"):t))?s:c,a={name:"image",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:21,column:14},end:{line:21,column:41}}},i=typeof s===u?s.call(l,a):s,p(n,"image")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='"',s=null!=(s=p(n,"no_opacity")||(null!=t?p(t,"no_opacity"):t))?s:c,a={name:"no_opacity",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:42},end:{line:21,column:90}}},i=typeof s===u?s.call(l,a):s,p(n,"no_opacity")||(i=d.call(t,i,a)),null!=i&&(h+=i),s=null!=(s=p(n,"banner")||(null!=t?p(t,"banner"):t))?s:c,a={name:"banner",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:90},end:{line:21,column:130}}},i=typeof s===u?s.call(l,a):s,p(n,"banner")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+=">\n  ",s=null!=(s=p(n,"image")||(null!=t?p(t,"image"):t))?s:c,a={name:"image",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:2},end:{line:22,column:57}}},i=typeof s===u?s.call(l,a):s,p(n,"image")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+="\n</a>\n\n",s=null!=(s=p(n,"times_used")||(null!=t?p(t,"times_used"):t))?s:c,a={name:"times_used",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:25,column:0},end:{line:27,column:15}}},i=typeof s===u?s.call(l,a):s,p(n,"times_used")||(i=d.call(t,i,a)),null!=i&&(h+=i),h},useData:!0})},{"hbsfy/runtime":1024}],373:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=(s(n,"neq")||t&&s(t,"neq")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"color"):t,"none",{name:"neq",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:27},end:{line:1,column:87}}}))?i:""},2:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'style="background: '+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"color")||(null!=t?s(t,"color"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"color",hash:{},data:o,loc:{start:{line:1,column:67},end:{line:1,column:78}}}):i)+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span "+(null!=(i=(s(n,"neq")||t&&s(t,"neq")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"color"):t,"NONE",{name:"neq",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:6},end:{line:1,column:95}}}))?i:"")+"></span>\n"},useData:!0})},{"hbsfy/runtime":1024}],374:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item">\n  <svg width="'+c("function"==typeof(s=null!=(s=u(n,"width")||(null!=t?u(t,"width"):t))?s:l)?s.call(a,{name:"width",hash:{},data:o,loc:{start:{line:2,column:14},end:{line:2,column:25}}}):s)+'" height="'+c("function"==typeof(s=null!=(s=u(n,"height")||(null!=t?u(t,"height"):t))?s:l)?s.call(a,{name:"height",hash:{},data:o,loc:{start:{line:2,column:35},end:{line:2,column:47}}}):s)+'">\n    <defs>'+(null!=(i="function"==typeof(s=null!=(s=u(n,"defs")||(null!=t?u(t,"defs"):t))?s:l)?s.call(a,{name:"defs",hash:{},data:o,loc:{start:{line:3,column:10},end:{line:3,column:22}}}):s)?i:"")+"</defs>\n    "+(null!=(i="function"==typeof(s=null!=(s=u(n,"content")||(null!=t?u(t,"content"):t))?s:l)?s.call(a,{name:"content",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:19}}}):s)?i:"")+"\n  </svg>\n</a>\n"},useData:!0})},{"hbsfy/runtime":1024}],375:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return" dark"},3:function(e,t,n,r,o){return'<span class="name">'+e.escapeExpression(e.lambda(t,t))+"</span><br>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lambda,l=e.escapeExpression,c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="color'+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"is_dark"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:17},end:{line:1,column:49}}}))?i:"")+'" style="background-color: '+l(a(null!=(i=null!=t?u(t,"data"):t)?u(i,"color_code"):i,t))+'">\n  <div class="info">\n    '+(null!=(i=e.hooks.blockHelperMissing.call(t,a(null!=(i=null!=t?u(t,"data"):t)?u(i,"name"):i,t),{name:"data.name",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:3,column:69}}}))?i:"")+'\n    <span class="code">'+l(a(null!=(i=null!=t?u(t,"data"):t)?u(i,"color_code"):i,t))+'</span>\n  </div>\n\n  <div class="overlay">\n    <ul class="options">\n      <li data-type="fill" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((u(n,"t")||t&&u(t,"t")||c).call(s,"tool.library.tooltip.fill",{name:"t",hash:{},data:o,loc:{start:{line:10,column:31},end:{line:10,column:64}}}))+'">\n        <i class="fa fa-circle"></i></li>\n      <li data-type="stroke" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((u(n,"t")||t&&u(t,"t")||c).call(s,"tool.library.tooltip.stroke",{name:"t",hash:{},data:o,loc:{start:{line:13,column:31},end:{line:13,column:66}}}))+'">\n        <i class="fa fa-circle-o"></i></li>\n      <li data-type="font" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((u(n,"t")||t&&u(t,"t")||c).call(s,"tool.library.tooltip.font",{name:"t",hash:{},data:o,loc:{start:{line:16,column:31},end:{line:16,column:64}}}))+'">\n        <i class="fa fa-font"></i></li>\n      <li data-type="background" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((u(n,"t")||t&&u(t,"t")||c).call(s,"popupmenu.tooltip.set_background",{name:"t",hash:{},data:o,loc:{start:{line:19,column:31},end:{line:19,column:71}}}))+'">\n        <i class="fa fa-th"></i></li>\n    </ul>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],376:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="folder">\n  <a href="javascript:void(0)" class="folder-name">'+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"</a>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],377:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="image item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l(e.lambda(null!=(i=null!=t?c(t,"data"):t)?c(i,"thumb"):i,t))+'" />\n\n  <div class="overlay icon hidden">\n    <ul class="options">\n      <li data-type="icon" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.icon.tooltip.add",{name:"t",hash:{},data:o,loc:{start:{line:8,column:31},end:{line:8,column:60}}}))+'">\n        <i class="fa fa-plus"></i></li>\n      <li data-type="replace-icon" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.icon.tooltip.replace",{name:"t",hash:{},data:o,loc:{start:{line:11,column:31},end:{line:11,column:64}}}))+'">\n        <i class="fa fa-refresh replace-icon"></i></li>\n    </ul>\n    '+(null!=(i=c(n,"if").call(s,null!=(i=null!=t?c(t,"data"):t)?c(i,"name"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:4},end:{line:14,column:56}}}))?i:"")+"\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],378:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <li data-type="background" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.tooltip.set_background",{name:"t",hash:{},data:o,loc:{start:{line:15,column:31},end:{line:15,column:71}}}))+'"><i class="fa fa-th"></i></li>\n'},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="image item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l(e.lambda(null!=(i=null!=t?c(t,"data"):t)?c(i,"thumb"):i,t))+'" width="100%"/>\n\n  <div class="overlay image">\n    <ul class="options">\n      <li data-type="image" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.library.tooltip.image",{name:"t",hash:{},data:o,loc:{start:{line:8,column:31},end:{line:8,column:65}}}))+'">\n        <i class="fa fa-plus"></i></li>\n      <li data-type="replace-image" class="hidden" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.images.tooltip.replace_image",{name:"t",hash:{},data:o,loc:{start:{line:11,column:31},end:{line:11,column:72}}}))+'">\n        <i class="fa fa-refresh replace-image"></i></li>\n'+(null!=(i=c(n,"if").call(s,null!=t?c(t,"show_background"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:4},end:{line:16,column:11}}}))?i:"")+"    </ul>\n    "+(null!=(i=c(n,"if").call(s,null!=(i=null!=t?c(t,"data"):t)?c(i,"name"):i,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:4},end:{line:18,column:56}}}))?i:"")+"\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],379:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="image item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l(e.lambda(null!=(i=null!=t?c(t,"data"):t)?c(i,"thumb"):i,t))+'" />\n\n  <div class="overlay logo hidden">\n    <ul class="options">\n      <li data-type="logo" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.logo.tooltip.add",{name:"t",hash:{},data:o,loc:{start:{line:8,column:31},end:{line:8,column:60}}}))+'">\n        <i class="fa fa-plus"></i></li>\n      <li data-type="replace-logo" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.logo.tooltip.replace",{name:"t",hash:{},data:o,loc:{start:{line:11,column:31},end:{line:11,column:64}}}))+'">\n        <i class="fa fa-refresh replace-logo"></i></li>\n    </ul>\n    '+(null!=(i=c(n,"if").call(s,null!=(i=null!=t?c(t,"data"):t)?c(i,"name"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:4},end:{line:14,column:56}}}))?i:"")+"\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],380:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return" dark"},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          "+(null!=(i=(s(n,"ln2br")||t&&s(t,"ln2br")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(i=null!=t?s(t,"data"):t)?s(i,"default_content"):i,{name:"ln2br",hash:{},data:o,loc:{start:{line:5,column:10},end:{line:5,column:44}}}))?i:"")+"\n"},5:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          "+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"\n"},7:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"font-weight: "+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"weight"):i,t))+";"},9:function(e,t,n,r,o){return"font-style: italic;"},11:function(e,t,n,r,o){return"text-decoration: underline;"},13:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+(null!=(i=(s(n,"ln2br")||t&&s(t,"ln2br")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(i=null!=t?s(t,"data"):t)?s(i,"default_content"):i,{name:"ln2br",hash:{},data:o,loc:{start:{line:33,column:33},end:{line:33,column:67}}}))?i:"")+" "},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="text item'+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"is_dark"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:21},end:{line:1,column:53}}}))?i:"")+'">\n  <div class="content">\n    <span class="name">\n'+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"default_content"):i,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:4,column:8},end:{line:8,column:15}}}))?i:"")+'    </span>\n    <div class="overlay text hidden">\n      <ul class="options">\n        <li data-type="text" data-popover="tooltip"\n            data-placement="left" data-original-title="'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"tool.text.tooltip.add",{name:"t",hash:{},data:o,loc:{start:{line:13,column:55},end:{line:13,column:84}}}))+'">\n          <icon><svg><use xlink:href="#editor-plus"></use></svg></icon>\n        </li>\n\n        <li data-type="replace-text" data-popover="tooltip"\n            data-placement="left" data-original-title="'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"tool.text.tooltip.replace",{name:"t",hash:{},data:o,loc:{start:{line:18,column:55},end:{line:18,column:88}}}))+'">\n          <icon><svg class="replace-text"><use xlink:href="#arrows-circle"></use></svg></icon>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="draggable" style="\n    font-family: \''+l((u(n,"font_quote")||t&&u(t,"font_quote")||a).call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"family"):i,{name:"font_quote",hash:{},data:o,loc:{start:{line:26,column:18},end:{line:26,column:45}}}))+"';\n    color: "+l(c(null!=(i=null!=t?u(t,"data"):t)?u(i,"color_code"):i,t))+";\n    letter-spacing: "+l(c(null!=(i=null!=t?u(t,"data"):t)?u(i,"letter_spacing"):i,t))+"px;\n    word-spacing: "+l(c(null!=(i=null!=t?u(t,"data"):t)?u(i,"word_spacing"):i,t))+"px;\n    "+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"weight"):i,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:4},end:{line:30,column:61}}}))?i:"")+"\n    "+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"italic"):i,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:4},end:{line:31,column:49}}}))?i:"")+"\n    "+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"underline"):i,{name:"if",hash:{},fn:e.program(11,o,0),inverse:e.noop,data:o,loc:{start:{line:32,column:4},end:{line:32,column:60}}}))?i:"")+'">\n    '+(null!=(i=u(n,"if").call(s,null!=(i=null!=t?u(t,"data"):t)?u(i,"default_content"):i,{name:"if",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:4},end:{line:33,column:75}}}))?i:"")+"\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],381:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"data"):t)?s(i,"name"):i,t))+"</span>"},3:function(e,t,n,r,o){return'    <div class="youtube-logo">\n      <svg>\n        <use xlink:href="#youtube"></use>\n      </svg>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="image item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l(e.lambda(null!=(i=null!=t?c(t,"data"):t)?c(i,"thumb"):i,t))+'" />\n  <div class="overlay video">\n    <ul class="options">\n      <li data-type="video" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.video.tooltip.add",{name:"t",hash:{},data:o,loc:{start:{line:7,column:31},end:{line:7,column:61}}}))+'">\n        <i class="fa fa-plus"></i></li>\n      <li data-type="replace-video" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.video.tooltip.replace",{name:"t",hash:{},data:o,loc:{start:{line:10,column:31},end:{line:10,column:65}}}))+'">\n        <i class="fa fa-refresh replace-video"></i></li>\n    </ul>\n    '+(null!=(i=c(n,"if").call(s,null!=(i=null!=t?c(t,"data"):t)?c(i,"name"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:4},end:{line:13,column:56}}}))?i:"")+"\n  </div>\n"+(null!=(i=c(n,"if").call(s,null!=(i=null!=t?c(t,"data"):t)?c(i,"source"):i,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:2},end:{line:21,column:9}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],382:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item" style="background-color: '+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"color")||(null!=t?s(t,"color"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"color",hash:{},data:o,loc:{start:{line:1,column:41},end:{line:1,column:52}}}):i)+'"></a>\n'},useData:!0})},{"hbsfy/runtime":1024}],383:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l("function"==typeof(i=null!=(i=c(n,"source")||(null!=t?c(t,"source"):t))?i:a)?i.call(s,{name:"source",hash:{},data:o,loc:{start:{line:3,column:30},end:{line:3,column:42}}}):i)+'" />\n</a>\n'},useData:!0})},{"hbsfy/runtime":1024}],384:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l("function"==typeof(i=null!=(i=c(n,"thumb_src")||(null!=t?c(t,"thumb_src"):t))?i:a)?i.call(s,{name:"thumb_src",hash:{},data:o,loc:{start:{line:3,column:30},end:{line:3,column:45}}}):i)+'" />\n</a>\n'},useData:!0})},{"hbsfy/runtime":1024}],385:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"font-weight: "+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"weight")||(null!=t?s(t,"weight"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"weight",hash:{},data:o,loc:{start:{line:5,column:29},end:{line:5,column:41}}}):i)+";"},3:function(e,t,n,r,o){return"font-style: italic;"},5:function(e,t,n,r,o){return"text-decoration: underline;"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="item content" style="\n  font-family: '+c("function"==typeof(s=null!=(s=u(n,"family")||(null!=t?u(t,"family"):t))?s:l)?s.call(a,{name:"family",hash:{},data:o,loc:{start:{line:2,column:15},end:{line:2,column:27}}}):s)+";\n  letter-spacing: "+c("function"==typeof(s=null!=(s=u(n,"letter_spacing")||(null!=t?u(t,"letter_spacing"):t))?s:l)?s.call(a,{name:"letter_spacing",hash:{},data:o,loc:{start:{line:3,column:18},end:{line:3,column:38}}}):s)+"px;\n  word-spacing: "+c("function"==typeof(s=null!=(s=u(n,"word_spacing")||(null!=t?u(t,"word_spacing"):t))?s:l)?s.call(a,{name:"word_spacing",hash:{},data:o,loc:{start:{line:4,column:16},end:{line:4,column:34}}}):s)+"px;\n  "+(null!=(i=u(n,"if").call(a,null!=t?u(t,"weight"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:2},end:{line:5,column:49}}}))?i:"")+"\n  "+(null!=(i=u(n,"if").call(a,null!=t?u(t,"italic"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:6,column:42}}}))?i:"")+"\n  "+(null!=(i=u(n,"if").call(a,null!=t?u(t,"underline"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:2},end:{line:7,column:53}}}))?i:"")+'">\n  '+c("function"==typeof(s=null!=(s=u(n,"content")||(null!=t?u(t,"content"):t))?s:l)?s.call(a,{name:"content",hash:{},data:o,loc:{start:{line:8,column:2},end:{line:8,column:15}}}):s)+"\n</span>\n"},useData:!0})},{"hbsfy/runtime":1024}],386:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item">\n  <div class="loading" style="background-image: url(\''+l((c(n,"route")||t&&c(t,"route")||a).call(s,"assets/img/editor/loading-128.gif",{name:"route",hash:{},data:o,loc:{start:{line:2,column:53},end:{line:2,column:99}}}))+'\')"></div>\n  <img class="draggable" src="'+l("function"==typeof(i=null!=(i=c(n,"thumbnail")||(null!=t?c(t,"thumbnail"):t))?i:a)?i.call(s,{name:"thumbnail",hash:{},data:o,loc:{start:{line:3,column:30},end:{line:3,column:45}}}):i)+'" />\n</a>\n'},useData:!0})},{"hbsfy/runtime":1024}],387:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="item" href="#">\n  <svg xmlns="http://www.w3.org/2000/svg" width="'+c(typeof(i=null!=(i=u(n,"size")||(null!=t?u(t,"size"):t))?i:a)===l?i.call(s,{name:"size",hash:{},data:o,loc:{start:{line:2,column:49},end:{line:2,column:59}}}):i)+'" height="'+c(typeof(i=null!=(i=u(n,"size")||(null!=t?u(t,"size"):t))?i:a)===l?i.call(s,{name:"size",hash:{},data:o,loc:{start:{line:2,column:69},end:{line:2,column:79}}}):i)+'" viewBox="'+c(typeof(i=null!=(i=u(n,"view_box")||(null!=t?u(t,"view_box"):t))?i:a)===l?i.call(s,{name:"view_box",hash:{},data:o,loc:{start:{line:2,column:90},end:{line:2,column:104}}}):i)+'">\n    <path fill="'+c(typeof(i=null!=(i=u(n,"fill")||(null!=t?u(t,"fill"):t))?i:a)===l?i.call(s,{name:"fill",hash:{},data:o,loc:{start:{line:3,column:16},end:{line:3,column:26}}}):i)+'" stroke="'+c(typeof(i=null!=(i=u(n,"stroke")||(null!=t?u(t,"stroke"):t))?i:a)===l?i.call(s,{name:"stroke",hash:{},data:o,loc:{start:{line:3,column:36},end:{line:3,column:48}}}):i)+'" stroke-width="'+c(typeof(i=null!=(i=u(n,"stroke_width")||(null!=t?u(t,"stroke_width"):t))?i:a)===l?i.call(s,{name:"stroke_width",hash:{},data:o,loc:{start:{line:3,column:64},end:{line:3,column:82}}}):i)+'" d="'+c(typeof(i=null!=(i=u(n,"path")||(null!=t?u(t,"path"):t))?i:a)===l?i.call(s,{name:"path",hash:{},data:o,loc:{start:{line:3,column:87},end:{line:3,column:97}}}):i)+'" />\n  </svg>\n</a>\n'},useData:!0})},{"hbsfy/runtime":1024}],388:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"by-cc"},3:function(e,t,n,r,o){return"free"},5:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="author">\n      <a target="_blank" href="">by '+c("function"==typeof(s=null!=(s=u(n,"author_name")||(null!=t?u(t,"author_name"):t))?s:l)?s.call(a,{name:"author_name",hash:{},data:o,loc:{start:{line:23,column:36},end:{line:23,column:51}}}):s)+" - "+c("function"==typeof(s=null!=(s=u(n,"author_url")||(null!=t?u(t,"author_url"):t))?s:l)?s.call(a,{name:"author_url",hash:{},data:o,loc:{start:{line:23,column:54},end:{line:23,column:70}}}):s)+"</a>\n"+(null!=(i=u(n,"if").call(a,null!=t?u(t,"from_name"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:6},end:{line:26,column:13}}}))?i:"")+"    </div>\n"},6:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a target="_blank" href="">from '+l("function"==typeof(i=null!=(i=c(n,"from_name")||(null!=t?c(t,"from_name"):t))?i:a)?i.call(s,{name:"from_name",hash:{},data:o,loc:{start:{line:25,column:38},end:{line:25,column:51}}}):i)+" - "+l("function"==typeof(i=null!=(i=c(n,"from_url")||(null!=t?c(t,"from_url"):t))?i:a)?i.call(s,{name:"from_url",hash:{},data:o,loc:{start:{line:25,column:54},end:{line:25,column:68}}}):i)+"</a>\n"},8:function(e,t,n,r,o){return'    <h3 class="info">CC BY Licence</h3>\n    <p>You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</p>\n'},10:function(e,t,n,r,o){return'    <h3 class="info">FREE</h3>\n    <p>Use this icon in all your designs</p>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='<a class="item">\n  <img class="draggable" src="'+u("function"==typeof(s=null!=(s=d(n,"thumb")||(null!=t?d(t,"thumb"):t))?s:c)?s.call(l,{name:"thumb",hash:{},data:o,loc:{start:{line:2,column:30},end:{line:2,column:41}}}):s)+'" />\n  \x3c!-- <span class="type">'+(null!=(i=d(n,"if").call(l,null!=t?d(t,"licence"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:3,column:26},end:{line:3,column:65}}}))?i:"")+'</span> --\x3e\n  <div class="overlay sticker hidden">\n    <ul class="options">\n      <li data-type="icon" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.icon.tooltip.add",{name:"t",hash:{},data:o,loc:{start:{line:7,column:31},end:{line:7,column:60}}}))+'">\n        <i class="fa fa-plus"></i></li>\n      <li data-type="replace-icon" data-placement="bottom" data-popover="tooltip"\n          data-original-title="'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.icon.tooltip.replace",{name:"t",hash:{},data:o,loc:{start:{line:10,column:31},end:{line:10,column:64}}}))+'">\n        <i class="fa fa-refresh replace-icon"></i></li>\n    </ul>\n  </div>\n</a>\n\n\x3c!-- <div class="licence">\n  <div class="line"><div class="triangle"></div></div>\n  <h3 class="info">'+u("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:c)?s.call(l,{name:"name",hash:{},data:o,loc:{start:{line:18,column:19},end:{line:18,column:29}}}):s)+'</h3>\n  <span class="close"><i class="desygner-icon-close"></i></span>\n\n';return s=null!=(s=d(n,"licence")||(null!=t?d(t,"licence"):t))?s:c,a={name:"licence",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:2},end:{line:28,column:14}}},i="function"==typeof s?s.call(l,a):s,d(n,"licence")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(p+=i),p+"\n  <hr>\n\n"+(null!=(i=d(n,"if").call(l,null!=t?d(t,"licence"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.program(10,o,0),data:o,loc:{start:{line:32,column:2},end:{line:38,column:9}}}))?i:"")+"</div> --\x3e\n"},useData:!0})},{"hbsfy/runtime":1024}],389:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'data-original-title="'+e.escapeExpression(e.lambda(t,t))+'"'},3:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='  <p class="description';return s=null!=(s=p(n,"is_single_line")||(null!=t?p(t,"is_single_line"):t))?s:c,a={name:"is_single_line",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:7,column:23},end:{line:7,column:70}}},i=typeof s===u?s.call(l,a):s,p(n,"is_single_line")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(h+=i),h+'">\n    <label>'+d(typeof(s=null!=(s=p(n,"name")||(null!=t?p(t,"name"):t))?s:c)===u?s.call(l,{name:"name",hash:{},data:o,loc:{start:{line:8,column:11},end:{line:8,column:21}}}):s)+"</label>\n    <span>"+d(typeof(s=null!=(s=p(n,"width")||(null!=t?p(t,"width"):t))?s:c)===u?s.call(l,{name:"width",hash:{},data:o,loc:{start:{line:9,column:10},end:{line:9,column:21}}}):s)+"x"+d(typeof(s=null!=(s=p(n,"height")||(null!=t?p(t,"height"):t))?s:c)===u?s.call(l,{name:"height",hash:{},data:o,loc:{start:{line:9,column:22},end:{line:9,column:34}}}):s)+d(typeof(s=null!=(s=p(n,"unit")||(null!=t?p(t,"unit"):t))?s:c)===u?s.call(l,{name:"unit",hash:{},data:o,loc:{start:{line:9,column:34},end:{line:9,column:44}}}):s)+"</span>\n  </p>\n"},4:function(e,t,n,r,o){return" no-break"},6:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p="";return s=null!=(s=d(n,"can_use")||(null!=t?d(t,"can_use"):t))?s:c,a={name:"can_use",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:4},end:{line:18,column:16}}},i="function"==typeof s?s.call(l,a):s,d(n,"can_use")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n    ",s=null!=(s=d(n,"can_use")||(null!=t?d(t,"can_use"):t))?s:c,a={name:"can_use",hash:{},fn:e.noop,inverse:e.program(9,o,0),data:o,loc:{start:{line:20,column:4},end:{line:20,column:68}}},i="function"==typeof s?s.call(l,a):s,d(n,"can_use")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"\n"},7:function(e,t,n,r,o){return'    <div class="premium">\n        <i class="fa fa-unlock-alt" aria-hidden="true"></i>\n    </div>\n'},9:function(e,t,n,r,o){return'<div class="crown-premium-option"></div>'},11:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="set-size">'+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"set"):t)?s(i,"length"):i,t))+"</span>\n"},13:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"show_options"):t,{name:"if",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:4},end:{line:36,column:11}}}))?i:""},14:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="overlay template">\n      <div class="overlay-background"></div>\n      <ul class="options">\n        <li data-type="this-page" data-placement="bottom" data-popover="tooltip" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.templates.tooltip.this_page",{name:"t",hash:{},data:o,loc:{start:{line:30,column:102},end:{line:31,column:10}}}))+'"><i class="fa fa-th"></i></li>\n        <li data-type="new-page" data-placement="bottom" data-popover="tooltip" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.templates.tooltip.add_page",{name:"t",hash:{},data:o,loc:{start:{line:32,column:101},end:{line:33,column:10}}}))+'"><i class="fa fa-plus"></i></li>\n      </ul>\n    </div>\n'},16:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="set collapsed">\n  <div class="line"><div class="triangle"></div></div>\n  <h3 class="info">'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"name")||(null!=t?u(t,"name"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"name",hash:{},data:o,loc:{start:{line:43,column:19},end:{line:43,column:29}}}):l)+'</h3>\n  <span class="close"><i class="desygner-icon-close"></i></span>\n  <ul>'+(null!=(a=u(n,"each").call(c,null!=t?u(t,"set"):t,{name:"each",hash:{},fn:e.program(17,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:45,column:6},end:{line:58,column:14}}}))?a:"")+"</ul>\n</div>\n"},17:function(e,t,n,r,o,i,s){var a,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!--\n  --\x3e<li class="set-page">\n'+(null!=(a=u(n,"if").call(null!=t?t:e.nullContext||{},null!=s[1]?u(s[1],"show_options"):s[1],{name:"if",hash:{},fn:e.program(18,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:47,column:6},end:{line:55,column:13}}}))?a:"")+'      <img data-src="'+c(l(t,t))+'" height="'+c(l(null!=s[1]?u(s[1],"half_thumb_height"):s[1],t))+'" />\n    </li>\x3c!--\n  --\x3e'},18:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="overlay template">\n        <div class="overlay-background"></div>\n        <ul class="options">\n          <li data-type="this-page" data-popover="tooltip" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.templates.tooltip.this_page",{name:"t",hash:{},data:o,loc:{start:{line:51,column:80},end:{line:51,column:120}}}))+'"><i class="fa fa-th"></i></li>\n          <li data-type="new-page" data-popover="tooltip" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.templates.tooltip.add_page",{name:"t",hash:{},data:o,loc:{start:{line:52,column:79},end:{line:52,column:118}}}))+'"><i class="fa fa-plus"></i></li>\n        </ul>\n      </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c,u=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,p=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='<div class="base">\n  <div class="image-wrapper">\n    <img data-src="'+p("function"==typeof(l=null!=(l=h(n,"url")||(null!=t?h(t,"url"):t))?l:d)?l.call(u,{name:"url",hash:{},data:o,loc:{start:{line:3,column:19},end:{line:3,column:28}}}):l)+'" data-popover="tooltip" ';return l=null!=(l=h(n,"name")||(null!=t?h(t,"name"):t))?l:d,c={name:"name",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:3,column:53},end:{line:3,column:100}}},a="function"==typeof l?l.call(u,c):l,h(n,"name")||(a=e.hooks.blockHelperMissing.call(t,a,c)),null!=a&&(m+=a),m+' height="'+p("function"==typeof(l=null!=(l=h(n,"thumb_height")||(null!=t?h(t,"thumb_height"):t))?l:d)?l.call(u,{name:"thumb_height",hash:{},data:o,loc:{start:{line:3,column:109},end:{line:3,column:127}}}):l)+'" />\n  </div>\n  <span class="overlay"></span>\n'+(null!=(a=h(n,"if").call(u,null!=t?h(t,"width"):t,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:11,column:9}}}))?a:"")+"\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"show_lock_icon"):t,{name:"if",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:13,column:2},end:{line:21,column:9}}}))?a:"")+"\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"is_set"):t,{name:"if",hash:{},fn:e.program(11,o,0,i,s),inverse:e.program(13,o,0,i,s),data:o,loc:{start:{line:23,column:2},end:{line:37,column:9}}}))?a:"")+"</div>\n\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"is_set"):t,{name:"if",hash:{},fn:e.program(16,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:40,column:0},end:{line:60,column:7}}}))?a:"")},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],390:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"hidden"},3:function(e,t,n,r,o){return" applied"},5:function(e,t,n,r,o){var i,s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='    <li class="underline-font">\n      <a class="btn btn-onmenu';return s=null!=(s=l(n,"text_decoration")||(null!=t?l(t,"text_decoration"):t))?s:e.hooks.helperMissing,a={name:"text_decoration",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:33,column:30},end:{line:33,column:78}}},i="function"==typeof s?s.call(null!=t?t:e.nullContext||{},a):s,l(n,"text_decoration")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(c+=i),c+'" data-popover="tooltip" data-original-title="Underline" data-title="Underline">\n        <i class="desygner-icon-underline"></i>\n      </a>\n    </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='<div class="line-container">\n  <a id="'+d(typeof(s=null!=(s=h(n,"id")||(null!=t?h(t,"id"):t))?s:c)===u?s.call(l,{name:"id",hash:{},data:o,loc:{start:{line:2,column:9},end:{line:2,column:17}}}):s)+'" class="item" data-popover="tooltip" data-original-title="'+d(typeof(s=null!=(s=h(n,"font_family")||(null!=t?h(t,"font_family"):t))?s:c)===u?s.call(l,{name:"font_family",hash:{},data:o,loc:{start:{line:2,column:76},end:{line:2,column:93}}}):s)+": "+d(typeof(s=null!=(s=h(n,"font_size")||(null!=t?h(t,"font_size"):t))?s:c)===u?s.call(l,{name:"font_size",hash:{},data:o,loc:{start:{line:2,column:95},end:{line:2,column:110}}}):s)+'" style="font-size: '+d(typeof(s=null!=(s=h(n,"font_size")||(null!=t?h(t,"font_size"):t))?s:c)===u?s.call(l,{name:"font_size",hash:{},data:o,loc:{start:{line:2,column:130},end:{line:2,column:145}}}):s)+"; font-family: '"+d((h(n,"font_quote")||t&&h(t,"font_quote")||c).call(l,null!=t?h(t,"font_family"):t,{name:"font_quote",hash:{},data:o,loc:{start:{line:2,column:161},end:{line:2,column:188}}}))+"'; font-weight: "+d(typeof(s=null!=(s=h(n,"font_weight")||(null!=t?h(t,"font_weight"):t))?s:c)===u?s.call(l,{name:"font_weight",hash:{},data:o,loc:{start:{line:2,column:204},end:{line:2,column:221}}}):s)+"; font-style: "+d(typeof(s=null!=(s=h(n,"font_style")||(null!=t?h(t,"font_style"):t))?s:c)===u?s.call(l,{name:"font_style",hash:{},data:o,loc:{start:{line:2,column:235},end:{line:2,column:251}}}):s)+"; text-decoration: "+d(typeof(s=null!=(s=h(n,"text_decoration")||(null!=t?h(t,"text_decoration"):t))?s:c)===u?s.call(l,{name:"text_decoration",hash:{},data:o,loc:{start:{line:2,column:270},end:{line:2,column:291}}}):s)+'">&nbsp;</a>\n\n  <input type="text" />\n  <a href="#" class="toggle-options ';return s=null!=(s=h(n,"options_hidden")||(null!=t?h(t,"options_hidden"):t))?s:c,a={name:"options_hidden",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:36},end:{line:5,column:80}}},i=typeof s===u?s.call(l,a):s,h(n,"options_hidden")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+='" ><i class="desygner-icon-sound-mix"></i></a>\n</div>\n\n<div class="menu options hidden">\n  <ul>\n    <li class="fonts-list">\n      <a class="btn btn-onmenu toggle">\n        <i class="desygner-icon-font"></i>\n        <span class="ui-dropdown-title">'+d(typeof(s=null!=(s=h(n,"font_family")||(null!=t?h(t,"font_family"):t))?s:c)===u?s.call(l,{name:"font_family",hash:{},data:o,loc:{start:{line:13,column:40},end:{line:13,column:57}}}):s)+'</span>\n        <i class="desygner-icon-unfold_more"></i>\n      </a>\n      <div class="ui-dropdown-items ui-dropdown-div hidden"></div>\n    </li>\n\n    <li class="bold-font">\n      <a class="btn btn-onmenu',s=null!=(s=h(n,"font_weight")||(null!=t?h(t,"font_weight"):t))?s:c,a={name:"font_weight",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:30},end:{line:20,column:70}}},i=typeof s===u?s.call(l,a):s,h(n,"font_weight")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+='" data-original-title="Bold" data-title="Bold">\n        <i class="desygner-icon-bold"></i>\n      </a>\n    </li>\n\n    <li class="italic-font">\n      <a class="btn btn-onmenu',s=null!=(s=h(n,"font_style")||(null!=t?h(t,"font_style"):t))?s:c,a={name:"font_style",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:30},end:{line:26,column:68}}},i=typeof s===u?s.call(l,a):s,h(n,"font_style")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+='" data-original-title="Italic" data-title="Italic">\n        <i class="desygner-icon-italic"></i>\n      </a>\n    </li>\n\n',s=null!=(s=h(n,"Mobile")||(null!=t?h(t,"Mobile"):t))?s:c,a={name:"Mobile",hash:{},fn:e.noop,inverse:e.program(5,o,0),data:o,loc:{start:{line:31,column:4},end:{line:37,column:15}}},i=typeof s===u?s.call(l,a):s,h(n,"Mobile")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+'\n    <li>\n      <a class="btn btn-onmenu begin-edit" data-popover="tooltip" data-original-title="'+d((h(n,"t")||t&&h(t,"t")||c).call(l,"popupmenu.dropdown_title.text_begin_edit",{name:"t",hash:{},data:o,loc:{start:{line:40,column:87},end:{line:40,column:136}}}))+'" data-title="'+d((h(n,"t")||t&&h(t,"t")||c).call(l,"popupmenu.dropdown_title.text_begin_edit",{name:"t",hash:{},data:o,loc:{start:{line:40,column:150},end:{line:40,column:198}}}))+'">\n        <i class="desygner-icon-text-edit"></i>\n      </a>\n    </li>\n  </ul>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],391:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("./abstract/SVG")),i=r(e("../../../../analytics/decorate"));t.exports=(0,i.default)(e("./analytics/text-banner"),o.default.extend({setImageListeners:function(){var e=this,t=this.el.querySelector("img");t.crossOrigin="Anonymous",t.addEventListener("load",(function(){return e.processImage(t)}))},getTemplateRenderData:function(){return{banner:!0,no_opacity:!0,image:{src:this.svg.url}}},processImage:function(e){this.resize(),e.parentElement.style.opacity="1"}}))},{"../../../../analytics/decorate":2,"./abstract/SVG":336,"./analytics/text-banner":346,"@babel/runtime/helpers/interopRequireDefault":663}],392:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.parse-int.js");var r=e("./abstract/base"),o=e("./components/type-effect"),i=e("../../../../utils/humps"),s=e("../../../../app/decorate"),a=e("../../../../facade/design/design"),l=e("../../../../analytics/decorate"),c=e("../../../../facade/editor/editor");t.exports=l(e("./analytics/text"),s(e("./app/text"),r.extend({template:e("./templates/text.hbs"),width:null,height:null,events:_.extend({"click a.toggle-options":"toggleOptionsEvent","click  .btn.begin-edit":"startEditingEvent","blur .line-container input":"endEditingEvent","keyup .line-container input":"keyupEvent","keydown .line-container input":"keydownEvent","click .options .fonts-list":"displayFontFamiliesEvent","click .options .bold-font a":"toggleBoldFontEvent","click .options .italic-font a":"toggleItalicFontEvent","click .options .underline-font a":"toggleUnderlineFontEvent","click .options .fonts-list .ui-dropdown-items a":"changeFontFamilyEvent"},r.prototype.events),changeFontFamilyEvent:function(e){var t=this.$el.find(".line-container > .item"),n=this.$el.find(".options"),r=$(e.currentTarget).css("font-family");t.css({"font-family":r,"font-weight":"","font-style":"","text-decoration":""}),n.find(".fonts-list .ui-dropdown-title").text(this.getQuoteScaped(r)),n.find(".btn-onmenu").removeClass("applied"),this.toggleFontAvailableOptions($(e.currentTarget).data("fontid")),this.trigger("change")},getQuoteScaped:function(e){return e.replace(/^['|"](.*)['|"]$/,(function(e,t){return t}))},toggleBoldFontEvent:function(e){this.cssToggle(e,"font-weight","bold"),!this.currentFont.support.bi&&this.currentFont.support.i&&this.$el.find(".options .italic-font").toggleClass("disabled",$(e.currentTarget).hasClass("applied"))},toggleItalicFontEvent:function(e){this.cssToggle(e,"font-style","italic"),!this.currentFont.support.bi&&this.currentFont.support.b&&this.$el.find(".options .bold-font").toggleClass("disabled",$(e.currentTarget).hasClass("applied"))},toggleUnderlineFontEvent:function(e){this.cssToggle(e,"text-decoration","underline")},cssToggle:function(e,t,n){var r=this.$el.find(".line-container > .item"),o=$(e.currentTarget).toggleClass("applied");r.css(t,o.hasClass("applied")?n:""),this.trigger("change")},clickEvent:function(e){this.isBeingEdit()||this.addElement(this.getClickElementData(e))},mouseUpEvent:function(e){this.isBeingEdit()||this.addElement(this.getMouseUpElementData(e))},toggleOptionsEvent:function(e){var t=this.$el.height()>this.minimizedHeight,n=this.isBeingEdit();$(e.currentTarget).toggleClass("active"),t||this.startEditingEvent(),t&&this.$el.css("overflow","hidden"),t&&n&&this.blurEditableContent(),this.$el.height(t?this.minimizedHeight:this.fullHeight)},keydownEvent:function(e){13===e.which&&(e.preventDefault(),this.blurEditableContent())},keyupEvent:function(e){if(!this.data.text_block){var t=this.$el.find(".line-container input").val()||"&nbsp;";this.$el.find(".line-container > .item .content").html(t)}},blurEditableContent:function(){this.$el.find(".line-container input").blur()},startEditingEvent:function(e){if(!(new Date-this.editEndTime<1e3)){this.preEditText=this.$el.find(".line-container > .item .content").text();var t=this.$el.find(".line-container input").val("").show();this.$el.css("overflow",""),this.$el.find(".btn.begin-edit").addClass("applied");var n=this.$el.find(".ui-dropdown-div");_.isEmpty(n.html())&&this.appendFontItems(n),this.erase().then((function(){t.focus()}))}},appendFontItems:function(e){_.each(INKIVE.FontsFactory.getUsableFonts(),(function(t,n){t.support.isDefault&&e.append('<a style="font-family: '+t.family.replace(/'/g,"\\'")+';" data-fontid="'+n+'">'+t.family+"</a>")}))},endEditingEvent:function(e){var t=this.$el.find(".line-container input");this.$el.find(".btn.begin-edit").removeClass("applied"),this.editEndTime=new Date,t.val()?(this.endTyping(),this.trigger("change")):this.type(this.preEditText).then(_.bind((function(){this.endTyping()}),this))},addElement:function(e){a.create("text",e)},getClickElementData:function(e){var t=this.editor.getOffset(),n=this.getBaseElementData(t),r=(t.width-n.size.width)/2;return _.extend(n,{position:{x:Math.floor4(r),y:Math.floor4((t.height-n.font.size)/2)}})},getMouseUpElementData:function(e){var t=c.handle("zoom","get"),n=this.editor.getOffset(),r=this.$draggableClone[0].getBoundingClientRect(),o=this.getBaseElementData(n),i=e.clientX-o.size.width/2*t-n.x;return _.extend(o,{position:{x:Math.floor4(i),y:Math.floor4((r.top-n.y)/t)}})},getBaseElementData:function(e){var t=this.editor.canvas,n=this.$el.find(".line-container > .item .content"),r=_.min([t.contentW,t.contentH]),o=n[0].getBoundingClientRect().width,i=Math.round(r*this.data.size),s=o*(i/25),a=this.getTextData();return this.data.text_block&&(s=parseInt($("#svgcontent").attr("width"))/2),{content:a.text,decoration:a.textDecoration,font:{family:a.fontFamily,weight:a.fontWeight,style:a.fontStyle,size:i},size:{width:Math.floor4(s)}}},initialize:function(e){_.bindAll(this,"type","erase","refresh","initAccordion","getTextData"),this.data=e.data,r.prototype.initialize.call(this)},refresh:function(){var e=this.$el.find(".menu.options");this.minimizedHeight=this.$el.find(".line-container").height(),this.$el.height(this.minimizedHeight),this.fullHeight=this.minimizedHeight+e.outerHeight()},initAccordion:function(){var e=this.$el.find(".menu.options");this.minimizedHeight=this.$el.height(),this.$el.height(this.minimizedHeight),e.removeClass("hidden"),this.fullHeight=this.minimizedHeight+e.outerHeight(),this.$draggable=this.$el.find("a.item > .content"),this.toggleFontAvailableOptions()},render:function(){r.prototype.render.call(this),this.$el.find(".fonts-list").popupmenudropdown({left:0,onShow:_.bind((function(){this.$el.css("overflow","visible").find(".line-container input").hide()}),this),forceBottom:!0}),this.$el.find(".fonts-list .ui-dropdown-items").removeClass("hidden");var e=this.$el.find(".line-container > .item").height();this.$el.find(".line-container > .item").height(e)},getTemplateRenderData:function(){var e=!!this.data.text_block;return e&&(this.data.text=INKIVE.TranslateHelper.translate("text.option_text_block")),_.extend(this.data,{id:this.data.uuid,font_size:this.data.font_size+"px",fonts:[],options_hidden:e})},type:function(e){var t=e||this.data.text;return this.typeEffect=this.typeEffect||new o(this.$el.find("a.item")),this.typeEffect.startTyping(t)},erase:function(){return this.typeEffect=this.typeEffect||new o(this.$el.find("a.item")),this.typeEffect.startErasing()},endTyping:function(){this.typeEffect.hide(),this.$el.find(".menu.options").hasClass("hidden")&&this.initAccordion()},isBeingEdit:function(){return this.$el.find(".line-container input").is(":focus")},toggleFontAvailableOptions:function(e){var t=this.$el.find(".options"),n=INKIVE.FontsFactory.get();this.currentFont=e?n[e]:function(){var e=this.$el.find(".fonts-list .ui-dropdown-title").text();return INKIVE.FontsFactory.get(e)}.call(this),this.currentFont&&(t.find(".bold-font").toggleClass("disabled",!this.currentFont.support.b),t.find(".italic-font").toggleClass("disabled",!this.currentFont.support.i))},createDraggableClone:function(){var e=r.prototype.createDraggableClone.call(this);return e.css(_.omit(this.getTextData("-"),"text")),e},setTextData:function(e){var t=this.$el.find(".line-container > .item .content"),n=this.$el.find(".options");(e=i.camelizeKeys(e)).text&&t.text(e.text),t.css("font-family",e.fontFamily),this.$el.find(".fonts-list .ui-dropdown-title").text(e.fontFamily),this.toggleFontAvailableOptions(),n.find(".bold-font a").toggleClass("applied",e.fontWeight||!1),t.css("font-weight",e.fontWeight),n.find(".italic-font a").toggleClass("applied",e.fontStyle||!1),t.css("font-style",e.fontStyle),n.find(".underline-font a").toggleClass("applied",e.textDecoration||!1),t.css("text-decoration",e.textDecoration)},getTextData:function(e){var t=this.$el.find(".line-container > .item .content"),n=this.$el.find(".options"),r={fontFamily:this.getQuoteScaped(t.css("font-family")),text:"&nbsp;"===t.text()?this.preEditText:t.text()};return this.data.text_block&&(r.text=this.data.text_block),n.find(".bold-font a").hasClass("applied")&&(r.fontWeight=t.css("font-weight")),n.find(".italic-font a").hasClass("applied")&&(r.fontStyle=t.css("font-style")),n.find(".underline-font a").hasClass("applied")&&(r.textDecoration=t.css("text-decoration")),e?i.decamelizeKeys(r,{separator:e}):r}})))},{"../../../../analytics/decorate":2,"../../../../app/decorate":5,"../../../../facade/design/design":47,"../../../../facade/editor/editor":91,"../../../../utils/humps":615,"./abstract/base":337,"./analytics/text":347,"./app/text":348,"./components/type-effect":350,"./templates/text.hbs":390,"core-js/modules/es.array.find.js":859,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],393:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.bind.js");var r=e("./abstract/base"),o=e("./components/upload-effect.js");t.exports=r.extend({events:{"click .uploader.progress-button.loading":"cancelEvent"},cancelEvent:function(e){this.trigger("cancel"),this.cancel()},cancel:function(){this.canceled=!0,this.progressBar.setProgress(0)},initialize:function(){this.attemptsLeft=3,this.attemptDelay=2e3,r.prototype.initialize.call(this),_.bindAll(this,"setImage","onImageLoaded","onImageError","cancel")},render:function(){var e=this.template(this.getTemplateRenderData());this.$el.html(e).css({width:122.5,height:86}),this.progressBar=new o(this.$el.find(".progress-button")[0])},toggleProgressBar:function(e){e&&this.progressBar._submit()},updateProgressBar:function(e){this.canceled||(this.progressBar.setProgress(e),1===e&&this.progressBar.stop(1))},setImage:function(e,t){if(!this.canceled){var n=$("<img>").attr("id",e).attr("src",t).on("error",this.onImageError).on("load",this.onImageLoaded);t.match("/original/")&&_.delay(_.bind((function(){this.$el.find("a.item").is(".loaded")||n.attr("src","")}),this),1e4),this.$el.find("a.item").removeClass("hidden").append(n)}},onImageLoaded:function(){var e=this.$el.find(".uploader");this.$el.find("a.item").addClass("loaded"),this.progressBar.clear(),this.resize(),_.delay((function(){e.remove()}),1e3)},onImageError:function(e){var t=$(e.currentTarget),n=--this.attemptsLeft>0;1===this.attemptsLeft&&t.attr("src",INKIVE.ImagesFactory.getVersionUrl(t.attr("src"),"original"));var r=_.partial(this.setImage,t.attr("id"),t.attr("src"));t.remove(),n&&_.delay(r,this.attemptDelay),n||(this.progressBar.setProgress(0),this.trigger("thumbnail_load_error"))},getTemplateRenderData:function(){return{upload:!0}}})},{"./abstract/base":337,"./components/upload-effect.js":351,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],394:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | background",render:function(){this.trackEvent({eventAction:"show",eventLabel:this.category.id})}}},{}],395:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | grids",render:function(){this.trackEvent({eventAction:"show",eventLabel:""})}}},{}],396:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | placeholders",render:function(){this.trackEvent({eventAction:"show",eventLabel:this.categoryKey})}}},{}],397:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | shapes",render:function(){this.trackEvent({eventAction:"show",eventLabel:this.categoryKey})}}},{}],398:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | stickers",render:function(){this.trackEvent({eventAction:"show",eventLabel:this.category.id})}}},{}],399:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.find.js");var r=e("../../../components/accordion-list/content"),o=e("../../../../../analytics/decorate"),i=e("../../../../../factory/formats"),s=e("../../../components/thumbnail/grid");t.exports=o(e("../../analytics/grids"),r.extend({apiCall:"grid/fetch",columnWidth:INKIVE.C.IS_MOBILE?210:255,numberOfPhotos:0,initialize:function(){this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,this.getFormat().then(_.bind((function(){this.setGridTemplateFormat(),r.prototype.initialize.call(this)}),this))},getFormat:function(){var e=$.Deferred(),t=_.bind((function(e){var t,n=1/0,r=1/0,o=this.canvas.contentW,i=this.canvas.contentH,s=o/i;return _.each(e,(function(e){var a,l=function(e){var t=INKIVE.Helpers.convertUnitsToPixels(e.width,e.unit),n=INKIVE.Helpers.convertUnitsToPixels(e.height,e.unit);return _.extend(e,{width:t,height:n,ratio:t/n})}(e),c=Math.abs(s-l.ratio);c<r&&(a=Math.abs(o-l.width)+Math.abs(i-l.height))<n&&(t=e,n=a,r=c)})),t}),this);return i.getFormats().then((function(n){e.resolve(t(n))})),e.promise()},loadData:function(e,t){var n=_.partial(this.onMoreData,this.filterActionId);this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),INKIVE.Helpers.sendCmd(INKIVE.C.BASE_URL+this.apiCall,this.getParams(),n),this.$el.find(".thumbnail-wrapper").css({height:"auto"})},getParams:function(){return _.extend({number_of_photos:++this.numberOfPhotos},this.size)},onMoreData:function(e,t){(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e===this.filterActionId)&&("SUCCESS"===(t=JSON.parse(t)).STATUS?(this.appendGridThumbnails(t.MESSAGE),this.repeat()):this.end(),this.scrollRefresh())},appendGridThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper .scrollDetect");_.each(e,(function(e){var n=$("<div>").addClass("thumbnail grid").insertBefore(t);new s({setCurrentPage:!0,el:n,size:this.size,format:this.callFormat,data:e,numberOfPhotos:this.numberOfPhotos})}),this)},setGridTemplateFormat:function(){var e=this.columnWidth,t=this.tool.editor.canvas;this.callFormat={width:t.contentW,height:t.contentH},this.size={width:e,height:e*(this.callFormat.height/this.callFormat.width)}},getScrollHeight:function(e){var t=e.closest(".tab-content.inner-tabs"),n=t.height();return n-=t.find(".header-links").height()}}))},{"../../../../../analytics/decorate":2,"../../../../../factory/formats":126,"../../../components/accordion-list/content":315,"../../../components/thumbnail/grid":354,"../../analytics/grids":395,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],400:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.function.bind.js");var r=e("../../../components/accordion-list/content"),o=e("../../../components/thumbnail/color"),i=e("../../../../../analytics/decorate");t.exports=i(e("../../analytics/backgrounds"),r.extend({apiCall:"search/backgrounds",dataName:"backgroundCategories",callbackName:"callbackImages",where:{},initialize:function(e){this.category=_.find(INKIVE.Tool._cache.backgroundCategories,(function(t){return t.id==e.key})),r.prototype.initialize.call(this,e)},getParams:function(){var e={from:this.from,limit:this.limit,where:{category:this.category.name}};return this.from+=this.limit,e},extractData:function(e){return _.map(e,(function(e){var t=this.getImageData(e);return this.imagesFactory.addImageData(t),{id:"background-"+e.id,src:t.version.thumb,cls:parseInt(e.active)?"":" grayscale",data:t,width:125,height:78}}),this)},getImageData:function(e){return{name:e.readable_name,count:e.count,version:{original:e.url,largeweb:e.url,web:e.url,tab:e.url,mobile:e.url&&e.url.replace("-web","-mobile"),thumb:e.url&&e.url.replace("-web","-thumb")}}},getScrollHeight:function(e){return e.closest(".tab-content").height()-this.$el.siblings().height()},render:function(){this.$el.html(this.template({placeholder:this.filterPlaceholder,colors:!0})),this.$el.find(".antiscroll-inner").addThumb(),this.renderColors()},renderColors:function(){this.$el.find(".colorLineWrapper .addmore");_.each(this.tool.editor.getFavColors(),this.addColorThumb,this),this.initColorPicker()},addColorThumb:function(e){var t=$('<div class="palette-item">');new o({el:t,color:e});t.insertBefore(this.$el.find(".colorLineWrapper .addmore"))},initColorPicker:function(){this.$el.find(".colorLineWrapper").find(".addmore").colorpicker({defaultColor:"#FFFFFF",onSubmit:_.bind((function(e,t){this.addColorThumb(e)}),this)})}}))},{"../../../../../analytics/decorate":2,"../../../components/accordion-list/content":315,"../../../components/thumbnail/color":349,"../../analytics/backgrounds":394,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],401:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js");var r=e("../../../components/accordion-list/content"),o=(e("../../../components/thumbnail/color"),e("../../../../../analytics/decorate"));t.exports=o(e("../../analytics/stickers"),r.extend({apiCall:"search/stickers",dataName:"stickerCategories",callbackName:"callbackStickers",where:{},initialize:function(e){this.category=_.find(INKIVE.Tool._cache.stickerCategories,(function(t){return t.id==e.key})),r.prototype.initialize.call(this,e)},getScrollHeight:function(e){return e.closest(".tab-content").height()-this.$el.siblings().height()},getParams:function(){var e={from:this.from,limit:this.limit,where:{category:this.category.name,active:INKIVE.C.USER.IS_SUPER?0:1}};return this.from+=this.limit,e},extractData:function(e){return _.map(e,(function(e){return{id:"sticker-"+e.id,src:e.url,width:e.width,height:e.height,cls:parseInt(e.active)?"":" grayscale",data:{name:e.name,count:e.count,changeable:e.changeable,width:e.width,height:e.height}}}))}}))},{"../../../../../analytics/decorate":2,"../../../components/accordion-list/content":315,"../../../components/thumbnail/color":349,"../../analytics/stickers":398,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905}],402:[function(e,t,n){"use strict";e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js");var r=e("../../../components/accordion-list/categories-director"),o=e("./stickers");t.exports=r.extend({class:"sub-category stickers",CategoriesView:o,views:{},loadButtons:function(){var e=$.Deferred();return INKIVE.Tool.preloadStickerCategories((function(){var t=INKIVE.Tool._cache.stickerCategories;e.resolve(_.map(t,(function(e){return{key:e.id,tag:e.name,icon:"fa fa-ellipsis-v"}})))})),e.promise()},initialize:function(){r.prototype.initialize.call(this),this.render()}})},{"../../../components/accordion-list/categories-director":313,"./stickers":401,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884}],403:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var o=r(e("./components/helper/view")),i=r(e("../../facade/editor/editor")),s=r(e("../../facade/restrictions/restrictions")),a={text:e("./element-options/text/handler"),table:e("./element-options/table/handler"),logo:e("./element-options/vector/handler"),sticker:e("./element-options/vector/handler"),icon:e("./element-options/vector/handler"),shape:e("./element-options/shape/handler"),image:e("./element-options/image/handler"),video:e("./element-options/video/handler"),background:e("./element-options/background/handler")},l={text:e("./element-options/text/view"),table:e("./element-options/table/view"),logo:e("./element-options/vector/view"),sticker:e("./element-options/vector/view"),icon:e("./element-options/vector/view"),shape:e("./element-options/shape/view"),image:e("./element-options/image/view"),video:e("./element-options/video/view"),background:e("./element-options/background/view")},c=o.default.extend({initialize:function(){INKIVE.Helpers.projectIsLinkedToRestrictions()&&(o.default.prototype.initialize.call(this),this.render(),i.default.on("select",_.bind(this.onElementSelection,this)))},onElementSelection:function(e){var t=this;if(!this._handleMLSTab()){var n=$('[href="#tabKWLS"], [href="#tabMLS"], [href="#tabRedfin"]');if(1===e.length){var r=e[0],o=r.type;if((r.banner||Object.entries(r.texts||{}).length)&&"simplifiedrestrictions"!==INKIVE.Helpers.getActiveTab()){var i=document.querySelector('[href="#tabText"]');if("none"!==i.parentElement.style.display)return i.click(),void setTimeout((function(){return document.getElementById("tabText").querySelector("[data-key=banners]").click()}))}if("sticker"===o&&(o=r.placeholder?"image":"icon"),INKIVE.Tool.getInstance().editor.canvas.runExtensions("selectedChanged",{}),n.length&&"text"===o&&this.shownTabs.push(n.parent().show()),a[o]&&l[o]&&a[o].haveOptions(r)){this.contentView&&this.contentView.remove();var s=this.$el.find(".helper-content");return s.empty(),void(this.contentView=new l[o]({el:$("<div>").appendTo(s),selection:r,callback:function(){var e=t.$el.find(".color-list"),n=t.$el.find(".selection-list");e.prepend("<h2>"+INKIVE.TranslateHelper.translate("tool.restricted.option.color")+"</h2>"),n.prepend("<h2>"+INKIVE.TranslateHelper.translate("tool.restricted.option."+o)+"</h2>"),(e.length||n.length)&&t.$el.removeClass("out").find(".helper-content").scrollTop(0),t._toggle(!0)}}))}}this._toggle(!1,e)}},_toggle:function(e,t){var n=this.$el.find(".show-images-tab"),r=this.$el.find(".show-icon-tab"),o=this.$el.find(".show-logo-tab"),i=this.$el.find(".show-videos-tab");if(this.shownTabs=this.shownTabs||[],!e){var a=s.default.getAllDefaultPermissions;c()||$("#tool-panel [href=#tabRestricted]").click(),a.image_add||(n.removeClass("show-images-tab"),n=[]),a.icon_add||(r.removeClass("show-icon-tab"),r=[]),a.logo_add||(o.removeClass("show-logo-tab"),o=[]),a.video_add||(i.removeClass("show-videos-tab"),i=[])}if(n.length){var l=$('[href="#tabKWLS"], [href="#tabMLS"], [href="#tabRedfin"]');l.length&&e&&(this.shownTabs.push(l.parent().show()),this.shownTabs.push($('[href="#tabImages"]').parent().show())),this.$el.toggleClass("show",!1),!c()&&e&&$("#tool-panel [href=#tabImages]").click()}else r.length?(this.$el.toggleClass("show",!1),$("#tool-panel [href=#tabIcons]").click()):o.length?(this.$el.toggleClass("show",!1),$("#tool-panel [href=#tabLogos]").click()):i.length?(this.$el.toggleClass("show",!1),$("#tool-panel [href=#tabVideo]").click()):(this.$el.toggleClass("show",e),this.$el.toggleClass("out",!e),this.trigger("toggle",this.$el.hasClass("show")));function c(){var e=!!INKIVE.C.USER.kw_uid||["kwls","mls","redfin"].includes(INKIVE.Helpers.getActiveTab());if(!e&&t&&1===t.length){var n=s.default.getElementRestrictions(t[0].id),r=t[0].type;switch(t[0].texts&&Object.entries(t[0].texts).length&&(r="banner"),r){case"text":e=!n.length||n[0].text_change_content;break;case"banner":case"shape":e=!0}}return e}},_handleMLSTab:function(){if(!s.default.getAllDefaultPermissions().image_add){if(this.shownTabs=this.shownTabs||[],!this.shownTabs.length)return _.includes(["mls","kwls"],INKIVE.Helpers.getActiveTab());_.each(this.shownTabs,(function(e){"#tabRedfin"===e.children()[0].getAttribute("href")||e.hide()})),this.shownTabs=[]}},render:function(){this.$el.html(this.template())}});t.exports=new c({el:$('<div id="element-options">').appendTo("#tool-panel .tool-content")})},{"../../facade/editor/editor":91,"../../facade/restrictions/restrictions":118,"./components/helper/view":329,"./element-options/background/handler":405,"./element-options/background/view":407,"./element-options/image/handler":408,"./element-options/image/view":410,"./element-options/shape/handler":411,"./element-options/shape/view":413,"./element-options/table/handler":414,"./element-options/table/view":416,"./element-options/text/handler":417,"./element-options/text/view":419,"./element-options/vector/handler":420,"./element-options/vector/view":422,"./element-options/video/handler":423,"./element-options/video/view":425,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.string.includes.js":915,"core-js/modules/web.timers.js":966}],404:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("../../../facade/restrictions/restrictions"),o=e("../components/thumbnail/options/color"),i=e("../../../factory/library").instance,s=e("../../colors/element-color-restrictions");t.exports=Backbone.View.extend({initialize:function(e){this.selection=e.selection,$.when(i.get("palettes"),i.get("colors")).then(_.bind((function(t,n){var r=new s(e.selection.id,t,n,e.type||"");this.colors=r.getRestrictedColors(),this.render(),e.hasOwnProperty("callback")&&e.callback()}),this))},getRestrictions:function(e){return r.getElementRestrictions(this.selection.id,e)},addColorThumbnail:function(e,t){var n=this.getNewView(t,"third");new o({el:n,item:{color:e},selection:this.selection}),this.$el.find(".color-list").append(n)},getNewView:function(e,t){return $('<div class="thumbnail">').addClass(t).css({"-webkit-transition-delay":"."+e+"s","transition-delay":"."+e+"s"})},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)}})},{"../../../facade/restrictions/restrictions":118,"../../../factory/library":128,"../../colors/element-color-restrictions":200,"../components/thumbnail/options/color":362,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],405:[function(e,t,n){"use strict";var r=e("../../../../facade/restrictions/decorate");t.exports=r({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=_.partial(n.getElementRestrictions,t.id),o=r("basic"),i=o&&o[0]&&o[0].image;return r("images").length||r("colors").length||r("colors-library").length||i}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118}],406:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'  <div class="color-list content"></div>\n'},3:function(e,t,n,r,o){return'  <div class="image-list selection-list content"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasColors"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?i:"")+(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasContent"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],407:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.find.js");var r=e("../../components/thumbnail/options/image"),o=e("../abstract-element-options"),i=e("../../../../utils/advice");t.exports=o.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection,this.sources=_.chain(this.getRestrictions("images")).pluck("list").flatten().value();var t=this.getRestrictions("basic");this.canReplace=t&&t[0]&&t[0].image,this.getRestrictions("opacity").length||(i.messages=i.messages.filter((function(e){return!["background-color-add"].includes(e.id)}))),o.prototype.initialize.call(this,e)},render:function(){this.$el.html(this.template({hasColors:this.colors.length,hasContent:this.sources.length})),_(this.colors).each(this.addColorThumbnail,this),_(this.sources).each(this.addImageThumbnail,this),this.canReplace&&!this.sources.length&&this.$el.addClass("show-images-tab")},addImageThumbnail:function(e,t){var n=this.getNewView(t);new r({el:n,item:{source:e},selection:this.selection}),this.$el.find(".image-list").append(n)}})},{"../../../../utils/advice":607,"../../components/thumbnail/options/image":363,"../abstract-element-options":404,"./template.hbs":406,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864}],408:[function(e,t,n){"use strict";var r=e("../../../../facade/restrictions/decorate");t.exports=r({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=_.partial(n.getElementRestrictions,t.id),o=r("basic");o[0]&&!_.isUndefined(o[0].image_content)||(o[0]=n.getAllDefaultPermissions());var i=o[0].image_content;return r("source").length||i}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118}],409:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="image-list selection-list content"></div>\n'},useData:!0})},{"hbsfy/runtime":1024}],410:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../../../facade/restrictions/restrictions"),o=e("../../components/thumbnail/options/image");t.exports=Backbone.View.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection;var t=_.partial(r.getElementRestrictions,this.selection.id),n=t("basic");n[0]&&!_.isUndefined(n[0].image_content)||(n[0]=r.getAllDefaultPermissions());var o=n[0].image_content;this.render(o,_.chain(t("source")).pluck("list").flatten().value()),e.hasOwnProperty("callback")&&e.callback()},render:function(e,t){e&&(t&&t.length?(this.$el.html(this.template()),_(t).each(this.addThumbnail,this)):this.$el.addClass("show-images-tab"))},addThumbnail:function(e,t){var n=$('<div class="thumbnail">').css({"-webkit-transition-delay":"."+t+"s","transition-delay":"."+t+"s"});new o({el:n,item:{source:e},selection:this.selection});this.$el.find(".image-list").append(n)},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)}})},{"../../../../facade/restrictions/restrictions":118,"../../components/thumbnail/options/image":363,"./template.hbs":409,"core-js/modules/es.array.find.js":859}],411:[function(e,t,n){"use strict";var r=e("../../../../facade/restrictions/decorate");t.exports=r({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=_.partial(n.getElementRestrictions,t.id);return r("source").length||r("colors").length||r("colors-library").length}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118}],412:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'  <div class="color-list content"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasColors"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?i:""},useData:!0})},{"hbsfy/runtime":1024}],413:[function(e,t,n){"use strict";var r=e("../abstract-element-options");t.exports=r.extend({template:e("./template.hbs"),initialize:function(e){r.prototype.initialize.call(this,e)},render:function(){this.$el.html(this.template({hasColors:this.colors.length})),_(this.colors).each(this.addColorThumbnail,this)}})},{"../abstract-element-options":404,"./template.hbs":412}],414:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("../../../../facade/restrictions/decorate"));t.exports=(0,r.default)({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=_.partial(n.getElementRestrictions,t.id);return r("tablecolors").length||r("tablecolors-library").length||r("textcolors").length||r("textcolors-library").length}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118,"@babel/runtime/helpers/interopRequireDefault":663}],415:[function(e,t,n){arguments[4][412][0].apply(n,arguments)},{dup:412,"hbsfy/runtime":1024}],416:[function(e,t,n){"use strict";var r=e("../abstract-element-options");t.exports=r.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection,e.type="table",r.prototype.initialize.call(this,e)},render:function(){this.$el.html(this.template({hasColors:this.colors.length})),_(this.colors).each(this.addColorThumbnail,this)}})},{"../abstract-element-options":404,"./template.hbs":415}],417:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("../../../../facade/restrictions/decorate"));t.exports=(0,r.default)({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=_.partial(n.getElementRestrictions,t.id);return r("dictionary").length||r("colors").length||r("colors-library").length}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118,"@babel/runtime/helpers/interopRequireDefault":663}],418:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'  <div class="color-list content"></div>\n'},3:function(e,t,n,r,o){return'  <div class="content-list selection-list content"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasColors"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?i:"")+(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasContent"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],419:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../components/thumbnail/options/text"),o=e("../abstract-element-options");t.exports=o.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection,this.dictionary=_.chain(this.getRestrictions("dictionary")).pluck("list").flatten().value(),o.prototype.initialize.call(this,e)},render:function(){this.$el.html(this.template({hasColors:this.colors.length,hasContent:this.dictionary.length})),_(this.colors).each(this.addColorThumbnail,this),_(this.dictionary).each(this.addThumbnail,this)},addThumbnail:function(e,t){var n=$('<div class="thumbnail">').css({"-webkit-transition-delay":"."+t+"s","transition-delay":"."+t+"s"});new r({el:n,selection:this.selection,item:{content:e}}),this.$el.find(".content-list").append(n)}})},{"../../components/thumbnail/options/text":365,"../abstract-element-options":404,"./template.hbs":418,"core-js/modules/es.array.find.js":859}],420:[function(e,t,n){"use strict";var r=e("../../../../facade/restrictions/decorate");t.exports=r({haveOptions:function(t){var n=e("../../../../facade/restrictions/restrictions"),r=t.type;"sticker"===r&&(r="icon");var o=_.partial(n.getElementRestrictions,t.id),i=INKIVE.RestrictionsFacade.getAllDefaultPermissions(),s=r+"_replace",a=o("basic");a[0]&&!_.isUndefined(a[0][s])||(a[0]=n.getAllDefaultPermissions());var l=a[0][s]||i[s];return o("source").length||o("colors").length||o("colors-library").length||l}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"../../../../facade/restrictions/restrictions":118}],421:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'  <div class="color-list content"></div>\n'},3:function(e,t,n,r,o){return'  <div class="logo-list selection-list content"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasColors"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?i:"")+(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasContent"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:0},end:{line:6,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],422:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var o=r(e("../../components/thumbnail/options/logo")),i=r(e("../abstract-element-options"));t.exports=i.default.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection,this.sources=_.chain(this.getRestrictions("source")).pluck("list").flatten().value(),i.default.prototype.initialize.call(this,e)},render:function(){var e,t,n=(null===(e=this.selection.permissions[0])||void 0===e?void 0:e.basic)||{},r="sticker"===this.selection.type?"icon":this.selection.type,o="".concat(r,"_replace"),i=INKIVE.RestrictionsFacade.getAllDefaultPermissions(),s=null!==(t=n[o])&&void 0!==t?t:i[o],a=this.sources&&this.sources.length&&s,l=this.colors.length;a||l?(this.$el.html(this.template({hasColors:l,hasContent:a})),a&&this.sources.forEach(this.addThumbnail.bind(this)),l&&this.colors.forEach(this.addColorThumbnail.bind(this))):(this.$el.addClass("show-"+r+"-tab"),this.$el.data("type",r))},addThumbnail:function(e,t){if(e&&e.thumb_src){var n=$('<div class="thumbnail">').css({"-webkit-transition-delay":"."+t+"s","transition-delay":"."+t+"s"});new o.default({el:n,item:e,selection:this.selection}),this.$el.find(".logo-list").append(n)}}})},{"../../components/thumbnail/options/logo":364,"../abstract-element-options":404,"./template.hbs":421,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/web.dom-collections.for-each.js":964}],423:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat.js");var o=r(e("../../../../facade/restrictions/decorate"));t.exports=(0,o.default)({haveOptions:function(e){var t=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=INKIVE.RestrictionsFacade).getElementRestrictions.apply(t,[e.id].concat(r))},n=INKIVE.RestrictionsFacade.getAllDefaultPermissions(),r=t("basic");r[0]&&void 0!==r[0].video_replace||(r[0]=INKIVE.RestrictionsFacade.getAllDefaultPermissions());var o=r[0].video_replace||n.video_replace;return t("source").length||o}},{haveOptions:function(){return!1}})},{"../../../../facade/restrictions/decorate":114,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854}],424:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="video-list selection-list content"></div>\n'},useData:!0})},{"hbsfy/runtime":1024}],425:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../../../facade/restrictions/restrictions"),o=e("../../components/thumbnail/options/video");t.exports=Backbone.View.extend({template:e("./template.hbs"),initialize:function(e){this.selection=e.selection;var t=_.partial(r.getElementRestrictions,this.selection.id),n=t("basic");n[0]&&!_.isUndefined(n[0].video_replace)||(n[0]=r.getAllDefaultPermissions());var o=n[0].video_replace;this.render(o,_.chain(t("source")).pluck("list").flatten().value()),Object.prototype.hasOwnProperty.call(e,"callback")&&e.callback()},render:function(e,t){e&&(t&&t.length?(this.$el.html(this.template()),_(t).each(this.addThumbnail,this)):this.$el.addClass("show-videos-tab"))},addThumbnail:function(e,t){var n=$('<div class="thumbnail">').css({"-webkit-transition-delay":"."+t+"s","transition-delay":"."+t+"s"});new o({el:n,selection:this.selection,item:e});this.$el.find(".video-list").append(n)},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)}})},{"../../../../facade/restrictions/restrictions":118,"../../components/thumbnail/options/video":366,"./template.hbs":424,"core-js/modules/es.array.find.js":859}],426:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | import",show:{eventAction:"show"},listContentToggleEvent:function(e){var t=$(e.currentTarget);t.closest("dt").hasClass("active")||this.trackEvent({eventAction:"content_toggle",eventLabel:t.data("key")})}}},{}],427:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.last-index-of.js");var r=e("../../components/accordion-list/content"),o=e("../../components/mixins/upload-list");t.exports=Backbone.mixin(r.extend({apiCall:"photo/imported",limit:50,initialize:function(e){_.bindAll(this,"beforeSubmitEvent","deleteOverlayCallback"),this.$uploadButton=e.$uploadButton,this.type=e.type,r.prototype.initialize.call(this),o.initialize.call(this),this.refreshView=_.debounce(_.bind((function(){INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.masonryReload(),this.from-=2*this.limit,this.from=this.from<0?0:this.from,_.delay(_.bind(this.initDataLoading,this),3e3)}),this),2e3)},getParams:function(){var e={id:INKIVE.C.BOOK.id,from:this.from,limit:this.limit};return this.from+=this.limit,e},getImageData:function(e){return{version:_.clone(e.image)}},initializeUpload:function(){var t=this,n=this.$uploadButton.parent();n.fineUploaderS3(this.getUploaderOptions(n)).on("progress",this.progressEvent).on("error",this.errorEvent).on("cancel",this.cancelEvent).on("complete",this.completeEvent).on("validate",(function(e){return t.validateEvent.call(t,e)})).on("submitted",_.bind((function(){var t=e("../../../../utils/advice"),r=n.find("input").val(),o=r.substring(r.lastIndexOf(".")+1);this.submittedEvent.apply(this,arguments),_.contains(["pdf","psd"],o)&&t.show("imported-results")}),this)),n.on("click",this.beforeSubmitEvent),this.setFileUploadButton()},setFileUploadButton:function(){var e=this.$uploadButton.parent(),t=e.find(".drag-drop-file");e.find("input").css("margin",t.css("margin")).css("top",0).show()},beforeSubmitEvent:function(e){var t=$(e.target);t.closest(".button.enabled").length&&t.closest(".add").find("input").trigger("click")},complete:function(e,t){var n=this.views[e];n.cancel(),INKIVE.Helpers.afterRendering(_.bind((function(){n.remove(),this.refreshView()}),this))},addDeleteOverlay:function(e){var t=$('<div class="overlay"><ul class="options"><li data-placement="bottom" data-type="delete" data-popover="tooltip" data-original-title="'+INKIVE.TranslateHelper.translate("popupmenu.tooltip.remove")+'"><i class="desygner-icon-delete"></i></li></ul></div>');t.find("[data-type=delete]").off("click").on("click",_.partial(this.tool.removeImportedElement,_.partial(this.deleteOverlayCallback,e))),e.after(t)},deleteOverlayCallback:function(e){var t=$.Deferred(),n=INKIVE.C.BOOK.id;return INKIVE.Helpers.api("photo/remove","POST",{id:n||INKIVE.C.BOOK.id,key:e.data("id"),type:this.type},(function(e,n){n&&t.resolve(e),n||t.reject(e)})),t.promise()}}),o)},{"../../../../utils/advice":607,"../../components/accordion-list/content":315,"../../components/mixins/upload-list":335,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.last-index-of.js":869,"core-js/modules/es.function.bind.js":883}],428:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js");var r=e("./base");t.exports=r.extend({uploadConfig:{validation:{acceptFiles:".svg",allowedExtensions:["svg"]},uploadSuccess:{params:{loadType:120}}},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper");_.delay(_.bind((function(){_.each(this.extractSvgData(e),(function(e){this.$el.find("#"+e.uuid).length||e.appendTo(t);var n=this.$el.find("#"+e.uuid);n.after(this.tool.getOverlayHtml(this.$el,"sticker")),n.siblings(".overlay").find("[data-type=delete]").off("click").on("click",_.partial(this.tool.removeImportedElement,_.partial(this.deleteOverlayCallback,n))),this.addDeleteOverlay(n)}),this).length&&this.$el.siblings(".section-title").css("visibility",""),this.masonryReload()}),this),500)},extractSvgData:function(e){return _.compact(_.map(e,(function(e){if("svg"===e.type)return new INKIVE.ThumbSvg(e)}),this))},getScrollHeight:function(e){var t=e.closest(".tab-content"),n=t.height();return n-=t.find(".header-links").height(),e.siblings().add(e.parent().siblings()).each((function(){n-=$(this).height()})),n}})},{"./base":427,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883}],429:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.reverse.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.string.repeat.js");var r=e("./base"),o=e("../../components/mixins/upload-list"),i=e("../../../../factory/company").instance;t.exports=r.extend({apiCall:"photo/saved",allProjects:[],otherProjects:[],uploadConfig:{validation:{acceptFiles:".jpg, .jpeg, .png, .pdf, .psd",allowedExtensions:["jpg","jpeg","png","pdf","psd"]},uploadSuccess:{params:{loadType:120}}},initialize:function(e){this.deferred=$.Deferred();var t=_.bind((function(e){e&&(this.otherProjects=_.sortBy(e,"modified_date").reverse(),this.otherProjects=_.without(_.pluck(this.otherProjects,"id"),INKIVE.C.BOOK.id),this.allProjects=_.clone(this.otherProjects),this.deferred.resolve())}),this);if(INKIVE.Helpers.projectIsLinkedToRestrictions()){var n=function(e){i.get([e]).then((function(e){var n=_.map(e,(function(e){return{id:e.encoded_id,modified_date:e.pages[0]?e.pages[0].last_mod:null}}));t(n)}))};INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?INKIVE.FormatFactory.getCurrentFormat().then((function(e){n("campaigns/"+e.campaign+"/templates")})):n("designs")}else INKIVE.Helpers.api("photo/saved","GET",{id:INKIVE.C.BOOK.id,type:"albums"},_.bind((function(e){e&&t(e.data)}),this));e.premium||(this.uploadConfig.validation.acceptFiles=".jpg, .jpeg, .png",this.uploadConfig.validation.allowedExtensions=["jpg","jpeg","png"]),r.prototype.initialize.call(this,e),e.premium||e.$uploadButton.siblings("input").css("height",e.$uploadButton.siblings(".drag-drop-file").css("height")),this.refreshView=_.debounce(_.bind((function(){this.masonryReload(),this.from=0,this.stopLoading=!1,this.otherProjects=_.clone(this.allProjects),this.projectId=INKIVE.C.BOOK.id,this.$el.find(".thumbnail:not(.uploader)").remove(),this.$el.find(".thumbnail-wrapper").height(40),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),_.delay(_.bind(this.initDataLoading,this),6e3)}),this),2e3)},getParams:function(){var e={id:this.projectId||INKIVE.C.BOOK.id,type:"photos",from:this.from,limit:this.limit};return this.from+=this.limit,e},extractData:function(e){return _.compact(_.map(e,(function(e,t){if(e.image.thumb.trim()&&!_.find(this.addedThumbnails,(function(t){return t.image.original===e.image.original}))){this.addedThumbnails.push(e);var n=this.getImageData(e);return this.imagesFactory.addImageData(n),{id:"photo-saved-"+e.image.original.hashCode(),src:e.image.thumb,width:e.image.original_width,height:e.image.original_height,times_used:!1,data:n,sticker_value:0,sticker_tooltip:"used "+e.count+" time"+(e.count>1?"s":"")}}}),this))},complete:function(e,t){if(t.photoId){var n=this.views[e].$el,i=n.find("a"),s=INKIVE.Helpers.getCORSSecureUrl(t.tempLink);o.complete.call(this,e,t),INKIVE.ImagesFactory.addImageData({version:{original:s}}),this.tool.callbackImages(n,this.$el),this.$el.siblings(".section-title").css("visibility",""),n.data("original-src",s),n.data("project-id",INKIVE.C.BOOK.id),i.data("version",{original:s,thumb:s}),i.after(this.tool.getOverlayHtml(n,"photo")),this.canvas.showOverlayElements(),INKIVE.Helpers.initTooltips()}else r.prototype.complete.call(this,e,t);this.setFileUploadButton()},errorEvent:function(e,t,n,o){var i=o&&o.match("invalid extension");i||r.prototype.errorEvent.call(this,e,t,!0),i&&INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.upload_image_type_error",try_again:!0})),_.delay(_.bind(this.setFileUploadButton,this),500)},appendThumbnails:function(e){var t=_.bind(this.tool.callbackImages,this.tool),n=[],r=_.map(this.$el.find("img"),(function(e){return $(e).attr("data-original-src")}));e&&e.data&&e.data.forEach((function(e){r.includes(e.image.original)||!1===e.image.active||(e.image.db_url=e.image.original,e.image.original=INKIVE.Helpers.getCORSSecureUrl(e.image.original),r.push(e.image.original),n.push(e))}));for(var o=[],i=0;i<n.length;i++){var s=n[i];if(i===n.length-1){o.push(s);break}for(var a=!1,l=i+1;l<n.length;l++){var c=n[l];if(s.active===c.active&&s.image.original===c.image.original){a=!0;break}}!a&&o.push(s)}this.tool.addThumbItem(this.$el,this.extractImageData(o,e.project_id),t),this.$el.siblings(".section-title").css("visibility",""),this.masonryReload()},initScroll:function(){var e=this.$el.parents(".add");e.hasClass("antiscroll-wrap")||e.addClass("antiscroll-wrap").wrapInner('<div class="antiscroll-inner"></div>'),e.antiscroll({autoHide:!1,width:e.parents(".tab").width(),height:e.height()||40})},onMoreData:function(e){var t=(e=e||{})&&_.filter(e.data,(function(e){return e.image&&!1!==e.image.active})).length;this.stopLoading=!this.$el.find(".loader-wrapper").isOnScreen(),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),INKIVE.C.BOOK.id===e.project_id&&this.addMissingProjectImages(e.data),t&&this.appendThumbnails(e);var n=this.otherProjects.shift();n?(this.projectId=n,this.from=0,this.loadData(this.repeat,this.end),this.repeat()):this.end(),this.scrollRefresh()},loadData:function(e,t){this.stopLoading?this.$el.closest(".antiscroll-inner").off("scroll").on("scroll",_.bind((function(n){var o=$(n.target),i=o.get(0).scrollHeight,s=o.get(0).scrollTop,a=o.height();Math.round((s+a)/i*100)>=99&&(o.off(),r.prototype.loadData.call(this,e,t))}),this)):this.deferred.then(_.bind((function(){r.prototype.loadData.call(this,e,t)}),this))},addMissingProjectImages:function(e){var t=_.unique(_.map(INKIVE.ImagesFactory.inlinedImages));_.each(t,_.bind((function(t){_.find(e,(function(e){return t===e.image.original}))||this.addToImportedImages(t)}),this))},addToImportedImages:function(e){INKIVE.ImagesFactory.getImageOriginalSizeData(e,_.bind((function(t){var n={src:INKIVE.ImagesFactory.getAllImageVersions(e).thumb||e,original:e,project_id:INKIVE.C.BOOK.id,id:"photo-"+_.random(99999999)};this.tool.addThumbItem(this.$el,n,_.bind(this.tool.callbackImages,this.tool)),$.ajax({url:INKIVE.C.BASE_URL+"api/photo/convertedphotos",type:"POST",error:function(t){console.error("Error processing"+e,t)},data:{project_id:INKIVE.C.BOOK.id,url:INKIVE.Helpers.getCORSSecureUrl(e),width:t.width,height:t.height}})}),this))},extractImageData:function(e,t){return _.compact(_.map(e,(function(e){if("svg"!==e.type&&"text"!==e.type&&e.image&&e.image.thumb.trim()){var n="photo-saved-"+e.image.original.hashCode();if(!this.$el.find("#"+n).length){var r=this.getImageData(e);return this.imagesFactory.addImageData(r),{id:n,project_id:t,src:e.image.thumb,db_url:e.image.db_url,original:e.image.original,width:e.image.original_width,height:e.image.original_height,times_used:0,data:r,sticker_value:!1,sticker_tooltip:"used "+e.count+" time"+(e.count>1?"s":"")}}}}),this))}})},{"../../../../factory/company":122,"../../components/mixins/upload-list":335,"./base":427,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.repeat.js":922,"core-js/modules/es.string.trim.js":929,"core-js/modules/web.dom-collections.for-each.js":964}],430:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js");var r=e("./base");t.exports=r.extend({uploadConfig:{validation:{acceptFiles:".pdf, .psd,  .ppt, .pptx",allowedExtensions:["pdf","psd","ppt","pptx"]},uploadSuccess:{params:{loadType:120}}},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper");_.each(this.extractTextData(e),(function(e){this.$el.find("#"+e.uuid).length||e.appendTo(t),this.addDeleteOverlay(this.$el.find("#"+e.uuid))}),this).length&&("add"===this.$el.parents(".inner-tabs").find(".header-links").find(".active").data("key")&&this.$el.siblings(".section-title").css("visibility",""));this.masonryReload()},extractTextData:function(e){return _.compact(_.map(e,(function(t){if("text"===t.type)return new INKIVE.ThumbText($.extend(t,{tooltip:e.text}))}),this))},getScrollHeight:function(e){var t=e.closest(".tab-content"),n=t.height();return n-=t.find(".header-links").height(),n-=parseInt(t.find(".search-container").css("height")),e.siblings().add(e.parent().siblings()).each((function(){n-=$(this).height()})),n},getScrollWidth:function(e){return e.width()}})},{"./base":427,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-int.js":905}],431:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),t.exports={render:function(t){var n=e("../../../../facade/restrictions/restrictions").isFunctionalityAllowed;this.lockedLibrary=t,this.$el.html(this.template({class:this.class,buttons:this.buttons.filter((function(e){if(e.disabled)return!1;switch(e.key){case"image":return n("function_use_own_images")&&n("image_add");case"text":return n("text_add");case"icon":return n("vector_add")}return!0}))})),this.helperView&&this.helperView.remove(),t&&this.initHelper()}}},{"../../../../facade/restrictions/restrictions":118,"core-js/modules/es.array.filter.js":857}],432:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("../components/accordion-list/director")),i=r(e("../../../analytics/decorate")),s=r(e("../../../facade/restrictions/decorate"));t.exports=(0,i.default)(e("./analytics/view"),(0,s.default)(e("./restrict/view"),o.default.extend({class:"import",uploadViewKey:"all",views:{},Views:{image:e("./contents/image"),text:e("./contents/text"),icon:e("./contents/icon")},buttons:[{key:"images",tag:"tool.import.image"},{key:"text",tag:"tool.import.text"},{key:"icons",tag:"tool.import.svg"}],beforeSubmitEvent:function(e){this.canUse||e.preventDefault()},initialize:function(e){this.canUse=e.canUse,_.bindAll(this,"beforeSubmitEvent")},render:function(){o.default.prototype.render.call(this),this.canUse||this.initHelper()},refresh:function(){_.each(this.views,(function(e){e.refresh?e.refresh():e.masonryReload&&e.masonryReload()}))},showCantUseModal:function(){INKIVE.Helpers.displaySubscriptionModal("tool.import.helper.description")},loadImportedListContent:function(e,t){var n,r;(this.canUse||"image"===e)&&(this.views[e]=new this.Views[e]({el:(n=$('<div class="section-title imported"><span>'+INKIVE.TranslateHelper.translate("tool.import."+e)+"</span></div>").css("visibility","hidden"),r=$("<div></div>").addClass("image-list content "+e),t.parent().siblings(".imported-elements").append(n),r.insertAfter(n),r),$uploadButton:t,type:e,premium:this.canUse})),this.canUse?t.addClass("enabled"):("image"===e||t.siblings(".drag-drop-file").hide(),t.on("click",this.showCantUseModal))}})))},{"../../../analytics/decorate":2,"../../../facade/restrictions/decorate":114,"../components/accordion-list/director":317,"./analytics/view":426,"./contents/icon":428,"./contents/image":429,"./contents/text":430,"./restrict/view":431,"@babel/runtime/helpers/interopRequireDefault":663}],433:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | icons | stickers",render:function(){this.trackEvent({eventAction:"show",eventLabel:this.category.id})}}},{}],434:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | icons",show:{eventAction:"show"}}},{}],435:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js");var r=e("../components/accordion-list/content"),o=e("../../../analytics/decorate");t.exports=o(e("./analytics/stickers"),r.extend({apiCall:"search/stickers",dataName:"stickerCategories",callbackName:"callbackStickers",where:{},initialize:function(e){this.category="all"===e.key?"all":_.find(INKIVE.Tool._cache.stickerCategories,(function(t){return parseInt(t.id)===e.key})),r.prototype.initialize.call(this,e)},getScrollHeight:function(e){var t=e.closest(".tab-content"),n=0,r=t.find(".header-links").outerHeight(!0),o=t.find(".search-container").outerHeight(!0);return Array.from(this.$el.siblings()).forEach((function(e){return n+=$(e).outerHeight(!0)})),t.height()-r-o-n-parseInt(e.css("margin-top"))},getParams:function(){var e={from:this.from,limit:this.limit,where:{category:"all"===this.category?null:this.category.name,active:INKIVE.C.USER.IS_SUPER?0:1}};return this.from+=this.limit,e},extractData:function(e){return this.searchInput.removeClass("disabled"),_.map(e,(function(e){return{id:"icon-sticker-"+e.id,src:e.url,width:e.width,height:e.height,cls:parseInt(e.active)?"":" grayscale",data:{icon:!0,name:e.name,count:e.count,changeable:e.changeable,width:e.width,height:e.height}}}))},render:function(){this.searchInput=this.$el.parents(".inner-tabs").find("input[name=search]").addClass("disabled"),r.prototype.render.call(this)}}))},{"../../../analytics/decorate":2,"../components/accordion-list/content":315,"./analytics/stickers":433,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.string.iterator.js":917,"core-js/modules/web.dom-collections.for-each.js":964}],436:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.function.bind.js");var o=r(e("../../../../../../src/config/constants")),i=r(e("../components/common/filter-search-options.hbs")),s=r(e("../components/common/stock-component")),a=r(e("../components/thumbnail/sticker")),l=r(e("../search/search"));t.exports=s.default.extend({CategoriesView:e("./stickers"),initialize:function(e){e=e||{},s.default.prototype.initialize.call(this,e)},selectSearchOptionEvent:function(e){var t=$(e.currentTarget),n=this.$searchOptions.find("> div");t.is(n)&&(n.removeClass("selected"),n.find(".desygner-icon-check").prependTo(t),t.addClass("selected")),n.closest(".search-container").children("input").focus()},search:function(e){this.addedThumbnails=[];var t=this.$el.find(".image-list"),n=t.find(".thumbnail-wrapper");n.removeClass("thumbnail-wrapper").addClass("tab-content"),n.empty().css("height",""),this.$el.find(".categories-container").addClass("hidden"),this.$el.find(".search-title").removeClass("hidden"),this.$el.parent().find(".search-options").hide(),t.find(".antiscroll-scrollbar").remove(),t.find(".tab-content").empty().removeData();var r=(e?e.val():"")||this.getRandomSearchValue();INKIVE.Modal.loader(this.$el.find(".antiscroll-inner").css("height","")),this.initMasonry(),this.searchView=this.searchView||new l.default,this.searchView.initSearch(t,{query:r,type:"icon",callback:this.refreshAntiscroll})},loadButtons:function(){var e=$.Deferred();return INKIVE.Tool.preloadStickerCategories((function(){var t=INKIVE.Tool._cache.stickerCategories;e.resolve(_.map(t,(function(e){return{key:e.id,tag:e.name}})))})),e.promise()},getSearchOptions:function(e,t){return this.$searchOptions||(this.$searchOptions=$((0,i.default)({isPremium:this.canUseFilters,providers:e,types:t,type:"icons-"+this.$el.siblings(".header-links").find(".active").attr("data-key")})),INKIVE.Helpers.initPopover(this.$searchOptions)),this.$searchOptions},mapResult:function(e){return{name:e.data.name,thumb_src:e.data.url,licence:e.data.licence,sticker_id:e.data.id,svg_url:e.data.svg_url}},addThumbnail:function(e){if(!_.contains(this.addedThumbnails,e.thumb_src)){this.addedThumbnails.push(e.thumb_src);var t=$('<div class="thumbnail sticker">'),n=new a.default({el:t,item:e});return n.on("resize",_.bind((function(e){this.$el.find(".thumbnail.sticker.details").each((function(){this===e||$(this).removeClass("details")})),INKIVE.Helpers.afterRendering(_.bind(this.masonryReload,this))}),this)),this.$el.find(".thumbnail-wrapper").append(t).masonry("appended",t),n.on("loaded",_.bind(this.masonryReload,this)),n}},initMasonry:function(){this.$el.find(".image-list .thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig)},masonryReload:function(){this.$el.find(".image-list .thumbnail-wrapper").masonry("layout")}})},{"../../../../../../src/config/constants":1090,"../components/common/filter-search-options.hbs":322,"../components/common/stock-component":325,"../components/thumbnail/sticker":370,"../search/search":539,"./stickers":435,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],437:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("../../../analytics/decorate");t.exports=l(e("./analytics/view"),a.extend({type:"icon",memberType:["logos"],uploadViewKey:"icons-import",StockView:e("./stock"),categories:null,isAlreadyThere:function(){return!!this.$el.find(".tab-content.icon").length},render:(s=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:(t=this.$headerLinks.filter("[data-key=stock]")).length||(t=this.$headerLinks.filter("[data-key=library]")),t.length&&!this.isEnterprise?t.trigger("click"):a.prototype.checkEmptyLibrary.call(this,t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),updateSearchContainer:function(){"add"===this.selectedTab.key&&(this.selectedTab.searchable=!1),this.selectedTab.searchable&&this.displaySearchContainer(this.$el.find(".search-container"))}}))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"./analytics/view":434,"./stock":436,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],438:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | customize | background",render:function(){this.category&&this.trackEvent({eventAction:"show",eventLabel:this.category.id})}}},{}],439:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | images",show:{eventAction:"show"},openSearchTabEvent:{eventAction:"open_search_tab"},listContentToggleEvent:function(e){var t=$(e.currentTarget);t.closest("dt").hasClass("active")||this.trackEvent({eventAction:"content_toggle",eventLabel:t.data("key")})}}},{}],440:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'                    <line x1="32" y1="32" x2="192" y2="192" stroke="white" stroke-width="1"></line>\n                    <circle id="start" cx="32" cy="32" r="8" fill="red" stroke="gray" stroke-width="1"></circle>\n                    <circle id="end" cx="192" cy="192" r="8" fill="blue" stroke="gray" stroke-width="1"></circle>\n'},3:function(e,t,n,r,o){return'                    <circle id="center" cx="128" cy="128" r="8" fill="red" stroke="gray" stroke-width="1"></circle>\n'},5:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.gradients.to_radial",{name:"t",hash:{},data:o,loc:{start:{line:49,column:46},end:{line:49,column:78}}}))},7:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.gradients.to_linear",{name:"t",hash:{},data:o,loc:{start:{line:49,column:101},end:{line:49,column:133}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="gradients-editor">\n    <div class="gradients-editor-sahde">\n        <div class="gradients-editor-dialog">\n            <div class="gradients-editor-form">\n\n                <div class="gradients-editor-stops"></div>\n\n                <svg width="256" height="256" viewBox="0 0 256 256">\n                    <rect x="0" y="0" width="256" height="256" fill="whitesmoke"></rect>\n                    <rect x="32" y="32" width="192" height="192" fill="url(#'+c("function"==typeof(s=null!=(s=u(n,"gradientId")||(null!=t?u(t,"gradientId"):t))?s:l)?s.call(a,{name:"gradientId",hash:{},data:o,loc:{start:{line:10,column:76},end:{line:10,column:90}}}):s)+')" stroke="white"\n                        stroke-width="1" stroke-dasharray="5, 5"></rect>\n\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isLinear"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:20},end:{line:17,column:27}}}))?i:"")+"\n"+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isRadial"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:20},end:{line:21,column:27}}}))?i:"")+'                </svg>\n\n                <div>\n                    <button class="btn-primary" id="btn-apply">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#background-add"></use>\n                            </svg>\n                        </icon>\n                        <span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.gradients.apply_to_selection",{name:"t",hash:{},data:o,loc:{start:{line:31,column:30},end:{line:31,column:71}}}))+'</span>\n                    </button>\n\n                    <button class="btn-primary" id="btn-duplicate">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#copy"></use>\n                            </svg>\n                        </icon>\n                        <span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.gradients.duplicate",{name:"t",hash:{},data:o,loc:{start:{line:40,column:30},end:{line:40,column:62}}}))+'</span>\n                    </button>\n\n                    <button class="btn-primary" id="btn-convert">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#integrations"></use>\n                            </svg>\n                        </icon>\n                        <span>'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isLinear"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:49,column:30},end:{line:49,column:85}}}))?i:"")+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isRadial"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:49,column:85},end:{line:49,column:140}}}))?i:"")+'</span>\n                    </button>\n\n                    <button class="btn-primary" id="btn-delete">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#editor-delete"></use>\n                            </svg>\n                        </icon>\n                        <span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.gradients.delete",{name:"t",hash:{},data:o,loc:{start:{line:58,column:30},end:{line:58,column:59}}}))+'</span>\n                    </button>\n\n                    <button class="btn-primary" id="btn-close">\n                        <icon>\n                            <svg>\n                                <use xlink:href="#checkbox---circle"></use>\n                            </svg>\n                        </icon>\n                        <span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.gradients.close_editor",{name:"t",hash:{},data:o,loc:{start:{line:67,column:30},end:{line:67,column:65}}}))+"</span>\n                    </button>\n                </div>\n\n            </div>\n            <hr />\n            <p>"+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.gradients.editor_guide",{name:"t",hash:{},data:o,loc:{start:{line:73,column:15},end:{line:73,column:50}}}))+"</p>\n        </div>\n    </div>\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],441:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("../../../../gradients/gradient-helpers")),s=r(e("../../../../gradients/linear-gradient")),a=r(e("../../../../gradients/radial-gradient"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=e("../../components/common/common-component"),d=e("./editor.hbs"),p=e("./stops-list.hbs");t.exports=u.extend({screenSize:256,padding:32,maxStopsCount:5,events:c(c({},u.prototype.events),{},{"click #btn-apply":"onApplyToSelection","click #btn-duplicate":"onDuplicateGradient","click #btn-convert":"onConvertGradient","click #btn-delete":"onDeleteGradient","click #btn-close":"onCloseEditor","mousedown .gradients-editor-dialog svg":"onSvgMouseDown","mousemove .gradients-editor-dialog svg":"onSvgMouseMove","mouseup .gradients-editor-dialog svg":"onSvgMouseUp","mouseleave .gradients-editor-dialog svg":"onSvgMouseLeave"}),show:function(){u.prototype.initialize.call(this),this.render()},render:function(){var e=this.isLinear,t=!this.isLinear;this.$el.html(d({gradientId:this.gradientId,isLinear:e,isRadial:t}));var n=i.default.getGradientById(this.gradientId);e?this.renderLinear(n):this.renderGradient(n)},renderLinear:function(e){var t=new s.default(e);this.updateGradientDirectionUi(t.x1,t.y1,!1),this.updateGradientDirectionUi(t.x2,t.y2,!0),this.updateGradientStopsUi(t)},renderGradient:function(e){var t=new a.default(e);this.updateGradientCenterUi(t.cx,t.cy),this.updateGradientStopsUi(t)},updateGradientStopsUi:function(e){var t=this.$el.find(".gradients-editor-stops"),n=e.stops.length>=this.maxStopsCount,r=e.stops.length<=2?"-disabled":"",o=e.stops;t.html(p({stops:o,addStopDisabled:n,deleteButtonClass:r})),t.find("input").on("change",this.onStopsChanged.bind(this)),t.find("#btn-add-stop").on("click",this.onAddStop.bind(this)),t.find(".delete-stop").on("click",this.onDeleteStop.bind(this))},updateGradientDirectionUi:function(e,t,n){var r=this.padding+(this.screenSize-2*this.padding)*e/100,o=this.padding+(this.screenSize-2*this.padding)*t/100,i=this.$el.find(".gradients-editor-dialog circle#"+(n?"end":"start"));i.attr("cx",r),i.attr("cy",o);var s=this.$el.find(".gradients-editor-dialog line");s.attr(n?"x2":"x1",r),s.attr(n?"y2":"y1",o)},updateGradientDirection:function(e,t,n){var r=i.default.getGradientById(this.gradientId),o=new s.default(r);n?(o.x2=e,o.y2=t):(o.x1=e,o.y1=t),o.toElement(r)},updateGradientCenterUi:function(e,t){i.default.getGradientById(this.gradientId);var n=this.padding+(this.screenSize-2*this.padding)*e/100,r=this.padding+(this.screenSize-2*this.padding)*t/100,o=this.$el.find(".gradients-editor-dialog circle#center");o.attr("cx",n),o.attr("cy",r)},updateGradientCenter:function(e,t){var n=i.default.getGradientById(this.gradientId),r=new a.default(n);r.cx=e,r.cy=t,r.toElement(n)},onAddStop:function(){var e=i.default.getGradientById(this.gradientId),t=this.isLinear?new s.default(e):new a.default(e);if(!(t.stops.length>=this.maxStopsCount)){i.default.addNewStop(t);var n=e.lastChild.cloneNode(!1);e.appendChild(n),t.stops.forEach((function(t,n){t.toElement(e.childNodes[n])})),this.updateGradientStopsUi(t)}},onDeleteStop:function(e){var t=e.target.getAttribute("data-index"),n=i.default.getGradientById(this.gradientId),r=this.isLinear?new s.default(n):new a.default(n);r.stops.length<=2||(i.default.deleteStop(r,t),n.removeChild(n.lastChild),r.stops.forEach((function(e,t){e.toElement(n.childNodes[t])})),this.updateGradientStopsUi(r))},onApplyToSelection:function(){i.default.applyGradientToSelection(this.gradientId)},onDuplicateGradient:function(){i.default.duplicateGradientElement(this.gradientId),this.onCloseEditor(!0)},onConvertGradient:function(){i.default.convertGradientElement(this.gradientId),this.onCloseEditor(!0)},onDeleteGradient:function(){i.default.isUsed(this.gradientId)?alert("This gradient is used in the canvas."):(i.default.deleteGradientElement(this.gradientId),this.onCloseEditor(!0))},onCloseEditor:function(){this.onCloseEditor(!1)},onStopsChanged:function(e){var t=e.target.getAttribute("data-index"),n=e.target.getAttribute("data-type"),r=i.default.getGradientById(this.gradientId),o=this.isLinear?new s.default(r):new a.default(r);o.stops[t][n]=e.target.value,o.stops.forEach((function(e,t){e.toElement(r.childNodes[t])}))},onSvgMouseDown:function(e){this.mouseDown=!0},onSvgMouseMove:function(e){if(this.mouseDown){var t="";if(this.$el[0].querySelectorAll(".gradients-editor-dialog circle").forEach((function(n){var r=n.getAttribute("cx"),o=n.getAttribute("cy");Math.abs(r-e.offsetX)<32&&Math.abs(o-e.offsetY)<32&&(t=n.id)})),t){var n=Math.max(e.offsetX,this.padding);n=Math.min(n,this.screenSize-this.padding);var r=Math.max(e.offsetY,this.padding);r=Math.min(r,this.screenSize-this.padding);var o=this.screenSize-2*this.padding,i=100*(n-this.padding)/o,s=100*(r-this.padding)/o;if(e.shiftKey)for(var a=[[0,0],[0,50],[0,100],[50,0],[50,50],[50,100],[100,0],[100,50],[100,100]],l=0;l<a.length;l++){var c=a[l];if(Math.abs(i-c[0])<16&&Math.abs(s-c[1])<16){i=c[0],s=c[1];break}}if(this.isLinear){var u="end"===t;this.updateGradientDirection(i,s,u),this.updateGradientDirectionUi(i,s,u)}else this.updateGradientCenter(i,s),this.updateGradientCenterUi(i,s)}}},onSvgMouseUp:function(e){this.mouseDown=!1},onSvgMouseLeave:function(e){this.mouseDown=!1}})},{"../../../../gradients/gradient-helpers":164,"../../../../gradients/linear-gradient":166,"../../../../gradients/radial-gradient":167,"../../components/common/common-component":321,"./editor.hbs":440,"./stops-list.hbs":443,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],442:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n<svg viewBox="0 0 72 72">\n    <rect x="0" y="0" width="72" height="72" rx="8" fill="url(#'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:4,column:63},end:{line:4,column:69}}}):i)+')" data-gradient-id="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:4,column:90},end:{line:4,column:96}}}):i)+'"></rect>\n</svg>\n\n'},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n<svg viewBox="0 0 72 72">\n    <circle cx="36" cy="36" r="36" fill="url(#'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:12,column:46},end:{line:12,column:52}}}):i)+')" data-gradient-id="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:12,column:73},end:{line:12,column:79}}}):i)+'"></circle>\n</svg>\n\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=a(n,"each").call(s,null!=t?a(t,"linearGradients"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:7,column:9}}}))?i:"")+"\n"+(null!=(i=a(n,"each").call(s,null!=t?a(t,"radialGradients"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:0},end:{line:15,column:9}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],443:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return" disabled "},3:function(e,t,n,r,o,i,s){var a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <input type="color" value="'+d(typeof(a=null!=(a=p(n,"color")||(null!=t?p(t,"color"):t))?a:c)===u?a.call(l,{name:"color",hash:{},data:o,loc:{start:{line:12,column:31},end:{line:12,column:40}}}):a)+'" data-type="color" data-index="'+d(typeof(a=null!=(a=p(n,"index")||o&&p(o,"index"))?a:c)===u?a.call(l,{name:"index",hash:{},data:o,loc:{start:{line:12,column:72},end:{line:12,column:82}}}):a)+'" />\n    <input type="range" min="0" max="1" step="0.1" value="'+d(typeof(a=null!=(a=p(n,"opacity")||(null!=t?p(t,"opacity"):t))?a:c)===u?a.call(l,{name:"opacity",hash:{},data:o,loc:{start:{line:13,column:58},end:{line:13,column:69}}}):a)+'" data-type="opacity" data-index="'+d(typeof(a=null!=(a=p(n,"index")||o&&p(o,"index"))?a:c)===u?a.call(l,{name:"index",hash:{},data:o,loc:{start:{line:13,column:103},end:{line:13,column:113}}}):a)+'" />\n    <div class="delete-stop'+d(e.lambda(null!=s[1]?p(s[1],"deleteButtonClass"):s[1],t))+'">\n        <svg width="24" height="24">\n            <use xlink:href="#editor-delete" data-index="'+d(typeof(a=null!=(a=p(n,"index")||o&&p(o,"index"))?a:c)===u?a.call(l,{name:"index",hash:{},data:o,loc:{start:{line:16,column:57},end:{line:16,column:67}}}):a)+'"></use>\n        </svg>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="btn-primary" id="btn-add-stop" '+(null!=(a=c(n,"if").call(l,null!=t?c(t,"addStopDisabled"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:1,column:46},end:{line:1,column:86}}}))?a:"")+'>\n    <icon>\n        <svg>\n            <use xlink:href="#editor-plus"></use>\n        </svg>\n    </icon>\n    <span>'+e.escapeExpression((c(n,"t")||t&&c(t,"t")||e.hooks.helperMissing).call(l,"tool.gradients.add_new_stop",{name:"t",hash:{},data:o,loc:{start:{line:7,column:10},end:{line:7,column:45}}}))+'</span>\n</button>\n\n<div class="gradients-editor-stops-list">\n'+(null!=(a=c(n,"each").call(l,null!=t?c(t,"stops"):t,{name:"each",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:11,column:4},end:{line:19,column:13}}}))?a:"")+"</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],444:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="gradients-view">\n\n    <div class="gradients-toolbar">\n\n        <button class="btn-primary" id="btn-add-linear">\n            <icon>\n                <svg>\n                    <use xlink:href="#editor-plus"></use>\n                </svg>\n            </icon>\n            <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.gradients.add_linear",{name:"t",hash:{},data:o,loc:{start:{line:11,column:18},end:{line:11,column:51}}}))+'</span>\n        </button>\n\n        <button class="btn-primary" id="btn-add-radial">\n            <icon><svg>\n                    <use xlink:href="#plus---circle"></use>\n                </svg>\n            </icon>\n            <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.gradients.add_radial",{name:"t",hash:{},data:o,loc:{start:{line:19,column:18},end:{line:19,column:51}}}))+'</span>\n        </button>\n    </div>\n\n    <div class="gradients-library">\n\n    </div>\n\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],445:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("../../../../gradients/gradient-helpers")),s=r(e("../../../../gradients/linear-gradient")),a=r(e("../../../../gradients/radial-gradient"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=e("../../components/common/common-component"),d=e("./view.hbs"),p=e("./gradients-list.hbs"),h=e("./editor");t.exports=u.extend({events:c(c({},u.prototype.events),{},{"click #btn-add-linear":"onAddLinearGradient","click #btn-add-radial":"onAddRadialGradient","click rect[data-gradient-id]":"onEditLinearGradient","click circle[data-gradient-id]":"onEditRadialGradient"}),show:function(){this.isAlreadyThere?this.onRefresh():(u.prototype.initialize.call(this),this.isAlreadyThere=!0,this.render())},render:function(){this.$el.html(d({})),this.onRefresh()},onRefresh:function(){var e=i.default.getGradientsList(),t=e.linearGradients,n=e.radialGradients;this.$el.find(".gradients-library").html(p({linearGradients:t,radialGradients:n}))},onAddLinearGradient:function(){i.default.addGradient(new s.default),this.onRefresh()},onAddRadialGradient:function(){i.default.addGradient(new a.default),this.onRefresh()},onEditGradient:function(e,t){var n=e.target.getAttribute("data-gradient-id"),r=$("<div></div>");$("body").append(r);var o=new h({el:r});o.gradientId=n,o.isLinear=t,o.onCloseEditor=this.onCloseEditor.bind(this),o.show()},onEditLinearGradient:function(e){this.onEditGradient(e,!0)},onEditRadialGradient:function(e){this.onEditGradient(e,!1)},onCloseEditor:function(e){document.querySelector("#gradients-editor").parentElement.remove(),e&&this.onRefresh()}})},{"../../../../gradients/gradient-helpers":164,"../../../../gradients/linear-gradient":166,"../../../../gradients/radial-gradient":167,"../../components/common/common-component":321,"./editor":441,"./gradients-list.hbs":442,"./view.hbs":444,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],446:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var r=e("../components/accordion-list/content"),o=e("../../../analytics/decorate");t.exports=o(e("./analytics/backgrounds"),r.extend({apiCall:"search/backgrounds",dataName:"backgroundCategories",callbackName:"callbackImages",where:{},initialize:function(e){this.category="all"===e.key?"all":_.find(INKIVE.Tool._cache.backgroundCategories,(function(t){return parseInt(t.id)===e.key})),r.prototype.initialize.call(this,e)},getScrollHeight:function(e){return $("#tool-panel").height()-this.$el.siblings().height()-123},getParams:function(){var e={from:this.from,limit:this.limit,where:{category:"all"===this.category?null:this.category.name}};return this.from+=this.limit,e},extractData:function(e){return this.searchInput.removeClass("disabled"),_.map(e,(function(e){var t=this.getImageData(e);return this.imagesFactory.addImageData(t),{id:"background-"+e.id,src:t.version.thumb,cls:parseInt(e.active)?"":" grayscale",data:t,width:125,height:78}}),this)},getImageData:function(e){return{name:e.readable_name,count:e.count,version:{original:e.url,largeweb:e.url,web:e.url,tab:e.url,mobile:e.url&&e.url.replace("-web","-mobile"),thumb:e.url&&e.url.replace("-web","-thumb")}}},render:function(){this.searchInput=this.$el.parents(".inner-tabs").find("input[name=search]").addClass("disabled"),this.$el.html(this.template({placeholder:this.filterPlaceholder})),this.$el.find(".antiscroll-inner").addThumb()}}))},{"../../../analytics/decorate":2,"../components/accordion-list/content":315,"./analytics/backgrounds":438,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],447:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap">\n  <div id="assetbank-search-container">\n    <div>\n      <input id="assetbank-search-input" type="text" placeholder="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"uppy.photodexia.search",{name:"t",hash:{},data:o,loc:{start:{line:4,column:66},end:{line:4,column:96}}}))+'" />\n      <button id="assetbank-search-button">\n        <icon name="search" class="au-target" data-name="search"> \n          <svg class.bind="classes.root">\n            <use class="au-target" xlink:href="#search"></use>\n          </svg>\n        </icon>\n      </button>\n    </div>\n    <span class="hidden">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"uppy.search.loading",{name:"t",hash:{},data:o,loc:{start:{line:13,column:25},end:{line:13,column:52}}}))+'</span>\n  </div>\n  <div id="assetbank-images-container" class="antiscroll-inner"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],448:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.map.js");var r=e("../../components/accordion-list/content");t.exports=r.extend({page:0,query:{page:0},searchString:"",initialize:function(){this.template=e("./assetbank.hbs"),_.bindAll(this,"initAuthenticatedDataLoading","makeSearch"),r.prototype.initialize.call(this)},initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner"));var e=this.$el.find("#assetbank-search-input").get(0),t=this.$el.find("#assetbank-search-button").get(0);e.addEventListener("change",this.makeSearch),t.addEventListener("click",this.makeSearch)},initAuthenticatedDataLoading:function(){this.authenticated=!0,r.prototype.initDataLoading.call(this)},makeSearch:function(e){this.$el.find("#assetbank-search-container span").get(0).classList.remove("hidden"),this.searchString=document.getElementById("assetbank-search-input").value.replace(" ","+"),this.$el.find("#assetbank-images-container div.thumbnail").remove(),this.query.page=-1,this.query.term=this.searchString,r.prototype.initDataLoading.call(this),this.searchKeyupEvent(e)},authenticate:function(e){var t=$.Deferred();return this.authenticated&&t.resolve(),this.authenticated||window.abAsynInit(_.bind((function(n){n?(e||this.initAuthenticatedDataLoading(),t.resolve()):(this.trigger("no_access"),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),t.reject())}),this)),t.promise()},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.query.page+=1,this.imagesFactory.getAssetbankPhotos(this.query,this.onMoreData)},onMoreData:function(e,t,n){if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e){var r=this.tool.callbackImages.bind(this.tool);n.length>=1&&this.$el.find("#assetbank-search-container span").get(0).classList.add("hidden"),this.tool.addThumbItem(this.$el,this.extractData(t,n),r),this.scrollRefresh(),this.repeat()}},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e,t){return _.map(t,(function(t){return{id:"photo-ab-"+t.object_id,src:t.src,data:e[t.src_big]}}))}})},{"../../components/accordion-list/content":315,"./assetbank.hbs":447,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.repeat.js":922,"core-js/modules/es.string.replace.js":924}],449:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.map.js");var r=e("../../components/accordion-list/content");t.exports=r.extend({page:0,initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner"))},initAuthenticatedDataLoading:function(){this.authenticated=!0,r.prototype.initDataLoading.call(this)},authenticate:function(){var e=$.Deferred();return this.authenticated&&e.resolve(),this.authenticated||window.dbAsynInit(_.bind((function(t){t?(this.initAuthenticatedDataLoading(),e.resolve()):(this.trigger("no_access"),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e.reject())}),this)),e.promise()},loadData:function(e,t){this.end=t,this.repeat=e,this.canvas.call("advice.show","dropbox-view"),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.imagesFactory.getDropboxPhotos({page:this.page++},this.onMoreData)},onMoreData:function(e,t,n){if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e&&n.length){var r=_.bind(this.tool.callbackImages,this.tool);this.tool.addThumbItem(this.$el,this.extractData(t,n),r),this.scrollRefresh(),this.end()}else this.end()},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e,t){return _.map(t,(function(t){return{id:"photo-fl-"+t.object_id,src:t.src,data:e[t.src_big]}}))}})},{"../../components/accordion-list/content":315,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],450:[function(e,t,n){"use strict";var r=e("./facebook/access"),o=e("./facebook/images");t.exports=r.extend({scope:"user_photos",apiCall:"load/albums/facebook",thumbnailClickEvent:function(e){this.openNewView("images",o,{albumId:e})}})},{"./facebook/access":452,"./facebook/images":453}],451:[function(e,t,n){"use strict";var r=e("./facebook/access"),o=e("./facebook/page");t.exports=r.extend({scope:"manage_pages",apiCall:"load/albums/facebook/pages",thumbnailClickEvent:function(e){this.openNewView("page",o,{pageId:e})},closeView:function(){var e=!0;return _.each(this.views,(function(t){e&=t.closeView()})),e&&r.prototype.closeView.call(this)}})},{"./facebook/access":452,"./facebook/page":454}],452:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.function.name.js");var r=e("../../../components/accordion-list/content");t.exports=r.extend({initialize:function(){_.bindAll(this,"thumbnailClickEvent"),r.prototype.initialize.call(this)},thumbnailClickEvent:function(){},initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner"))},initAuthenticatedDataLoading:function(){this.authenticated=!0,r.prototype.initDataLoading.call(this)},authenticate:function(){var e=$.Deferred();return this.authenticated&&e.resolve(),this.authenticated||_.bind((function(){var e=this.scope,n=_.bind(t,this);loadFacebookLibrary((function(){FB.login(n,{scope:e})}))}),this)(),e.promise();function t(t){t.authResponse?(e.resolve(),this.initAuthenticatedDataLoading()):(this.trigger("no_access"),e.reject(),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")))}},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),INKIVE.Helpers.sendCmd(INKIVE.C.BASE_URL+this.apiCall,this.getParams(),this.onMoreData)},getParams:function(){return{width:107,height:73,fb_token:this.tool.facebookToken||FB.getAccessToken()}},onMoreData:function(e){INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e&&"[]"!==e?(this.end(),this.appendThumbnails(e)):(this.authenticated=!1,r.prototype.closeView.call(this),this.$el.prev(".btn").click())},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper");_.each(this.extractData(e),(function(e){var n=_.partial(this.thumbnailClickEvent,e.id);new INKIVE.ThumbGroupImage($.extend(e,{tooltip:e.name,thumb:e.src,onItemLoad:function(e){$(e).on("click",n)}})).appendTo(t)}),this)},masonryReload:function(){if(this.$el.is(".out"))for(var e in this.views)this.views[e].masonryReload();else r.prototype.masonryReload.call(this);this.$el.closest(".add.antiscroll-wrap").children(".antiscroll-scrollbar").hide()},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e){return $.parseJSON(e)}})},{"../../../components/accordion-list/content":315,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.string.repeat.js":922}],453:[function(e,t,n){"use strict";e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js");var r=e("../../../components/accordion-list/content");t.exports=r.extend({initialize:function(e){this.albumId=e.albumId,r.prototype.initialize.call(this)},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.imagesFactory.getFacebookPhotos(this.getParams(),this.onMoreData)},getParams:function(){return{albums:[{id:this.albumId,after:this.after}],fb_token:this.tool.facebookToken||FB.getAccessToken()}},onMoreData:function(e,t,n){var r=_.bind(this.tool.callbackImages,this.tool),o=this.extractData(t,n[this.albumId].data);INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),this.after=n[this.albumId].paging.cursors.after,this.tool.addThumbItem(this.$el,o,r),this.scrollRefresh(),n[this.albumId].paging.next?this.repeat():this.end()},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e,t){return _.map(t,(function(t,n){return{id:"photo-fb-"+t.object_id,src:t.src,data:e[t.src_big],width:125,height:84}}))}})},{"../../../components/accordion-list/content":315,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],454:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("./access"),o=e("./images");t.exports=r.extend({apiCall:"load/albums/facebook",initialize:function(e){this.pageId=e.pageId,_.bindAll(this,"thumbnailClickEvent"),r.prototype.initialize.call(this)},initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.initAuthenticatedDataLoading()},getParams:function(){var e={page_ids:'["'+this.pageId+'"]'};return e.fb_token=this.tool.facebookToken||FB.getAccessToken(),e},thumbnailClickEvent:function(e){this.openNewView("images",o,{albumId:e})},closeView:function(){return!(_.size(this.views)>0)||(r.prototype.closeView.call(this),!1)}})},{"./access":452,"./images":453,"core-js/modules/es.array.find.js":859}],455:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.map.js");var r=e("../../components/accordion-list/content");t.exports=r.extend({page:0,initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner"))},initAuthenticatedDataLoading:function(){this.authenticated=!0,r.prototype.initDataLoading.call(this)},authenticate:function(){var e=$.Deferred();return this.authenticated&&e.resolve(),this.authenticated||window.gdAsynInit(_.bind((function(t){t?(this.initAuthenticatedDataLoading(),e.resolve()):(this.trigger("no_access"),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e.reject())}),this)),e.promise()},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.imagesFactory.getGooglePhotos({page:this.page++},this.onMoreData)},onMoreData:function(e,t,n){if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e&&n.length){var r=_.bind(this.tool.callbackImages,this.tool);this.tool.addThumbItem(this.$el,this.extractData(t,n),r),this.scrollRefresh(),this.repeat()}else this.end()},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e,t){return _.map(t,(function(t){return{id:"photo-gd-"+t.object_id,src:t.src,data:e[t.src_big]}}))}})},{"../../components/accordion-list/content":315,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],456:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.map.js");var r=e("../../components/accordion-list/content");t.exports=r.extend({initialize:function(){_.bindAll(this,"initAuthenticatedDataLoading"),r.prototype.initialize.call(this)},initDataLoading:function(){this.end&&this.end(),INKIVE.Modal.loader(this.$el.find(".antiscroll-inner"))},initAuthenticatedDataLoading:function(){this.authenticated=!0,r.prototype.initDataLoading.call(this)},authenticate:function(){var e=$.Deferred();return this.authenticated&&e.resolve(),this.authenticated||window.inAsynInit(_.bind((function(t){t?(this.initAuthenticatedDataLoading(),e.resolve()):(this.trigger("no_access"),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e.reject())}),this)),e.promise()},loadData:function(e,t){this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),this.imagesFactory.getInstagramPhotos(null,this.onMoreData)},onMoreData:function(e,t,n){if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),e){var r=_.bind(this.tool.callbackImages,this.tool);this.tool.addThumbItem(this.$el,this.extractData(t,n),r),this.scrollRefresh(),this.end()}},getScrollHeight:function(e){return e.closest(".add").height()-65},extractData:function(e,t){return _.map(t,(function(t){return{id:"photo-in-"+t.object_id,src:t.src,width:t.src_web_width,height:t.src_web_height,data:e[t.src_big]}}))}})},{"../../components/accordion-list/content":315,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],457:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("../components/accordion-list/director");t.exports=r.extend({views:{},Views:{facebookAlbums:e("./social-media-contents/facebook-albums"),facebookPages:e("./social-media-contents/facebook-pages"),instagram:e("./social-media-contents/instagram"),gdrive:e("./social-media-contents/gdrive"),dropbox:e("./social-media-contents/dropbox"),assetbank:e("./social-media-contents/assetbank")},buttons:[],events:{'click dt > a:not([data-key="add"]):not([data-key="search"])':"listContentToggleEvent"},loadListContent:function(e){if(e){var t=this.$el.find('dt a[data-key="'+e+'"]'),n=r.prototype.loadListContent.apply(this,arguments);return n.on("no_access",(function(){t.addClass("blink")})),n}},listContentToggleEvent:function(e){var t=$(e.currentTarget),n=t.closest("dt"),o=t.data("key");function i(){r.prototype.listContentToggleEvent.call(this,e);var t=n.hasClass("active");a.call(this,!t),s.call(this,t)}function s(e){e?this.$el.siblings().css("visibility","hidden"):!t.children(".back").is(".hidden")||_.delay(_.bind((function(){this.$el.siblings().hide(),this.$el.siblings().css("visibility",""),this.$el.siblings().fadeIn()}),this),200)}function a(e){var t=this.$el.parents(".add").children(".antiscroll-inner");e&&t.css("overflow","auto").siblings(".antiscroll-scrollbar").show(),e||t.css("overflow","hidden").siblings(".antiscroll-scrollbar").hide()}this.views[o]||this.loadListContent(o),!n.hasClass("active")&&this.views[o].authenticate?(t.removeClass("blink"),this.views[o].authenticate().then(_.bind(i,this))):i.call(this)},refresh:function(){for(var e in this.views)this.views[e].masonryReload()},initialize:function(e){e=e||{},this.buttons=_.union(this.buttons,[{key:"facebookAlbums",tag:"tool.images.facebook_albums"},{key:"facebookPages",tag:"tool.images.facebook_pages"},{key:"gdrive",tag:"tool.images.gdrive",disabled:!INKIVE.C.USER.IS_SUPER},{key:"dropbox",tag:"tool.images.dropbox"}]),e.isAssetBankCompany&&(this.buttons.push({key:"assetbank",tag:"tool.images.assetbank"}),this.$el.css("height",220)),r.prototype.initialize.call(this)},render:function(){this.$el.html(this.template({buttons:this.buttons}))}})},{"../components/accordion-list/director":317,"./social-media-contents/assetbank":448,"./social-media-contents/dropbox":449,"./social-media-contents/facebook-albums":450,"./social-media-contents/facebook-pages":451,"./social-media-contents/gdrive":455,"./social-media-contents/instagram":456,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],458:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js");var o=r(e("../../../../../../src/config/constants")),i=r(e("../components/common/filter-search-options.hbs")),s=r(e("../components/common/stock-component")),a=r(e("./social-media-contents/assetbank")),l=r(e("../search/search"));t.exports=s.default.extend({CategoriesView:e("./patterns"),initialize:function(e){_.bindAll(this,"search"),e=e||{},this.isAssetBankCompany=e.isAssetBankCompany,this.isKW=e.isKW,this.assetBank=new a.default,e.simplified=!0,this.initSearch=e.initSearch,s.default.prototype.initialize.call(this,e)},selectSearchOptionEvent:function(e){var t=$(e.currentTarget),n=this.$searchOptions.find("> div"),r=this.$searchOptions.siblings("input");if(t.find(".crown-premium-option").length)INKIVE.Helpers.displaySubscriptionModal("tool.versions.helper.description");else{if(this.searchTitle=this.searchTitle||r.attr("placeholder"),t.is(n)){n.removeClass("selected"),n.find(".desygner-icon-check").prependTo(t),t.addClass("selected");var o=_.include(["kwls","mns"],t.data("key"))?INKIVE.TranslateHelper.translate("tool.search.kw_search_tooltip"):this.searchTitle;r.attr("placeholder",o)}n.closest(".search-container").children("input").focus()}},search:function(e){var t=this.$el.find(".image-list"),n=t.find(".thumbnail-wrapper");n.removeClass("thumbnail-wrapper").addClass("tab-content"),n.empty().css("height",""),this.$el.find(".categories-container").addClass("hidden"),this.$el.parent().find(".search-options").hide(),t.find(".antiscroll-scrollbar").remove(),t.find(".tab-content").empty().removeData();var r=(e?e.val():"")||this.getRandomSearchValue();INKIVE.Modal.loader(document.body);var o=_.bind((function(e){e=e||{},this.searchView=this.searchView||new l.default,this.searchView.initSearch(t,_.extend(e,{query:r,type:"image",callback:this.refreshAntiscroll}))}),this);this.$searchOptions&&this.$searchOptions.find(".providers-filter").find("input[name=asseetbank]:checked").length?this.assetBank.authenticate(!0).then(_.bind((function(){this.assetBank.authenticated=!0,o({legacy:"assetbank"})}),this),(function(){console.error("Error in authentication")})):o()},getSearchOptions:function(e,t){return this.$searchOptions||(this.$searchOptions=$((0,i.default)({isPremium:this.canUseFilters,isAssetBankCompany:this.isAssetBankCompany,isKW:this.isKW,providers:e,types:t,image:!0,type:"images-"+this.$el.siblings(".header-links").find(".active").attr("data-key")})),INKIVE.Helpers.initPopover(this.$searchOptions),this.$searchOptions.find("input#filter-option-sstk").trigger("click")),this.$searchOptions},refresh:function(){s.default.prototype.refresh.call(this);var e=this.$el.find(".image-list .thumbnail-wrapper");e.data("masonry")&&e.masonry(o.default.sidebar.thumbnail.masonryConfig)},_render:function(){var e=this;s.default.prototype._render.call(this),this.initSearch&&this.initSearch().then((function(){return e.search()}))}})},{"../../../../../../src/config/constants":1090,"../components/common/filter-search-options.hbs":322,"../components/common/stock-component":325,"../search/search":539,"./patterns":446,"./social-media-contents/assetbank":448,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.search.js":925}],459:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("./social-media"),c=e("./gradients/view"),u=e("../../../analytics/decorate"),d=e("../../../factory/company").instance;t.exports=u(e("./analytics/view"),a.extend({type:"image",memberType:["images","brand"],uploadViewKey:"image-import",StockView:e("./stock"),isAlreadyThere:function(){return!!this.$el.find(".tab-content.image").length},render:(s=(0,i.default)(o.default.mark((function e(){var t,n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getCompanyItems("features");case 2:return t=e.sent,n=t&&t.white_label&&t.white_label.includes("show_marketplace"),e.next=6,a.prototype.render.call(this);case 6:r=this.$headerLinks.filter("[data-key=stock]"),n||(r.hide(),r=this.$headerLinks.filter("[data-key=add]")),this.isEnterprise?((i=this.$headerLinks.filter("[data-key=user_library]")).length||(i=this.$headerLinks.filter("[data-key=library]")),r.length?a.prototype.checkEmptyLibrary.call(this,r):i.trigger("click")):r.trigger("click");case 9:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),initAddView:function(){var e=this;a.prototype.initAddView.call(this);var t=$('<div class="social-media"/>'),n=new l({el:t,isAssetBankCompany:this.isAssetBankCompany});this.isAssetBankCompany&&this.$el.find(".import-button").css("margin-top",15),this.registerTabView("add",n),n.render(),this.$el.find(".tab-content > .add .top-content").after(t),this.$el.find(".list-import-button").on("click",(function(){e.$el.find("input[type=file]").click()}))},initGradientsView:function(){var e=$("<div></div>");this.$el.find(".tab-content > .gradients").append(e),this.gradientsView=new c({el:e}),this.registerTabView("gradients",this.gradientsView),this.gradientsView.show()},updateSearchContainer:function(){"add"===this.selectedTab.key&&(this.selectedTab.searchable=!1),this.selectedTab.searchable&&this.displaySearchContainer(this.$el.find(".search-container"))}}))},{"../../../analytics/decorate":2,"../../../factory/company":122,"../components/common/common-component":321,"./analytics/view":439,"./gradients/view":445,"./social-media":457,"./stock":458,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.string.includes.js":915}],460:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | KWLS",show:{eventAction:"show"}}},{}],461:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js");var r=e("../components/accordion-list/categories-director"),o=e("../search/search");t.exports=r.extend({templates:{kwls:e("./search-results/kwls.hbs"),mns:e("./search-results/mns.hbs")},events:_.extend({"click .search-close":"closeSearchEvent"},r.prototype.events),initialize:function(){_.bindAll(this,"refreshAntiscroll","searchCallback","addThumbnail","mapResult"),r.prototype.initialize.call(this)},search:function(e){var t=this.$el.find(".image-list"),n=t.find(".tab-content");this.tool=INKIVE.Tool.getInstance(),this.$el.find(".search-title").removeClass("hidden"),t.find(".antiscroll-scrollbar").remove(),n.css("height","").empty().removeData(),this.$el.siblings(".search-container").addClass("disabled"),this.$searchOptions.toggle(!1),this.searchView=this.searchView||new o,this.searchView.initSearch(t,{query:e.val(),type:this.type,callback:this.refreshAntiscroll,url:this.getSearchUrl(e.val()),authErrorCallback:this.authErrorCallback,skipScrollDetect:"postal_code"===this.searchType},this.searchCallback)},searchCallback:function(e){return _.chain(e).map(this.mapResult).each(this.addThumbnail)},closeSearchEvent:function(e){var t=$(e.currentTarget).parents(".search-title"),n=this.$el.closest(".tab-content").find(".search-container input");t.addClass("hidden"),this.$el.find(".tab-content").empty(),n.val(""),n.toggleClass("searching")},refreshAntiscroll:function(){this.$el.siblings(".search-container").removeClass("disabled"),"postal_code"!==this.searchType&&(this.$el.find(".antiscroll-wrap").antiscroll({horizontal:!1}),this.$el.find(".antiscroll-scrollbar").css("left",304))},refresh:_.noop,addThumbnail:function(e){var t=this.templates[this.type]({item:e,longId:e.id&&e.id.length>10});this.$el.find(".tab-content").append(t)}})},{"../components/accordion-list/categories-director":313,"../search/search":539,"./search-results/kwls.hbs":468,"./search-results/mns.hbs":469,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870}],462:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'<div class="kwls-details"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+e.escapeExpression("function"==typeof(s=null!=(s=l(n,"type")||(null!=t?l(t,"type"):t))?s:e.hooks.helperMissing)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:1,column:12},end:{line:1,column:20}}}):s)+'-content">\n  <div class="search-title hidden">\n    <div class="search-close pull-right">\n      <icon>\n        <svg>\n          <use xlink:href="#cross"></use>\n        </svg>\n      </icon>\n    </div>\n  </div>\n\n  <div class="image-list">\n    <div class="antiscroll-wrap">\n      <div class="antiscroll-inner">\n        <div class="tab-content"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'+(null!=(i=l(n,"if").call(a,null!=t?l(t,"isKwls"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:0},end:{line:22,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],463:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var o=r(e("../../../../../../src/config/constants"));t.exports={placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",mapResult:function(e){this.canvas=INKIVE.Tool.getInstance().editor.canvas;var t=(e=e._source).photos||[],n=e.structure||{},r=e.location||{},o=e.list_agent_office||{},i=e.co_list_agent_office||{},s=e.virtual_tours||{},a=e.open_houses||{},l=n.parking_features&&n.parking_features.join(", ")||"";n.parking_total&&(l+=l?" / ":"",l+=n.parking_total);var c=e.list_address||{},u=e.property_address||{};return{id:e.mls_number,list_key:e.list_key,list_uuid:e.list_uuid,address:c.full_street_address||u.full_street_address,city:c.city||u.city_long,state:c.state_prov||u.state_prov_short,postal_code:c.postal_code||u.postal_code_short,photos:t,thumbnail:t[0]?t[0].ph_url:this.placeHolderUrl,text:{list_key:e.list_key,listing_category:e.list_category,listing_status:e.list_status,property_type:e.prop_type,property_sub_type:e.prop_subtype,special_condition:e.special_list_condition,listing_address:this.getAttribute(e,"listing_address"),property_address:this.getAttribute(e,"list_address"),listing_type:e.list_type,mls_name:e.mls_name,current_price:this.getAttribute(e,"current_list_price"),original_price:this.getAttribute(e,"original_list_price"),sold_price:this.getAttribute(e,"close_price"),listing_date:this.getAttribute(e,"list_dt"),contract_day:this.getAttribute(e,"contract_expiry_dt"),settled_date:this.getAttribute(e,"close_dt"),year_built:e.year_built,living_area:this.getAttribute(e,"living_area"),lot_size:this.getAttribute(e,"lot_size_area"),bedrooms:e.total_bed,bathrooms:e.total_bath,half_bathrooms:e.half_bath,full_bathrooms:e.full_bath,stories:n.stories,parking:l,basement_description:e.basement_desc,cooling_heating_system:n.heating_cooling&&n.heating_cooling.join(", "),hoa_fees:e.hoa&&e.hoa.assoc_fee,schools:r.schools&&_.compact(_.map(r.schools,"school_category")).join(", "),schools_names:r.schools&&_.compact(_.map(r.schools,"school_name")).join(", "),schools_districts:r.schools&&_.compact(_.map(r.schools,"school_district")).join(", "),market_center:e.brokerage&&e.brokerage.name,listing_agent:e.list_kw_uid,listing_agent_name:o.list_agent_full_name,colist_agent:i.co_list_agent_full_name,interior_feature_list:this.getBooleanListAttribute(n.interior_features),exterior_feature_list:this.getBooleanListAttribute(n.exterior_features),views_description:n.views&&n.views.join(", "),property_description:e.list_desc,virtual_tour_url:s.vt_url,virtual_tour_description:s.vt_short_desc,open_houses_description:a.oh_desc,open_houses_status:a.oh_status,open_houses_start_date:this.getAttribute(a,"oh_start_dt"),open_houses_end_date:this.getAttribute(a,"oh_end_time_dt"),unit_number:c.unit_number}}},getBooleanListAttribute:function(e){return _.compact(_.map(e,(function(e,t){return e&&t.replace("_"," ")}))).join(", ")},getAttribute:function(e,t){var n,r=t.split("_");if(e[t]){if(_.contains(r,"price")){var o=e.currency_code;n=Number(e[t]).toLocaleString(),o&&(n+=" "+o,_.contains(["USD","AUD"],o)&&(n="$"+n))}if(_.contains(r,"area")){var i=e[t+"_units"]||e[t.replace("area","units")];n=e[t],i&&(n+=" "+i)}if(_.contains(r,"dt")&&(n=e[t].length>10?e[t].substr(0,10):e[t]),_.contains(r,"address"))n=(e[t].full_street_address||"")+". "+(e[t].city||e[t].city_short||e[t].city_long||"")+" - "+(e[t].postal_code||e[t].postal_code_short||"");return n}},showPropertyImages:function(e,t){var n=$.Deferred(),r=t.itemDetails.photos;e.append('<div class="thumbnail-wrapper"/>'),r.length||e.html('<label class="title text-center">'+INKIVE.TranslateHelper.translate("general.no_results")+"</label>");var i=_.map(r,(function(e){var n=t.imageProxy+"&url="+encodeURIComponent(e.ph_url);return INKIVE.ImagesFactory.addImageData(n),{id:"photo-kwls-details-"+e.ph_order,width:120,data:{version:{thumb:n,original:n},tags:_.map(e.ph_tags,"tag_name"),name:e.ph_label&&e.ph_label.name.toLowerCase()}}}));return t.tool.addThumbItem(e,i,(function(n,r){INKIVE.Modal.loaderClose(e),_.bind(t.tool.callbackImages,t.tool)(n,r),$(n).each((function(){var e=$(this);e.attr("data-search-filter",e.find("a").attr("data-original-title"))})),r.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),t.refreshAntiscroll()})),n.promise()},showPropertyTexts:function(e,t){var n=$(this.getSelectedElement()).is(".textarea"),r="onlyReplace"===t.canUseText;INKIVE.Modal.loaderClose(e),_.each(t.itemDetails.text,_.bind((function(t,o){if(t){o=o.replace(/_/g," "),t=(t+"").replace(/"/g,"&quot;");var i=$('<div class="thumbnail-wrapper no-resizable" data-search-filter="'+t.toLowerCase()+o+'"/>'),s=new INKIVE.ThumbText({text:t,width:230,fontFamily:"Lato"}),a=_.bind(_.partial(this.onReplaceText,s),this);s.appendTo(i);var l=$('<div class="description">'+o+'</div><div class="icons">'+(r?"":'<i class="desygner-icon-plus add-text stand-alone"/>')+'<i class="fa fa-refresh replace-text '+(n?"":"hidden")+'"/></div>');i.append(l),i.appendTo(e),i.find("i.desygner-icon-plus").on("click",_.bind(s.onItemClick,s)),i.find("i.replace-text").on("click",a),r&&i.find(".thumbnail").off("mousedown").on("click",a)}}),this),t),t.refreshAntiscroll()},onReplaceText:function(e){var t=this.getSelectedElement();if(!$(t).is(":not(.textarea)")){var n=(new INKIVE.Text.Textarea).setDOM(t);n.text.setValues({textContent:e.text}),n.render(this.canvas)}},getSelectedElement:function(){var e=this.canvas.getSelectedElems();return e.length&&e[0]}}},{"../../../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],464:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js");var o=r(e("../../../../../../src/config/constants")),i=r(e("./base")),s=r(e("./search-options.hbs")),a=r(e("./search-results/kwls-details.hbs")),l=r(e("./kwls-search-results")),c=r(e("../../../facade/restrictions/restrictions")),u=r(e("../../../modal/kwls-login")),d=r(e("../../../facade/design/design"));t.exports=i.default.extend({type:"kwls",placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",addedThumbnails:[],thumbSize:{width:90,height:90},events:_.extend({"click .item button":"openPropertyDetails","click .items-container .header span":"clickItemsContainerHeader","keyup input[name=kwls-details-search]":"searchKlwsDetails","click input[name=kwls-details-search]":"searchKlwsDetails","click .texts-header":"showSearchBox","click .images-header":"showSearchBox","click .back-link":"closeDetails"},i.default.prototype.events),initialize:function(){if(_.bindAll(this,"clickItemsContainerHeader","showPropertyItems","authErrorCallback","loginSuccessfullCallback"),this.imageProxy="https://cflare.smarteragent.com/rest/Resizer?sig_id=69",this.server=INKIVE.C.IS_DEV||INKIVE.C.IS_QA?"https://qa-kong.command-api.kw.com":"https://kong.command-api.kw.com",i.default.prototype.initialize.call(this),INKIVE.C.BOOK.external_reference){this.preselected=!0,this.selectOption(this.getSearchOptions().find('[data-key="key"]'));var e=this.$el.siblings(".search-container").find("input");e.val(INKIVE.C.BOOK.external_reference),this.search(e)}},search:function(e){this.addedThumbnails=[],i.default.prototype.search.call(this,e)},closeDetails:function(e){$(e.target).closest(".inner-tabs").find(".search-options").css("display","none")},searchClickEvent:function(e){this.$searchOptions&&this.$searchOptions.toggle()},selectSearchOptionEvent:function(e){var t=$(e.currentTarget),n=this.getSearchOptions().find("> div");t.is(n)&&this.selectOption(t,n),n.closest(".search-container").children("input").focus(),n.closest(".search-options").css("display","none")},selectOption:function(e,t){t=t||this.getSearchOptions().find("> div");var n=this.getSearchOptions().siblings("input"),r=t.find(".desygner-icon-check");r.length||(r=$('<i class="desygner-icon-check"></i>')),t.removeClass("selected"),r.prependTo(e),e.addClass("selected"),n.attr("placeholder",e.text().trim())},getSearchOptions:function(){return this.$searchOptions||(this.$searchOptions=$((0,s.default)({type:"kwls",isKwls:!0}))),this.$searchOptions},getSearchUrl:function(e){var t=this.server+"/v2/listings-proxy?filter";switch(this.getSearchOptions().find(".selected").data("key")){case"mls":t+="[mls_number][is]="+e;break;case"key":t+="[list_key][is]="+e;break;case"list_kw_uid":t+="[list_kw_uid][is]="+e;break;case"co_list_kw_uid":t+="[co_list_kw_uid][is]="+e;break;case"list_address":default:t+="[list_address.full_street_address][like]="+e}return t+="&page[limit]=10&page[offset]="},mapResult:function(e){return l.default.mapResult(e)},addThumbnail:function(e){if(!_.includes(this.addedThumbnails,e.id)){e.thumbnail!==this.placeHolderUrl&&(e.thumbnail=this.imageProxy+"&width="+this.thumbSize.width+"&url="+encodeURIComponent(e.thumbnail));var t=_.bind((function(t){e.thumbnail=t===INKIVE.C.Status.success?e.thumbnail:this.placeHolderUrl,i.default.prototype.addThumbnail.call(this,e),this.$el.find("[data-id="+e.list_uuid+"]").data("item",e),this.addedThumbnails.push(e.id),this.preselected&&(this.selectOption(this.getSearchOptions().find('[data-key="address"]')),this.$el.find("[data-id="+e.list_uuid+"]").find("button").click(),this.preselected=!1)}),this);INKIVE.ImagesFactory.smartLoad(e.thumbnail,this.thumbSize,t,!1)}},openPropertyDetails:function(e){var t=$(e.currentTarget);this.itemDetails=t.closest(".item").data().item;var n=t.closest(".kwls-content").siblings(".kwls-details");this.checkCanReplace(),n.html((0,a.default)({item:this.itemDetails,canUseImages:this.canUseImages,canUseText:this.canUseText})),n.find(".antiscroll-wrap").antiscroll(),n.css("left",0),n.find(".back-link").on("click",(function(){INKIVE.SettingsFactory.set({external_reference:null}).then(_.bind((function(){INKIVE.C.BOOK.external_reference=null}),this)),n.css("left",315)})),this.clickItemsContainerHeader(),INKIVE.SettingsFactory.set({external_reference:this.itemDetails.list_key}).then(_.bind((function(){INKIVE.C.BOOK.external_reference=this.itemDetails.list_key}),this))},checkCanReplace:function(){function e(e){var t=INKIVE.Tool.getInstance().editor.canvas.getSelectedElems();if(1===t.length&&d.default.get(t[0].id).type===e){var n="text"===e?"text_change_content":"image_content";return!!c.default.isActionAllowed(n,t[0].id)&&"onlyReplace"}}this.canUseImages=c.default.isFunctionalityAllowed("image_add")||c.default.isFunctionalityAllowed("image_content")||e("image"),this.canUseText=c.default.isFunctionalityAllowed("text_add")||e("text")},clickItemsContainerHeader:function(e){var t=this.$el.find(".kwls-details").find(this.canUseImages?".images-header":".texts-header"),n=e?$(e.currentTarget):t;n.is(".active")||(n.siblings().removeClass("active"),n.addClass("active"),this.showPropertyItems(n.data("key")))},showPropertyItems:function(e){this.selectedTab=e;var t=this.$el.find(".kwls-details").find(".items-content"),n=t.find("."+e);if(t.find(">div").hide(),n.length)return n.show(),void("images"===e&&n.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig));n=$('<div class="'+e+'"/>').appendTo(t),INKIVE.Modal.loader(n),this.$el.find("[data-search-filter]").show(),e&&l.default["showProperty"+e.charAt(0).toUpperCase()+e.slice(1)](n,this)},searchKlwsDetails:function(e){var t=$(e.currentTarget).val();"Enter"===e.key&&e.preventDefault(),this.$el.find("[data-search-filter]").toggle(!t),t&&this.$el.find("[data-search-filter*="+t+"]").show(),this.$el.find(".images").find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),this.refreshAntiscroll()},showSearchBox:function(e){var t=$(e.currentTarget),n=t.closest(".antiscroll-inner").find(".search-container");t.is("span.texts-header")&&(t.closest(".kwls-details").find(".search-options-container").remove(),t.closest(".search-options-container").find(".search-options").css("display","none")),n.toggleClass("search-container-show")},closeSearchEvent:function(e){i.default.prototype.closeSearchEvent.call(this,e),this.addedThumbnails=[],INKIVE.C.BOOK.external_reference=null,this.preselected=!1},authErrorCallback:function(){var e=new u.default({server:this.server}),t=INKIVE.Modal.modalWindow(e.getFormHtml(),{width:396,height:450,headerTitle:"modal.kwls_login.title",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.send_request"),onClick:_.bind((function(){INKIVE.Modal.togglePageLoader(!0),e.sendRequest(_.partial(this.loginSuccessfullCallback,t))}),this),cls:"kwls-login-button"}]})},loginSuccessfullCallback:function(e,t){e.close(),INKIVE.Modal.togglePageLoader(!1),INKIVE.C.USER.kw_sso_token=t.access_token,this.search(this.$el.siblings(".search-container").find("[name=search]"))}})},{"../../../../../../src/config/constants":1090,"../../../facade/design/design":47,"../../../facade/restrictions/restrictions":118,"../../../modal/kwls-login":173,"./base":461,"./kwls-search-results":463,"./search-options.hbs":466,"./search-results/kwls-details.hbs":467,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.search.js":925,"core-js/modules/es.string.trim.js":929}],465:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.function.bind.js");var r=e("./base"),o=e("../../../factory/images"),i=e("./search-options.hbs");t.exports=r.extend({type:"mns",events:_.extend({"click .item .content":"toggleThumbnailEvent"},r.prototype.events),thumbSize:{width:240,height:118},initialize:function(){this.mnsServer=INKIVE.C.IS_DEV?"qa-kong.command-api.kw.com":"kong.command-api.kw.com",r.prototype.initialize.call(this)},searchClickEvent:function(e){this.$searchOptions&&this.$searchOptions.toggle()},selectSearchOptionEvent:function(e){var t=$(e.currentTarget),n=this.getSearchOptions().find("> div");t.is(n)&&this.selectOption(t,n),n.closest(".search-container").children("input").focus()},selectOption:function(e,t){t=t||this.getSearchOptions().find("> div");var n=this.getSearchOptions().siblings("input");t.removeClass("selected"),t.find(".desygner-icon-check").prependTo(e),e.addClass("selected"),n.attr("placeholder",e.text().trim())},getSearchOptions:function(){return this.$searchOptions||(this.$searchOptions=$(i({type:"mns",isMns:!0}))),this.$searchOptions},getSearchUrl:function(e){var t="https://"+this.mnsServer;return this.searchType=this.getSearchOptions().find(".selected").data("key"),"neighborhood"===this.searchType?t+="/v1/boundaries/area?q=":"postal_code"===this.searchType&&(t+="/mns/image-snap/generate?process=image_direct&zip_code="),t+=e+"&filter[boundary_type]=neighborhood&page[limit]=10&page[offset]="},searchCallback:function(e){"postal_code"===this.searchType?(this.processImageThumbnail(this.$el.find(".thumbnail-wrapper"),{data:e}),this.$el.find(".antiscroll-inner").css("height","100%")):r.prototype.searchCallback.call(this,e)},mapResult:function(e){return{id:e.id,neighborhood:e.attributes.neighborhood_name,city:e.attributes.city,state:e.attributes.state_or_province_full,country:e.attributes.country}},toggleThumbnailEvent:function(e){var t=$(e.currentTarget).parent(),n=t.find(".thumbnail-wrapper"),r=!!n.height();if(r)INKIVE.Modal.loaderClose(n),n.height(0);else if(n.html()){var o=40;n.find(".thumbnail").each((function(){o+=$(this).height()})),n.height(o)}else n.height(100),this.getImageThumbnail(n,t.data("id"),e);t.find(".desygner-icon-arrow-up").toggleClass("hidden",r),t.find(".desygner-icon-arrow-down").toggleClass("hidden",!r)},getImageThumbnail:function(e,t){var n="https://"+this.mnsServer+"/mns/image-snap/generate?process=image_direct&neighborhood_id="+t;_.delay(_.partial(INKIVE.Modal.loader,e),500),$.get(n).then(_.bind(_.partial(this.processImageThumbnail,e),this),(function(t){_.delay((function(){e.html('<div class="loading-error">Error loading thumbnails</div>')}),600)}))},processImageThumbnail:function(e,t){t.data.image_orientation_urls||(t.data.image_orientation_urls={290:{landscape:t.data.image_urls[290]},1200:{landscape:t.data.image_urls[1200]}});var n=t.data.image_orientation_urls[290],r=_.bind((function(n,r){r===INKIVE.C.Status.success&&this.addImageThumbnail(e,t,n)}),this);_.each(n,_.bind((function(e,t){o.smartLoad(e,this.thumbSize,_.partial(r,t),!0)}),this))},addImageThumbnail:function(e,t,n){var r=_.bind(this.tool.callbackImages,this.tool),o=t.data.image_orientation_urls[290][n],i=new Image,s="portrait"===n;i.src=o,i.onload=_.bind((function(){var a=s?150:232,l=i.width/a,c={width:a,height:i.height/l},u=_.extend({id:"photo-mns-"+t.data.neighborhood_id,data:{version:{thumb:o,original:t.data.image_orientation_urls[1200][n]}}},c);e.find(".loader-wrapper").length&&(e.height(0),INKIVE.Modal.loaderClose(e)),this.tool.addThumbItem(e,[u],r),INKIVE.ImagesFactory.addImageData(u.data)}),this)}})},{"../../../factory/images":127,"./base":461,"./search-options.hbs":466,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.trim.js":929}],466:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div data-key="list_address">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.list_address",{name:"t",hash:{},data:o,loc:{start:{line:4,column:12},end:{line:4,column:62}}}))+'</span>\n    </div>\n\n    <div data-key="mls">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.mls_number",{name:"t",hash:{},data:o,loc:{start:{line:8,column:12},end:{line:8,column:60}}}))+'</span>\n    </div>\n\n    <div data-key="key">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.listing_key",{name:"t",hash:{},data:o,loc:{start:{line:12,column:12},end:{line:12,column:61}}}))+'</span>\n    </div>\n\n    <div data-key="list_kw_uid">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.list_kw_uid",{name:"t",hash:{},data:o,loc:{start:{line:16,column:12},end:{line:16,column:61}}}))+'</span>\n    </div>\n\n    <div data-key="co_list_kw_uid">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.co_list_kw_uid",{name:"t",hash:{},data:o,loc:{start:{line:20,column:12},end:{line:20,column:64}}}))+"</span>\n    </div>\n"},3:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div data-key="neighborhood">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.mns_neighborhood",{name:"t",hash:{},data:o,loc:{start:{line:25,column:12},end:{line:25,column:66}}}))+'</span>\n    </div>\n\n    <div data-key="postal_code">\n      <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.search.kw_search_options.mns_postal_code",{name:"t",hash:{},data:o,loc:{start:{line:29,column:12},end:{line:29,column:65}}}))+"</span>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="search-options" data-type="'+e.escapeExpression("function"==typeof(s=null!=(s=l(n,"type")||(null!=t?l(t,"type"):t))?s:e.hooks.helperMissing)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:1,column:39},end:{line:1,column:49}}}):s)+'">\n'+(null!=(i=l(n,"if").call(a,null!=t?l(t,"isKwls"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:22,column:9}}}))?i:"")+(null!=(i=l(n,"if").call(a,null!=t?l(t,"isMns"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:2},end:{line:31,column:9}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],467:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="filter-button">\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path fill-rule="evenodd" clip-rule="evenodd"\n            d="M10.25 7C10.25 4.92893 11.9289 3.25 14 3.25C15.8142 3.25 17.3275 4.53832 17.675 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H17.675C17.3275 9.46168 15.8142 10.75 14 10.75C11.9289 10.75 10.25 9.07107 10.25 7ZM14 4.75C15.2426 4.75 16.25 5.75736 16.25 7C16.25 8.24264 15.2426 9.25 14 9.25C12.7574 9.25 11.75 8.24264 11.75 7C11.75 5.75736 12.7574 4.75 14 4.75ZM2 6.25C1.58579 6.25 1.25 6.58579 1.25 7C1.25 7.41421 1.58579 7.75 2 7.75H8C8.41421 7.75 8.75 7.41421 8.75 7C8.75 6.58579 8.41421 6.25 8 6.25H2ZM2 16.25C1.58579 16.25 1.25 16.5858 1.25 17C1.25 17.4142 1.58579 17.75 2 17.75H5.32501C5.67247 19.4617 7.18578 20.75 9 20.75C11.0711 20.75 12.75 19.0711 12.75 17C12.75 14.9289 11.0711 13.25 9 13.25C7.18578 13.25 5.67247 14.5383 5.32501 16.25H2ZM6.75 17C6.75 18.2426 7.75736 19.25 9 19.25C10.2426 19.25 11.25 18.2426 11.25 17C11.25 15.7574 10.2426 14.75 9 14.75C7.75736 14.75 6.75 15.7574 6.75 17ZM15 16.25C14.5858 16.25 14.25 16.5858 14.25 17C14.25 17.4142 14.5858 17.75 15 17.75H21C21.4142 17.75 21.75 17.4142 21.75 17C21.75 16.5858 21.4142 16.25 21 16.25H15Z"\n            fill="#200E32" />\n        </svg>\n        <span>'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"popupmenu.dropdown_title.image_filter",{name:"t",hash:{},data:o,loc:{start:{line:42,column:14},end:{line:42,column:59}}}))+"</span>\n      </div>\n"},3:function(e,t,n,r,o){return'      <div class="search-options-container">\n        <span data-popover="tooltip"></span>\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path fill-rule="evenodd" clip-rule="evenodd"\n            d="M10.25 7C10.25 4.92893 11.9289 3.25 14 3.25C15.8142 3.25 17.3275 4.53832 17.675 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H17.675C17.3275 9.46168 15.8142 10.75 14 10.75C11.9289 10.75 10.25 9.07107 10.25 7ZM14 4.75C15.2426 4.75 16.25 5.75736 16.25 7C16.25 8.24264 15.2426 9.25 14 9.25C12.7574 9.25 11.75 8.24264 11.75 7C11.75 5.75736 12.7574 4.75 14 4.75ZM2 6.25C1.58579 6.25 1.25 6.58579 1.25 7C1.25 7.41421 1.58579 7.75 2 7.75H8C8.41421 7.75 8.75 7.41421 8.75 7C8.75 6.58579 8.41421 6.25 8 6.25H2ZM2 16.25C1.58579 16.25 1.25 16.5858 1.25 17C1.25 17.4142 1.58579 17.75 2 17.75H5.32501C5.67247 19.4617 7.18578 20.75 9 20.75C11.0711 20.75 12.75 19.0711 12.75 17C12.75 14.9289 11.0711 13.25 9 13.25C7.18578 13.25 5.67247 14.5383 5.32501 16.25H2ZM6.75 17C6.75 18.2426 7.75736 19.25 9 19.25C10.2426 19.25 11.25 18.2426 11.25 17C11.25 15.7574 10.2426 14.75 9 14.75C7.75736 14.75 6.75 15.7574 6.75 17ZM15 16.25C14.5858 16.25 14.25 16.5858 14.25 17C14.25 17.4142 14.5858 17.75 15 17.75H21C21.4142 17.75 21.75 17.4142 21.75 17C21.75 16.5858 21.4142 16.25 21 16.25H15Z"\n            fill="#200E32" />\n        </svg>\n      </div>\n'},5:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="images-header" data-key="images">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.images",{name:"t",hash:{},data:o,loc:{start:{line:60,column:12},end:{line:60,column:56}}}))+"\n          </span>\n"},7:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="texts-header" data-key="texts">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.text",{name:"t",hash:{},data:o,loc:{start:{line:65,column:12},end:{line:65,column:54}}}))+"\n          </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap  no-resizable">\n  <div class="antiscroll-inner">\n    <div class="back-link">\n      <icon>\n        <svg>\n          <use xlink:href="#editor-chevron-left"></use>\n        </svg>\n      </icon>\n      <span>'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"common.back",{name:"t",hash:{},data:o,loc:{start:{line:9,column:12},end:{line:9,column:31}}}))+'</span>\n    </div>\n\n    <div class="property-details">\n      <div class="address">\n        '+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"address"):i,t))+'\n      </div>\n\n      <div class="city">\n        '+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"city"):i,t))+", "+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"postal_code"):i,t))+" "+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"state"):i,t))+'\n      </div>\n\n      <div class="identificator">\n        <span>'+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"id"):i,t))+'</span>\n      </div>\n    </div>\n\n    <div class="search-container">\n      <div class="search-button">\n        <icon>\n          <svg>\n            <use xlink:href="#search"></use>\n          </svg>\n        </icon>\n      </div>\n      <input type="text" name="kwls-details-search" placeholder="'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"tool.search.kw_details_search_tooltip",{name:"t",hash:{},data:o,loc:{start:{line:34,column:65},end:{line:34,column:110}}}))+'"/>\n'+(null!=(i=u(n,"if").call(s,null!=t?u(t,"has_filter"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:35,column:6},end:{line:53,column:13}}}))?i:"")+'    </div>\n\n    <div class="items-container">\n      <div class="header">\n'+(null!=(i=u(n,"if").call(s,null!=t?u(t,"canUseImages"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:58,column:8},end:{line:62,column:15}}}))?i:"")+(null!=(i=u(n,"if").call(s,null!=t?u(t,"canUseText"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:63,column:8},end:{line:67,column:15}}}))?i:"")+'      </div>\n\n      <div class="items-content"></div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],468:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"long-id"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item kwls" data-id="'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"list_uuid"):i,t))+'">\n  <div class="thumbnail">\n    <img src="'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"thumbnail"):i,t))+'"/>\n  </div>\n  <div class="address">\n    '+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"address"):i,t))+"\n    <br/>\n    "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"city"):i,t))+", "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"postal_code"):i,t))+" "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"state"):i,t))+'\n  </div>\n  <div class="identificator">\n    <span class="'+(null!=(i=c(n,"if").call(l,null!=t?c(t,"longId"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:17},end:{line:11,column:45}}}))?i:"")+'">'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"id"):i,t))+'</span>\n  </div>\n  <div class="button">\n      <button>'+a((c(n,"t")||t&&c(t,"t")||e.hooks.helperMissing).call(l,"Select",{name:"t",hash:{},data:o,loc:{start:{line:14,column:14},end:{line:14,column:28}}}))+"</button>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],469:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item mns" data-id="'+a(s(null!=(i=null!=t?l(t,"item"):t)?l(i,"id"):i,t))+'">\n  <div class="content">\n    <p>\n      <span class="neighborhood">\n        '+a(s(null!=(i=null!=t?l(t,"item"):t)?l(i,"neighborhood"):i,t))+'\n      </span>\n      <span class="arrow"><i class="desygner-icon-arrow-down"></i><i class="desygner-icon-arrow-up hidden"></i></span>\n    </p>\n    <p>\n      <span class="city">\n        '+a(s(null!=(i=null!=t?l(t,"item"):t)?l(i,"city"):i,t))+'\n      </span>\n    </p>\n    <p>\n      <span class="state">\n        '+a(s(null!=(i=null!=t?l(t,"item"):t)?l(i,"state"):i,t))+'\n      </span>\n      <span class="country">\n        ('+a(s(null!=(i=null!=t?l(t,"item"):t)?l(i,"country"):i,t))+')\n      </span>\n    </p>\n  </div>\n  <div class="thumbnail-wrapper"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],470:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("./kwls"),c=e("./mns"),u=e("../../../analytics/decorate"),d=e("./kw-template.hbs");t.exports=u(e("./analytics/view"),a.extend({type:"kwls",isAlreadyThere:function(){return!!this.$el.find(".tab-content.kwls").length},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:this.$headerLinks.filter("[data-key=kwls]").trigger("click");case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),refresh:function(){a.prototype.refresh.call(this),this.$el.find(".search-container").removeClass("disabled");var e=this.$el.find(".header").find(".active[data-key=images]");e.length&&e.removeClass("active").trigger("click")},initKwlsView:function(){this.registerTabView("kwls",new l({el:this.initTabView("kwls")}))},initMnsView:function(){this.registerTabView("mns",new c({el:this.initTabView("mns")}))},initTabView:function(e){var t=this.$el.find(".tab-content > ."+e);return t.html(d({type:e,isKwls:"kwls"===e})),t}}))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"./analytics/view":460,"./kw-template.hbs":462,"./kwls":464,"./mns":465,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],471:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("../../../../../../../src/config/constants")),i=r(e("../../components/mixins/scrollable")),s=r(e("../../../../factory/library/library-populator")),a=r(e("../../../../facade/editor/editor")),l=r(e("../../../../factory/uppy")),c=e("../../../../factory/library");t.exports=Backbone.mixin(Backbone.mixin(Backbone.View.extend({template:e("./template.hbs"),limit:30,events:{"click .library-link a.empty":"goToLibraryEvent","change select.company-picker":"switchCompany"},goToLibraryEvent:_.partial(Backbone.Events.trigger,"go_to_libray"),initialize:function(e){_.bindAll(this,"render","loadData","initMasonry","masonryReload","loadItems"),this.isSubview=e.isSubview,this.hasParentContent=e.hasParentContent,this.editor=INKIVE.Tool.getInstance().editor,this.canvas=this.editor.canvas,this.librarySource=e.librarySource,this.refreshLibrary=e.refreshLibrary,this.isUserLibrary="member"===this.librarySource||!INKIVE.Helpers.projectIsLinkedToRestrictions(),this.assetsDomains=e.assetsDomains,this.currentDomain=e.domain,this.isWorkspace=!!e.workspace,this.libraryInstances={},this.parentDomain=e.parentDomain,this.workspace=e.workspace,this.isMasonryLoaded=this.isMasonryLoaded||!1,this.addCompanySelection()},loadData:function(){this.resetView().resetLibrary().fetchLibraryResources().then(_.bind(this.processItems,this))},resetView:function(){return this.listeningNewElements||this.initPopulatorListener(),this.isSubview||INKIVE.Modal.loader(this.$el.empty()),this.isSubview&&INKIVE.Modal.loader(this.$el.find(".thumbnail-wrapper:not(.folders)")),this.uppyFactory&&this.uppyFactory.close(),["videos"].includes(this.type)&&this.appendAddButton(),this},initPopulatorListener:function(){this.listeningNewElements=!0,s.default.on("new."+this.type,this.loadData)},resetLibrary:function(e){return e=e||this.currentDomain,this.refreshLibrary&&this.getLibraryInstance(e).cacheClear(this.type),this},fetchLibraryResources:function(e){e=e||this.currentDomain;var t=$.Deferred();return this.getLibraryInstance(e).get(this.type,this.filter,!0).then(_.bind((function(e){t.resolve(e)}),this)),t.promise()},getLibraryInstance:function(e,t){var n=e+(this.librarySource||"");return this.libraryInstances[n]&&!t||(this.libraryInstances[n]=new c.factory({librarySource:this.librarySource,domain:e})),this.libraryInstances[n]},processItems:function(e){INKIVE.Modal.togglePageLoader(!1),this.render(e),this.canvas.showOverlayElements(),this.toggleNoContentHint(e),a.default.trigger("library.root",{type:this.type,content:e})},loadResourceData:function(e){return this.getLibraryInstance(this.currentDomain).getResource(this.type,e)},render:function(e){var t=INKIVE.TranslateHelper.translate("tool.library."+this.subResource),n=null;"image"===this.subResource?n="images":"text"===this.subResource&&(n="text");var r={isUserLibrary:this.isUserLibrary,isWorkspace:!!this.workspace,resourceTitle:t,folder:e.length&&"Folder"===e[0].type,type:n};this.$el.html(this.template(r)),_.each(e,this.addThumbnail,this),this.initScroll(),$(document).trigger("library-content-rendered")},emptyView:function(){this.isSubview&&this.$el.find(".thumbnail-wrapper:not(.folders)").empty(),this.isSubview||this.$el.html(this.template())},toggleNoContentHint:function(e){var t=INKIVE.Helpers.projectIsLinkedToRestrictions();!e.length&&this.hasParentContent&&this.$el.find("ul.thumbnail-wrapper.folders + .section-title").hide();var n=!e.length&&!this.$el.find(".folders").children(":not(.hidden)").length&&!this.hasParentContent&&"folders"!==this.type,r=!t&&INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN;n?(this.$el.find(".library-link").removeClass("hidden"),this.$el.siblings(".search-container").css("display","none"),r&&this.$el.find(".library-link a").removeClass("hidden")):this.$el.find(".library-link").addClass("hidden")},addCompanySelection:function(){var e=this.$el.find("select.company-picker");function t(t){var n=$("<option>"),r={value:t.value};t.selected&&(r.selected=t.selected),e.append(n.attr(r).text(t.text))}this.isWorkspace&&this.parentDomain?(t({text:"All",value:"all",selected:!this.assetsDomains.includes(this.currentDomain)}),_.each(this.assetsDomains,_.bind((function(e){t({text:e.charAt(0).toUpperCase()+e.slice(1),value:e,selected:e===this.currentDomain})}),this))):e.hide()},addThumbnail:function(e){var t=$("<li>"),n=new this.ThumbnailView({el:t,item:e});return this.$el.find("ul.thumbnail-wrapper:not(.folders)").append(t).masonry("appended",t),this.masonryRefresh&&n.on("resize",this.masonryRefresh),n},switchCompany:function(e){var t=e.target.value;"all"===t?this.resetView().fetchAllLibrarieResources().then(_.bind(this.processItems,this)):this.assetsDomains.includes(t)&&(this.currentDomain=t,this.loadData())},fetchAllLibrarieResources:function(){var e=$.Deferred(),t=[];return _.each(this.assetsDomains,_.bind((function(e){t.push(this.fetchLibraryResources(e))}),this)),$.when.apply($,t).then((function(){e.resolve([].concat.apply([],arguments))})),e.promise()},remove:function(){this.undelegateEvents(),this.$el.removeData().unbind(),Backbone.View.prototype.remove.call(this)},getScrollHeight:function(e){var t=e.closest(".tab-content").height(),n=e.siblings(".btn.btn-accordion").is(":visible")?e.siblings(".btn.btn-accordion").height():$("#ik-menu-back").height();if(!n&&e.siblings(".header-links").is(":visible")){n=e.siblings(".header-links").height();var r=e.siblings(".search-container");r.is(":visible")&&(n+=r.outerHeight(!0))}return t-n},appendAddButton:function(){var e=this,t=document.createElement("button"),n=this.uppyOptions;t.classList.add("btn-primary"),t.innerHTML='<icon><svg><use xlink:href="#editor-plus"></use></svg></icon>\n      <span>'.concat(INKIVE.TranslateHelper.translate(n.buttonTitle),"</span>"),this.el.querySelector(".antiscroll-inner").prepend(t),this.uppyFactory=new l.default({id:"uppy-".concat(this.el.classList[0],"-").concat(this.type),button:t,loadtype:this.type,restrictions:n.restrictions,onFileUploaded:n.onFileUploaded,onUppyInitialized:n.onUppyInitialized.bind(this)}),this.uppyFactory.initUppyManager().then((function(){n.onUppyInitialized&&e.uppyFactory.uppy.on("dashboard:modal-open",(function(){n.onUppyInitialized.call(e)})),a.default.trigger("".concat(e.type,"-").concat(e.el.classList[0],"-upload-button-appended"),e.uppyFactory)}))},initMasonry:function(){var e=this.$el.find(".thumbnail-wrapper:not(.folders)");e.masonry(o.default.sidebar.thumbnail.masonryRefreshTime),this.isMasonryLoaded=!0,this.masonryRefresh=_.debounce(_.bind(this.masonryReload,this),o.default.sidebar.thumbnail.masonryRefreshTime),this.scrollRefresh=_.debounce(_.bind(this.initScroll,this),o.default.sidebar.thumbnail.masonryRefreshTime),this.observer=new MutationObserver(this.observerCallback.bind(this)),this.observer.observe(e.get(0),{attributeFilter:["src"],childList:!0,subtree:!0})},observerCallback:function(){var e,t;null===(e=this.masonryReload)||void 0===e||e.call(this),null===(t=this.masonryRefresh)||void 0===t||t.call(this)},masonryReload:function(){this.$el.find(".thumbnail-wrapper:not(.folders)").masonry(o.default.sidebar.thumbnail.masonryConfig).masonry("reloadItems")},loadItems:function(e,t){var n,r,o=this,i=this.$el.find("ul.thumbnail-wrapper:not(.folders)").children().length;i>=this.items.length?t():(this.items.slice(i,i+this.limit).forEach((function(e){return o.addThumbnail(e)})),null===(n=this.masonryReload)||void 0===n||n.call(this),null===(r=this.masonryRefresh)||void 0===r||r.call(this),e())}}),Backbone.Events),i.default)},{"../../../../../../../src/config/constants":1090,"../../../../facade/editor/editor":91,"../../../../factory/library":128,"../../../../factory/library/library-populator":135,"../../../../factory/uppy":159,"../../components/mixins/scrollable":334,"./template.hbs":478,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.includes.js":915,"core-js/modules/web.dom-collections.for-each.js":964}],472:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="palettes">\n      <div class="select-wrapper">\n        <select>\n          <option>'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.library.default_palette",{name:"t",hash:{},data:o,loc:{start:{line:7,column:18},end:{line:7,column:54}}}))+"</option>\n"+(null!=(i=a(n,"each").call(s,null!=t?a(t,"palettes"):t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:10},end:{line:10,column:19}}}))?i:"")+"        </select>\n      </div>\n    </div>\n"},2:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <option value="'+a(s(null!=(i=null!=t?l(t,"data"):t)?l(i,"id"):i,t))+'">'+a(s(null!=(i=null!=t?l(t,"data"):t)?l(i,"name"):i,t))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n'+(null!=(i=c(n,"if").call(s,null!=t?c(t,"palettes"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:14,column:11}}}))?i:"")+'\n    <ul class="thumbnail-wrapper"></ul>\n    <div class="library-link hidden">\n      <p>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.library.empty.message",{name:"t",hash:{},data:o,loc:{start:{line:18,column:9},end:{line:18,column:43}}}))+'</p>\n      <a href="'+l((c(n,"route")||t&&c(t,"route")||a).call(s,"library",{name:"route",hash:{},data:o,loc:{start:{line:19,column:15},end:{line:19,column:34}}}))+'" target="_blank" class="btn btn-primary empty">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.library.empty.button",{name:"t",hash:{},data:o,loc:{start:{line:19,column:82},end:{line:19,column:115}}}))+"</a>\n    </div>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],473:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js");var r=e("./base"),o=e("../../../../factory/library").instance;t.exports=r.extend({type:"colors",template:e("./colors-template.hbs"),ThumbnailView:e("../../components/thumbnail/library/color"),events:_.extend({"change select":"selectPaletteEvent"},r.prototype.events),selectPaletteEvent:function(e){var t=_.find(this.palettes,(function(t){return t.data.id===parseInt(e.currentTarget.value)})),n=[];_.each(this.colors,(function(e){!t&&!e.data.palette&&n.push(e),t&&t.data.id===e.data.palette&&n.push(e)})),t&&(n=_.union(n,t.data.colors)),_.invoke(this.views,"remove"),this.renderColors(n,t)},loadData:function(){INKIVE.Modal.loader(this.$el.empty()),this.listeningNewElements||this.initPopulatorListener();var e=o.get(this.type),t=o.get("palettes");$.when(e,t).then(this.render)},render:function(e,t){this.colors=e,this.palettes=t,this.$el.html(this.template({palettes:t})),this.renderColors(e)},renderColors:function(e,t){var n=INKIVE.Helpers.projectIsLinkedToRestrictions(),r=null;this.$el.find(".library-added-thumbnail").remove(),_.each(o.addedColors,_.bind((function(e){t&&t.data.id===e.data.palette?r=this.addThumbnail(e):t||e.data.palette||(r=this.addThumbnail(e)),r&&$(r.el).addClass("library-added-thumbnail")}),this)),t||(e=_.filter(e,(function(e){return!e.data.palette}))),this.views=_.map(e,this.addThumbnail,this),r||e.length||n||this.$el.find(".library-link").removeClass("hidden"),(r||e.length||n)&&this.$el.find(".library-link").addClass("hidden"),this.initScroll(),INKIVE.Helpers.initTooltips(this.$el)}})},{"../../../../factory/library":128,"../../components/thumbnail/library/color":355,"./base":471,"./colors-template.hbs":472,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905}],474:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=e("./base"),i=e("../../../../facade/editor/editor");t.exports=o.extend({type:"folders",subResource:"",filter:{},navigationHistory:[],Views:{text:e("./texts"),logo:e("./logos"),color:e("./colors"),image:e("./images"),icon:e("./icons"),video:e("./videos")},ThumbnailView:e("../../components/thumbnail/library/folder"),events:{"click .folder:not(.parent)":"goToFolderEvent","click .folder.parent":"goBackEvent"},loadData:function(e){this.getLibraryInstance(this.currentDomain).currentFolderId=null,this.subResource=e,this.filter={types:[e]},o.prototype.loadData.call(this,e,this.currentDomain),this.navigationHistory=["root"]},addThumbnail:function(e){var t=$('<li data-id="'+e.id+'" data-folder-id="'+e.data.id+'" title="'+e.data.name+'">'),n=new this.ThumbnailView({el:t,item:e});return this.$el.is(".library, .user_library")&&t.find(".folder").prepend('<icon><svg><use xlink:href="#folder"></use></svg></icon>'),this.$el.find("ul.thumbnail-wrapper.folders").append(t),n},goToFolderEvent:function(e){this._goToFolder($(e.currentTarget).closest("li").data("folder-id"))},goBackEvent:function(e){this.navigationHistory.pop(),this._goToFolder(this.navigationHistory[this.navigationHistory.length-1])},_goToFolder:function(e){var t=this.$el.find(".thumbnail-wrapper.folders"),n=this.$el.find(".folder.parent").closest("li");this.$el.find(".thumbnail-wrapper").empty(),INKIVE.Modal.loader(this.$el.find(".thumbnail-wrapper.folders")),"root"===e?this.loadData(this.subResource):(e!==this.navigationHistory[this.navigationHistory.length-1]&&this.navigationHistory.push(e),this.loadResourceData(e+"/resources").then(_.bind((function(r){this.getLibraryInstance(this.currentDomain).currentFolderId=e;var o=r,s=_.where(o,{type:"Folder"}),a=_.filter(o,(function(e){return"Folder"!==e.type}));INKIVE.Modal.loaderClose(),this.render(s),this.subview.render(a),this.canvas.showOverlayElements(),t.prepend(n),n.removeClass("hidden"),this.initScroll(),i.trigger("library.folder",{type:this.subResource,folderId:e,folders:s,resources:a})}),this)))},render:function(e){var t=this,n=this.$el.find(".thumbnail-wrapper.folders"),i=n.length>0;i?(n.empty(),e.filter((function(e){return"object"===(0,r.default)(e)&&e.id&&e.data})).forEach((function(e){return t.addThumbnail(e)}))):(o.prototype.render.apply(this,arguments),this.initSubview(e.length))},initSubview:function(e){this.subview=new this.Views[this.subResource]({assetsDomains:this.assetsDomains,domain:this.currentDomain,el:this.$el,isSubview:!0,hasParentContent:this.hasParentContent,librarySource:this.librarySource,refreshLibrary:this.refreshLibrary,parentDomain:this.parentDomain,workspace:this.workspace}),this.subview.loadData()},refresh:function(){this.initScroll(),this.subview&&this.subview.isMasonryLoaded&&(this.subview.masonryReload&&this.subview.masonryReload(),this.subview.masonryRefresh&&this.subview.masonryRefresh())}})},{"../../../../facade/editor/editor":91,"../../components/thumbnail/library/folder":356,"./base":471,"./colors":473,"./icons":475,"./images":476,"./logos":477,"./texts":479,"./videos":480,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/web.dom-collections.for-each.js":964}],475:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var i=r(e("./base"));t.exports=i.default.extend({type:"icons",ThumbnailView:e("../../components/thumbnail/library/icon"),initialize:function(){i.default.prototype.initialize.apply(this,arguments),this.tool=INKIVE.Tool.getInstance(),this.initScroll(),this.initMasonry()},render:function(e){this.emptyView(),this.items=e.filter((function(e){return"object"===(0,o.default)(e)&&e.id&&e.data})),this.tool.initScrollDetect(this.$el.find(".thumbnail-wrapper").parent(),this.loadItems.bind(this)),INKIVE.Helpers.initTooltips(this.$el),this.canvas.toggleRestrictedOverlayIcons("icon"),this.canvas.showOverlayElements()}})},{"../../components/thumbnail/library/icon":357,"./base":471,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],476:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var i=r(e("./base"));t.exports=i.default.extend({type:"images",ThumbnailView:e("../../components/thumbnail/library/image"),initialize:function(){i.default.prototype.initialize.apply(this,arguments),this.tool=INKIVE.Tool.getInstance(),this.initScroll(),this.initMasonry()},render:function(e){this.emptyView(),this.items=e.filter((function(e){return"object"===(0,o.default)(e)&&e.id&&e.data})),this.tool.initScrollDetect(this.$el.find(".thumbnail-wrapper").parent(),this.loadItems.bind(this)),INKIVE.Helpers.initTooltips(this.$el),this.canvas.toggleRestrictedOverlayIcons("image"),this.canvas.showOverlayElements()}})},{"../../components/thumbnail/library/image":358,"./base":471,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],477:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var i=r(e("./base"));t.exports=i.default.extend({type:"logos",ThumbnailView:e("../../components/thumbnail/library/logo"),initialize:function(){i.default.prototype.initialize.apply(this,arguments),this.tool=INKIVE.Tool.getInstance(),this.initScroll(),this.initMasonry()},render:function(e){this.emptyView(),this.items=e.filter((function(e){return"object"===(0,o.default)(e)&&e.id&&e.data})),this.tool.initScrollDetect(this.$el.find(".thumbnail-wrapper").parent(),this.loadItems.bind(this)),INKIVE.Helpers.initTooltips(this.$el),this.canvas.toggleRestrictedOverlayIcons("logo")},addThumbnail:function(e){var t=$("<li>"),n=new this.ThumbnailView({el:t,item:e});return t.attr("library-item","true"),this.$el.find("ul.thumbnail-wrapper:not(.folders)").append(t).masonry("appended",t),n}})},{"../../components/thumbnail/library/logo":359,"./base":471,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],478:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="section-title">\n        <span>\n          '+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.library.folder",{name:"t",hash:{},data:o,loc:{start:{line:6,column:10},end:{line:6,column:37}}}))+'\n        </span>\n      </div>\n      <ul class="thumbnail-wrapper folders">\n        <li class="hidden">\n          <div class="folder parent">\n            <a href="javascript:void(0)" class="folder-name"><i class="fa fa-arrow-left"></i></a>\n          </div>\n        </li>\n      </ul>\n      <div class="section-title">\n        <span>\n          '+l("function"==typeof(i=null!=(i=c(n,"resourceTitle")||(null!=t?c(t,"resourceTitle"):t))?i:a)?i.call(s,{name:"resourceTitle",hash:{},data:o,loc:{start:{line:18,column:10},end:{line:18,column:29}}}):i)+"\n        </span>\n      </div>\n"},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isUserLibrary"):t,{name:"unless",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:6},end:{line:25,column:17}}}))?i:""},4:function(e,t,n,r,o){return'        <select class="company-picker"></select>\n'},6:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.library.empty.message_member",{name:"t",hash:{},data:o,loc:{start:{line:29,column:30},end:{line:29,column:71}}}))+"</p>"},8:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.library.empty.message_company",{name:"t",hash:{},data:o,loc:{start:{line:29,column:86},end:{line:29,column:128}}}))+"</p>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap '+c("function"==typeof(s=null!=(s=u(n,"folder")||(null!=t?u(t,"folder"):t))?s:l)?s.call(a,{name:"folder",hash:{},data:o,loc:{start:{line:1,column:28},end:{line:1,column:38}}}):s)+'">\n  <div class="antiscroll-inner">\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"folder"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:21,column:11}}}))?i:"")+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isWorkspace"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:4},end:{line:26,column:11}}}))?i:"")+'    <ul class="thumbnail-wrapper"></ul>\n    <div class="library-link hidden">\n      '+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isUserLibrary"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:29,column:6},end:{line:29,column:139}}}))?i:"")+'\n      <a href="'+c((u(n,"route")||t&&u(t,"route")||l).call(a,"create/brand-assets/",{name:"route",hash:{},data:o,loc:{start:{line:30,column:15},end:{line:30,column:47}}}))+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:30,column:47},end:{line:30,column:57}}}):s)+'" target="_blank" class="btn btn-primary empty hidden">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.library.empty.button",{name:"t",hash:{},data:o,loc:{start:{line:30,column:112},end:{line:30,column:145}}}))+"</a>\n    </div>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],479:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.find.js");var o=e("./base"),i=e("../../../../factory/fonts");t.exports=o.extend({type:"texts",ThumbnailView:e("../../components/thumbnail/library/text"),render:function(e){var t=this;this.emptyView(),e.filter((function(e){return"object"===(0,r.default)(e)&&e.id&&e.data})).forEach((function(e){return t.addThumbnail(e)})),this.initScroll(),INKIVE.Helpers.initTooltips(this.$el)},addThumbnail:function(e){var t=$("<li>");e.data.size&&(e.data.size=Math.round(parseFloat(e.data.size)));var n=new this.ThumbnailView({el:t,item:e});return t.attr("library-item","true"),t.find(".name").find("br").remove(),this.$el.find("ul.thumbnail-wrapper:not(.folders)").append(t),i.importDesignCSSFonts(i.get(e.data.family)),n}})},{"../../../../factory/fonts":125,"../../components/thumbnail/library/text":360,"./base":471,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.parse-float.js":904,"core-js/modules/web.dom-collections.for-each.js":964}],480:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js");var i=r(e("./base")),s=r(e("../../../../modal/prompt"));t.exports=i.default.extend({type:"videos",ThumbnailView:e("../../components/thumbnail/library/video"),initialize:function(e){i.default.prototype.initialize.call(this,e),this.tool=INKIVE.Tool.getInstance(),this.uppyOptions={restrictions:{allowedFileTypes:[".mp4",".mov"]},buttonTitle:"tool.video.tooltip.add",onFileUploaded:this.addVideoToLibrary.bind(this),onUppyInitialized:this.appendYoutubeButton},this.initScroll(),this.initMasonry()},render:function(e){this.emptyView(),this.items=e.filter((function(e){return"object"===(0,o.default)(e)&&e.id&&e.data})),this.tool.initScrollDetect(this.$el.find(".thumbnail-wrapper").parent(),this.loadItems.bind(this)),INKIVE.Helpers.initTooltips(this.$el),this.canvas.showOverlayElements(),this.canvas.toggleRestrictedOverlayIcons("video")},addVideoToLibrary:function(e,t){var n=this,r=Object.values(this.libraryInstances)[0];r&&r.post("videos",{type:"Video",data:{file:e.tempLink,name:e.name,source:e.source}}).then((function(){INKIVE.Tabs.video.refreshSelectedLibrary(n.librarySource),t&&t()}))},appendYoutubeButton:function(){var e=this,t=this.uppyFactory.getDashboard().el;if(!t.querySelector(".uppy-youtube-button")){var n=document.createElement("div"),r=document.createElement("button");r.innerHTML='<svg><use xlink:href="#youtube"></use></svg><div class="uppy-DashboardTab-name">'+INKIVE.TranslateHelper.translate("tool.videos.youtube")+"</div>",r.onclick=function(){e.uppyFactory.closeUppyModal(),e.displayAddYoutubeVideoModal()},r.setAttribute("class","uppy-u-reset uppy-c-btn uppy-DashboardTab-btn"),n.classList.add("uppy-DashboardTab"),n.classList.add("uppy-youtube-button"),n.append(r),t.querySelector("span[role=presentation]").append(n)}},displayAddYoutubeVideoModal:function(){var e=this;this.prompt=new s.default({label:INKIVE.TranslateHelper.translate("modal.prompt.add_video")});var t=function(){return e.modal.close()};this.modal=INKIVE.Modal.modalWindow(this.prompt.getFormHtml(),{width:400,headerIcon:"fa fa-film",headerTitle:"tool.customize.add_video",buttons:[{title:"modal.buttons.add_video",onClick:function(){var n,r;e.addVideoToLibrary({source:(n=e.prompt.getValue(),r=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|&v(?:i)?=))([^#&?]*).*/.exec(n),r&&r[1])},t)}}]})}})},{"../../../../modal/prompt":174,"../../components/thumbnail/library/video":361,"./base":471,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.values.js":903,"core-js/modules/es.regexp.exec.js":910}],481:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="big-icon"><img src="../assets/img/restrictions/restriction_library.svg"/></div>\n\x3c!--<a class="video" target="_blank" href="/"><i class="desygner-icon-restriction_video"></i></a>--\x3e\n\n<a class="btn btn-primary go-premium">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"general.upgrade_account",{name:"t",hash:{},data:o,loc:{start:{line:4,column:38},end:{line:4,column:69}}}))+'</a>\n\x3c!--<a class="learnmore" target="_blank" href="/">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"general.learn_more",{name:"t",hash:{},data:o,loc:{start:{line:5,column:50},end:{line:5,column:76}}}))+"</a>--\x3e\n"},useData:!0})},{"hbsfy/runtime":1024}],482:[function(e,t,n){"use strict";var r=e("../components/helper/view"),o=e("./helper.hbs");t.exports=r.extend({events:_.extend({},r.prototype.events,{"click a.locked":"goToLibraryEvent","click .go-premium":"displaySubscriptionModal"}),displaySubscriptionModal:function(){INKIVE.Helpers.displaySubscriptionModal()},goToLibraryEvent:function(){$('#tool-panel .tool-menu a[href="#tabTutorial"]').trigger("click")},initialize:function(){r.prototype.initialize.call(this),this.data.title="tool.library.locked.message",this.data.content=o(),this.render()}})},{"../components/helper/view":329,"./helper.hbs":481}],483:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | logos",show:{eventAction:"show"}}},{}],484:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("../../../analytics/decorate");t.exports=l(e("./analytics/view"),a.extend({type:"logo",memberType:["logos"],isAlreadyThere:function(){return!!this.$el.find(".tab-content.logo").length},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:a.prototype.checkEmptyLibrary.call(this,this.$headerLinks.filter("[data-key=library]"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"./analytics/view":483,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],485:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js");var r=e("../components/accordion-list/categories-director"),o=e("../search/search");t.exports=r.extend({templates:{mls:e("./search-results/mls.hbs")},events:_.extend({"click .search-close":"closeSearchEvent"},r.prototype.events),initialize:function(){_.bindAll(this,"refreshAntiscroll","searchCallback","addThumbnail","mapResult"),r.prototype.initialize.call(this)},search:function(e){var t=this.$el.find(".image-list"),n=t.find(".tab-content");this.tool=INKIVE.Tool.getInstance(),this.$el.find(".search-title").removeClass("hidden"),t.find(".antiscroll-scrollbar").remove(),n.css("height","").empty().removeData(),this.$el.siblings(".search-container").addClass("disabled"),this.$searchOptions.toggle(!1),this.searchView=this.searchView||new o,this.searchView.initSearch(t,{query:e.val(),type:this.type,callback:this.refreshAntiscroll,url:this.getSearchUrl(e.val()),authErrorCallback:this.authErrorCallback,skipScrollDetect:"postal_code"===this.searchType},this.searchCallback)},searchCallback:function(e){return _.chain(e).map(this.mapResult).each(this.addThumbnail)},closeSearchEvent:function(e){var t=$(e.currentTarget).parents(".search-title"),n=this.$el.closest(".tab-content").find(".search-container input");t.addClass("hidden"),this.$el.find(".tab-content").empty(),n.val(""),n.toggleClass("searching")},refreshAntiscroll:function(){this.$el.siblings(".search-container").removeClass("disabled"),"postal_code"!==this.searchType&&(this.$el.find(".antiscroll-wrap").antiscroll({horizontal:!1}),this.$el.find(".antiscroll-scrollbar").css("left",304))},refresh:_.noop,addThumbnail:function(e){var t=this.templates[this.type]({item:e,longId:e.id&&e.id.length>10});this.$el.find(".tab-content").append(t)}})},{"../components/accordion-list/categories-director":313,"../search/search":539,"./search-results/mls.hbs":491,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870}],486:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var o=r(e("../../../../../../src/config/constants"));t.exports={placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",mapResult:function(e){this.canvas=INKIVE.Tool.getInstance().editor.canvas;var t=(e=e._source).photos||[],n=e.structure||{},r=e.location||{},o=e.list_agent_office||{},i=e.co_list_agent_office||{},s=e.virtual_tours||{},a=e.open_houses||{},l=n.parking_features&&n.parking_features.join(", ")||"";n.parking_total&&(l+=l?" / ":"",l+=n.parking_total);var c=e.list_address||{},u=e.property_address||{};return{id:e.list_key,list_key:e.list_key,list_uuid:e.list_uuid,address:c.full_street_address||u.full_street_address,city:c.city||u.city,state:c.state_prov||u.state_prov_short,postal_code:c.postal_code||u.postal_code,photos:t,thumbnail:t[0]?t[0].ph_url:this.placeHolderUrl,text:{list_key:e.list_key,listing_category:e.list_category,listing_status:e.list_status,property_type:e.prop_type,property_sub_type:e.prop_subtype,special_condition:e.special_list_condition,listing_address:this.getAttribute(e,"listing_address"),property_address:this.getAttribute(e,"list_address"),listing_type:e.list_type,mls_name:e.mls_name,current_price:this.getAttribute(e,"current_list_price"),original_price:this.getAttribute(e,"original_list_price"),sold_price:this.getAttribute(e,"close_price"),listing_date:this.getAttribute(e,"list_dt"),contract_day:this.getAttribute(e,"contract_expiry_dt"),settled_date:this.getAttribute(e,"close_dt"),year_built:e.year_built,living_area:this.getAttribute(e,"living_area"),lot_size:this.getAttribute(e,"lot_size_area"),bedrooms:e.total_bed,bathrooms:e.total_bath,half_bathrooms:e.half_bath,full_bathrooms:e.full_bath,stories:n.stories,parking:l,basement_description:e.basement_desc,cooling_heating_system:n.heating_cooling&&n.heating_cooling.join(", "),hoa_fees:e.hoa&&e.hoa.assoc_fee,schools:r.schools&&_.compact(_.map(r.schools,"school_category")).join(", "),schools_names:r.schools&&_.compact(_.map(r.schools,"school_name")).join(", "),schools_districts:r.schools&&_.compact(_.map(r.schools,"school_district")).join(", "),market_center:e.brokerage&&e.brokerage.name,listing_agent:e.list_kw_uid,listing_agent_name:o.list_agent_full_name,colist_agent:i.co_list_agent_full_name,interior_feature_list:this.getBooleanListAttribute(n.interior_features),exterior_feature_list:this.getBooleanListAttribute(n.exterior_features),views_description:n.views&&n.views.join(", "),property_description:e.list_desc,virtual_tour_url:s.vt_url,virtual_tour_description:s.vt_short_desc,open_houses_description:a.oh_desc,open_houses_status:a.oh_status,open_houses_start_date:this.getAttribute(a,"oh_start_dt"),open_houses_end_date:this.getAttribute(a,"oh_end_time_dt")}}},getBooleanListAttribute:function(e){return _.compact(_.map(e,(function(e,t){return e&&t.replace("_"," ")}))).join(", ")},getAttribute:function(e,t){var n,r=t.split("_");if(e[t]){if(_.contains(r,"price")){var o=e.currency_code;n=Number(e[t]).toLocaleString(),o&&(n+=" "+o,_.contains(["USD","AUD"],o)&&(n="$"+n))}if(_.contains(r,"area")){var i=e[t+"_units"]||e[t.replace("area","units")];n=e[t],i&&(n+=" "+i)}if(_.contains(r,"dt")&&(n=e[t].length>10?e[t].substr(0,10):e[t]),_.contains(r,"address"))n=(e[t].full_street_address||"")+". "+(e[t].city||e[t].city_short||e[t].city_long||"")+" - "+(e[t].postal_code||e[t].postal_code_short||"");return n}},showPropertyImages:function(e,t){var n=$.Deferred(),r=t.itemDetails.photos;e.append('<div class="thumbnail-wrapper"/>'),r.length||e.html('<label class="title text-center">'+INKIVE.TranslateHelper.translate("general.no_results")+"</label>");var i=_.map(r,(function(e){return INKIVE.ImagesFactory.addImageData(e.ph_url),{id:"photo-mls-details-"+e.ph_order,width:120,data:{version:{thumb:e.ph_url,original:e.ph_url},tags:_.map(e.ph_tags,"tag_name"),name:e.ph_label&&e.ph_label.name.toLowerCase()}}}));return t.tool.addThumbItem(e,i,(function(n,r){INKIVE.Modal.loaderClose(e),_.bind(t.tool.callbackImages,t.tool)(n,r),$(n).each((function(){var e=$(this);e.attr("data-search-filter",e.find("a").attr("data-original-title"))})),r.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),t.refreshAntiscroll()})),n.promise()},showPropertyTexts:function(e,t){var n=$(this.getSelectedElement()).is(".textarea"),r="onlyReplace"===t.canUseText;INKIVE.Modal.loaderClose(e),_.each(t.itemDetails.text,_.bind((function(t,o){if(t){o=o.replace(/_/g," "),t=(t+"").replace(/"/g,"&quot;");var i=$('<div class="thumbnail-wrapper no-resizable" data-search-filter="'+t.toLowerCase()+o+'"/>'),s=new INKIVE.ThumbText({text:t,width:230,fontFamily:"Lato"}),a=_.bind(_.partial(this.onReplaceText,s),this);s.appendTo(i);var l=$('<div class="description">'+o+'</div><div class="icons">'+(r?"":'<i class="desygner-icon-plus add-text stand-alone"/>')+'<i class="fa fa-refresh replace-text '+(n?"":"hidden")+'"/></div>');i.append(l),i.appendTo(e),i.find("i.desygner-icon-plus").on("click",_.bind(s.onItemClick,s)),i.find("i.replace-text").on("click",a),r&&i.find(".thumbnail").off("mousedown").on("click",a)}}),this),t),t.refreshAntiscroll()},onReplaceText:function(e){var t=this.getSelectedElement();if(!$(t).is(":not(.textarea)")){var n=(new INKIVE.Text.Textarea).setDOM(t);n.text.setValues({textContent:e.text}),n.render(this.canvas)}},getSelectedElement:function(){var e=this.canvas.getSelectedElems();return e.length&&e[0]}}},{"../../../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],487:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'<div class="mls-details"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:1,column:12},end:{line:1,column:20}}}):s)+'-content">\n  <div class="search-title hidden">\n    <span>\n      '+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.search.results",{name:"t",hash:{},data:o,loc:{start:{line:4,column:6},end:{line:4,column:33}}}))+'\n    </span>\n    <div class="search-close pull-right">\n      <icon>\n        <svg>\n          <use xlink:href="#cross"></use>\n        </svg>\n      </icon>\n    </div>\n  </div>\n\n  <div class="image-list">\n    <div class="antiscroll-wrap">\n      <div class="antiscroll-inner">\n        <div class="tab-content"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"isMls"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:0},end:{line:25,column:7}}}))?i:"")},useData:!0})},{"hbsfy/runtime":1024}],488:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.slice.js");var o=r(e("../../../../../../src/config/constants")),i=r(e("./base")),s=r(e("./search-options.hbs")),a=r(e("./search-results/mls-details.hbs")),l=r(e("./mls-search-results")),c=r(e("../../../facade/restrictions/restrictions")),u=r(e("../../../facade/design/design"));t.exports=i.default.extend({type:"mls",placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",addedThumbnails:[],thumbSize:{width:90,height:90},events:_.extend({"click .item button":"openPropertyDetails","click .items-container .header span":"clickItemsContainerHeader","keyup input[name=mls-details-search]":"searchMLSDetails","click input[name=mls-details-search]":"searchMLSDetails","click .texts-header":"showSearchBox","click .images-header":"showSearchBox","click .back-link":"closeDetails"},i.default.prototype.events),initialize:function(){if(_.bindAll(this,"clickItemsContainerHeader","showPropertyItems","loginSuccessfullCallback"),this.server="https://api.photodexia.com/giles/mls/search",i.default.prototype.initialize.call(this),INKIVE.C.BOOK.external_reference){this.preselected=!0,this.selectOption(this.getSearchOptions().find('[data-key="key"]'));var e=this.$el.siblings(".search-container").find("input");e.val(INKIVE.C.BOOK.external_reference),this.search(e)}},search:function(e){this.addedThumbnails=[],i.default.prototype.search.call(this,e)},closeDetails:function(e){$(e.target).closest(".inner-tabs").find(".search-options").css("display","none")},searchClickEvent:function(e){this.$searchOptions&&this.$searchOptions.toggle()},selectSearchOptionEvent:function(e){var t=$(e.currentTarget),n=this.getSearchOptions().find("> div");t.is(n)&&this.selectOption(t,n),n.closest(".search-container").children("input").focus(),n.closest(".search-options").css("display","none")},selectOption:function(e,t){t=t||this.getSearchOptions().find("> div");var n=this.getSearchOptions().siblings("input"),r=t.find(".desygner-icon-check");r.length||(r=$('<i class="desygner-icon-check"></i>')),t.removeClass("selected"),r.prependTo(e),e.addClass("selected"),n.attr("placeholder",e.text().trim())},getSearchOptions:function(){return this.$searchOptions||(this.$searchOptions=$((0,s.default)({type:"mls",isMls:!0}))),this.$searchOptions},getSearchUrl:function(e){var t=this.server;return t+="?search_type="+(this.getSearchOptions().find(".selected").data("key")||"mls_number"),t+="&search_key="+encodeURI(e),t+="&limit=10&offset="},mapResult:function(e){return l.default.mapResult(e)},addThumbnail:function(e){if(!_.includes(this.addedThumbnails,e.id)){var t=_.bind((function(t){e.thumbnail=t===INKIVE.C.Status.success?e.thumbnail:this.placeHolderUrl,i.default.prototype.addThumbnail.call(this,e),this.$el.find("[data-id="+e.list_key+"]").data("item",e),this.addedThumbnails.push(e.id),this.preselected&&(this.selectOption(this.getSearchOptions().find('[data-key="address"]')),this.$el.find("[data-id="+e.list_key+"]").find("button").click(),this.preselected=!1)}),this);INKIVE.ImagesFactory.smartLoad(e.thumbnail,this.thumbSize,t,!0)}},openPropertyDetails:function(e){var t=$(e.currentTarget);this.itemDetails=t.closest(".item").data().item;var n=t.closest(".mls-content").siblings(".mls-details");this.checkCanReplace(),n.html((0,a.default)({item:this.itemDetails,canUseImages:this.canUseImages,canUseText:this.canUseText})),n.find(".antiscroll-wrap").antiscroll(),n.css("left",0),n.find(".back-link").on("click",(function(){INKIVE.SettingsFactory.set({external_reference:null}).then(_.bind((function(){INKIVE.C.BOOK.external_reference=null}),this)),n.css("left",315)})),this.clickItemsContainerHeader(),INKIVE.SettingsFactory.set({external_reference:this.itemDetails.list_key}).then(_.bind((function(){INKIVE.C.BOOK.external_reference=this.itemDetails.list_key}),this))},checkCanReplace:function(){function e(e){var t=INKIVE.Tool.getInstance().editor.canvas.getSelectedElems();if(1===t.length&&u.default.get(t[0].id).type===e){var n="text"===e?"text_change_content":"image_content";return!!c.default.isActionAllowed(n,t[0].id)&&"onlyReplace"}}this.canUseImages=c.default.isFunctionalityAllowed("image_add")||c.default.isFunctionalityAllowed("image_content")||e("image"),this.canUseText=c.default.isFunctionalityAllowed("text_add")||e("text")},clickItemsContainerHeader:function(e){var t=this.$el.find(".mls-details").find(this.canUseImages?".images-header":".texts-header"),n=e?$(e.currentTarget):t;n.is(".active")||(n.siblings().removeClass("active"),n.addClass("active"),this.showPropertyItems(n.data("key")))},showPropertyItems:function(e){this.selectedTab=e;var t=this.$el.find(".mls-details").find(".items-content"),n=t.find("."+e);if(t.find(">div").hide(),n.length)return n.show(),void("images"===e&&n.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig));n=$('<div class="'+e+'"/>').appendTo(t),INKIVE.Modal.loader(n),this.$el.find("[data-search-filter]").show(),l.default["showProperty"+e.charAt(0).toUpperCase()+e.slice(1)](n,this)},searchMLSDetails:function(e){var t=$(e.currentTarget).val();"Enter"===e.key&&e.preventDefault(),this.$el.find("[data-search-filter]").toggle(!t),t&&this.$el.find("[data-search-filter*="+t+"]").show(),this.$el.find(".images").find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),this.refreshAntiscroll()},showSearchBox:function(e){var t=$(e.currentTarget),n=t.closest(".antiscroll-inner").find(".search-container");t.is("span.texts-header")&&(t.closest(".mls-details").find(".search-options-container").remove(),t.closest(".search-options-container").find(".search-options").css("display","none")),n.toggleClass("search-container-show")},closeSearchEvent:function(e){i.default.prototype.closeSearchEvent.call(this,e),this.addedThumbnails=[],INKIVE.C.BOOK.external_reference=null,this.preselected=!1},loginSuccessfullCallback:function(e,t){e.close(),INKIVE.Modal.togglePageLoader(!1),INKIVE.C.USER.kw_sso_token=t.access_token,this.search(this.$el.siblings(".search-container").find("[name=search]"))}})},{"../../../../../../src/config/constants":1090,"../../../facade/design/design":47,"../../../facade/restrictions/restrictions":118,"./base":485,"./mls-search-results":486,"./search-options.hbs":489,"./search-results/mls-details.hbs":490,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.search.js":925,"core-js/modules/es.string.trim.js":929}],489:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="search-options" data-type="'+l("function"==typeof(i=null!=(i=c(n,"type")||(null!=t?c(t,"type"):t))?i:a)?i.call(s,{name:"type",hash:{},data:o,loc:{start:{line:1,column:39},end:{line:1,column:49}}}):i)+'">\n  <div data-key="address">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.search.kw_search_options.list_address",{name:"t",hash:{},data:o,loc:{start:{line:3,column:10},end:{line:3,column:60}}}))+'</span>\n  </div>\n\n  <div data-key="mls_number">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.search.kw_search_options.mls_number",{name:"t",hash:{},data:o,loc:{start:{line:7,column:10},end:{line:7,column:58}}}))+'</span>\n  </div>\n\n  <div data-key="agent_name">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.search.kw_search_options.list_kw_uid",{name:"t",hash:{},data:o,loc:{start:{line:11,column:10},end:{line:11,column:59}}}))+'</span>\n  </div>\n\n  <div data-key="city">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.search.search_options.city",{name:"t",hash:{},data:o,loc:{start:{line:15,column:10},end:{line:15,column:49}}}))+'</span>\n  </div>\n\n  <div data-key="state">\n    <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.search.search_options.state",{name:"t",hash:{},data:o,loc:{start:{line:19,column:10},end:{line:19,column:50}}}))+"</span>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],490:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="images-header" data-key="images">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.images",{name:"t",hash:{},data:o,loc:{start:{line:41,column:12},end:{line:41,column:56}}}))+"\n          </span>\n"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="texts-header" data-key="texts">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.text",{name:"t",hash:{},data:o,loc:{start:{line:46,column:12},end:{line:46,column:54}}}))+"\n          </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap  no-resizable">\n  <div class="antiscroll-inner">\n    <div class="back-link">\n      <icon>\n        <svg>\n          <use xlink:href="#editor-chevron-left"></use>\n        </svg>\n      </icon>\n      <span>'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"common.back",{name:"t",hash:{},data:o,loc:{start:{line:9,column:12},end:{line:9,column:31}}}))+'</span>\n    </div>\n\n    <div class="property-details">\n      <div class="address">\n        '+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"address"):i,t))+'\n      </div>\n\n      <div class="city">\n        '+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"city"):i,t))+", "+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"postal_code"):i,t))+" "+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"state"):i,t))+'\n      </div>\n\n      <div class="identificator">\n        <span>'+l(c(null!=(i=null!=t?u(t,"item"):t)?u(i,"id"):i,t))+'</span>\n      </div>\n    </div>\n\n    <div class="search-container">\n      <input type="text" name="mls-details-search" placeholder="'+l((u(n,"t")||t&&u(t,"t")||a).call(s,"tool.search.kw_details_search_tooltip",{name:"t",hash:{},data:o,loc:{start:{line:27,column:64},end:{line:27,column:109}}}))+'"/>\n      <div class="search-button">\n        <icon>\n          <svg>\n            <use xlink:href="#search"></use>\n          </svg>\n        </icon>\n      </div>\n    </div>\n\n    <div class="items-container">\n      <div class="header">\n'+(null!=(i=u(n,"if").call(s,null!=t?u(t,"canUseImages"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:8},end:{line:43,column:15}}}))?i:"")+(null!=(i=u(n,"if").call(s,null!=t?u(t,"canUseText"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:44,column:8},end:{line:48,column:15}}}))?i:"")+'      </div>\n\n      <div class="items-content"></div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],491:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return"long-id"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item kwls" data-id="'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"list_key"):i,t))+'">\n  <div class="thumbnail">\n    <img src="'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"thumbnail"):i,t))+'"/>\n  </div>\n  <div class="address">\n    '+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"address"):i,t))+"\n    <br/>\n    "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"city"):i,t))+", "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"postal_code"):i,t))+" "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"state"):i,t))+'\n  </div>\n  <div class="identificator">\n    <span class="'+(null!=(i=c(n,"if").call(l,null!=t?c(t,"longId"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:17},end:{line:11,column:45}}}))?i:"")+'">'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"id"):i,t))+'</span>\n  </div>\n  <div class="button">\n      <button>'+a((c(n,"t")||t&&c(t,"t")||e.hooks.helperMissing).call(l,"Select",{name:"t",hash:{},data:o,loc:{start:{line:14,column:14},end:{line:14,column:28}}}))+"</button>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],492:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("./mls"),c=e("./mls-template.hbs");t.exports=a.extend({type:"mls",isAlreadyThere:function(){return!!this.$el.find(".tab-content.mls").length},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:this.$headerLinks.filter("[data-key=mls]").trigger("click"),this.$el.find(".search-container").find("input").attr("placeholder","Search Listings");case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),refresh:function(){a.prototype.refresh.call(this),this.$el.find(".search-container").removeClass("disabled");var e=this.$el.find(".header").find(".active[data-key=images]");e.length&&e.removeClass("active").trigger("click")},initMlsView:function(){this.registerTabView("mls",new l({el:this.initTabView("mls")}))},initTabView:function(e){var t=this.$el.find(".tab-content > ."+e);return t.html(c({type:e,isMls:"mls"===e})),t}})},{"../components/common/common-component":321,"./mls":488,"./mls-template.hbs":487,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],493:[function(e,t,n){t.exports={text:[{type:"content",name:"Content",data:["company_name","company_email","company_instagram","company_twitter","company_facebook","company_linkedin","company_phone_number","company_website","company_youtube","slogan_short","slogan_medium","slogan_long","address_line_1","address_line_2","full_name"]},{type:"style",name:"Font",data:["font_primary","font_secondary","font_tertiary","font_quaternary"]},{type:"style",name:"Colour",data:["colour_black","colour_white","colour_primary","colour_secondary","colour_tertiary","colour_quaternary"]}],logo:[{type:"content",name:"Logo",data:["logo_primary_colour","logo_secondary_colour","logo_black_colour","logo_white_colour","logo_icon_primary_colour","logo_icon_secondary_colour","logo_icon_black_colour","logo_icon_white_colour"]}],icon:[{type:"style",name:"Colour",data:["colour_black","colour_white","colour_primary","colour_secondary","colour_tertiary","colour_quaternary"]},{type:"content",name:"Icon",data:["logo_primary_colour","logo_secondary_colour","logo_black_colour","logo_white_colour","logo_icon_primary_colour","logo_icon_secondary_colour","logo_icon_black_colour","logo_icon_white_colour"]}],shape:[{type:"style",name:"Colour",data:["colour_black","colour_white","colour_primary","colour_secondary","colour_tertiary","colour_quaternary"]}],image:[{type:"content",name:"Image",data:["image_general_1","image_general_2","image_general_3","image_general_4","image_general_5","image_general_6"]}],background:[{type:"style",name:"Colour",data:["colour_black","colour_white","colour_primary","colour_secondary","colour_tertiary","colour_quaternary"]},{type:"content",name:"Image",data:["image_background_1","image_background_2","image_background_3","image_background_4"]}],sticker:[{type:"style",name:"Colour",data:["colour_primary","colour_secondary","colour_tertiary","colour_quaternary"]},{type:"content",name:"Icon",data:["logo_primary_colour","logo_secondary_colour","logo_black_colour","logo_white_colour","logo_icon_primary_colour","logo_icon_secondary_colour","logo_icon_black_colour","logo_icon_white_colour"]}],video:[]}},{}],494:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(i=a(n,"if").call(s,null!=t?a(t,"supports_custom"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:6},end:{line:19,column:13}}}))?i:"")+"\n"+(null!=(i=a(n,"if").call(s,null!=t?a(t,"has_options"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:6},end:{line:33,column:13}}}))?i:"")+"\n"},2:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <label>Custom field:</label>\n        <div class="select-wrapper editable">\n          <select>\n            <option value="">&lt;'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.placeholders.element.none",{name:"t",hash:{},data:o,loc:{start:{line:12,column:33},end:{line:12,column:71}}}))+"&gt;</option>\n"+(null!=(i=a(n,"each").call(s,null!=t?a(t,"custom_fields"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:12},end:{line:15,column:21}}}))?i:"")+'          </select>\n          <button class="add-custom"><i class="fa fa-plus"></i></button>\n        </div>\n'},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <option value="'+l("function"==typeof(i=null!=(i=c(n,"value")||(null!=t?c(t,"value"):t))?i:a)?i.call(s,{name:"value",hash:{},data:o,loc:{start:{line:14,column:27},end:{line:14,column:38}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:14,column:40},end:{line:14,column:50}}}):i)+"</option>\n"},5:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"options"):t,{name:"each",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:8},end:{line:32,column:17}}}))?i:""},6:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <label>"+c("function"==typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:l)?s.call(a,{name:"name",hash:{},data:o,loc:{start:{line:23,column:17},end:{line:23,column:27}}}):s)+':</label>\n          <div class="select-wrapper">\n            <select>\n              <option value="">&lt;'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.placeholders.element.none",{name:"t",hash:{},data:o,loc:{start:{line:26,column:35},end:{line:26,column:73}}}))+"&gt;</option>\n"+(null!=(i=u(n,"each").call(a,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:14},end:{line:29,column:23}}}))?i:"")+"            </select>\n          </div>\n"},7:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <option value="'+l("function"==typeof(i=null!=(i=c(n,"value")||(null!=t?c(t,"value"):t))?i:a)?i.call(s,{name:"value",hash:{},data:o,loc:{start:{line:28,column:29},end:{line:28,column:40}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:28,column:42},end:{line:28,column:52}}}):i)+"</option>\n"},9:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n      <ul class="placeholders-list">\n'+(null!=(i=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"placeholders"):t,{name:"each",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:38,column:8},end:{line:49,column:17}}}))?i:"")+"      </ul>\n"},10:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <li data-element="'+l("function"==typeof(i=null!=(i=c(n,"element")||(null!=t?c(t,"element"):t))?i:a)?i.call(s,{name:"element",hash:{},data:o,loc:{start:{line:39,column:28},end:{line:39,column:41}}}):i)+'">\n            <div class="name-container">\n              <span class="name">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:41,column:33},end:{line:41,column:43}}}):i)+'</span>\n            </div>\n\n            <div class="actions">\n              <button class="show-placeholder">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"editor.view",{name:"t",hash:{},data:o,loc:{start:{line:45,column:47},end:{line:45,column:66}}}))+'</button>\n              <i class="fa fa-trash remove"></i>\n            </div>\n          </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tab-content placeholders">\n  <div class="wrapper">\n    <h2>Smart Assets</h2>\n    <h3>User Inputs</h3>\n\n'+(null!=(i=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"has_selected_element"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:6,column:4},end:{line:51,column:11}}}))?i:"")+"  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],495:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.array.reduce.js");var a=r(e("../../../../../../src/config/constants")),l=e("./template.hbs"),c=e("./placeholders.json"),u=e("../../../facade/editor/editor"),d=e("../../../facade/design/design"),p=e("../../../factory/placeholders"),h=e("../../../utils/sort").sortByProperty;t.exports=Backbone.View.extend({events:{"change select":"selectPlaceholderEvent","click button.add-custom":"addCustomField","click .remove":"removePlaceholderEvent","click button.show-placeholder":"showPlaceholderEvent"},removePlaceholderEvent:function(e){INKIVE.Modal.alertMessage(INKIVE.TranslateHelper.translate("tool.placeholders.list.remove_placeholder_alert"),{width:450,callback:[_.bind((function(){var t=$(e.currentTarget).closest("li").data("element");$("#"+t).removeAttr("custom-placeholder"),this.render(),this.setPlaceholderFlags()}),this),$.noop]})},showPlaceholderEvent:function(e){var t=$(e.currentTarget).closest("li").data("element");INKIVE.Tool.getInstance().editor.canvas.setMode("select"),INKIVE.DesignFacade.preSelect(t,!0)},selectPlaceholderEvent:function(){var e=_.chain(this.$el.find("select")).map((function(e){return $(e).val()})).compact().value().join(",");this.$selectedElement.attr("custom-placeholder",e),this.$selectedElement.removeAttr("is-defined-placeholder"),this.setPlaceholderFlags()},initialize:function(){var e=this;this.customFields=[],this.customPlaceholders={},this.smartAssets={};var t=function(t){var n=t.customPlaceholders,r=t.smartAssets,o=r&&!!Object.keys(r).length;(n||o)&&($("[href=#tabPlaceholders]").parent().removeClass("hidden"),o&&e.setSmartAssets(r),n&&e.setCustomPlaceholders(n))};u.on("select",_.bind(this.setSelection,this)),u.on("editor.loaded",(function(){return p.init({callback:t})})),u.on("history.reload",(function(){return e.refresh()}))},refresh:function(){"placeholders"===INKIVE.Helpers.getActiveTab()&&this.show()},show:function(){this.customFields=p.getPlaceholdersInUse(),this.render()},setSelection:function(e){this.selectedElement=_(e).first(),this.$selectedElement=this.selectedElement&&("background"===this.selectedElement.id?$("#svgcontent").children("g.background"):$("#"+this.selectedElement.id)),this.$el.is(":visible")&&this.render()},addCustomField:function(){var t=new(e("../../../modal/prompt"))({}),n=INKIVE.Modal.modalWindow(t.getFormHtml(),{width:400,headerTitle:"New Custom Field",buttons:[{title:"Add field",onClick:_.bind((function(){var e=INKIVE.Helpers.slugify(t.getValue());-1===this.customFields.indexOf(e)&&this.customFields.push(e);var r=this.$selectedElement.attr("custom-placeholder")||"";-1===(r=_.filter(r.split(","),_.bind((function(e){return e&&-1===this.customFields.indexOf(e)}),this))).indexOf(e)&&r.push(e),this.$selectedElement.attr("custom-placeholder",r.join(",")),this.setPlaceholderFlags(),n.close(),this.render()}),this)}]})},render:function(){return this.selectedElement?this.renderPlaceholderOptions():this.renderPlaceholderList()},renderPlaceholderOptions:function(){var e=this,t=this.selectedElement.type,n=this.customFields.concat(this.customPlaceholders[t]),r=function(e){return e?String(e).split(","):[]}(this.$selectedElement.attr("custom-placeholder")),o=function(e){return _.map(c[e],(function(e){if(p.canEdit[e.type])return{name:e.name,data:m(e.data)}})).filter(Boolean)}(this.selectedElement.type),i=function(e,t){return Object.entries(t).filter((function(t){var n=(0,s.default)(t,1)[0];return a.default.sidebar.placeholders[e]&&a.default.sidebar.placeholders[e].includes(n.toLowerCase())})).map((function(e){var t=(0,s.default)(e,2),n=t[0],r=t[1];return{name:"Smart ".concat(g(n)),data:f(r)}}))}(t,this.smartAssets),u=p.canEdit.content&&!!o.length,d=p.canEdit.smartAssets&&!!i.length,h=p.canEdit.content&&["text","image"].includes(t);function m(e){return Array.isArray(e)?e.filter((function(e,t,n){return e&&function(e,t,n){return n.indexOf(e)===t}(e,t,n)})).map((function(e){var t=e;return{name:(e=(e=e.split("_")).map(g)).join(" "),value:t}})):[]}function f(e){return Array.isArray(e)?e.map((function(e){var t=e.name,n=e.value;return{name:g(t),value:n}})):[]}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}this.$el.html(l({type:t,custom_fields:m(n),supports_custom:h,options:o.concat(i),has_options:u||d,has_selected_element:!0})),r.length&&r.forEach((function(t){e.$el.find('option[value="'.concat(t,'"]')).closest("select").val(t)}))},renderPlaceholderList:function(){var e=(0,i.default)(document.querySelectorAll("#svgcontent [custom-placeholder]:not([is-defined-placeholder=true])")).filter((function(e){var t=e.getAttribute("custom-placeholder"),n=e.classList.contains("background"),r=d.get(n?"background":e.id);return t&&r&&r.type})).map((function(e){var t=e.classList.contains("background")?"background":e.id,n=d.get(t),r=t.split("_"),o=(0,s.default)(r,2)[1];return{element:t,name:"".concat(n.type).concat(o?" ".concat(o):"")}})).sort(h("name"));this.$el.html(l({placeholders:e}))},setPlaceholderFlags:function(){p.upToDate=!1,p.hasPlaceHolders=!!$("#svgcontent [custom-placeholder]").length,INKIVE.DesignFacade.trigger("placeholder.update")},setCustomPlaceholders:function(e){var t=this;function n(e,t){var n=(this.smartAssets[e]||[]).map((function(e){return e.value}));return(c[e]||[]).reduce((function(e,t){return e.concat(t.data)}),[]).concat(n).includes(t)}this.customPlaceholders=e?Object.keys(e).reduce((function(r,i){var s=i.toLowerCase(),a=e[i].filter((function(e){return!n.call(t,s,e)})).sort();return $.extend(r,(0,o.default)({},s,a.sort()))}),{}):{}},setSmartAssets:function(e){this.smartAssets=e}})},{"../../../../../../src/config/constants":1090,"../../../facade/design/design":47,"../../../facade/editor/editor":91,"../../../factory/placeholders":148,"../../../modal/prompt":174,"../../../utils/sort":622,"./placeholders.json":493,"./template.hbs":494,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964}],496:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="images-header" data-key="images">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.images",{name:"t",hash:{},data:o,loc:{start:{line:21,column:12},end:{line:21,column:56}}}))+"\n          </span>\n"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="texts-header" data-key="texts">\n            '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.search.kw_details_header.text",{name:"t",hash:{},data:o,loc:{start:{line:26,column:12},end:{line:26,column:54}}}))+"\n          </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap no-resizable">\n  <div class="antiscroll-inner">\n    <div class="property-details">\n      <div class="address">\n        '+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"address"):i,t))+'\n      </div>\n\n      <div class="city">\n        '+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"city"):i,t))+", "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"postal_code"):i,t))+" "+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"state"):i,t))+'\n      </div>\n\n      <div class="identificator">\n        <span>'+a(s(null!=(i=null!=t?c(t,"item"):t)?c(i,"id"):i,t))+'</span>\n      </div>\n    </div>\n\n    <div class="items-container">\n      <div class="header">\n'+(null!=(i=c(n,"if").call(l,null!=t?c(t,"canUseImages"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:8},end:{line:23,column:15}}}))?i:"")+(null!=(i=c(n,"if").call(l,null!=t?c(t,"canUseText"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:8},end:{line:28,column:15}}}))?i:"")+'      </div>\n\n      <div class="items-content"></div>\n    </div>\n  </div>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],497:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=r(e("../../../../../../src/config/constants"));t.exports={placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",mapResult:function(e){this.canvas=INKIVE.Tool.getInstance().editor.canvas;var t=e.publiclyVisibleRedfinListingPhotos||[],n=e["agent.agentHeroPhotoUrl"];return n&&t.unshift({id:"agentThumbnail",midSizeImageUrl:n,fullSizeImageUrl:n}),this.item={id:e.id,thumbnail:n||t.length?t[0].midSizeImageUrl:this.placeHolderUrl,list_key:e.id,list_uuid:e.list_uuid,address:e["property.address.streetString"],city:e["property.address.city"],state:e["property.address.stateOrProvinceCode"],postal_code:e["property.address.postalCode"],photos:t,text:{list_key:e.id,statement:e["agent.agentStatement"],average_rating:e["agent.averageRating"],license_number:e["agent.licenseNumber"],is_principal_agent:e["agent.isPrincipalAgent"],homes_sold:e["agent.numberOfHomesSold"],office_address:e["agent.officeAddress.streetLine"],office_city:e["agent.officeAddress.city"],office_postal_code:e["agent.officeAddress.postalCode"],office_state_or_province:e["agent.officeAddress.stateOrProvinceCode"],office_phone_number:e["agent.officePhone.phoneNumber"],agent_title:e["agent.publicAgentTitle"],agent_first_name:e["agent.redfinAccountProfile.firstName"],agent_display_name:e["agent.redfinAccountProfile.displayName"],agent_email:e["agent.redfinAccountProfile.email"],agent_total_sales_in_past_year:this.getPrice(e["agent.totalSalesInDollarsInThePastYear"]),listing_days_on_market:e.redfinListingDaysOnMarket,listing_price:this.getPrice(e["listing.listingPricing.listingPrice.value"]),property_address:e["property.address.streetString"],property_address_no_state_or_zipcode:e["property.address.fullDisplayStringNoStateOrZipCodePretty"],property_address_full_no_zipcode:e["property.address.fullDisplayStringNoZipCodePretty"],property_postal_code:e["property.address.postalCode"],property_city_and_state:e["property.address.cityString"],property_state_or_province:e["property.address.stateOrProvinceCode"],property_city:e["property.address.city"],number_of_bathrooms:e["property.numBathrooms"],number_of_bedrooms:e["property.numBedrooms"],number_of_total_sq_feet:e["property.totalSqFt"]}},this.item},getPrice:function(e){return"$"+Number(e).toLocaleString()},showPropertyImages:function(e,t){var n=$.Deferred(),r=this.item.photos;e.append('<div class="thumbnail-wrapper"/>'),r.length||e.html('<label class="title text-center">'+INKIVE.TranslateHelper.translate("general.no_results")+"</label>");var i=_.map(r,(function(e){return INKIVE.ImagesFactory.addImageData(e.fullSizeImageUrl),{id:"photo-redfin-details-"+e.id,width:120,data:{version:{thumb:e.midSizeImageUrl,original:e.fullSizeImageUrl}}}}));return t.tool.addThumbItem(e,i,(function(n,r){INKIVE.Modal.loaderClose(e),_.bind(t.tool.callbackImages,t.tool)(n,r),$(n).each((function(){var e=$(this);e.attr("data-search-filter",e.find("a").attr("data-original-title"))})),r.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),t.refreshAntiscroll()})),n.promise()},showPropertyTexts:function(e,t){var n=$(this.getSelectedElement()).is(".textarea"),r="onlyReplace"===t.canUseText;INKIVE.Modal.loaderClose(e),_.each(this.item.text,_.bind((function(t,o){if(t){o=o.replace(/_/g," "),t=(t+"").replace(/"/g,"&quot;");var i=$('<div class="thumbnail-wrapper no-resizable" data-search-filter="'+t.toLowerCase()+o+'"/>'),s=new INKIVE.ThumbText({text:t,width:230,fontFamily:"Lato"}),a=_.bind(_.partial(this.onReplaceText,s),this);s.appendTo(i);var l=$('<div class="description">'+o+'</div><div class="icons">'+(r?"":'<i class="desygner-icon-plus add-text stand-alone"/>')+'<i class="fa fa-refresh replace-text '+(n?"":"hidden")+'"/></div>');i.append(l),i.appendTo(e),i.find("i.desygner-icon-plus").on("click",_.bind(s.onItemClick,s)),i.find("i.replace-text").on("click",a),r&&i.find(".thumbnail").off("mousedown").on("click",a)}}),this),t),t.refreshAntiscroll()},onReplaceText:function(e){var t=this.getSelectedElement();if(!$(t).is(":not(.textarea)")){var n=(new INKIVE.Text.Textarea).setDOM(t);n.text.setValues({textContent:e.text}),n.render(this.canvas)}},getSelectedElement:function(){var e=this.canvas.getSelectedElems();return e.length&&e[0]}}},{"../../../../../../src/config/constants":1090,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924}],498:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"type")||(null!=t?s(t,"type"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"type",hash:{},data:o,loc:{start:{line:1,column:12},end:{line:1,column:20}}}):i)+'-content">\n  <div class="tab-content redfin-details">\n  </div>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],499:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.slice.js");var o=r(e("../../../../../../src/config/constants")),i=r(e("./redfin-details.hbs")),s=r(e("./redfin-search-results")),a=r(e("../../../facade/restrictions/restrictions")),l=r(e("../../../facade/design/design")),c=r(e("../../../factory/desygner-api")),u=r(e("../components/accordion-list/categories-director"));t.exports=u.default.extend({type:"redfin",placeHolderUrl:"https://static.inkive.com/assets/img/placeholders/imageplaceholder_new.svg",addedThumbnails:[],thumbSize:{width:90,height:90},events:{"click .item button":"openPropertyDetails","click .items-container .header span":"clickItemsContainerHeader"},initialize:function(e){_.bindAll(this,"clickItemsContainerHeader","showPropertyItems"),this.tool=INKIVE.Tool.getInstance(),this.companyId=e.companyId,this.searchTerm=e.searchTerm,this.searchTerm?this.search():this.noResults()},search:function(){var e=this,t="brand/companies/".concat(this.companyId,"/search?search_key=dealId&search_term=").concat(encodeURIComponent(this.searchTerm));this.addedThumbnails=[],c.default.get(t).then((function(t){t&&Object.entries(t).length?e.openPropertyDetails(s.default.mapResult(t[0])):e.noResults()}))},openPropertyDetails:function(e){this.checkCanReplace(),this.el.querySelector(".tab-content").innerHTML=(0,i.default)({item:e,canUseImages:this.canUseImages,canUseText:this.canUseText}),this.$el.find(".antiscroll-wrap").antiscroll(),this.clickItemsContainerHeader()},checkCanReplace:function(){function e(e){var t=!1;return l.default.get().forEach((function(n){if(!t&&n.type===e){var r="text"===e?"text_change_content":"image_content";t=!!a.default.isActionAllowed(r,n.id)&&"onlyReplace"}})),t}this.canUseImages=a.default.isFunctionalityAllowed("image_add")||a.default.isFunctionalityAllowed("image_content")||e("image"),this.canUseText=a.default.isFunctionalityAllowed("text_add")||e("text")},clickItemsContainerHeader:function(e){var t=this.el.querySelector(this.canUseImages?".images-header":".texts-header"),n=e?e.currentTarget:t;n&&!n.classList.contains("active")&&($(n).siblings().removeClass("active"),n.classList.add("active"),this.showPropertyItems(n.dataset.key))},showPropertyItems:function(e){this.selectedTab=e;var t=this.$el.find(".redfin-details").find(".items-content"),n=t.find("."+e);if(t.find(">div").hide(),n.length)return n.show(),"images"===e&&n.find(".thumbnail-wrapper").masonry(o.default.sidebar.thumbnail.masonryConfig),void this.refreshAntiscroll();n=$('<div class="'+e+'"/>').appendTo(t),INKIVE.Modal.loader(n);var r="showProperty"+e.charAt(0).toUpperCase()+e.slice(1);s.default[r](n,this)},refreshAntiscroll:function(){this.$el.find(".antiscroll-wrap").antiscroll({horizontal:!1,height:this.el.offsetHeight}),this.el.querySelector(".antiscroll-scrollbar").style.left=291},noResults:function(){document.querySelector("#tabRedfin>.tab-content").innerHTML='<label class="title text-center no-results">'.concat(INKIVE.TranslateHelper.translate("common.no_result"),"</label>")}})},{"../../../../../../src/config/constants":1090,"../../../facade/design/design":47,"../../../facade/restrictions/restrictions":118,"../../../factory/desygner-api":123,"../components/accordion-list/categories-director":313,"./redfin-details.hbs":496,"./redfin-search-results":497,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.search.js":925,"core-js/modules/web.dom-collections.for-each.js":964}],500:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js");var s,a=r(e("../../../../../../src/config/constants")),l=r(e("../components/common/common-component")),c=r(e("./redfin")),u=r(e("./redfin-template.hbs")),d=e("../../../factory/company");t.exports=l.default.extend({type:"redfin",initialize:function(){var e=this;l.default.prototype.initialize.call(this),this.addOrderPrintLink();var t=d.instance.getCompany(),n=d.instance.get(["designs",INKIVE.C.BOOK.encodedId]);$.when(t,n).then((function(t,n){return e.initCallback(t,n)}))},initCallback:function(e,t){this.tool=INKIVE.Tool.getInstance(),this.companyId=e.id,this.searchTerm=this.getSearchTerm(t.metadata),this.searchTerm&&(document.querySelector('[href="#tabRedfin"]').parentNode.style.display="flex")},getSearchTerm:function(e){var t=e||{},n=t.search_term,r=t.search_params;return function(){if(!r||!Array.isArray(r)||!r.length)return;return r.reduce((function(e,t){return e||t.search_term}),void 0)}()||n&&n.encrypted_deal_id},isAlreadyThere:function(){return!!this.el.querySelector(".tab-content.redfin")},render:(s=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.prototype.render.call(this);case 2:this.$headerLinks.filter("[data-key=redfin]").trigger("click"),(t=this.el.querySelector(".search-container"))&&(t.style.display="none");case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),refresh:function(){this.$el.find(".items-content").find(".thumbnail-wrapper").masonry(a.default.sidebar.thumbnail.masonryConfig)},addOrderPrintLink:function(){document.querySelector("header > div.options > .desygner-done-button").onclick=function(){return window.open("https://print.redfin.com")}},initRedfinView:function(){this.registerTabView("redfin",new c.default({el:this.initTabView("redfin"),searchTerm:this.searchTerm,companyId:this.companyId}))},initTabView:function(e){var t=this.$el.find(".tab-content > ."+e);return t.html((0,u.default)({type:e,isRedfin:"redfin"===e})),t}})},{"../../../../../../src/config/constants":1090,"../../../factory/company":122,"../components/common/common-component":321,"./redfin":499,"./redfin-template.hbs":498,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.reduce.js":872}],501:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <p>"+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restricted.locked",{name:"t",hash:{},data:o,loc:{start:{line:6,column:11},end:{line:6,column:41}}}))+'</p>\n        <div class="u-cant-touch-this">\n          <img src="https://static.inkive.com/assets/img/hammer.svg" />\n          <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restricted.cant_touch",{name:"t",hash:{},data:o,loc:{start:{line:9,column:16},end:{line:9,column:50}}}))+"</span>\n        </div>\n"},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(i=a(n,"if").call(s,null!=t?a(t,"cantChange"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:10},end:{line:16,column:17}}}))?i:"")+"\n"+(null!=(i=a(n,"if").call(s,null!=t?a(t,"hasChangeList"):t,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:10},end:{line:20,column:17}}}))?i:"")},4:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <p> "+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restricted.cant_change",{name:"t",hash:{},data:o,loc:{start:{line:15,column:16},end:{line:15,column:51}}}))+"</p>\n"},6:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <p>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restricted.description",{name:"t",hash:{},data:o,loc:{start:{line:19,column:15},end:{line:19,column:50}}}))+"</p>\n"},8:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <p class="base">'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.restricted.change",{name:"t",hash:{},data:o,loc:{start:{line:24,column:22},end:{line:24,column:52}}}))+'</p>\n      <ul class="restrictions-list">\n'+(null!=(i=a(n,"each").call(s,null!=t?a(t,"changeList"):t,{name:"each",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:8},end:{line:34,column:17}}}))?i:"")+"      </ul>\n"},9:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.escapeExpression,p=e.hooks.blockHelperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},m='          <li data-element="'+d(typeof(s=null!=(s=h(n,"element")||(null!=t?h(t,"element"):t))?s:c)===u?s.call(l,{name:"element",hash:{},data:o,loc:{start:{line:27,column:28},end:{line:27,column:41}}}):s)+'">\n            <span>'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:c)===u?s.call(l,{name:"name",hash:{},data:o,loc:{start:{line:28,column:18},end:{line:28,column:28}}}):s)+'</span>\n            <button class="show-restriction">'+d((h(n,"t")||t&&h(t,"t")||c).call(l,"editor.select",{name:"t",hash:{},data:o,loc:{start:{line:29,column:45},end:{line:29,column:66}}}))+"</button>\n            ";return s=null!=(s=h(n,"change_style")||(null!=t?h(t,"change_style"):t))?s:c,a={name:"change_style",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:12},end:{line:30,column:155}}},i=typeof s===u?s.call(l,a):s,h(n,"change_style")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+="\n            ",s=null!=(s=h(n,"change_text")||(null!=t?h(t,"change_text"):t))?s:c,a={name:"change_text",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:12},end:{line:31,column:157}}},i=typeof s===u?s.call(l,a):s,h(n,"change_text")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+="\n            ",s=null!=(s=h(n,"change_image")||(null!=t?h(t,"change_image"):t))?s:c,a={name:"change_image",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:32,column:12},end:{line:32,column:162}}},i=typeof s===u?s.call(l,a):s,h(n,"change_image")||(i=p.call(t,i,a)),null!=i&&(m+=i),m+"\n          </li>\n"},10:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<i class="icon-design" data-popover="tooltip" data-original-title="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restricted.change_style",{name:"t",hash:{},data:o,loc:{start:{line:30,column:96},end:{line:30,column:132}}}))+'"></i>'},12:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<i class="icon-text-editor" data-popover="tooltip" data-original-title="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restricted.change_text",{name:"t",hash:{},data:o,loc:{start:{line:31,column:100},end:{line:31,column:135}}}))+'"></i>'},14:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<i class="icon-image-replace" data-popover="tooltip" data-original-title="'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restricted.change_image",{name:"t",hash:{},data:o,loc:{start:{line:32,column:103},end:{line:32,column:139}}}))+'"></i>'},16:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <p class="base">'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.restricted.add.title",{name:"t",hash:{},data:o,loc:{start:{line:39,column:22},end:{line:39,column:55}}}))+'</p>\n      <ul class="restrictions-list">\n'+(null!=(i=a(n,"each").call(s,null!=t?a(t,"addList"):t,{name:"each",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:41,column:8},end:{line:45,column:17}}}))?i:"")+"      </ul>\n"},17:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <li data-element="'+l("function"==typeof(i=null!=(i=c(n,"element")||(null!=t?c(t,"element"):t))?i:a)?i.call(s,{name:"element",hash:{},data:o,loc:{start:{line:42,column:28},end:{line:42,column:41}}}):i)+'">\n            <span>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,t,{name:"t",hash:{},data:o,loc:{start:{line:43,column:18},end:{line:43,column:26}}}))+"</span>\n          </li>\n"},19:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <p class="base">'+e.escapeExpression((a(n,"t")||t&&a(t,"t")||e.hooks.helperMissing).call(s,"tool.restricted.do.title",{name:"t",hash:{},data:o,loc:{start:{line:50,column:22},end:{line:50,column:54}}}))+'</p>\n      <ul class="restrictions-list">\n'+(null!=(i=a(n,"each").call(s,null!=t?a(t,"doList"):t,{name:"each",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:52,column:8},end:{line:56,column:17}}}))?i:"")+"      </ul>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.hooks.blockHelperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <div class="accordion tab-content restricted active sub-category">\n      <h2>'+e.escapeExpression((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.restricted.title",{name:"t",hash:{},data:o,loc:{start:{line:4,column:10},end:{line:4,column:39}}}))+"</h2>\n";return s=null!=(s=d(n,"locked")||(null!=t?d(t,"locked"):t))?s:c,a={name:"locked",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:6},end:{line:11,column:17}}},i="function"==typeof s?s.call(l,a):s,d(n,"locked")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+="\n",s=null!=(s=d(n,"locked")||(null!=t?d(t,"locked"):t))?s:c,a={name:"locked",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:13,column:6},end:{line:21,column:17}}},i="function"==typeof s?s.call(l,a):s,d(n,"locked")||(i=u.call(t,i,a)),null!=i&&(p+=i),p+"\n"+(null!=(i=d(n,"if").call(l,null!=t?d(t,"hasChangeList"):t,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:6},end:{line:36,column:13}}}))?i:"")+"\n"+(null!=(i=d(n,"if").call(l,null!=t?d(t,"hasAddList"):t,{name:"if",hash:{},fn:e.program(16,o,0),inverse:e.noop,data:o,loc:{start:{line:38,column:6},end:{line:47,column:13}}}))?i:"")+"\n"+(null!=(i=d(n,"if").call(l,null!=t?d(t,"hasDoList"):t,{name:"if",hash:{},fn:e.program(19,o,0),inverse:e.noop,data:o,loc:{start:{line:49,column:6},end:{line:58,column:13}}}))?i:"")+"    </div>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],502:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.index-of.js");var s,a=r(e("./template.hbs")),l=r(e("../../../facade/editor/editor")),c=r(e("../../../facade/design/design")),u=r(e("../components/mixins/scrollable")),d=r(e("../../../facade/restrictions/restrictions")),p=e("../../../factory/company"),h=e("../../../utils/sort");t.exports=Backbone.mixin(Backbone.View.extend({events:{"click button.show-restriction":"showRestrictionEvent"},initialize:function(){var e=this,t=function(){e.$el.find(".restricted").length&&e.render()};c.default.on("template.update.restricted",t),l.default.on("page.move_to",t)},showRestrictionEvent:function(e){var t,n=INKIVE.Tool.getInstance().editor.canvas,r=$(e.currentTarget).closest("li").data("element");if("background"===r){var o=$("#svg_background_image"),i=$("#svg_background_color");(t=o.length?o:i).length||(t=$("#svgcontent").children("g.background"))}else t=$("#"+r);n.setMode("select"),n.selectOnly([t[0]],!0)},show:function(){this.$el.find(".restricted").length||this.render()},render:(s=(0,i.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.instance.getCompanyData().then((function(e){t.simplified="pro_team"===e.subscription_plan;var n={doList:t.getDoList(),addList:t.getAddList(),changeList:t.getChangeList()};_.extend(n,{hasDoList:n.doList.length>0,hasAddList:n.addList.length>0,hasChangeList:n.changeList.length>0}),_.extend(n,{locked:!n.hasDoList&&!n.hasAddList&&!n.hasChangeList,cantChange:!n.hasAddList&&!n.hasChangeList}),t.$el.html((0,a.default)(n)),INKIVE.Helpers.initTooltips(t.$el)}));case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),getDoList:function(){return["function_print_file","function_share_file","function_download_file","function_animation_file","function_edit_animation_file"].filter((function(e){var t=d.default.isFunctionalityAllowed(e);return"function_animation_file"===e||"function_edit_animation_file"===e?t&&INKIVE.C.SHOW_ANIMATION:t})).map((function(e){return"tool.restricted.do."+e}))},getAddList:function(){return _.chain(["image_add","text_add","table_add","vector_add","logo_add","icon_add","video_add","function_draw"]).filter(d.default.isFunctionalityAllowed).map((function(e){return"tool.restricted.add."+e})).value()},getChangeList:function(){var e=this.simplified;return _.compact(_.map(c.default.get(),(function(e){var o;if(e.name)o=e.name;else{var i=e.id.split("_");o=e.type,i.length>1&&(o+=" "+i[1]),o=o.charAt(0).toUpperCase()+o.slice(1)}var s={name:o,element:e.id,change_image:t(e),change_text:n(e),change_style:r(e)};return s.change_image||s.change_text||s.change_style?s:null}))).sort((0,h.sortByProperty)("name"));function t(t){return e?!INKIVE.RestrictionsFacade.getElementRestrictions(t.id).length:!("image"!==t.type&&"background"!==t.type&&"logo"!==t.type&&"icon"!==t.type&&"video"!==t.type)&&("background"===t.type?_.any(d.default.getAllElementPermissions("background"),(function(e){return e.basic&&e.basic.image})):d.default.isActionAllowed("image_replace",t.id)||d.default.isActionAllowed("logo_replace",t.id)||d.default.isActionAllowed("icon_replace",t.id)||d.default.isActionAllowed("video_replace",t.id))}function n(t){if(e)return!INKIVE.RestrictionsFacade.getElementRestrictions(t.id).length;var n=null;return"text"===t.type&&(n="text_change_content"),"table"===t.type&&(n="table_content"),!!n&&d.default.isActionAllowed(n,t.id)}function r(t){if(e)return!INKIVE.RestrictionsFacade.getElementRestrictions(t.id).length;if("background"===t.type)return _.any(d.default.getAllElementPermissions("background"),(function(e){return e.basic&&_.any(e.basic,(function(e,t){return"image"!==t&&e}))}));var n=["image_add","image_replace","text_add","text_change_content","table_add","vector_add","icon_add","logo_add","logo_replace","video_add","video_replace"];return _.any(d.default.getAllDefaultPermissions(),(function(e,r){return-1===n.indexOf(r)&&0===r.indexOf(t.type)&&d.default.isActionAllowed(r,t.id)}))}}}),u.default)},{"../../../facade/design/design":47,"../../../facade/editor/editor":91,"../../../facade/restrictions/restrictions":118,"../../../factory/company":122,"../../../utils/sort":622,"../components/mixins/scrollable":334,"./template.hbs":501,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],503:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?s(t,"restrictions"):t)?s(i,"length"):i,t))+"</span>"},3:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <p class="restrictions-list">'+(null!=(i=(s(n,"t")||t&&s(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.empty",{name:"t",hash:{},data:o,loc:{start:{line:11,column:31},end:{line:11,column:72}}}))?i:"")+"</p>\n"},5:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <li data-element="'+l("function"==typeof(i=null!=(i=c(n,"element")||(null!=t?c(t,"element"):t))?i:a)?i.call(s,{name:"element",hash:{},data:o,loc:{start:{line:16,column:24},end:{line:16,column:37}}}):i)+'">\n        <div class="name-container">\n          <span class="name">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:18,column:29},end:{line:18,column:39}}}):i)+'</span>\n        </div>\n\n        <div class="actions">\n          <button class="change-name">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.change_name",{name:"t",hash:{},data:o,loc:{start:{line:22,column:38},end:{line:22,column:75}}}))+'</button>\n          <button class="show-restriction">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"editor.view",{name:"t",hash:{},data:o,loc:{start:{line:23,column:43},end:{line:23,column:62}}}))+'</button>\n          <i class="fa fa-trash remove"></i>\n        </div>\n      </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.hooks.blockHelperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='<div class="group no-top-margin">\n  <div>\n    <h4>\n      '+u((p(n,"t")||t&&p(t,"t")||c).call(l,"tool.restrictions.element.title",{name:"t",hash:{},data:o,loc:{start:{line:4,column:6},end:{line:4,column:45}}}))+"\n      ";return s=null!=(s=p(n,"has_restrictions")||(null!=t?p(t,"has_restrictions"):t))?s:c,a={name:"has_restrictions",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:6},end:{line:5,column:86}}},i="function"==typeof s?s.call(l,a):s,p(n,"has_restrictions")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+='\n    </h4>\n    <div class="element-name"></div>\n  </div>\n\n',s=null!=(s=p(n,"has_restrictions")||(null!=t?p(t,"has_restrictions"):t))?s:c,a={name:"has_restrictions",hash:{},fn:e.noop,inverse:e.program(3,o,0),data:o,loc:{start:{line:10,column:2},end:{line:12,column:23}}},i="function"==typeof s?s.call(l,a):s,p(n,"has_restrictions")||(i=d.call(t,i,a)),null!=i&&(h+=i),h+'\n  <ul class="restrictions-list">\n'+(null!=(i=p(n,"each").call(l,null!=t?p(t,"restrictions"):t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:4},end:{line:27,column:13}}}))?i:"")+'  </ul>\n\n  <div class="element-selected hidden">\n    '+u((p(n,"t")||t&&p(t,"t")||c).call(l,"tool.restrictions.element.selected",{name:"t",hash:{},data:o,loc:{start:{line:31,column:4},end:{line:31,column:46}}}))+'\n    <br><i class="fa fa-check-circle-o" /> '+u((p(n,"t")||t&&p(t,"t")||c).call(l,"tool.restrictions.template.can",{name:"t",hash:{},data:o,loc:{start:{line:32,column:43},end:{line:32,column:81}}}))+'\n    <br><i class="fa fa-ban" /> '+u((p(n,"t")||t&&p(t,"t")||c).call(l,"tool.restrictions.template.cannot",{name:"t",hash:{},data:o,loc:{start:{line:33,column:32},end:{line:33,column:73}}}))+"\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],504:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.sort.js");var s=e("./element-restrictions.hbs"),a=e("../../../facade/editor/editor"),l=e("../../../facade/design/design"),c=e("../../../factory/restrictions"),u=e("../../../facade/restrictions/restrictions"),d=e("../../../utils/sort").sortByProperty,p={logo:e("./element/logo-type"),icon:e("./element/icon-type"),text:e("./element/text-type"),image:e("./element/image-type"),vector:e("./element/vector-type"),video:e("./element/video-type"),table:e("./element/table-type"),background:e("./element/background-type")};t.exports=Backbone.mixin(Backbone.View.extend({events:{"click .remove":"removeRestrictionEvent","click button.show-restriction":"showRestrictionEvent","click button.change-name":"changeNameEvent"},removeRestrictionEvent:function(e){INKIVE.Modal.alertMessage("Sure you want to remove element restrictions?",{width:450,callback:[_.bind((function(){c.setGlobalElementRestriction($(e.currentTarget).closest("li").data("element")),this.refresh()}),this),$.noop]})},showRestrictionEvent:function(e){var t=$(e.currentTarget).closest("li").data("element"),n=INKIVE.Tool.getInstance().editor.canvas,r="background"===t?$("#svgcontent").children("g.background").children(":not(title)").last():$("#"+t);n.setMode("select"),n.selectOnly([r[0]],!0)},changeNameEvent:function(t){var n,r=this,s=e("../../../modal/prompt"),a=$(t.currentTarget).closest("li").data("element"),l=new s({label:"New name",defaultValue:$("[data-element="+a+"]").find(".name").first().text()}),u=INKIVE.Modal.modalWindow(l.getFormHtml(),{width:400,headerIcon:"fa fa-edit",headerTitle:INKIVE.TranslateHelper.translate("tool.restrictions.change_restriction_name"),buttons:[{title:"Ok",onClick:(n=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.close(),t=l.getValue(),$("[data-element="+a+"]").find(".name").text(t),e.next=5,c.setGlobalRestrictionName(a,t);case 5:r.refresh();case 6:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}]})},initialize:function(){_.bindAll(this,"render","refresh","setSelection"),a.on("select",this.setSelection),this.refresh()},refresh:function(){var e=$.Deferred();return c.getElementPermissions().then(_.bind((function(t){this.render(t),e.resolve()}),this)),e.promise()},setSelection:function(e){var t=document.querySelector("#tool-panel");if(!t||!t.classList.contains("collapsed")){var n=_(e).first();if($("#margin-box, #vertical-line, #horizontal-line").remove(),this.$el.find("input:focus").blur(),e.length<2){this.currentRestrictionsView&&this.currentRestrictionsView.remove();var r=n&&u.getType(n.type);if(n&&p[r]){var o,i,s=$('<div class="group content"></div>');this.$el.append(s),this.currentRestrictionsView=new p[r]({el:s,selection:n}),this.currentRestrictionsView.on("update",_.bind(this.trigger,this,"update")),this.$el.find(".restrictions-list").addClass("hidden"),this.$el.find(".element-selected").removeClass("hidden");var a=null===(o=this.currentRestrictionsView.elementPermissions)||void 0===o||null===(i=o.find((function(e){return e.element_id===n.id})))||void 0===i?void 0:i.name;return void(this.el.querySelector(".element-name").innerHTML=a||"".concat(l.get(n.id).type," ").concat(n.id.split("_")[1]||""))}}this.refresh()}},render:function(e){var t=this.getSingleElementPermissions(e);this.$el.html(s({has_restrictions:t.length>0,restrictions:t})),this.trigger("update")},getSingleElementPermissions:function(e){var t,n=[],r=_.map(e,(function(e){var n=e.page_number===INKIVE.Tool._current_page_number&&l.get(e.element_id);if(n)if(e.name)t=e.name;else{var r=e.element_id.split("_");t=n.type,r.length>1&&(t+=" "+r[1])}return n?{name:t,element:e.element_id}:{}}));return _.each(r,(function(e){var t=_(n).findWhere({element:e.element}),r="background"===e.element||$("#"+e.element).length;!t&&r&&n.push(e)})),n.sort(d("name"))}}),Backbone.Events)},{"../../../facade/design/design":47,"../../../facade/editor/editor":91,"../../../facade/restrictions/restrictions":118,"../../../factory/restrictions":149,"../../../modal/prompt":174,"../../../utils/sort":622,"./element-restrictions.hbs":503,"./element/background-type":507,"./element/icon-type":521,"./element/image-type":523,"./element/logo-type":525,"./element/table-type":527,"./element/text-type":529,"./element/vector-type":531,"./element/video-type":533,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],505:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/slicedToArray")),i=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.bind.js");var s=e("../../../../factory/company"),a=r(e("../../../../factory/restrictions")),l=e("../../../../factory/library"),c=r(e("./element-list/view")),u=r(e("../../../../facade/design/design"));t.exports=Backbone.mixin(Backbone.View.extend({type:null,basicHide:[],groupHeight:{},events:{"change .restrictions.group > input":"toggleSectionEvent","change .restrictions.group .options input":"toggleRestrictionEvent","change .restrictions.group .options select":"toggleRestrictionEvent"},toggleSectionEvent:function(e){this.onSectionChange($(e.currentTarget))},toggleRestrictionEvent:function(e){this.persistOptionRestriction($(e.currentTarget))},onSectionChange:function(e){var t=this,n=e.closest(".restrictions.group"),r=n.data("name");if(r)return this.toggleRestrictionsGroup(n,e.is(":checked")),a.default.getElementPermissions().then((function(n){var o=_(n).findWhere({page_number:INKIVE.Tool._current_page_number,element_id:t.selection.id}),i=o?JSON.parse(o.restrictions):{};if(e.is(":checked")){var s=e.siblings(".options");s.length?s.find("input, select").trigger("change"):(i[r]=!0,a.default.setGlobalElementRestriction(t.selection.id,JSON.stringify(i)))}else i=_(i).omit(r),a.default.setGlobalElementRestriction(t.selection.id,JSON.stringify(i));return null}));_(n.find(".restrictions.group > input:checked")).each((function(e){$(e).prop("checked",!1),this.onSectionChange($(e))}),this),this.toggleRestrictionsGroup(n,e.is(":checked")),this.persistOptionRestriction(e)},persistOptionRestriction:function(e){var t=this,n=e.closest(".restrictions.group").data("name");if(n||void 0===n)return n=n||"basic",a.default.getElementPermissions().then((function(r){var o=_(r).findWhere({page_number:INKIVE.Tool._current_page_number,element_id:t.selection.id}),i=e.attr("name"),s=e.closest(".restrictions.group[data-field]").data("field"),l=o?JSON.parse(o.restrictions):{},c=t.getOptionValue(e);return l[n]=l[n]||{},s&&"basic"===n&&(l.basic||(l.basic={}),l.basic[s]=!!c,"color"===s&&(l.basic[t.type+"_colour"]=!!c)),i&&(l[n][i]=c),void 0===c&&(l[n]=_(l[n]).omit(i)),"basic"!==n&&t.isEmptyOption(c)&&(i?l[n]=_(l[n]).omit(i):_.size(l[n])||(l=_(l).omit(n))),a.default.setGlobalElementRestriction(t.selection.id,JSON.stringify(l)),null}))},isEmptyOption:function(e){return!1===e||null===e||""===e||_.isObject(e)&&!_.size(e)},getOptionValue:function(e){return e.is('input[type="checkbox"]')?e.is(":checked"):e.is('input[type="text"]')?e.val():e.is('input[type="number"]')?""===e.val()?null:parseFloat(e.val()):e.is("select")?e.val():void 0},initialize:function(e){this.selection=e.selection,_.bindAll(this,"refresh"),this.refresh()},refresh:function(){var e=this;return $.when(s.instance.get(["groups"]),a.default.getElementPermissions(),a.default.getTemplatePermissions(),l.instance.get("palettes"),l.instance.get("colors")).then((function(t,n,r,o,s){e.groups=t,e.elementPermissions=n,e.templatePermissions=r,e.groupHeight={};var a={id:0,name:INKIVE.TranslateHelper.translate("tool.library.default_palette"),colors:s};return e.colorLibraryPalettes=[a].concat((0,i.default)(o.map((function(e){return e.data})))),e.render(),null}))},renderRestrictions:function(){var e=this,t=_(this.elementPermissions).findWhere({page_number:INKIVE.Tool._current_page_number,element_id:this.selection.id});t=t?JSON.parse(t.restrictions):{},this.renderDefaultRestrictions(t),Object.keys(t).length&&a.default.getTemplatePermissions().then((function(n){(0,i.default)(e.el.querySelectorAll(".restrictions.group[data-field]")).forEach((function(r){var o=r.dataset.field;"color"===o&&(o="".concat(e.type,"_colour"));var i=t.basic&&void 0!==t.basic[o]?t.basic[o]:n[0][o];r.querySelector('input[type="checkbox"]').checked=!!i,e.toggleRestrictionsGroup($(r),i)}))})),(0,i.default)(this.el.querySelectorAll(".restrictions.group[data-name]")).forEach((function(n){var r=n.dataset.name,o=$(n).parents(".restrictions.group[data-field]").attr("data-field"),i=t.basic&&t.basic[o];e._renderRestrictions(t,r),i&&e.toggleRestrictionsGroup($(n),"basic"===r||t[r])}))},renderDefaultRestrictions:function(e){var t=new RegExp("^"+this.type+"_.*"),n={},r=this.templatePermissions[0];r&&Object.entries(r).forEach((function(e){var r=(0,o.default)(e,2),i=r[0],s=r[1];i.match(t)&&(n[i]=s)})),this._renderRestrictions({basic:n},"basic"),_.each(this.$el.find(".restrictions.group[data-field]"),_.bind((function(t){var r=$(t).data("field"),o=n[r],i=$(t).children('input[type="checkbox"]');o||"color"!==r||(o=n[this.type+"_colour"]),i.prop("checked",!!o),this.toggleRestrictionsGroup($(t),o),o&&_.isUndefined(e.basic&&e.basic[r])&&this.onSectionChange(i)}),this)),_.each(this.$el.find(".restrictions.group[data-name]"),_.bind((function(e){var t=$(e).children('input[type="checkbox"]');this.toggleRestrictionsGroup($(e),!t.length),t.prop("checked",!1)}),this))},_renderRestrictions:function(e,t){var n=e[t],r=this.$el.find('.restrictions.group[data-name="'+t+'"]');r.children('input[type="checkbox"]').prop("checked",n),_.each(n,(function(e,t){r.find('input[type="checkbox"][name="'+t+'"]').prop("checked",e),r.find('input[type="number"][name="'+t+'"]').val(e),r.find('input[type="text"][name="'+t+'"]').val(e),r.find('select[name="'+t+'"]').val(e)}),this)},toggleRestrictionsGroup:function(e,t){t&&this.openRestrictionsGroup(e),t||this.closeRestrictionsGroup(e),this.trigger("update")},openRestrictionsGroup:function(e,t){var n=t||0,r=this.getGroupHeight(e);if(e.children(".options").length&&(_(e.contents()).each((function(e){1===e.nodeType&&(n+=$(e).outerHeight(!0))})),this.setGroupHeight(e,r<n?n:r),r<n)){var o=e.parents(".restrictions.group[data-field]");o.length&&this.resizeRestrictionsGroup(o,n-r)}e.data("radiogroup")&&this.toggleGroupSiblings(e)},closeRestrictionsGroup:function(e){var t=e.children("label").height(),n=this.getGroupHeight(e);this.setGroupHeight(e,t);var r=e.parents(".restrictions.group[data-field]");this.resizeRestrictionsGroup(r,t-n)},toggleGroupSiblings:function(e){var t=e.data("radiogroup"),n=this.$el.find('.restrictions.group[data-radiogroup="'+t+'"]');_.each(n,(function(t){if(t!==e[0]){var n=(t=$(t)).children('input[type="checkbox"]');n.is(":checked")&&(n.prop("checked",!1),this.onSectionChange(t))}}),this)},resizeRestrictionsGroup:function(e,t){if(t){var n=this.getGroupHeight(e)+t;this.setGroupHeight(e,n)}},getGroupHeight:function(e){var t=e.data("name")||e.data("field");return void 0===t||void 0===this.groupHeight[t]?e.height():this.groupHeight[t]},setGroupHeight:function(e,t){var n=e.data("name")||e.data("field");void 0!==n&&(this.groupHeight[n]=t),e.height(t)},initColorsList:function(e){var t=(e=e||"")+"colorsListView";this[t]&&this[t].remove(),this[t]=new c.default({el:this.$el.find('.restrictions.group[data-name="'+e+'colors"] li'),type:"color",uuid:e+"color"}),this[t].on("change",_.bind(this.elementListChange,this,this[t])),this[t].on("apply",(function(e){u.default.set(this.type,{color:e})}))},initLibraryColors:function(e){var t=(e=e||"")+"colorsLibraryView";this[t]&&this[t].remove(),this[t]=new c.default({el:this.$el.find('.restrictions.group[data-name="'+e+'colors-library"] li'),type:"colors_library",uuid:e+"colors-library",colorLibraryPalettes:this.colorLibraryPalettes}),this[t].on("change",_.bind(this.elementListChange,this,this[t])),this[t].$el.find("select").on("change",_.bind((function(){this[t].setLibraryPaletteRestriction()}),this))},elementListChange:function(e){var t=e.$el.find("input");this.persistOptionRestriction(t),this.toggleRestrictionsGroup(t.closest(".restrictions.group"),!0)}}),Backbone.Events)},{"../../../../facade/design/design":47,"../../../../factory/company":122,"../../../../factory/library":128,"../../../../factory/restrictions":149,"./element-list/view":519,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.match.js":920,"core-js/modules/web.dom-collections.for-each.js":964}],506:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n  <div class="restrictions group" data-name="opacity">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-opacity" />\n    <label for="element-restrictions-opacity">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.background.opacity",{name:"t",hash:{},data:o,loc:{start:{line:4,column:46},end:{line:4,column:98}}}))+'</label>\n  </div>\n\n  <div class="restrictions group" data-name="flip">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-flip" />\n    <label for="element-restrictions-flip">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.background.flip",{name:"t",hash:{},data:o,loc:{start:{line:9,column:43},end:{line:9,column:92}}}))+'</label>\n  </div>\n\n  <div class="restrictions group" data-field="image">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-image-content" />\n    <label for="element-restrictions-image-content">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.background.image",{name:"t",hash:{},data:o,loc:{start:{line:14,column:52},end:{line:14,column:102}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="images">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-images" />\n          <label for="element-restrictions-images">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.common.source_list",{name:"t",hash:{},data:o,loc:{start:{line:19,column:51},end:{line:19,column:103}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="color">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-color-content" />\n    <label for="element-restrictions-color-content">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.background.color",{name:"t",hash:{},data:o,loc:{start:{line:28,column:52},end:{line:28,column:102}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="colors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors" />\n          <label for="element-restrictions-colors">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:33,column:51},end:{line:33,column:102}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="colors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors-library" />\n          <label for="element-restrictions-colors-library">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:40,column:59},end:{line:40,column:113}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],507:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("./abstract-type"),o=e("./background-type.hbs"),i=(e("../../components/thumbnail/color"),e("./element-list/view")),s=e("../../../../facade/design/design"),a=e("../../../../factory/images");t.exports=r.extend({type:"background",toggleSectionEvent:function(e){$(e.currentTarget).is("#element-restrictions-images:checked")&&!this.imagesListView.getData().length&&this.imagesListView.addElement(a.getVersionUrl(this.selection.source,"thumb")),$(e.currentTarget).is("#element-restrictions-colors:checked")&&(this.colorsListView.getData().length||this.colorsListView.addElement(this.selection.color),this.$el.find("#element-restrictions-colors-library:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-colors-library:checked")&&(this.colorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-colors:checked").trigger("click").prop("checked",!1)),r.prototype.toggleSectionEvent.apply(this,arguments)},render:function(e){this.$el.html(o()),this.initImagesList(),this.initColorsList(),this.initLibraryColors(),this.renderRestrictions()},initImagesList:function(){this.imagesListView&&this.imagesListView.remove(),this.imagesListView=new i({el:this.$el.find('.restrictions.group[data-name="images"] li'),type:"background",uuid:"background"}),this.imagesListView.on("change",_.bind(this.elementListChange,this,this.imagesListView)),this.imagesListView.on("apply",(function(e){s.set("background",{source:e})}))},getOptionValue:function(e){return e.is(".element-list")?"background"==e.data("uuid")?this.imagesListView.getData():this.colorsListView.getData():r.prototype.getOptionValue.apply(this,arguments)},_renderRestrictions:function(e,t){"images"==t&&e[t]&&_(e[t].list).each(this.imagesListView.addElement),"colors"==t&&e[t]&&_(e[t].list).each(this.colorsListView.addElement),"colors-library"===t&&e[t]&&this.colorsLibraryView.setLibraryPaletteRestriction(e[t]),r.prototype._renderRestrictions.apply(this,arguments)}})},{"../../../../facade/design/design":47,"../../../../factory/images":127,"../../components/thumbnail/color":349,"./abstract-type":505,"./background-type.hbs":506,"./element-list/view":519,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],508:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.background_list_empty",{name:"t",hash:{},data:o,loc:{start:{line:3,column:24},end:{line:3,column:86}}}))+"</label>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.background_list_desc",{name:"t",hash:{},data:o,loc:{start:{line:4,column:26},end:{line:4,column:87}}}))+"</label>"},5:function(e,t,n,r,o){var i=e.lambda,s=e.escapeExpression;return'    <div class="thumbnail image" data-value="'+s(i(t,t))+'" style="background-image: url('+s(i(t,t))+')">\n      <span class="remove"><i class="fa fa-times"></i></span>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper">\n  <input type="hidden" name="list" class="element-list" data-uuid="'+e.escapeExpression("function"==typeof(s=null!=(s=l(n,"uuid")||(null!=t?l(t,"uuid"):t))?s:e.hooks.helperMissing)?s.call(a,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:77}}}):s)+'"/>\n  '+(null!=(i=l(n,"if").call(a,null!=t?l(t,"no_data"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:101}}}))?i:"")+"\n  "+(null!=(i=l(n,"if").call(a,null!=t?l(t,"show_hint"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:4,column:102}}}))?i:"")+"\n\n"+(null!=(i=l(n,"each").call(a,null!=t?l(t,"data"):t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:10,column:11}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],509:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <option value="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:6,column:21},end:{line:6,column:29}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:6,column:31},end:{line:6,column:41}}}):i)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <input type="text" name="palette" class="elemt-list hidden" data-uuid="'+e.escapeExpression("function"==typeof(s=null!=(s=l(n,"uuid")||(null!=t?l(t,"uuid"):t))?s:e.hooks.helperMissing)?s.call(a,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:73},end:{line:2,column:83}}}):s)+'"/>\n\n  <select tabindex="-1">\n'+(null!=(i=l(n,"each").call(a,null!=t?l(t,"data"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:4},end:{line:7,column:13}}}))?i:"")+'  </select>\n\n  <div class="thumbnails-wrapper"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],510:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o,i,s){var a,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="thumbnail color restrictions-color-thumbnail" data-value="'+c(l(t,t))+'" style="background-color: '+c(l(t,t))+'">\n'+(null!=(a=u(n,"unless").call(null!=t?t:e.nullContext||{},null!=s[1]?u(s[1],"show_hint"):s[1],{name:"unless",hash:{},fn:e.program(2,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:6},end:{line:8,column:17}}}))?a:"")+"    </div>\n"},2:function(e,t,n,r,o){return'        <span class="remove"><i class="fa fa-times"></i></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper restrictions-color-thumbnail-wrapper">\n  <input type="text" name="list" class="element-list hidden" data-uuid="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"uuid")||(null!=t?u(t,"uuid"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:72},end:{line:2,column:82}}}):l)+'"/>\n\n'+(null!=(a=u(n,"each").call(c,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:10,column:11}}}))?a:"")+'\n  <div class="addmore add restrictions-add-color">\n    <i class="desygner-icon-plus"></i>\n  </div>\n</div>\n'},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],511:[function(e,t,n){"use strict";var r=e("./logos-view");t.exports=r.extend({template:e("./icons.hbs")})},{"./icons.hbs":512,"./logos-view":514}],512:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.icon_list_empty",{name:"t",hash:{},data:o,loc:{start:{line:3,column:24},end:{line:3,column:80}}}))+"</label>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.icon_list_desc",{name:"t",hash:{},data:o,loc:{start:{line:4,column:26},end:{line:4,column:81}}}))+"</label>"},5:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="thumbnail logo" data-thumb="'+d("function"==typeof(l=null!=(l=p(n,"thumb_src")||(null!=t?p(t,"thumb_src"):t))?l:u)?l.call(c,{name:"thumb_src",hash:{},data:o,loc:{start:{line:7,column:44},end:{line:7,column:59}}}):l)+'" data-isvector="'+d("function"==typeof(l=null!=(l=p(n,"is_vector")||(null!=t?p(t,"is_vector"):t))?l:u)?l.call(c,{name:"is_vector",hash:{},data:o,loc:{start:{line:7,column:76},end:{line:7,column:91}}}):l)+'" style="background-image: url('+d("function"==typeof(l=null!=(l=p(n,"thumb_src")||(null!=t?p(t,"thumb_src"):t))?l:u)?l.call(c,{name:"thumb_src",hash:{},data:o,loc:{start:{line:7,column:122},end:{line:7,column:137}}}):l)+')">\n'+(null!=(a=p(n,"unless").call(c,null!=s[1]?p(s[1],"show_hint"):s[1],{name:"unless",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:8,column:6},end:{line:10,column:17}}}))?a:"")+"    </div>\n"},6:function(e,t,n,r,o){return'        <span class="remove"><i class="fa fa-times"></i></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper">\n  <input type="hidden" name="list" class="element-list" data-uuid="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"uuid")||(null!=t?u(t,"uuid"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:77}}}):l)+'"/>\n  '+(null!=(a=u(n,"if").call(c,null!=t?u(t,"no_data"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:95}}}))?a:"")+"\n  "+(null!=(a=u(n,"if").call(c,null!=t?u(t,"show_hint"):t,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:4,column:96}}}))?a:"")+"\n\n"+(null!=(a=u(n,"each").call(c,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:12,column:11}}}))?a:"")+"</div>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],513:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.source_list_empty",{name:"t",hash:{},data:o,loc:{start:{line:3,column:24},end:{line:3,column:82}}}))+"</label>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.source_list_desc",{name:"t",hash:{},data:o,loc:{start:{line:4,column:26},end:{line:4,column:83}}}))+"</label>"},5:function(e,t,n,r,o,i,s){var a,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="thumbnail image restrictions-image-thumbnail" data-value="'+c(l(t,t))+'" style="background-image: url('+c(l(t,t))+')">\n'+(null!=(a=u(n,"unless").call(null!=t?t:e.nullContext||{},null!=s[1]?u(s[1],"show_hint"):s[1],{name:"unless",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:8,column:6},end:{line:10,column:17}}}))?a:"")+"    </div>\n"},6:function(e,t,n,r,o){return'        <span class="remove"><i class="fa fa-times"></i></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper">\n  <input type="hidden" name="list" class="element-list" data-uuid="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"uuid")||(null!=t?u(t,"uuid"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:77}}}):l)+'"/>\n  '+(null!=(a=u(n,"if").call(c,null!=t?u(t,"no_data"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:97}}}))?a:"")+"\n  "+(null!=(a=u(n,"if").call(c,null!=t?u(t,"show_hint"):t,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:4,column:98}}}))?a:"")+"\n\n"+(null!=(a=u(n,"each").call(c,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:12,column:11}}}))?a:"")+"</div>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],514:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js");var r=e("./view");t.exports=r.extend({template:e("./logos.hbs"),applyElementEvent:function(e){var t=$(e.currentTarget).closest(".thumbnail");this.trigger("apply",{thumb_src:t.data("thumb"),is_vector:t.data("isvector")})},removeElementEvent:function(e){var t=$(e.currentTarget).closest(".thumbnail").data("thumb");this.data=_(this.data).filter((function(e){return e.thumb_src!=t})),this.render(),this.trigger("change",this.getData()),e.stopPropagation()},render:function(){this.$el.html(this.template({uuid:this.uuid,data:this.data,no_data:this.data.length<1,show_hint:1==this.data.length}))}})},{"./logos.hbs":515,"./view":519,"core-js/modules/es.array.filter.js":857}],515:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.logo_list_empty",{name:"t",hash:{},data:o,loc:{start:{line:3,column:24},end:{line:3,column:80}}}))+"</label>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.logo_list_desc",{name:"t",hash:{},data:o,loc:{start:{line:4,column:26},end:{line:4,column:81}}}))+"</label>"},5:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="thumbnail logo" data-thumb="'+d("function"==typeof(l=null!=(l=p(n,"thumb_src")||(null!=t?p(t,"thumb_src"):t))?l:u)?l.call(c,{name:"thumb_src",hash:{},data:o,loc:{start:{line:7,column:44},end:{line:7,column:59}}}):l)+'" data-isvector="'+d("function"==typeof(l=null!=(l=p(n,"is_vector")||(null!=t?p(t,"is_vector"):t))?l:u)?l.call(c,{name:"is_vector",hash:{},data:o,loc:{start:{line:7,column:76},end:{line:7,column:91}}}):l)+'" style="background-image: url('+d("function"==typeof(l=null!=(l=p(n,"thumb_src")||(null!=t?p(t,"thumb_src"):t))?l:u)?l.call(c,{name:"thumb_src",hash:{},data:o,loc:{start:{line:7,column:122},end:{line:7,column:137}}}):l)+')">\n'+(null!=(a=p(n,"unless").call(c,null!=s[1]?p(s[1],"show_hint"):s[1],{name:"unless",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:8,column:6},end:{line:10,column:17}}}))?a:"")+"    </div>\n"},6:function(e,t,n,r,o){return'        <span class="remove"><i class="fa fa-times"></i></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper">\n  <input type="hidden" name="list" class="element-list" data-uuid="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"uuid")||(null!=t?u(t,"uuid"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:77}}}):l)+'"/>\n  '+(null!=(a=u(n,"if").call(c,null!=t?u(t,"no_data"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:95}}}))?a:"")+"\n  "+(null!=(a=u(n,"if").call(c,null!=t?u(t,"show_hint"):t,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:4,column:96}}}))?a:"")+"\n\n"+(null!=(a=u(n,"each").call(c,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:12,column:11}}}))?a:"")+"</div>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],516:[function(e,t,n){"use strict";var r=e("./logos-view");t.exports=r.extend({template:e("./icons.hbs")})},{"./icons.hbs":512,"./logos-view":514}],517:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js");var r=e("./view");t.exports=r.extend({applyElementEvent:function(e){var t=$(e.currentTarget).closest(".thumbnail");this.trigger("apply",{thumbnail:t.data("thumb"),source:t.data("source")})},removeElementEvent:function(e){var t=$(e.currentTarget).closest(".thumbnail").data("thumb");this.data=_(this.data).filter((function(e){return e.thumbnail!==t})),this.render(),this.trigger("change",this.getData()),e.stopPropagation()}})},{"./view":519,"core-js/modules/es.array.filter.js":857}],518:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.video_list_empty",{name:"t",hash:{},data:o,loc:{start:{line:3,column:24},end:{line:3,column:81}}}))+"</label>"},3:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.element.common.video_list_desc",{name:"t",hash:{},data:o,loc:{start:{line:4,column:26},end:{line:4,column:82}}}))+"</label>"},5:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="thumbnail image" data-thumb="'+d("function"==typeof(l=null!=(l=p(n,"thumbnail")||(null!=t?p(t,"thumbnail"):t))?l:u)?l.call(c,{name:"thumbnail",hash:{},data:o,loc:{start:{line:7,column:45},end:{line:7,column:60}}}):l)+'" data-source="'+d("function"==typeof(l=null!=(l=p(n,"source")||(null!=t?p(t,"source"):t))?l:u)?l.call(c,{name:"source",hash:{},data:o,loc:{start:{line:7,column:75},end:{line:7,column:87}}}):l)+'" style="background-image: url('+d("function"==typeof(l=null!=(l=p(n,"thumbnail")||(null!=t?p(t,"thumbnail"):t))?l:u)?l.call(c,{name:"thumbnail",hash:{},data:o,loc:{start:{line:7,column:118},end:{line:7,column:133}}}):l)+')">\n'+(null!=(a=p(n,"unless").call(c,null!=s[1]?p(s[1],"show_hint"):s[1],{name:"unless",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:8,column:6},end:{line:10,column:17}}}))?a:"")+"    </div>\n"},6:function(e,t,n,r,o){return'        <span class="remove"><i class="fa fa-times"></i></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="thumbnails-wrapper">\n  <input type="hidden" name="list" class="element-list" data-uuid="'+e.escapeExpression("function"==typeof(l=null!=(l=u(n,"uuid")||(null!=t?u(t,"uuid"):t))?l:e.hooks.helperMissing)?l.call(c,{name:"uuid",hash:{},data:o,loc:{start:{line:2,column:67},end:{line:2,column:77}}}):l)+'"/>\n  '+(null!=(a=u(n,"if").call(c,null!=t?u(t,"no_data"):t,{name:"if",hash:{},fn:e.program(1,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:3,column:96}}}))?a:"")+"\n  "+(null!=(a=u(n,"if").call(c,null!=t?u(t,"show_hint"):t,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:4,column:2},end:{line:4,column:97}}}))?a:"")+"\n\n"+(null!=(a=u(n,"each").call(c,null!=t?u(t,"data"):t,{name:"each",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:6,column:2},end:{line:12,column:11}}}))?a:"")+"</div>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],519:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js");var r={color:e("./colors.hbs"),colors_library:e("./colors-library.hbs"),image:e("./images.hbs"),video:e("./videos.hbs"),background:e("./backgrounds.hbs")};t.exports=_.extend(Backbone.View.extend({events:{"click .thumbnail":"applyElementEvent","click .remove":"removeElementEvent"},applyElementEvent:function(e){this.trigger("apply",$(e.currentTarget).closest(".thumbnail").data("value"))},removeElementEvent:function(e){var t=$(e.currentTarget).closest(".thumbnail").data("value");this.data=_(this.data).without(t),this.render(),this.trigger("change",this.getData()),e.stopPropagation()},addElement:function(e){e&&!_.contains(this.data,e)&&(this.data.push(e),this.render(),this.trigger("change",this.getData()))},initialize:function(e){_.bindAll(this,"render","addElement","getData"),this.uuid=e.uuid,this.type=e.type,this.data=e.colorLibraryPalettes||[],this.debouncedRender=_.debounce(this.render,500),this.render()},render:function(){this.$el.html(r[this.type]({uuid:this.uuid,data:this.data,no_data:this.data.length<1,show_hint:1===this.data.length})),"color"===this.type&&this.initColorPicker()},initColorPicker:function(){this.$el.find(".addmore").colorpicker({defaultColor:"#FFF",onSubmit:this.addElement,skipClearSelection:!0})},getLibraryPaletteColors:function(e){var t=_.findWhere(this.data,{id:e||0});if(t){var n=this.$el.find(".thumbnails-wrapper");n.empty(),_.each(t.colors,(function(e){var t=e.data.color_code;n.append('<div class="thumbnail color" style="background-color:'+t+'"></div>')}))}},setLibraryPaletteRestriction:function(e){var t=this.$el.find("select");e&&e.palette&&t.val(e.palette);var n=parseInt(t.val());this.getLibraryPaletteColors(n),this.$el.find("input").val(n),this.trigger("change",this.getData())},getData:function(){return _(this.data).clone()}}),Backbone.Events)},{"./backgrounds.hbs":508,"./colors-library.hbs":509,"./colors.hbs":510,"./images.hbs":513,"./videos.hbs":518,"core-js/modules/es.array.find.js":859,"core-js/modules/es.parse-int.js":905}],520:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="restrictions group" data-field="color">\n      <input tabindex="-1" type="checkbox" id="element-restrictions-color-content"/>\n      <label for="element-restrictions-color-content">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.template.permission.logo_colour",{name:"t",hash:{},data:o,loc:{start:{line:56,column:54},end:{line:56,column:111}}}))+'</label>\n      <ul class="options">\n        <li>\n          <div class="restrictions group" data-name="colors">\n            <input tabindex="-1" type="checkbox" id="element-restrictions-colors"/>\n            <label for="element-restrictions-colors">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:61,column:53},end:{line:61,column:104}}}))+'</label>\n            <ul class="options">\n              <li></li>\n            </ul>\n          </div>\n        </li>\n        <li>\n          <div class="restrictions group" data-name="colors-library">\n            <input tabindex="-1" type="checkbox" id="element-restrictions-colors-library"/>\n            <label for="element-restrictions-colors-library">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:70,column:61},end:{line:71,column:64}}}))+'</label>\n            <ul class="options">\n              <li></li>\n            </ul>\n          </div>\n        </li>\n      </ul>\n    </div>\n'},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:86,column:53},end:{line:86,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:86,column:90},end:{line:86,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:87,column:43},end:{line:87,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:87,column:55},end:{line:87,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="icon_replace">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-icon-replace" />\n    <label for="element-restrictions-icon-replace">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.icon_replace",{name:"t",hash:{},data:o,loc:{start:{line:5,column:51},end:{line:5,column:109}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="source">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-source" />\n          <label for="element-restrictions-source">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.icon_list",{name:"t",hash:{},data:o,loc:{start:{line:10,column:51},end:{line:10,column:101}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="icon_position">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-icon-position" />\n    <label for="element-restrictions-icon-position">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.icon_position",{name:"t",hash:{},data:o,loc:{start:{line:19,column:52},end:{line:19,column:111}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="margin">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-margin" />\n          <label for="element-restrictions-margin">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.margin",{name:"t",hash:{},data:o,loc:{start:{line:24,column:51},end:{line:24,column:98}}}))+'</label>\n          <ul class="options">\n            <li>\n              <div class="slider"></div>\n              <input tabindex="-1" name="size" value="0" type="number" min="0" max="'+c("function"==typeof(s=null!=(s=u(n,"max_margin")||(null!=t?u(t,"max_margin"):t))?s:l)?s.call(a,{name:"max_margin",hash:{},data:o,loc:{start:{line:28,column:84},end:{line:28,column:100}}}):s)+'">\n            </li>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="movement">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-movement" />\n          <label for="element-restrictions-movement">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement",{name:"t",hash:{},data:o,loc:{start:{line:37,column:53},end:{line:37,column:102}}}))+'</label>\n          <ul class="options">\n            <li>\n              <input tabindex="-1" name="horizontal" type="checkbox" id="element-restrictions-horizontal-move"  />\n              <label for="element-restrictions-horizontal-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_h",{name:"t",hash:{},data:o,loc:{start:{line:41,column:64},end:{line:41,column:115}}}))+'</label>\n            </li>\n            <li>\n              <input tabindex="-1" name="vertical" type="checkbox" id="element-restrictions-vertical-move"  />\n              <label for="element-restrictions-vertical-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_v",{name:"t",hash:{},data:o,loc:{start:{line:45,column:62},end:{line:45,column:113}}}))+"</label>\n            </li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n"+(null!=(i=u(n,"if").call(a,null!=t?u(t,"is_vector"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:53,column:2},end:{line:79,column:9}}}))?i:"")+'\n  <div class="restrictions group" data-name="basic">\n    <label for="element-restrictions-basic">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:82,column:44},end:{line:82,column:83}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"basic"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:84,column:6},end:{line:89,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],521:[function(e,t,n){"use strict";var r=e("./logo-type");t.exports=r.extend({type:"icon",template:e("./icon-type.hbs"),ElementListView:e("./element-list/icons-view"),basicHide:["icon_colour","icon_add","icon_replace","icon_position"],getTypeFilterRegex:function(){return/^icon_/}})},{"./element-list/icons-view":511,"./icon-type.hbs":520,"./logo-type":525}],522:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:22,column:53},end:{line:22,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:22,column:90},end:{line:22,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:23,column:43},end:{line:23,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:23,column:55},end:{line:23,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="image_content">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-image-content" />\n    <label for="element-restrictions-image-content">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.images.tooltip.replace_image",{name:"t",hash:{},data:o,loc:{start:{line:5,column:52},end:{line:5,column:93}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="source">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-source" />\n          <label for="element-restrictions-source">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.source_list",{name:"t",hash:{},data:o,loc:{start:{line:10,column:51},end:{line:10,column:103}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:18,column:11},end:{line:18,column:50}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"basic"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:6},end:{line:25,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],523:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.bind.js");var r=e("./image-type.hbs"),o=e("./abstract-type"),i=e("./element-list/view"),s=e("../../../../facade/design/design"),a=e("../../../../factory/restrictions");t.exports=o.extend({type:"image",basicHide:["image_add","image_content","image_replace"],toggleSectionEvent:function(e){$(e.currentTarget).is("#element-restrictions-source:checked")&&!this.sourceListView.getData().length&&this.sourceListView.addElement(this.selection.source.url),o.prototype.toggleSectionEvent.apply(this,arguments)},render:function(){var e=_(this.groups).find((function(e){return e.permissions&&e.permissions.template}));if(e){var t=_.chain(e.permissions.template).map((function(e,t){return{name:t,tag:"tool.restrictions.template.permission."+t}})).filter((function(e){return this.basicHide.indexOf(e.name)<0}),this).filter((function(e){return e.name.match(/^image_/)})).value();this.$el.html(r({basic:t})),this.initSourceList(),this.renderRestrictions()}},getOptionValue:function(e){return e.is(".element-list")?this.sourceListView.getData():o.prototype.getOptionValue.apply(this,arguments)},_renderRestrictions:function(e,t){"source"==t&&e[t]&&_(e[t].list).each(this.sourceListView.addElement),o.prototype._renderRestrictions.apply(this,arguments)},persistOptionRestriction:function(e){var t=e.closest(".restrictions.group").data("name")||"basic",n=e.attr("name")||e.closest(".restrictions.group[data-field]").data("field");"basic"===t&&"image_content"===n&&(this.getOptionValue(e)&&this.checkRepositionPermission());o.prototype.persistOptionRestriction.call(this,e)},checkRepositionPermission:function(){a.getElementPermissions().then(_.bind((function(e){var t=_(e).findWhere({page_number:INKIVE.Tool._current_page_number,element_id:this.selection.id}),n=t?JSON.parse(t.restrictions):{},r=!n.basic||void 0===n.basic.image_crop,o=!n.basic||void 0===n.basic.image_content,i=a.getTemplatePermissionsCollection().any((function(e){return e.image_crop}));r&&!i&&(n.basic=n.basic||{},n.basic.image_crop=!0,o&&(n.basic.image_content=!0),INKIVE.Tool.getInstance().editor.canvas.call("advice.show","crop-restriction-applied"),this.$el.find("#template-restriction-image_crop").prop("checked",!0),a.setGlobalElementRestriction(this.selection.id,JSON.stringify(n)))}),this))},initSourceList:function(){this.sourceListView&&this.sourceListView.remove(),this.sourceListView=new i({el:this.$el.find('.restrictions.group[data-name="source"] li'),type:"image"}),this.sourceListView.on("change",_.bind((function(){var e=this.sourceListView.$el.find("input");this.persistOptionRestriction(e),this.toggleRestrictionsGroup(e.closest(".restrictions.group"),!0)}),this)),this.sourceListView.on("apply",(function(e){s.set({source:{url:e},keep_box_size:!0})}))}})},{"../../../../facade/design/design":47,"../../../../factory/restrictions":149,"./abstract-type":505,"./element-list/view":519,"./image-type.hbs":522,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],524:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:58,column:53},end:{line:58,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:58,column:90},end:{line:58,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:59,column:43},end:{line:59,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:59,column:55},end:{line:59,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="logo_replace">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-logo-replace" />\n    <label for="element-restrictions-logo-replace">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.logo_replace",{name:"t",hash:{},data:o,loc:{start:{line:5,column:51},end:{line:5,column:109}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="source">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-source" />\n          <label for="element-restrictions-source">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.logo_list",{name:"t",hash:{},data:o,loc:{start:{line:10,column:51},end:{line:10,column:101}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="logo_position">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-logo-position" />\n    <label for="element-restrictions-logo-position">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.logo_position",{name:"t",hash:{},data:o,loc:{start:{line:19,column:52},end:{line:19,column:111}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="margin">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-margin" />\n          <label for="element-restrictions-margin">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.margin",{name:"t",hash:{},data:o,loc:{start:{line:24,column:51},end:{line:24,column:98}}}))+'</label>\n          <ul class="options">\n            <li>\n              <div class="slider"></div>\n              <input tabindex="-1" name="size" value="0" type="number" min="0" max="'+c("function"==typeof(s=null!=(s=u(n,"max_margin")||(null!=t?u(t,"max_margin"):t))?s:l)?s.call(a,{name:"max_margin",hash:{},data:o,loc:{start:{line:28,column:84},end:{line:28,column:100}}}):s)+'">\n            </li>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="movement">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-movement" />\n          <label for="element-restrictions-movement">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement",{name:"t",hash:{},data:o,loc:{start:{line:37,column:53},end:{line:37,column:102}}}))+'</label>\n          <ul class="options">\n            <li>\n              <input tabindex="-1" name="horizontal" type="checkbox" id="element-restrictions-horizontal-move" />\n              <label for="element-restrictions-horizontal-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_h",{name:"t",hash:{},data:o,loc:{start:{line:41,column:64},end:{line:41,column:115}}}))+'</label>\n            </li>\n            <li>\n              <input tabindex="-1" name="vertical" type="checkbox" id="element-restrictions-vertical-move" />\n              <label for="element-restrictions-vertical-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_v",{name:"t",hash:{},data:o,loc:{start:{line:45,column:62},end:{line:45,column:113}}}))+'</label>\n            </li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label for="element-restrictions-basic">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:54,column:44},end:{line:54,column:83}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"basic"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:56,column:6},end:{line:61,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],525:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.fill.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js");var r=e("./abstract-type"),o=e("../../../../facade/design/design");t.exports=r.extend({type:"logo",template:e("./logo-type.hbs"),ElementListView:e("./element-list/logos-view"),basicHide:["logo_add","logo_replace","logo_position","logo_colour","logo_stroke"],events:_.extend({"slide .slider":"slideEvent","click ui-slider-handle":"resizeMarginEvent",'keydown input[name="size"]':"preventNonNumericInput",'keyup input[name="size"]':"resizeMarginEvent",'change input[name="size"]':"resizeMarginEvent",'change input[name="vertical"]':"verticalMoveEvent",'change input[name="horizontal"]':"horizontalMoveEvent"},r.prototype.events),toggleSectionEvent:function(e){var t=$(e.currentTarget),n=t.closest(".restrictions.group").data("name");t.is("#element-restrictions-colors:checked")?(this.colorsListView.getData().length||_.each(this.selection.shapes,_.bind((function(e){var t=e.fill.color;t&&this.colorsListView.addElement(t)}),this)),this.$el.find("#element-restrictions-colors-library:checked").trigger("click").prop("checked",!1)):t.is("#element-restrictions-colors-library:checked")?(this.colorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-colors:checked").trigger("click").prop("checked",!1)):t.is(":checked")?$(e.currentTarget).is("#element-restrictions-source:checked")&&!this.logosListView.getData().length&&this.logosListView.addElement({thumb_src:this.selection.thumb_src,is_vector:this.selection.is_vector}):"margin"===n?$("#margin-box").remove():"movement"===n&&$("#horizontal-line, #vertical-line").remove(),r.prototype.toggleSectionEvent.apply(this,arguments)},slideEvent:function(e,t){var n=this.$el.find('input[name="size"]');n.val(t.value),this.setMarginUI(t.value),this.persistOptionRestriction(n)},preventNonNumericInput:function(e){"+"!==e.key&&"-"!==e.key&&"e"!==e.key||e.preventDefault()},resizeMarginEvent:function(e){var t=$(e.currentTarget),n=parseFloat(t.val()),r=this.getMaxMargin();n>r&&(n=r,t.val(n)),n>=0&&(this.marginSlider.slider("value",n),this.setMarginUI(n),this.persistOptionRestriction(t),t.val().length>t.attr("max").length&&(this.marginSlider.slider("value",0),this.setMarginUI(0),t.val(0)))},setMarginUI:function(e){var t=svgedit.utilities.getBBox($("#selectedBox0")[0]),n=document.createElementNS(svgedit.NS.SVG,"rect");$("#margin-box").remove(),this.canvas.assignAttributes(n,{id:"margin-box",width:t.width+e,height:t.height+e,x:t.x-e/2,y:t.y-e/2,"stroke-width":e,fill:"none","stroke-opacity":.3,stroke:"#ED3636"});var r=$("#selectorGroup0")[0];r.insertBefore(n,r.firstChild)},horizontalMoveEvent:function(e){this.setMoveUI("horizontal",$(e.currentTarget).is(":checked"))},verticalMoveEvent:function(e){this.setMoveUI("vertical",$(e.currentTarget).is(":checked"))},setMoveUI:function(e,t){var n=svgedit.utilities.getBBox($("#selectedBox0")[0]),r=document.createElementNS(svgedit.NS.SVG,"line"),o="vertical"===e;$("#"+e+"-line").remove(),this.canvas.assignAttributes(r,{id:e+"-line",x1:o?n.x+n.width/2:n.x,y1:o?n.y:n.y+n.height/2,x2:o?n.x+n.width/2:n.x+n.width,y2:o?n.y+n.height:n.y+n.height/2,"stroke-width":2,"stroke-dasharray":5,stroke:t?"#01ADB6":"#ED3636"}),document.getElementById("selectorGroup0").appendChild(r)},initialize:function(){this.canvas=INKIVE.Tool.getInstance().editor.canvas,r.prototype.initialize.apply(this,arguments)},getOptionValue:function(e){return e.is(".element-list")&&"color"===e.data("uuid")?this.colorsListView.getData():e.is(".element-list")?this.logosListView.getData():r.prototype.getOptionValue.apply(this,arguments)},render:function(){var e=_(this.groups).find((function(e){return e.permissions&&e.permissions.template}));if(e){var t=this.getTypeFilterRegex(),n=_.chain(e.permissions.template).map((function(e,t){return{name:t,tag:"tool.restrictions.template.permission."+t}})).filter((function(e){return this.basicHide.indexOf(e.name)<0}),this).filter((function(e){return e.name.match(t)})).value(),r=this.getMaxMargin();this.$el.html(this.template({basic:n,max_margin:r,is_vector:this.selection.is_vector})),this.initColorsList(),this.initLibraryColors(),this.initSlider(r),this.initSourceList(),this.renderRestrictions()}},_renderRestrictions:function(e,t){"colors"===t&&e[t]?_(e[t].list).each(this.colorsListView.addElement):"colors-library"===t&&e[t]?this.colorsLibraryView.setLibraryPaletteRestriction(e[t]):"margin"===t&&e.margin?(this.marginSlider.slider("value",e.margin.size),this.setMarginUI(e.margin.size)):"source"===t&&e[t]&&_(e[t].list).each(this.logosListView.addElement),r.prototype._renderRestrictions.apply(this,arguments)},initSlider:function(e){var t=this.$el.find('.restrictions[data-name="margin"] .slider');this.marginSlider=t.slider({max:e,min:0,value:0})},initSourceList:function(){this.logosListView&&this.logosListView.remove(),this.logosListView=new this.ElementListView({el:this.$el.find('.restrictions.group[data-name="source"] li'),type:"logo"}),this.logosListView.on("change",_.bind((function(){var e=this.logosListView.$el.find("input");this.persistOptionRestriction(e),this.toggleRestrictionsGroup(e.closest(".restrictions.group"),!0)}),this)),this.logosListView.on("apply",_.bind((function(e){o.set(this.selection.id,e)}),this))},getTypeFilterRegex:function(){return/^logo_/},getMaxMargin:function(){var e=this.canvas.contentW<this.canvas.contentH?this.canvas.contentW/8:this.canvas.contentH/8;return Math.round(e)}})},{"../../../../facade/design/design":47,"./abstract-type":505,"./element-list/logos-view":514,"./logo-type.hbs":524,"core-js/modules/es.array.fill.js":856,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],526:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="restrictions group" data-field="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:4,column:46},end:{line:4,column:56}}}):i)+'">\n    <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:5,column:47},end:{line:5,column:57}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:5,column:84},end:{line:5,column:94}}}):i)+'" />\n    <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:6,column:37},end:{line:6,column:47}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:6,column:49},end:{line:6,column:59}}}))+"</label>\n  </div>\n"},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <li>\n        <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:69,column:51},end:{line:69,column:61}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:69,column:88},end:{line:69,column:98}}}):i)+'" />\n        <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:70,column:41},end:{line:70,column:51}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:70,column:53},end:{line:70,column:63}}}))+"</label>\n      </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"tablePermissions"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:2},end:{line:8,column:11}}}))?i:"")+'\n  <div class="restrictions group" data-field="table_object_color">\n    <input tabindex="-1" type="checkbox" name="table_object_color" id="element-restrictions-table_object_color" />\n    <label for="element-restrictions-table_object_color">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.template.permission.table_object_color",{name:"t",hash:{},data:o,loc:{start:{line:12,column:57},end:{line:13,column:66}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="tablecolors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-table-colors" />\n          <label for="element-restrictions-table-colors">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:18,column:57},end:{line:18,column:108}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="tablecolors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-table-colors-library" />\n          <label for="element-restrictions-table-colors-library">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:27,column:65},end:{line:28,column:62}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="table_text_color">\n    <input tabindex="-1" type="checkbox" name="table_text_color" id="element-restrictions-table_text_color" />\n    <label for="element-restrictions-table_text_color">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.template.permission.table_text_color",{name:"t",hash:{},data:o,loc:{start:{line:39,column:55},end:{line:40,column:64}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="textcolors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-text-colors" />\n          <label for="element-restrictions-text-colors">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:45,column:56},end:{line:45,column:107}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="textcolors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-text-colors-library" />\n          <label for="element-restrictions-text-colors-library">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:54,column:64},end:{line:55,column:62}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:65,column:11},end:{line:65,column:50}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"basicPermissions"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:67,column:6},end:{line:72,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>"},useData:!0})},{"hbsfy/runtime":1024}],527:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js");var r=e("./table-type.hbs"),o=e("./abstract-type");t.exports=o.extend({type:"table",toggleSectionEvent:function(e){$(e.currentTarget).is("#element-restrictions-table-colors:checked")&&(this.tablecolorsListView.getData().length||this.tablecolorsListView.addElement("#000000"),this.$el.find("#element-restrictions-table-colors-library:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-table-colors-library:checked")&&(this.tablecolorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-table-colors:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-text-colors:checked")&&(this.textcolorsListView.getData().length||this.textcolorsListView.addElement("#000000"),this.$el.find("#element-restrictions-text-colors-library:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-text-colors-library:checked")&&(this.textcolorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-text-colors:checked").trigger("click").prop("checked",!1)),o.prototype.toggleSectionEvent.apply(this,arguments)},_renderRestrictions:function(e,t){return"tablecolors"===t&&e[t]&&_(e[t].list).each(this.tablecolorsListView.addElement),"tablecolors-library"===t&&e[t]&&this.tablecolorsLibraryView.setLibraryPaletteRestriction(e[t]),"textcolors"===t&&e[t]&&_(e[t].list).each(this.textcolorsListView.addElement),"textcolors-library"===t&&e[t]&&this.textcolorsLibraryView.setLibraryPaletteRestriction(e[t]),o.prototype._renderRestrictions.apply(this,arguments)},getOptionValue:function(e){return e.is(".element-list")&&"tablecolor"===e.data("uuid")?this.tablecolorsListView.getData():e.is(".element-list")&&"textcolor"===e.data("uuid")?this.textcolorsListView.getData():o.prototype.getOptionValue.apply(this,arguments)},getPermissionObject:function(e){return{name:e,tag:"tool.restrictions.template.permission."+e}},render:function(){var e=["table_position","table_rotation","table_duplication","table_deletion","table_size","table_opacity"].map(this.getPermissionObject),t=["table_edit","table_content","table_resize","table_merge_split","table_row_column","table_object_style","table_text_style","table_z_index"].map(this.getPermissionObject);this.$el.html(r({basicPermissions:e,tablePermissions:t})),this.initColorsList("table"),this.initLibraryColors("table"),this.initColorsList("text"),this.initLibraryColors("text"),this.renderRestrictions()}})},{"./abstract-type":505,"./table-type.hbs":526,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870}],528:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <li>\n                <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:112,column:59},end:{line:112,column:67}}}):i)+'" id="element-restrictions-swearing-'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:112,column:103},end:{line:112,column:111}}}):i)+'" />\n                <label for="element-restrictions-swearing-'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:113,column:58},end:{line:113,column:66}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:113,column:68},end:{line:113,column:78}}}):i)+"</label>\n              </li>\n"},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:153,column:53},end:{line:153,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:153,column:90},end:{line:153,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:154,column:43},end:{line:154,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:154,column:55},end:{line:154,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="text_change_content">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-text-content" />\n    <label for="element-restrictions-text-content">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.template.permission.text_change_content",{name:"t",hash:{},data:o,loc:{start:{line:5,column:51},end:{line:5,column:116}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-any" checked />\n          <label for="element-restrictions-any">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.any",{name:"t",hash:{},data:o,loc:{start:{line:10,column:48},end:{line:10,column:90}}}))+'</label>\n        </div>\n      </li>\n       <li>\n        <div class="restrictions group" data-name="character_number" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-character_number" />\n          <label for="element-restrictions-character_number">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.character_number",{name:"t",hash:{},data:o,loc:{start:{line:16,column:61},end:{line:16,column:116}}}))+'</label>\n          <ul class="options" data-negatives-allowed="false">\n            <div class="clean-margin">\n             <li class="col-half">\n                <input tabindex="-1" name="min" type="number" min="0" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.min_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:20,column:83},end:{line:20,column:137}}}))+'">\n              </li><li class="col-half">\n                <input tabindex="-1" name="max" type="number" min="0" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.max_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:22,column:83},end:{line:22,column:137}}}))+'">\n              </li>\n            </div>\n          </ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="numeric" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-numeric" />\n          <label for="element-restrictions-numeric">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.numeric",{name:"t",hash:{},data:o,loc:{start:{line:31,column:52},end:{line:31,column:98}}}))+'</label>\n          <ul class="options" data-negatives-allowed="true">\n            <div class="clean-margin">\n              <li class="col-half">\n                <input tabindex="-1" name="min" type="number" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.min_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:35,column:75},end:{line:35,column:129}}}))+'">\n              </li><li class="col-half">\n                <input tabindex="-1" name="max" type="number" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.max_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:37,column:75},end:{line:37,column:129}}}))+'">\n              </li>\n            </div>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="dictionary" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-dictionary" />\n          <label for="element-restrictions-dictionary">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.dictionary",{name:"t",hash:{},data:o,loc:{start:{line:47,column:55},end:{line:47,column:104}}}))+'</label>\n          <ul class="options">\n            <li>\n              <input tabindex="-1" class="dictionary" type="text" name="list" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.dictionary_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:50,column:91},end:{line:50,column:152}}}))+'">\n            </li>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="date" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-date" />\n          <label for="element-restrictions-date">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.date",{name:"t",hash:{},data:o,loc:{start:{line:59,column:49},end:{line:59,column:92}}}))+'</label>\n          <ul class="options">\n            <li>\n              <input tabindex="-1" name="dateformat" type="text" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.date_format_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:62,column:78},end:{line:62,column:140}}}))+'">\n            </li>\n            <li>\n              <input tabindex="-1" name="daterange" type="text" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.date_availability_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:65,column:77},end:{line:65,column:145}}}))+'">\n            </li>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="currencies" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-currencies" />\n          <label for="element-restrictions-currencies">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.currencies",{name:"t",hash:{},data:o,loc:{start:{line:74,column:55},end:{line:74,column:104}}}))+'</label>\n\n          <ul class="options" data-negatives-allowed="false">\n            <div class="clean-margin">\n              <li class="number">\n                <input tabindex="-1" name="min" min="0" type="number" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.min_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:79,column:83},end:{line:79,column:137}}}))+'">\n              </li><li class="number">\n                <input tabindex="-1" name="max" min="0" type="number" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.max_placeholder",{name:"t",hash:{},data:o,loc:{start:{line:81,column:83},end:{line:81,column:137}}}))+'">\n              </li><li class="currency">\n                <div class="select-wrapper">\n                  <select tabindex="-1" name="currency" class="options">\n                    <option value="$">Dollar $</option>\n                    <option value="€">Euro €</option>\n                    <option value="¥">Yen / Yuan ¥</option>\n                    <option value="£">Pound £</option>\n                    <option value="₩">Won ₩</option>\n                  </select>\n                </div>\n              </li>\n            </div>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="email" data-radiogroup="content-restriction">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-email" />\n          <label for="element-restrictions-email">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.email",{name:"t",hash:{},data:o,loc:{start:{line:101,column:50},end:{line:101,column:94}}}))+'</label>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="swearing" data-radiogroup="content-restriction" data-field="filter">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-swearing" />\n          <label for="element-restrictions-swearing">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.text.swearing",{name:"t",hash:{},data:o,loc:{start:{line:108,column:53},end:{line:108,column:100}}}))+'</label>\n          <ul class="options">\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"swearing"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:110,column:12},end:{line:115,column:21}}}))?i:"")+'          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="color">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-color-content"/>\n    <label for="element-restrictions-color-content">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.background.color",{name:"t",hash:{},data:o,loc:{start:{line:124,column:52},end:{line:124,column:102}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="colors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors"/>\n          <label for="element-restrictions-colors">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:129,column:51},end:{line:129,column:102}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="colors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors-library"/>\n          <label for="element-restrictions-colors-library">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:138,column:59},end:{line:139,column:62}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label for="element-restrictions-basic">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:149,column:44},end:{line:149,column:83}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"basic"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:151,column:6},end:{line:156,column:15}}}))?i:"")+'    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="text_highlight">\n    <input tabindex="-1" type="checkbox" name="text_highlight" id="element-restriction-text_highlight"/>\n    <label for="element-restriction-text_highlight">\n      '+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.template.permission.text_highlight",{name:"t",hash:{},data:o,loc:{start:{line:163,column:6},end:{line:163,column:66}}}))+'\n    </label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="highlightcolors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-highlight-colors"/>\n          <label for="element-restrictions-highlight-colors">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:169,column:61},end:{line:169,column:112}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="highlightcolors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-highlight-colors-library"/>\n          <label for="element-restrictions-highlight-colors-library">\n            '+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:179,column:12},end:{line:179,column:66}}}))+'</label>\n          <ul class="options">\n            <li></li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],529:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.parse-float.js");var o=r(e("@babel/runtime/helpers/defineProperty"));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s=e("./text-type.hbs"),a=e("./abstract-type"),l=[{id:"en",name:"English"},{id:"es",name:"español"},{id:"ru",name:"Русский"},{id:"pt",name:"português"},{id:"de",name:"Deutsch"},{id:"nl",name:"Nederlands"},{id:"fr",name:"français"},{id:"it",name:"Italiano"}];t.exports=a.extend({type:"text",basicHide:["text_add","text_change_content","text_colour","color","highlightcolor"],storedDateFormat:"MM/DD/YY",events:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({'change input[name="list"]':"resizeListEvent",'keydown .restrictions.group[data-name="character_number"] input':"toggleRestrictionEvent",'keydown .restrictions.group[data-name="numeric"] input':"toggleRestrictionEvent",'keydown .restrictions.group[data-name="currencies"] input':"toggleRestrictionEvent",'change input[name="dateformat"]':"changeFormatEvent",'apply.daterangepicker input[name="daterange"]':"selectDateRangeEvent",'cancel.daterangepicker input[name="daterange"]':"clearDateRangeEvent"},a.prototype.events),toggleSectionEvent:function(e){$(e.currentTarget).is("#element-restrictions-colors:checked")&&(this.colorsListView.getData().length||this.colorsListView.addElement(this.selection.color),this.$el.find("#element-restrictions-colors-library:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-colors-library:checked")&&(this.colorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-colors:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-highlight-colors:checked")&&(this.highlightcolorsListView.getData().length||this.highlightcolorsListView.addElement(this.selection.color),this.$el.find("#element-restrictions-highlight-colors-library:checked").trigger("click").prop("checked",!1)),$(e.currentTarget).is("#element-restrictions-highlight-colors-library:checked")&&(this.highlightcolorsLibraryView.setLibraryPaletteRestriction({palette:0}),this.$el.find("#element-restrictions-highlight-colors:checked").trigger("click").prop("checked",!1)),a.prototype.toggleSectionEvent.apply(this,arguments)},resizeListEvent:function(e){var t=$(e.currentTarget);this.toggleRestrictionsGroup(t.closest(".restrictions.group"),!0)},changeFormatEvent:function(){this.applyDateFormat()},selectDateRangeEvent:function(){this.applyDateFormat().trigger("change")},clearDateRangeEvent:function(){this.$el.find('input[name="daterange"]').val("").trigger("change")},applyDateFormat:function(){var e=this.$el.find('input[name="dateformat"]').val()||this.storedDateFormat,t=this.$el.find('input[name="daterange"]'),n=t.data("daterangepicker"),r=n.endDate.format(e),o=n.startDate.format(e);return n.locale.format=e,t.val(o+" ~ "+r),t},render:function(){var e=_(this.groups).find((function(e){return e.permissions&&e.permissions.template}));if(e){var t=_.chain(e.permissions.template).map((function(e,t){return{name:t,tag:"tool.restrictions.template.permission."+t}})).filter((function(e){return this.basicHide.indexOf(e.name)<0}),this).filter((function(e){return e.name.match(/^text_/)})).value();this.$el.html(s({basic:t.filter((function(e){return"text_highlight"!==e.name})),swearing:l})),this.initDictionary(),this.initDateFormat(),this.initDateRange(),this.initColorsList(),this.initLibraryColors(),this.initColorsList("highlight"),this.initLibraryColors("highlight"),this.renderRestrictions(),this.setMinMaxFieldValues()}},initDictionary:function(){var e=this.$el.find('input[name="list"]'),t=e.closest(".restrictions.group");e.tagsinput({confirmKeys:[13,9,44]}),e.tagsinput("input").attr("tabindex",e.attr("tabindex")).on("keydown",(function(t){if(9===t.which){var n=$(this).val();_.defer(_.bind((function(){e.tagsinput("focus"),$(this).val(n),$(this).trigger("keypress")}),this))}})),e.on("change",_.bind(this.toggleRestrictionsGroup,this,t,!0)),t.children("input").is(":checked")&&this.toggleRestrictionsGroup(t,!0)},initDateFormat:function(){this.$el.find('input[name="dateformat"]').typeahead({highlight:!0,minLength:0,source:["LL","DD-MM-YYYY","DD/MM/YY","MM/DD/YYYY","YYYY-MM-DD","YY-MM-DD"]})},initDateRange:function(){this.$el.find('input[name="daterange"]').daterangepicker({autoUpdateInput:!1,parentEl:this.$el})},_renderRestrictions:function(e,t){return"date"===t?this.renderDateRestrictions(e):"dictionary"===t?this.renderDictionaryRestrictions(e):"swearing"===t?this.renderSwearingRestrictions(e):"character_number"===t?this.renderCharcterNumberRestrictions(e,t):("colors"===t&&e[t]&&_(e[t].list).each(this.colorsListView.addElement),"colors-library"===t&&e[t]&&this.colorsLibraryView.setLibraryPaletteRestriction(e[t]),"highlightcolors"===t&&e[t]&&_(e[t].list).each(this.highlightcolorsListView.addElement),"highlightcolors-library"===t&&e[t]&&this.highlightcolorsLibraryView.setLibraryPaletteRestriction(e[t]),a.prototype._renderRestrictions.apply(this,arguments))},renderSwearingRestrictions:function(e){if(e.swearing){var t=e.swearing&&e.swearing.filter,n=this.$el.find('.restrictions.group[data-name="swearing"]');n.children('input[type="checkbox"]').prop("checked",!0),_.each(t,(function(e){n.find('input[name="'+e+'"]').prop("checked",!0)}))}},renderCharcterNumberRestrictions:function(e){if(e.character_number){var t=e.character_number&&e.character_number.min,n=e.character_number&&e.character_number.max,r=this.$el.find('.restrictions.group[data-name="character_number"]');r.children('input[type="checkbox"]').prop("checked",e.character_number),r.find('input[type="number"][name="min"]').val(t).data({value:t}),r.find('input[type="number"][name="max"]').val(n).data({value:n})}},renderDictionaryRestrictions:function(e){if(e.dictionary){var t=e.dictionary&&e.dictionary.list,n=this.$el.find('.restrictions.group[data-name="dictionary"]'),r=n.find('input[name="list"]');n.children('input[type="checkbox"]').prop("checked",!0),_.each(t,(function(e){r.tagsinput("add",e)}))}},renderDateRestrictions:function(e){var t=e.date;if(t){var n=this.$el.find('.restrictions.group[data-name="date"]'),r=n.find('input[name="daterange"]').data("daterangepicker");n.children('input[type="checkbox"]').prop("checked",t),n.find('input[name="dateformat"]').val(t.dateformat),t.daterange&&(r.locale.format=this.storedDateFormat,r.setStartDate(t.daterange.start),r.setEndDate(t.daterange.end),this.applyDateFormat())}},toggleRestrictionEvent:function(e){var t=this;e.stopPropagation();var n=$(e.currentTarget),r=n.closest(".group.content").addClass("disabled");_.debounce((function(){var o=n.attr("name");if(n.is('[type="number"]')&&("min"===o||"max"===o)){var i=n.closest("ul.options");!!!i.data("negatives-allowed")&&n.val(Math.abs(n.val())),t.setMinMaxFieldValues(i)}n.closest(".restrictions.group").is('[data-name="swearing"]')?t.persistOptionRestriction(n.closest(".restrictions.group").children("input")):a.prototype.toggleRestrictionEvent.call(t,e),r.removeClass("disabled")}),500)()},getOptionValue:function(e){if(e.is(".element-list")&&"color"===e.data("uuid"))return this.colorsListView.getData();if(e.is(".element-list")&&"highlightcolor"===e.data("uuid"))return this.highlightcolorsListView.getData();if(e.is('input[name="daterange"]'))return e.val()?{end:e.data("daterangepicker").endDate.format(this.storedDateFormat),start:e.data("daterangepicker").startDate.format(this.storedDateFormat)}:null;if(e.is('input[name="list"]'))return e.tagsinput("items");if(e.is('input[name="filter"]'))return _.pluck(e.tagsinput("items"),"id");if(e.closest(".restrictions.group").is('[data-name="swearing"]')){var t=e.closest(".restrictions.group").find("ul.options input");return _.compact(_.map(t,(function(e){return $(e).is(":checked")&&$(e).attr("name")})))}return a.prototype.getOptionValue.apply(this,arguments)},setMinMaxFieldValues:function(e){if(e){var t=e.find('input[name="min"]')[0],n=e.find('input[name="max"]')[0],r=parseFloat(t.value),o=parseFloat(n.value);r>o&&(n.value=r),r<o&&this.persistOptionRestriction($(n)),r&&n.setAttribute("min",r||"")}else{var i=document.querySelector("#tabRestrictions").querySelectorAll('input[type="checkbox"]'),s=["element-restrictions-character_number","element-restrictions-numeric","element-restrictions-currencies"];i.forEach((function(e){if(s.includes(e.id)&&e.checked){var t=e.parentElement.querySelector('input[name="min"]'),n=e.parentElement.querySelector('input[name="max"]');n.value<=t.value&&(n.value=t.value,n.setAttribute("min",t.value),t.setAttribute("min",t.value))}}))}},closeRestrictionsGroup:function(e){if(a.prototype.closeRestrictionsGroup.apply(this,arguments),e.data("radiogroup")){var t=this.$el.find('.restrictions.group[data-radiogroup="'+e.data("radiogroup")+'"] > input:checked');t.length||this.$el.find("#element-restrictions-any").prop("checked",!0)}}})},{"./abstract-type":505,"./text-type.hbs":528,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],530:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:78,column:53},end:{line:78,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:78,column:90},end:{line:78,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:79,column:43},end:{line:79,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:79,column:55},end:{line:79,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="vector_replace">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-vector-replace" />\n    <label for="element-restrictions-vector-replace">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.icon_replace",{name:"t",hash:{},data:o,loc:{start:{line:5,column:53},end:{line:5,column:111}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="source">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-source" />\n          <label for="element-restrictions-source">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.icon_list",{name:"t",hash:{},data:o,loc:{start:{line:10,column:51},end:{line:10,column:101}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div class="restrictions group" data-field="vector_position">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-vector-position" />\n    <label for="element-restrictions-vector-position">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.vector_position",{name:"t",hash:{},data:o,loc:{start:{line:18,column:54},end:{line:18,column:115}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="margin">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-margin" />\n          <label for="element-restrictions-margin">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.margin",{name:"t",hash:{},data:o,loc:{start:{line:23,column:51},end:{line:23,column:98}}}))+'</label>\n          <ul class="options">\n            <li>\n              <div class="slider"></div>\n              <input tabindex="-1" name="size" value="0" type="number" min="0" max="'+c("function"==typeof(s=null!=(s=u(n,"max_margin")||(null!=t?u(t,"max_margin"):t))?s:l)?s.call(a,{name:"max_margin",hash:{},data:o,loc:{start:{line:27,column:84},end:{line:27,column:100}}}):s)+'">\n            </li>\n          </ul>\n        </div>\n      </li>\n\n      <li>\n        <div class="restrictions group" data-name="movement">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-movement" />\n          <label for="element-restrictions-movement">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement",{name:"t",hash:{},data:o,loc:{start:{line:36,column:53},end:{line:36,column:102}}}))+'</label>\n          <ul class="options">\n            <li>\n              <input tabindex="-1" name="horizontal" type="checkbox" id="element-restrictions-horizontal-move"   />\n              <label for="element-restrictions-horizontal-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_h",{name:"t",hash:{},data:o,loc:{start:{line:40,column:64},end:{line:40,column:115}}}))+'</label>\n            </li>\n            <li>\n              <input tabindex="-1" name="vertical" type="checkbox" id="element-restrictions-vertical-move"   />\n              <label for="element-restrictions-vertical-move">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.movement_v",{name:"t",hash:{},data:o,loc:{start:{line:44,column:62},end:{line:44,column:113}}}))+'</label>\n            </li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-field="color">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-color-content" />\n    <label for="element-restrictions-color-content">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.template.permission.vector_colour",{name:"t",hash:{},data:o,loc:{start:{line:54,column:52},end:{line:54,column:111}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="colors">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors" />\n          <label for="element-restrictions-colors">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.color_list",{name:"t",hash:{},data:o,loc:{start:{line:59,column:51},end:{line:59,column:102}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n      <li>\n        <div class="restrictions group" data-name="colors-library">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-colors-library" />\n          <label for="element-restrictions-colors-library">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.common.color_library",{name:"t",hash:{},data:o,loc:{start:{line:66,column:59},end:{line:66,column:113}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label for="element-restrictions-basic">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:74,column:44},end:{line:74,column:83}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"basic"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:76,column:6},end:{line:81,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],531:[function(e,t,n){"use strict";var r=e("./logo-type");t.exports=r.extend({type:"vector",template:e("./vector-type.hbs"),ElementListView:e("./element-list/vectors-view"),basicHide:["vector_add","vector_replace","vector_position","vector_colour"],getTypeFilterRegex:function(){return/^vector_/}})},{"./element-list/vectors-view":516,"./logo-type":525,"./vector-type.hbs":530}],532:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\n          <input tabindex="-1" type="checkbox" name="'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:22,column:53},end:{line:22,column:63}}}):i)+'" id="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:22,column:90},end:{line:22,column:100}}}):i)+'" />\n          <label for="template-restriction-'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:23,column:43},end:{line:23,column:53}}}):i)+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:23,column:55},end:{line:23,column:65}}}))+"</label>\n        </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="wrapper">\n\n  <div class="restrictions group" data-field="video_replace">\n    <input tabindex="-1" type="checkbox" id="element-restrictions-video-replace" />\n    <label for="element-restrictions-video-replace">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.template.permission.video_replace",{name:"t",hash:{},data:o,loc:{start:{line:5,column:52},end:{line:5,column:111}}}))+'</label>\n    <ul class="options">\n      <li>\n        <div class="restrictions group" data-name="source">\n          <input tabindex="-1" type="checkbox" id="element-restrictions-source" />\n          <label for="element-restrictions-source">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.common.video_list",{name:"t",hash:{},data:o,loc:{start:{line:10,column:51},end:{line:10,column:102}}}))+'</label>\n          <ul class="options"><li></li></ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div class="restrictions group" data-name="basic">\n    <label>'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"tool.restrictions.element.basic",{name:"t",hash:{},data:o,loc:{start:{line:18,column:11},end:{line:18,column:50}}}))+'</label>\n    <ul class="options">\n'+(null!=(i=c(n,"each").call(s,null!=t?c(t,"basic"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:6},end:{line:25,column:15}}}))?i:"")+"    </ul>\n  </div>\n\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],533:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.function.bind.js");var r=e("./video-type.hbs"),o=e("./abstract-type"),i=e("./element-list/videos-view"),s=e("../../../../facade/design/design");t.exports=o.extend({type:"video",basicHide:["video_add","video_replace"],toggleSectionEvent:function(e){$(e.currentTarget).is("#element-restrictions-source:checked")&&!this.sourceListView.getData().length&&this.sourceListView.addElement({source:this.selection.source,thumbnail:this.selection.thumbnail}),o.prototype.toggleSectionEvent.apply(this,arguments)},render:function(){var e=_(this.groups).find((function(e){return e.permissions&&e.permissions.template}));if(e){var t=_.chain(e.permissions.template).map((function(e,t){return{name:t,tag:"tool.restrictions.template.permission."+t}})).filter((function(e){return this.basicHide.indexOf(e.name)<0}),this).filter((function(e){return e.name.match(/^video_/)})).value();this.$el.html(r({basic:t})),this.initSourceList(),this.renderRestrictions()}},getOptionValue:function(e){return e.is(".element-list")?this.sourceListView.getData():o.prototype.getOptionValue.apply(this,arguments)},_renderRestrictions:function(e,t){"source"==t&&e[t]&&_(e[t].list).each(this.sourceListView.addElement),o.prototype._renderRestrictions.apply(this,arguments)},initSourceList:function(){this.sourceListView&&this.sourceListView.remove(),this.sourceListView=new i({el:this.$el.find('.restrictions.group[data-name="source"] li'),type:"video"}),this.sourceListView.on("change",_.bind((function(){var e=this.sourceListView.$el.find("input");this.persistOptionRestriction(e),this.toggleRestrictionsGroup(e.closest(".restrictions.group"),!0)}),this)),this.sourceListView.on("apply",(function(e){s.set(e)}))}})},{"../../../../facade/design/design":47,"./abstract-type":505,"./element-list/videos-view":517,"./video-type.hbs":532,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],534:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <br><i class="desygner-icon-approval" style="vertical-align: middle;"></i> '+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.template.request",{name:"t",hash:{},data:o,loc:{start:{line:9,column:79},end:{line:9,column:121}}}))+"\n"},3:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <dt>\n      <a class="btn btn-accordion '+c("function"==typeof(s=null!=(s=u(n,"key")||(null!=t?u(t,"key"):t))?s:l)?s.call(a,{name:"key",hash:{},data:o,loc:{start:{line:17,column:34},end:{line:17,column:43}}}):s)+'" data-key="'+c("function"==typeof(s=null!=(s=u(n,"key")||(null!=t?u(t,"key"):t))?s:l)?s.call(a,{name:"key",hash:{},data:o,loc:{start:{line:17,column:55},end:{line:17,column:64}}}):s)+'" data-type="'+c("function"==typeof(s=null!=(s=u(n,"type")||(null!=t?u(t,"type"):t))?s:l)?s.call(a,{name:"type",hash:{},data:o,loc:{start:{line:17,column:77},end:{line:17,column:87}}}):s)+'">\n        <i class="fa fa-ellipsis-v main main"></i>\n        <span class="name">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,null!=t?u(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:19,column:27},end:{line:19,column:37}}}))+'</span>\n      </a>\n\n      <ul class="restrictions-list">\n'+(null!=(i=u(n,"each").call(a,null!=t?u(t,"permissions"):t,{name:"each",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:23,column:8},end:{line:31,column:17}}}))?i:"")+"      </ul>\n    </dt>\n"},4:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <li>\n"+(null!=(i=u(n,"if").call(a,null!=t?u(t,"request_name"):t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:25,column:12},end:{line:27,column:19}}}))?i:"")+'            <input type="checkbox" class="basic-option" name="'+c("function"==typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:l)?s.call(a,{name:"name",hash:{},data:o,loc:{start:{line:28,column:62},end:{line:28,column:72}}}):s)+'" />\n            <label>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,null!=t?u(t,"tag"):t,{name:"t",hash:{},data:o,loc:{start:{line:29,column:19},end:{line:29,column:29}}}))+"</label>\n          </li>\n"},5:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <input type="checkbox" class="request-option" name="'+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"request_name")||(null!=t?s(t,"request_name"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"request_name",hash:{},data:o,loc:{start:{line:26,column:66},end:{line:26,column:84}}}):i)+'" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},p='<div class="group">\n  <h4>'+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.restrictions.template.title",{name:"t",hash:{},data:o,loc:{start:{line:2,column:6},end:{line:2,column:46}}}))+"</h4>\n  <p>\n    "+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.restrictions.template.description",{name:"t",hash:{},data:o,loc:{start:{line:4,column:4},end:{line:4,column:50}}}))+'\n    <br><i class="fa fa-check-circle-o"></i> '+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.restrictions.template.can",{name:"t",hash:{},data:o,loc:{start:{line:5,column:45},end:{line:5,column:83}}}))+'\n    <br><i class="fa fa-ban"></i> '+u((d(n,"t")||t&&d(t,"t")||c).call(l,"tool.restrictions.template.cannot",{name:"t",hash:{},data:o,loc:{start:{line:6,column:34},end:{line:6,column:75}}}))+"\n\n";return s=null!=(s=d(n,"hasWorkflow")||(null!=t?d(t,"hasWorkflow"):t))?s:c,a={name:"hasWorkflow",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:4},end:{line:10,column:20}}},i="function"==typeof s?s.call(l,a):s,d(n,"hasWorkflow")||(i=e.hooks.blockHelperMissing.call(t,i,a)),null!=i&&(p+=i),p+'  </p>\n</div>\n\n<div class="wrapper">\n'+(null!=(i=d(n,"each").call(l,null!=t?d(t,"categories"):t,{name:"each",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:15,column:2},end:{line:34,column:11}}}))?i:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],535:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.string.replace.js");var o=r(e("../../../factory/workflow")),i=e("../../../factory/company"),s=r(e("../../../factory/restrictions")),a=e("./template-restrictions.hbs");t.exports=Backbone.mixin(Backbone.View.extend({events:{"click dt > a":"categoryToggleEvent","change input":"changePermissionEvent","click input.basic-option + label":"toggleOptionEvent"},toggleOptionEvent:function(e){var t=$(e.currentTarget).siblings("input.basic-option"),n=$(e.currentTarget).siblings("input.request-option");function r(e){switch(e){case"restricted":t.prop("checked",!1).trigger("change"),n.prop("checked",!1).trigger("change");break;case"under_request":t.prop("checked",!1).trigger("change"),n.prop("checked",!0).trigger("change");break;case"permited":t.prop("checked",!0).trigger("change"),n.prop("checked",!1).trigger("change")}}n.length?n.prop("checked")?r("restricted"):t.prop("checked")?r("under_request"):r("permited"):t.prop("checked",!t.prop("checked")).trigger("change")},categoryToggleEvent:function(e){var t,n=$(e.currentTarget).closest("dt"),r=n.hasClass("active");function o(e){e.removeClass("active").removeAttr("style")}r&&o(n),r||(t=0,n.contents().each((function(){1===this.nodeType&&(t+=$(this).outerHeight(!0))})),n.addClass("active").height(t),n.siblings(".active").each((function(){o($(this))}))),this.trigger("update")},handleEditAnimationVisibility:function(e,t){if("function_animation_file"===e){var n=document.querySelector("[name=function_edit_animation_file]");n&&n.parentElement&&(n.parentElement.style.visibility=t?"visible":"hidden")}},changePermissionEvent:function(e){var t=e.currentTarget,n=t.getAttribute("name"),r=t.checked;this.handleEditAnimationVisibility(n,r),s.default.setGlobalTemplateRestriction(n,r)},initialize:function(){$.when(i.instance.get(["templates",INKIVE.C.BOOK.encodedId]),i.instance.get(["groups"])).then(_.bind(this.processGroups,this))},processGroups:function(e,t){var n=[];this.groups=t;var r=_(this.groups).find((function(e){return e.permissions&&e.permissions.template}));r&&(this.permissionsList=_(r.permissions.template).map((function(e,t){return{name:t,tag:"tool.restrictions.template.permission."+t}})).filter((function(e){return["logo_colour","logo_stroke"].indexOf(e.name)<0})),n.push({key:"usage",tag:"tool.restrictions.template.categories.usage",permissions:this.getSpecificPermissions(/^function_.*_file$/)}),n.push({key:"web_content",tag:"tool.restrictions.template.categories.web_content",permissions:this.getSpecificPermissions(/function_use_own_images|function_use_desygner_background|function_use_desygner_font|function_use_desygner_vector|function_use_web_images/)}),n.push({key:"adding",tag:"tool.restrictions.template.categories.adding",permissions:this.getSpecificPermissions(/text_add|table_add|image_add|vector_add|logo_add|icon_add|video_add|function_draw/)}),n.push({key:"pages",tag:"tool.restrictions.template.categories.pages",permissions:this.getSpecificPermissions(/function_add_page|function_change_page_order/)}),_.each(["text","table","image","vector","logo","icon","video"],(function(e){n.push({key:e,tag:"tool.restrictions.template.categories."+e,permissions:this.getSpecificPermissions(new RegExp("^"+e+"_(?!add).*"))})}),this)),this.render(n)},getSpecificPermissions:function(e){return this.permissionsList.filter((function(t){return t.name.match(e)}))},render:function(e){o.default.isEnabled().then(_.bind(this._render,this,e,!0),_.bind(this._render,this,e,!1))},_render:function(e,t){var n=this.groups.filter((function(e){return e.permissions}));t&&e.find((function(e){return"usage"===e.key})).permissions.forEach((function(e){e.name.includes("animation")||(e.request_name=e.name.replace("function_","function_request_"))})),this.$el.html(a({hasWorkflow:t,groups:n,categories:e})),this.renderRestrictions(),this.trigger("update")},renderRestrictions:function(){var e=$.Deferred();return s.default.getTemplatePermissions().then(_.bind((function(t){t=_(t).find((function(e){return!e.group})),_.each(t,(function(e,t){this.$el.find('input[name="'+t+'"]').prop("checked",e);var n=document.querySelector("[name=function_edit_animation_file]"),r=document.querySelector("[name=function_animation_file]"),o=null==n?void 0:n.parentElement,i=null==r?void 0:r.parentElement;INKIVE.C.SHOW_ANIMATION||(i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden")),"function_animation_file"===t&&o&&(o.style.visibility=INKIVE.C.SHOW_ANIMATION&&e?"visible":"hidden",o.style.paddingLeft="32px")}),this),e.resolve()}),this)),e.promise()}}),Backbone.Events)},{"../../../factory/company":122,"../../../factory/restrictions":149,"../../../factory/workflow":163,"./template-restrictions.hbs":534,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.for-each.js":964}],536:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <div class="accordion tab-content restrictions active sub-category">\n      <div class="reset-restrictions hidden">\n        <button class="webrand">\n          '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.reset",{name:"t",hash:{},data:o,loc:{start:{line:6,column:10},end:{line:6,column:41}}}))+'\n        </button>\n      </div>\n\n      <div class="simplified-restrictions hidden">\n        <h2>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"editor.controller",{name:"t",hash:{},data:o,loc:{start:{line:11,column:12},end:{line:11,column:37}}}))+'</h2>\n\n        <div class="types">\n          <p>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.description",{name:"t",hash:{},data:o,loc:{start:{line:14,column:13},end:{line:14,column:61}}}))+'</p>\n\n          <ul>\n            <li>\n              <button class="webrand" data-type="tight" data-popover="tooltip" data-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.tight.tooltip",{name:"t",hash:{},data:o,loc:{start:{line:18,column:91},end:{line:18,column:141}}}))+'">\n                <i class="fa fa-hand-rock-o"></i>\n                <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.tight.button",{name:"t",hash:{},data:o,loc:{start:{line:20,column:22},end:{line:20,column:71}}}))+'</span>\n              </button>\n            </li>\n\n            <li>\n              <button class="webrand" data-type="moderate" data-popover="tooltip" data-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.moderate.tooltip",{name:"t",hash:{},data:o,loc:{start:{line:25,column:94},end:{line:25,column:147}}}))+'">\n                <i class="fa fa-hand-stop-o"></i>\n                <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.moderate.button",{name:"t",hash:{},data:o,loc:{start:{line:27,column:22},end:{line:27,column:74}}}))+'</span>\n              </button>\n            </li>\n\n            <li>\n              <button class="webrand" data-type="loose" data-popover="tooltip" data-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.loose.tooltip",{name:"t",hash:{},data:o,loc:{start:{line:32,column:91},end:{line:32,column:141}}}))+'">\n                <i class="fa fa-hand-peace-o"></i>\n                <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.loose.button",{name:"t",hash:{},data:o,loc:{start:{line:34,column:22},end:{line:34,column:71}}}))+'</span>\n              </button>\n            </li>\n          </ul>\n\n          <p class="base">\n            <span class="type"></span>\n            <span class="body"></span>\n          </p>\n        </div>\n\n        <div class="description out">\n          <h4></h4>\n          <p class="base"></p>\n          <p>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.defaults",{name:"t",hash:{},data:o,loc:{start:{line:48,column:13},end:{line:48,column:58}}}))+'</p>\n\n          <button class="webrand apply">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.apply",{name:"t",hash:{},data:o,loc:{start:{line:50,column:40},end:{line:50,column:82}}}))+'</button>\n          <button class="webrand back">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"tool.restrictions.simplified.back",{name:"t",hash:{},data:o,loc:{start:{line:51,column:39},end:{line:51,column:80}}}))+'</button>\n        </div>\n      </div>\n\n      <div class="element-restrictions hidden"></div>\n      <div class="template-restrictions hidden"></div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],537:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var s,a=e("./template.hbs"),l=e("../components/mixins/scrollable"),c=e("../../../facade/editor/editor"),u=e("./element-restrictions"),d=e("./template-restrictions"),p=e("../../../factory/restrictions"),h=e("../../../factory/company").instance;t.exports=Backbone.mixin(Backbone.View.extend({events:{"click .reset-restrictions button":"resetRestrictionsEvent","click .simplified-restrictions .types button":"showDescriptionEvent","click .simplified-restrictions .description button.back":"showTypesEvent","click .simplified-restrictions .description button.apply":"applyRestrictionsEvent"},resetRestrictionsEvent:function(){INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("modal.alert.reset_restrictions")}),{callback:[_.bind((function(){p.removeAll();var e=this.$el.find(".simplified-restrictions");e.find(".description").addClass("out"),e.find(".types").removeClass("out"),this.toggleAdvancedRestrictions(!1)}),this),$.noop]})},showDescriptionEvent:function(e){var t=INKIVE.TranslateHelper.translate,n="tool.restrictions.simplified.",r=$(e.currentTarget).data("type"),o=this.$el.find(".simplified-restrictions");this.selectedRestrictions=r,this.toggleRestrictionButtons(),o.find(".description h4").text(t(n+r+".title")),o.find(".description p.base").html(t(n+r+".description")),o.find(".types, .description").toggleClass("out"),document.querySelector(".description p:not(.base)").innerHTML=t(n+"defaults")},showTypesEvent:function(){this.showTypes(),this.toggleRestrictionButtons()},applyRestrictionsEvent:function(){INKIVE.Modal.loader(this.$el.find(".tab-content")),this.$el.find(".simplified-restrictions").addClass("hidden"),this.toggleRestrictionButtons(),p.createGlobalTemplateRestriction(this.selectedRestrictions).then(_.bind((function(){INKIVE.Modal.loaderClose(this.$el.find(".tab-content")),this.toggleAdvancedRestrictions(!0),this.templateRestrictionsView.renderRestrictions().then(this.elementRestrictionsView.refresh),INKIVE.Tool.getInstance().editor.canvas.clearSelection()}),this))},initialize:function(){var e;_.bindAll(this,"setSelection","onInnerViewUpdate"),this.scrollRefresh=_.debounce(_.bind(this.initScroll,this),1e3),document.querySelector('[href="#tabRestrictions"]').parentNode.style.display="",null===(e=document.querySelector('[href="#tabSimplifiedRestrictions"]'))||void 0===e||e.parentNode.remove()},show:function(){this.$el.find(".template-restrictions").length?this.templateRestrictionsView.renderRestrictions().then(this.elementRestrictionsView.refresh).then(_.bind(this.refreshElementSelection,this)):h.initialize().then(_.bind(this.render,this))},refreshElementSelection:function(){var e=c.get("selection");e.length&&(this.setSelection(e),this.elementRestrictionsView.setSelection(e))},render:function(){this.$el.html(a()),INKIVE.Helpers.initTooltips(this.$el),INKIVE.Modal.loader(this.$el.find(".tab-content")),this.afterLoading=_.after(2,_.once(_.bind(this.afterLoadingAll,this))),this.initElementRestrictions(),this.initTemplateRestrictions(),c.on("select",this.setSelection)},initTemplateRestrictions:function(){this.templateRestrictionsView=new d({el:this.$el.find(".template-restrictions")}),this.templateRestrictionsView.on("update",this.onInnerViewUpdate)},initElementRestrictions:function(){this.elementRestrictionsView=new u({el:this.$el.find(".element-restrictions")}),this.elementRestrictionsView.on("update",this.onInnerViewUpdate),c.on("page.move_to",this.elementRestrictionsView.refresh)},setSelection:function(e){this.$el.find(".simplified-restrictions").is(".hidden")&&this.$el.find(".template-restrictions").toggleClass("hidden",1===e.length)},onInnerViewUpdate:function(){this.afterLoading(),this.scrollRefresh(),this.trigger("template-restrictions-updated")},afterLoadingAll:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.getTemplatePermissions().then(_.bind((function(e){INKIVE.Modal.loaderClose(this.$el.find(".tab-content")),e=_(e).find((function(e){return!e.group})),this.toggleAdvancedRestrictions(e),e&&this.templateRestrictionsView.renderRestrictions().then(this.elementRestrictionsView.refresh)}),this));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),toggleAdvancedRestrictions:function(e){this.$el.find(".element-restrictions, .template-restrictions, .reset-restrictions").toggleClass("hidden",!e),this.$el.find(".simplified-restrictions").toggleClass("hidden",!!e)},showTypes:function(){this.$el.find(".simplified-restrictions").find(".types, .description").toggleClass("out")},showPermissionDescription:function(e){var t=INKIVE.TranslateHelper.translate;document.querySelector(".simplified-restrictions .types p.base span.type").innerHTML=e+": ",document.querySelector(".simplified-restrictions .types p.base span.body").innerHTML=t("tool.restrictions.simplified."+e+".description")},toggleRestrictionButtons:function(){document.querySelectorAll('button.webrand[data-popover="tooltip"]').forEach((function(e){return e.classList.toggle("hide")}))}}),l)},{"../../../facade/editor/editor":91,"../../../factory/company":122,"../../../factory/restrictions":149,"../components/mixins/scrollable":334,"./element-restrictions":504,"./template-restrictions":535,"./template.hbs":536,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.bind.js":883,"core-js/modules/web.dom-collections.for-each.js":964}],538:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | search",show:{eventAction:"show"}}},{}],539:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.number.to-fixed.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.replace.js");var r=e("../../../factory/images"),o=e("../../../factory/user-info"),i=e("../../../factory/desygner-api"),s=e("../../../facade/editor/editor"),a=e("../../../factory/company").instance;t.exports=Backbone.View.extend({defaultListQueryParams:{inst:_.now(),from:0,page:1,total:0,limit:INKIVE.C.IS_MOBILE?10:30},prices:null,initialize:function(){_.bindAll(this,"_doSearch","initializeDeferred","genericResultProcessor","addThumbItem","mapShutterstockItem"),this.tool=INKIVE.Tool.getInstance()},initializeDeferred:function(){var e=$.Deferred();if(this.initialized)this.licences?e.resolve():i.get("business/marketplace/licences").then(_.bind((function(t){this.licences=t,e.resolve()}),this));else{var t=i.get("payment/prices/products"),n=i.get("business/marketplace/licences"),r=o.get(),s=a.getCompanyItems("allows_user_upselling");$.when(t,r,n,s).then(_.bind((function(t,n,r,o){this.initialized=!0,this.prices=t,this.licences=r,this.roles=n.roles,this.workspaceAllowsUpselling=o,e.resolve()}),this))}return e.promise()},initSearch:function(e,t,n){this.$elem=$(e).find(".tab-content"),INKIVE.Modal.loader(document.body),this.initializeDeferred().then(_.bind((function(){var r=!1;this.resultProcessor=n,this.$elem.length||(this.$elem=$(e)),this.opts=$.extend(!0,{},this.defaultListQueryParams,{query:"",type:"",isAdmin:!1},t),this.opts.query&&this.$elem.data("query")!==this.opts.query&&(r=!0,this.$elem.data("query",this.opts.query)),$(e).find('input[name="search"]').val(this.$elem.data("query"));var o,i=this.opts.type||$(e).find("li.ui-tabs-active a").attr("data-id");if(i.indexOf("layout")>-1){var s=this.tool.editor.canvas.contentW,a=this.tool.editor.canvas.contentH;i.indexOf("this")>-1?o={format_width:s,format_height:a}:i.indexOf("prop")>-1&&(o={format_aspect:(s/a).toFixed(1)})}i&&this.$elem.data("type")!==i&&(r=!0,this.$elem.data("type",i),o?this.$elem.data("filterData",o):this.$elem.removeData("filterData")),r&&(this.tool.clearTab(e),this.$elem.addThumb(),this.$elem.data("inst",this.opts.inst),this.$elem.data("from",this.opts.from),this.$elem.data("page",this.opts.page),this.$elem.data("total",this.opts.total)),this.tool.initScrollDetect(this.$elem,this._doSearch)}),this))},_getPlanModels:function(){var e=[];return this._hasRole("content2")&&e.push("content2"),this._hasRole("ultimate")?[].concat(e,["ultimate"]):this.workspaceAllowsUpselling?[].concat(e,["enterprise"]):this._hasRole("business")?["business"]:this._hasRole("pro")?["pro"]:e},_hasRole:function(e){return this.roles.includes("ROLE_".concat(e.toUpperCase()))},_doSearch:function(e,t,n){var r=this,o=INKIVE.C.IS_MOBILE?10:30,i=INKIVE.Helpers.getActiveTab(),s=this.$elem.parents(".tab.active").find(".header-links").find(".active").attr("data-key"),a=$("#filter-"+i+"-"+s),l={orientationFilter:u("orientation").map((function(e){return"orientation=".concat(e.getAttribute("name"))})),providersFilter:u("providers").map((function(e){return"provider[]=".concat(e.getAttribute("name"))})),typesFilter:u("types").map((function(e){var t=e.getAttribute("name");if("free"===t||"oneoff"===t)return"model[]=".concat(t,"&model[]=pro");if("plan"===t)return r._getPlanModels().map((function(e){return"model[]=".concat(e)})).join("&");if("upsale"===t)switch(!0){case r._hasRole("ultimate")||r.workspaceAllowsUpselling:case r.workspaceAllowsUpselling&&!r._hasRole("content2"):return"model[]=content2";default:return"model[]=pro"}return""})),q:this.$elem.data("query")||"",from:this.$elem.data("from"),page:this.$elem.data("page"),filters:this.$elem.data("type"),filterData:this.$elem.data("filterData"),where:{active:this.opts.isAdmin?0:1}},c=_.bind((function(n){l&&"mns"===l.filters&&n.neighborhoods&&(n=n.neighborhoods),l&&"mls"===l.filters&&(n={data:JSON.parse(n)});var r=n&&n.data&&n.data.length,o=r+this.$elem.data("from");Array.isArray(n.data)&&(!r||r<1)?(n.data=[],t(),0===parseInt(this.$elem.data("from"))&&this.$elem.html('<label class="title text-center">'+INKIVE.TranslateHelper.translate("common.no_result")+"</label>")):this.resultProcessor?this.resultProcessor(n.data):this.genericResultProcessor(n),n.status&&(200!==n.status||n.totalCount&&o>=n.totalCount)?t():this.opts.skipScrollDetect||(this.$elem.data("from",o),this.$elem.data("page",n.page+1),this.tool.initScroll(this.$elem.parents(".image-list")),e()),INKIVE.Modal.loaderClose(document.body),this.opts.callback&&this.opts.callback()}),this);if(this.opts.url)this.getCustomUrlSearchResult(this.opts.url,l,c,this.opts.authErrorCallback);else{if(this.opts.legacy)return l.limit=o,l.filters=l.filters+" "+this.opts.legacy,void INKIVE.Helpers.api("search/search","GET",l,c);this.getGenericSearchResult(l,c)}function u(e){return Array.from(a.find(".".concat(e,"-filter input:checked")))}},getCustomUrlSearchResult:function(e,t,n,r){var o=t.from,i=null;"kwls"===t.filters&&(i=INKIVE.C.USER.kw_sso_token?{Authorization:"Bearer "+INKIVE.C.USER.kw_sso_token}:null,o++),e+=o,$.ajax({url:e,type:"GET",headers:i,success:function(e){e.error&&e.error.data&&(e=e.error),n(e)},error:function(e){var t=e.responseText||"";(t.match("Unauthorized")||t.match("403"))&&r&&r(),n({data:[]})}})},getGenericSearchResult:function(e,t,n){var r=this,o="&"+e.providersFilter.join("&"),a=1===e.orientationFilter.length?"&"+e.orientationFilter[0]:"",l=e.typesFilter.length>0?"&"+e.typesFilter.join("&"):this.workspaceAllowsUpselling?"&model[]=enterprise&model[]=content2":"",c=e.filters.indexOf("image")>-1?"Image":"Vector",u="business/marketplace/search/"+c+"?search="+e.q+"&page="+e.page+o+a+l;e.from||s.handle("shopping_cart","load_widget"),i.getWithHeaders(u).then((function(o){var i=_.map(o.data,(function(t){var n="Image"===c||t.provider===INKIVE.C.SHUTTERSTOCK,r=t.data.thumb,o=t.data.largeweb;return{collection:n?"image":c.toLowerCase(),page:e.page,data:{source:t.provider,id:t.id,originalData:t,name:t.description,url:n?o.url:r.url,thumb_photo:r.url,thumb_width:r.width,thumb_height:r.height,original_photo:o.url,original_width:o.width,original_height:o.height}}}));n&&(i=n.concat(i)),e.from+i.length<30&&200===o.status?(r.getGenericSearchResult(e,t,i),e.page++):t({data:i,totalCount:parseInt(INKIVE.Helpers.getHeader(o.headers,"x-total-count")),page:parseInt(e.page),status:o.status})}),(function(){t({data:[]})}))},genericResultProcessor:function(e){for(var t=this,n=["pxhere.com/","pikist.com/","publicdomainpictures.net/","wallpaperflare.com/","s.iha.com/"],o=[],i=[],s=[],a=function(a){var l=void 0,c=e.data[a].data;if(_.filter(n,(function(e){return c.original_photo.match(e)})).length)return"continue";switch(e.data[a].collection){case"layout":c.url||(c.url=INKIVE.C.THUMB_NOCOVER),o.push({id:"layout-"+c.id,src:c.url,height:76,data:{version:{thumb:c.url,mobile:c.url,tab:c.url,web:c.url,largeweb:c.url,original:c.url}}});break;case"vector":i.push({id:"vector-"+c.id,src:c.url,thumb_width:c.thumb_width,thumb_height:c.thumb_height,width:c.thumb_width,height:c.thumb_height,data:{changeable:!0,name:c.name,svg_url:c.original_photo,version:{thumb:c.thumb_photo||c.url,mobile:c.url,tab:c.url,web:c.url,largeweb:c.url,original:c.url}}});break;case"image":l={name:c.name,search:!0,version:{thumb:c.thumb_photo,original:c.original_photo}},c.original_photo.match(/photodexia.com/)?(l.original_url=c.original_photo,l.original_width=c.original_width,l.original_height=c.original_height,l.version=r.getAllImageVersions(c.original_photo)):_.contains(e.f,"assetbank")&&(l.loadType="ab",l.originalData={object_id:c.id}),c.source===INKIVE.C.SHUTTERSTOCK&&t.mapShutterstockItem(l,c),r.addImageData(l),s.push({id:"photo-"+c.id,src:c.thumb_photo,width:c.thumb_width||75,height:c.thumb_height||75,data:l});break;default:i.push({id:"vector-"+e.data[a].id,src:c.source.replace(".svg",".png"),data:{changeable:!0,name:c.name,svg_url:c.source,width:75,height:75}})}},l=0;l<e.data.length;l++)a(l);this.addThumbItem([],this.tool.callbackBackgrounds),this.addThumbItem(o,this.tool.callbackLayouts),this.addThumbItem(s,this.tool.callbackImages),this.addThumbItem(i,this.tool.callbackStickers)},addThumbItem:function(e,t){var n=this.tool;n.addThumbItem(this.$elem,e,(function(e,r){_.bind(t,n,e,r)()}))},mapShutterstockItem:function(e,t){var n=t.originalData.marketplace.price_code,o=_.findWhere(this.licences,{licence_id:t.id})||{},i="ROLE_".concat(t.originalData.model.toUpperCase()),s="enterprise"===t.originalData.model&&this.workspaceAllowsUpselling;e.loadType=INKIVE.C.SHUTTERSTOCK,e.price=this.prices[n]||0,e.originalData=t.originalData,e.subscription_image=["pro","business","enterprise","ultimate","content2"].includes(t.originalData.model),e.subscribed_user=e.subscription_image&&(this.roles.includes(i)||s),e.licenced_url=o.resources&&r.getVersionUrl(o.resources[0].data.source,"tab"),e.version={thumb:t.originalData.data.thumb.url,mobile:t.originalData.data.mobile.url,tab:t.originalData.data.tab.url,web:t.originalData.data.web.url,largeweb:t.originalData.data.largeweb.url,original:t.originalData.data.largeweb.url,thumb_width:t.thumb_width,thumb_height:t.thumb_height,original_width:t.original_width,original_height:t.original_height}}})},{"../../../facade/editor/editor":91,"../../../factory/company":122,"../../../factory/desygner-api":123,"../../../factory/images":127,"../../../factory/user-info":161,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.to-fixed.js":890,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932}],540:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("../../../analytics/decorate"),c=e("../images/stock"),u=e("../icons/stock");t.exports=l(e("./analytics/view"),a.extend({type:"search",show:function(){this.$el.find(".tab-content.search").length?this.refresh():this.render()},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:this.isKW=void 0!==INKIVE.C.USER.kw_uid,this.$headerLinks.filter("[data-key=images]").trigger("click");case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),initImagesView:function(){this.registerTabView("images",new c({el:this.$el.find(".tab-content > .images"),simplified:!0,isAssetBankCompany:this.isAssetBankCompany,isKW:this.isKW}))},initIconsView:function(){this.registerTabView("icons",new u({el:this.$el.find(".tab-content > .icons"),simplified:!0,isKW:this.isKW}))}}))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"../icons/stock":436,"../images/stock":458,"./analytics/view":538,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],541:[function(e,t,n){t.exports={style:{image:["image_filter","image_opacity","image_rotation","image_size"],text:["text_rotation","color","text_colour","text_font_size","text_decoration","text_font_family","text_opacity","text_alignment","text_spacing","text_highlight"],video:["video_position","video_size"],logo:["color","logo_size","logo_opacity","logo_rotation"],icon:["color","icon_colour","icon_stroke","icon_size","icon_opacity","icon_rotation"],shape:["vector_stroke","color","vector_colour","vector_size","vector_opacity","vector_rotation"],sticker:["vector_stroke","color","vector_colour","vector_size","vector_opacity","vector_rotation"]},content:{image:["image_crop","image_content","image_deletion"],text:["text_change_content","text_size","text_deletion"],video:["video_deletion","video_flags","video_replace"],vector:["vector_replace","vector_deletion"],logo:["logo_replace","logo_deletion"],icon:["icon_replace","icon_deletion"],shape:["vector_replace","vector_deletion"],sticker:["vector_replace","vector_deletion"]}}},{}],542:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="header">\n          <h3>\n            '+c((d(n,"t")||t&&d(t,"t")||l).call(a,"tool.restrictions.simplified_restrictions.header",{name:"t",hash:{},data:o,loc:{start:{line:7,column:12},end:{line:7,column:69}}}))+"\n            <span>"+c(u(null!=(i=null!=t?d(t,"selected"):t)?d(i,"name"):i,t))+'</span>\n          </h3>\n          <div class="header-subtitle">\n            <icon>\n              <svg>\n                <use xlink:href="#alert-info"></use>\n              </svg>\n            </icon>\n            <div>\n              '+c((d(n,"t")||t&&d(t,"t")||l).call(a,"tool.restrictions.simplified_restrictions.header_subtitle",{name:"t",hash:{},data:o,loc:{start:{line:17,column:14},end:{line:17,column:80}}}))+'\n            </div>\n          </div>\n        </div>\n        <div class="body">\n          <div class="restrictions-container">\n            <div class="restriction-icon">\n              <icon>\n                <svg>\n                  <use xlink:href="#'+c("function"==typeof(s=null!=(s=d(n,"styleIcon")||(null!=t?d(t,"styleIcon"):t))?s:l)?s.call(a,{name:"styleIcon",hash:{},data:o,loc:{start:{line:26,column:36},end:{line:26,column:51}}}):s)+'"></use>\n                </svg>\n              </icon>\n            </div>\n            <div class="restriction-label">\n              '+c("function"==typeof(s=null!=(s=d(n,"styleLabel")||(null!=t?d(t,"styleLabel"):t))?s:l)?s.call(a,{name:"styleLabel",hash:{},data:o,loc:{start:{line:31,column:14},end:{line:31,column:30}}}):s)+'\n            </div>\n            <div class="restriction-switch-container">\n              <label\n                  data-key="restriction-switch"\n                  data-type="style"\n                  data-element="'+c(u(null!=(i=null!=t?d(t,"selected"):t)?d(i,"id"):i,t))+'"\n                  class="'+(null!=(i=d(n,"if").call(a,null!=(i=null!=t?d(t,"selected"):t)?d(i,"style"):i,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:38,column:25},end:{line:38,column:62}}}))?i:"")+'">\n                <div>\n                  <input type="checkbox" checked="'+c(u(null!=(i=null!=t?d(t,"selected"):t)?d(i,"style"):i,t))+'">\n                  <i></i>\n                </div>\n              </label>\n            </div>\n          </div>\n          <div class="restrictions-container">\n            <div class="restriction-icon">\n              <icon>\n                <svg>\n                  <use xlink:href="#'+c("function"==typeof(s=null!=(s=d(n,"contentIcon")||(null!=t?d(t,"contentIcon"):t))?s:l)?s.call(a,{name:"contentIcon",hash:{},data:o,loc:{start:{line:50,column:36},end:{line:50,column:53}}}):s)+'"></use>\n                </svg>\n              </icon>\n            </div>\n            <div class="restriction-label">\n              '+c("function"==typeof(s=null!=(s=d(n,"contentLabel")||(null!=t?d(t,"contentLabel"):t))?s:l)?s.call(a,{name:"contentLabel",hash:{},data:o,loc:{start:{line:55,column:14},end:{line:55,column:32}}}):s)+'\n            </div>\n            <div class="restriction-switch-container">\n              <label\n                data-key="restriction-switch"\n                data-type="content"\n                data-element="'+c(u(null!=(i=null!=t?d(t,"selected"):t)?d(i,"id"):i,t))+'"\n                class="'+(null!=(i=d(n,"if").call(a,null!=(i=null!=t?d(t,"selected"):t)?d(i,"content"):i,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:62,column:23},end:{line:62,column:62}}}))?i:"")+'">\n                <div>\n                  <input type="checkbox" checked="'+c(u(null!=(i=null!=t?d(t,"selected"):t)?d(i,"content"):i,t))+'">\n                  <i></i>\n                </div>\n              </label>\n            </div>\n          </div>\n\n          <div class="other-restrictions">\n            <div class="section-title">\n              '+c((d(n,"t")||t&&d(t,"t")||l).call(a,"tool.restrictions.simplified_restrictions.other_title",{name:"t",hash:{},data:o,loc:{start:{line:73,column:14},end:{line:73,column:77}}}))+"\n            </div>\n"+(null!=(i=d(n,"unless").call(a,null!=(i=null!=t?d(t,"restrictedItems"):t)?d(i,"length"):i,{name:"unless",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:75,column:12},end:{line:77,column:23}}}))?i:"")+"\n"+(null!=(i=d(n,"each").call(a,null!=t?d(t,"restrictedItems"):t,{name:"each",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:79,column:12},end:{line:147,column:21}}}))?i:"")+'          </div>\n          \x3c!--    <div class="footer"> TODO: Enable when link is created by marketing team --\x3e\n          \x3c!--      <a href="">'+c((d(n,"t")||t&&d(t,"t")||l).call(a,"tool.restrictions.simplified_restrictions.need_more",{name:"t",hash:{},data:o,loc:{start:{line:150,column:31},end:{line:150,column:92}}}))+"</a>--\x3e\n          \x3c!--    </div>--\x3e\n        </div>\n"},2:function(e,t,n,r,o){return"inactive"},4:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"              "+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tool.restrictions.simplified_restrictions.no_other_elements",{name:"t",hash:{},data:o,loc:{start:{line:76,column:14},end:{line:76,column:83}}}))+"\n"},6:function(e,t,n,r,o){var i,s=e.lambda,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <div class="other-restricted-item">\n                <div class="section-title" data-id="'+a(s(null!=t?u(t,"id"):t,t))+'">\n                  <icon>\n                    <svg>\n                      <use xlink:href="#'+a(s(null!=t?u(t,"icon"):t,t))+'"></use>\n                    </svg>\n                  </icon>\n                  '+a(s(null!=t?u(t,"name"):t,t))+'\n                </div>\n                <div class="subsection first">\n                  <div>\n                    '+a((u(n,"t")||t&&u(t,"t")||c).call(l,"tool.restrictions.simplified_restrictions.styling.changes_label",{name:"t",hash:{},data:o,loc:{start:{line:91,column:20},end:{line:91,column:93}}}))+"\n                  </div>\n                  <div>\n                    <icon>\n                      <svg>\n"+(null!=(i=u(n,"if").call(l,null!=t?u(t,"style"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:96,column:24},end:{line:100,column:31}}}))?i:"")+'                      </svg>\n                    </icon>\n                  </div>\n                  <div class="restriction-switch-container">\n                    <label\n                      data-key="restriction-switch"\n                      data-type="style"\n                      data-element="'+a(s(null!=t?u(t,"id"):t,t))+'"\n                      class="'+(null!=(i=u(n,"if").call(l,null!=t?u(t,"style"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:109,column:29},end:{line:109,column:62}}}))?i:"")+'">\n                      <div>\n                        <input type="checkbox" checked="'+a(s(null!=t?u(t,"style"):t,t))+'">\n                        <i></i>\n                      </div>\n                    </label>\n                  </div>\n                </div>\n                <div class="subsection">\n                  <div>\n                    '+a((u(n,"t")||t&&u(t,"t")||c).call(l,"tool.restrictions.simplified_restrictions.content.changes_label",{name:"t",hash:{},data:o,loc:{start:{line:119,column:20},end:{line:119,column:93}}}))+"\n                  </div>\n                  <div>\n                    <icon>\n                      <svg>\n"+(null!=(i=u(n,"if").call(l,null!=t?u(t,"content"):t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.program(9,o,0),data:o,loc:{start:{line:124,column:24},end:{line:128,column:31}}}))?i:"")+'                      </svg>\n                    </icon>\n                  </div>\n                  <div class="restriction-switch-container">\n                    <label\n                      data-key="restriction-switch"\n                      data-type="content"\n                      data-element="'+a(s(null!=t?u(t,"id"):t,t))+'"\n                      class="'+(null!=(i=u(n,"if").call(l,null!=t?u(t,"content"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:137,column:29},end:{line:137,column:64}}}))?i:"")+'">\n                      <div>\n                        <input type="checkbox" checked="'+a(s(null!=t?u(t,"content"):t,t))+'">\n                        <i></i>\n                      </div>\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n'},7:function(e,t,n,r,o){return'                          <use xlink:href="#lock-transparent-locked"></use>\n'},9:function(e,t,n,r,o){return'                          <use xlink:href="#lock-transparent-unlocked"></use>\n'},11:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="header">\n          <h3>\n            '+e.escapeExpression((l(n,"t")||t&&l(t,"t")||a).call(s,"tool.restrictions.simplified_restrictions.permissions",{name:"t",hash:{},data:o,loc:{start:{line:156,column:12},end:{line:156,column:74}}}))+'\n          </h3>\n        </div>\n        <div class="no-selected">\n          '+(null!=(i=(l(n,"t")||t&&l(t,"t")||a).call(s,"tool.restrictions.simplified_restrictions.no_selected",{name:"t",hash:{},data:o,loc:{start:{line:160,column:10},end:{line:160,column:74}}}))?i:"")+"\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <div class="accordion tab-content simplified-restrictions">\n'+(null!=(i=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"selected"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:4,column:6},end:{line:162,column:13}}}))?i:"")+"    </div>\n  </div>\n</div>\n\n"},useData:!0})},{"hbsfy/runtime":1024}],543:[function(e,t,n){"use strict";e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var i=r(e("../../../facade/editor/editor")),s=r(e("../../../facade/design/design")),a=r(e("../../../factory/restrictions")),l=r(e("../components/mixins/scrollable"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.exports=Backbone.mixin(Backbone.View.extend({template:e("./template.hbs"),permissions:e("./permissions.json"),events:{"mouseup [data-key=restriction-switch]":"toggleRestrictionEvent"},icons:{style:{image:"image-style",text:"text---nunito",element:"paint-bucket"},content:{image:"image---content",text:"text-content",element:"star"}},initialize:function(){var e=this;i.default.on("select",(function(t){return e.show(t)})),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.canvas=this.editor.canvas,document.querySelector('[href="#tabSimplifiedRestrictions"]').parentNode.style.display="",document.querySelector('[href="#tabRestrictions"]').parentNode.remove()},render:function(e){var t=this;this.getRestrictedItems(e).then((function(e){var n,r=INKIVE.TranslateHelper.translate,o=["image","text"].includes(null===(n=t.selected)||void 0===n?void 0:n.type)?t.selected.type:"element";t.el.innerHTML=t.template({selected:t.selected,styleLabel:r("tool.restrictions.simplified_restrictions.styling.label.".concat(o)),styleIcon:t.icons.style[o],contentLabel:r("tool.restrictions.simplified_restrictions.content.label.".concat(o)),contentIcon:t.icons.content[o],restrictedItems:t.restrictedItems.filter((function(e){var n;return e.id!==(null===(n=t.selected)||void 0===n?void 0:n.id)&&e.page===INKIVE.Tool._current_page_number}))}),t.initListeners(),t.initScroll()}))},show:function(e){e=e||this.canvas.getSelectedElems(),this.render(1===e.length&&e[0].id)},initListeners:function(){var e=this;this.el.querySelectorAll(".other-restricted-item .section-title").forEach((function(t){var n=document.getElementById(t.dataset.id);t.addEventListener("mouseenter",(function(){return e.toggleOtherRestricted(t,n)})),t.addEventListener("mouseleave",(function(){return e.toggleOtherRestricted(t,n)})),t.addEventListener("click",(function(){n&&(n.style.outline="",e.canvas.selectOnly([n]),e.show({element:n}))}))}))},toggleRestrictionEvent:function(e){var t,n=this,r=e.currentTarget.classList.toggle("inactive"),o=e.currentTarget.dataset,i=this.restrictedItems.find((function(e){return e.id===o.element}))||this.getElement(o.element),s=u(u({},i.restrictions),this.getPermissionsSet(o.type,i.type,r));if(this.disableSwitches(!0),a.default.setGlobalElementRestriction(i.id,Object.keys(s).every((function(e){return s[e]}))?null:JSON.stringify({basic:s})).then((function(){n.disableSwitches(!1),n.getRestrictedItems()})),(null===(t=this.selected)||void 0===t?void 0:t.id)===i.id){var l=svgedit.select.getSelectorManager().requestSelector(document.getElementById(i.id));l.showGrips(!0),l.resize()}},disableSwitches:function(e){this.el.querySelectorAll(".restriction-switch-container").forEach((function(t){t.classList.toggle("disabled",e)}))},getPermissionsSet:function(e,t,n){var r={};return this.permissions[e][t].forEach((function(e){r[e]=!n})),r},getRestrictedItems:function(e){var t=this;return new Promise((function(n){return a.default.getElementPermissions().then((function(r){t.selected=null,t.restrictedItems=r.filter((function(e){return"background"!==e.element_id&&s.default.get(e.element_id)&&e.page_number===INKIVE.Tool._current_page_number})).map((function(e){var n=t.getElement(e.element_id),r=t.isDataSetRestricted("style",n.type,e.restrictions),o=t.isDataSetRestricted("content",n.type,e.restrictions);return u(u({},n),{},{page:e.page_number,style:r,content:o,restrictions:JSON.parse(e.restrictions).basic})})),e&&(t.selected=t.restrictedItems.find((function(t){return t.id===e})),t.selected||"background"===e||(t.selected=t.getElement(e))),n()}))}))},isDataSetRestricted:function(e,t,n){var r=JSON.parse(n).basic,o=this.getPermissionsSet(e,t,!0);return Object.keys(o).every((function(e){return o[e]===r[e]}))},getElementTypeIcon:function(e){switch(e){case"image":return"thumbnail---circle";case"text":return"text-content---circle";default:return"star---circle"}},getElement:function(e){var t=s.default.get(e)||{},n=t.type||"element";return{id:e,name:t.name||"".concat(n," ").concat(e.split("_")[1]),type:n,icon:this.getElementTypeIcon(n)}},toggleOtherRestricted:function(e,t){e.parentNode.classList.toggle("highlighted"),t&&(t.style.outline=t.style.outline?"":"3px solid ".concat("#F2F4F8"))}}),l.default)},{"../../../facade/design/design":47,"../../../facade/editor/editor":91,"../../../factory/restrictions":149,"../components/mixins/scrollable":334,"./permissions.json":541,"./template.hbs":542,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],544:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("../../../../factory/formats");t.exports={eventCategory:"Editor UI | Tool Menu | templates",thumbnailClickEvent:function(e){var t=$(e.currentTarget);r.getFormat(t.data("key")).then(_.bind((function(e){this.trackEvent({eventAction:"show_format",eventLabel:e.string_id+" "+e.id})}),this))}}},{"../../../../factory/formats":126,"core-js/modules/es.function.bind.js":883}],545:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | templates",show:{eventAction:"show"},listContentToggleEvent:function(e){var t=$(e.currentTarget);t.closest("dt").hasClass("active")||this.trackEvent({eventAction:"content_toggle",eventLabel:t.data("key")})}}},{}],546:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="antiscroll-wrap">\n  <div class="antiscroll-inner">\n    <ul class="thumbnail-wrapper"></ul>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],547:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js");var o=r(e("../templates-base")),i=r(e("../../../../factory/formats")),s=r(e("../../../../factory/desygner-company")),a=r(e("../../components/thumbnail/restricted")),l=e("../../../../factory/company").instance,c=e("../../../../factory/company").factory;t.exports=o.default.extend({fetchType:"brand",initialize:function(e){this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,e.format&&o.default.prototype.initialize.call(this,e),e.format||i.default.getCurrentFormat().then(_.bind((function(t){return this.getSimilarFormat({format:t}).then(_.bind((function(t){e.format=t,o.default.prototype.initialize.call(this,e)}),this))}),this))},getSimilarFormat:function(e){var t=$.Deferred(),n=_.bind((function(e){var t,n=1/0,r=1/0,o=this.canvas.contentW,i=this.canvas.contentH,s=o/i;return _.each(e,(function(e){var a=function(e){var t=INKIVE.Helpers.convertUnitsToPixels(e.width,e.unit),n=INKIVE.Helpers.convertUnitsToPixels(e.height,e.unit);return _.extend(e,{width:t,height:n,ratio:t/n})}(e),l=Math.abs(s-a.ratio);if(l<r){var c=Math.abs(o-a.width)+Math.abs(i-a.height);c<n&&(t=e,n=c,r=l)}})),t}),this);return e.format&&t.resolve(e.format),e.format||(this.isCustomFormat=!0,i.default.getFormats().then((function(e){return t.resolve(n(e))}))),t.promise()},loadData:function(e,t){function n(){var e="brand"===this.fetchType;INKIVE.Modal.togglePageLoader(!0),e&&this.fetchBrandTemplates(),e||this.fetchDesygnerTemplates()}this.end=t,this.repeat=e,this.companyInstance=this.format.external?new c(this.format.external):l,this.templateData&&n.call(this),this.templateData||this.preloadData().then(_.bind((function(e){this.format=this.format||e,n.call(this)}),this))},preloadData:function(){var e;return _.bind((function(){return this.companyInstance.get(["designs",INKIVE.C.BOOK.encodedId])}),this)().then(_.bind((function(n){return e=n.format,n.template?this.companyInstance.get(["templates",n.template]):t({})}),this)).then(_.bind((function(n){return this.templateData=n,e?t(e):this.companyInstance.get(["formats",n.format])}),this));function t(e){var t=$.Deferred();return t.resolve(e),t.promise()}},fetchBrandTemplates:function(){return this.companyInstance.get(["formats",this.format.id,"templates"]).then(_.bind((function(e){INKIVE.Modal.togglePageLoader(!1),this.fetchType="desygner",this.appendBrandThumbnails(_.filter(e,(function(e){return!e.is_draft}))),this.repeat()}),this))},fetchDesygnerTemplates:function(){function e(){INKIVE.Modal.togglePageLoader(!1),this.scrollRefresh(),this.end()}this.format.parent_format?s.default.get(["formats",this.format.parent_format,"templates"]).then(_.bind((function(t){INKIVE.Modal.togglePageLoader(!1),this.appendBrandThumbnails(t),e.call(this)}),this)):e.call(this)},appendBrandThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper .scrollDetect");_.each(e,(function(e){var n=$("<li>").addClass("thumbnail image loading").data("key","brand-"+e.id).insertBefore(t);new a.default({el:n,width:this.columnWidth,format:this.format,baseTemplate:e,openSet:this.templateData.id===e.id})}),this)}})},{"../../../../factory/company":122,"../../../../factory/desygner-company":124,"../../../../factory/formats":126,"../../components/thumbnail/restricted":368,"../templates-base":552,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],548:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.find.js");var r=e("../templates-base"),o=e("../../../../factory/formats"),i=e("../../components/thumbnail/grid");t.exports=r.extend({columnWidth:255,initialize:function(e){this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,this.getFormat(e).then(_.bind((function(t){e.format=t,r.prototype.initialize.call(this,e)}),this))},getFormat:function(e){var t=$.Deferred(),n=_.bind((function(e){var t,n=1/0,r=1/0,o=this.canvas.contentW,i=this.canvas.contentH,s=o/i;return _.each(e,(function(e){var a=function(e){var t=INKIVE.Helpers.convertUnitsToPixels(e.width,e.unit),n=INKIVE.Helpers.convertUnitsToPixels(e.height,e.unit);return _.extend(e,{width:t,height:n,ratio:t/n})}(e),l=Math.abs(s-a.ratio);if(l<r){var c=Math.abs(o-a.width)+Math.abs(i-a.height);c<n&&(t=e,n=c,r=l)}})),t}),this);return e.format&&t.resolve(e.format),e.format||(this.isCustomFormat=!0,o.getFormats().then((function(e){t.resolve(n(e))}))),t.promise()},initDataLoading:function(){this.loadDataType="default",r.prototype.initDataLoading.call(this)},loadData:function(e,t){var n=_.partial(this.onMoreData,this.filterActionId),r="default"===this.loadDataType;this.end=t,this.repeat=e,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),r&&INKIVE.Helpers.api(this.apiCall,"GET",this.getParams(),n),r||INKIVE.Helpers.sendCmd(INKIVE.C.BASE_URL+"grid/fetch",this.getParams(),n)},getParams:function(){return"default"!==this.loadDataType?_.extend({number_of_photos:++this.numberOfPhotos},this.size):r.prototype.getParams.call(this)},onMoreData:function(e,t){if(e===this.filterActionId){var n="default"===this.loadDataType;t=n?t:JSON.parse(t),(n?t.data.length>0:"SUCCESS"===t.STATUS)?(n&&this.appendThumbnails(t.data),n||this.appendGridThumbnails(t.MESSAGE),this.repeat()):"default"===this.loadDataType?(this.numberOfPhotos=0,this.loadDataType="grid",this.from=0,this.setGridTemplateFormat(),this.repeat()):(this.end(),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner"))),INKIVE.Helpers.initTooltips(this.$el),this.scrollRefresh()}},setGridTemplateFormat:function(){var e=INKIVE.Helpers.convertUnitsToPixels,t=this.$el.find(".thumbnail-wrapper .thumbnail ").first().width()||this.columnWidth,n=this.tool.editor.canvas;this.callFormat=this.isCustomFormat?{width:n.contentW,height:n.contentH}:{width:e(this.format.width,this.format.unit),height:e(this.format.height,this.format.unit)},this.size={width:t,height:t*(this.callFormat.height/this.callFormat.width)}},appendGridThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper .scrollDetect");_.each(e,(function(e){var n=$("<li>").addClass("thumbnail grid").insertBefore(t);new i({el:n,size:this.size,format:this.callFormat,data:e,numberOfPhotos:this.numberOfPhotos})}),this)}})},{"../../../../factory/formats":126,"../../components/thumbnail/grid":354,"../templates-base":552,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.repeat.js":922}],549:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.parse-int.js");var s,a,l,c,u=e("../templates-base"),d=e("../../../../factory/formats"),p=e("../../../../factory/company").instance,h=e("../../../../facade/restrictions/restrictions"),m=e("../../components/thumbnail/template-page"),f=e("../../components/thumbnail/restricted");t.exports=u.extend({fetchType:"brand",initialize:function(){},columnWidth:255,show:function(){if(!this.$el.find(".thumbnail-wrapper li").length&&!this.loaded)return this.loaded=!0,this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,d.getCurrentFormat().then(_.bind((function(e){this.format=e,u.prototype.initialize.call(this,{format:e})}),this))},loadData:function(e,t){return this.end=t,this.repeat=e,this.getDesign().then(this.getTemplateData.bind(this)).then(this.onMoreData.bind(this))},getMatchingTemplates:(c=(0,i.default)(o.default.mark((function e(){var t,n,r,i=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getFormats();case 2:return t=e.sent,n=t.filter((function(e){return i.formatMatchesCanvas(e)})),e.next=6,Promise.all(n.map((function(e){return d.getFormatTemplates(e)})));case 6:return r=e.sent,e.abrupt("return",r.reduce((function(e,t,n){return e.concat(t.filter((function(e){return!e.is_draft})))}),[]));case 8:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)}),getDesign:function(){return new Promise((function(e){return p.get(["designs",INKIVE.C.BOOK.encodedId]).then((function(t){return e(t)}))}))},getTemplate:(l=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.template){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.get(["templates",t.template]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),getTemplateData:(a=(0,i.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMatchingTemplates();case 2:if(!(n=e.sent).length){e.next=5;break}return e.abrupt("return",{formats:n});case 5:return e.next=7,this.getTemplate(t);case 7:return r=e.sent,e.abrupt("return",{templateData:(null==r?void 0:r.pages)||[]});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),onMoreData:(s=(0,i.default)(o.default.mark((function e(t){var n,r,i,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$scrollDetect=this.$el.find(".thumbnail-wrapper .scrollDetect"),this.canChangePageOrder=h.isFunctionalityAllowed("function_change_page_order"),r=t.formats,i=t.templateData,null!=r&&r.length?r.forEach((function(e){s.appendTemplateThumbnail(s.format,e)})):null!=i&&null!==(n=i.pages)&&void 0!==n&&n.length?i.pages.forEach((function(e,t){s.appendTemplatePageThumbnails(s.format,i,t)})):this.renderEmptyResults(),this.end(),INKIVE.Helpers.initTooltips(this.$el),INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),this.scrollRefresh();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),renderEmptyResults:function(){var e=INKIVE.TranslateHelper.translate("tool.templates.no_similar_formats");this.$el.prepend('<div class="no-templates">'.concat(e,"</div>"))},appendTemplatePageThumbnails:function(e,t,n){var r=$("<li>").addClass("thumbnail image loading").insertBefore(this.$scrollDetect);new m({el:r,width:this.columnWidth,format:e,template:t,pageNumber:parseInt(n),canChangePageOrder:this.canChangePageOrder})},appendTemplateThumbnail:function(e,t){var n=$("<li>").addClass("thumbnail image loading").insertBefore(this.$scrollDetect);new f({el:n,width:this.columnWidth,format:e,baseTemplate:t})}})},{"../../../../facade/restrictions/restrictions":118,"../../../../factory/company":122,"../../../../factory/formats":126,"../../components/thumbnail/restricted":368,"../../components/thumbnail/template-page":371,"../templates-base":552,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.repeat.js":922,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],550:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.repeat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.keys.js");var i,s,a,l,c=r(e("@babel/runtime/helpers/slicedToArray")),u=r(e("@babel/runtime/helpers/asyncToGenerator")),d=e("../templates-base"),p=e("../../../../factory/formats"),h=e("../../components/thumbnail/restricted");t.exports=d.extend({fetchType:"brand",columnWidth:255,numberOfTemplates:0,initialize:function(){},show:(l=(0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$el.find(".thumbnail-wrapper li").length||this.loaded){e.next=8;break}return this.loaded=!0,this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,e.next=6,p.getCurrentFormat();case 6:this.format=e.sent,d.prototype.initialize.call(this,{format:this.format});case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),loadData:(a=(0,u.default)(o.default.mark((function e(t,n){var r,i,s,a,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.end=n,this.repeat=t,INKIVE.Modal.loader(this.$el.find(".antiscroll-inner")),e.next=5,Promise.all([this.getMatchingTemplates(),this.getSiblingsFormats()]);case 5:r=e.sent,i=(0,c.default)(r,2),s=i[0],a=i[1],l=s.concat(a),this.onMoreData(l);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)}),getMatchingTemplates:(s=(0,u.default)(o.default.mark((function e(){var t,n,r,i=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getFormats();case 2:return t=e.sent,n=t.filter((function(e){return i.formatMatchesCanvas(e)})),e.next=6,Promise.all(n.map((function(e){return p.getFormatTemplates(e)})));case 6:return r=e.sent,e.abrupt("return",r.reduce((function(e,t,r){return e.concat(t.map((function(e){return{format:n[r],template:e}})))}),[]));case 8:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),getSiblingsFormats:(i=(0,u.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.format)&&void 0!==t&&t.parent_format){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,p.getFormatSiblings(this.format);case 4:return n=e.sent,e.next=7,p.getFormatById(this.format.parent_format);case 7:return r=e.sent,e.abrupt("return",n.map((function(e){return{format:r,template:e}})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),onMoreData:function(e){var t=0;this.$scrollDetect=this.$el.find(".thumbnail-wrapper .scrollDetect");for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=e[o].template,s=e[o].format;t++,this.appendBrandThumbnails(s,i)}if(INKIVE.Modal.loaderClose(this.$el.find(".antiscroll-inner")),this.scrollRefresh(),this.end(),0===t){var a=INKIVE.TranslateHelper.translate("tool.templates.no_similar_formats");this.$el.prepend('<div class="no-templates">'.concat(a,"</div>"))}},appendBrandThumbnails:function(e,t){var n=$("<li>").addClass("thumbnail image loading").data("key","brand-"+t.id).insertBefore(this.$scrollDetect);new h({el:n,width:this.columnWidth,format:e,baseTemplate:t})}})},{"../../../../factory/formats":126,"../../components/thumbnail/restricted":368,"../templates-base":552,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.repeat.js":922,"core-js/modules/web.dom-collections.iterator.js":965}],551:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("../components/accordion-list/content"),o=e("../../../factory/formats"),i=e("../components/thumbnail/format"),s=e("../../../analytics/decorate");t.exports=s(e("./analytics/sub-categories"),r.extend({views:{},template:e("./content.hbs"),TemplatesView:INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN?e("./mode-view/designs"):e("./mode-view/layouts"),events:{"click .thumbnail-wrapper .thumbnail":"thumbnailClickEvent"},thumbnailClickEvent:function(e){var t=$(e.currentTarget);return o.getFormat(t.data("key")).then(_.bind((function(e){this.openNewView(t.data("key"),this.TemplatesView,{format:e})}),this))},initialize:function(e){return _.bindAll(this,"render","initScroll","thumbnailClickEvent"),this.tool=INKIVE.Tool.getInstance(),o.getGroup(e.key).then(this.render)},render:function(e){this.$el.html(this.template()),this.appendThumbnails(e.data),_.delay(this.initScroll,1e3)},appendThumbnails:function(e){var t=this.$el.width()-60,n=this.$el.find(".thumbnail-wrapper");_.each(e,(function(e){var r=$("<li>").addClass("thumbnail image loading dark").data("key",e.id).appendTo(n);e.total_templates-e.total_drafts>0&&new i({el:r,width:t,format:e})}))},getScrollHeight:function(e){return e.closest(".tab-content.inner-tabs").height()-100}}))},{"../../../analytics/decorate":2,"../../../factory/formats":126,"../components/accordion-list/content":315,"../components/thumbnail/format":353,"./analytics/sub-categories":544,"./content.hbs":546,"./mode-view/designs":547,"./mode-view/layouts":548,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],552:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../components/accordion-list/content"),o=e("../components/thumbnail/designed");t.exports=r.extend({apiCall:"search/layouts",template:e("./content.hbs"),columnWidth:255,initialize:function(e){this.tool=INKIVE.Tool.getInstance(),this.canvas=this.tool.editor.canvas,this.format=e.format,this.formats=e.formats,r.prototype.initialize.call(this)},formatMatchesCanvas:function(e){var t={width:this.canvas.contentW,height:this.canvas.contentH};return r(t,n(e,96))||r(t,n(e,72));function n(e,t){return{width:INKIVE.Helpers.convertUnitsToPixels(e.width,e.unit,1,t),height:INKIVE.Helpers.convertUnitsToPixels(e.height,e.unit,1,t)}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Math.abs(e.width-t.width)<n&&Math.abs(e.height-t.height)<n}},getParams:function(){var e={from:this.from,limit:this.limit,where:{format:this.format?this.format.id:_.pluck(this.formats,"id"),active:INKIVE.C.USER.IS_SUPER?0:1}};return this.from+=this.limit,e},render:function(){this.$el.html(this.template()),this.format&&this.$el.data("key",this.format.string_id)},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper .scrollDetect");_.each(e,(function(e){var n=$("<li>").addClass("thumbnail image loading").data("key",e.id).insertBefore(t);new o({el:n,width:this.columnWidth,design:e,isCustomFormat:this.isCustomFormat})}),this)},getScrollHeight:function(e){var t=e.closest(".tab-content.inner-tabs"),n=t.height();return INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.DESIGN&&INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN||(n-=t.find(".header-links").height(),n-=e.siblings(".btn-accordion").height()),n}})},{"../components/accordion-list/content":315,"../components/thumbnail/designed":352,"./content.hbs":546,"core-js/modules/es.array.find.js":859}],553:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js");var r=e("./view-base"),o=e("../components/accordion-list/director"),i=e("../../../factory/formats"),s=e("../../../facade/design/design"),a=e("../../../facade/editor/editor"),l=e("./sub-categories"),c=e("../../../analytics/decorate");t.exports=c(e("./analytics/view"),r.extend({class:"sub-category template",CategoriesView:l,views:{},Views:{custom:e("./templates")},loadListContent:function(e){var t="custom"==e;t||r.prototype.loadListContent.call(this,e),t&&o.prototype.loadListContent.call(this,e)},initialize:function(){_.bindAll(this,"refresh","goToFormat","goToCustom"),r.prototype.initialize.call(this),this.debouncedRefresh=_.debounce(this.refresh,1500),a.on("page.move_to",this.debouncedRefresh),s.on("template.update.size",this.debouncedRefresh)},refresh:function(){var e=this,t=this.$el.find(".tab-content."+this.class.split(" ").join(".")).length,n=JSON.parse(localStorage.getItem("pageActions")),r=JSON.parse(localStorage.getItem("currentFormatId"));i.getCurrentFormat().then((function(o){o&&r===o.id||(t&&!n?(e.initScroll(),e.scrollRefresh(),_.each(e.views,(function(e){for(;!e.closeView(););e.remove()})),e.views={},e.render()):localStorage.setItem("pageActions","false"))}))},render:function(){INKIVE.Modal.togglePageLoader(!0),i.getCurrentFormat().then(_.bind((function(e){INKIVE.Modal.togglePageLoader(!1);var t=this.$el.is(".tab.active")||this.$el.closest(".tab-content").is(".active");this.format=e,r.prototype.render.call(this),this.updateCustomFormatCategory(),t&&(this.format&&_.defer(this.goToFormat),this.format||_.defer(this.goToCustom))}),this))},goToFormat:function(){var e=this.format;i.getGroups().then(_.bind((function(t){var n=_.find(t,(function(t){return _.findWhere(t.data,{id:e.id})}));n&&this.$el.find('dt > a.btn[data-key="'+n.key+'"]').trigger("click")}),this))},goToCustom:function(){this.$el.find('dt > a.btn[data-key="custom"]').trigger("click")},loadButtons:function(){var e=$.Deferred();return i.getGroups().then((function(t){var n=_.map(t,(function(e){return{key:e.key,tag:e.name,icon:"fa fa-ellipsis-v",folder:e.folderName}})),r=INKIVE.TranslateHelper.translate("bottom_submenu.size.custom");n.push({key:"custom",tag:r,icon:"fa fa-ellipsis-v"}),e.resolve(n)})),e.promise()},updateCustomFormatCategory:function(){this.format&&this.$el.find('dt > a.btn[data-key="custom"]').hide(),this.format||this.$el.find('dt > a.btn[data-key="custom"]').show()},getScrollHeight:function(){return this.$el.height()},initScroll:function(){r.prototype.initScroll.call(this),this.$el.find(".antiscroll-scrollbar").remove()}}))},{"../../../analytics/decorate":2,"../../../facade/design/design":47,"../../../facade/editor/editor":91,"../../../factory/formats":126,"../components/accordion-list/director":317,"./analytics/view":545,"./sub-categories":551,"./templates":554,"./view-base":555,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],554:[function(e,t,n){"use strict";var r,o=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.parse-int.js");var i=e("./templates-base"),s=e("../components/accordion-list/content"),a=e("../components/thumbnail/designed");t.exports=i.extend((r={callbackName:"callbackLayouts",appendThumbnails:s.prototype.appendThumbnails},(0,o.default)(r,"appendThumbnails",(function(e){var t=this.$el.find(".thumbnail-wrapper .scrollDetect");_.each(e,(function(e){var n=$("<li>").addClass("thumbnail image loading").data("key",e.id).insertBefore(t);new a({el:n,width:this.columnWidth,design:e,isCustomFormat:!0})}),this)})),(0,o.default)(r,"extractData",(function(e){return _.compact(_.map(e,(function(e){var t=parseInt(e.format_width),n=parseInt(e.format_height)/t*255;if(e.id)return{id:"layout-"+e.id,src:e.url,width:255,height:n,isNocover:INKIVE.C.USER.IS_SUPER,cls:parseInt(e.active)?"":"grayscale",data:{count:e.count,set:e.set,num:e.num,orientation:e.orientation,text:e.text,active:e.active}}})))})),r))},{"../components/accordion-list/content":315,"../components/thumbnail/designed":352,"./templates-base":552,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-int.js":905}],555:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js");var r=e("../components/accordion-list/categories-director"),o=e("../../../factory/formats"),i=e("./sub-categories"),s=e("../../../facade/editor/editor");t.exports=r.extend({class:"sub-category template",CategoriesView:i,initialize:function(){r.prototype.initialize.call(this),this.tool=INKIVE.Tool.getInstance(),s.on("printing.close",this.refresh)},loadListContent:function(e){r.prototype.loadListContent.call(this,e),this.format&&_.delay(_.bind((function(){_.each(this.$el.find(".thumbnail"),(function(e){$(e).data("key")==this.format.id&&$(e).trigger("click")}),this),this.format=null}),this),600)},loadButtons:function(){var e=$.Deferred();return o.getGroups().then((function(t){e.resolve(_.map(t,(function(e){return{key:e.key,tag:e.name,icon:"fa fa-ellipsis-v"}})))})),e.promise()},closeAccordion:function(){var e=this.$el.find("dt");_.each(this.views,(function(t,n){e.find('a[data-key="'+n+'"] .category').remove()})),r.prototype.closeAccordion.call(this)},_render:function(e){INKIVE.Modal.loaderClose(this.$el),this.$el.html(this.template({class:this.class,buttons:e,add_button:this.addButtonText}))},getCategoryName:function(e){return e.format.name}})},{"../../../facade/editor/editor":91,"../../../factory/formats":126,"../components/accordion-list/categories-director":313,"./sub-categories":551,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],556:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("./templates-view"),c=e("../customize/contents/grids/view"),u=e("../../../analytics/decorate");INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?t.exports=e("./mode-view/templates"):INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?t.exports=e("./mode-view/restricted"):INKIVE.Helpers.isDesygnerProject()&&(t.exports=u(e("./analytics/view"),a.extend({type:"template",updateSearchContainer:$.noop,isAlreadyThere:function(){return!!this.$el.find(".tab-content.template").length},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:this.$headerLinks.filter("[data-key=add]").trigger("click");case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),initAddView:function(){var e=new l({el:this.$el.find("div.add")});this.registerTabView("add",e),e.render()},initGridView:function(){var e=new c({el:this.$el.find("div.grid")});this.registerTabView("grid",e),this.$el.find(".thumbnail-wrapper").append('<div class="scrollDetect hide"/>'),e.render()}})))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"../customize/contents/grids/view":399,"./analytics/view":545,"./mode-view/restricted":549,"./mode-view/templates":550,"./templates-view":553,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],557:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | text banners",loadData:{eventAction:"load_more"}}},{}],558:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | text",show:{eventAction:"show"}}},{}],559:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("../components/accordion-list/content"),o=e("../../../analytics/decorate"),i=e("../components/thumbnail/text-banner");t.exports=o(e("./analytics/banners"),r.extend({apiCall:"search/stickers",limit:30,thumbnailViews:[],callbackName:"callbackStickers",initialize:function(){INKIVE.C.IS_MOBILE&&this.show(),this.debouncedMasonryReload=_.debounce(_.bind(this.masonryReload,this),800)},show:function(){this.isAlreadyThere||r.prototype.initialize.call(this),this.isAlreadyThere=!0},refresh:function(){_.invoke(this.thumbnailViews,"resize")},render:function(){r.prototype.render.call(this),this.$el.find(".thumbnail-wrapper").masonry()},getParams:function(){var e={from:this.from,limit:this.limit,where:{active:INKIVE.C.USER.IS_SUPER?0:1,isText:1}};return this.from+=this.limit,e},getScrollHeight:function(e){var t=e.closest(".tab-content"),n=t.height();return n-=t.find(".header-links").height()},appendThumbnails:function(e){var t=this.$el.find(".thumbnail-wrapper"),n=t.find(".scrollDetect");_.each(e,(function(e){if(e.url){var r=$("<div>").addClass("thumbnail svg").data("key",e.id).insertBefore(n),o=new i({el:r,svg:e});t.masonry("appended",r),o.on("resize",this.debouncedMasonryReload),this.thumbnailViews.push(o)}}),this)}}))},{"../../../analytics/decorate":2,"../components/accordion-list/content":315,"../components/thumbnail/text-banner":391,"./analytics/banners":557,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],560:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find-index.js");var s,a=e("./banners"),l=e("../components/thumbnail/text"),c=e("../../../utils/humps"),u=e("../components/common/common-component"),d=e("../../../analytics/decorate");t.exports=d(e("./analytics/view"),u.extend({type:"text",memberType:["text","details"],uploadViewKey:"text-import",searchKeyupEvent:function(e){var t=$(e.target).val();this.$el.find("."+this.selectedTab.key).find(".antiscroll-wrap").find(".thumbnail-wrapper > li, .thumbnail").each((function(){var e=$(this),n=e.find("span.name").html()||e.find("a.folder-name").html()||e.find(".text span").html()||"";n&&e.css("display",""),-1===n.toLowerCase().indexOf(t.toLowerCase())&&e.hide()})),this.embededImportView&&this.embededImportView.views[this.type].masonryReload()},isAlreadyThere:function(){return!!this.$el.find(".tab-content.text").length},refresh:function(){u.prototype.refresh.call(this),this.$headerLinks.filter("[data-key=add]").is(".active")&&this.initAddView(),this.$headerLinks.filter("[data-key=banners]").is(".active")&&this.bannersView.refresh()},render:(s=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.prototype.render.call(this);case 2:t=this.$headerLinks.filter("[data-key=add]"),this.isEnterprise?this.isKW?this.$headerLinks.filter("[data-key=add]").trigger("click"):u.prototype.checkEmptyLibrary.call(this,t):t.trigger("click");case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),initAddView:function(){u.prototype.initAddView.call(this),this.renderDefaultText(),this.initDefaultText()},renderDefaultText:function(){var e=this.$el.find(".add > .top-content");this.defaultTextViews=_.map(INKIVE.C.TextDefault,(function(t,n){var r=$("<div>").addClass("thumbnail").appendTo(e),o=localStorage.getItem("default_text_"+n);return new l({el:r,data:_.extend(c.decamelizeKeys(t),JSON.parse(o))})}),this)},initDefaultText:function(){var e=this.defaultTextViews,t=_.last(this.defaultTextViews),n=INKIVE.TranslateHelper.translate("tool.text.click"),r=!localStorage.getItem("text_hint");function o(){_.each(e,(function(e){e.type().then((function(){e.$el.find("a.toggle-options").addClass("show"),e.endTyping()}))}))}localStorage.setItem("text_hint",!0),function(){_.each(e,(function(e){var t=_.bind(this.textChangeEvent,this,e);e.on("change",t)}),this)}.call(this),r||o(),r&&t.type(n).then((function(){t.erase().then(o)}))},textChangeEvent:function(e){var t=e.getTextData("_"),n=_.findIndex(this.defaultTextViews,e);localStorage.setItem("default_text_"+n,JSON.stringify(t))},initBannersView:function(){var e=$("<div></div>").addClass("image-list");this.$el.find(".tab-content > .banners").append(e),this.bannersView=new a({el:e}),this.registerTabView("banners",this.bannersView),this.bannersView.show()},updateSearchContainer:function(){var e=this.selectedTab.searchable;"add"===this.selectedTab.key?e=this.$el.find(".imported-elements .thumbnail-wrapper").children().length>1:"library"===this.selectedTab.key&&(e=!0),e&&this.displaySearchContainer(this.$el.find(".search-container"))}}))},{"../../../analytics/decorate":2,"../../../utils/humps":615,"../components/common/common-component":321,"../components/thumbnail/text":392,"./analytics/view":558,"./banners":559,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find-index.js":858,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883}],561:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Tool Menu | videos",show:{eventAction:"show"}}},{}],562:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js");var s,a=e("../components/common/common-component"),l=e("../../../analytics/decorate");t.exports=l(e("./analytics/view"),a.extend({type:"video",updateSearchContainer:$.noop,isAlreadyThere:function(){return!!this.$el.find(".tab-content.video").length},render:(s=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prototype.render.call(this);case 2:(t=this.$headerLinks.filter("[data-key=library]")).length&&!this.isEnterprise?t.trigger("click"):a.prototype.checkEmptyLibrary.call(this,t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}))},{"../../../analytics/decorate":2,"../components/common/common-component":321,"./analytics/view":561,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859}],563:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Top Menu",eventAction:"share",shareProjectByEmailEvent:{eventLabel:"project_email"},shareDesignEvent:function(e){var t=$(e.currentTarget).attr("class");this.trackEvent({eventLabel:"design_"+t})},shareProjectEvent:function(e){var t=$(e.currentTarget).attr("class");this.trackEvent({eventLabel:"project_"+t})},changeTabEvent:function(e){var t=$(e.currentTarget).data("target");this.trackEvent({eventLabel:"show_"+t+"_tab"})}}},{}],564:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.trim.js");var r=e("../../../factory/formats");t.exports={eventCategory:"Editor UI | Bottom Menu",eventAction:"size",showResizeEvent:{eventLabel:"display_resize_options"},showResizeMenu:{eventLabel:"display_multi_resize_menu"},doResizeEvent:function(e){var t,n,o,i="",s=this.$el.find("input.custom").is(":checked");s?(t=parseFloat(this.$el.find("input.size.page-width").val()),n=parseFloat(this.$el.find("input.size.page-height").val()),o=this.$el.find("select.unit").val(),i=t+"x"+n+o):this.$el.find("[type=checkbox]:checked").each((function(e,t){r.getFormat($(t).val()).then(_.bind((function(e){i+=e.width+"x"+e.height+e.unit+" "}),this))})),this.trackEvent({eventAction:s?"resize_custom":"resize_standar",eventLabel:"from "+this.$el.find(".page-size").text().trim()+" to "+i})}}},{"../../../factory/formats":126,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.string.trim.js":929}],565:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Top Menu",eventAction:"versions",loadVersion:function(e){var t=$(e.currentTarget).attr("data-versionId");this.trackEvent({eventLabel:"versionId_"+t})}}},{}],566:[function(e,t,n){"use strict";t.exports={eventCategory:"Editor UI | Top Menu",saveEvent:{eventAction:"save"},shareEvent:{eventAction:"share",eventLabel:"show"},versionsEvent:{eventAction:"versions",eventLabel:"show"},downloadEvent:{eventAction:"download",eventLabel:"show"},printEvent:{eventAction:"print"},closeEvent:{eventAction:"close"},redoEvent:function(e){this.trackEvent({eventAction:"redo"})},undoEvent:function(e){this.trackEvent({eventAction:"undo"})}}},{}],567:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.uncheckPDFPrintOptions=n.recommendedBleedUnitMsg=n.setLastSavedBleedOptionsValue=n.defaultBleedValues=n.uncheckBleedOption=n.hideCanvasBleed=n.preventDisable=n.showCanvasBleed=n.updateBleedSize=n.updateManualBleed=n.setManualBleed=n.radioToggleCheck=n.toggleManualBleedingRadioButtons=n.bleedDefaultValues=void 0,e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var o=r(e("./download-storage-manage")),i={cm:.4,mm:4,in:.125,px:15};n.bleedDefaultValues=i;var s=INKIVE.Tool.getInstance();n.toggleManualBleedingRadioButtons=function(e){var t=document.querySelectorAll("div[data-id=download] li.filter-bleed-type"),n=document.querySelector('div[data-id=download] input[name="includeManualBleed"]');t.forEach((function(e){e.classList.toggle("hidden")})),n.checked=!n.checked,o.default.saveFieldOnStore(n,"downloadOptions"),n.checked?(c(),p()):d(),u(),e.stopPropagation(),e.preventDefault(),u()};n.radioToggleCheck=function(e){var t=e.currentTarget;!1===t.checked&&e.preventDefault(),"isAutomaticBleed"===t.name&&g(),o.default.saveFieldOnStore(e.currentTarget,"downloadOptions"),c(),u()};var a=function(){var e=document.querySelector("#manualBleedValue"),t=document.querySelector("input[name=bleed-value-set]");e.blur(),e.value<0&&(e.value=0),o.default.saveFieldOnStore(e,"downloadOptions"),INKIVE.Tool.getInstance().editor.canvas.runExtensions("modifyBleedValues",{size:e.value}),t.value=e.value,u()};n.setManualBleed=a;n.updateManualBleed=function(){var e=document.querySelector("#manualBleedValue"),t=0;e.addEventListener("keydown",(function(n){switch(clearTimeout(t),n.key){case"-":case"e":case"+":case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":return void n.preventDefault();case"Delete":return void(e.value=0);case"Backspace":case"default":return}t=setTimeout((function(){return a()}),750)}))};var l=function(){var e=o.default.getStorageTemplate("downloadOptions"),t=e&&e.manualBleedValue?[e.manualBleedValue]:INKIVE.C.BLEED_VALUES.bleedSize.split(" "),n=document.querySelector("div[data-id=download] #manualBleedValue"),r=INKIVE.C.BLEED_VALUES.bleedUnit;n.placeholder=t[0],n.value=t[0],document.querySelector(".desygner-custom-check .bleed-unit ").innerHTML=r};n.updateBleedSize=l;var c=function(){s.editor.canvas.runExtensions("showBleedClipper",{keepDisabled:!0}),s.editor.canvas.runExtensions("enableGuideLine",{keepVisible:!0}),document.querySelector("#manualBleedValue").blur(),u()};n.showCanvasBleed=c;var u=function(){document.querySelector("header").classList.remove("disabled"),document.querySelector("#tool-panel .tool-panel-inner .tool-menu").classList.remove("disabled"),document.querySelector("#tool-panel .tool-panel-inner .tool-content").classList.remove("disabled"),document.querySelector("#pages-panel").classList.remove("disabled")};n.preventDisable=u;var d=function(){s.editor.canvas.runExtensions("hideBleedClipper",{keepDisabled:!1}),s.editor.canvas.runExtensions("disableGuideLine",{keepVisible:!1})};n.hideCanvasBleed=d;n.uncheckBleedOption=function(){var e=document.querySelectorAll("div[data-id=download] li.filter-bleed-type");document.querySelector('input[name="isBleed"]').checked=!1,document.querySelector('input[name="isAutomaticBleed"]').checked=!1,e.forEach((function(e){return e.classList.add("hidden")}))};var p=function(){var e=INKIVE.C.BOOK.num_pages<16,t=document.querySelector('div[data-id=download] input[name="isAutomaticBleed"]'),n=document.querySelector("div[data-id=download] .bleed-type-auto"),r=document.querySelector("div[data-id=download] .icon-info"),o=document.querySelector("div[data-id=download] .icon-info-max-pages"),i=document.querySelector('div[data-id=download] input[name="includeManualBleed"]');n.classList.toggle("disabled",!e),t.classList.toggle("disabled",e),h(),r.classList.toggle("hide-icon",!e),o.classList.toggle("hide-icon",e),e||(i.checked=!0),u()};n.defaultBleedValues=p;var h=function(){var e=o.default.getStorageTemplate("downloadOptions");e&&e.checkBox.isAutomaticBleed?f(e):m(e)};n.setLastSavedBleedOptionsValue=h;var m=function(e){var t=document.querySelector("div[data-id=download] #manualBleedValue");document.querySelector('div[data-id=download] input[name="isBleed"]').checked=!0,t.classList.toggle("disabled",!1);var n=INKIVE.C.BLEED_VALUES.bleedUnit;t.value=e&&e.manualBleedValue?e.manualBleedValue:i[n]},f=function(e){var t=document.querySelector("div[data-id=download] #manualBleedValue");document.querySelector('div[data-id=download] input[name="isAutomaticBleed"]').checked=!0,t.classList.toggle("disabled",!0);var n=INKIVE.C.BLEED_VALUES.bleedUnit;t.value=e.manualBleedValue?e.manualBleedValue:i[n]},g=function(){var e=INKIVE.C.BLEED_VALUES.bleedUnit;s.editor.canvas.runExtensions("modifyBleedValues",{size:i[e]}),l()};n.recommendedBleedUnitMsg=function(){document.querySelector("div[data-id=download] .manual-bleed ."+INKIVE.C.BLEED_VALUES.bleedUnit).classList.toggle("hide-icon")};n.uncheckPDFPrintOptions=function(){document.querySelector('div[data-id=download] input[name="isCutmark"]').checked=!1,document.querySelector('div[data-id=download] input[name="includeManualBleed"]').checked=!1,document.querySelector('div[data-id=download] input[name="isCMYK"]').checked=!1}},{"./download-storage-manage":570,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],568:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.selectDownloadType=n.updateDownloadOptionsStore=n.toggleDownloadSubOption=n.selectVideoSize=n.selectVideoFormat=n.checkPagesInterval=n.rangeInitialValue=n.selectPagesRange=n.shortPageRange=n.generatePrintList=n.downloadDropDownList=n.warningNoPages=n.downloadDefaultRange=n.downloadRangeChangedByUser=n.selectedPages=n.quality=void 0;var o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.array.reduce.js");var i=e("../../../../../../../src/components/sidebar-animation/animation-events"),s=r(e("./download-storage-manage")),a={"2k":2560,"1080p":1080,"720p":720,"480p":480,"360p":360},l=e("./download-bleeds-settings"),c=(INKIVE.TranslateHelper.translate("top_submenu.download_modal.select_pages_error"),INKIVE.TranslateHelper.translate("top_submenu.download_modal.download_pages")),u=INKIVE.TranslateHelper.translate("top_submenu.download_modal.download_page"),d="print";n.quality=d;var p=[];n.selectedPages=p,n.downloadRangeChangedByUser=void 0;var h=!1,m=function(){var e=document.querySelector("div.select-range-type");e&&(e.classList.remove("flash-warning"),j()),f(),y(p),g(),p.sort((function(e,t){return e-t}))};n.downloadDefaultRange=m;var f=function(){var e=document.querySelector('.content-item-wrapper[data-active="true"]'),t=1;e&&(t=parseInt(e.getAttribute("data-currpage"))+1),h=!1,document.querySelector("div.desygner-dropdown-selected.select-range-type").classList.remove("disable"),s.default.setUrlValue();var r=s.default.currentStorage("pages-to-dowload"),o=s.default.findIndexOfStorageByKey("pages-to-dowload"),i=-1!==o&&r?r[o]:null,a=s.default.getDownloadFormat();if(i)n.selectedPages=p=i.pages;else if("pdf-print"===a||"pdf-stand"===a){for(var l=[],c=0;c<INKIVE.C.BOOK.num_pages;c++)l.push(c+1);n.selectedPages=p=INKIVE.C.BOOK.num_pages>10?[]:l}else n.selectedPages=p=[],p.push(t);"png"!==a&&"jpg"!==a||(h=!0,n.selectedPages=p=[t])},g=function(){var e=INKIVE.C.BOOK.num_pages,t=document.querySelector("div.dropdown-container.dropdown-range-container h3.download-range-title"),n=document.querySelector('div[data-id="download"] div.select-range-type');t&&n&&(1===e?(t.classList.add("hidden"),n.classList.add("hidden")):(t.classList.remove("hidden"),n.classList.remove("hidden")))};n.warningNoPages=function(){var e=document.querySelector("div.select-range-type");e.classList.remove("flash-warning"),window.requestAnimationFrame((function(){e.classList.add("flash-warning")}))};n.downloadDropDownList=function(e){var t=e.currentTarget,n=t.closest(".dropdown-container").querySelector(".desygner-dropdown-select"),r=t.closest('div[data-id="download"]').querySelectorAll(".desygner-dropdown-select.visible");n.classList.contains("visible")?n.classList.remove("visible"):((0,o.default)(r).forEach((function(e){e.classList.remove("visible")})),n.classList.toggle("visible")),n.classList.contains("select-range-dropdownlist")&&(b(n),$(".select-range-dropdownlist").antiscroll())};var b=function(e){var t=INKIVE.C.BOOK.num_pages,n=e.querySelector(".checkbox-container ul"),r=document.querySelectorAll(".preview");e.querySelectorAll(".checkbox-container ul li.pages-list-item").forEach((function(e){e.remove()}));for(var o=1;o<=t;o++){var i=p.includes(o)?"checked":"";n.innerHTML+='<li class="filter-line desygner-dropdown-select-item-range pages-list-item">\n    <p class="desygner-custom-check">\n      <label>\n      <span style="background-image: '.concat(r[o-1].dataset.backgroundImage,'" class="page-thumbnail"></span>\n        <span class="checkbox-text">').concat(INKIVE.TranslateHelper.translate("top_submenu.download_modal.download_page")," ").concat(o,'</span>\n        <input type="checkbox" id="page_').concat(o,'" value="').concat(o,'" class="export-range-page-checkbox" data-id="').concat(o,'" ').concat(i,'>\n        <span class="checkmark"></span>\n      </label>\n    </p>\n  </li>')}n.querySelector("#isRangeAll").checked=p.length===t};n.generatePrintList=b;var v=function(){document.querySelector('div[data-id="download"] div.select-range-type');p.sort((function(e,t){return e-t})).join(","),p.sort((function(e,t){return e-t})),p.length<1||(1===p.length?"".concat(u," : (").concat(_(p),")"):p.length>=2&&"".concat(c," : (").concat(_(p),")")),j()};n.shortPageRange=v;n.selectPagesRange=function(e){var t=e.currentTarget,n=t.closest(".ui-widget-content").querySelector("div.select-range-type"),r=t.closest(".ui-widget-content").querySelectorAll(".download-btn-container .buttons .btn");!function(e){var t=e.closest(".dropdown-container").querySelector("[data-id=isRangeAll]"),n=e.closest(".dropdown-container").querySelectorAll("input[type=checkbox]"),r=e.closest(".dropdown-container").querySelectorAll("input[type=checkbox].export-range-page-checkbox"),i=e.closest(".dropdown-container").querySelectorAll("input[type=checkbox].export-range-page-checkbox:checked");"isRangeAll"===e.dataset.id?(p.length=0,(0,o.default)(r).forEach((function(t){t.checked=e.checked,e.checked?p.push(parseInt(t.dataset.id)):p.length=0}))):(t.checked=i.length===n.length-1,e.checked?p.push(parseInt(e.dataset.id)):p.splice(p.indexOf(parseInt(e.dataset.id)),1))}(t),v(),n.classList.toggle("error",p.length<1),INKIVE.EditorFacade.isLoading||(0,o.default)(r).forEach((function(e){e.classList.toggle("disabled",p.length<1)}));JSON.parse(sessionStorage.getItem("pages-to-dowload")),new URLSearchParams(window.location.search);s.default.setUrlValue(),s.default.saveFieldOnStore(p,"pages-to-dowload"),y(p)};var y=function(e){var t=document.querySelector("div.select-range-type"),n=document.querySelector("a.btn.btn-yellow.action[data-action]");0===e.length?(t.classList.add("warning"),!INKIVE.EditorFacade.isLoading&&n.classList.remove("disabled")):t.classList.remove("warning")},j=function(){var e,t,n=document.querySelector(".ui-dropdown-content[data-id=download] div.select-range-type"),r=document.querySelector('.content-item-wrapper[data-active="true"]');r&&(e=Number(r.getAttribute("data-currpage"))+1),t=p&&0===p.length?"":h&&1===p.length&&e&&p[0]===e?INKIVE.TranslateHelper.translate("top_submenu.download_modal.download_current_page_only"):p&&p.length===INKIVE.C.BOOK.num_pages?INKIVE.TranslateHelper.translate("top_submenu.download_modal.download_all_pages"):"".concat(u," : (").concat(_(p),")"),n.querySelector("span").innerHTML="".concat(t)};n.rangeInitialValue=j;var _=function(e){return(0,o.default)(e).sort((function(e,t){return e-t})).reduce((function(e,t,n){return 0===n?(e.ranges.push(t),e.rangeStart=t):t===e.last+1?e.ranges[e.ranges.length-1]=e.rangeStart+"-"+t:(e.ranges.push(t),e.rangeStart=t),e.last=t,e}),{ranges:[]}).ranges.join(", ")};n.checkPagesInterval=_;n.selectVideoFormat=function(e){if(e&&e.currentTarget){var t=e.currentTarget.parentElement,n=e.currentTarget,r=n.dataset.videoFormat;(0,i.dispatchAnimationEvent)("changeOutputFormat",{format:r}),t.querySelectorAll("li").forEach((function(e){return e.classList.remove("select-active")})),t.parentElement.querySelector(".desygner-dropdown-selected span").textContent=n.querySelector("a span").textContent,t.classList.toggle("visible"),n.classList.add("select-active")}};n.selectVideoSize=function(e){if(e&&e.currentTarget){var t=e.currentTarget,n=t.parentElement,r=t.dataset.videoSize,o="original"===r?null:a[r];(0,i.dispatchAnimationEvent)("changeOutputSize",{resolution:o}),n.querySelectorAll("li").forEach((function(e){return e.classList.remove("select-active")})),n.parentElement.querySelector(".desygner-dropdown-selected span").textContent=t.querySelector("a span").textContent,n.classList.toggle("visible"),t.classList.add("select-active")}};n.toggleDownloadSubOption=function(e){var t=e.currentTarget;s.default.saveFieldOnStore(t,"downloadOptions")};n.updateDownloadOptionsStore=function(e){var t=e.currentTarget?e.currentTarget:e;s.default.saveFieldOnStore(t,"downloadOptions")};n.selectDownloadType=function(e){var t,r,o,i,a,c=e&&e.currentTarget,u=document.querySelector(".ui-dropdown-content[data-id=download]"),h=u.querySelector(".select-print-format"),f=c?c.dataset.printFormat:sessionStorage.getItem("lastSelectedTab")||"pdf-print",g=document.querySelectorAll('[title="Animation"]').length&&"none"===document.querySelector('[title="Animation"]').parentNode.style.display,b=INKIVE.C.SHOW_ANIMATION&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_animation_file");r=document.querySelector('input[type="checkbox"][name="isForcedTransparency"]'),o="none"!==window.getComputedStyle(r.parentElement.querySelector("span"),":after").content,i="none"===(null===(t=document.querySelector("#svg_background_color").getAttribute("fill"))||void 0===t?void 0:t.toLowerCase()),a=0===p.length||1===p.length&&p[0]===INKIVE.Tool._current_page_number,r&&!o&&i&&a&&(r.value=!0,r.click()),"video"!==sessionStorage.getItem("lastSelectedTab")||!g&&b||(f="pdf-print"),c||(f=s.default.getDownloadFormat(),c=u.querySelector("li[data-print-format='".concat(f,"']"))),u.querySelector(".selected-print-format span").textContent=c.querySelector("a span").textContent,s.default.saveFieldOnStore(f,"lastSelectedTab"),s.default.saveFieldOnStore(f,"selectedFormat"),s.default.setSavedDownloadInputs(),"pdf-print"===f?(u.querySelector(".print-pdf-settings").classList.add("active"),f="pdf-stand",n.quality=d="print"):(u.querySelector(".print-pdf-settings").classList.remove("active"),n.quality=d="web",l.hideCanvasBleed(),l.uncheckPDFPrintOptions()),u.querySelectorAll(".ui-tabs-panel").forEach((function(e){var t=e.dataset.local===f;e.setAttribute("aria-hidden",!t),e.setAttribute("aria-expanded",t),e.setAttribute("aria-selected",t),e.classList.toggle("ui-tabs-active",t),e.classList.toggle("ui-state-active",t),e.style.display=e.dataset.local===f?"block":"none"})),h.querySelectorAll(" .desygner-dropdown-select-item").forEach((function(e){e.classList.remove("select-active")})),u.querySelectorAll(".download-btn-container").forEach((function(e){var t=f===e.dataset.local;e.classList.toggle("active",t)})),h.classList.toggle("visible"),c.classList.add("select-active");var v=document.querySelector("div.select-range-type");m(),v.classList.remove("error"),y(p),j(),document.querySelectorAll("a.btn.btn-yellow.action.disabled[data-action]").forEach((function(e){!INKIVE.EditorFacade.isLoading&&e.classList.remove("disabled")}))}},{"../../../../../../../src/components/sidebar-animation/animation-events":1078,"./download-bleeds-settings":567,"./download-storage-manage":570,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.search.js":925,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967}],569:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/web.timers.js");var r=e("../../status");t.exports={initialize:function(){_.bindAll(this,"execute","request","download")},getDefaultOptions:function(){return{getUrlResponse:!0,format:"jpeg",baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL}},getDefaultParameters:function(){var e=INKIVE.Tool.getInstance().editor.canvas;return{bleed:"n",book_id:INKIVE.C.BOOK.id,cmyk:"n",end_page:INKIVE.Tool._current_page_number,forced_transparency:"n",format:"jpeg",height:e.contentH,is_zip:"n",quality:80,start_page:INKIVE.Tool._current_page_number,width:e.contentW}},download:function(e,t,n){t=t||this.getDefaultOptions(),n=n||this.getDefaultParameters(),e=e||$.noop;var o=this.request;$('body > header > .options button[data-action="download"]').addClass("disabled"),INKIVE.FormatFactory.getCurrentFormat().then(_.bind((function(i){function s(n){var r=n||INKIVE.TranslateHelper.translate("modal.alert.can_not_prepare_file",{format:t.format});INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:r,try_again:!n}));e(!1)}(i=i||INKIVE.FormatFactory.getCurrentSize()).unit&&(n.initial=i,this._getScaleFactor(n)),$.post(t.baseUrl+"submitorder/downloadfromeditor",n,(function(i){r.display(INKIVE.TranslateHelper.translate("general.preparing_download"),null,!0);var a=$.parseJSON(i);if(a){_.each(a,(function(r){if(INKIVE.Helpers.isUrlValid(r)){var i=t.getUrlResponse?_.partial(o,r,n,e):_.partial(o,r,n);_.delay(i,3e3)}}));t.getUrlResponse||e(!0)}else s()})).fail(s)}),this))},execute:function(e,t,n){var r=INKIVE.Tool.getInstance().editor.canvas;t=$.extend({format:null,contentW:null,contentH:null,pageRange:null,baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL},t),this.notification(!0);var o={book_id:INKIVE.C.BOOK.id,pages:JSON.stringify(t.selectedPages),forced_transparency:e.find("[name=isForcedTransparency]").is(":checked")?"y":"n",bleed:e.find("[name=isBleed]").is(":checked")?"y":"n",cutmarks:e.find("[name=isCutmark]").is(":checked")?"y":"n",is_zip:e.find("[name=isZip]").is(":checked")||INKIVE.C.IS_MOBILE_APP&&!window.Android?"y":"n",format:t.format,cmyk:e.find("[name=isCMYK]").is(":checked")?"y":"n"};"y"===o.bleed?(r.runExtensions("generateNewBleed",{}),o.bleed_type="manual",o.bleed_amount=INKIVE.C.BLEED_VALUES.bleedSize||"15 15 15 15",o.bleed_unit=INKIVE.C.BLEED_VALUES.bleedUnit||"px",o.slug_unit=o.bleed_unit,o.slug_amount=r.runExtensions("getSlugValues")):e.find("[name=isAutomaticBleed]").is(":checked")&&(o.bleed_type="auto",o.bleed="y",o.bleed_unit=INKIVE.C.BLEED_VALUES.bleedUnit||"px"),e.find("a.quality.active").length?o.quality=e.find("a.quality.active").attr("data-value"):e.find(".quality-slider").length?o.quality=e.find(".quality-slider").slider("option","value"):o.quality=t.quality,o.width=e.find('.rangeCurrentDimensions[data-type="width"]').val()||t.contentW,o.height=e.find('.rangeCurrentDimensions[data-type="height"]').val()||t.contentH,o.has_filter=$("#svgcontent").find("image[filter]").length>0?"y":"n";var i=t.selectedPages[0],s=t.selectedPages.length;s<2&&(o.is_zip="n"),"pdf"===t.format?("print"===o.quality&&(o.is_outline="y"),o.start_page=i||1,o.end_page=s||INKIVE.C.BOOK.num_pages):(o.start_page=i||1,o.end_page=s||INKIVE.C.BOOK.num_pages),"quickDownload"===t.downloadType&&(o.quality=60),_.each(["thumb","web","mobile"],(function(t){e.find("[name=is"+t.charAt(0).toUpperCase()+t.slice(1)+"]").is(":checked")&&(o[t+"_width"]=e.find("."+t+'Dimensions[data-type="width"]').val(),o[t+"_height"]=e.find("."+t+'Dimensions[data-type="height"]').val())})),this.download(n,t,o)},notification:function(e){$("#ik-download-notification").toggle(e),$('a[data-id="download"]').toggle(!e)},request:function(e,t,n){var o=0,i=30,s=3*INKIVE.C.BOOK.num_pages,a=2500;s>i&&(i=s),i>90&&(i=90),"y"===t.cmyk&&(i+=8),"y"===t.bleed&&(i+=8),"print"===t.quality&&(i+=8),$("#svgcontent").find("image").each((function(){i++}));var l=function(e){r.display(e),$('body > header > .options button[data-action="download"]').removeClass("disabled")},c=setInterval(_.bind((function(){INKIVE.Helpers.api("inkive/fileexists","GET",{url:e},_.bind((function(t){t&&"success"===t.status&&t.exists&&(this.notification(),clearInterval(c),INKIVE.C.IS_MOBILE_APP?AppBridge.callBoth("catch_file",{url:e,page:INKIVE.Tool._current_page_number}):(l(INKIVE.TranslateHelper.translate("general.download_ready")),n?n(e):INKIVE.Helpers.saveToDisk(e)))}),this)),60===o&&(a=3e3),o>i&&(this.notification(),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.network",check_network:!0})),l(INKIVE.TranslateHelper.translate("common.error")),clearInterval(c)),o++}),this),a)},_getScaleFactor:function(e){var t=e.width,n=e.height,r=e.initial.width,o=e.initial.height;switch(e.initial.unit){case"mm":r=r*INKIVE.C.DPI/25.4,o=o*INKIVE.C.DPI/25.4;break;case"cm":r=r*INKIVE.C.DPI/2.54,o=o*INKIVE.C.DPI/2.54;break;case"in":r*=INKIVE.C.DPI,o*=INKIVE.C.DPI}var i=r/t,s=i||o/n;e.scale=Math.round(1e3*s)/1e3,1!==e.scale&&(e.scale=Math.round(1e7*i)/1e7)}}},{"../../status":605,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/web.timers.js":966}],570:[function(e,t,n){"use strict";e("core-js/modules/es.weak-map.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.object.get-own-property-descriptor.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=e("@babel/runtime/helpers/typeof");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.search.js");var i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("./download-bleeds-settings"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=new(function(){function e(){(0,i.default)(this,e),this.id=INKIVE.C.BOOK.id,this.storeData=null,this.pdfUnit=["cm","mm","in"],this.jpgUnit="px",this.downloadType=this.getDownloadFormat(),this.urlId}return(0,s.default)(e,[{key:"getDownloadFormat",value:function(){var e=this.findIndexOfStorageByKey("selectedFormat");return-1===e?this.decideFormat():this.currentStorage("selectedFormat")[e].downloadType}},{key:"decideFormat",value:function(){var e,t,n=null===(e=document.getElementById("svg_background_color"))||void 0===e?void 0:e.getAttribute("fill"),r=(null===(t=INKIVE.C.BLEED_VALUES)||void 0===t?void 0:t.bleedUnit)||"pdf-print";return"none"===n?"png":this.pdfUnit.includes(r)?"pdf-print":r===this.jpgUnit?"jpg":"pdf-print"}},{key:"currentStorage",value:function(e){return this.currentStorageName=e,JSON.parse(sessionStorage.getItem(e))}},{key:"findIndexOfStorageByKey",value:function(e){var t;switch(e){case"downloadOptions":t="downloadType";break;case"pages-to-dowload":t="urlId";break;default:t="id"}var n=this.currentStorage(e);if(n)for(var r=0;r<n.length;r++)if(this[t]===n[r][t])return r;return-1}},{key:"updateStorage",value:function(){sessionStorage.setItem(this.currentStorageName,JSON.stringify(this.storeData))}},{key:"filterDataToStore",value:function(e,t){var n,r,o,i=this.findIndexOfStorageByKey(e),s=this.currentStorage(e)||[];switch(e){case"selectedFormat":(o=-1===i?{id:this.id}:s[i]).downloadType=t,n=this.updateData(s,o,i);break;case"downloadOptions":o=-1===i?{checkBox:{},downloadType:this.downloadType}:s[i],r=this.downloadOptionsData(t,o,e),n=this.updateData(s,r,i);break;case"pages-to-dowload":s&&s[i]?(n=s)[i].pages=t:(r={pages:t,urlId:this.urlId},s?(n=s).push(r):n=[r]);break;default:n={field:t}}return n}},{key:"updateData",value:function(e,t,n){return-1===n?e.push(t):e[n]=t,e}},{key:"setSavedDownloadInputs",value:function(){var e=this.getStorageTemplate("downloadOptions");if(e){for(var t=Object.keys(e.checkBox),n=0;n<t.length;n++){document.querySelector('div[data-id=download] input[name="'.concat(t[n],'"]')).checked=e.checkBox[t[n]]}var r=INKIVE.C.BLEED_VALUES.bleedUnit;document.querySelector("#manualBleedValue").value=e.manualBleedValue?e.manualBleedValue:a.bleedDefaultValues[r];var o=this.getDownloadFormat();if(e.checkBox.includeManualBleed&&"pdf-print"===o)document.querySelectorAll("div[data-id=download] li.filter-bleed-type").forEach((function(e){e.classList.remove("hidden")})),a.showCanvasBleed(),a.setLastSavedBleedOptionsValue()}}},{key:"getStorageTemplate",value:function(e){var t=this.findIndexOfStorageByKey(e);return-1!==t?this.currentStorage(e)[t]:void 0}},{key:"downloadOptionsData",value:function(e,t){var n=e.getAttribute("name"),r="isBleed"===n?"isAutomaticBleed":"isBleed";return"isBleed"===n||"isAutomaticBleed"===n?(t.checkBox[r]=!e.checked,t.checkBox[n]=e.checked):"manualBleedValue"===n?t.manualBleedValue=e.value:t.checkBox[n]=e.checked,t}},{key:"setUrlValue",value:function(){var e=new URLSearchParams(window.location.search);this.urlId=e.get("id")}},{key:"saveFieldOnStore",value:function(e,t){this.currentStorageName=t,this.storeData=this.filterDataToStore(t,e),this.updateStorage()}}]),e}());n.default=c},{"./download-bleeds-settings":567,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.search.js":925,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967}],571:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="ui-dropdown-content" data-id="download">\n  <div class="tabs">\n    <h3>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.title",{name:"t",hash:{},data:o,loc:{start:{line:3,column:8},end:{line:3,column:49}}}))+'</h3>\n    <div class="dropdown-container">\n      <div class="desygner-dropdown-selected selected-print-format" data-print-format="pdf-print">\n        <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.get_pdf_print",{name:"t",hash:{},data:o,loc:{start:{line:6,column:14},end:{line:6,column:63}}}))+'</span>\n        <icon>\n          <svg>\n            <use xlink:href="#editor-chevron-left"></use>\n          </svg>\n        </icon>\n      </div>\n      <ul class="desygner-dropdown-select select-print-format">\n        <li class="desygner-dropdown-select-item" data-print-format="jpg">\n          <a href="#tabs-1" id="tab-jpg">\n            <span>\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.get_jpg",{name:"t",hash:{},data:o,loc:{start:{line:17,column:14},end:{line:17,column:57}}}))+'\n            </span>\n            <div class="small">\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.ideal_4_images",{name:"t",hash:{},data:o,loc:{start:{line:20,column:14},end:{line:20,column:64}}}))+'\n            </div>\n          </a>\n        </li>\n        <li class="desygner-dropdown-select-item" data-print-format="png">\n          <a href="#tabs-2" id="tab-png">\n            <span>\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.get_png",{name:"t",hash:{},data:o,loc:{start:{line:27,column:14},end:{line:27,column:57}}}))+'\n            </span>\n            <div class="small">\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.ideal_4_hq",{name:"t",hash:{},data:o,loc:{start:{line:30,column:14},end:{line:30,column:60}}}))+'\n            </div>\n          </a>\n        </li>\n        <li class="desygner-dropdown-select-item" data-print-format="pdf-stand">\n          <a href="#tabs-3" id="tab-pdf">\n            <span>\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.get_pdf",{name:"t",hash:{},data:o,loc:{start:{line:37,column:14},end:{line:37,column:57}}}))+'\n            </span>\n            <div class="small">\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.ideal_4_multi_page_digital",{name:"t",hash:{},data:o,loc:{start:{line:40,column:14},end:{line:40,column:76}}}))+'\n            </div>\n          </a>\n        </li>\n        <li class="desygner-dropdown-select-item select-active" data-print-format="pdf-print">\n          <a href="#tabs-3" id="tab-pdf-print">\n            <span>\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.get_pdf_print",{name:"t",hash:{},data:o,loc:{start:{line:47,column:14},end:{line:47,column:63}}}))+'\n            </span>\n            <div class="small">\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.ideal_4_printing",{name:"t",hash:{},data:o,loc:{start:{line:50,column:14},end:{line:50,column:66}}}))+'\n            </div>\n          </a>\n        </li>\n        <li class="desygner-dropdown-select-item" data-print-format="video">\n          <a href="#tabs-4" id="tab-video">\n            <span>\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.download_video",{name:"t",hash:{},data:o,loc:{start:{line:57,column:14},end:{line:57,column:64}}}))+'\n            </span>\n            <div class="small">\n              '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.ideal_4_animation",{name:"t",hash:{},data:o,loc:{start:{line:60,column:14},end:{line:60,column:67}}}))+'\n            </div>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <div id="tabs-1" data-type="jpeg" data-local="jpg">\n      <section id="quality-section">\n        <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.change_quality",{name:"t",hash:{},data:o,loc:{start:{line:68,column:14},end:{line:68,column:64}}}))+'</span>\n        <div class="slider-container">\n          <span class="slider-low-text">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.low",{name:"t",hash:{},data:o,loc:{start:{line:70,column:40},end:{line:70,column:80}}}))+'</span>\n          <div>\n            <div class="quality-slider"></div>\n          </div>\n          <span class="slider-high-text">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.high",{name:"t",hash:{},data:o,loc:{start:{line:74,column:41},end:{line:74,column:82}}}))+'</span>\n        </div>\n        <div class="expand-content hidden">\n          <div class="checkbox-container">\n            <ul>\n              <li class="filter-line">\n                <p class="desygner-custom-check">\n                  <label>\n                    '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.download_zip",{name:"t",hash:{},data:o,loc:{start:{line:82,column:20},end:{line:82,column:69}}}))+'\n                    <input type="checkbox" name="isZip" value="1" checked />\n                    <span class="checkmark"></span>\n                  </label>\n                </p>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n    </div>\n    <div id="tabs-2" data-type="png" data-local="png">\n      <div class="checkbox-container">\n        <ul>\n          <li class="filter-line">\n            <p class="desygner-custom-check">\n              <label>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.forced_transparency",{name:"t",hash:{},data:o,loc:{start:{line:99,column:16},end:{line:99,column:71}}}))+'\n                <input type="checkbox" name="isForcedTransparency" id="isForcedTransparency" value="1" />\n                <span class="checkmark"></span>\n              </label>\n            </p>\n          </li>\n        </ul>\n        <section id="quality-section">\n          <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.change_quality",{name:"t",hash:{},data:o,loc:{start:{line:107,column:16},end:{line:107,column:66}}}))+'</span>\n          <div class="slider-container">\n            <span class="slider-low-text">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.low",{name:"t",hash:{},data:o,loc:{start:{line:109,column:42},end:{line:109,column:82}}}))+'</span>\n            <div>\n              <div class="quality-slider"></div>\n            </div>\n            <span class="slider-high-text">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.high",{name:"t",hash:{},data:o,loc:{start:{line:113,column:43},end:{line:113,column:84}}}))+'</span>\n          </div>\n        </section>\n      </div>\n      <div class="expand-content hidden">\n        <div class="checkbox-container">\n          <ul>\n            <li class="filter-line">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.download_zip",{name:"t",hash:{},data:o,loc:{start:{line:123,column:18},end:{line:123,column:67}}}))+'\n                  <input type="checkbox" name="isZip" value="1" checked />\n                  <span class="checkmark"></span>\n                </label>\n              </p>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div id="tabs-3" data-type="pdf" class="ui-tabs-active ui-state-active" data-local="pdf-stand">\n      <div class="expand-content">\n        <div class="checkbox-container print-pdf-settings">\n          <ul>\n            <li class="filter-line">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.publish_with_cutmarks",{name:"t",hash:{},data:o,loc:{start:{line:140,column:18},end:{line:140,column:76}}}))+'\n                  <input type="checkbox" name="isCutmark" value="1" />\n                  <span class="checkmark"></span>\n                </label>\n              </p>\n            </li>\n            <li class="filter-line filter-has-submenu">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_bleed",{name:"t",hash:{},data:o,loc:{start:{line:149,column:18},end:{line:149,column:68}}}))+'\n                  <input type="checkbox" name="includeManualBleed" value="1" />\n                  <span class="checkmark"></span>\n                </label>\n                <icon data-popover="tooltip" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_bleed_tooltip",{name:"t",hash:{},data:o,loc:{start:{line:153,column:87},end:{line:153,column:145}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n              </p>\n            </li>\n            <li class="filter-line filter-bleed-type manual-bleed hidden">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.add_bleed_area",{name:"t",hash:{},data:o,loc:{start:{line:163,column:18},end:{line:163,column:69}}}))+'\n                  <input type="checkbox" name="isBleed" value="1" />\n                  <input type="number" id="manualBleedValue" name="manualBleedValue" class="disabled" pattern="\\d*" maxlength="3" />\n                  <span class="bleed-unit"></span>\n                  <span class="radiomark"></span>\n                </label>\n                <icon data-popover="tooltip" class="hide-icon mm" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_manual_bleed_tooltip","4mm",{name:"t",hash:{},data:o,loc:{start:{line:169,column:108},end:{line:169,column:179}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n                <icon data-popover="tooltip" class="hide-icon cm" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_manual_bleed_tooltip","0.4cm",{name:"t",hash:{},data:o,loc:{start:{line:174,column:108},end:{line:174,column:181}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n                <icon data-popover="tooltip" class="hide-icon in" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_manual_bleed_tooltip","0.125in",{name:"t",hash:{},data:o,loc:{start:{line:179,column:108},end:{line:179,column:183}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n                <icon data-popover="tooltip" class="hide-icon px" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_manual_bleed_tooltip","15px",{name:"t",hash:{},data:o,loc:{start:{line:184,column:108},end:{line:184,column:180}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n              </p>\n            </li>\n            <li class="filter-line filter-bleed-type bleed-type-auto hidden">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.automatic_bleed",{name:"t",hash:{},data:o,loc:{start:{line:194,column:18},end:{line:194,column:70}}}))+'\n                  <input type="checkbox" name="isAutomaticBleed" value="1" />\n                  <span class="radiomark"></span>\n                </label>\n                <icon class="hide-icon icon-info" data-popover="tooltip" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.include_automatic_bleed_tooltip",{name:"t",hash:{},data:o,loc:{start:{line:198,column:115},end:{line:198,column:183}}}))+'">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n                <icon class="hide-icon icon-info-max-pages" data-popover="tooltip" data-placement="top" data-original-title="'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.max_pages_for_autobleed",{name:"t",hash:{},data:o,loc:{start:{line:203,column:125},end:{line:203,column:185}}}))+' ">\n                  <svg>\n                    <use xlink:href="#editor-info-circle"></use>\n                  </svg>\n                </icon>\n              </p>\n            </li>\n            <li class="filter-line">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.cmyk",{name:"t",hash:{},data:o,loc:{start:{line:213,column:18},end:{line:213,column:59}}}))+'\n                  <input type="checkbox" name="isCMYK" value="1" />\n                  <span class="checkmark"></span>\n                </label>\n              </p>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div id="tabs-4" data-type="video" data-local="video"></div>\n    <h3 class="download-range-title" >'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.select_pages_title",{name:"t",hash:{},data:o,loc:{start:{line:224,column:38},end:{line:224,column:93}}}))+'</h3>\n    <div class="dropdown-container dropdown-range-container">\n      <div class="desygner-dropdown-selected select-range-type">\n        <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.text_page_range",{name:"t",hash:{},data:o,loc:{start:{line:227,column:14},end:{line:227,column:66}}}))+'</span>\n        <icon>\n          <svg>\n            <use xlink:href="#editor-chevron-left"></use>\n          </svg>\n        </icon>\n      </div>\n      <div class="antiscroll-wrap desygner-dropdown-select select-range-dropdownlist">\n        <div class="checkbox-container antiscroll-inner">\n          <ul>\n            <li class="filter-line desygner-dropdown-select-item-range select-active">\n              <p class="desygner-custom-check">\n                <label>\n                  '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.text_all",{name:"t",hash:{},data:o,loc:{start:{line:240,column:18},end:{line:240,column:63}}}))+'\n                  <input type="checkbox" id="isRangeAll" name="isRange" value="isRangeAll" data-id="isRangeAll">\n                  <span class="checkmark checkmark-all"></span>\n                </label>\n              </p>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div class="download-btn-container download-btn-jpg" data-local="jpg">\n      <div class="buttons column">\n        <a href="#" role="custom" class="btn btn-yellow action" data-action="download-client-side" data-type="jpeg">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.start_download",{name:"t",hash:{},data:o,loc:{start:{line:252,column:116},end:{line:252,column:167}}}))+' </a>\n      </div>\n    </div>\n    <div class="download-btn-container download-btn-png" data-local="png">\n      <div class="buttons column">\n        <a href="#" role="custom" class="btn btn-yellow action" data-action="download-client-side" data-type="png">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.start_download",{name:"t",hash:{},data:o,loc:{start:{line:257,column:115},end:{line:257,column:166}}}))+' </a>\n      </div>\n    </div>\n    <div class="download-btn-container download-btn-pdf" data-local="pdf-stand">\n      <div class="buttons column">\n        <a href="#" role="custom" class="btn btn-yellow action" data-action="download-server-side" data-type="pdf">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.start_download",{name:"t",hash:{},data:o,loc:{start:{line:262,column:115},end:{line:262,column:166}}}))+' </a>\n      </div>\n    </div>\n    <div class="download-btn-container download-btn-video" data-local="video">\n      <h3 class="margin-top-30" data-type="video" data-local="video">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.title",{name:"t",hash:{},data:o,loc:{start:{line:266,column:69},end:{line:266,column:123}}}))+'</h3>\n      <div class="dropdown-container" data-type="video" data-local="video">\n        <div class="desygner-dropdown-selected selected-video-format" data-video-format="mp4">\n          <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.mp4_title",{name:"t",hash:{},data:o,loc:{start:{line:269,column:16},end:{line:269,column:74}}}))+'</span>\n          <icon>\n            <svg>\n              <use xlink:href="#editor-chevron-left"></use>\n            </svg>\n          </icon>\n        </div>\n        <ul class="desygner-dropdown-select select-video-format">\n          <li class="desygner-dropdown-select-item" data-video-format="mp4">\n            <a href="#tabs-5" id="tab-video-mp4">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.mp4_title",{name:"t",hash:{},data:o,loc:{start:{line:280,column:16},end:{line:280,column:74}}}))+'\n              </span>\n              <div class="small">\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.mp4_subtitle",{name:"t",hash:{},data:o,loc:{start:{line:283,column:16},end:{line:283,column:77}}}))+'\n              </div>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-format="mov">\n            <a href="#tabs-6" id="tab-video-mov">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.mov_title",{name:"t",hash:{},data:o,loc:{start:{line:290,column:16},end:{line:290,column:74}}}))+'\n              </span>\n              <div class="small">\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.mov_subtitle",{name:"t",hash:{},data:o,loc:{start:{line:293,column:16},end:{line:293,column:77}}}))+'\n              </div>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-format="gif">\n            <a href="#tabs-5" id="tab-video-gif">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.gif_title",{name:"t",hash:{},data:o,loc:{start:{line:300,column:16},end:{line:300,column:74}}}))+'\n              </span>\n              <div class="small">\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_format.gif_subtitle",{name:"t",hash:{},data:o,loc:{start:{line:303,column:16},end:{line:303,column:77}}}))+'\n              </div>\n            </a>\n          </li>\n        </ul>\n      </div>\n      <h3 class="margin-top-30" data-type="video" data-local="video">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.title",{name:"t",hash:{},data:o,loc:{start:{line:309,column:69},end:{line:309,column:121}}}))+'</h3>\n      <div class="dropdown-container" data-type="video" data-local="video">\n        <div class="desygner-dropdown-selected selected-video-size" data-video-size="original">\n          <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.original_title",{name:"t",hash:{},data:o,loc:{start:{line:312,column:16},end:{line:312,column:77}}}))+'</span>\n          <icon>\n            <svg>\n              <use xlink:href="#editor-chevron-left"></use>\n            </svg>\n          </icon>\n        </div>\n        <ul class="desygner-dropdown-select select-video-size">\n          <li class="desygner-dropdown-select-item" data-video-size="original">\n            <a href="#tabs-8" id="tab-video-original">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.original_title",{name:"t",hash:{},data:o,loc:{start:{line:323,column:16},end:{line:323,column:77}}}))+'\n              </span>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-size="2k">\n            <a href="#tabs-9" id="tab-video-2k">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.2k_title",{name:"t",hash:{},data:o,loc:{start:{line:330,column:16},end:{line:330,column:71}}}))+'\n              </span>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-size="1080p">\n            <a href="#tabs-10" id="tab-video-1080p">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.1080p_title",{name:"t",hash:{},data:o,loc:{start:{line:337,column:16},end:{line:337,column:74}}}))+'\n              </span>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-size="720p">\n            <a href="#tabs-11" id="tab-video-720p">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.720p_title",{name:"t",hash:{},data:o,loc:{start:{line:344,column:16},end:{line:344,column:73}}}))+'\n              </span>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-size="480p">\n            <a href="#tabs-11" id="tab-video-480p">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.480p_title",{name:"t",hash:{},data:o,loc:{start:{line:351,column:16},end:{line:351,column:73}}}))+'\n              </span>\n            </a>\n          </li>\n          <li class="desygner-dropdown-select-item" data-video-size="360p">\n            <a href="#tabs-11" id="tab-video-360p">\n              <span>\n                '+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.video_size.360p_title",{name:"t",hash:{},data:o,loc:{start:{line:358,column:16},end:{line:358,column:73}}}))+'\n              </span>\n            </a>\n          </li>\n        </ul>\n      </div>\n      <div class="buttons column">\n        <button data-action="download-video" class="btn btn-yellow action" data-id="download-video">\n          <span>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.start_download",{name:"t",hash:{},data:o,loc:{start:{line:366,column:16},end:{line:366,column:66}}}))+'</span>\n        </button>\n      </div>\n    </div>\n\n    <div class="download-warning">\n      <div class="toast-notification toast-fluid" aria-live="polite" role="alert">\n        <div class="toast toast-info">\n          <div class="toast-message">'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.download_modal.download_warning",{name:"t",hash:{},data:o,loc:{start:{line:374,column:37},end:{line:374,column:89}}}))+"</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],572:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="banner-with-picture">\n  <div class="banner-picture">\n  </div>\n  <div class="banner-content">\n    <p>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.advertisment.content",{name:"t",hash:{},data:o,loc:{start:{line:5,column:7},end:{line:5,column:47}}}))+"</p>\n    <a>"+a((l(n,"t")||t&&l(t,"t")||s).call(i,"top_submenu.advertisment.link",{name:"t",hash:{},data:o,loc:{start:{line:6,column:7},end:{line:6,column:44}}}))+'</a>\n  </div>\n  <div class="banner-close">\n    <i class="desygner-icon-close"></i>\n  </div>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],573:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,o,i){return f.apply(this,arguments)};var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.array.map.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("jszip")),a=r(e("../../../../../helpers/svgToImage")),l=r(e("../../../../../helpers/progressNotification")),c=e("../../../../factory/company"),u=r(e("../../status")),d=e("../../../../../helpers/getPageContent");function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=new l.default("Quick download",!0);function f(){return(f=(0,i.default)(o.default.mark((function e(t,n,r,i,s,a){var l,c,u,d,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return l=e.sent.filter((function(e,n){return t.includes(n+1)})),m.numSteps=2*l.length,m.first(),n=n||"Untitled",c=r?r.split("/").pop():"png",e.prev=7,e.next=10,j(l,s,r,i);case 10:if(u=e.sent,d=u.length>1,p=u[0],!d){e.next=17;break}return e.next=16,g(u,c,n);case 16:p=e.sent;case 17:return setTimeout(x,300),e.next=20,w(p,d?"".concat(n,".zip"):"".concat(n,".").concat(c));case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),E("download_failed"),console.error(e.t0);case 26:m.last();case 27:case"end":return e.stop()}}),e,null,[[7,22]])})))).apply(this,arguments)}function g(e,t,n){return b.apply(this,arguments)}function b(){return(b=(0,i.default)(o.default.mark((function e(t,n,r){var i,a,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new s.default,a=i.folder(r),t.forEach((function(e,t){a.file("".concat(r,"_").concat(t+1,".").concat(n),e.split("base64,")[1],{base64:!0}),URL.revokeObjectURL(e)})),e.next=5,i.generateAsync({type:"base64"});case 5:return l=e.sent,c="data:application/zip;base64,"+l,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE,n=[t?"templates":"designs",INKIVE.C.BOOK.encodedId],!0,e.next=5,c.instance.get(n,!0);case 5:if(!(r=e.sent)||!r.pages){e.next=8;break}return e.abrupt("return",r.pages.map((function(e,t){return{id:e.design_id,pageIndex:t}})));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n,r){return _.apply(this,arguments)}function _(){return(_=(0,i.default)(o.default.mark((function e(t,n,r,i){var s,l,c,u,h,f,g,b;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],l=p(t),e.prev=2,l.s();case 4:if((c=l.n()).done){e.next=19;break}return u=c.value.pageIndex,e.next=8,(0,d.getPageContent)(u);case 8:return h=e.sent,f=h.pageContent,g=h.pageId,m.next(),e.next=14,(0,a.default)(f,{pageId:g,useTransparentBackground:n,type:r,quality:i});case 14:b=e.sent,s.push(b),m.next();case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return e.abrupt("return",s);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})))).apply(this,arguments)}function w(e,t){return I.apply(this,arguments)}function I(){return(I=(0,i.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.createElement("a")).href=t,r.target="_blank",r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){u.default.display(INKIVE.TranslateHelper.translate("top_submenu.download_modal.status_notification_downloading"))}function E(e){var t=INKIVE.TranslateHelper.translate("top_submenu.download_modal.".concat(e));u.default.display(t,5e3)}},{"../../../../../helpers/getPageContent":638,"../../../../../helpers/progressNotification":641,"../../../../../helpers/svgToImage":643,"../../../../factory/company":122,"../../status":605,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968,jszip:1026}],574:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var a=e("../../../../../../../src/components/sidebar-animation/animation-events"),l=r(e("../../../../../../../src/config/constants")),c=r(e("./quick-download")),u=r(e("./download-storage-manage")),d=e("../../../../facade/editor/editor"),p=e("../../../../facade/project/project"),h=e("./print-advertisement.hbs"),m=e("./download-bleeds-settings"),f=e("./download-content-settings"),g=function(e){e.forEach((function(e){"attributes"===e.type&&"class"===e.attributeName&&e.target.classList.contains("disabled")&&m.preventDisable()}))};t.exports=Backbone.View.extend({events:{"click .desygner-dropdown-select-item[data-video-size]":f.selectVideoSize,"click .desygner-dropdown-select-item[data-video-format]":f.selectVideoFormat,"click .desygner-dropdown-select-item[data-print-format]":f.selectDownloadType,"click #isRangeAll":f.selectPagesRange,"click .export-range-page-checkbox":f.selectPagesRange,"click .tabs .selected-video-size":f.downloadDropDownList,"click .tabs .selected-video-format":f.downloadDropDownList,"click .tabs .selected-print-format":f.downloadDropDownList,"click .tabs .select-range-type":f.downloadDropDownList,"click .select-range-type":f.downloadRangeSelect,'click .filter-line .desygner-custom-check [name="isCutmark"]':f.toggleDownloadSubOption,"click .filter-has-submenu":m.toggleManualBleedingRadioButtons,'click .filter-bleed-type [name="isAutomaticBleed"]':m.radioToggleCheck,'click .filter-bleed-type [name="isBleed"]':m.radioToggleCheck,'click .filter-line .desygner-custom-check [name="isCMYK"]':f.toggleDownloadSubOption,"click .filter-line #isForcedTransparency":f.updateDownloadOptionsStore,"change input#manualBleedValue":m.setManualBleed},initialize:function(){var e=this;this.tool=INKIVE.Tool.getInstance(),this.canvas=this.canvas||this.tool.editor.canvas,this.initDownload(),this.$el.find('.action[data-action="download-video"]').on("click",(function(t){return e.downloadVideo(t)})),this.$el.find('.action[data-action="download-client-side"]').on("click",(function(t){return e.downloadClientSideRendering(t)})),this.$el.find('.action[data-action="download-server-side"]').on("click",(function(t){return e.downloadServerSideRendering(t)})),f.selectDownloadType(),m.recommendedBleedUnitMsg(),this.createPrintAdvertisement(),this.addResizeEvent(),$('.options button[data-action="download"]').on("click",f.downloadDefaultRange),m.updateManualBleed(),f.downloadDefaultRange();var t=document.querySelector("header"),n=new MutationObserver(g);n.observe(t,{attributes:!0});setTimeout((function(){n&&n.destroy()}),3e3),this.hideRestrictedSelectItems(),this.addLockDownloadButtonEvents(),function(){var e=INKIVE.C.SHOW_ANIMATION&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_animation_file"),t=document.querySelector(".element.video");if(e&&t){var n=document.querySelector("ul.select-print-format").querySelector('li.desygner-dropdown-select-item[data-print-format="video"]');n.click(),n.click()}}()},addLockDownloadButtonEvents:function(){INKIVE.EditorFacade.isLoading&&this.toggleLockDownload(!0),INKIVE.EditorFacade.listenIsLoading(this.toggleLockDownload.bind(this))},toggleLockDownload:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.timeout.lockDownloadButtonDuringActions,n=document.querySelectorAll('.ui-dropdown-content[data-id="download"] .download-btn-container .btn'),r=document.querySelector('.ui-dropdown-content[data-id="download"] .download-warning'),o=document.querySelector("div.select-range-type"),i=!e&&o.classList.contains("error");r.classList.toggle("active",e),e&&setTimeout(this.toggleLockDownload,t),i||n.forEach((function(t){t.classList.toggle("disabled",e)}))},hideRestrictedSelectItems:function(){var e=this.el.querySelectorAll(".desygner-dropdown-select-item a");(0,s.default)(e).forEach((function(e){var t=e.id,n=e.parentElement;"tab-video"===t&&(INKIVE.C.SHOW_ANIMATION&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_animation_file")||(n.style.display="none"))}))},addResizeEvent:function(){var e=this;$(window).resize((function(){var t=e.tool.editor.canvas;$('input[name="includeManualBleed"]').is(":checked")&&(t.runExtensions("hideBleedClipper",{keepDisabled:!1}),t.runExtensions("disableGuideLine",{keepVisible:!1}),$("header").removeClass("disabled"),$("#tool-panel .tool-panel-inner .tool-menu, #tool-panel .tool-panel-inner .tool-content").removeClass("disabled"),$('input[name="includeManualBleed"]').attr("checked",!1),$(".filter-bleed-type").addClass("hidden"))}))},show:function(){this.$el.children(".tabs").show(),INKIVE.Modal.loaderClose(this.$el),this.$el.find(".desygner-dropdown-select").removeClass("visible");var e=INKIVE.C.SHOW_ANIMATION&&INKIVE.RestrictionsFacade.isFunctionalityAllowed("function_animation_file"),t=document.querySelector(".tool-menu li > a[tag=Animation]");"video"===sessionStorage.getItem("lastSelectedTab")&&e&&t&&t.click();var n=u.default.getStorageTemplate("downloadOptions");f.shortPageRange(),n?u.default.setSavedDownloadInputs():m.updateBleedSize()},initDownload:function(){var e=this.$el;if(document.querySelector("#tabs-3 .print-pdf-settings .bleed-unit").textContent=INKIVE.C.BLEED_VALUES.bleedUnit,this.canvas.runExtensions("generateNewBleed",{}),e.length){var t=this.tool.editor.canvas;e.find(".tabs").tabs();var n=["thumb","web","mobile"],r=t.contentW,o=t.contentH;737===r&&521===o&&(r=842,o=595);var i,s,a=r/o;e.find(".quality-slider").slider({max:100,min:1,value:92,slide:function(t,n){e.find('div[data-type="jpeg"] .estimated-size .value').html(INKIVE.Helpers.calculateJpegSize(r,o,n.value))},start:function(e,t){},stop:function(e,t){}}).slider("float"),e.find(".ui-dropdown .input-icon").off("click").on("click",(function(e){$(e.target).parents(".ui-dropdown").find("ul").toggle()})),e.find("a.quality").off("click").on("click",(function(){e.find("a.quality").removeClass("active"),$(this).addClass("active")})),d("rangeCurrent"),d("thumb",110),d("mobile",600),d("web",800),i=!0,(s=$('[type=checkbox][name="isJpgWebQuality"], [type=checkbox][name="isPngWebQuality"]')).on("change",(function(){var e=$(this).closest(".ui-tabs-panel"),n=e.find(".quality-slider");if(e.find(".expand-panel").toggleClass("disabled",this.checked),n.length){var r=this.checked?60:91;n.slider({value:r}),n.toggleClass("disabled",this.checked),e.find(" .estimated-size .value").html(INKIVE.Helpers.calculateJpegSize(t.contentW,t.contentH,r))}})),i&&s.trigger("change"),_.each(n,(function(t){var n="is"+(o=t,o.charAt(0).toUpperCase()+o.slice(1)),r="."+t+"Dimensions";var o;e.find('[type=checkbox][name="'+n+'"]').on("change",(function(e){$(this).parents("p").find(r).toggleClass("disabled")}))})),_.each(_.union(["rangeCurrent"],n),(function(t){t+="Dimensions",e.find("."+t).change((function(n){!function(t,n){var r=parseInt(t.val()),o=t.attr("data-type");r<16&&(r=16);r>3e3&&(r=3e3);var i="width"===o?r:parseInt(r/a),s="width"!==o?r:parseInt(r/a);e.find("."+n+'[data-type="width"]').val(i),e.find("."+n+'[data-type="height"]').val(s)}($(this),t)}))})),e.find('div[data-type="png"] .estimated-size .value').html(INKIVE.Helpers.calculatePngSize(r,o)),e.find('div[data-type="jpeg"] .estimated-size .value').html(INKIVE.Helpers.calculateJpegSize(r,o,e.find(".quality-slider").slider("option","value"))),1===INKIVE.C.BOOK.num_pages&&(e.find('[type=checkbox][name="isRange"][id="isRangeCurrent"]').parents("div.checkbox").hide(),e.find('[type=checkbox][name="isRange"][id="isRangeSelected"]').parents("div.checkbox").hide()),e.find('[type=checkbox][name="isRange"]').off("change").on("change",(function(t){$(this).is(":checked")&&(e.find(".ui-dropdown, .rangeCurrentDimensions").addClass("disabled"),"isRangeSelected"===$(this).attr("id")?e.find(".ui-dropdown").removeClass("disabled"):"isRangeCurrent"===$(this).attr("id")?(e.find(".rangeCurrentDimensions").removeClass("disabled"),c(INKIVE.Tool._current_page_number,INKIVE.Tool._current_page_number)):c(1,INKIVE.C.BOOK.num_pages))})),u(),e.find(".select-dropdown").off("change").on("change",(function(){var t=e.find("select#page_from_options"),n=e.find("select#page_to_options"),r=parseInt(t.val()),o=parseInt(n.val());t.is(this)&&r>=o&&n.val(r),t.is(this)||o<=r&&n.val(r)})),e.find('[type=checkbox][name="isRange"][id="isRangeAll"]').is(":checked")&&c(1,f.selectedPages.length-1);var l=e.find("[name=isAutomaticBleed], [name=isBleed]");l.on("change",(function(){var e=this.checked;l.attr("checked",!1),this.checked=e,$("#manualBleedValue").toggleClass("disabled",!(this.checked&&"isBleed"===this.name)),$("#manualBleedValue").is(".disabled")||($("header").removeClass("disabled"),$("#tool-panel .tool-panel-inner .tool-menu, #tool-panel .tool-panel-inner .tool-content").removeClass("disabled"))})),INKIVE.DesignHandler.on("added removed",u)}function c(t,n){e.find("#page_from_options").val(t),e.find("#page_to_options").val(n)}function u(){for(var t=e.find("select#page_from_options").empty(),n=e.find("select#page_to_options").empty(),r=1,o=INKIVE.C.BOOK.num_pages;r<=o;r++){var i=$.parseHTML('<input data-id="'+r+'">'+r);t.append($(i).clone()),n.append($(i).clone())}c(1,INKIVE.C.BOOK.num_pages)}function d(t,n){var i="."+t+"Dimensions",s=n&&r>n?n:r,l=n&&r>n?parseInt(n/a):o;e.find(i+'[data-type="width"]').val(s),e.find(i+'[data-type="height"]').val(l)}},downloadVideo:function(){return(0,i.default)(o.default.mark((function e(){var t,n,r,i,s,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector('[data-action="download"].desygner-clear-button'),n=document.querySelector('.ui-dropdown-content[data-id="download"]'),document.querySelectorAll(".hover-outlined").forEach((function(e){return e.remove()})),n.style.display="none",t.classList.toggle("disabled"),r=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0}),e.next=8,d.handle("page","save");case 8:return r.close(),i={},e.next=12,p.loadPageInfo();case 12:s=e.sent,l=s.page_info,c=l.filter((function(e){var t=e.page_number;return!f.selectedPages.includes(+t)})).map((function(e){return e.design_id})),i.pagesToExclude=c,(0,a.dispatchAnimationEvent)("downloadVideo",i);case 17:case"end":return e.stop()}}),e)})))()},downloadServerSideRendering:function(e){var t=$(e.currentTarget).attr("data-type"),n=this.tool.editor.canvas;if(0!==f.selectedPages.length){var r=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0}),o=document.querySelector('.ui-dropdown-content[data-id="download"] div[data-type="'.concat(t,'"]'));document.querySelectorAll(".hover-outlined").forEach((function(e){return e.remove()})),$('.ui-dropdown-button[data-id="download"]').click(),this.canvas.runExtensions("getBleedValues").active&&(this.canvas.runExtensions("hideBleedClipper",{keepDisabled:!1}),this.canvas.runExtensions("disableGuideLine",{keepVisible:!1})),d.handle("page","save").then((function(){INKIVE.Helpers.DownloadProcedure.execute($(o),{contentW:n.contentW,contentH:n.contentH,format:t,selectedPages:f.selectedPages,quality:f.quality,downloadType:"normal"},(function(){r.close(),m.hideCanvasBleed()}))}),(function(){r.close(),m.hideCanvasBleed()}))}else f.warningNoPages()},downloadClientSideRendering:function(e){if(INKIVE.C.SERVER_SIDE_IMAGE_RENDERING)return this.downloadServerSideRendering(e);var t=f.selectedPages;if(void 0!==t&&0!==t.length){var n,r=$(e.currentTarget).attr("data-type"),o=document.querySelector('.ui-dropdown-content[data-id="download"] div[data-type="'.concat(r,'"]'));document.querySelectorAll(".hover-outlined").forEach((function(e){return e.remove()})),$('.ui-dropdown-button[data-id="download"]').click(),"png"===r?n="image/png":"jpeg"===r?n="image/jpeg":"pdf"===r&&(n="application/pdf");var i="jpeg"!==r?1:parseInt(o.querySelector(".ui-slider-handle").style.left)/100,s=Base64.decode(INKIVE.C.BOOK.name),a="png"===r&&!0===o.querySelector("[name=isForcedTransparency]").checked,l="pdf"===r&&document.querySelector('input[name="includeManualBleed"]').checked,u=document.querySelector('[data-action="download"].desygner-clear-button'),p=document.querySelector('.ui-dropdown-content[data-id="download"]');p.classList.toggle("disabled"),u.classList.toggle("disabled"),d.handle("page","save").then((function(){(0,c.default)(t,s,n,i,a,l).then((function(){p.classList.toggle("disabled"),u.classList.toggle("disabled"),m.hideCanvasBleed(),$("header").removeClass("disabled"),$("#tool-panel .tool-panel-inner .tool-menu, #tool-panel .tool-panel-inner .tool-content").removeClass("disabled")}))}))}else f.warningNoPages()},createPrintAdvertisement:function(){var e=document.querySelector('.options > button[data-action="order-print"]');if(e&&!e.classList.contains("hidden")){this.$el.append($(h()));var t=this.el.querySelector(".banner-with-picture");t.querySelector(".banner-close").addEventListener("click",(function(){return t.remove()})),t.querySelector("a").addEventListener("click",(function(){document.querySelector('.options > button[data-action="download"]').click(),e.click()}))}}})},{"../../../../../../../src/components/sidebar-animation/animation-events":1078,"../../../../../../../src/config/constants":1090,"../../../../facade/editor/editor":91,"../../../../facade/project/project":113,"./download-bleeds-settings":567,"./download-content-settings":568,"./download-storage-manage":570,"./print-advertisement.hbs":572,"./quick-download":573,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.string.includes.js":915,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],575:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js");var r=e("../../status"),o=e("../../../../facade/editor/editor"),i=e("../../../../facade/design/design"),s=e("../../../../factory/images");t.exports=Backbone.View.extend({initialize:function(){INKIVE.C.IS_MOBILE||(this.tool=INKIVE.Tool.getInstance(),_.bindAll(this,"initMenu","handleMenuOption","calculateImageQuality","lockEvent","doLock","addFileMenuElement"),INKIVE.C.IS_AUTO_SAVE="false"!==localStorage.getItem("autosave"),this.globalLock="true"===localStorage.getItem("lock_elements"),o.once("page.move_to",this.doLock),o.on("page.save_from_keyboard",this.saveEvent),o.on("add.filemenu",this.addFileMenuElement),this.initializeItems(),this.initMenu(),o.trigger("created.filemenu"))},getMenuPosition:function(){return{top:$("header").height()+6,left:$("[data-action=file]").offset().left}},getCanvas:function(){return this.tool=this.tool||INKIVE.Tool.getInstance(),this.canvas=this.canvas||this.tool.editor.canvas,this.canvas},initMenu:function(){$.contextMenu({selector:"[data-action=file]",trigger:"left",hideOnSecondTrigger:!0,events:{hide:function(){return $("[data-action=file]").removeClass("context-menu-active").blur(),!0}},position:_.bind((function(e){e.$menu.css(this.getMenuPosition())}),this),build:_.bind((function(e){return e.one("contextmenu:visible",_.bind((function(){var e=$(".context-menu-root");_.each(this.items,(function(t,n){e.find(".context-menu-"+n).attr("data-action",n)}))}),this)),{callback:this.handleMenuOption,items:this.items}}),this)})},handleMenuOption:function(e,t,n){switch(this.canvas=this.getCanvas(),e){case"save":this.saveEvent(n);break;case"imgquality":this.imgqualityEvent(n);break;case"grid":this.gridEvent(n);break;case"rulerandguides":this.rulerAndGuidesEvent(n);break;case"bleed":this.bleedEvent(n);break;case"autosave":this.autoSaveEvent(n);break;case"lockpage":this.lockEvent(n);break;case"translate":this.translateEvent();break;default:this["handleCustomEvent"+e]()}},saveEvent:function(e){var t=$(e.currentTarget),n=INKIVE.TranslateHelper.translate;t.addClass("context-menu-disabled"),r.display(n("general.saving"),null,!0),o.handle("page","save",{confirm_draft:!0}).then((function(e){INKIVE.hasEditorUnsavedChanges=!1,t.removeClass("context-menu-disabled"),r.display(e?"":n("advice.content.nothing_to_save"))}),(function(e){r.display(e||n("common.error"))}))},autoSaveEvent:function(){INKIVE.C.IS_AUTO_SAVE=!INKIVE.C.IS_AUTO_SAVE,localStorage.setItem("autosave",INKIVE.C.IS_AUTO_SAVE),INKIVE.Tool.autoSave()},lockEvent:function(){var e=this.globalLock=!this.globalLock;localStorage.setItem("lock_elements",e+""),this.doLock()},translateEvent:function(){INKIVE.EditorFacade.handle("translations","display")},doLock:function(){$("#svgcontent").toggleClass("global-locked",this.globalLock),this.canvas&&this.canvas.clearSelection(),INKIVE.Menus.elementPopupMenu&&INKIVE.Menus.elementPopupMenu.show(null,"locked")},imgqualityEvent:function(e){var t=$("#image-quality-box-group"),n=_.bind((function(e,t){var r=s.getOriginalUrl(s.getImageUrl(e))||s.getOriginalUrl(e.getAttribute("xlink:href"))||s.getOriginalUrl(e.getAttribute("data-original-href"))||s.getImageUrl(e)||e.getAttribute("xlink:href");t=t||0,t++>5||(r?_.bind(a,this)(r,e):_.delay(_.partial(n,e,t),500))}),this);if(e=e||{},!t.length){var r=$("#svgcontent").find("image");return this.imgqualityCalculated=0,this.isimgQualityAcceptable=!0,!INKIVE.C.IS_MOBILE&&r.length&&INKIVE.Modal.togglePageLoader(!0),o.once("page.saving",_.partial(this.getCanvas().runExtensions,"removeImageQualityBox")),this.getDynamoImagesInDesign().then(_.bind((function(t){r.each(_.bind((function(r,o){var a=s.getOriginalUrl(o.getAttribute("xlink:href"))||s.getOriginalUrl(o.getAttribute("data-original-href")),l=a&&_.find(t,(function(e){return INKIVE.Helpers.getCORSSecureUrl(e.original)===INKIVE.Helpers.getCORSSecureUrl(a)}));i.trigger("image.check_quality.start",{id:o.id}),l?(e=_.extend(e,{image:o,originalImage:l}),i.trigger("image.check_quality.end",{id:o.id,isAcceptable:this.calculateImageQuality(e)})):n(o)}),this)),this.getCanvas().clearSelection(),INKIVE.C.IS_MOBILE||INKIVE.Modal.togglePageLoader(!1)}),this)),r.length}function a(t,r){s.smartLoad(t,{width:1/0,height:1/0},_.bind((function(t,o){e=_.extend(e,{image:r,originalImage:{original_width:o.width,original_height:o.height}}),t===INKIVE.C.Status.success?i.trigger("image.check_quality.end",{id:r.id,isAcceptable:this.calculateImageQuality(e)}):n(s.getOriginalUrl($("#svgcontent").find("#"+r.id).attr("xlink:href"),r))}),this))}this.canvas.runExtensions("removeImageQualityBox",{})},getDynamoImagesInDesign:function(){var e=$.Deferred();return INKIVE.Helpers.api("photo/saved","GET",{id:INKIVE.C.BOOK.id,type:"photos"},(function(t){e.resolve(_.map(t.data,"image"))}),(function(){e.resolve([])})),e},calculateImageQuality:function(e){var t=300*e.image.getAttribute("width")/INKIVE.C.DPI,n=300*e.image.getAttribute("height")/INKIVE.C.DPI,r=e.originalImage.original_width>=t||e.originalImage.original_height>=n;return this.getCanvas().runExtensions("generateImageQualityBox",{elem:e.image,isAcceptable:r}),r||(this.isimgQualityAcceptable=!1),this.imgqualityCalculated++,this.imgqualityCalculated!==$("#svgcontent").find("image").length||e.skipAdvice||this.getCanvas().call("advice.show",this.isimgQualityAcceptable?"img-quality-acceptable":"low-img-quality-present"),r},gridEvent:function(){var e=$("#ik-grid-snap"),t=e.is(".active")?"disableGrid":"enableGrid";e.toggleClass("active"),this.canvas.runExtensions(t,{})},rulerAndGuidesEvent:function(){var e=this.canvas.runExtensions("isRulersAndGuidesShown",{})?"hideRulersAndGuides":"showRulersAndGuides";this.canvas.runExtensions("enableRuler",{}),this.canvas.runExtensions(e,{}),document.querySelector("#ruler-horizontal").style.left||document.querySelector("#tool-panel #sidebar-resize-button").click()},bleedEvent:function(){this.canvas.runExtensions("generateNewBleed",{});var e=this.canvas.runExtensions("getBleedValues",{}),t=$("#pages-panel .pages-panel");e.active||t.is(".pages-panel-opened")&&t.find(".btn-panel.btn-show-pages").trigger("click"),this.canvas.runExtensions(e.active?"hideBleedClipper":"showBleedClipper",{keepDisabled:!0}),this.canvas.runExtensions(e.active?"disableGuideLine":"enableGuideLine",{keepVisible:!0})},addFileMenuElement:function(e){var t={},n=0;_.each(this.items,(function(r,o){n++,t[o]=r,n===e.position&&(t[e.id]={name:e.label,className:"context-menu-"+e.id})})),this.items=t,this["handleCustomEvent"+e.id]=e.callback},initializeItems:function(){this.items=this.items||{save:{name:INKIVE.TranslateHelper.translate("general.save"),className:"context-menu-save"},autosave:{name:INKIVE.TranslateHelper.translate("top_submenu.file.autosave"),className:"context-menu-auto-save",icon:function(e,t,n,r){INKIVE.C.IS_AUTO_SAVE&&!INKIVE.C.IS_UNDER_REVIEW&&!INKIVE.C.REVIEW_MODE&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}},translate:{name:"Translate",className:"context-menu-translate"},sep1:"---------",lockpage:{name:INKIVE.TranslateHelper.translate("top_submenu.file.lock_page"),icon:_.bind((function(e,t,n,r){this.globalLock&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}),this)},grid:{name:INKIVE.TranslateHelper.translate("top_submenu.file.show_grid"),className:"context-menu-grid",icon:function(e,t,n,r){$("#ik-grid-snap").is(".active")&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}},rulerandguides:{name:INKIVE.TranslateHelper.translate("top_submenu.file.show_ruler"),className:"context-menu-rulerandguides",icon:function(e,t,n,r){INKIVE.Tool.getInstance().editor.canvas.runExtensions("isRulersAndGuidesShown",{})&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}},bleed:{name:INKIVE.TranslateHelper.translate("top_submenu.file.show_bleed"),className:"context-menu-bleed",icon:function(e,t,n,r){$("#svgcontent").is(".bleed-clipper-active")&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}},sep2:"---------",imgquality:{name:INKIVE.TranslateHelper.translate("top_submenu.file.check_image_quality"),className:"context-menu-imgquality",icon:function(e,t,n,r){$("#image-quality-box-group").length&&t.html('<i class="fa fa-check"></i><span>'+r.name+"</span>")}}};var e=INKIVE.C.WHITE_LABEL_CONFIGURATION;"emerson"===(e.parent_company||e.parent_domain)||INKIVE.C.TRANSLATION_DATA||delete this.items.translate}})},{"../../../../facade/design/design":47,"../../../../facade/editor/editor":91,"../../../../factory/images":127,"../../status":605,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884}],576:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("../../../../factory/user-info");t.exports=Backbone.View.extend({initialize:function(){_.bindAll(this,"requestSize","downloadPdf","goToPrintTemplates");var e=INKIVE.Tool.getInstance();this.canvas=e.editor.canvas,$('a[data-action="request-size"]').on("click",this.requestSize),$('a[data-action="resize-design"]').on("click",this.resizeDesign),$('a[data-action="explore-templates"]').on("click",this.goToPrintTemplates),$('a[data-action="download-pdf"]').on("click",this.downloadPdf)},requestSize:function(e){e.preventDefault();var t=e.currentTarget,n=INKIVE.FormatFactory.getCurrentSize(),o=INKIVE.C.BOOK.id;function i(e){var t=e.parentNode.querySelector(".request-loading"),n=t.style.display;t.style.display="none"===n||""===n?"block":"none"}t.style.display="none",i(t),r.get().then(_.bind((function(e){var r=new XMLHttpRequest,s="Basic "+btoa(e.credentials.token+":"+e.credentials.hash),a=INKIVE.C.BASE_URL+"untidy-api/request-size",l="width="+n.width+"&height="+n.height;l+="&unit="+n.unit+"&projectId="+o,r.open("POST",a),r.setRequestHeader("Authorization",s),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var e=t.parentNode.querySelector(".request-success");e&&(e.style.display="flex"),i(t)},r.send(l)}),this))},downloadPdf:function(e){e.preventDefault();var t=INKIVE.C.BOOK.num_pages,n=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0}),r=$.extend({format:"pdf",contentW:this.canvas.contentW,contentH:this.canvas.contentH,baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL,getUrlResponse:!INKIVE.C.IS_MOBILE},r),o={book_id:INKIVE.C.BOOK.id,forced_transparency:"n",bleed:"y",bleed_type:"auto",bleed_unit:INKIVE.C.BLEED_VALUES.bleedUnit||"px",cutmarks:"n",is_zip:"n",cmyk:"y",has_filter:"n",quality:"print",start_page:1,end_page:t,width:r.contentW,height:r.contentH,format:r.format,is_outline:"y"};INKIVE.EditorFacade.handle("page","save").then((function(){INKIVE.Helpers.DownloadProcedure.download((function(e){INKIVE.Helpers.saveToDisk(e),n.close()}),r,o)}),(function(){n.close()}))},goToPrintTemplates:function(e){e.preventDefault(),INKIVE.EditorFacade.handle("page","save").then((function(){window.open(INKIVE.C.BASE_URL+"create/print")}))},resizeDesign:function(e){$(".ui-dropdown-content").hide(),$("header").find("[data-action=resize]").trigger("click")}})},{"../../../../factory/user-info":161,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],577:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.filter.js");var r=e("../../../../factory/formats"),o=e("../../../../factory/user-info"),i=e("../../../../facade/editor/editor"),s=e("../../../../facade/design/design"),a=e("../file/view");t.exports=Backbone.View.extend({orderPrintPopupWidth:420,toolPanelWidth:398,canvasLeftMargin:25,initialize:function(){_.bindAll(this,"show","hide","open","close","getOrderPrintData","forceDownload","toggleBleed","imageQualityCheck","replaceImage");var e=INKIVE.Tool.getInstance(),t=$('<panel id="order-print-panel">');t.html('<div class="order-print" aurelia-app="print/main"></div>'),$("#content").append(t),this.canvas=e.editor.canvas,this.$workArea=$("#workarea, #svgcontent>.main, #ik-grid-snap"),this.$el=$("#order-print-panel"),INKIVE.C.IS_MOBILE||(INKIVE.Helpers.getStripeScript(),$("<link/>",{rel:"stylesheet",type:"text/css",href:INKIVE.Helpers.getSecureUrl("/bundles/desygnerbusiness/css/common/font-icons.css")}).appendTo("head"))},show:function(){var e=this.$el;this.toggleBleed(!1),this.imageQualityCheck({show:!1}),this.open(),INKIVE.C.IS_MOBILE||INKIVE.Modal.loader(e),o.get().then(_.bind((function(t){var n=this.getOrderPrintData(t);INKIVE.C.IS_MOBILE?i.trigger("printing.opened",n):INKIVE.Helpers.getAureliaLibraries(this.$el.find('[aurelia-app="print/main"]')).then((function(){i.trigger("printing.opened",n),INKIVE.Modal.loaderClose(e)}))}),this))},hide:function(){this.toggleBleed({show:!1}),this.imageQualityCheck({show:!1}),this.replaceImage({show:!1}),this.close()},open:function(){if(INKIVE.Tool.disableUI(),this.$workArea.css("pointer-events","none"),$("#svgcontent, body").addClass("order-print-active"),!INKIVE.C.IS_MOBILE){var e=$("#pages-panel .pages-panel"),t=$("#tool-panel"),n=$("#canvas-panel"),r=$("#element-popupmenu"),o=$("#canvas-panel, #element-popupmenu, #sidebar-resize-button");$(document).trigger("sidebarpanel.show"),this.canvas.clearSelection(),this.canvasPanelLeft=this.canvasPanelLeft||parseInt(n.css("left"));var s=t.find(".tool-menu").outerWidth();t.addClass("collapsed"),e.is(".pages-panel-opened")&&e.find(".btn-show-pages").trigger("click"),t.css("width",s).css("opacity",1),o.css("left",s),n.css("width","").css("left",s),n.css("right",this.orderPrintPopupWidth),r.css("width",""),this.togglePagesPanel(!0),$("[data-action=order-print]").addClass("order-print-shown"),this.$el.css("width",this.orderPrintPopupWidth).children().show(),r.find("ul").hide(),_.delay((function(){i.handle("zoom","fit")}),500)}},close:function(e){var t=$("#element-popupmenu"),n=$("[data-action=order-print]");INKIVE.C.IS_MOBILE||(this.togglePagesPanel(!1),this.$el.css("width",0).children().hide(),$("#tool-panel").css("width",this.toolPanelWidth).css("opacity","").removeClass("collapsed"),$("#sidebar-resize-button").css("left",this.toolPanelWidth),$("#element-popupmenu, #pages-panel").css("left",""),$("#canvas-panel").css("left","").css("right",""),t.css("width",""),n.removeClass("order-print-shown").removeClass("active"),n.addClass("disabled").delay(500).queue((function(){$(this).removeClass("disabled"),$(this).dequeue()}))),$("#svgcontent, body").removeClass("order-print-active"),e&&e.replaceImage||(this.$workArea.css("pointer-events",""),INKIVE.Tool.enableUI(),INKIVE.C.IS_MOBILE||t.find("ul").show()),_.delay((function(){i.handle("zoom","fit")}),500)},togglePagesPanel:function(e){e?(INKIVE.Menus.pagesPanel.setPagesOpen(),INKIVE.Menus.pagesPanel.showCustomZoom()):(INKIVE.Menus.pagesPanel.setPagesClosed(),INKIVE.Menus.pagesPanel.hideCustomZoom())},getOrderPrintData:function(e){var t=i.get("page"),n=function(t){var n=e.details.filter((function(e){return e.type===t}));return n.length?n[0].content:""};return{apiKey:CONFIG&&CONFIG.api_key,width:this.canvas.contentW,height:this.canvas.contentH,units:r.getCurrentSize().unit,bleed:this.canvas.runExtensions("getBleedValues"),user:{name:n("first_name"),email:e.email,countryId:n("country_code")},design:{currentPage:t.current,totalPages:t.total,designId:t.id,projectId:INKIVE.C.BOOK.id}}},forceDownload:function(e){var t=this,n=(e=e||{}).startPage||1,r=e.endPage||INKIVE.C.BOOK.num_pages,o=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0}),s=$.extend({format:"pdf",contentW:this.canvas.contentW,contentH:this.canvas.contentH,baseUrl:INKIVE.C.BASE_URL,staticUrl:INKIVE.C.STATIC_URL,getUrlResponse:!INKIVE.C.IS_MOBILE},s),a={book_id:INKIVE.C.BOOK.id,forced_transparency:"n",bleed:"y",bleed_type:e.bleed_type||"manual",bleed_unit:INKIVE.C.BLEED_VALUES.bleedUnit||"px",cutmarks:"n",is_zip:"n",cmyk:"y",has_filter:"n",quality:"print",start_page:n,end_page:r,width:s.contentW,height:s.contentH,format:s.format,is_outline:"y"};"auto"!==e.bleed_type&&(a.bleed_amount=INKIVE.C.BLEED_VALUES.bleedSize,a.slug_unit=a.bleed_unit,a.slug_amount=this.canvas.runExtensions("getSlugValues")),this.canvas.runExtensions("hideBleedClipper"),INKIVE.EditorFacade.handle("page","save").then((function(){t.canvas.runExtensions("showBleedClipper"),INKIVE.Helpers.DownloadProcedure.download((function(t){i.trigger("printing.force_download.response",t),e.skip_download||INKIVE.Helpers.saveToDisk(t),o.close()}),s,a)}),(function(){o.close()}))},toggleBleed:function(e){var t=e.show;this.currentState=t?"toggleBleed":"",this.$workArea.css("pointer-events",t?"":"none"),t&&this.canvas.runExtensions("generateNewBleed",{}),t||this.canvas.clearSelection(),this.canvas.runExtensions(t?"showBleedClipper":"hideBleedClipper",{keepDisabled:!0}),this.canvas.runExtensions(t?"enableGuideLine":"disableGuideLine",{keepVisible:!0})},imageQualityCheck:function(e){var t=e.show,n=[],r=0;function o(e){n.push(e),n.length===r&&(i.trigger("printing.images_quality_checked",n),n=[],s.off("image.check_quality.end",o),INKIVE.C.IS_MOBILE&&$(".image-quality-box").on("touchend",_.bind((function(e){var t=$(e.currentTarget);this.canvas.runExtensions("removeImageQualityBox",{}),i.trigger("printing.image-quality.selected",{id:t.attr("data-id"),high_quality:t.is(".high-quality")})}),this)))}this.currentState=t?"imageQualityCheck":"",s.off("image.check_quality.end",o),this.canvas.runExtensions("removeImageQualityBox"),t&&((r=a.prototype.imgqualityEvent({skipAdvice:!0}))?s.on("image.check_quality.end",o):i.trigger("printing.images_quality_checked",n))},replaceImage:function(e){var t=_.bind((function(e){$("#printing-replaceimg-cancel").remove(),e&&(this.isImageCrop=!1);if("replaceImage"!==this.currentState||this.isImageCrop)return;this.open({replaceImage:!0}),_.delay(_.bind(this.imageQualityCheck,this,{show:!0}),500)}),this),n=_.bind((function(){if("replaceImage"!==this.currentState)return;var e=c?"background":"image";this.canvas.setMode("select"),this.$workArea.css("pointer-events",""),_.delay((function(){$("[data-action=on_layoutConfirm]").parent().siblings().remove(),$("#element-popupmenu").find("ul").show()}),200),i.once(e+".crop.end",_.partial(t,!0)),_.delay((function(){i.handle(r,"crop")}),500)}),this);if(e&&e.id&&"imageQualityCheck"===this.currentState){var r="background"===e.id?"svg_background_image":e.id,o=$("#"+r);if(o.length){var a=$('<ul style=""><li><a class="btn btn-onmenu action" id="printing-replaceimg-cancel"><i class="icon-deselect"></a></li></ul>'),l=$("#tool-panel"),c=o.parent().is(".background");$(".root-popupmenu").find(".special-buttons").append(a.on("click",t)),this.imageQualityCheck({show:!1}),this.canvas.setMode("replace-"+(c?"background":"image")),this.canvas.selectOnly(o),this.close({replaceImage:!0}),this.currentState="replaceImage",l.find("[href=#tabImages]").click(),l.find(".tool-menu").addClass("disabled"),l.removeClass("disabled"),s.once(c?"background.update.updating_source":"image.update.source.url",(function(){l.addClass("disabled")})),this.isImageCrop=!0,i.once("history.change",n)}}else t()}})},{"../../../../facade/design/design":47,"../../../../facade/editor/editor":91,"../../../../factory/formats":126,"../../../../factory/user-info":161,"../file/view":575,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.parse-int.js":905}],578:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.concat.js");var r=e("./modal.hbs"),o=[],i="";function s(){var e=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?"":"modal.share_design.default_facebook",t=r({default_text:e,pages:o}),n=INKIVE.Modal.modalWindow(t,{width:500,headerIcon:"fa fa-facebook",headerTitle:"modal.title.share_facebook",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.share"),onClick:function(){var e=$(n.getWrapper).find('[name="share-page"]').val(),t=$(n.getWrapper).find('[name="share-text"]').val();n.close(),function(e,t){(function(e,t){return new Promise((function(n,r){var s=new XMLHttpRequest,a="page_id=".concat(t,"&image_url=").concat(i,"&message=").concat(e,"&access_token=").concat(o[0].access_token);s.open("POST","".concat(INKIVE.C.BASE_URL,"load/api/postimageonfacebookpage")),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(a),s.onload=function(){var e=JSON.parse(s.responseText);e.error?r(e.error):n()}}))})(e,t).then((function(){l(INKIVE.TranslateHelper.translate("top_submenu.download_modal.post_facebook_page_success"))}),(function(e){l(e)}))}(t,e)}}]})}function a(e){e.authResponse?(o.length=0,new Promise((function(e,t){FB.api("/me/accounts","GET",{},(function(n){n.error?t(n.error.message):0===n.data.length?t(new Error(INKIVE.TranslateHelper.translate("top_submenu.download_modal.facebook_no_pages_selected"))):(n.data.forEach((function(e){o.push({id:e.id,name:e.name,access_token:e.access_token})})),e(o))}))}))).then((function(e){s()}),(function(e){l(e)})):l(INKIVE.TranslateHelper.translate("top_submenu.download_modal.auth_facebook_failed"))}function l(e){INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("alert_span",{text:e}),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.share_facebook"})}t.exports=function(e){i=e,window.loadFacebookLibrary((function(){FB.login(a,{scope:"manage_pages,publish_pages"})}))}},{"./modal.hbs":583,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/web.dom-collections.for-each.js":964}],579:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.date.now.js"),e("core-js/modules/es.date.to-string.js");var r=e("./modal.hbs"),o=document.createElement("li"),i=document.createElement("span"),s=document.createElement("i");t.exports=function(e){var t=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?"":"modal.share_design.default_facebook",n=r({default_text:t}),a=INKIVE.Modal.modalWindow(n,{width:500,headerIcon:"fa fa-facebook",headerTitle:"modal.title.share_facebook",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.share"),onClick:function(){$(this).addClass("disabled");var t=$(a.getWrapper).find('[name="share-text"]').val();!function(e){var t=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file_to_share"}),{skip:!1,loader:!0});setTimeout((function(){e.close(),t.close()}),3e3)}(a),function(){o.classList.add("desygner-dropdown-menu");var e=document.createElement("div");e.classList.add("status"),e.classList.add("new-content"),s.classList.add("fa"),s.classList.add("fa-gear"),s.classList.add("fa-spin"),s.classList.remove("hidden"),i.classList.add("message"),e.appendChild(s),e.appendChild(i),o.appendChild(e);var t="".concat(INKIVE.TranslateHelper.translate("top_submenu.download_modal.status_notification_preparing"),"...");i.innerHTML=t,document.querySelector("header ul.desygner-dropdown-menu-group").appendChild(o)}(),function(e,t,n){return new Promise((function(r,o){var i=setInterval((function(t){var o=new XMLHttpRequest,s=e.split("?")[0]+"?t="+_.now();Date.now()-t>n&&(o.abort(),r(),clearInterval(i)),o.onreadystatechange=function(){2===o.readyState&&200===o.status&&(o.abort(),r(),clearInterval(i))},o.open("GET",s,!0),o.send()}),t,Date.now())}))}(e,1e3,15e3).then((function(){!function(e,t){e=INKIVE.Helpers.getShareNetworkUrl("facebook",INKIVE.Helpers.fillFacebookOGTags(e)),t&&(e+="&quote="+encodeURIComponent(t));var n=window.open(e,"Share","height=500,width=500,location=0");n&&n.focus&&n.focus()}(e,t),o.remove()}))}}]})}},{"./modal.hbs":583,"core-js/modules/es.array.find.js":859,"core-js/modules/es.date.now.js":879,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/web.timers.js":966}],580:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tool-content">\n  <section style="text-align: justify;">\n    <h3>'+a((l(n,"t")||t&&l(t,"t")||s).call(i,"common.warning_share_instagram",{name:"t",hash:{},data:o,loc:{start:{line:3,column:8},end:{line:3,column:47}}}))+"</h3>\n    <br>\n    <ul>\n      <li>1. "+a((l(n,"t")||t&&l(t,"t")||s).call(i,"common.business_instagram_step_1",{name:"t",hash:{},data:o,loc:{start:{line:6,column:13},end:{line:6,column:54}}}))+" <a href='https://help.instagram.com/502981923235522' style='color: blue;' target='_blank'>"+a((l(n,"t")||t&&l(t,"t")||s).call(i,"common.learn_how",{name:"t",hash:{},data:o,loc:{start:{line:6,column:145},end:{line:6,column:170}}}))+"</a></li>\n      <li>2. "+a((l(n,"t")||t&&l(t,"t")||s).call(i,"common.business_instagram_step_2",{name:"t",hash:{},data:o,loc:{start:{line:7,column:13},end:{line:7,column:54}}}))+" <a href='https://help.instagram.com/570895513091465' style='color: blue;' target='_blank'>"+a((l(n,"t")||t&&l(t,"t")||s).call(i,"common.learn_how",{name:"t",hash:{},data:o,loc:{start:{line:7,column:145},end:{line:7,column:170}}}))+"</a></li>\n    </ul>\n  </section>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],581:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var r=e("./modal.hbs"),o=e("./instagram-instructions.hbs"),i="";function s(e){INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("alert_span",{text:e}),{width:600,headerIcon:"icon-news",headerTitle:"modal.title.share_instagram_business"})}function a(e){var t=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?"":"modal.share_design.default_facebook",n=r({default_text:t,pages:e}),o=INKIVE.Modal.modalWindow(n,{width:500,headerIcon:"fa fa-instagram",headerTitle:"modal.title.share_instagram_business",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.share"),onClick:function(){var e=$(o.getWrapper).find('[name="share-page"]').val(),t=$(o.getWrapper).find('[name="share-text"]').val();o.close(),function(e,t){try{(function(e,t,n){return new Promise((function(r,o){FB.api("/".concat(e,"/media"),"POST",{image_url:n,caption:t},(function(e){e.error&&o(e.error),r(e)}))}))})(t,e,i).then((function(e){(function(e,t){return new Promise((function(n,r){FB.api("/".concat(e,"/media_publish"),"POST",{creation_id:t},(function(e){e.error&&r(e.error),n(e)}))}))})(t,e.id).then((function(){s(INKIVE.TranslateHelper.translate("top_submenu.download_modal.post_instagram_page_success"))}),(function(e){throw e}))}),(function(e){throw e}))}catch(e){s(e)}}(t,e)}}]})}function l(e){try{if(!e.authResponse)throw INKIVE.TranslateHelper.translate("top_submenu.download_modal.auth_facebook_failed");(t=[],new Promise((function(e,n){FB.api("/me/accounts?fields=connected_instagram_account,username","GET",{},(function(r){var o;(r.error||0===r.data.length)&&n(new Error(null!==(o=r.error)&&void 0!==o?o:INKIVE.TranslateHelper.translate("top_submenu.download_modal.instagram_needs_facebook_page"))),r.data.forEach((function(e){e.connected_instagram_account&&t.push({id:e.connected_instagram_account.id,name:e.username})})),e(t)}))}))).then((function(e){if(0===!e.length)throw INKIVE.TranslateHelper.translate("top_submenu.download_modal.no_instagram_profiles");a(e)}),(function(e){s(e)}))}catch(e){s(e.getMessage())}var t}t.exports=function(e){var t;i=e,t=INKIVE.Modal.modalWindow(o(),{headerIcon:"fa fa-instagram",headerTitle:"modal.title.share_instagram_business",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.connect_via_facebook"),onClick:function(){t.close(),window.loadFacebookLibrary((function(){FB.login(l,{scope:"instagram_basic,instagram_content_publish,manage_pages,publish_pages"})}))}}]})}},{"./instagram-instructions.hbs":580,"./modal.hbs":583,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/web.dom-collections.for-each.js":964}],582:[function(e,t,n){"use strict";t.exports=function(e){e=INKIVE.Helpers.getShareNetworkUrl("linkedin",e),window.open(e,"Share","height=500,width=500,location=0")}},{}],583:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <select name=\"share-page\" style='width: 100%'>\n      "+(null!=(i=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"pages"):t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:6},end:{line:5,column:74}}}))?i:"")+"\n    </select>\n"},2:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option value="'+l("function"==typeof(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:a)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:5,column:36},end:{line:5,column:44}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:5,column:46},end:{line:5,column:56}}}):i)+"</option>"},4:function(e,t,n,r,o){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <select name="share-option">\n      '+(null!=(i=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"options"):t,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:6},end:{line:12,column:79}}}))?i:"")+"\n    </select>\n"},5:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option value="'+l("function"==typeof(i=null!=(i=c(n,"value")||(null!=t?c(t,"value"):t))?i:a)?i.call(s,{name:"value",hash:{},data:o,loc:{start:{line:12,column:38},end:{line:12,column:49}}}):i)+'">'+l("function"==typeof(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:a)?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:12,column:51},end:{line:12,column:61}}}):i)+"</option>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tool-content">\n  <section>\n'+(null!=(i=c(n,"if").call(s,null!=t?c(t,"pages"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:7,column:11}}}))?i:"")+'    <label for="share-text">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"common.share_message",{name:"t",hash:{},data:o,loc:{start:{line:8,column:28},end:{line:8,column:56}}}))+'</label>\n    <textarea name="share-text" class="form-control" placeholder="'+l((c(n,"t")||t&&c(t,"t")||a).call(s,"editor.add_message_optional",{name:"t",hash:{},data:o,loc:{start:{line:9,column:66},end:{line:9,column:101}}}))+'">'+l((c(n,"t")||t&&c(t,"t")||a).call(s,null!=t?c(t,"default_text"):t,{name:"t",hash:{},data:o,loc:{start:{line:9,column:103},end:{line:9,column:122}}}))+"</textarea>\n"+(null!=(i=c(n,"if").call(s,null!=t?c(t,"options"):t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:4},end:{line:14,column:11}}}))?i:"")+"  </section>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],584:[function(e,t,n){"use strict";e("core-js/modules/es.function.name.js"),t.exports=function(e){window.open("//www.pinterest.com/pin/create/button/?url="+encodeURI(INKIVE.C.BASE_URL)+"&media="+encodeURI(e)+"&description="+Base64.decode(INKIVE.C.BOOK.name),"_blank","top=0,right=0,width=750,height=320")}},{"core-js/modules/es.function.name.js":884}],585:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'class="active"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tabs ui-widget">\n  <ul class="ui-tabs-nav">\n    <li class="ui-state-default ui-tabs-active ui-state-active" style="width: 45%;" data-target="shr-design">\n      <a href="#"><i class="desygner-icon-desygn"></i><span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.design_title",{name:"t",hash:{},data:o,loc:{start:{line:4,column:60},end:{line:4,column:98}}}))+'</span></a>\n    </li>\n\n    <li class="ui-state-default" style="width: 45%;" data-target="shr-project">\n      <a href="#"><i class="desygner-icon-project"></i><span>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.project_title",{name:"t",hash:{},data:o,loc:{start:{line:8,column:61},end:{line:8,column:100}}}))+'</span></a>\n    </li>\n  </ul>\n\n  <div class="ui-tabs-panel shr-project hidden">\n    <h3>'+(null!=(i=(u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.share_project",null!=t?u(t,"project_name"):t,{name:"t",hash:{},data:o,loc:{start:{line:13,column:8},end:{line:13,column:63}}}))?i:"")+'</h3>\n\n    <section>\n      <div class="buttons row">\n        <a class="facebook"><i class="fa fa-facebook"></i></a>\n        <a class="linkedin"><i class="fa fa-linkedin"></i></a>\n        <a class="twitter"><i class="fa fa-twitter"></i></a>\n      </div>\n\n      <div class="link row">\n        <span class="link-label">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.project_link",{name:"t",hash:{},data:o,loc:{start:{line:23,column:33},end:{line:23,column:71}}}))+'</span>\n        <input type="text" readonly class="project-link context-menu-enabled" value="'+c("function"==typeof(s=null!=(s=u(n,"view_link")||(null!=t?u(t,"view_link"):t))?s:l)?s.call(a,{name:"view_link",hash:{},data:o,loc:{start:{line:24,column:85},end:{line:24,column:100}}}):s)+'" />\n      </div>\n\n      <div class="buttons row visibility">\n        <a '+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_public"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:28,column:11},end:{line:28,column:56}}}))?i:"")+' data-attr="public">\n          <icon>\n            <svg>\n                <use xlink:href="#globe"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.public.title",{name:"t",hash:{},data:o,loc:{start:{line:35,column:31},end:{line:35,column:74}}}))+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.public.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:36,column:34},end:{line:36,column:80}}}))+"</div>\n          </div>\n        </a>\n        <a "+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_team_shared"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:11},end:{line:39,column:61}}}))?i:"")+' data-attr="workspace">\n          <icon>\n            <svg>\n                <use xlink:href="#hashtag---circle"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c("function"==typeof(s=null!=(s=u(n,"workspace_visibility_title")||(null!=t?u(t,"workspace_visibility_title"):t))?s:l)?s.call(a,{name:"workspace_visibility_title",hash:{},data:o,loc:{start:{line:46,column:31},end:{line:46,column:63}}}):s)+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.workspace.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:47,column:34},end:{line:47,column:83}}}))+"</div>\n          </div>\n        </a>\n        <a "+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_private"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:50,column:11},end:{line:50,column:57}}}))?i:"")+' data-attr="private">\n          <icon>\n            <svg>\n                <use xlink:href="#eye---slash"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.private.title",{name:"t",hash:{},data:o,loc:{start:{line:57,column:31},end:{line:57,column:75}}}))+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.private.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:58,column:34},end:{line:58,column:81}}}))+'</div>\n          </div>\n        </a>\n      </div>\n    </section>\n  </div>\n\n  <div class="ui-tabs-panel shr-design">\n    <h3>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.share_design",{name:"t",hash:{},data:o,loc:{start:{line:66,column:8},end:{line:66,column:46}}}))+'</h3>\n\n    <div class="image-container"><img class="empty"/></div>\n\n    <section>\n      <div class="buttons row">\n        <a class="facebook"><i class="fa fa-facebook"></i></a>\n        <a class="facebookpage"><i class="fa fa-flag"></i></a>\n        <a class="twitter"><i class="fa fa-twitter"></i></a>\n        <a class="pinterest"><i class="fa fa-pinterest"></i></a>\n        <a class="linkedin"><i class="fa fa-linkedin"></i></a>\n        <a class="instagram"><i class="fa fa-instagram"></i></a>\n      </div>\n\n      <div class="link row">\n        <span class="link-label">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.design_link",{name:"t",hash:{},data:o,loc:{start:{line:81,column:33},end:{line:81,column:70}}}))+'</span>\n        <input type="text" readonly class="design-link context-menu-enabled" value="'+c("function"==typeof(s=null!=(s=u(n,"image_link")||(null!=t?u(t,"image_link"):t))?s:l)?s.call(a,{name:"image_link",hash:{},data:o,loc:{start:{line:82,column:84},end:{line:82,column:100}}}):s)+'" />\n      </div>\n    </section>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],586:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.link.js");var o,i=r(e("@babel/runtime/regenerator")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("./template.hbs"),l=(e("../template.hbs"),e("../../../../editor-mode-manager"));t.exports={render:(o=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isModeRestricted=!0,this.isOnePage=1===INKIVE.C.BOOK.num_pages,this.linkRefresh(),e.next=5,this.getDesign();case 5:this.renderRestrictedTemplate(),this.thumbnailRefresh();case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),show:function(){var e=!this.$el.is(":empty");e&&this.isOnePage&&INKIVE.C.BOOK.num_pages>1&&(e=this.isOnePage=!1),e||this.render(),e&&this.thumbnailRefresh(),this.$el.find('ul.ui-tabs-nav [data-target="shr-project"]').toggle(!l.isMode("logo"))},renderRestrictedTemplate:function(){this.$el.html(a({project_name:this.projectNameRefresh(),image_link:this.link,view_link:INKIVE.C.VIEWER+(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"template/":"")+INKIVE.C.BOOK.encodedId,design:this.design,workspace_visibility_title:this.workSpaceVisibilityTitle}))}}},{"../../../../editor-mode-manager":204,"../template.hbs":587,"./template.hbs":585,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.string.link.js":918}],587:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return'class="active"'},3:function(e,t,n,r,o){return'        <div class="buttons row">\n          <a class="wattpad">\n            <img height="35" width="123"  alt="Wattpad"\n                 src="https://s3.amazonaws.com/assets.inkive.com/assets/img/logos/wattpad_logo.png"/>\n          </a>\n        </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tabs ui-widget">\n  <ul class="ui-tabs-nav">\n    <li class="ui-state-default ui-tabs-active ui-state-active" style="width: 45%;" data-target="shr-design">\n      <a href="#"><i class="desygner-icon-design"></i><span>This Design</span></a>\n    </li>\n\n    <li class="ui-state-default" style="width: 45%;" data-target="shr-project">\n      <a href="#"><i class="desygner-icon-project"></i><span>The Project</span></a>\n    </li>\n  </ul>\n\n  <div class="ui-tabs-panel shr-project hidden">\n    <h3 class="project-name">'+(null!=(i=(u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.share_project",null!=t?u(t,"project_name"):t,{name:"t",hash:{},data:o,loc:{start:{line:13,column:29},end:{line:13,column:84}}}))?i:"")+'</h3>\n\n    <section>\n      <div class="buttons row">\n        <a class="facebook"><i class="fa fa-facebook"></i></a>\n        <a class="linkedin"><i class="fa fa-linkedin"></i></a>\n        <a class="twitter"><i class="fa fa-twitter"></i></a>\n        <a class="email"><i class="fa fa-envelope"></i></a>\n      </div>\n\n      <div class="link row">\n        <span class="link-label">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.project_link",{name:"t",hash:{},data:o,loc:{start:{line:24,column:33},end:{line:24,column:71}}}))+'</span>\n        <input type="text" readonly class="project-link context-menu-enabled" value="'+c("function"==typeof(s=null!=(s=u(n,"view_link")||(null!=t?u(t,"view_link"):t))?s:l)?s.call(a,{name:"view_link",hash:{},data:o,loc:{start:{line:25,column:85},end:{line:25,column:100}}}):s)+'" />\n      </div>\n\n      <div class="buttons row visibility">\n        <a '+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_public"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:29,column:11},end:{line:29,column:56}}}))?i:"")+' data-attr="public">\n          <icon>\n            <svg>\n              <use xlink:href="#globe"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.public.title",{name:"t",hash:{},data:o,loc:{start:{line:36,column:31},end:{line:36,column:74}}}))+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.public.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:37,column:34},end:{line:37,column:80}}}))+"</div>\n          </div>\n        </a>\n        <a "+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_team_shared"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:40,column:11},end:{line:40,column:61}}}))?i:"")+' data-attr="workspace">\n          <icon>\n            <svg>\n              <use xlink:href="#hashtag---circle"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c("function"==typeof(s=null!=(s=u(n,"workspace_visibility_title")||(null!=t?u(t,"workspace_visibility_title"):t))?s:l)?s.call(a,{name:"workspace_visibility_title",hash:{},data:o,loc:{start:{line:47,column:31},end:{line:47,column:63}}}):s)+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.workspace.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:48,column:34},end:{line:48,column:83}}}))+"</div>\n          </div>\n        </a>\n        <a "+(null!=(i=u(n,"if").call(a,null!=(i=null!=t?u(t,"design"):t)?u(i,"is_private"):i,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:51,column:11},end:{line:51,column:57}}}))?i:"")+' data-attr="private">\n          <icon>\n            <svg>\n              <use xlink:href="#eye---slash"></use>\n            </svg>\n          </icon>\n          <div>\n            <div class="title">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.private.title",{name:"t",hash:{},data:o,loc:{start:{line:58,column:31},end:{line:58,column:75}}}))+'</div>\n            <div class="subtitle">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.link.private.subtitle",{name:"t",hash:{},data:o,loc:{start:{line:59,column:34},end:{line:59,column:81}}}))+'</div>\n          </div>\n        </a>\n      </div>\n    </section>\n  </div>\n\n  <div class="ui-tabs-panel shr-design">\n    <h3>'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.share_design",{name:"t",hash:{},data:o,loc:{start:{line:67,column:8},end:{line:67,column:46}}}))+'</h3>\n\n    <div class="image-container"><img class="empty"/></div>\n\n    <section>\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"is_wattpad"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:72,column:6},end:{line:79,column:13}}}))?i:"")+'      <div class="buttons row">\n        <a class="facebook"><i class="fa fa-facebook"></i></a>\n        <a class="facebookpage"><i class="fa fa-flag"></i></a>\n        <a class="twitter"><i class="fa fa-twitter"></i></a>\n        <a class="pinterest"><i class="fa fa-pinterest"></i></a>\n        <a class="linkedin"><i class="fa fa-linkedin"></i></a>\n      </div>\n\n      <div class="link row">\n        <span class="link-label">'+c((u(n,"t")||t&&u(t,"t")||l).call(a,"top_submenu.share.design_link",{name:"t",hash:{},data:o,loc:{start:{line:89,column:33},end:{line:89,column:70}}}))+'</span>\n        <input type="text" readonly class="design-link context-menu-enabled" value="'+c("function"==typeof(s=null!=(s=u(n,"image_link")||(null!=t?u(t,"image_link"):t))?s:l)?s.call(a,{name:"image_link",hash:{},data:o,loc:{start:{line:90,column:84},end:{line:90,column:100}}}):s)+'" />\n      </div>\n    </section>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],588:[function(e,t,n){"use strict";var r;e("core-js/modules/es.array.find.js");var o=e("./modal.hbs");t.exports=function(e){var t=INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN?"":"modal.share_design.default_twitter",n=o({default_text:t}),i=INKIVE.Modal.modalWindow(n,{width:500,headerIcon:"fa fa-twitter",headerTitle:"modal.title.share_twitter",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.share"),onClick:function(){r=$(i.getWrapper).find('[name="share-text"]').val(),i.close(),window.open(INKIVE.C.BASE_URL+"share/uploadtosocialnetwork?project_id="+INKIVE.C.BOOK.id+"&design_number="+INKIVE.Tool._current_page_number+"&text="+encodeURIComponent(r)+"&social_network=twitter","_blank","top=0,right=0,width=750,height=420")}}]})}},{"./modal.hbs":583,"core-js/modules/es.array.find.js":859}],589:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.link.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js");var s,a=e("./template.hbs"),l=e("../../../../utils/md5"),c=e("../../../../factory/settings"),u=e("../../../editor-mode-manager"),d=e("../../../../analytics/decorate"),p=e("../../../../facade/restrictions/webrand-decorate"),h=e("../../../../factory/page-thumbnail"),m=e("../../../../facade/editor/editor"),f=e("../../../../facade/design/design"),g=e("../../../../factory/desygner-api"),b={twitter:e("./twitter"),facebook:e("./facebook"),facebookpage:e("./facebook-page"),pinterest:e("./pinterest"),wattpad:e("./wattpad"),linkedin:e("./linkedin"),instagram:e("./instagram")};t.exports=d(e("../../analytics/share"),p(e("./restrict/view"),Backbone.View.extend({events:{"click input[type=text]":"selectEvent","click ul.ui-tabs-nav li":"changeTabEvent","click .shr-design .buttons > a":"shareDesignEvent","click .shr-project .buttons:not(.visibility) > a.email":"shareProjectByEmailEvent","click .shr-project .buttons:not(.visibility) > a:not(.email):not(.embed)":"shareProjectEvent","click .shr-project .buttons.visibility > a":"updateDesignEvent"},selectEvent:function(e){$(e.currentTarget).select()},changeTabEvent:function(e){var t=$(e.currentTarget),n=t.siblings("li"),r=t.data("target");n.removeClass("ui-tabs-active ui-state-active"),t.addClass("ui-tabs-active ui-state-active"),this.projectNameRefresh(),this.$el.find(".ui-tabs-panel."+r).removeClass("hidden").siblings(".ui-tabs-panel").addClass("hidden")},shareDesignEvent:function(e){INKIVE.Modal.togglePageLoader(!0),m.handle("page","save").then(_.bind((function(){var t=$(e.currentTarget).attr("class");b[t](this.link+"?isShare=true&t="+_.now()),INKIVE.Modal.togglePageLoader(!1),this.trackShare({content_format:"design",network:t})}),this))},shareProjectEvent:function(e){INKIVE.Modal.togglePageLoader(!0);var t=_.bind((function(){var t=$(e.currentTarget),n=INKIVE.Helpers.getShareNetworkUrl(t.attr("class")),r=$(e.currentTarget).attr("class");this.makePublic((function(){INKIVE.Modal.togglePageLoader(!1);var e=window.open(n,"Share","height=500,width=500,location=0");e&&e.focus&&e.focus()})),this.trackShare({content_format:"project",network:r,link:n})}),this);m.handle("page","save").then((function(){_.delay(t,5e3)}))},trackShare:function(e){e=$.extend({project_id:INKIVE.C.BOOK.id,design_number:INKIVE.Tool._current_page_number},e),$.api(INKIVE.C.BASE_URL+"inkive/trackShare","POST",e,(function(t){INKIVE.C.IS_DEV&&console.log(e,t)}))},shareProjectByEmailEvent:function(e){var t=this,n=new INKIVE.ModalShareEmail,r=INKIVE.Modal.modalWindow(n.getFormHtml(),{width:500,headerIcon:"fa fa-mail-forward",headerTitle:"modal.title.share_email",buttons:[{title:INKIVE.TranslateHelper.translate("general.send"),onClick:_.bind((function(){t.makePublic((function(){n.saveForm((function(){r.close()}))}))}),this)}]})},navigateToProjectTab:function(){$("li[data-target='shr-project']").click()},updateDesignEvent:function(e){var t=$(e.currentTarget).attr("data-attr");this.updateVisibility(t),this.isModeRestricted?this.renderRestrictedTemplate():this.renderTemplate(),this.navigateToProjectTab(),this.updateDesign()},initialize:function(){_.bindAll(this,"makePublic"),this.tool=INKIVE.Tool.getInstance(),f.on("preview.full",_.bind((function(e){this.thumbnailRefresh(e)}),this)),this.workSpaceVisibilityTitle=INKIVE.TranslateHelper.translate("top_submenu.share.link.workspace.title",{workspace:INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.domain||"Desygner"})},makePublic:function(e){function t(){e(),INKIVE.Modal.togglePageLoader(!1)}90==INKIVE.C.BOOK.security?e():(t=_.after(2,t),_.delay(t,3e3),INKIVE.Modal.togglePageLoader(!0,"modal.wait_public"),c.set({security:90}).then(t))},show:function(){var e=!this.$el.is(":empty");e||this.render(),e&&this.thumbnailRefresh(),e&&this.projectNameRefresh(),this.$el.find('ul.ui-tabs-nav [data-target="shr-project"]').toggle(!u.isMode("logo"))},render:(s=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isModeRestricted=!1,this.linkRefresh(),e.next=4,this.getDesign();case 4:this.renderTemplate(),f.handle("preview"),this.thumbnailRefresh();case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),renderTemplate:function(){this.$el.html(a({project_name:this.projectNameRefresh(),view_link:INKIVE.C.VIEWER+(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"template/":"")+INKIVE.C.BOOK.encodedId,image_link:this.link,is_wattpad:!!INKIVE.C.BOOK.external_reference,design:this.design,workspace_visibility_title:this.workSpaceVisibilityTitle}))},linkRefresh:function(){this.link=INKIVE.C.BASE_URL+"design/displaypage/"+INKIVE.C.BOOK.id+"/"+INKIVE.Tool._current_page_number+"/"+l(INKIVE.Tool._current_page_number)+"/1754",this.$el.find(".design-link").val(this.link)},thumbnailRefresh:function(e){this.linkRefresh();var t=this.$el.find(".image-container img"),n=e||h.get();t.on("load",(function(){t.removeClass("empty")})),t.attr("src",n)},projectNameRefresh:function(){this.linkRefresh();var e=this.$el.find(".shr-project span");e.on("load",(function(){e.html(this.$el.parent().find("[data-value=project-name] > span").text())})),e.html(this.$el.parent().find("[data-value=project-name] > span").text())},updateVisibility:function(e){this.design.is_public="public"===e,this.design.is_team_shared="workspace"===e,this.design.is_private="private"===e},getDesign:function(){var e=this;return new Promise((function(t){g.get("brand/designs/"+INKIVE.C.BOOK.encodedId).then((function(n){e.design=n,e.design.is_private=!n.is_public&&!n.is_team_shared,t()}))}))},updateDesign:function(){INKIVE.Modal.togglePageLoader(!0);var e="brand/companies/".concat(this.design.company.id,"/designs/");g.put(e+INKIVE.C.BOOK.encodedId,this.design).then((function(){INKIVE.Modal.togglePageLoader(!1)}))}})))},{"../../../../analytics/decorate":2,"../../../../facade/design/design":47,"../../../../facade/editor/editor":91,"../../../../facade/restrictions/webrand-decorate":119,"../../../../factory/desygner-api":123,"../../../../factory/page-thumbnail":147,"../../../../factory/settings":156,"../../../../utils/md5":618,"../../../editor-mode-manager":204,"../../analytics/share":563,"./facebook":579,"./facebook-page":578,"./instagram":581,"./linkedin":582,"./pinterest":584,"./restrict/view":586,"./template.hbs":587,"./twitter":588,"./wattpad":590,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.link.js":918}],590:[function(e,t,n){"use strict";t.exports=function(){INKIVE.EditorFacade.handle("page","save").then((function(){$(".ui-dropdown-content[data-id=share]").hide(),INKIVE.Modal.togglePageLoader(!0),INKIVE.Helpers.DownloadProcedure.download((function(e){if(e){var t="https://www.wattpad.com/myworks/covers/upload?source=desygner";t+="&storyId="+INKIVE.C.BOOK.external_reference,t+="&uri="+encodeURIComponent(e),INKIVE.Modal.togglePageLoader(!1),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("top_submenu.share.project_ready")}),{callback:[function(){window.open(t,"_blank")}]})}}))}))}},{}],591:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'<div class="menu-lock"></div>\n<div class="overlay"></div>\n\n<div class="widget-container">\n  <div class="shopping-cart" aurelia-app="shopping-cart/main"></div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":1024}],592:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js");var r=e("./template.hbs");t.exports=Backbone.View.extend({events:{"click .overlay":"closeEvent","click .menu-lock":"showEvent"},closeEvent:function(){this.$el.removeClass("display-widget")},showEvent:function(){this.show()},initialize:function(){var t=e("../../../../facade/editor/editor");if(_.bindAll(this,"show","enableMenu","setTotal","finishLoading","paidItemEvent"),this.$button=$('header > .options [data-action="shopping-cart"]'),this.$button.on("click",this.show),!INKIVE.C.IS_MOBILE){this.$button.addClass("disabled"),INKIVE.Helpers.getScript("https://js.stripe.com/v3"),$("<link/>",{rel:"stylesheet",type:"text/css",href:INKIVE.Helpers.getSecureUrl("/bundles/desygnerbusiness/css/common/font-icons.css")}).appendTo("head"),this.render();var n=this.$el.children(".widget-container");INKIVE.Modal.loader(this.$button.addClass("loading")),INKIVE.Helpers.getAureliaLibraries(n.find('[aurelia-app="shopping-cart/main"]')).then(this.finishLoading),t.on("shopping_cart.add",_.partial(this.toggleItemInCartEvent,!0)),t.on("shopping_cart.removed",_.partial(this.toggleItemInCartEvent,!1)),t.on("shopping_cart.paid",this.paidItemEvent)}},setTotal:function(e){this.$button.find(".total").text(e||"-"),0===e&&this.hideCartOption(),1===e&&this.displayCartOption()},displayCartOption:function(){this.$button.removeClass("disabled").removeClass("hidden");var e=0;$("header > .options [data-action]").each((function(){var t=$(this);t.is('[data-action="shopping-cart"]')||(e+=t.outerWidth(!0))})),this.$el.find(".menu-lock").width(e).show()},hideCartOption:function(){this.$button.addClass("hidden"),this.$el.removeClass("display-widget"),this.$el.find(".menu-lock").hide(),INKIVE.Tool.enableUI()},enableMenu:function(){this.$button.addClass("hidden"),this.$el.find(".menu-lock").hide()},render:function(){this.$el.html(r())},show:function(){this.$el&&this.$el.addClass("display-widget"),INKIVE.Tool.disableUI(),this.$el.find(".overlay").one("click",INKIVE.Tool.enableUI)},finishLoading:function(){$("header > .options").removeClass("disabled"),INKIVE.Modal.loaderClose(this.$button),this.$button.removeClass("loading"),$("#shopping-cart-panel").css("display","block")},toggleItemInCartEvent:function(e,t){t=t||{};var n=$("#photo-"+t.id).parents(".thumbnail"),r=n.find(".subscription-label").toggleClass("in-shopping-cart",e),o=e?'<i class="wb-icon-success"></i>':n.data("label"),i=e?o+INKIVE.TranslateHelper.translate("tool.search.in_shopping_cart"):n.data("hover-text");t.licence&&INKIVE.Helpers.isUrlValid(t.licence)&&(i=(o='<i class="wb-icon-success"></i>')+INKIVE.TranslateHelper.translate("tool.search.licenced_item"),r.addClass("licenced"),n.find(".item").data("licenced_url",t.licence)),r.html(o),n.hover((function(){r.addClass("hover").html(i)}),(function(){r.removeClass("hover").html(o)}))},paidItemEvent:function(e){e&&_.each(e.info,_.bind((function(t){this.toggleItemInCartEvent(!1,{id:t.licence.licence_id,licence:e.info[0].data.source})}),this))}})},{"../../../../facade/editor/editor":91,"./template.hbs":591,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],593:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="big-icon">\n  <icon>\n    <svg>\n      <use xlink:href="#lock---2"></use>\n    </svg>\n  </icon>\n</div>\n<a class="btn go-premium">\n  <icon>\n    <svg>\n      <use xlink:href="#lightning"></use>\n    </svg>\n  </icon>\n  <span>'+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"general.upgrade_account",{name:"t",hash:{},data:o,loc:{start:{line:14,column:8},end:{line:14,column:39}}}))+"</span>\n</a>\n"},useData:!0})},{"hbsfy/runtime":1024}],594:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js");var r=e("../../../../ui/tool-menu/components/helper/view"),o=e("./helper.hbs");t.exports=r.extend({events:_.extend({},r.prototype.events,{"click a.video":function(){this.openVideoContent("vbTSmlfiYiA",{width:600})},"click .go-premium":"displaySubscriptionModal"}),displaySubscriptionModal:function(){INKIVE.Helpers.displaySubscriptionModal("tool.versions.helper.description")},initialize:function(){r.prototype.initialize.call(this),$("button[data-action=versions]").one("click",_.bind(this.render,this))},render:function(){this.data.title="tool.versions.helper.title",this.data.content=o(),this.$el.html(this.template(this.data))}})},{"../../../../ui/tool-menu/components/helper/view":329,"./helper.hbs":593,"core-js/modules/es.function.bind.js":883}],595:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){return'\n<div class="no-version-icon-container">\n  <icon class="no-version-image-layer1">\n    <svg>\n      <use xlink:href="#connectivity-layer-1"></use>\n    </svg>\n  </icon>\n  <icon class="no-version-image-layer2">\n    <svg>\n      <use xlink:href="#connectivity-layer-2"></use>\n    </svg>\n  </icon>\n  <icon class="no-version-image-layer3">\n    <svg>\n      <use xlink:href="#connectivity-layer-3"></use>\n    </svg>\n  </icon>\n  <icon class="no-version-image-layer4">\n    <svg>\n      <use xlink:href="#connectivity-layer-4"></use>\n    </svg>\n  </icon>\n</div>'},useData:!0})},{"hbsfy/runtime":1024}],596:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="version-item">\n    <div class="image-container"><img class="empty"></div>\n    <div class="info">\n        <a href="#" class="btn btn-yellow action" data-action="loadversion" data-version="'+a(e.lambda(null!=(i=null!=t?u(t,"version"):t)?u(i,"versionId"):i,t))+'">'+a((u(n,"t")||t&&u(t,"t")||c).call(l,"top_submenu.versions.load",{name:"t",hash:{},data:o,loc:{start:{line:4,column:115},end:{line:4,column:148}}}))+"</a>\n        <div>"+a("function"==typeof(s=null!=(s=u(n,"time_since")||(null!=t?u(t,"time_since"):t))?s:c)?s.call(l,{name:"time_since",hash:{},data:o,loc:{start:{line:5,column:13},end:{line:5,column:29}}}):s)+"</div>\n    </div>\n</div>\n"},useData:!0})},{"hbsfy/runtime":1024}],597:[function(e,t,n){"use strict";e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.find.js");var r=e("./helper.js"),o=e("../../../../analytics/decorate"),i=e("../../../../factory/user-info"),s=e("../../../../factory/page-thumbnail"),a=e("../../../../facade/editor/editor"),l=e("./template.hbs"),c=e("./nocontent-template.hbs");t.exports=o(e("../../analytics/versions"),Backbone.View.extend({events:{'click a[data-action="loadversion"]':"loadVersionEvent"},loadVersionEvent:function(e){a.handle("page","load_version",{version_id:$(e.currentTarget).attr("data-version")})},initialize:function(){_.bindAll(this,"onVersions"),this.tool=INKIVE.Tool.getInstance(),i.get().then(_.bind((function(e){var t;this.canUse=(t="ROLE_PREMIUM",_(e.roles).contains(t)||INKIVE.Helpers.projectIsLinkedToRestrictions()),this.canUse||this.initHelper()}),this))},show:function(){this.$el.find(".antiscroll-inner").css("height","auto"),this.$el.find(".tab-content").empty(),this.$el.css("right",""),this.$el.css("left",15),this.canUse||this.helperView.toggle(!0),INKIVE.Modal.loader(this.$el.find(".tab-content")),this.canUse&&INKIVE.Helpers.api("page/versions","GET",{scrapbook_id:INKIVE.C.BOOK.id,design:INKIVE.Tool._current_design_id},this.onVersions)},onVersions:function(e){var t=this.$el.find(".tab-content"),n=t.closest('.ui-dropdown-content[data-id="versions"]');n.find(".content").addClass("active"),e&&e.length>0?(this.replaceClientRenderedImages(e),n.find(".versions-title-hascontent").addClass("active"),n.find(".versions-title-nocontent").removeClass("active"),_.each(e,_.bind(this.appendVersion,this,t))):t.append(c()),n.find(".no-version-icon-container").is(":visible")&&n.find(".antiscroll-inner").addClass("no-version-saved"),INKIVE.Modal.loaderClose(t),this.$el.find(".antiscroll-wrap").antiscroll({autoHide:!1,height:this.$el.height()-40})},replaceClientRenderedImages:function(e){_.each(s.versions,(function(t){var n;t.designId===INKIVE.Tool._current_design_id&&_.each(e,(function(e){var r=Math.abs(t.timeStamp-e.creationTime);(!n||r<n)&&(e.base64=t.base64,n=r)}))}))},appendVersion:function(e,t){var n=$(l({version:t,time_since:this.timeSince(t.secondsAgo)}));e.append(n);var r=INKIVE.C.IS_DEV||INKIVE.C.IS_QA?"singapore.inkive.com":"virginia.inkive.com",o="singapore.inkive.com"===r?"http":"https",i=n.find("img"),s="http"===o?"http://"+r+"/"+t.previewName:"https://s3.amazonaws.com/"+r+"/"+t.previewName;s=t.base64?t.base64:s,INKIVE.Helpers.imageLoader(s,(function(e,t){i.attr("src",e===INKIVE.C.Status.success?t.src:INKIVE.C.THUMB_NOCOVER),i.removeClass("empty")}))},initHelper:function(){var e=$("<div>");this.$el.append(e),this.helperView=new r({el:e}),this.helperView.on("toggle",_.bind((function(e){this.$el.find(".content").toggleClass("blur",e)}),this))},timeSince:function(e){var t=INKIVE.TranslateHelper.translate,n=e/60,r=n/60,o=r/24,i=o/365;return t("time_ago.prefix")+" "+(e<45&&t("time_ago.seconds")||e<90&&t("time_ago.minute")||n<45&&t("time_ago.minutes",{time:Math.round(n)})||n<90&&t("time_ago.hour")||r<24&&t("time_ago.hours",{time:Math.round(r)})||r<42&&t("time_ago.day")||o<30&&t("time_ago.days",{time:Math.round(o)})||o<45&&t("time_ago.month")||o<365&&t("time_ago.months",{time:Math.round(o/30)})||i<1.5&&t("time_ago.year")||t("time_ago.years",{time:Math.round(i)}))+" "+t("time_ago.suffix")}}))},{"../../../../analytics/decorate":2,"../../../../facade/editor/editor":91,"../../../../factory/page-thumbnail":147,"../../../../factory/user-info":161,"../../analytics/versions":565,"./helper.js":594,"./nocontent-template.hbs":595,"./template.hbs":596,"core-js/modules/es.array.find.js":859,"core-js/modules/es.function.bind.js":883}],598:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.initTopBar=function(){var e=document.createElement("div");e.innerHTML='<button id="preview-animations" data-action="preview-animations" class="auto-collapse ui-dropdown-button desygner-clear-button hidden" data-id="preview-animations">\n    <icon>\n      <svg fill="#fff">\n        <use xlink:href="#video-play-outline"></use>\n      </svg>\n    </icon>\n    <span>\n        '.concat(INKIVE.TranslateHelper.translate("top_submenu.frame.preview-animations"),"\n    </span>\n  </button>");var t=document.querySelector('header .options [data-value="project-name"]');t.parentNode.insertBefore(e.firstChild,t.nextSibling);var n=document.querySelector("header"),r=document.querySelector("header button#preview-animations"),i=new o.default(n,r);INKIVE.C.SHOW_ANIMATION&&i.initAnimationModal()};var o=r(e("../../../../../src/views/top-bar"))},{"../../../../../src/views/top-bar":1099,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],599:[function(e,t,n){"use strict";e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.join.js");var r=e("../../facade/design/design"),o=e("../../facade/editor/editor"),i=e("../../facade/project/project"),s=e("../../factory/formats"),a=e("../../factory/company").instance,l=e("../../factory/desygner-api");t.exports=function(){var e;parseInt(this.editor.canvas.contentW),parseInt(this.editor.canvas.contentH);function t(t,n){function r(){INKIVE.Modal.toggleLock(!1);var r=['<b style="font-weight: 400">',INKIVE.TranslateHelper.translate("modal.alert.resize_page",{page:t+1,from:n,percent:parseInt(100*t/n)}),"</b>"];e=INKIVE.Modal.alertMessage(r.join(""),{skip:!1,loader:!0}),INKIVE.Modal.toggleLock(!0)}e&&e.close(r),e||r()}(function(){var e=$.Deferred(),t=null;if(this.$el.find("input.custom").is(":checked")){var n=this.$el.find("select.unit").val(),r=parseFloat(this.$el.find("input.size.page-width").val()),o=parseFloat(this.$el.find("input.size.page-height").val());t={width:r,height:o,unit:n}}var i=this.$el.find(".default-formats [type=checkbox]:checked"),c=_.map(i,(function(e){return s.getFormat($(e).val())}));i.length?$.when.apply($,c).then((function(){var n=_.toArray(arguments);t&&n.push(t),e.resolve(n)})):t&&e.resolve([t]);var u=this.$el.find(".ui-dropdown-content");return this.$el.find(".popular-formats [type=checkbox]:checked").each((function(){var e;u.hide(),e=$(this).attr("value"),INKIVE.Modal.togglePageLoader(!0),a.getProjectData().then((function(t){l.post("brand/companies/"+t.company.id+"/designs",{based_on:t.id,format:parseInt(e),pages:[INKIVE.Tool._current_design_id]}).always((function(e){INKIVE.Modal.togglePageLoader(!1),e.encoded_id&&window.open(INKIVE.C.CTRL+"?id="+e.encoded_id+"&print")}))}))})),e.promise()}).call(this).then((function(e){var n={},r=$.Deferred();return t(0,e.length),o.handle("page","save").then((function t(){var o=0===e.length;o&&r.resolve(n),o||i.handle("design","copy",{design_id:INKIVE.Tool._current_design_id,append:!0,stay:!0,save:!1,quiet:!0}).then((function(r){n[r.page_number]=e.pop(),t()}))})),r.promise()})).then((function(e){var n=$.Deferred(),i=_.map(e,(function(e,t){return _.partial(s,e,t)}));return function e(){var t=0===i.length;t&&n.resolve(),t||i.shift()().then(e)}(),n.promise();function s(n,s){var a=$.Deferred();return t(_.size(e)-i.length-1,_.size(e)),o.handle("page","move_to",{page_number:s}).then((function(){r.once("template.update",a.resolve),_.delay((function(){r.set("template",{size:n})}),500)})),a.promise()}})).then(_.partial(o.handle,"page","save")).then((function(){e&&e.close(),INKIVE.Modal.toggleLock(!1)}))}},{"../../facade/design/design":47,"../../facade/editor/editor":91,"../../facade/project/project":113,"../../factory/company":122,"../../factory/desygner-api":123,"../../factory/formats":126,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905}],600:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <icon>\n    <svg>\n      <use xlink:href="'+l("function"==typeof(i=null!=(i=c(n,"icon")||(null!=t?c(t,"icon"):t))?i:a)?i.call(s,{name:"icon",hash:{},data:o,loc:{start:{line:5,column:23},end:{line:5,column:33}}}):i)+'"></use>\n    </svg>\n  </icon>\n  <span>'+l("function"==typeof(i=null!=(i=c(n,"text")||(null!=t?c(t,"text"):t))?i:a)?i.call(s,{name:"text",hash:{},data:o,loc:{start:{line:8,column:8},end:{line:8,column:18}}}):i)+"</span>\n"},3:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span><i class="desygner-icon-'+l("function"==typeof(i=null!=(i=c(n,"icon")||(null!=t?c(t,"icon"):t))?i:a)?i.call(s,{name:"icon",hash:{},data:o,loc:{start:{line:10,column:32},end:{line:10,column:42}}}):i)+'"></i>'+l("function"==typeof(i=null!=(i=c(n,"text")||(null!=t?c(t,"text"):t))?i:a)?i.call(s,{name:"text",hash:{},data:o,loc:{start:{line:10,column:48},end:{line:10,column:58}}}):i)+'</span>\n  <i class="hidden desygner-icon-add-job"></i>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var i,s,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="desygner-btn light request '+c("function"==typeof(s=null!=(s=u(n,"expandable")||(null!=t?u(t,"expandable"):t))?s:l)?s.call(a,{name:"expandable",hash:{},data:o,loc:{start:{line:1,column:42},end:{line:1,column:58}}}):s)+'" data-action="'+c("function"==typeof(s=null!=(s=u(n,"action")||(null!=t?u(t,"action"):t))?s:l)?s.call(a,{name:"action",hash:{},data:o,loc:{start:{line:1,column:73},end:{line:1,column:85}}}):s)+'">\n'+(null!=(i=u(n,"if").call(a,null!=t?u(t,"newDesign"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:2,column:2},end:{line:12,column:9}}}))?i:"")+"</button>\n"},useData:!0})},{"hbsfy/runtime":1024}],601:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js");var r=e("../../../factory/formats");t.exports={showResizeMenu:$.noop,doResizeEvent:$.noop,showResizeEvent:$.noop,render:function(e,t){var n=_.uniq(_.pluck(_.flatten(_.pluck(t,"data")),"unit"));(e=e||r.getCurrentSize()).unit=e.unit||"px",this.editor.canvas.runExtensions("updateUnits",e.unit),this.$el.html(this.template({format:e,groups:t,units:n})),this.$el.find(".btn.resize").parent().hide(),this.$el.find(".page-size").css("border-right","none"),INKIVE.Helpers.initTooltips(this.$el),this.trigger("render")}}},{"../../../factory/formats":126,"core-js/modules/es.array.find.js":859}],602:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.some.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js");var o=r(e("../../../core/history/history")),i=r(e("./button.hbs")),s=r(e("../../../factory/workflow")),a=e("../../../factory/company"),l=r(e("../../../facade/editor/editor")),c=e("../init-top-bar");t.exports={downloadrequestEvent:function(e){var t=!!$(e.currentTarget).find(".wip").length;this.displayRequestModal("download",t)},sharerequestEvent:function(e){var t=!!$(e.currentTarget).find(".wip").length;this.displayRequestModal("share",t)},printrequestEvent:function(e){var t=!!$(e.currentTarget).find(".wip").length;this.displayRequestModal("print",t)},displayRequestModal:function(t,n){var r=this,o=INKIVE.TranslateHelper.translate,i=new(e("../../../modal/prompt"))({long:!0,label:(n?o("advice.content.workflow_request_wip")+" ":"")+o("modal.prompt.request_explain")});i.getFormHtml().find("textarea").hide();var s=INKIVE.Modal.modalWindow(i.getFormHtml(),{width:500,headerIcon:"desygner-icon-add-job",headerTitle:o("modal.prompt.request",{action:t}),buttons:[{title:o(n?"modal.buttons.get_back":"modal.buttons.send_request"),onClick:function(){s.close(),n||r.createRequest(t)}}]})},createRequest:function(e){var t=this,n=this.$el.children(".options").children('button[data-action="'+e+'request"]'),r={output_id:this.design.id,output_type:"brand_design",output_action:e};INKIVE.Modal.togglePageLoader(!0),$.when(a.instance.get(["memberships","me"]),a.instance.get(["designs",INKIVE.C.BOOK.encodedId]),l.default.handle("page","save")).then((function(o,i){r.output_id=i.id;var a={assigned_to_id:o.id,outputs:[r]};s.default.post("jobs/simple",a).then((function(r){t.requestsApplied.push(e),t.jobs.push({id:r.id,state:"open"}),INKIVE.C.IS_UNDER_REVIEW||t.blockDesign(t),n.addClass("request-pending").prepend('<i class="fa fa-clock-o wip"></i>'),INKIVE.Modal.togglePageLoader(!1)}))}))},initialize:function(){(0,c.initTopBar)(),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,this.requestsApplied=[],_.bindAll(this,"displayNoActionsLeftError"),this.initSubView(),this.initProjectName(),this.initDownloadModal(),o.default.on("reload",_.bind(this.refreshHistoryUI,this)),o.default.on("change",_.bind(this.refreshHistoryUI,this)),o.default.on("undo",_.bind(this.refreshHistoryUI,this)),o.default.on("redo",_.bind(this.refreshHistoryUI,this));var t=e("../../../facade/restrictions/restrictions"),n=this.$el.children(".options");this.can=_.bind(t.isFunctionalityAllowed,t),this.blockActions(n),t.initialize().then(_.bind(this.unblockAllowedActions,this,n,!0)).then(_.bind(this.addRequestActions,this,n))},blockActions:function(e){e.children('button[data-action="order-print"]').addClass("hidden"),e.children('button[data-action="share"]').addClass("hidden"),e.children('button[data-action="download"]').addClass("hidden"),e.children('button[data-action="animation"]').addClass("hidden")},unblockAllowedActions:function(e,t){e.children('button[data-action="order-print"]').toggleClass("restricted",!this.can("function_print_file")).toggleClass("disabled",t),e.children('button[data-action="share"]').toggleClass("hidden",!this.can("function_share_file")).toggleClass("disabled",t),e.children('button[data-action="download"]').toggleClass("hidden",!this.can("function_download_file")).toggleClass("disabled",t),e.children('button[data-action="animation"]').toggleClass("hidden",!this.can("function_animation_file")),e.children('button[data-action="animation"]').toggleClass("hidden",!this.can("function_edit_animation_file"))},addRequestActions:function(e){var t=this,n=function(){return r.call(t)};function r(){["print","share","download"].forEach((function(e){var t=document.querySelector('[data-action="'.concat(e,'request"]'));"print"===e&&(e="order-print"),t&&(t.classList.remove("hidden"),document.querySelector('[data-action="'.concat(e,'"]')).classList.add("hidden"))})),o.default.off("change",n)}function l(){return this.can("function_request_print_file")||this.can("function_request_share_file")||this.can("function_request_download_file")}function c(e,t){return t.length&&this.can("function_request_"+e+"_file")}function u(){var t=e.children('button[data-action="order-print"]').removeClass("disabled"),n=e.children('button[data-action="share"]').removeClass("disabled"),r=e.children('button[data-action="download"]').removeClass("disabled");c.call(this,"print",t)&&t.after(t.clone().attr("data-action","printrequest").removeClass("hidden"))&&t.addClass("hidden"),c.call(this,"share",n)&&n.after((0,i.default)({text:e.children('button[data-action="share"]').text(),icon:"#share",action:"sharerequest",expandable:"expandable",newDesign:!0}))&&n.addClass("hidden"),c.call(this,"download",r)&&r.after((0,i.default)({text:e.children('button[data-action="download"]').text(),icon:"#download",action:"downloadrequest",expandable:"expandable",newDesign:!0}))&&r.addClass("hidden"),this.delegateEvents()}function d(){var t=this;this.jobs.filter((function(e){var t=e.outputs[0]||{};return"closed"!==e.state&&["print","share","download"].includes(t.output_action)})).forEach((function(n){var r=n.outputs[0],o=r.output_action,i=e.children('button[data-action="'+o+'request"]');r.is_ready?function(e){var n=!0;if(["finished"].includes(e.state)){var r=new Date(e.updated_at);n=!t.design.pages.some((function(e){return new Date(1e3*e.last_mode)>r}))}return n}(n)&&!t.requestsApplied.includes(o)&&(i.addClass("hidden"),i.siblings('button[data-action="'+("print"===o?"order-print":o)+'"]').removeClass("hidden")):i.find(".wip").length||(i.addClass("request-pending").prepend('<i class="fa fa-clock-o wip"></i>'),t.requestsApplied.includes(o)||t.requestsApplied.push(o))}))}a.instance.get(["designs",INKIVE.C.BOOK.encodedId]).then((function(r){t.design=r,s.default.isEnabled().then((function(){s.default.getJobs(r,"brand_design").then((function(e){t.jobs=Array.isArray(e)?e:[],u.call(t),d.call(t),t.design.is_under_review||t.requestsApplied.length?t.blockDesign(t):l.call(t)&&o.default.on("change",n)}))}),(function(){t.unblockAllowedActions(e,!1)}))}))},blockDesign:function(e){var t=!0,n=e.requestsApplied,r=document.querySelector('.menus button[data-action="redo"]');o.default.on("change",(function i(){var a="".concat(INKIVE.TranslateHelper.translate("modal.prompt.changes_will_cancel_request"),"\n        <ul>\n          ").concat(n.map((function(e){return"<li>".concat(INKIVE.TranslateHelper.translate("modal.prompt."+e),"</li>")})).join(""),"\n        </ul>\n      "),c=INKIVE.Modal.modalWindow(a,{classes:"request-modal",width:600,headerIcon:"desygner-icon-add-job",closeCallback:function(){t&&(l.default.handle("history","undo"),r.classList.add("disabled"))},buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.get_back"),cls:"no-background",onClick:function(){c.close()}},{title:INKIVE.TranslateHelper.translate("modal.buttons.edit_design_anyway"),onClick:function(){o.default.off("change",i),e.jobs.forEach((function(e){"open"===e.state&&s.default.patch("jobs",e,"closed")})),document.querySelectorAll(".fa-clock-o.wip").forEach((function(e){return e.remove()})),INKIVE.C.IS_UNDER_REVIEW=!1,t=!1,c.close()}}]})})),INKIVE.C.IS_UNDER_REVIEW=!0}}},{"../../../core/history/history":12,"../../../facade/editor/editor":91,"../../../facade/restrictions/restrictions":118,"../../../factory/company":122,"../../../factory/workflow":163,"../../../modal/prompt":174,"../init-top-bar":598,"./button.hbs":600,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.some.js":875,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.string.includes.js":915,"core-js/modules/web.dom-collections.for-each.js":964}],603:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template({1:function(e,t,n,r,o){return" checked"},3:function(e,t,n,r,o){return"  disabled"},5:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<option"+(null!=(a=(l(n,"eq")||t&&l(t,"eq")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,null!=(a=null!=s[1]?l(s[1],"format"):s[1])?l(a,"unit"):a,{name:"eq",hash:{},fn:e.program(6,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:34,column:33},end:{line:34,column:73}}}))?a:"")+" class='desygner-option-custom'>"+e.escapeExpression(e.lambda(t,t))+"\n                  </option>"},6:function(e,t,n,r,o){return" selected"},8:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <li class="filter-line">\n                <p class="desygner-custom-check">\n                  <label>\n                    '+c(typeof(i=null!=(i=u(n,"name")||(null!=t?u(t,"name"):t))?i:a)===l?i.call(s,{name:"name",hash:{},data:o,loc:{start:{line:60,column:20},end:{line:60,column:30}}}):i)+'\n                    <input type="checkbox" id="resize_page_id_opt_'+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:a)===l?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:61,column:66},end:{line:61,column:74}}}):i)+'" value="'+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:a)===l?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:61,column:83},end:{line:61,column:91}}}):i)+'">\n                    <span class="checkmark"></span>\n                    <span class="desygner-display-dimension">'+c(typeof(i=null!=(i=u(n,"width")||(null!=t?u(t,"width"):t))?i:a)===l?i.call(s,{name:"width",hash:{},data:o,loc:{start:{line:63,column:61},end:{line:64,column:30}}}):i)+"\n                      <span> x </span> "+c(typeof(i=null!=(i=u(n,"height")||(null!=t?u(t,"height"):t))?i:a)===l?i.call(s,{name:"height",hash:{},data:o,loc:{start:{line:65,column:39},end:{line:65,column:51}}}):i)+" "+c(typeof(i=null!=(i=u(n,"unit")||(null!=t?u(t,"unit"):t))?i:a)===l?i.call(s,{name:"unit",hash:{},data:o,loc:{start:{line:65,column:52},end:{line:65,column:62}}}):i)+"</span>\n                  </label>\n                </p>\n              </li>\n"},10:function(e,t,n,r,o){return"upgrade"},12:function(e,t,n,r,o,i,s){var a,l,c,u=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},h='              <div class="desygner-group-name-header">'+e.escapeExpression("function"==typeof(l=null!=(l=p(n,"name")||(null!=t?p(t,"name"):t))?l:d)?l.call(u,{name:"name",hash:{},data:o,loc:{start:{line:89,column:54},end:{line:89,column:64}}}):l)+'</div>\n              <div class="checkbox-container">\n                <ul>\n';return l=null!=(l=p(n,"data")||(null!=t?p(t,"data"):t))?l:d,c={name:"data",hash:{},fn:e.program(13,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:92,column:18},end:{line:114,column:27}}},a="function"==typeof l?l.call(u,c):l,p(n,"data")||(a=e.hooks.blockHelperMissing.call(t,a,c)),null!=a&&(h+=a),h+"                </ul>\n              </div>\n"},13:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"is_printable"):t,{name:"unless",hash:{},fn:e.program(14,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:93,column:18},end:{line:113,column:29}}}))?a:""},14:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hiden"):t,{name:"unless",hash:{},fn:e.program(15,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:94,column:18},end:{line:112,column:29}}}))?a:""},15:function(e,t,n,r,o,i,s){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=(l(n,"eq")||t&&l(t,"eq")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"id"):t,null!=(a=null!=s[2]?l(s[2],"format"):s[2])?l(a,"id"):a,{name:"eq",hash:{},fn:e.noop,inverse:e.program(16,o,0,i,s),data:o,loc:{start:{line:95,column:18},end:{line:111,column:25}}}))?a:""},16:function(e,t,n,r,o,i,s){var a,l,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <li class="filter-line">\n                    <p class="desygner-custom-check">\n                      <label class="'+(null!=(a=p(n,"if").call(c,null!=s[2]?p(s[2],"is_free_user"):s[2],{name:"if",hash:{},fn:e.program(17,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:98,column:36},end:{line:98,column:77}}}))?a:"")+'">\n                        '+d("function"==typeof(l=null!=(l=p(n,"name")||(null!=t?p(t,"name"):t))?l:u)?l.call(c,{name:"name",hash:{},data:o,loc:{start:{line:99,column:24},end:{line:99,column:34}}}):l)+'\n                        <input type="checkbox" id="resize_page_id_opt_'+d("function"==typeof(l=null!=(l=p(n,"id")||(null!=t?p(t,"id"):t))?l:u)?l.call(c,{name:"id",hash:{},data:o,loc:{start:{line:100,column:70},end:{line:100,column:78}}}):l)+'" value="'+d("function"==typeof(l=null!=(l=p(n,"id")||(null!=t?p(t,"id"):t))?l:u)?l.call(c,{name:"id",hash:{},data:o,loc:{start:{line:100,column:87},end:{line:100,column:95}}}):l)+'">\n                        <span class="checkmark"></span>\n                        <span class="desygner-display-dimension '+(null!=(a=p(n,"if").call(c,null!=s[2]?p(s[2],"is_free_user"):s[2],{name:"if",hash:{},fn:e.program(17,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:102,column:64},end:{line:102,column:105}}}))?a:"")+'">\n'+(null!=(a=p(n,"if").call(c,null!=s[2]?p(s[2],"is_free_user"):s[2],{name:"if",hash:{},fn:e.program(19,o,0,i,s),inverse:e.program(21,o,0,i,s),data:o,loc:{start:{line:103,column:26},end:{line:107,column:29}}}))?a:"")+"                      </label>\n                    </p>\n                  </li>\n"},17:function(e,t,n,r,o){return"disabled"},19:function(e,t,n,r,o){var i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                          "+e.escapeExpression((i(n,"t")||t&&i(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"common.pro_only",{name:"t",hash:{},data:o,loc:{start:{line:104,column:26},end:{line:104,column:49}}}))+"\n"},21:function(e,t,n,r,o){var i,s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                          "+l("function"==typeof(i=null!=(i=c(n,"width")||(null!=t?c(t,"width"):t))?i:a)?i.call(s,{name:"width",hash:{},data:o,loc:{start:{line:106,column:26},end:{line:106,column:37}}}):i)+" <span> x </span> "+l("function"==typeof(i=null!=(i=c(n,"height")||(null!=t?c(t,"height"):t))?i:a)?i.call(s,{name:"height",hash:{},data:o,loc:{start:{line:106,column:55},end:{line:106,column:67}}}):i)+" "+l("function"==typeof(i=null!=(i=c(n,"unit")||(null!=t?c(t,"unit"):t))?i:a)?i.call(s,{name:"unit",hash:{},data:o,loc:{start:{line:106,column:68},end:{line:106,column:78}}}):i)+"</span></label>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o,i,s){var a,l,c,u=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,p=e.escapeExpression,h=e.lambda,m=e.hooks.blockHelperMissing,f=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},g='<div class="tool-size">\n  <div class="ui-dropdown-content">\n\n    <div class="page-size-group">\n      <div class="checkbox-container">\n        <ul>\n          <li class="filter-line">\n            <p class="desygner-custom-check">\n              <label>\n                '+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.custom",{name:"t",hash:{},data:o,loc:{start:{line:10,column:16},end:{line:10,column:50}}}))+'\n                <input id="custom-checkbox-size-id" type="checkbox" name="page-size"\n                  class="desygner-checkbox-class checkbox custom" '+(null!=(a=f(n,"if").call(u,null!=(a=null!=t?f(t,"format"):t)?f(a,"id"):a,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,o,0,i,s),data:o,loc:{start:{line:12,column:66},end:{line:12,column:98}}}))?a:"")+' />\n                <span class="checkmark"></span>\n              </label>\n            <section class="custom-size">\n              <icon>\n                <svg fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path fill-rule="evenodd" clip-rule="evenodd"\n                    d="M2 3.25C2.41421 3.25 2.75 3.58579 2.75 4V20C2.75 20.4142 2.41421 20.75 2 20.75C1.58579 20.75 1.25 20.4142 1.25 20V4C1.25 3.58579 1.58579 3.25 2 3.25ZM22 3.25C22.4142 3.25 22.75 3.58579 22.75 4V12V20C22.75 20.4142 22.4142 20.75 22 20.75C21.5858 20.75 21.25 20.4142 21.25 20V12V4C21.25 3.58579 21.5858 3.25 22 3.25ZM18.5303 12.5303C18.671 12.3897 18.75 12.1989 18.75 12C18.75 11.8011 18.671 11.6103 18.5303 11.4697L16.0303 8.96967C15.7374 8.67678 15.2626 8.67678 14.9697 8.96967C14.6768 9.26256 14.6768 9.73744 14.9697 10.0303L16.1893 11.25H7.81066L9.03033 10.0303C9.32322 9.73744 9.32322 9.26256 9.03033 8.96967C8.73744 8.67678 8.26256 8.67678 7.96967 8.96967L5.46967 11.4697C5.17678 11.7626 5.17678 12.2374 5.46967 12.5303L7.96967 15.0303C8.26256 15.3232 8.73744 15.3232 9.03033 15.0303C9.32322 14.7374 9.32322 14.2626 9.03033 13.9697L7.81066 12.75H16.1893L14.9697 13.9697C14.6768 14.2626 14.6768 14.7374 14.9697 15.0303C15.2626 15.3232 15.7374 15.3232 16.0303 15.0303L18.5303 12.5303Z" />\n                </svg>\n              </icon>\n              <input type="text" class="size page-width '+(null!=(a=f(n,"if").call(u,null!=(a=null!=t?f(t,"format"):t)?f(a,"id"):a,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:22,column:56},end:{line:22,column:90}}}))?a:"")+' desygner-input-custom"\n                placeholder="'+p((f(n,"t")||t&&f(t,"t")||d).call(u,"editor.width",{name:"t",hash:{},data:o,loc:{start:{line:23,column:29},end:{line:23,column:49}}}))+'" value="'+p(h(null!=(a=null!=t?f(t,"format"):t)?f(a,"width"):a,t))+'" />\n              <span class="desygner-sub desygner-sub-text">x</span>\n              <icon>\n                <svg fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path fill-rule="evenodd" clip-rule="evenodd"\n                    d="M3.25 3C3.25 2.58579 3.58579 2.25 4 2.25H20C20.4142 2.25 20.75 2.58579 20.75 3C20.75 3.41421 20.4142 3.75 20 3.75H4C3.58579 3.75 3.25 3.41421 3.25 3ZM11.4697 6.46967C11.7626 6.17678 12.2374 6.17678 12.5303 6.46967L15.0303 8.96967C15.3232 9.26256 15.3232 9.73744 15.0303 10.0303C14.7374 10.3232 14.2626 10.3232 13.9697 10.0303L12.75 8.81066V15.1893L13.9697 13.9697C14.2626 13.6768 14.7374 13.6768 15.0303 13.9697C15.3232 14.2626 15.3232 14.7374 15.0303 15.0303L12.5303 17.5303C12.2374 17.8232 11.7626 17.8232 11.4697 17.5303L8.96967 15.0303C8.67678 14.7374 8.67678 14.2626 8.96967 13.9697C9.26256 13.6768 9.73744 13.6768 10.0303 13.9697L11.25 15.1893V8.81066L10.0303 10.0303C9.73744 10.3232 9.26256 10.3232 8.96967 10.0303C8.67678 9.73744 8.67678 9.26256 8.96967 8.96967L11.4697 6.46967ZM4 20.25C3.58579 20.25 3.25 20.5858 3.25 21C3.25 21.4142 3.58579 21.75 4 21.75H20C20.4142 21.75 20.75 21.4142 20.75 21C20.75 20.5858 20.4142 20.25 20 20.25H4Z" />\n                </svg>\n              </icon>\n              <input type="text" class="size page-height '+(null!=(a=f(n,"if").call(u,null!=(a=null!=t?f(t,"format"):t)?f(a,"id"):a,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:31,column:57},end:{line:31,column:91}}}))?a:"")+' desygner-input-custom"\n                placeholder="'+p((f(n,"t")||t&&f(t,"t")||d).call(u,"editor.height",{name:"t",hash:{},data:o,loc:{start:{line:32,column:29},end:{line:32,column:50}}}))+'" value="'+p(h(null!=(a=null!=t?f(t,"format"):t)?f(a,"height"):a,t))+'" />\n              <select class="unit'+(null!=(a=f(n,"if").call(u,null!=(a=null!=t?f(t,"format"):t)?f(a,"id"):a,{name:"if",hash:{},fn:e.program(3,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:33,column:33},end:{line:33,column:67}}}))?a:"")+' desygner-select-custom">\n                ';return l=null!=(l=f(n,"units")||(null!=t?f(t,"units"):t))?l:d,c={name:"units",hash:{},fn:e.program(5,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:34,column:16},end:{line:35,column:37}}},a="function"==typeof l?l.call(u,c):l,f(n,"units")||(a=m.call(t,a,c)),null!=a&&(g+=a),g+="\n              </select>\n            </section>\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"format-information-container\">\n      <p class='format-information'>\n        "+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.printable_group_header",{name:"t",hash:{},data:o,loc:{start:{line:45,column:8},end:{line:45,column:58}}}))+'\n      </p>\n      <p class="banner-warning">\n        '+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.printable_formats_info_message",{name:"t",hash:{},data:o,loc:{start:{line:48,column:8},end:{line:48,column:66}}}))+'\n      </p>\n    </div>\n    <div class="page-size-group">\n      <section class="format active">\n        <div class="antiscroll-wrap">\n          <div class="checkbox-container popular-formats antiscroll-inner">\n            <ul>\n',l=null!=(l=f(n,"printable_formats")||(null!=t?f(t,"printable_formats"):t))?l:d,c={name:"printable_formats",hash:{},fn:e.program(8,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:56,column:14},end:{line:69,column:36}}},a="function"==typeof l?l.call(u,c):l,f(n,"printable_formats")||(a=m.call(t,a,c)),null!=a&&(g+=a),g+="            </ul>\n          </div>\n        </div>\n      </section>\n    </div>\n    <div class=\"format-information-container\">\n      <p class='format-information'>\n        "+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.default_group_header",{name:"t",hash:{},data:o,loc:{start:{line:77,column:8},end:{line:77,column:56}}}))+'\n      </p>\n      <p class="banner-warning">\n        '+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.default_formats_info_message",{name:"t",hash:{},data:o,loc:{start:{line:80,column:8},end:{line:80,column:64}}}))+'\n      </p>\n    </div>\n    <div class="page-size-group">\n      <section class="format active">\n        <div class="antiscroll-wrap">\n          <section class="default-formats antiscroll-inner">\n            <div class="formats-container ',l=null!=(l=f(n,"is_free_user")||(null!=t?f(t,"is_free_user"):t))?l:d,c={name:"is_free_user",hash:{},fn:e.program(10,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:87,column:42},end:{line:87,column:83}}},a="function"==typeof l?l.call(u,c):l,f(n,"is_free_user")||(a=m.call(t,a,c)),null!=a&&(g+=a),g+='">\n',l=null!=(l=f(n,"groups")||(null!=t?f(t,"groups"):t))?l:d,c={name:"groups",hash:{},fn:e.program(12,o,0,i,s),inverse:e.noop,data:o,loc:{start:{line:88,column:14},end:{line:117,column:25}}},a="function"==typeof l?l.call(u,c):l,f(n,"groups")||(a=m.call(t,a,c)),null!=a&&(g+=a),g+'            </div>\n          </section>\n        </div>\n      </section>\n    </div>\n    <a class="do-resize general-button size-select-button disabled">\n      '+p((f(n,"t")||t&&f(t,"t")||d).call(u,"bottom_submenu.size.apply",{name:"t",hash:{},data:o,loc:{start:{line:124,column:6},end:{line:124,column:39}}}))+"\n    </a>\n  </div>\n</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":1024}],604:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js");var r=e("../../facade/design/design"),o=(e("../../facade/editor/editor"),e("../../factory/formats")),i=e("../../factory/user-info"),s=e("../../analytics/decorate"),a=e("../../facade/restrictions/decorate");t.exports=a(e("./restrict/size"),s(e("./analytics/size"),Backbone.mixin(Backbone.View.extend({template:e("./size.hbs"),events:{"change [name=page-size]":"togglePageSizeEvent","change [type=checkbox]":"toggleCheckBoxEvent","click .formats-container.upgrade":"toggleCheckBoxEvent","change select.unit":"sizeChangeEvent","change input.size":"inputChangeEvent","click .do-resize":"doResizeEvent"},showResizeMenu:function(e){this.$el.find("section.format").toggleClass("active")},showResizeEvent:function(e){this.fieldModified=!1,this.$el.find("[type=checkbox]").attr("checked",!1),this.$el.find(".do-resize").addClass("disabled"),this.$el.find("select.unit").addClass("disabled"),this.$el.find("input.size").addClass("disabled"),this.$el.find(".page-size-group .disabled").prop("disabled",!0),this.$el.find(".ui-dropdown-content").css("left",e.currentTarget.getBoundingClientRect().x);var t=this.$el.find(".ui-dropdown-content");this.resetCustomSize(),$(e.currentTarget).is(".active")?t.show():t.hide()},inputChangeEvent:function(){this.fieldModified=!0},togglePageSizeEvent:function(e){var t=this.$el.find("input.custom").is(":checked");this.$el.find("input.size").toggleClass("disabled",!t),this.$el.find("select.unit").toggleClass("disabled",!t),this.$el.find("a.do-resize").toggleClass("disabled",!t),this.$el.find("input.size").prop("disabled",!t),this.$el.find("select.unit").prop("disabled",!t),this.$el.find("a.do-resize").prop("disabled",!t),t&&this.resetCustomSize()},resetCustomSize:function(){var e=o.getCurrentSize(),t=e.height||100,n=e.width||100,r=e.unit||"px";this.$el.find("input.page-width").val(n),this.$el.find("input.page-height").val(t),this.$el.find("select.unit").val(r)},toggleCheckBoxEvent:function(e){var t=$(e.currentTarget);!this.isProUser&&t.parents(".default-formats").length&&(t.prop("checked",!1),INKIVE.Helpers.displaySubscriptionModal());var n=this.$el.find("input[type=checkbox]").is(":checked");this.$el.find("a.do-resize").toggleClass("disabled",!n)},sizeChangeEvent:function(){if(!this.fieldModified){var e=INKIVE.Helpers.convertPixelsToUnits,t=INKIVE.Helpers.convertUnitsToPixels,n=this.$el.find("select.unit").val(),r=o.getCurrentSize().unit||"px";r!==n&&this.$el.find("input.size").each((function(){var o=$(this).val(),i=t(o,r);o=e(i>5e3?5e3:i<40?40:i,n),$(this).val(Math.round(100*o)/100)}))}},doResizeEvent:function(){e("./resize").call(this)},initialize:function(){var e=this;_.bindAll(this,"render","updateCurrentPageInfo","sizeChangeEvent"),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,r.on("template.update.size",this.updateCurrentPageInfo),r.on("template.update.designed",this.updateCurrentPageInfo),r.on("template.update.restricted",this.updateCurrentPageInfo),$(document).bind("contextmenu",(function(){return e.prependFormatToFileMenu()}))},render:function(e,t,n){var r=_.uniq(_.pluck(_.flatten(_.pluck(t,"data")),"unit")),i=o.getCurrentSize();i.width===e.width&&"size".height===e.size&&i.unit===e.unit||(e=i),e.unit=e.unit||"px",e.name=e.name||INKIVE.TranslateHelper.translate("bottom_submenu.size.custom"),this.editor.canvas.runExtensions("updateUnits",e.unit),this.format=e,this.$el.html(this.template({format:e,groups:t,units:r,printable_formats:n,is_free_user:!this.isProUser})),this.$el.find(".desygner-group-name-header:not(:has(+  .checkbox-container  ul  .filter-line  .desygner-custom-check  label))").remove(),n.length||this.$el.find(".popular-formats").hide(),INKIVE.Helpers.initTooltips(this.$el),this.trigger("render");var s=this.createFormatElement(),a=document.querySelector(".page-size-group .checkbox-container > ul");a&&a.append(s)},createFormatElement:function(){var e=INKIVE.TranslateHelper.translate("bottom_submenu.size.format"),t=INKIVE.TranslateHelper.translate("bottom_submenu.size.format_title");this.format||(this.format=o.getCurrentSize());var n=this.format?[t,": ",Math.precision(this.format.width,2)," × ",Math.precision(this.format.height,2)," ",this.format.unit].join(""):"",r=document.createElement("div");return r.innerHTML='\n      <li class="page-size" data-popover="tooltip" data-placement="top"\n        data-original-title="'.concat(e,'">\n        <span>').concat(n,"</span>\n      </li>\n    ").trim(),r.firstChild},prependFormatToFileMenu:function(){var e=this.createFormatElement(),t=document.querySelector(".context-menu-root");t&&t.append(e)},updateCurrentPageInfo:function(e){var t=o.getCurrentFormat(),n=o.getGroups(),r=o.getPrintableFormats(),s=i.get();$.when(t,n,r,s).then(_.bind((function(t,n,r,o){e&&e.size&&(t=e.size),this.isProUser=_(o.roles).contains("ROLE_PRO"),this.filterGroups(n),this.render(t,n,r)}),this),_.bind((function(e){this.trigger("render")}),this))},filterGroups:function(e){_.each(e,(function(e){return _.map(e.data,(function(e){e.total_drafts===e.total_templates&&(e.hiden=!0)}))}))}}),Backbone.Events)))},{"../../analytics/decorate":2,"../../facade/design/design":47,"../../facade/editor/editor":91,"../../facade/restrictions/decorate":114,"../../factory/formats":126,"../../factory/user-info":161,"./analytics/size":564,"./resize":599,"./restrict/size":601,"./size.hbs":603,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.string.trim.js":929}],605:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.find.js"),e("core-js/modules/web.timers.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=function(){function e(){(0,o.default)(this,e),this.dataQueue=[]}return(0,i.default)(e,[{key:"setElement",value:function(e){this.$el=e}},{key:"display",value:function(e,t,n){t=void 0===t?3e3:t,(n=void 0!==n&&n)&&(this.dataQueue=[],this._finishDisplaying()),this.dataQueue.push({message:e,timeout:t}),this.displayingTimeout||this._displayNext()}},{key:"_displayNext",value:function(){var e=this,t=this.dataQueue.shift();this.$el&&this.$el.addClass("new-content").find(".message").text(t.message),this.$el&&this.$el.addClass("new-content").find("i").toggleClass("hidden",!!t.timeout),t.timeout&&(this.displayingTimeout=setTimeout((function(){return e._finishDisplaying()}),t.timeout))}},{key:"_finishDisplaying",value:function(){this.$el&&this.$el.removeClass("new-content"),this.displayingTimeout&&(clearTimeout(this.displayingTimeout),this.displayingTimeout=null),this.dataQueue.length&&this._displayNext()}},{key:"_emptyQueue",value:function(){this.dataQueue=[]}}]),e}();t.exports=new s},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/web.timers.js":966}],606:[function(e,t,n){"use strict";e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.string.starts-with.js"),e("core-js/modules/es.array.some.js");var a=r(e("./size")),l=r(e("../../facade/project/project")),c=r(e("./status")),u=r(e("./contents/share/view")),d=r(e("./contents/versions/view")),p=r(e("./contents/download/view")),h=r(e("./contents/file/view")),m=r(e("../../facade/editor/editor")),f=r(e("../../facade/design/design")),g=r(e("../../analytics/decorate")),b=r(e("../../factory/user-info")),v=r(e("../../factory/workflow")),y=e("../../factory/company"),j=r(e("../../factory/page-thumbnail")),w=r(e("../../core/history/history")),I=r(e("../../facade/restrictions/decorate")),x=e("./init-top-bar");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.exports=(0,g.default)(e("./analytics/view"),(0,I.default)(e("./restrict/view"),Backbone.View.extend({events:{'click .menus button[data-action="save"]':"saveEvent",'click .menus button[data-action="undo"]':"undoEvent",'click .menus button[data-action="redo"]':"redoEvent",'click .menus button[data-action="back-create"]':"exitEvent",'click .back-button-container > button[data-action="exit"]':"exitEvent","click .logo-icon":"exitEvent",'click .menus button[data-action="versions"]':"versionsEvent",'click .menus button[data-action="resize"]':"resizeEvent","click .options > button[data-action]":"defaultActionEvent",'click .options > button[data-action="order-print"]':"orderPrintEvent","mouseenter .menus .desygner-clear-button, .options .desygner-clear-button":"hideToolTips","click .menus .desygner-clear-button":"hideToolTips","click .options .desygner-clear-button":"hideToolTips",'click .menus [data-action="file"]':"setPossibleActions",'keydown [data-value="project-name"] span':"preNameChangeEvent",'blur [data-value="project-name"] span':"nameInputBlurEvent",'click [data-value="project-name"] span':"nameInputClickEvent"},setPossibleActions:function(){this.canSave(),this.canTranslate()},canSave:function(e){var t=document.querySelector('[data-value="project-name"] span').textContent.length>=255||INKIVE.C.IS_UNDER_REVIEW||INKIVE.C.REVIEW_MODE,n=new MutationObserver((function(e){t&&(INKIVE.C.IS_AUTO_SAVE=!1,localStorage.setItem("autosave",INKIVE.C.IS_AUTO_SAVE),e[0].addedNodes[0].querySelector(".context-menu-save").classList.add("disabled"),e[0].addedNodes[0].querySelector(".context-menu-auto-save").classList.add("disabled")),n.disconnect()}));n.observe(document.querySelector("body"),{childList:!0})},canTranslate:function(){var e=document.querySelector("#translations-panel");if(e){var t=e.querySelector("section");if(!t)return;var n=t.getBoundingClientRect().x>=0,r=new MutationObserver((function(e){n&&e[0].addedNodes[0].querySelector(".context-menu-translate").classList.add("disabled"),r.disconnect()}));r.observe(document.querySelector("body"),{childList:!0})}},hideToolTips:function(e){var t=$(e.currentTarget),n=$("body>.tooltip"),r=t.is(".active")||t.find("span").is(":visible");n.css("opacity",r?0:1),r&&n.remove()},defaultActionEvent:function(e){var t=$(e.currentTarget).data("action")+"Event";this[t]&&this[t](e)},preNameChangeEvent:function(e){var t=e.currentTarget,n=e.currentTarget.textContent.length,r=document.querySelector('.menus [data-action="exit"]'),o=document.querySelector("header .logo-icon");t.closest('[data-value="project-name"]').classList.toggle("error",n>=255),r.classList.toggle("disabled",n>=255),o.disabled=n>=255,o.classList.toggle("disabled-mouse",n>=255),n>=255?(e.preventDefault(),t.textContent=t.textContent.substr(0,255),t.blur()):"Enter"===e.key&&(e.preventDefault(),t.blur())},toggleSelection:function(e,t){var n=document.createRange();n.selectNodeContents(e[0]);var r=window.getSelection();r.removeAllRanges(),t&&r.addRange(n)},nameInputBlurEvent:function(e){var t=this.$el.find(".avoid-shortcuts"),n=!t.text();t.addClass("expands"),"svgroot"===e.target.id?t[0].scrollLeft=0:e.target.scrollLeft=0,t.text().length<255&&this.saveProjectName(t),n&&t.text(Base64.decode(INKIVE.C.BOOK.name)),this.toggleSelection(t,!1),$("#svgroot").off("click",this.nameInputBlurEvent),t.removeClass("focused")},nameInputClickEvent:function(e){var t=$(e.currentTarget);_.includes(["new project","new template","new design",""],t.html().toLowerCase())&&this.toggleSelection(t,!0),$("#svgroot").one("click",this.nameInputBlurEvent),t.addClass("focused"),t.text().length>=255&&t.empty(),t.removeClass("expands")},undoEvent:function(e){m.default.handle("history","undo")},redoEvent:function(e){m.default.handle("history","redo")},exitEvent:function(e){$(e.currentTarget).removeClass("active"),m.default.handle("close",{confirm_draft:!0,back_to_create:$(e.currentTarget).is("[data-action=back-create]")})},downloadEvent:function(e){var t=this,n=this.$el.find('.ui-dropdown-content[data-id="download"]');n.children(".tabs").hide(),INKIVE.Modal.loader(n),b.default.canConsume("download").then((function(){t.downloadsView||(t.downloadsView=new p.default({el:n})),t.downloadsView.show()}),_.partial(this.displayNoActionsLeftError,"download"))},shareEvent:function(e){var t=this.$el.find('.ui-dropdown-content[data-id="share"]');INKIVE.Modal.loader(t),b.default.canConsume("share").then(_.bind((function(){b.default.get().then(_.bind((function(e){j.default.checkRenderedImage(e).then(_.bind((function(e){t.children(".tabs").show(),INKIVE.Modal.loaderClose(t),this.shareView.show(),e||f.default.preview()}),this))}),this))}),this),_.partial(this.displayNoActionsLeftError,"share"))},versionsEvent:function(e){$(e.currentTarget).is(".active")&&this.versionsView.show(),$('.ui-dropdown-content[data-id="versions"]').css("right","unset")},resizeEvent:function(e){this.sizeView.showResizeEvent(e),this.resizeLoaded||($(".format .antiscroll-wrap").antiscroll({autoHide:!1}),this.resizeLoaded=!0)},gridEvent:function(e){$(e.currentTarget).is(".active")&&this.gridView.show()},printEvent:function(e){b.default.canConsume("print").then(_.bind((function(){var e,t=20,n=this.editor.getSvgString(),r=!INKIVE.Helpers.areEqual(n,INKIVE.EditorFacade.handle("cache","get"));function o(){var t=INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.logo_url;e=window.open(INKIVE.C.BASE_URL+"design/print?id="+INKIVE.C.BOOK.id+"&page_number="+INKIVE.Tool._current_page_number+(t?"&logo="+t:"")),INKIVE.Modal.togglePageLoader(!0,"modal.wait_printing"),_.delay(i,1e3)}function i(){!function(){try{return void 0===e||(!e||!e.closed)&&(!e||!e.tryLoad)}catch(e){}return!1}()?(INKIVE.Modal.togglePageLoader(!1,"modal.wait_printing"),localStorage.setItem("printing",!0),$(window).one("storage",(function(e){"printing"===e.originalEvent.key&&INKIVE.Modal.togglePageLoader(!1,"modal.wait_printing")}))):(--t>0&&_.delay(i,1e3),t>0||(INKIVE.Modal.togglePageLoader(!1,"modal.wait_printing"),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.popup_blocker"}))))}r||o(),r&&m.default.handle("page","save").then(o)}),this),_.partial(this.displayNoActionsLeftError,"print"))},orderPrintEvent:function(e){var t=e.currentTarget,n=$(t).is(".order-print-shown"),r=$('.ui-dropdown-content[data-id="order-print"]').hide(),o=_.bind((function(){this.orderPrintFallbackView||this.loadPrintFallbackView(),r.show()}),this);function i(t){var n=$(e.currentTarget).toggleClass("disabled",t);n.find("icon").css("opacity",t?0:1),INKIVE.Modal[t?"loader":"loaderClose"](n)}n?m.default.handle("printing","close"):(i(!0),m.default.handle("printing","is_project_printable").then((function(e){i(!1),e?m.default.handle("printing","open"):o()}))),$(".tool-size div.ui-dropdown-content").is(":visible")&&$(".tool-size div.ui-dropdown-content").hide()},loadPrintFallbackView:function(){var t=e("./contents/order-print-fallback/view");this.orderPrintFallbackView=new t},displayNoActionsLeftError:function(e){y.instance.getCompany().then((function(e){INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:INKIVE.TranslateHelper.translate("modal.alert.no_actions_left",{company_name:e.name})}))}))},initialize:function(){var e=this;(0,x.initTopBar)(),this.tool=INKIVE.Tool.getInstance(),this.editor=this.tool.editor,_.bindAll(this,"displayNoActionsLeftError","nameInputBlurEvent"),this.initSubView(),this.initProjectName(),this.initDownloadModal(),INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE&&this.$el.children(".options").children('button[data-action="share"]').addClass("hidden"),INKIVE.C.REVIEW_MODE&&this._initReviewButtons(),w.default.on("reload",_.bind(this.refreshHistoryUI,this)),w.default.on("change",_.bind(this.refreshHistoryUI,this)),w.default.on("undo",_.bind(this.refreshHistoryUI,this)),w.default.on("redo",_.bind(this.refreshHistoryUI,this)),m.default.on("project.name.saved",(function(t){INKIVE.C.BOOK.name=Base64.encode(t),e.$el.find('[data-value="project-name"] span').html(t)})),_.bindAll(this,"setMenuSize","updateCurrentPageInfo"),l.default.on("design.removed",this.updateCurrentPageInfo),l.default.on("design.copied",this.updateCurrentPageInfo),l.default.on("design.added",this.updateCurrentPageInfo),m.default.on("page.move_to",this.updateCurrentPageInfo),f.default.on("template.update.designed",this.updateCurrentPageInfo)},updateCurrentPageInfo:function(e){this.sizeView.updateCurrentPageInfo(e)},initProjectName:function(){this.$el.find('[data-value="project-name"] span').text(Base64.decode(INKIVE.C.BOOK.name)),this.bindedSaveProjectName=_.debounce(_.bind(this.saveProjectName,this),3e3)},saveProjectName:function(e){var t=e.text().trim(),n=INKIVE.TranslateHelper.translate;e.text().length<=255&&t&&Base64.decode(INKIVE.C.BOOK.name)!==t&&(e.addClass("disabled"),c.default.display(n("general.saving"),null,!0),m.default.handle("name_change",{name:t,callback:function(){c.default.display(n("advice.content.nothing_to_save")),e.removeClass("disabled"),$(".shr-project h3 span").text(t)}}))},refreshHistoryUI:function(e){var t=e.history[e.current]&&void 0!==e.history[e.current].parent,n=e.history[e.current]&&e.history[e.current].children.length;this.$el.find('.menus button[data-action="undo"]').toggleClass("disabled",!t),this.$el.find('.menus button[data-action="redo"]').toggleClass("disabled",!n)},setMenuSize:function(){if(!$("[data-action=order-print]").is(".order-print-shown")){var e=this.$el.children(".tool-size"),t=$(".pages-button-container"),n=e.is(":visible")?e:this.$el.children(".margin"),r=$("#canvas-panel").width(),o=t.outerWidth();o||(o=-23),n.width(r-o+1),t.is(":hidden")&&e.parent().css("padding-left",0)}},initSubView:function(){c.default.setElement(this.$el.find(".menus .status")),this.shareView=new u.default({el:this.$el.find('.ui-dropdown-content[data-id="share"]')}),this.versionsView=new d.default({el:this.$el.find('.ui-dropdown-content[data-id="versions"]')}),this.fileView=new h.default({el:this.$el.find('.ui-dropdown-content[data-id="file"]')}),m.default.on("status.update",(function(e){c.default.display(e.msg,e.timeout,e.force)})),this.$el.append('<ul class="tool-size"></ul>'),this.sizeView=new a.default({el:this.$el.find(".tool-size")}),$(window).resize(_.bind((function(){var e=this;setTimeout((function(){return e.setMenuSize()}),350)}),this)),this.sizeView.on("render",_.bind((function(){(this.setMenuSize(),INKIVE.C.MODE.IS_DESYGNER)&&INKIVE.Tool.getInstance().editor.canvas.runExtensions("enableRuler",{});INKIVE.EditorFacade.handle("zoom","fit")}),this)),this.setMenuSize()},initDownloadModal:function(){var t=e("./contents/download/download.hbs");this.downloadTemplate=$(t()),this.$el.find('[data-action="download"]').after(this.downloadTemplate)},_initReviewButtons:function(){var e=this;this.el.querySelector(".options").querySelectorAll("button").forEach((function(t){var n="submit-for-review"===t.dataset.action;"finish-later"===t.dataset.action||n?(t.classList.remove("hidden"),t.addEventListener("click",(function(){var t=decodeURIComponent(document.location.search).split("tasks/")[1],r=v.default.getJobById(t),o=m.default.handle("page","save");Promise.all([r,o]).then((function(t){var r=t[0];e.processReviewAction(r,n)}))}))):t.classList.add("hidden")}))},processReviewAction:function(e,t){var n=function(){var t=(0,s.default)(o.default.mark((function t(){var n,r,i,s=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]&&s[0],!INKIVE.C.TRANSLATION_DATA||!e){t.next=6;break}return r=e.outputs.find((function(e){return e.info.encoded_id===INKIVE.C.BOOK.id})),i=Object.keys(sessionStorage).map((function(e){if(e.startsWith("translation:")){var t={};return t[e]=sessionStorage.getItem(e),t}return!1})),t.next=6,v.default.updateOutputEntity(e,{info:k(k({},r.info),{},{translations:i,completed:n})});case 6:m.default.handle("close");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=(0,s.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=function(e){return!e.info.completed&&e.info.encoded_id!==INKIVE.C.BOOK.id},!e||1!==e.outputs.length&&e.outputs.some((function(e){return r(e)}))){t.next=4;break}return t.next=4,v.default.patch("jobs",e,"submitted");case 4:n(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(t){var i=INKIVE.EditorFacade.handle("translations","get_all_completed");if(INKIVE.C.TRANSLATION_DATA&&!i)var a=INKIVE.Modal.modalWindow(INKIVE.TranslateHelper.translate("modal.not_all_changes_completed"),{width:600,buttons:[{title:INKIVE.TranslateHelper.translate("general.yes"),onClick:function(){r(),a.close()}},{title:INKIVE.TranslateHelper.translate("general.no"),onClick:function(){n(),a.close()}}]});else r()}else n()}})))},{"../../analytics/decorate":2,"../../core/history/history":12,"../../facade/design/design":47,"../../facade/editor/editor":91,"../../facade/project/project":113,"../../facade/restrictions/decorate":114,"../../factory/company":122,"../../factory/page-thumbnail":147,"../../factory/user-info":161,"../../factory/workflow":163,"./analytics/view":566,"./contents/download/download.hbs":571,"./contents/download/view":574,"./contents/file/view":575,"./contents/order-print-fallback/view":576,"./contents/share/view":589,"./contents/versions/view":597,"./init-top-bar":598,"./restrict/view":602,"./size":604,"./status":605,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.some.js":875,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.search.js":925,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.starts-with.js":927,"core-js/modules/es.string.trim.js":929,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966}],607:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.join.js");var r=e("../app/decorate"),o=e("../facade/restrictions/decorate"),i=INKIVE.C.IS_MOBILE?"advice.event_name.tap":"advice.event_name.click";function s(){this.shown=[]}s.prototype=_.extend({messages:[{id:"save-first",type:"info"},{id:"workflow-request-wip",type:"warning"},{id:"imported-results",type:"warning"},{id:"share-error",type:"error"},{id:"add-to-library-error",type:"error"},{id:"add-to-library-duplicity",type:"warning"},{id:"add-to-library-success",type:"success"},{id:"upload-error",type:"error"},{id:"pick-template",type:"info"},{id:"template-back",type:"info"},{id:"upload-cancel",type:"info"},{id:"project-name",type:"warning"},{id:"share-success",type:"success"},{id:"already-saved",type:"success"},{id:"thumb-not-load",type:"warning"},{id:"image-replacement-selection",type:"error"},{id:"restriction-logo-replace",type:"error"},{id:"restriction-icon-replace",type:"error"},{id:"nothing-to-save",type:"success"},{id:"crop",type:"warning",once:!0},{id:"pdf-text",type:"warning",once:!0},{id:"convert-to-layout-box",type:"success"},{id:"crop-restriction-applied",type:"success"},{id:"color-restriction-applied",type:"warning"},{id:"source-restriction-applied",type:"warning"},{id:"dropbox-view",type:"warning",once:!0},{id:"long-time-no-save",type:"warning"},{id:"clipper-rotation-limit",type:"info"},{id:"spacing-and-underline",type:"warning"},{id:"uploading-images-save",type:"warning"},{id:"undo-unlocked-layout-image",type:"info"},{id:"add-item-to-library",type:"success"},{id:"error-adding-item-to-library",type:"error"},{id:"image-flip-disabled",type:"error"},{id:"choose-restriction-option",type:"warning"},{id:"group-template",type:"warning"},{id:"resize-text-adjust-to-box",type:"info",once:!0},{id:"empty-clipboard-on-paste",type:"warning"},{id:"background-color-add",type:"info"},{id:"img-quality-acceptable",type:"info"},{id:"low-img-quality-present",type:"warning"},{id:"file-not-allowed",type:"error"},{id:"uploading-file",type:"warning"},{id:"global-locked",type:"error"},{id:"translation-copied",type:"info"},{id:"processing-pdf",type:"info"},{id:"pdf-ready",type:"success"},{id:"display-parent-template-error",type:"error"},{id:"design-available-for-print-order",type:"info",onShow:function(){var e=$("<a>"+INKIVE.TranslateHelper.translate("common.get_quote")+"</a>");$("#toast-container").find(".toast-message:first").after(e),e.on("click",(function(){$('.options > button[data-action="order-print"]').trigger("click"),$("#toast-container").find(".toast-close-button").trigger("click")}))}},{id:"locked-layout-image",type:"warning",onShow:function(){this.blinkingHint($('a.btn.btn-onmenu[data-action="on_unlockImage"]'))}},{id:"locked-element",type:"error",onShow:function(){this.blinkingHint($('a.btn.btn-onmenu[data-action="on_unlockElement"]'))}},{id:"template-placeholders",type:"info",onShow:function(){this.blinkingHint($('.tool-menu li a[href="#tabImages"]').parent())}},{id:"text-edit",type:"info",onShow:function(){this.blinkingHint($('a.btn.btn-onmenu[data-action="on_textBeginEdit"]'))}},{id:"saved",type:"success",content:function(e){var t=new Date,n=t.getHours(),r=t.getMinutes();return this.refreshTitle(),e("advice.content.saved",{H:n<10?"0"+n:n,i:r<10?"0"+r:r})},refreshTitle:function(){try{var e=document.querySelector('div[data-value="project-name"] > span').textContent;window.original="".concat(window.original.split("|")[0]," | ").concat(e),document.title=window.original}catch(e){}}}],blinkingHint:function(e){function t(){e.removeClass("blink")}e.addClass("blink"),e.one("click",t),_.delay(t,2e3)},initialize:function(e){this.initialized||(this.initialized=!0,this.initEventListeners(e),toastr.options={debug:!1,timeOut:5e3,showEasing:"easeOutBack",hideEasing:"easeInBack",showMethod:"slideDown",hideMethod:"slideUp",closeButton:!0,newestOnTop:!0,showDuration:300,hideDuration:300,extendedTimeOut:15e3,preventDuplicates:!0,positionClass:INKIVE.C.IS_MOBILE?"mobile toast-top-center":"toast-top-center"})},initEventListeners:function(e){e.bind("advice.show",_.bind((function(e,t,n){this.show(t,n)}),this))},show:function(e,t){if(INKIVE.C.IS_MOBILE||this.alertContainerResize(),!$("#svgcontent").is(".order-print-active")&&!INKIVE.C.EDITOR_BLOCKED){t=t||{};var n=_.find(this.messages,{id:e});if(n){var r=_.contains(this.shown,e);(!r||!n.once)&&this.showMessage(n,t),r||this.shown.push(e)}n||console.warn("Message "+e+" is not defined")}},showMessage:function(e,t){var n,r=toastr[e.type],o=toastr.options.timeOut,s=toastr.options.extendedTimeOut;if(e=this.translateFullMessage(e,t),$("#toast-container").remove(),_.isFunction(r)){if(e.more){var a=this;toastr.options.onclick=function(){a.showMoreInfo(e)},n=INKIVE.TranslateHelper.translate("advice.more_info",{event_name:i})}else t&&t.callback?(toastr.options.timeOut=0,toastr.options.extendedTimeOut=0,toastr.options.onclick=function(){t.callback()}):toastr.options.onclick=null,n="";if(e.closeButton&&(toastr.options.closeButton=!0,toastr.options.tapToDismiss=!1),e.content){_.defer((function(){return r(e.content+n)})),e.onShow&&e.onShow.call(this);var l=$("#toast-container");l.find(".toast-message").html(e.content.replace(/\\n/g,"<br/>")),l.find(".toast-close-button").empty()}toastr.options.timeOut=o,toastr.options.extendedTimeOut=s,toastr.options.onclick=null,toastr.options.closeButton=!0,toastr.options.tapToDismiss=!0}},translateFullMessage:function(e,t){t=_.extend({event_name:INKIVE.TranslateHelper.translate(i)},t||{});var n,r=INKIVE.TranslateHelper.translate,o=_.clone(e),s={title:"advice.title."+(n=e.id.split("-").join("_")),more:"advice.more."+n,content:"advice.content."+n};return _.each(s,(function(e,n){o[n]&&function(e){o[e]=o[e](r)}(n),o[n]||function(e,n){var i=r(n,t);i!==n&&(o[e]=i)}(n,e)})),o},alertContainerResize:function(){var e=document.querySelector("body"),t=document.querySelector("#tool-panel"),n=new MutationObserver((function(e){if(t.classList.contains("collapsed")){var r=e[0].addedNodes[0]&&document.querySelector("#".concat(e[0].addedNodes[0].id));r&&r.classList.toggle("full-width")}n.disconnect()}));n.observe(e,{childList:!0,subtree:!1,attributes:!0})},showMoreInfo:function(e){var t='<p class="advice">'+e.more+"</p>",n=INKIVE.Modal.modalWindow(t,{headerIcon:"icon-info",headerTitle:e.title,buttons:[{title:"Got it!",onClick:function(){n.close()}}]})}},Backbone.Events),t.exports=o(e("./restrictions/advice"),r(e("./app/advice"),new s))},{"../app/decorate":5,"../facade/restrictions/decorate":114,"./app/advice":608,"./restrictions/advice":620,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.join.js":868,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],608:[function(e,t,n){"use strict";e("core-js/modules/es.date.to-string.js"),t.exports={showMessageCheckOnce:function(){return!window.Android&&(this.appBridge.version.isApp("webrand")||this.appBridge.version.isApp("pdf")||this.appBridge.version.isGreaterThan("1.2"))},showMessage:function(e,t){e=this.translateFullMessage(e,t),this.trigger("show",e)},messages:[{id:"text-edit",type:"info"},{id:"pdf-text",type:"warning"},{id:"share-error",type:"error"},{id:"upload-error",type:"error"},{id:"template-back",type:"info"},{id:"upload-cancel",type:"info"},{id:"locked-element",type:"error"},{id:"global-locked",type:"error"},{id:"share-success",type:"success"},{id:"convert-to-layout-box",type:"success"},{id:"thumb-not-load",type:"warning"},{id:"already-saved",type:"success"},{id:"nothing-to-save",type:"success"},{id:"crop",type:"warning",once:!0},{id:"long-time-no-save",type:"warning"},{id:"locked-layout-image",type:"warning"},{id:"clipper-rotation-limit",type:"info"},{id:"uploading-images-save",type:"warning"},{id:"spacing-and-underline",type:"warning"},{id:"undo-unlocked-layout-image",type:"info"},{id:"image-flip-disabled",type:"warning"},{id:"restriction-text-email",type:"error"},{id:"restriction-image-content",type:"error"},{id:"restriction-text-swearing",type:"error"},{id:"restriction-text-date-range",type:"error"},{id:"restriction-text-number-nan",type:"error"},{id:"restriction-text-date-format",type:"error"},{id:"restriction-text-currency-range",type:"error"},{id:"restriction-text-currency-format",type:"error"},{id:"restriction-text-number-out-of-range",type:"error"},{id:"restriction-text-dictionary-not-found",type:"error"},{id:"background-color-add",type:"info"},{id:"resize-text-adjust-to-box",type:"info",once:!0},{id:"processing-pdf",type:"info"},{id:"pdf-ready",type:"success"},{id:"saved",type:"success",content:function(e){var t=new Date,n=t.getHours(),r=t.getMinutes();return e("advice.content.saved",{H:n<10?"0"+n:n,i:r<10?"0"+r:r})}}]}},{"core-js/modules/es.date.to-string.js":882}],609:[function(e,t,n){"use strict";Backbone.mixin=function(e,t){return _.defaults(e.prototype,t),_.defaults(e.prototype.events,t.events),e}},{}],610:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/esnext.promise.any.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/web.timers.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("../factory/desygner-api")),c=r(e("./socket")),u=function(){function e(){(0,s.default)(this,e),this._processing={},this._subscriptions={},this._intervals={},this._failed={}}var t;return(0,a.default)(e,[{key:"removeBackground",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._processing[e]&&!this._failed[e]||(this._failed[e]=!1,this._processing[e]=(0,i.default)(o.default.mark((function r(){var i,s;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i="business",INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.domain&&(i="brand/companies/".concat(INKIVE.C.WHITE_LABEL_CONFIGURATION.domain)),r.next=4,l.default.post("".concat(i,"/background-removal"),{image:e,generate_versions:!0});case 4:return s=r.sent,r.next=7,Promise.any([t._socketUpdate(e,s),t._s3PingUpdate(e,s),t._removalTimeout(e)]);case 7:if(t._unsubscribe(e),!t._failed[e]){r.next=10;break}throw new Error;case 10:if(!n){r.next=13;break}return r.next=13,t._processResizing(s.expected_output);case 13:return r.abrupt("return",s.expected_output);case 14:case"end":return r.stop()}}),r)})))()),this._processing[e]}},{key:"removeBackgroundAndEdit",value:(t=(0,i.default)(o.default.mark((function e(t){var n,r,i,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(s.length>1&&void 0!==s[1])||s[1],n=INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.domain?"brand/companies/".concat(INKIVE.C.WHITE_LABEL_CONFIGURATION.domain):"business",e.next=4,l.default.post("".concat(n,"/background-removal?edit"),{image:t,edit:!0,generate_versions:!0});case 4:return r=e.sent,e.next=7,Promise.any([this._socketUpdate(t,r),this._removalTimeout(t)]);case 7:if(i=e.sent,this._unsubscribe(t),i){e.next=11;break}throw new Error("Background removal failed");case 11:if(i.id&&i.secret){e.next=13;break}throw new Error("Invalid response from background removal");case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_processResizing",value:function(e){return new Promise((function(t){var n=new XMLHttpRequest,r=e.match(/[^/]*\.(inkive|webrand|desygner)\.com/),o=r&&r[0],i=(r=r&&e.split(o))&&r[1];if(o&&i){var s="key=".concat(encodeURIComponent(i),"&bucket=").concat(o,"&type=editor&scrapbookId=").concat(INKIVE.C.BOOK.id);n.open("POST","".concat(INKIVE.C.BASE_URL,"upload/successasync")),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(s),n.onload=t}else t()}))}},{key:"_socketUpdate",value:function(e,t){var n=this;return new Promise((function(r){n._subscriptions[e]=c.default.openChannel({disposeOnMessage:!0,successCallback:r,channelId:"background_removal_".concat(t.id)})}))}},{key:"_s3PingUpdate",value:function(e,t){var n=this;return new Promise((function(r){n._intervals[e]=setInterval((function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){2===e.readyState&&200===e.status&&(e.abort(),r())},e.open("GET",t.expected_output,!0),e.send()}),6e3)}))}},{key:"_removalTimeout",value:function(e){var t=this;return new Promise((function(n){return setTimeout((function(){t._failed[e]=!0,n()}),12e4)}))}},{key:"_unsubscribe",value:function(e){clearInterval(this._intervals[e]),this._subscriptions[e]&&this._subscriptions[e].dispose()}}]),e}();t.exports=new u},{"../factory/desygner-api":123,"./socket":621,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.split.js":926,"core-js/modules/esnext.promise.any.js":961,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966}],611:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof"));
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2018 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
/*!
 * Generated using the Bootstrap Customizer (<none>)
 * Config saved to config.json and <none>
 */
if(e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.timers.js"),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(e){var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function n(n,o){return this.each((function(){var i=e(this),s=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==(0,r.default)(n)&&n);s||i.data("bs.modal",s=new t(this,a)),"string"==typeof n?s[n](o):a.show&&s.show(o)}))}t.VERSION="3.3.7",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,o=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){r.$element.one("mouseup.dismiss.bs.modal",(function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),o&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:n});o?r.$dialog.one("bsTransitionEnd",(function(){r.$element.trigger("focus").trigger(i)})).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(i)})))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")}))},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy((function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;i?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):s()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var o=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=o,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var r=e(this),o=r.attr("href"),i=e(r.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},i.data(),r.data());r.is("a")&&t.preventDefault(),i.one("show.bs.modal",(function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",(function(){r.is(":visible")&&r.trigger("focus")}))})),n.call(i,s,this)}))}(jQuery),function(e){e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",(function(){n=!0}));return setTimeout((function(){n||e(r).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})}))}(jQuery)},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.find.js":859,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/web.timers.js":966}],612:[function(e,t,n){"use strict";e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.index-of.js"),t.exports={set:function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="; expires="+r.toGMTString()}else o="";document.cookie=e+"="+t+o+"; path=/"},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},delete:function(e){this.set(e,"",-1)}}},{"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],613:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getBoxCoordinatesFromDimensions=function(e){return l.map((function(t){return e[t]})).join(" ")},n.getDimensionsFromElement=p,n.getDimensionsFromBoxCoordinates=h,n.getDimensionsFromAttributes=function(e){return l.reduce((function(t,n){return a(a({},t),{},(0,o.default)({},n,Number(e.getAttribute(n))))}),{})},n.applyDimensionsFromBoxCoordinates=n.applyDimensionsFromElement=n.DIMENSIONS_ATTRIBUTES=void 0,e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/slicedToArray"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=["x","y","width","height"];function c(e){var t="bbox"===e?p:h;return function(e){var n=e.from,r=e.to,o=[n,r].map(t),s=(0,i.default)(o,2),a=s[0];(function(e,t){var n=e.width===t.width,r=e.height===t.height,o=n&&r,i=!e.width&&!e.height;return!(o||i)})(a,s[1])&&svgedit.utilities.assignAttributes(r,a)}}n.DIMENSIONS_ATTRIBUTES=l;var u=c("bbox");n.applyDimensionsFromElement=u;var d=c("boxCoordinates");function p(e){var t=e.getBBox();return l.reduce((function(n,r){return a(a({},n),{},(0,o.default)({},r,function(n){return Number(e.getAttribute(n))||t[n]}(r)))}),{})}function h(e){var t,n=(null!==(t=e.dataset.boxCoordinates)&&void 0!==t?t:e.textContent).split(/\s+/).map(Number);return 4!==n.length?p(e):l.reduce((function(e,t,r){return a(a({},e),{},(0,o.default)({},t,n[r]))}),{})}n.applyDimensionsFromBoxCoordinates=d},{"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],614:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js");var r="...".length;function o(e,t){e.attr("title")||e.attr("title",t)}t.exports=function(e){(e=e||$("body")).find("[data-charlimit]").each((function(){var e=$(this),t=!1,n=e.data("charlimit");t|=function(e,t){var n=function(){var t=e.attr("tag");return t&&t.trim()}();return n&&n.length>t&&i()&&o(e,n),""!=n;function i(){var o=n.substring(0,t-r)+"...";return e.attr("tag",o),!0}}(e,n),(t|=function(e,t){var n=function(){var t=e.contents().last().text();return t&&t.trim()}();return n&&n.length>t&&i()&&o(e,n),""!=n;function i(){var o=n.substring(0,t-r)+"...";return e.contents().last().replaceWith(o),!0}}(e,n))||console.warn("Can't trim",this)}))}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.string.trim.js":929}],615:[function(e,t,n){"use strict";var r,o,i,s,a,l,c,u,d,p,h,m;e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.object.to-string.js"),r=function e(t,n,r){if(!l(n)||u(n)||d(n)||p(n))return n;var o,i=0,s=0;if(c(n))for(o=[],s=n.length;i<s;i++)o.push(e(t,n[i],r));else for(var a in o={},n)n.hasOwnProperty(a)&&(o[t(a,r)]=e(t,n[a],r));return o},o=function(e){return h(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)},i=function(e){var t=o(e);return t.substr(0,1).toUpperCase()+t.substr(1)},s=function(e,t){return function(e,t){var n=(t=t||{}).separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)}(e,t).toLowerCase()},a=Object.prototype.toString,l=function(e){return e===Object(e)},c=function(e){return"[object Array]"==a.call(e)},u=function(e){return"[object Date]"==a.call(e)},d=function(e){return"[object RegExp]"==a.call(e)},p=function(e){return"[object Boolean]"==a.call(e)},h=function(e){return(e-=0)==e},m={camelize:o,decamelize:s,pascalize:i,depascalize:s,camelizeKeys:function(e){return r(o,e)},decamelizeKeys:function(e,t){return r(s,e,t)},pascalizeKeys:function(e){return r(i,e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},"function"==typeof define&&define.amd?define(m):void 0!==t&&t.exports?t.exports=m:(void 0).humps=m},{"core-js/modules/es.array.join.js":868,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],616:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/slicedToArray"));e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.string.starts-with.js"),e("core-js/modules/es.string.match.js");var o=e("../factory/images"),i=e("../facade/design/design"),s=e("./images-sanitize/clip-path-sanitize"),a=e("../../helpers/dataUrl").isDataURL;function l(e,t){var n=" ".concat(t,'="([^"]*)"'),r=e.match(n);return null==r?void 0:r[1]}function c(e){return l(e,"id")}t.exports={base64Sanitize:function(e){return e.replace(/(<image[^>]*xlink:href=")(data:[^;]*;base64[^"]*)("[^>]*)/gi,(function(e,t,n,r){var i=c(e),s=o.getImageHash(i,n);return o.setBase64(s,n),t+s+r}))},base64Load:function(e){return e.replace(/(<image[^>]*xlink:href=")([^"]*)("[^>]*)/gi,(function(e,t,n,r){var i=o.getBase64(n);return i?t+i+r:e}))},preLoadImagesSanitize:function(e){return(e=e.replace(/<image([^>]*)xlink:href="([^"]*)"([^>]*)>([^<]*)<\/image>/g,(function(e,n,r,o,i){return t(e,n,r,o,i)}))).replace(/<image([^>]*)xlink:href="([^"]*)"([^>]*)\/>/g,(function(e,n,r,o){return t(e,n,r,o)}));function t(e,t,n,i,s){if(o.isBlacklisted(c(e),n))return"";if(a(n)&&void 0===o.getImageUrl(c(e),n))return"";var u;if(["/videothumbs/","/video/"].find((function(e){return n.includes(e)})))return e;if(t.indexOf("data-url=")>-1||i.indexOf("data-url=")>-1||a(n))return e;if(n){var d=(u=o.getOriginalUrl(n)||n,Object.entries({"&":/&amp;/g}).reduce((function(e,t){var n=(0,r.default)(t,2),o=n[0],i=n[1];return e.replace(i,o)}),u)),p=l(e,"data-hash");o.setImageUrl(c(e),d,p)}return s?"<image"+t+'data-url="'+n+'"'+i+">"+s+"</image>":"<image"+t+'data-url="'+n+'"'+i+"/>"}},postLoadBackgroundSanitize:function(e){var t=$(e).find("svg > g.background"),n=t.find("image"),r=t.find("rect");return n.prevObject.length&&INKIVE.C.initialBackgroundImageSource&&i.set("background",{source:INKIVE.C.initialBackgroundImageSource}),n.length&&function(){var e=parseFloat(n[0].getAttribute("width"))&&parseFloat(n[0].getAttribute("height"));function t(){var e={x:n.attr("x"),y:n.attr("y"),width:n.attr("width"),height:n.attr("height"),class:n.attr("class")},t=o.getImageUrl(n.get(0));t?(n.removeAttr("data-url"),i.set("background",{attrs:e,source:t,smart_load:!0,is_initial_load:!0})):(t=n.attr("xlink:href"))||n.remove()}e&&t(),e||(r=new Image,r.src=INKIVE.Helpers.getCORSSecureUrl(n.data("url")),$(r).load((function(){var e=INKIVE.Tool.getInstance().editor.canvas,o=INKIVE.DesignFacade.setters.background._getBackgroundSize(r);n.attr("x",(e.contentW-o.width)/2),n.attr("y",(e.contentH-o.height)/2),n.attr("width",o.width),n.attr("height",o.height),t()})));var r}(),function(){if(!r.length){var e=document.createElementNS(svgedit.NS.SVG,"rect");t.prepend(e),r=$(e)}r.attr("x",0),r.attr("y",0),r.attr("width","100%"),r.attr("height","100%"),r.attr("id","svg_background_color")}(),e},postLoadImagesSanitize:function(e){var t=INKIVE.Tool.getInstance().editor.canvas,n=INKIVE.Tool._current_design_id;return $("image.dummy").remove(),$(e).find("image").each((function(){var r=this,a=$(this);if(!(r.getAttribute("xlink:href")||a.parent().is(".background")||"0"===a[0].getAttribute("opacity"))){var l=o.getImageUrl(r);if(l&&l.startsWith("http")&&!r.dataset.url?r.dataset.url=l:l&&!r.dataset.hash&&(r.dataset.hash=l),l){var c=INKIVE.Image.Helpers.getInOrderLoadOptions(l,{width:r.getAttribute("width"),height:r.getAttribute("height")}),u=INKIVE.Helpers.elementHelper(r.parentElement);u.isIcon()||u.isSticker()||r.removeAttribute("data-url"),INKIVE.Image.Helpers.loadImageOptions(c,(function(e){if(n===INKIVE.Tool._current_design_id){var o=!(a.is(".logo")||a.parent().is(".logo")||a.is(".icon")||a.parent().is(".icon")),s=o?r.getAttribute("id"):a.closest(".element")[0].getAttribute("id"),l=o?{source:{url:e.src,smart_load:!1}}:{thumb_src:e.src,smart_load:!1};i.set(s,_.extend(l,{is_initial_load:!0})),t.runExtensions("fixImageSize",{elem:r,skipSelection:!0})}})),s.sanitize(t,e,r)}else r.getAttribute("xlink:href")||a.remove()}})),s.removeUnusedClippaths(e),e},setImagePositionedAsBackground:function(e){var t=e.find("g.background"),n=e.find('[data-position="background"]');if(n.length&&!t.find("image").length){var r=n.attr("data-url");n.detach(),n.attr("data-position",""),n.attr("data-url",""),n.attr("id","svg_background_image"),r&&n.attr("xlink:href",r),svgedit.recalculate.cloneTransfromList(t[0],n[0]),svgedit.recalculate.recalculateDimensions(n[0]),t.append(n)}return t.length&&t[0].removeAttribute("transform"),e}}},{"../../helpers/dataUrl":632,"../facade/design/design":47,"../factory/images":127,"./images-sanitize/clip-path-sanitize":617,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.starts-with.js":927}],617:[function(e,t,n){"use strict";e("core-js/modules/es.array.find.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),t.exports={sanitize:function(e,t,n){var r=t.firstChild,o=n.getAttribute("clip-path"),i=INKIVE.Tool.getInstance(),s=!($(n).is(".logo")||$(n).parent().is(".logo")||$(n).is(".icon")||$(n).parent().is(".icon")||$(n).parent().is(".video")),a=$(t).find(i.editor.canvas.getClipPathId(o)),l=!o||0===a.length;s&&l&&this.addMissingClipPath(e,r,n),a.length&&(this.removeElementWithInvalidClipPath(a,n),this.handleRotatedClipPath(a,n))},addMissingClipPath:function(e,t,n){var r="clip_"+n.id,o=this.getLayoutBox(e,t,n),i=this.getlayoutDefs(t),s=window.document.createElementNS(svgedit.NS.SVG,"clipPath");this.purgeExistingClipPath(t,r),n.setAttribute("clip-path",'url("#'+r+'")'),$(n).addClass("layoutBox").removeClass("image"),o.setAttribute("class","layoutClipper"),s.setAttribute("id",r),s.appendChild(o),i.appendChild(s),t.insertBefore(i,t.firstChild)},getLayoutBox:function(e,t,n){var r,o=(r=n.textContent.split(/[^-|\d\.]/))&&4===r.length&&{x:Math.floor4(r[0]),y:Math.floor4(r[1]),width:Math.floor4(r[2]),height:Math.floor4(r[3])}||{x:n.getAttribute("x"),y:n.getAttribute("y"),width:n.getAttribute("width"),height:n.getAttribute("height")};return function(e){n.textContent=e.x+" "+e.y+" "+e.width+" "+e.height}(o),e.addSvgElementFromJson({element:"rect",curStyles:!1,attr:_.extend(o,{id:INKIVE.Helpers.getUnusedId(t)})})},getlayoutDefs:function(e){var t=$(e).find("defs").get(0);return t||(t=window.document.createElementNS(svgedit.NS.SVG,"defs")).setAttribute("id","layout_defs"),t},purgeExistingClipPath:function(e,t){var n=$(e).find("#"+t);n[0]&&n.remove()},removeElementWithInvalidClipPath:function(e,t){var n=!1;e.find("[width],[height]").each((function(){($(this).attr("width")<=0||$(this).attr("height")<=0)&&(n=!0)})),n&&(e.remove(),$(t).remove())},handleRotatedClipPath:function(e,t){_.each(e[0].childNodes,(function(e){if(e.nodeType===Node.ELEMENT_NODE){for(var n=svgedit.transformlist.getTransformList(e),r=!1,o=0;o<n.numberOfItems;++o)n.getItem(o).type===SVGTransform.SVG_TRANSFORM_ROTATE&&(r=!0);$(t).toggleClass("non-selectable",r)}}))},removeUnusedClippaths:function(e){var t=$(e);t.find(".main").siblings("defs").children().each((function(){t.find('[clip-path="url(#'+this.id+')"]').length||$(this).is("clip-path")&&$(this).remove()}))}}},{"core-js/modules/es.array.find.js":859,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],618:[function(e,t,n){"use strict";e("core-js/modules/es.array.join.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),t.exports=function(){function e(e,t){var s=e[0],a=e[1],l=e[2],u=e[3];s=n(s,a,l,u,t[0],7,-680876936),u=n(u,s,a,l,t[1],12,-389564586),l=n(l,u,s,a,t[2],17,606105819),a=n(a,l,u,s,t[3],22,-1044525330),s=n(s,a,l,u,t[4],7,-176418897),u=n(u,s,a,l,t[5],12,1200080426),l=n(l,u,s,a,t[6],17,-1473231341),a=n(a,l,u,s,t[7],22,-45705983),s=n(s,a,l,u,t[8],7,1770035416),u=n(u,s,a,l,t[9],12,-1958414417),l=n(l,u,s,a,t[10],17,-42063),a=n(a,l,u,s,t[11],22,-1990404162),s=n(s,a,l,u,t[12],7,1804603682),u=n(u,s,a,l,t[13],12,-40341101),l=n(l,u,s,a,t[14],17,-1502002290),s=r(s,a=n(a,l,u,s,t[15],22,1236535329),l,u,t[1],5,-165796510),u=r(u,s,a,l,t[6],9,-1069501632),l=r(l,u,s,a,t[11],14,643717713),a=r(a,l,u,s,t[0],20,-373897302),s=r(s,a,l,u,t[5],5,-701558691),u=r(u,s,a,l,t[10],9,38016083),l=r(l,u,s,a,t[15],14,-660478335),a=r(a,l,u,s,t[4],20,-405537848),s=r(s,a,l,u,t[9],5,568446438),u=r(u,s,a,l,t[14],9,-1019803690),l=r(l,u,s,a,t[3],14,-187363961),a=r(a,l,u,s,t[8],20,1163531501),s=r(s,a,l,u,t[13],5,-1444681467),u=r(u,s,a,l,t[2],9,-51403784),l=r(l,u,s,a,t[7],14,1735328473),s=o(s,a=r(a,l,u,s,t[12],20,-1926607734),l,u,t[5],4,-378558),u=o(u,s,a,l,t[8],11,-2022574463),l=o(l,u,s,a,t[11],16,1839030562),a=o(a,l,u,s,t[14],23,-35309556),s=o(s,a,l,u,t[1],4,-1530992060),u=o(u,s,a,l,t[4],11,1272893353),l=o(l,u,s,a,t[7],16,-155497632),a=o(a,l,u,s,t[10],23,-1094730640),s=o(s,a,l,u,t[13],4,681279174),u=o(u,s,a,l,t[0],11,-358537222),l=o(l,u,s,a,t[3],16,-722521979),a=o(a,l,u,s,t[6],23,76029189),s=o(s,a,l,u,t[9],4,-640364487),u=o(u,s,a,l,t[12],11,-421815835),l=o(l,u,s,a,t[15],16,530742520),s=i(s,a=o(a,l,u,s,t[2],23,-995338651),l,u,t[0],6,-198630844),u=i(u,s,a,l,t[7],10,1126891415),l=i(l,u,s,a,t[14],15,-1416354905),a=i(a,l,u,s,t[5],21,-57434055),s=i(s,a,l,u,t[12],6,1700485571),u=i(u,s,a,l,t[3],10,-1894986606),l=i(l,u,s,a,t[10],15,-1051523),a=i(a,l,u,s,t[1],21,-2054922799),s=i(s,a,l,u,t[8],6,1873313359),u=i(u,s,a,l,t[15],10,-30611744),l=i(l,u,s,a,t[6],15,-1560198380),a=i(a,l,u,s,t[13],21,1309151649),s=i(s,a,l,u,t[4],6,-145523070),u=i(u,s,a,l,t[11],10,-1120210379),l=i(l,u,s,a,t[2],15,718787259),a=i(a,l,u,s,t[9],21,-343485551),e[0]=c(s,e[0]),e[1]=c(a,e[1]),e[2]=c(l,e[2]),e[3]=c(u,e[3])}function t(e,t,n,r,o,i){return t=c(c(t,e),c(r,i)),c(t<<o|t>>>32-o,n)}function n(e,n,r,o,i,s,a){return t(n&r|~n&o,e,n,i,s,a)}function r(e,n,r,o,i,s,a){return t(n&o|r&~o,e,n,i,s,a)}function o(e,n,r,o,i,s,a){return t(n^r^o,e,n,i,s,a)}function i(e,n,r,o,i,s,a){return t(r^(n|~o),e,n,i,s,a)}function s(t){var n,r=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(o,a(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(e(o,i),n=0;n<16;n++)i[n]=0;return i[14]=8*r,e(o,i),o}function a(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function l(e){for(var t="",n=0;n<4;n++)t+=u[e>>8*n+4&15]+u[e>>8*n&15];return t}function c(e,t){return e+t&4294967295}var u="0123456789abcdef".split("");return function(e){return function(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}(s(unescape(encodeURIComponent(e))))}}()},{"core-js/modules/es.array.join.js":868,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],619:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.find.js"),e("core-js/modules/es.parse-int.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("./socket")),c="success",u="success_page",d=new(function(){function e(){(0,s.default)(this,e),this._channel=null,this._project=null}var t;return(0,a.default)(e,[{key:"subscribe",value:function(e){this._channel||this._listenToUpdates(),this._project=e}},{key:"isBeingProcessed",value:function(e){return!!this._project&&(!!this._project.is_being_processed&&(!this._project.metadata||!this._project.metadata.svg_status||!this._project.metadata.svg_status.find((function(t){return parseInt(t.page_number)===e}))))}},{key:"_listenToUpdates",value:function(){var e=this;this._channel=l.default.openChannel({successCallback:function(t){return e._onUpdate(t)},channelId:"webrand_parser_".concat(INKIVE.C.BOOK.encodedId)})}},{key:"_onUpdate",value:function(e){var t=this.isBeingProcessed(INKIVE.Tool._current_page_number);e.status=(e.status||"").toLowerCase(),e.status===c?(this._project.is_being_processed=!1,this._channel.dispose()):e.status===u&&(this._project.metadata=this._project.metadata||{},this._project.metadata.svg_status=this._project.metadata.svg_status||[],this._project.metadata.svg_status.push(e)),t&&!this.isBeingProcessed(INKIVE.Tool._current_page_number)&&this._reloadCurrentPage()}},{key:"_reloadCurrentPage",value:(t=(0,i.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=INKIVE.Tool._current_design_id,n=INKIVE.Tool.getInstance(),r=n.editor.canvas,INKIVE.Tool._current_design_id=null,e.next=6,INKIVE.EditorFacade.handle("page","move_to",{design_id:t});case 6:r.call("advice.show","pdf-ready");case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}());n.default=d},{"./socket":621,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.find.js":859,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-int.js":905}],620:[function(e,t,n){"use strict";e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.find.js"),t.exports={messages:[{id:"restriction-text-email",type:"error"},{id:"restriction-image-content",type:"error"},{id:"restriction-text-character-number-range",type:"error"},{id:"restriction-text-swearing",type:"error"},{id:"restriction-text-date-range",type:"error"},{id:"restriction-text-number-nan",type:"error"},{id:"restriction-text-date-format",type:"error"},{id:"restriction-text-currency-range",type:"error"},{id:"restriction-text-currency-format",type:"error"},{id:"restriction-text-number-out-of-range",type:"error"},{id:"restriction-text-dictionary-not-found",type:"error"},{id:"upload-error",type:"error"},{id:"workflow-request-wip",type:"warning"},{id:"background-color-add",type:"info"},{id:"global-locked",type:"error"},{id:"undo-unlocked-layout-image",type:"info"},{id:"locked-layout-image",type:"warning",onShow:function(){this.blinkingHint($('a.btn.btn-onmenu[data-action="on_unlockImage"]'))}},{id:"locked-element",type:"error",onShow:function(){this.blinkingHint($('a.btn.btn-onmenu[data-action="on_unlockElement"]'))}},{id:"long-time-no-save",type:"warning"},{id:"uploading-images-save",type:"warning"},{id:"nothing-to-save",type:"success"},{id:"already-saved",type:"success"},{id:"saved",type:"success",content:function(e){var t=new Date,n=t.getHours(),r=t.getMinutes();return this.refreshTitle(),e("advice.content.saved",{H:n<10?"0"+n:n,i:r<10?"0"+r:r})},refreshTitle:function(){try{var e=document.querySelector('div[data-value="project-name"] > span').textContent;window.original="".concat(window.original.split("|")[0]," | ").concat(e),document.title=window.original}catch(e){}}},{id:"nothing-to-save",type:"success"},{id:"img-quality-acceptable",type:"info"},{id:"low-img-quality-present",type:"warning"},{id:"design-available-for-print-order",type:"info",onShow:function(){var e=$("<a>"+INKIVE.TranslateHelper.translate("common.get_quote")+"</a>");$("#toast-container").find(".toast-message:first").after(e),e.on("click",(function(){$('.options > button[data-action="order-print"]').trigger("click"),$("#toast-container").find(".toast-close-button").trigger("click")}))}},{id:"crop-restriction-applied",type:"success"},{id:"crop",type:"warning",once:!0}]}},{"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],621:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/web.timers.js");function r(){this.isSSL="test"===CONFIG.environment||!CONFIG.base_url.match(/[a-z]-(webrand|desygner).com/)&&"prod"===CONFIG.environment,this.port=":"+(this.isSSL?"8888":CONFIG.socket_port)}r.prototype.openChannel=function(e){var t=e.channelId,n=e.successCallback,r=e.errorCallback,i=e.disposeOnMessage,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=document.location.protocol.replace("http","ws"),l=document.location.host.replace("desygner","webrand").replace(/^.+\.(.+\..+)$/,"$1"),c=new WebSocket("".concat(a,"//").concat(l).concat(this.port));return c.addEventListener("open",u),c.addEventListener("error",d),c.addEventListener("close",d),c.addEventListener("message",h),{dispose:m};function u(){c.send(JSON.stringify({channel:t,credentials:CONFIG.credentials}))}function d(e){m(),r?r(e):1e3===e.code||p()}function p(){var e=500*++s;setTimeout((function(){return o.openChannel({channelId:t,successCallback:n},s)}),e)}function h(e){n(JSON.parse(e.data).message),i&&m()}function m(){c.removeEventListener("error",d),c.removeEventListener("message",h),c.removeEventListener("open",u),c.removeEventListener("close",d),c.close()}};var o=new r;t.exports=o},{"core-js/modules/es.array.concat.js":854,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.timers.js":966}],622:[function(e,t,n){"use strict";function r(e,t){return e.localeCompare(t,void 0,{sensitivity:"base"})}e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.sortString=r,n.sortByProperty=function(e){return function(t,n){return r(t[e],n[e])}}},{"core-js/modules/es.object.define-property.js":895}],623:[function(e,t,n){"use strict";t.exports=function(e){INKIVE.C.DEFAULT_FINEUPLOADER.messages.typeError="{file} has an invalid extension. Valid extension(s): {extensions}.",INKIVE.C.TextDefault=[{text:e("text.option_title"),fontFamily:"Lato",fontSize:"45",size:.18},{text:e("text.option_subtitle"),fontFamily:"Lato",fontSize:"30",size:.1},{text:e("text.option_body"),fontFamily:"Lato",fontSize:"20",size:.04},{text:e("text.option_text_block"),fontFamily:"Lato",fontSize:"15",size:.03,textBlock:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."}],INKIVE.C.HTML={breadcrumbWrapper:'<ul class="breadcrumb"><li></li></ul>',breadcrumbElement:function(e,t,n){return'<a data-toggle="tab" href="#'+e+'" class="'+t+'">'+n+" </a>&gt "},progressBar:function(e){return e||console.error("INKIVE.C.HTML.progressBar: id is not defined"),$.parseHTML('<div class="progress-wrapper" id="'+e+'"><div class="progress"><div class="progress-bar" role="progressbar" style="width: 0%;">0%</div></div><a class="btn progress-cancel"><i class="desygner-icon-close"></i></a></div>')}}}},{}],624:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getYoutubeCode=function(e){var t=function(e){if("object"===(0,o.default)(e)&&e&&e.url)return e.url;return e}(e);if(!t)return null;var n=t&&t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);if(t&&!t.startsWith("http")&&!t.includes("//"))return t;if(n&&n[7]&&11===n[7].length)return n[7];return null},e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.string.starts-with.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var o=r(e("@babel/runtime/helpers/typeof"))},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.starts-with.js":927}],625:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addElement=function(e){var t=d.addSvgElementFromJson({element:"a",attr:{id:e.id||d.getCurrentDrawing().getNextId(),class:"element video layoutBox quick-delete","xlink:href":e.source||INKIVE.Helpers.getCORSSecureUrl(e.url),"data-duration":e.duration||"","data-video-type":"mp4"}}),n=d.addSvgElementFromJson({element:"image",attr:{x:e.position.x,y:e.position.y,id:d.getCurrentDrawing().getNextId(),width:e.size.width,height:e.size.height,"xlink:href":e.thumb_src}});t.appendChild(n);var r=d.addSvgElementFromJson({element:"path",attr:{id:d.getCurrentDrawing().getNextId(),d:function(){var e=svgedit.utilities.getBBox(t),n=Math.floor4(e.x+e.width/2),r=Math.floor4(e.y+e.height/2);return"M ".concat(n,",").concat(r," ").concat(n,",").concat(r," z")}(),fill:"#FFFFFF"}});return t.appendChild(r),j(t,t.getAttribute("xlink:href")),_(t.id,!1),t},n.initialiseVideoPlayer=f,n.deleteVideoPlayer=y,n.updateVideoPlayerSize=I,n.backwardsCompatibility=function(e){var t=!!(0,a.getYoutubeCode)(e.getAttribute("xlink:href"));"image"!==e.nodeName&&e.hasAttribute("clip-path")||(e=function(e){var t=e.querySelector("image"),n=(0,l.getDimensionsFromAttributes)(t),r={id:e.id,source:e.getAttribute("xlink:href")||e.dataset.src,duration:e.dataset.duration,thumb_src:e.getAttribute("xlink:href"),position:{x:n.x,y:n.y},size:{width:n.width,height:n.height}};return e.remove(),INKIVE.DesignFacade.create("video",r)}(e));e.classList.contains("video-elem")&&(e.classList.remove("video-elem"),e.classList.add("video"));e.dataset.videoType||(e.dataset.videoType=t?"youtube":"mp4")},n.default=void 0;var o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.date.to-iso-string.js");var i=e("../../../../src/components/sidebar-animation/animation-events"),s=e("../../../../src/helpers"),a=e("../utils/youtube"),l=e("../utils/dimensions");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d,p='.element.video:not([data-video-type="youtube"])',h="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xhtml";function f(e,t){var n=document.getElementById("video-preview-".concat(e.id)),r=e.querySelector("g");!e||!e.getAttribute("xlink:href")||"mp4"!==e.dataset.videoType||n&&r||(r&&r.remove(),y(e),j(e,e.getAttribute("xlink:href"),t))}function g(e){var t=e.map((function(e){return e?"background"===e.id?document.querySelector("#svgcontent > g.background"):document.getElementById(e.id):e})).filter(v);t.forEach(f);var n,r=c(document.querySelectorAll(p));try{for(r.s();!(n=r.n()).done;){var o=n.value,i=t.includes(o);_(o.id,i)}}catch(e){r.e(e)}finally{r.f()}INKIVE.Tool.getInstance().editor.canvas.showOverlayElements()}function b(e){if(e){var t=document.getElementById(e.id);if(t){var n=(0,a.getYoutubeCode)(e.source),r=t.querySelector("g");"locked"in e||(r&&r.remove(),y(t)),e.source&&!n&&j(t,e.source)}}}function v(e){return!!e&&[e,e.parentElement,e.closest(".video.element")].find((function(t){if(!t)return!1;var n=t.classList,r="youtube"!==t.dataset.videoType,o=n.contains("element")&&n.contains("video"),i=n.contains("group")&&e.querySelector(p);return r&&(o||i)}))}function y(e){var t=document.getElementById("video-preview-".concat(e.id));t&&t.remove()}function j(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=document.createElementNS(m,"video");r.crossOrigin="*",r.preload="metadata",r.playsinline=!0,r.muted=!1,r.controls=!1;var o=document.createElement("source");o.src=t,r.append(o);var s=document.createElementNS(h,"foreignObject");s.append(r);var a=document.createElementNS(h,"g");a.append(s),a.dataset.sanitize="ignore",e.append(a);var l=document.createElement("div");l.classList.add("video-preview"),l.id="video-preview-".concat(e.id),y(l);var c=w(r);l.append(c);var u=document.querySelector("#canvas-panel")||document.body;u.append(l),I(e),r.addEventListener("loadedmetadata",(function(){e.dataset.duration=1e3*r.duration;var t=c.querySelector(".video-controls-progress"),o=c.querySelector(".total-time");t.setAttribute("max",r.duration),o.innerHTML=x(r.duration),I(e),n&&((0,i.dispatchAnimationEvent)("updateMinimumDuration"),INKIVE.DesignFacade.trigger("video.loadedmetadata",{id:e.id}))}))}function _(e,t){var n=document.getElementById(e),r=document.getElementById("video-preview-".concat(e));if(v(n)){var o=n.querySelector("video");o&&r&&(t?(r.classList.remove("visibility-hidden"),I(n)):(o.pause(),r.classList.add("visibility-hidden")))}}function w(e){var t=document.createElement("div");t.innerHTML='\n    <div class="video-controls">\n      <button class="video-controls-playpause" data-state="play">\n        <span class="video-play">\n          <svg fill="#fff">\n            <use xlink:href="#video-play"></use>\n          </svg>\n        </span>\n        <span class="video-pause">\n          <svg fill="#fff">\n            <use xlink:href="#video-pause"></use>\n          </svg>\n        </span>\n      </button>\n      <div class="progress">\n        <div class="progress-inner">\n          <span class="current-time">00:00</span>\n          <progress class="video-controls-progress" value="0" min="0">\n            <span class="video-controls-progress-bar"></span>\n          </progress>\n          <span class="total-time">00:00</span>\n        </div>\n      </div>\n    </div>\n  '.trim();var n=t.firstChild,r=n.querySelector(".progress-inner"),o=n.querySelector(".current-time"),i=n.querySelector(".video-controls-playpause"),s=n.querySelector(".video-controls-progress"),a=n.querySelector(".video-controls-progress-bar"),l=!1,c=function(){e.paused||e.ended?i.setAttribute("data-state","play"):i.setAttribute("data-state","pause")};function u(t){var n=(t.pageX-s.getBoundingClientRect().x)/s.offsetWidth*s.max;s.value=n,n<0?o.innerHTML="00:00":n>e.duration?o.innerHTML=x(e.duration):o.innerHTML=x(n),e.currentTime=n}return e.addEventListener("timeupdate",(function(){l||(s.value=e.currentTime),a.style.width=Math.floor(e.currentTime/e.duration*100)+"%",o.innerHTML=x(e.currentTime)})),e.addEventListener("play",c,!1),e.addEventListener("pause",c,!1),i.addEventListener("click",(function(){e.paused||e.ended?e.play():e.pause()})),r.addEventListener("mousedown",(function(e){return l=!0,u(e),e.stopPropagation(),!1})),document.addEventListener("mousemove",(function(e){l&&u(e)})),document.addEventListener("mouseup",(function(e){l&&u(e),l=!1})),n}function I(e){var t=e.classList.contains("element")?e:e.closest(".element"),n=t.querySelector("image"),r=t.hasAttribute("clip-path")?svgedit.utilities.getClipPath(t).childNodes[0]:t.querySelector("image"),o=t.querySelector("foreignObject");if((0,l.applyDimensionsFromElement)({from:e,to:n}),o){var i=o.querySelector("video");i.width=n.getAttribute("width"),i.height=n.getAttribute("height"),(0,l.applyDimensionsFromElement)({from:n,to:o})}var a=document.getElementById("video-preview-".concat(t.id));if(a){var c=a.querySelector(".video-controls-playpause"),u=a.querySelector(".progress"),d=t.getAttribute("transform");d&&t.removeAttribute("transform");var p=r.getBoundingClientRect(),h=p.width,m=p.height,f=p.x,g=p.y;if(d&&t.setAttribute("transform",d),a.style.opacity=t.getAttribute("opacity"),a.style.transform=(0,s.convertSvgTransformToCss)(d),a.style.width="".concat(h,"px"),a.style.height="".concat(m,"px"),a.style.top="".concat(g,"px"),a.style.left="".concat(f,"px"),u){m<100||h<100?(u.classList.add("min-size"),c.classList.add("min-size")):(u.classList.remove("min-size"),c.classList.remove("min-size"))}}}function x(e){var t=new Date(0);return t.setSeconds(Math.round(e)),t.toISOString().substr(14,5)}n.default=function(e){d=e,function(){var e,t,n,r,i,a,l,c;function u(e){m(e.touches[0])}function p(e){g(e.touches[0])}function h(a){n=[],e=(0,o.default)(d.getSelectedElems()).filter(v);var l=a.target;if(l.closest("#outsideCanvasSelectorGroup")){var c=document.getElementById(l.dataset.relatedId.substr(1));c&&(l=c)}if(INKIVE.RestrictionsFacade.isRestrictedDesign()&&l.closest(".element")){var h=l.closest(".element").id;if(!1===INKIVE.RestrictionsFacade.getElementRestriction(h,"video_position"))return}l&&l.closest("#svgcontent")&&e.length&&(l.classList.contains(".element")||l.closest(".element"))&&!l.classList.contains(".locked")&&!l.closest(".element").closest(".locked")&&(n=document.querySelectorAll(e.map((function(e){return"#video-preview-".concat(e.id)})).join(",")),t=e.map((function(e){return(0,s.convertSvgTransformToCss)(e.getAttribute("transform"))})),r=a.clientX,i=a.clientY,document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("touchmove",u,{passive:!0}),document.addEventListener("mouseup",g,{passive:!0}),document.addEventListener("touchend",p,{passive:!0}))}function m(e){c||(a=e.clientX-r,l=e.clientY-i,c=requestAnimationFrame(f))}function f(){n.forEach((function(e,n){var r=t[n];e.style.transform="translate3d(".concat(a,"px, ").concat(l,"px, 0px) ").concat(r)})),c=null}function g(){document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",u),document.removeEventListener("mouseup",g),document.removeEventListener("touchend",p),c&&(cancelAnimationFrame(c),c=null),n.forEach((function(e,n){var r=t[n];e.style.transform="translate3d(0px,0px,0px) ".concat(r)})),a=l=null,e.forEach(I)}document.addEventListener("mousedown",h,{passive:!0}),document.addEventListener("touchstart",(function(e){h(e.touches[0])}),{passive:!0})}(),d.bind("editor.selected",(function(e){return g(e)})),INKIVE.EditorFacade.on("select",(function(e){return g(e)})),INKIVE.EditorFacade.on("align.end",(function(e){e.forEach(I)})),INKIVE.EditorFacade.on("dimensions.changed",(function(e){var t=e.element_id,n=document.getElementById(t);null!=n&&n.id&&"video"===INKIVE.DesignFacade.getType(n)&&_(t,!0)})),INKIVE.DesignFacade.on("video.update",b),INKIVE.DesignFacade.on("video.replace",b),INKIVE.EditorFacade.on("resize.start",(function(e){_(e.element_id,!1)})),INKIVE.EditorFacade.on("rotate.start",(function(e){_(e.element_id,!1)})),INKIVE.EditorFacade.on("rotate.end",(function(e){_(e.element_id,!0)})),INKIVE.EditorFacade.on("sidebarpanel.toggle",(function(){document.querySelectorAll("#svgcontent ".concat(p,".selected")).forEach((function(e){return _(e.id,!1)}))})),INKIVE.EditorFacade.on("zoom.changed",(function(){document.querySelectorAll("#svgcontent ".concat(p,".selected")).forEach((function(e){return _(e.id,!0)}))})),INKIVE.DesignFacade.on("delete",(function(e){var t=document.getElementById("video-preview-".concat(e));t&&t.remove()})),INKIVE.DesignFacade.on("cut",(function(e){e.forEach((function(e){var t=document.getElementById("video-preview-".concat(e.id));t&&t.remove()}))})),INKIVE.EditorFacade.on("page.move_to",(function(){document.querySelectorAll(".video-preview").forEach((function(e){return e.remove()}))})),INKIVE.DesignFacade.on("group.create",(function(e){var t=e.id;(0,o.default)(document.querySelectorAll("#".concat(t," > ").concat(p))).forEach((function(e){var n=e.id,r=document.getElementById("video-preview-".concat(n));r&&r.classList.add(".video-preview-".concat(t))}))})),INKIVE.DesignFacade.on("group.ungroup",(function(){document.querySelectorAll(".video-preview").forEach((function(e){e.className=(0,o.default)(e.classList).filter((function(e){var t=e.split("video-preview-")[1];return!t||document.getElementById(t)})).join(" ")}))}))}},{"../../../../src/components/sidebar-animation/animation-events":1078,"../../../../src/helpers":1098,"../utils/dimensions":613,"../utils/youtube":624,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.date.to-iso-string.js":880,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],626:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("../factory/images"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=INKIVE.Helpers.getCORSSecureUrl(e.selected_thumbnail||""),n=a(a({},e),{},{tab:i.default.getVersionUrl(t,"tab"),web:i.default.getVersionUrl(t,"web"),thumb:i.default.getVersionUrl(t,"thumb"),mobile:i.default.getVersionUrl(t,"mobile"),largeweb:i.default.getVersionUrl(t,"largeweb"),original:t});return i.default.setImagesData({version:n},"library",i.default.defaultAmazonDataNames),n};n.default=l},{"../factory/images":127,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],627:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/typeof")),s=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/web.timers.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.array.last-index-of.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.number.to-precision.js"),e("core-js/modules/esnext.string.replace-all.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.function.bind.js");var a=e("../helpers/convert-units-to-pixels"),l=r(e("../helpers/converter-current-page")),c=e("../helpers/dataUrl"),u=e("../helpers/is-element-in-canvas"),d=e("../helpers/fixPageSvg"),p=e("../helpers/get-inline-size"),h=e("../helpers/textCursorHelper");n.default=function(){var e;INKIVE.Helpers={},INKIVE.Helpers.isDataURL=c.isDataURL,INKIVE.Helpers.afterRendering=function(e){window.requestAnimFrame||(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}),window.requestAnimFrame((function(){window.requestAnimFrame(e)}))},INKIVE.Helpers.loadVisitorModal=function(e,t,n,r){$.ajax({type:"GET",url:INKIVE.C.BASE_URL+e,dataType:"html",data:t,async:!0,success:function(e){$(e).insertAfter($("#content")),r?$.getScript(CONFIG[r]).done(n):n()}})},INKIVE.Helpers.displaySubscriptionModal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pro",n=document.querySelector('[aurelia-app="payment/main"]');function r(){n=n||document.querySelector('[aurelia-app="payment/main"]'),INKIVE.Helpers.getAureliaLibraries($(n)).then((function(){n.dataset.plan="business"===t?"pro_team":t,n.dataset.flavour="content2"===t?"content":"plan",n.dataset.skipTrial="pro"===t,n.dataset.forceCC="pro"===t,_.delay((function(){n.dispatchEvent(new Event("payment.modal.toggle"))}),100),$('.ui-dropdown-content[data-id="versions"]').hide();var r=n.querySelector(".modal"),o=r&&r.querySelector(".upgrade-modal__description");r&&o&&(o.innerHTML=INKIVE.TranslateHelper.translate(e)),n&&n.addEventListener("payment.success",(function(){INKIVE.EditorFacade.handle("page","save").then((function(){n.remove(),INKIVE.Modal.togglePageLoader(!0),window.location.reload()}))})),INKIVE.Modal.togglePageLoader(!1)}))}INKIVE.Modal.togglePageLoader(!0),n?r():INKIVE.Helpers.loadVisitorModal("content/visitormodal",{url:"payment-modal"},r)},INKIVE.Helpers.displayAccessModal=function(){var e=document.querySelector('[aurelia-app="access/main"]');if(!e||!e.childElementCount)if(INKIVE.Modal.togglePageLoader(!0),e)Object.prototype.hasOwnProperty.call(e,"status")&&"loaded"===e.dataset.status&&r();else{var t=INKIVE.C.WHITE_LABEL_CONFIGURATION;INKIVE.Helpers.loadVisitorModal("login/popup",t&&{wl:t},(function(){return n.apply(this,arguments)}))}function n(){return(n=(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=e||document.querySelector('[aurelia-app="access/main"]'))||!e.childElementCount){t.next=4;break}return INKIVE.Modal.togglePageLoader(!1),t.abrupt("return");case 4:if(!e||Object.prototype.hasOwnProperty.call(e,"status")){t.next=12;break}return e.setAttribute("data-status","loading"),t.next=8,INKIVE.Helpers.getAureliaLibraries($(e));case 8:e.setAttribute("data-status","loaded"),document.addEventListener("access:modal.loaded",r(),{once:!0}),t.next=13;break;case 12:INKIVE.Modal.togglePageLoader(!1);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(){e.dispatchEvent(new CustomEvent("access:modal.open",{detail:{mode:"login",closeOnClick:!1,redirect:"reload",allowSignup:!1}})),INKIVE.Modal.togglePageLoader(!1)}},INKIVE.Helpers.getTimestamp=function(){var e=(new Date).getTime();return Math.floor(e/1e3)},INKIVE.Helpers.log=function(e,t,n){var r=new XMLHttpRequest;r.open("POST",INKIVE.C.WE_BRAND+"untidy-api/log/"+e),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({name:"Editor exception: "+t,data:"object"===(0,i.default)(n)?n:{}}))},INKIVE.Helpers.isInt=function(e){return!isNaN(e)&&(Number(e)===e&&e%1==0)},INKIVE.Helpers.isFloat=function(e){return!isNaN(e)&&(Number(e)===e&&e%1!=0)},INKIVE.Helpers.isShallowEqual=function(e,t){return Object.keys(t).every((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&e[n]===t[n]}))},INKIVE.Helpers.projectIsLinkedToRestrictions=function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE},INKIVE.Helpers.isDesygnerProject=function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESIGN||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN},INKIVE.Helpers.isWeBrandProject=function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.DESYGNER_DESIGN||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE},INKIVE.Helpers.isWeBrandTemplate=function(){return INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE},INKIVE.Helpers.getFragmentTarget=function(){return window.location.hash.split(":")[0]},INKIVE.Helpers.getCORSSecureUrl=function(e){var t=e;if(e&&"string"==typeof e&&!(0,c.isDataURL)(e)){var n,r=e.match(/^\/.*/);r&&(n=r[0]);var o=e.match(/.*\/([^/\s]+(inkive|desygner|webrand|photodexia)[^/\s]+\/)(.*)/);o&&(n=o[3]),n&&(t=INKIVE.C.IS_QA||INKIVE.C.IS_DEV?"https://static.qadesygner.xyz/".concat(n):"https://static.desygner.com/".concat(n))}return t!==e&&INKIVE.C.DEBUG&&console.log("[getCORSSecureUrl] modified url:\n".concat(e,"\n=> ").concat(t)),t},INKIVE.Helpers.getFragmentParam=function(e){var t=window.location.hash,n=null;return $.each(t.split(":"),(function(t,r){var o=r.split("=");if(o[0]===e)return n=o[1],!1})),n},INKIVE.Helpers.executeFunctionByName=function(e,t){if(!e)return null;for(var n=[].slice.call(arguments).splice(2),r=e.split("."),o=r.pop(),i=0;i<r.length;i++)t=t[r[i]];return t[o].apply(t,n?n.pop():null)},INKIVE.Helpers.dataURLToBlob=function(e){if(!(0,c.isDataURL)(e))return null;var t,n,r;if(-1===e.indexOf(";base64,"))return n=(t=e.split(","))[0].split(":")[1],r=decodeURIComponent(t[1]),new Blob([r],{type:n});n=(t=e.split(";base64,"))[0].split(":")[1];for(var o=(r=window.atob(t[1])).length,i=new Uint8Array(o),s=0;s<o;++s)i[s]=r.charCodeAt(s);return new Blob([i],{type:n})},INKIVE.Helpers.isEmail=function(e){if(!e||!e.length)return!1;return/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},INKIVE.Helpers.isUrlValid=function(e){return!!e.match(/^#\d+$/)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|\/|\?)*)?$/i.test(e)},INKIVE.Helpers.convertUnitsToPixels=a.convertUnitsToPixels,INKIVE.Helpers.convertPixelsToUnits=function(e,t,n,r){var o;e=parseFloat(e);switch(r=r||INKIVE.C.DPI,t){case"cm":o=e/r*2.54;break;case"mm":o=INKIVE.Helpers.convertPixelsToUnits(10*e,"cm",n,r);break;case"in":o=INKIVE.Helpers.convertPixelsToUnits(e/2.54,"cm",n,r);break;default:o=n?e:Math.round(e)}return o},INKIVE.Helpers.getSelectedCoordinates=function(e){var t=svgedit.select.getSelectorManager().requestSelector(e);if(t){var n=INKIVE.Tool.getInstance().editor.canvas,r=t.transformBox.abbox,o=n.getRotationAngle(e),i=INKIVE.Helpers.getTransformPoints(r,0,o,0,0);return{sx:0,sy:0,x1:i.tl.x,y1:i.tl.y,x2:i.tr.x,y2:i.tr.y,x3:i.bl.x,y3:i.bl.y,x4:i.br.x,y4:i.br.y,x5:i.m.x,y5:i.m.y}}},INKIVE.Helpers.getHoveredCoordinates=function(e){var t=svgedit.select.getSelectorManager().requestSelector(e);if(t){var n=INKIVE.Tool.getInstance().editor.canvas,r=t.transformBox.abbox,o=n.getRotationAngle(e),i=INKIVE.Helpers.getTransformPoints(r,0,o,0,0);return svgedit.select.getSelectorManager().releaseSelector(e),{sx:0,sy:0,x1:i.tl.x,y1:i.tl.y,x2:i.tr.x,y2:i.tr.y,x3:i.bl.x,y3:i.bl.y,x4:i.br.x,y4:i.br.y,x5:i.m.x,y5:i.m.y}}},INKIVE.Helpers.getTransformCoordinates=function(e,t,n,r,o){var i=INKIVE.Helpers.getTransformPoints(e,t,n,r,o),s=$("#svgroot").get(0).getBoundingClientRect(),a=$("#canvasBackground").get(0).getBoundingClientRect(),l=a.left-s.left,c=a.top-s.top;return{sx:0,sy:0,x1:l+i.tl.x,y1:c+i.tl.y,x2:l+i.tr.x,y2:c+i.tr.y,x3:l+i.bl.x,y3:c+i.bl.y,x4:l+i.br.x,y4:c+i.br.y,x5:l+i.m.x,y5:c+i.m.y}},INKIVE.Helpers.getObjectCoordinatesByDirection=function(e,t,n,r){var o=INKIVE.Helpers.getObjectCoordinates(e,t);return n?(delete o.x1,delete o.y1,delete o.x3,delete o.y3):(delete o.x2,delete o.y2,delete o.x4,delete o.y4),r?(delete o.x1,delete o.y1,delete o.x2,delete o.y2):(delete o.x3,delete o.y3,delete o.x4,delete o.y4),o},INKIVE.Helpers.getObjectCoordinates=function(e,t){var n=$("#"+t.id).get(0);if(n){var r=n.getAttribute("stroke-width"),o=e.getZoom(),i=1/o;i-=.5,"none"===n.getAttribute("stroke")||isNaN(r)||(i+=r/2),i*=o;var s={x:t.x*o,y:t.y*o,width:t.width*o,height:t.height*o,rotate:t.rotate};return INKIVE.Helpers.getTransformCoordinates(s,i,s.rotate)}},INKIVE.Helpers.getTransformPoints=function(e,t,n,r,o){t=t||0,n=n||0;var i={tl:{x:e.x-t,y:e.y-t},tr:{x:e.x+e.width+t,y:e.y-t},bl:{x:e.x-t,y:e.y+e.height+t},br:{x:e.x+e.width+t,y:e.y+e.height+t},m:{x:e.x+e.width/2+t,y:e.y+e.height/2+t}};if(n){r=r||i.m.x,o=o||i.m.y;var s=document.querySelector("#svgroot").createSVGTransform();for(var a in s.setRotate(n,r,o),i)i[a]=svgedit.math.transformPoint(i[a].x,i[a].y,s.matrix)}return i},INKIVE.Helpers.TransformPointBox=function(e,t){t=t||1;var n,r="M"+e.tl.x+","+e.tl.y+" L"+e.tr.x+","+e.tr.y+" "+e.br.x+","+e.br.y+" "+e.bl.x+","+e.bl.y+"z";$("#svgcontent .tpBox_"+t).length?n=$("#svgcontent .tpBox_"+t).get(0):(n=document.createElementNS(svgedit.NS.SVG,"path"),svgedit.utilities.assignAttributes(n,{fill:"#"+Math.floor(16777215*Math.random()).toString(16),opacity:.5,style:"pointer-events:none",class:"tpBox_"+t}),$("#svgcontent").get(0).appendChild(n)),svgedit.utilities.assignAttributes(n,{d:r,display:"inline"})},INKIVE.Helpers.getFileNameFromUrl=function(e){return e.split("/").pop()},INKIVE.Helpers.getFileExt=function(e){return e.substr(e.lastIndexOf(".")+1).toLowerCase()},INKIVE.Helpers.getShareUrl=function(){if(INKIVE.Helpers.isWeBrandProject())return INKIVE.C.VIEWER+(INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE?"template/":"")+INKIVE.C.BOOK.encodedId+"?t="+_.now();var e="view-"+INKIVE.C.USER.id,t=Base64.decode(INKIVE.C.BOOK.name).toLowerCase().replace(/ /g,"_").replace("/[^a-z0-9]+/","_");return"%s/%s/%s/%s_%s.html".sprintf(INKIVE.C.BASE_URL+"design/preview",INKIVE.C.BOOK.encodedId,e,t,INKIVE.Helpers.getTimestamp())},INKIVE.Helpers.fillFacebookOGTags=function(e){var t=INKIVE.C.WHITE_LABEL_CONFIGURATION,n={title:"",description:""};return void 0===t.domain&&(n.title="Made with <3 on Desygner.com",n.description="https://www.desygner.com/"),"redfin"===t.domain&&(n.title="Redfin",n.description="https://www.redfin.com/"),e+"&isFacebook="+btoa(JSON.stringify(n))},INKIVE.Helpers.getShareNetworkUrl=function(e,t){switch(e){case"facebook":return INKIVE.Helpers.getFBUrl(t);case"twitter":return INKIVE.Helpers.getTwitterUrl(t);case"linkedin":return INKIVE.Helpers.getLinkedinUrl(t);case"google":return INKIVE.Helpers.getGoogleplusUrl(t)}},INKIVE.Helpers.fillFacebookOGTags=function(e){var t=INKIVE.C.WHITE_LABEL_CONFIGURATION,n={title:"",description:""};return void 0===t.domain&&(n.title="Made with <3 on Desygner.com",n.description="https://www.desygner.com/"),"redfin"===t.domain&&(n.title="Redfin",n.description="https://www.redfin.com/"),e+"&isFacebook="+btoa(JSON.stringify(n))},INKIVE.Helpers.getFBUrl=function(e){return e=e||INKIVE.Helpers.getShareUrl(),"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)},INKIVE.Helpers.getTwitterUrl=function(e){return e=e||INKIVE.Helpers.getShareUrl(),"https://twitter.com/intent/tweet?url="+encodeURIComponent(e)},INKIVE.Helpers.getLinkedinUrl=function(e){return e=e||INKIVE.Helpers.getShareUrl(),"https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(e)},INKIVE.Helpers.getGoogleplusUrl=function(e){return e=e||INKIVE.Helpers.getShareUrl(),"https://plus.google.com/share?url="+encodeURIComponent(e)},INKIVE.Helpers.sendCmd=function(e,t,n,r,o){r=r||this.c,o=o||"POST",$.ajax({type:o,url:e,timeout:r,dataType:"json",data:t,complete:function(e){(200===e.status||(INKIVE.Modal.alertMessage("<b>Error - </b><i>Network</i><b><br>Please check network</b>"),0))&&$.when(n(e.responseText)).done((function(e){}))}})},INKIVE.Helpers.api=function(e,t,n,r){var o=INKIVE.C.BASE_URL+"api/"+e;$.api(o,t,n,(function(e,t,n,o,i){var s="function"==typeof r;s&&r(e,t,n,o,i),s||alert(i)}))},INKIVE.Helpers.apiMultipart=function(e,t,n){var r=INKIVE.C.BASE_URL+"api/"+e,o=new FormData;_.each(t,(function(e,t){o.append(t,e)})),$.apiMultipart(r,o,(function(e,t,r,o,i){var s="function"==typeof n;s&&n(e,t,r,o,i),s||alert(i)}))},INKIVE.Helpers.isResponseExists=function(e){return!(!e||0===e.length)},INKIVE.Helpers.isElementInCanvas=u.isElementInCanvas,INKIVE.Helpers.isElementPartiallyInCanvas=u.isElementPartiallyInCanvas,INKIVE.Helpers.imageLoader=function(e,t,n){n=n||INKIVE.C.Timeout.imageCheck;var r=!1,o=new Image;o.onerror=o.onabort=function(){r||(clearTimeout(i),t(INKIVE.C.Status.error,o))},o.onload=function(){r||(clearTimeout(i),t(INKIVE.C.Status.success,o))},o.src=e;var i=setTimeout((function(){r=!0,t(INKIVE.C.Status.timeout,o)}),n)},INKIVE.Helpers.initTooltips=function(e,t){e=e||$("body"),INKIVE.C.IS_MOBILE||e.find('[data-popover="tooltip"]').each((function(){$(this).tooltip($.extend({placement:$(this).data("placement")||"auto",html:!0},t))}))},INKIVE.Helpers.initPopover=function(e,t){e=e||$("body"),INKIVE.C.IS_MOBILE||(e.find('[data-popover="popover"]').popover($.extend({trigger:"hover",html:!0},t)),e.find('[data-popover="popover"]').on("shown.bs.popover",(function(e){$(".popover").css("left",$("#tool-panel").width())})))},INKIVE.Helpers.loadingElement=function(e,t){if(e&&e.getAttribute("id"))if(t){var n=document.createElementNS(svgedit.NS.SVG,"svg"),r=$("#svgroot").get(0).getBoundingClientRect(),o=$("#canvasBackground").get(0).getBoundingClientRect(),i=o.left-r.left,s=o.top-r.top,a=e.getBBox(),l=50;a.width<l&&(l=a.width),a.height<l&&(l=a.height),n.setAttribute("class","svgLoader"),n.setAttribute("x",a.x+i),n.setAttribute("y",a.y+s),n.setAttribute("width",l),n.setAttribute("height",l),n.setAttribute("viewBox","0 0 50 50"),n.setAttribute("style","pointer-events: none;");var c=document.createElementNS(svgedit.NS.SVG,"path");c.setAttribute("fill",INKIVE.C.WHITE_LABEL_CONFIGURATION.colors.highlight),c.setAttribute("d","M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z");var u=document.createElementNS(svgedit.NS.SVG,"animateTransform");u.setAttribute("attributeType","xml"),u.setAttribute("attributeName","transform"),u.setAttribute("type","rotate"),u.setAttribute("from","0 25 25"),u.setAttribute("to","360 25 25"),u.setAttribute("dur","0.6s"),u.setAttribute("repeatCount","indefinite"),c.appendChild(u),n.appendChild(c),$("#svgroot").get(0).appendChild(n)}else t||$(".svgLoader").remove()},INKIVE.Helpers.saveToDisk=function(e,t){var n=INKIVE.C.BASE_URL+"editor/file?url="+encodeURIComponent(e),r=INKIVE.TranslateHelper.translate("general.starting_download"),i=_.throttle((function(){INKIVE.EditorFacade.trigger("status.update",{msg:r,force:!0})}),100),a=$('[data-action="download-action"]');function l(e){return c.apply(this,arguments)}function c(){return(c=(0,s.default)(o.default.mark((function n(l){var c,d,p,h,m,f,g,b;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(),n.next=3,fetch(l);case 3:if(!((c=n.sent).status>=300||c.status<200)){n.next=8;break}u(),n.next=27;break;case 8:return a.addClass("disabled"),d=c.headers.get("content-length"),p=parseInt(d,10),h=0,m=new Response(new ReadableStream({start:function(e){return(0,s.default)(o.default.mark((function t(){var n,s,a,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c.body.getReader();case 1:return t.next=4,n.read();case 4:if(s=t.sent,a=s.done,l=s.value,!a){t.next=9;break}return t.abrupt("break",15);case 9:h+=l.byteLength,r=INKIVE.TranslateHelper.translate("general.downloading",{percentage:Math.round(h/p*100)}),i(),e.enqueue(l),t.next=1;break;case 15:e.close();case 16:case"end":return t.stop()}}),t)})))()}})),n.next=15,m.blob();case 15:f=n.sent,g=URL.createObjectURL(f),(b=document.createElement("a")).style.display="none",b.href=g,b.download=t||e.match(/[^/]+$/)[0],document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(g),a.removeClass("disabled"),r=INKIVE.TranslateHelper.translate("general.download_complete"),i();case 27:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function u(){n!==e&&l(n=e)}l(n)},INKIVE.Helpers.toolAttr={},INKIVE.Helpers.setToolAttr=function(e,t){var n,r=INKIVE.Tool.getInstance().editor.canvas,o=$.extend({},r.getCurStyle());switch($.extend(o,t),e){case"object":case"rect":case"ellipse":n=INKIVE.Helpers.toolAttr.object=o;break;case"line":case"path":n=INKIVE.Helpers.toolAttr.path=o;break;case"text":n=INKIVE.Helpers.toolAttr.text=o}r.setCurStyle(n)},INKIVE.Helpers.getColor=function(e,t){function n(e,t){var r;if("background"===(t=t||"fill")){var o=$(e).parent().find("rect");return(r=o.attr("fill"))||"none"}return(r=$(e).attr(t))&&"null"!==r&&"none"!==r||$(e).children().each((function(e,o){if(r=n(o,t))return!1})),r&&"null"!==r&&"none"!==r?r:null}return _.isArray(e)&&(e=e[0]),"set"===t.split("_")[0]?n(INKIVE.DesignFacade.getters.sticker.getElementsWithColor(e)[parseInt(t.split("_")[1])])||r():$(e).hasClass("textarea")?(new INKIVE.Text.Textarea).setDOM(e).text[t]:n(e,t)||r();function r(){return"stroke"===t?null:"#000000"}},INKIVE.Helpers.resize=function(e,t,n,r,o){var i=$("#svgroot").get(0),s=e.getBBox();t=t||s.width,n=n||s.height,r=r||0,o=o||0;var a=i.createSVGTransform(),l=i.createSVGTransform(),c=i.createSVGTransform(),u=svgedit.transformlist.getTransformList(e);a.setTranslate(0,0);var d=(t-r)/s.width,p=(n-o)/s.height,h=d>=p?p:d;l.setScale(h,h),c.setTranslate(0,0),u.appendItem(a),u.appendItem(l),u.appendItem(c),svgedit.recalculate.recalculateDimensions(e,s),a=i.createSVGTransform();var m=-(s=e.getBBox()).x+(t/2-s.width/2),f=-s.y+(n/2-s.height/2);a.setTranslate(m,f),u.appendItem(a),svgedit.recalculate.recalculateDimensions(e)},INKIVE.Helpers.getUnusedId=function(e){var t,n=INKIVE.Tool.getInstance().editor;do{t=n.getNextId()}while($(e).find("#"+t).length);return t},INKIVE.Helpers.getStickerFromSvg=function(){var e=$("#svgroot").get(0),t=$("#svgcontent .main").get(0).getBBox(),n=t.width,r=t.height;if(r&&r){var o=document.createElementNS(svgedit.NS.SVG,"svg");o.setAttribute("width",n),o.setAttribute("height",r),o.setAttribute("xml:space","preserve"),o.setAttribute("enable-background","new 0 0 %s %s".sprintf(n,r)),o.setAttribute("viewBox","0 0 %s %s".sprintf(n,r));var i=document.createElementNS(svgedit.NS.SVG,"g");return svgedit.utilities.assignAttributes(i,{style:"pointer-events:none",class:"stickerSaveData"}),$(i).insertBefore($("#svgcontent .main")),$("#svgcontent .main").find(">.element").each((function(e,t){s(t)})),$(i).remove(),INKIVE.Helpers.serializeToString(o)}function s(n){if(n){if(!$(n).hasClass("sticker")){if($(n).is("rect.background"))return;var r,a=$(n).clone(),l=a.get(0);if(l.removeAttribute("class"),$(n).hasClass("layoutBox")){var c=s(svgedit.utilities.getClipPath(n));l.setAttribute("class","layoutBox element"),a.attr("clip-path","url(#"+c.childNodes[0].getAttribute("id")+")")}$(n).is("clippath")?(a.attr("id",INKIVE.Math.generateUUID()),r=svgedit.transformlist.getTransformList(l.childNodes[0])):$(n).hasClass("textarea")?(l.setAttribute("class","textarea element"),r=svgedit.transformlist.getTransformList(l)):(a.removeAttr("id"),r=svgedit.transformlist.getTransformList(l)),i.appendChild(l);var u=e.createSVGTransform(),d=-t.x,p=-t.y;u.setTranslate(d,p),r.appendItem(u),$(n).is("clippath")?svgedit.recalculate.recalculateDimensions(l.childNodes[0]):svgedit.recalculate.recalculateDimensions(l);var h=$(l).clone().get(0);if($(n).is("clippath")){var m=$(o).find("defs").get(0);m||(m=window.document.createElementNS(svgedit.NS.SVG,"defs")).setAttribute("id","placeholder_defs"),m.appendChild(h),h=m}return o.appendChild(h),h}var f=_.without(INKIVE.DesignFacade.getters.sticker.getElements(n),n);_.each(f,s)}}},INKIVE.Helpers.converterLayoutSizeChange=function(e,t,n,r){var o=INKIVE.Tool.getInstance().editor.canvas,i=$("#svgroot").get(0);if(e!==n||t!==r){e===o.contentW&&t===o.contentH||console.warn("Layout dimensions is not canvas dimensions");var s=$("#svgcontent g.background image");if(s.length){var a=s[0],l=a.getBBox();l.width||(l.width=e),l.height||(l.height=t);var c=e/l.width,u=t/l.height,d=Math.max(c,u);svgedit.transformlist.removeElementFromListMap(a);var p=svgedit.transformlist.getTransformList(a),h=i.createSVGTransform(),m=i.createSVGTransform(),f=i.createSVGTransform();h.setTranslate(0,0),m.setScale(d,d),f.setTranslate(0,0),p.appendItem(h),p.appendItem(m),p.appendItem(f),svgedit.recalculate.recalculateDimensions(a),a.setAttribute("x",-(l.width*d-e)/2),a.setAttribute("y",-(l.height*d-t)/2)}$("#svgcontent .element:not(.subelement)").each((function(s,a){if($(a).is("#svgcontent g.background rect"))return!0;var l=e/n,c=t/r;svgedit.transformlist.removeElementFromListMap(a);var u=svgedit.transformlist.getTransformList(a),d=svgedit.utilities.getBBox(a),p=parseInt(l*n)<=e&&parseInt(l*r)<=t?l:c;d.x<=0&&d.y<=0&&d.width>=n&&d.height>=r&&(p=p===l?c:l);var h=i.createSVGTransform(),m=i.createSVGTransform(),f=i.createSVGTransform();h.setTranslate(0,0),m.setScale(p,p),f.setTranslate(0,0),u.appendItem(h),u.appendItem(m),u.appendItem(f),svgedit.recalculate.recalculateDimensions(a);var g=svgedit.utilities.getBBox(a),b=i.createSVGTransform(),v=svgedit.transformlist.getTransformList(a);b.setTranslate(e/2-(n/2-d.x)*p-g.x,t/2-(r/2-d.y)*p-g.y),v.appendItem(b),svgedit.recalculate.recalculateDimensions(a),o.removeFromSelection([a])}))}},INKIVE.Helpers.areEqual=function(e,t){var n=s(e),r=s(t);"svg"===n.nodeName&&n.removeAttribute("xmlns:xlink"),"svg"===r.nodeName&&r.removeAttribute("xmlns:xlink"),n.getAttribute("id")&&r.getAttribute("id")||(n.removeAttribute("id"),r.removeAttribute("id"));var o=a(n),i=a(r);return o.join(",")===i.join(",")&&_.all(o,(function(e){var t=n.getAttribute(e),o=r.getAttribute(e);return"xlink:href"===e&&(t=INKIVE.ImagesFactory.getVersionUrl(t,"original"),o=INKIVE.ImagesFactory.getVersionUrl(o,"original")),t===o}))&&function(){var e=n.firstChild,t=r.firstChild;for(;e&&t;)if(o(),e&&t){if(e.nodeType!==t.nodeType||!function(){if(1===e.nodeType&&e.nodeValue!==t.nodeValue)return!1;if(3===e.nodeType&&e.nodeValue.trim()!==t.nodeValue.trim())return!1;if(1===e.nodeType)return INKIVE.Helpers.areEqual(e,t);return!0}())return!1;e=e.nextSibling,t=t.nextSibling}return o(),e===t;function o(){for(;i(e);)e=e.nextSibling;for(;i(t);)t=t.nextSibling}function i(e){return e&&3===e.nodeType&&""===e.nodeValue.replace("&nbsp;","").trim()}}();function s(e){if(e instanceof Node)return e;var t=document.createElement("div");return t.innerHTML=e,t}function a(e){return _.map(e.attributes,(function(e){return e.nodeName})).sort()}},INKIVE.Helpers.converterCurrentPage=l.default,INKIVE.Helpers.displayImagesLoadingAnimation=function(){var e=INKIVE.Tool.getInstance().editor;e.canvas.call("loading.hide_all"),$("#svgcontent").find("image").each((function(){var t=this,n=_.once((function(){e.canvas.call("loading.hide",t)})),r=t.getAttribute("xlink:href");if(r&&"0"!==t.getAttribute("opacity")&&!t.complete){var o=new Image;o.onload=n,o.src=r,e.canvas.call("loading.show",t),_.delay(n,3e4)}}))},INKIVE.Helpers.calculatePngSize=function(e,t){return INKIVE.Helpers.formatBytes(e*t*24/8)},INKIVE.Helpers.calculateJpegSize=function(e,t,n){return INKIVE.Helpers.formatBytes(e*t*3/8*n/100)},INKIVE.Helpers.formatBytes=function(e,t){if(0===e)return"0 Byte";var n=t+1||3,r=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,r)).toPrecision(n)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},INKIVE.Helpers.fillArray=function(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n},INKIVE.Helpers.getBucketUrl=function(e){if(e=e.match(/([^.]*)\.(inkive|webrand|desygner)\.com/)){var t=e[1],n=e[2];switch(t){case"assets":return"https://s3.amazonaws.com/assets."+n+".com/assets";case"sydney":return"https://s3-ap-southeast-2.amazonaws.com/sydney."+n+".com/sydney";case"singapore":return"https://s3-ap-southeast-1.amazonaws.com/singapore."+n+".com/singapore";case"tokyo":return"https://s3-ap-northeast-1.amazonaws.com/tokyo."+n+".com/tokyo";case"california":return"https://s3-us-west-1.amazonaws.com/california."+n+".com/california";case"ireland":return"https://s3-eu-west-1.amazonaws.com/ireland."+n+".com/ireland";case"oregon":return"https://s3-us-west-2.amazonaws.com/oregon."+n+".com/oregon";case"sao-paulo":return"https://s3-sa-east-1.amazonaws.com/sao-paulo."+n+".com/sao-paulo";case"virginia-testing":return"https://s3.amazonaws.com/virginia-testing."+n+".com/virginia-testing";case"virginia":default:return"https://s3.amazonaws.com/virginia."+n+".com/virginia"}}},INKIVE.Helpers.getImageUrl=function(e,t){return INKIVE.Helpers.getBucketUrl(INKIVE.C.BUCKET)+"/"+t+"/"+INKIVE.C.BOOK.id+"/"+e+".jpg"},INKIVE.Helpers.getFormValue=function(e,t){var n={};$.each($(e).serializeArray(),(function(e,t){n[t.name]=t.value}));return n[t]},INKIVE.Helpers.serializeToString=function(e){return(new XMLSerializer).serializeToString(e).replace("<svg:svg","<svg").replace("</svg:svg>","</svg>")},INKIVE.Helpers.getActiveTab=function(){var e;return _.each(INKIVE.Tabs,(function(t,n){t.$el.is(".active")&&(e=n)})),e},INKIVE.Helpers.getSystemJsUrl=function(e){if(e=e.replace(/^\/+/,""),INKIVE.C.IS_DEV)return(INKIVE.C.IS_WEBRAND?INKIVE.C.WE_BRAND:INKIVE.C.BASE_URL)+e+"?t="+_.now();var t=/^v\d+\.\d+\.\d+$/.test(INKIVE.C.WB_VERSION),n=e.match(/^(.+)config\.js$/);if(n){var r=INKIVE.C.WB_VERSION.replaceAll("/","-").replaceAll(".","_");e="".concat(n[1],"config--").concat(r,".js")}return t?"https://static.desygner.com/assets/build/".concat(e):"https://s3.amazonaws.com/assets.desygner.com/assets/build/".concat(e)},INKIVE.Helpers.getScript=function(e,t){return $.ajax({url:e,type:"get",dataType:"script",success:t,cache:!0})},INKIVE.Helpers.getAureliaLibraries=function(t){var n,r,o=$.Deferred();return e?e.then((function(e){var n=t[0],r=n.getAttribute("aurelia-app");System.import(r).then((function(i){e((function(e){e.host=n,e.configModuleId=r||null,i.configure(e),t.one("DOMSubtreeModified",o.resolve)}))}))})):(e=$.Deferred(),n=INKIVE.Helpers.getSystemJsUrl,r=INKIVE.C.IS_WEBRAND?INKIVE.C.WE_BRAND:INKIVE.C.BASE_URL,INKIVE.Helpers.getScript(n("/vendor/system.js")).then((function(){System.config({baseURL:r}),INKIVE.Helpers.getScript(n("/bundles/desygnerbrand/config.js")).then((function(){System.registerDynamic("jquery",[],!1,(function(e,t,n){n.exports=window.jQuery})),System.import("aurelia-bootstrapper").then((function(n){t.one("DOMSubtreeModified",(function(){e.resolve(n.bootstrap),o.resolve()}))}))}))}))),o},INKIVE.Helpers.getSecureUrl=function(e){return INKIVE.C.IS_DEV?(INKIVE.C.IS_WEBRAND?INKIVE.C.WE_BRAND:INKIVE.C.BASE_URL)+e+"?t="+_.now():/^v\d+\.\d+\.\d+$/.test(INKIVE.C.WB_VERSION)?"https://static.webrand.com/build/"+INKIVE.C.WB_VERSION+e+"?"+INKIVE.C.WB_VERSION:"https://s3.amazonaws.com/assets.webrand.com/build/"+INKIVE.C.WB_VERSION+e+"?"+INKIVE.C.WB_VERSION},INKIVE.Helpers.getStripeScript=function(){window.Stripe||INKIVE.Helpers.getScript("https://js.stripe.com/v3")},INKIVE.Helpers.getPriceString=function(e,t){switch(t.toLowerCase()){case"ndz":return"NZ $"+e;case"usd":return"US $"+e;case"cad":return"CA $"+e;case"eur":return"€ "+e;case"aed":return"AED "+e;case"afn":return"Af "+e;case"all":return"ALL "+e;case"amd":return"AMD "+e;case"ars":return e+" AR$";case"aud":return"AU $"+e;case"azn":return"man. "+e;case"bam":return"KM "+e;case"bdt":return"Tk "+e;case"bgn":return"BGN "+e;case"bhd":return"BD "+e;case"bif":return"FBu "+e;case"bnd":return"BN $"+e;case"bob":return"Bs "+e;case"brl":return"R $"+e;case"bwp":return"BWP "+e;case"byr":return"BYR "+e;case"bzd":return"BZ $"+e;case"cdf":return"CDF "+e;case"chf":return"CHF "+e;case"clp":return e+" CL$";case"cny":return"CN¥ "+e;case"cop":return e+" CO$";case"crc":return"₡ "+e;case"cve":return"CV $"+e;case"czk":return"Kč "+e;case"djf":return"Fdj "+e;case"dkk":return"Dkr "+e;case"dop":return e+" RD$";case"dzd":return"DA "+e;case"eek":return"Ekr "+e;case"egp":return"EGP "+e;case"ern":return"Nfk "+e;case"etb":return"Br "+e;case"gbp":return"£ "+e;case"gel":return"GEL "+e;case"ghs":return"GH₵ "+e;case"gnf":return"FG "+e;case"gtq":return"GTQ "+e;case"hkd":return"HK $"+e;case"hnl":return"HNL "+e;case"hrk":return"kn "+e;case"huf":return"Ft "+e;case"idr":return"Rp "+e;case"ils":return"₪ "+e;case"inr":return"Rs "+e;case"iqd":return"IQD "+e;case"irr":return"IRR "+e;case"isk":return"Ikr "+e;case"jmd":return"J $"+e;case"jod":return"JD "+e;case"jpy":return"¥ "+e;case"kes":return"Ksh "+e;case"khr":return"KHR "+e;case"kmf":return"CF "+e;case"krw":return"₩ "+e;case"kwd":return"KD "+e;case"kzt":return"KZT "+e;case"lbp":return"LB£ "+e;case"lkr":return"SLRs "+e;case"ltl":return"Lt "+e;case"lvl":return"Ls "+e;case"lyd":return"LD "+e;case"mad":return"MAD "+e;case"mdl":return"MDL "+e;case"mga":return"MGA "+e;case"mkd":return"MKD "+e;case"mmk":return"MMK "+e;case"mop":return"MOP $"+e;case"mur":return"MURs "+e;case"mxn":return e+" MX$";case"myr":return"RM "+e;case"mzn":return"MTn "+e;case"nad":return"N $"+e;case"ngn":return"₦ "+e;case"nio":return"C $"+e;case"nok":return"Nkr "+e;case"npr":return"NPRs "+e;case"nzd":return"NZ $"+e;case"omr":return"OMR "+e;case"pab":return"B/. "+e;case"pen":return"S/. "+e;case"php":return"₱ "+e;case"pkr":return"PKRs "+e;case"pln":return"zł "+e;case"pyg":return"₲ "+e;case"qar":return"QR "+e;case"ron":return"RON "+e;case"rsd":return"din. "+e;case"rub":return"RUB "+e;case"rwf":return"RWF "+e;case"sar":return"SR "+e;case"sdg":return"SDG "+e;case"sek":return"Skr "+e;case"sgd":return"S $"+e;case"sos":return"Ssh "+e;case"syp":return"SY£ "+e;case"thb":return"฿ "+e;case"tnd":return"DT "+e;case"top":return"T $"+e;case"try":return"TL "+e;case"ttd":return"TT $"+e;case"twd":return"NT $"+e;case"tzs":return"TSh "+e;case"uah":return"₴ "+e;case"ugx":return"USh "+e;case"uyu":return e+"$U";case"uzs":return"UZS "+e;case"vef":return"Bs.F. "+e;case"vnd":return"₫ "+e;case"xaf":return"FCFA "+e;case"xof":return"CFA "+e;case"yer":return"YR "+e;case"zar":return"R "+e;case"zmk":return"ZK "+e}return e},INKIVE.Helpers.projectCreatedInLastMinutes=function(e){var t=new Date(1e3*parseInt(INKIVE.C.BOOK.create_date));return e=e||2,_.now()-t<60*e*1e3},INKIVE.Helpers.getHeader=function(e,t){var n={};return _.each(_.map(e.trim().split(/[\r\n]+/),(function(e){return e.split(/: /)})),(function(e){n[e[0].trim()]=e[1].trim()})),n[t]},INKIVE.Helpers.mapUrlToCloudFront=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(e=e.replace(/\/largeweb\/|\/web\/|\/tab\/|\/mobile\/|\/thumb\//g,"/original/"));var n=e.match(/\w+(\/.*)/);if(2===n.length){if(e.includes("/repository/p/"))return"http://giles.photodexia.com"+n[1];if(e.includes("static.inkive.me/virginia/company"))return"https://s3.amazonaws.com/virginia-testing.webrand.com".concat(n[1]);if(e.includes("static.inkive.me/virginia-testing/"))return"https://virginia-testing.webrand.com".concat(n[1]);if(e.includes("/company/")||e.includes("virginia.webrand.com"))return"https://s3.amazonaws.com/virginia.webrand.com".concat(n[1]);if(e.includes("/virginia/"))return"https://s3.amazonaws.com/virginia.inkive.com".concat(n[1])}return e},INKIVE.Helpers.delay=function(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),e)}))},INKIVE.Helpers.changePageAwait=function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,INKIVE.EditorFacade.handle("page","move_to",{page_number:t+1,quiet:!0,save:!0});case 2:return e.next=4,INKIVE.Helpers.delay(4e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),INKIVE.Helpers.currPage=function(){return INKIVE.Tool._current_page_number-1},INKIVE.Helpers.getSvgUrl=function(e){return URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}))},INKIVE.Helpers.getInlineSize=p.getInlineSize,INKIVE.Helpers.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-.]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},INKIVE.Helpers.generateRandomString=function(e){var t,n=[];for(e=e||15;e-- >0;)t=Math.floor(Math.random()*n.length),n.push("qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890-_"[t]);return n},INKIVE.Helpers.sanitizeIgnoredTagsSvg=d.sanitizeIgnoredTagsSvg,INKIVE.Helpers.getLineArray=h.getLineArray,INKIVE.Helpers.getCursorLineIndex=h.getCursorLineIndex,INKIVE.Helpers.getStylingPart=h.getStylingPart}},{"../helpers/convert-units-to-pixels":630,"../helpers/converter-current-page":631,"../helpers/dataUrl":632,"../helpers/fixPageSvg":636,"../helpers/get-inline-size":637,"../helpers/is-element-in-canvas":640,"../helpers/textCursorHelper":644,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.last-index-of.js":869,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.to-precision.js":891,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958,"core-js/modules/esnext.string.replace-all.js":963,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],628:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){(0,o.default)(),(0,i.default)()};var o=r(e("./helpers")),i=r(e("./tool"))},{"./helpers":627,"./tool":629,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],629:[function(e,t,n){"use strict";e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.date.now.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.string.search.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.map.js");var s=r(e("../../../src/config/constants")),a=e("../helpers/dataUrl"),l=e("../helpers/fixPageSvg");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.default=function(){INKIVE.Tool=function(t,n,r){this.col=2,this.$elem=t?$(t):$("#tool-panel"),this.editor=n,this.tabButtonTraker=null,this.timeout={image:5e3},this.token={facebook:null,instagram:null};var o=this;this.inkiveLoader(!0,(function(){var t=_.once((function(){r&&r(),setTimeout(i,0)}));function i(){o.initMainHandlers(),INKIVE.Helpers.initTooltips(),INKIVE.Helpers.initPopover(),o.initAccordion(),o.initDropdownButton(),o.initExpandContent(),o.initSidebarResizeButton(),o.initTabEvent(),INKIVE.C.IS_MOBILE&&o.updateCurrentPageInfo(),e("../editor/facade/project/project").on("design.removed",(function(e){INKIVE.EditorFacade.handle("cache","remove",e),o.updateCurrentPageInfo()})),INKIVE.C.IS_MOBILE&&$(".tool-menu .menu .ui-dropdown").popupmenudropdown(),localStorage.getItem("colors")||_.each(INKIVE.C.DefaultColors,n.setFavColor)}$("#ik-editor").css("opacity",0),"undefined"==typeof fontSpy||fontSpy("Lato",{success:t}),_.delay(t,3e3)}))},INKIVE.Tool._current_page_number=null,INKIVE.Tool._cache={},INKIVE.Tool._autoSaveTimeout=null,INKIVE.Tool._intervalThumb={},INKIVE.Tool.preloadFavFonts=function(e){e=e||$.noop,INKIVE.Tool._cache.favFonts?e(!0):INKIVE.Helpers.api("favourites/font","GET",{id:INKIVE.C.BOOK.id},(function(t){INKIVE.Tool._cache.favFonts=t.data?t.data:[],e("success"===t.status)}))},INKIVE.Tool.preloadLayoutFormat=function(e){e=e||$.noop,INKIVE.Tool._cache.layoutFormat?e(!0):INKIVE.Helpers.api("management/layoutformat","GET",{},(function(t){"success"===t.status&&(INKIVE.Tool._cache.layoutFormat=t.data),e("success"===t.status)}))},INKIVE.Tool.preloadStickerCategories=function(e){e=e||$.noop,INKIVE.Tool._cache.stickerCategories?e(!0):INKIVE.Helpers.api("search/category","GET",{type:"sticker"},(function(t){INKIVE.Tool._cache.stickerCategories=t,e(!0)}))},INKIVE.Tool.preloadBackgroundCategories=function(e){e=e||$.noop,INKIVE.Tool._cache.backgroundCategories?e(!0):INKIVE.Helpers.api("search/category","GET",{type:"background"},(function(t){INKIVE.Tool._cache.backgroundCategories=t,e(!0)}))},INKIVE.Tool.getInstance=function(e,t,n){return!INKIVE.Tool.INSTANCE&&t&&(INKIVE.Tool.INSTANCE=new INKIVE.Tool(e,t,n)),INKIVE.Tool.INSTANCE},INKIVE.Tool.autoSave=function(){INKIVE.Tool._autoSaveTimeout&&clearTimeout(INKIVE.Tool._autoSaveTimeout),INKIVE.Tool._autoSaveTimeout=null,"clipperImage"===INKIVE.Tool.getInstance().editor.canvas.getCurrentDrawing().getCurrentLayer().getAttribute("class")||$("#svgcontent").is(".bleed-clipper-active")||INKIVE.C.IS_AUTO_SAVE&&INKIVE.Tool.getInstance()&&!INKIVE.Tool._autoSaveTimeout&&(INKIVE.Tool._autoSaveTimeout=setTimeout((function(){INKIVE.C.IS_DEV&&console.warn("Autosave"),INKIVE.EditorFacade.handle("page","save",{quiet:!0}).then((function(){INKIVE.Tool._autoSaveTimeout=null}))}),INKIVE.C.AUTO_SAVE_INTERVAL))},INKIVE.Tool.disableUI=function(){$(".tool-menu").addClass("disabled"),$(".tool-content").addClass("disabled"),$("header").addClass("disabled"),$("#copy-paste-panel").addClass("disabled"),$("#right-submenu").addClass("disabled"),$("#left-submenu").addClass("disabled"),$("#pages-panel").addClass("disabled")},INKIVE.Tool.enableUI=function(){$(".tool-menu").removeClass("disabled"),$(".tool-content").removeClass("disabled"),$("header").removeClass("disabled"),$("#copy-paste-panel").removeClass("disabled"),$("#right-submenu").removeClass("disabled"),$("#left-submenu").removeClass("disabled"),$("#pages-panel").removeClass("disabled")},INKIVE.Tool.blinkScreen=function(e){var t=e?$(e):$("#workarea"),n=$(t)[0].style.backgroundColor||"transparent";t.animate({backgroundColor:"#FFDD17"},100,(function(){t.animate({backgroundColor:n},500)}))},INKIVE.Tool.calculateStringContentDifference=function(e,t){for(var n=0;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(var r=0;r<e.length&&r<t.length&&e.length-r>n&&t.length-r>n&&e[e.length-1-r]===t[t.length-1-r];)r++;var o=t.length-r;return{position:n,removed:e.length-r-n,added:o-n}},INKIVE.Tool.prototype={constructor:INKIVE.Tool,initMainHandlers:function(){INKIVE.C.IS_MOBILE&&($('.action[data-action="delete_page"]').on("click",(function(){INKIVE.ProjectFacade.handle("design","delete",{quiet:!0})})),$('.action[data-action="go_previous_page"]').on("click",(function(){INKIVE.EditorFacade.handle("page","move_to",{page_number:INKIVE.Tool._current_page_number-1,quiet:!0})})),$('.action[data-action="go_next_page"]').on("click",(function(){INKIVE.EditorFacade.handle("page","move_to",{page_number:INKIVE.Tool._current_page_number+1,quiet:!0})})),$('.action[data-action="add_page"]').on("click",(function(){INKIVE.ProjectFacade.handle("design","add",{quiet:!0,silent:!0})})),function(){function e(e,t){var n=!1;if(INKIVE.C.IS_MOBILE_APP&&AppBridge.version.isApp("desygner")&&(n=window.Android?!t&&INKIVE.C.MODE.IS_DESYGNER&&AppBridge.version.isGreaterThan("1.0.2"):INKIVE.C.MODE.IS_INKIVE&&AppBridge.version.isGreaterThan("1.5.1")||INKIVE.C.MODE.IS_PHOTOBOOKY&&AppBridge.version.isGreaterThan("1.2")||INKIVE.C.MODE.IS_DESYGNER&&AppBridge.version.isGreaterThan("1.0.1")),n)AppBridge.callBoth(t||"open_in_new_window",{url:e});else{var r=window.open(e,"Share","height=500,width=500, location=0");window.focus&&r.focus()}}$("#ik-share-link").on("click",(function(){this.select()})),$("#tabShare .notallowed .btn").on("click",(function(e){if($("#ik-project-privacy a.make-public").trigger("click"),e.stopPropagation(),!INKIVE.C.IS_MOBILE){var t=$("#ik-share"),n=t.html();t.html(INKIVE.TemplatesHelper("modal_loader")+"<span>hold on...</span>"),t.one("click",(function(){t.html(n)}))}})),$("#ik-share-facebook").on("click",(function(){e(INKIVE.Helpers.getTwitterUrl(),"share_with_fb")})),$("#ik-share-linkedin").on("click",(function(){e(INKIVE.Helpers.getLinkedinUrl())})),$("#ik-share-twitter").on("click",(function(){e(INKIVE.Helpers.getTwitterUrl())})),$("#ik-share-google").on("click",(function(){e(INKIVE.Helpers.getGoogleplusUrl())})),$("#ik-share-embed").on("click",(function(){var e=new INKIVE.ModalShareEmbed({}),t=INKIVE.Modal.modalWindow(e.getFormHtml(),{width:600,headerIcon:"fa fa-code",headerTitle:"editor.embed",buttons:[{title:"close",onClick:function(){e.saveForm((function(){t.close()}))}}]})})),$("#ik-share-email").on("click",(function(){var e=new INKIVE.ModalShareEmail,t=INKIVE.Modal.modalWindow(e.getFormHtml(),{width:500,headerIcon:"fa fa-mail-forward",headerTitle:"modal.title.share_email",buttons:[{title:"Send",onClick:function(){e.saveForm((function(){t.close()}))}}]})}))}()),$(window).on("contextmenu",(function(e){var t=$(e.target);if(!t.is(".context-menu-enabled"))return!1;t.select()})),$(window).on("dragstart",(function(){return!1})),$("#help").on("click",(function(){var e=new INKIVE.ModalHelp({}),t=INKIVE.Modal.modalWindow(e.getFormHtml(),{width:500,headerIcon:"desygner-icon-question-mark",headerTitle:"general.help",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.send_request"),onClick:function(){INKIVE.Modal.togglePageLoader(!0),e.saveForm((function(){t.close(),INKIVE.Modal.togglePageLoader(!1)}))}}]})}))},initAccordion:function(){var e=this;$('.accordion > dt > [data-toggle!="tab"][data-toggle!="custom"]').on("click",(function(){$('.accordion > dt > [data-toggle!="tab"][data-toggle!="custom"]').each((function(e,t){var n=$(t).parent().next();n.length&&n.slideUp("fast")}));var t=$(this);if(t.hasClass("active"))$('.accordion > dt > [data-toggle!="custom"]').removeClass("active");else{var n=t.parent().next();n.length&&("accordion"===t.attr("data-toggle")&&e.initTab(t.attr("href"),(function(e){})),n.slideDown("fast",(function(){var n=t.attr("href");$(n).reloadThumb(),e.initScroll(n)}))),$('.accordion > dt > [data-toggle!="custom"]').removeClass("active"),t.addClass("active")}return!1}))},initExpandContent:function(){$(".expand-panel .expand-button").on("click",(function(){var e=$(this).parents(".expand-panel").find(".expand-content"),t=$(this).find("i"),n=$(this).find("icon");e.is(":visible")?(t.attr("class","icon-chevron-right"),n.css("transform","rotate(0deg)"),$(this).removeClass("active")):(t.attr("class","icon-chevron-down"),n.css("transform","rotate(-180deg)"),$(this).addClass("active")),e.slideToggle("fast")}))},initDropdownButton:function(){$(".ui-dropdown-button").on("click",(function(){var e=$(this).attr("data-id"),t=Math.round($(window).width()-$(this).offset().left-($(this).width()+30)),n=$('.ui-dropdown-content[data-id="'+e+'"]');n.css("right",t),n.fadeToggle("fast"),$(this).toggleClass("active")})),$(document).on("mousedown",(function(e){this.tool=INKIVE.Tool.getInstance();var t=$(".ui-dropdown-content"),n=$(".payment-modal").find("access").is(":not(.aurelia-hide)"),r=$(e.target).parents("*").andSelf().filter(".modalWrapper.overlay").length;$(document.activeElement).is("body,textarea#text")||document.activeElement.blur(),$(e.target).closest(".ui-dropdown-button.active").length||n||r||t.is(e.target)||0!==t.has(e.target).length||(t.fadeOut("fast"),t.find('input[name="includeManualBleed"]').is(":checked")&&(this.tool.editor.canvas.runExtensions("hideBleedClipper",{keepDisabled:!1}),this.tool.editor.canvas.runExtensions("disableGuideLine",{keepVisible:!1}),$(".filter-bleed-type").addClass("hidden")),$(".ui-dropdown-button").each((function(){$(this).is(".forced")||$(this).removeClass("active"),$(".ui-dropdown-button").blur()})))})),$(document).mouseup((function(e){var t=$(".ui-dropdown-items"),n=$(".payment-modal").find("access").is(":not(.aurelia-hide)"),r=$(e.target).parents("*").andSelf().filter(".modalWrapper.overlay").length;if(!($(e.target).closest(".ui-dropdown-button.active").length||n||r||t.is(e.target)||0!==t.has(e.target).length)){t.each((function(){var e=$(this).parents(".root-popupmenu").length;e&&$(this).css("visibility","hidden"),e||$(this).fadeOut("fast")}));var o=$(".ui-dropdown.active");o.length&&(INKIVE.EditorFacade.trigger("element.menu.dropdown",{show:!1,action:o.attr("data-action"),type:o.attr("type")}),$("#sidebar-resize-button").removeClass("collapse-hidden",$("#font-menu-list").is(":visible")),o.removeClass("active"))}}))},initSidebarResizeButton:function(){var e=$("#tool-panel");function t(){var e=document.querySelector("#ik-editor").getBoundingClientRect(),t=document.querySelector("#workarea").style,n=INKIVE.Tool.getInstance().editor.canvas;t.width=e.width+"px",t.height=e.height+"px",n.setZoom(n.getZoom()),$("#ik-editor").antiscroll()}function n(t){e.width(t),function(e){$("#element-popupmenu").css("left",e),$("#sidebar-resize-button").css({left:e})}(t)}function r(){var r=$(".tool-menu").width(),o=$(".tool-content").width();$("#sidebar-resize-button").css({left:r}),e.addClass("on-animate");var i=e.width()-o;INKIVE.EditorFacade.trigger("sidebarpanel.toggle",i),e.addClass("collapsed"),n(i),$("#tool-panel .tool-menu li.active").removeClass("active"),setTimeout((function(){e.removeClass("on-animate"),t()}),500)}function o(){if(e.hasClass("collapsed")){var r=$(".tool-menu").outerWidth()+$(".tool-content").width();INKIVE.EditorFacade.trigger("sidebarpanel.toggle",r),e.addClass("on-animate").removeClass("collapsed"),e.width()===r||n(r),setTimeout((function(){e.removeClass("on-animate"),t()}),500)}}e.find('[data-toggle="tab"]').on("shown.bs.tab",o),$("#tool-panel #sidebar-resize-button").on("click",r),$(document).on("sidebarpanel.show",o),$(document).on("sidebarpanel.collapse",r)},download:function(e){var t=this.editor.canvas,n=INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_bold",{message:"modal.alert.preparing_file"}),{skip:!1,loader:!0}),r=$('.ui-dropdown-content[data-id="download"] div[data-type="'+e+'"]'),o=r.find("[name=is"+("jpeg"===e?"Jpg":"Png")+"WebQuality]");if($('.ui-dropdown-button[data-id="download"]').click(),o.length&&o[0].checked){var i=Date.now(),s="png"===e&&r.find("[name=isForcedTransparency]").is(":checked")?null:"#FFFFFF",a="jpeg"===e?r.find(".quality-slider").slider("value"):null,l=!1;INKIVE.DesignFacade.off("preview.download").on("preview.download",(function(t){if(!l){var r=Base64.decode(INKIVE.C.BOOK.name)+"."+e.replace("jpeg","jpg");if(navigator.msSaveBlob){var o=t.split(";base64,"),s=function(e,t,n){t=t||"",n=n||512;for(var r=atob(e),o=[],i=0;i<r.length;i+=n){for(var s=r.slice(i,i+n),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);var c=new Uint8Array(a);o.push(c)}return new Blob(o,{type:t})}(o[1],o[0].replace("data:",""));navigator.msSaveBlob(s,r)}else{var a=document.createElement("a");a.download=r,a.href=t.replace("image/"+e,"image/octet-stream"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}Date.now()-i>1e3?n.close():_.delay(_.bind(n.close,n),1e3),l=!0}})),INKIVE.DesignFacade.handle("preview",null,{maxwidth:t.contentW,maxheight:t.contentH,format:e,background:s,isdownload:!0,quality:a}),_.delay((function(){l||(l=!0,n.close(),o[0].checked=!1,o.closest(".icheckbox_square-yellow").removeClass("checked"),o.closest(".checkbox").addClass("disabled"),o.trigger("change"),INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("modal.alert.downloading_web_error")})))}),1e4)}else INKIVE.EditorFacade.handle("page","save").then((function(){INKIVE.Helpers.DownloadProcedure.execute(r,{contentW:t.contentW,contentH:t.contentH,format:e},(function(){n.close()}))}),(function(){n.close()}))},initDownload:function(){var e=$('.ui-dropdown-content[data-id="download"]');if(e.length){var t=this.editor.canvas;e.find(".tabs").tabs();var n=["thumb","web","mobile"],r=t.contentW,o=t.contentH;737===r&&521===o&&(r=842,o=595);var i,s,a,l=r/o;e.find(".quality-slider").slider({max:100,min:1,value:92,slide:function(t,n){e.find('div[data-type="jpeg"] .estimated-size .value').html(INKIVE.Helpers.calculateJpegSize(r,o,n.value))},start:function(e,t){},stop:function(e,t){}}).slider("float"),e.find(".ui-dropdown .input-icon").off("click").on("click",(function(e){$(e.target).parents(".ui-dropdown").find("ul").toggle()})),e.find("a.quality").off("click").on("click",(function(){e.find("a.quality").removeClass("active"),$(this).addClass("active")})),p("rangeCurrent"),p("thumb",110),p("mobile",600),p("web",800),i=!0,s=INKIVE.Tool.getInstance().editor.canvas,(a=$('[type=checkbox][name="isJpgWebQuality"], [type=checkbox][name="isPngWebQuality"]')).on("change",(function(){var e=$(this).closest(".ui-tabs-panel"),t=e.find(".quality-slider");if(e.find(".expand-panel").toggleClass("disabled",this.checked),t.length){var n=this.checked?60:91;t.slider({value:n}),t.toggleClass("disabled",this.checked),e.find(" .estimated-size .value").html(INKIVE.Helpers.calculateJpegSize(s.contentW,s.contentH,n))}})),i&&a.trigger("change"),_.each(n,(function(t){var n="is"+(o=t,o.charAt(0).toUpperCase()+o.slice(1)),r="."+t+"Dimensions";var o;e.find('[type=checkbox][name="'+n+'"]').on("change",(function(){$(this).parents("p").find(r).toggleClass("disabled")}))})),_.each(_.union(["rangeCurrent"],n),(function(t){t+="Dimensions",e.find("."+t).change((function(){!function(t,n){var r=parseInt(t.val()),o=t.attr("data-type");r<16&&(r=16);r>3e3&&(r=3e3);var i="width"===o?r:parseInt(r/l),s="width"!==o?r:parseInt(r/l);e.find("."+n+'[data-type="width"]').val(i),e.find("."+n+'[data-type="height"]').val(s)}($(this),t)}))})),e.find('div[data-type="png"] .estimated-size .value').html(INKIVE.Helpers.calculatePngSize(r,o)),e.find('div[data-type="jpeg"] .estimated-size .value').html(INKIVE.Helpers.calculateJpegSize(r,o,e.find(".quality-slider").slider("option","value"))),1===INKIVE.C.BOOK.num_pages&&e.find('[type=radio][name="isRange"][id="isRangeCurrent"]').parents("div.checkbox").hide(),1===INKIVE.C.BOOK.num_pages&&e.find('[type=radio][name="isRange"][id="isRangeSelected"]').parents("div.checkbox").hide(),e.find('[type=radio][name="isRange"]').off("change").on("change",(function(){$(this).is(":checked")&&(e.find(".ui-dropdown, .rangeCurrentDimensions").addClass("disabled"),"isRangeSelected"===$(this).attr("id")?e.find(".ui-dropdown").removeClass("disabled"):"isRangeCurrent"===$(this).attr("id")?(e.find(".rangeCurrentDimensions").removeClass("disabled"),u(INKIVE.Tool._current_page_number,INKIVE.Tool._current_page_number)):u(1,INKIVE.C.BOOK.num_pages))})),d(),e.find(".select-dropdown").off("change").on("change",(function(){var t=e.find("select#page_from_options"),n=e.find("select#page_to_options"),r=parseInt(t.val()),o=parseInt(n.val());t.is(this)?r>=o&&n.val(r):o<=r&&n.val(r)})),e.find('[type=radio][name="isRange"][id="isRangeAll"]').is(":checked")&&u(1,INKIVE.C.BOOK.num_pages);var c=e.find("[name=isAutomaticBleed], [name=isBleed]");c.on("change",(function(){var e=this.checked;c.attr("checked",!1),this.checked=e})),INKIVE.DesignHandler.on("added removed",d)}function u(t,n){e.find("#page_from_options").val(t),e.find("#page_to_options").val(n)}function d(){for(var t=e.find("select#page_from_options").empty(),n=e.find("select#page_to_options").empty(),r=1,o=INKIVE.C.BOOK.num_pages;r<=o;r++){var i=$.parseHTML('<option data-id="'+r+'">'+r+"</option>");t.append($(i).clone()),n.append($(i).clone())}u(1,INKIVE.C.BOOK.num_pages)}function p(t,n){var i="."+t+"Dimensions",s=n&&r>n?n:r,a=n&&r>n?parseInt(n/l+""):o;e.find(i+'[data-type="width"]').val(s),e.find(i+'[data-type="height"]').val(a)}},initTabEvent:function(e){var t=this;e=e||"body",$(e).find('[data-toggle="tab"]').on("shown.bs.tab",(function(e){var n=$(e.target);t.mobileBackMenu(n),t.tabButtonTraker=this,_.defer((function(){var e=n.attr("href");t.initTab(e,(function(n){n&&t.initScroll(e)}))})),INKIVE.C.IS_MOBILE&&t.mobileBackMenuShow(!0)}))},mobileBackMenu:function(e){var t=$("#ik-menu-back");if(t.length){var n=t.find(".text-element"),r="Main menu",o="";if(e&&e.length){var i=e.attr("href").replace("#","");o=$('[data-toggle="tab"][href="#'+i+'"]').parents('[role="tabpanel"]').attr("id")||o,$.inArray(o,["tabPhotoAlbums","tabPhotoImages"])>-1&&(o="tabImages"),r=$('[role="tab"][href="#'+o+'"]').attr("tag")||r}t.attr("data-href",o),n.html("Back to "+r)}},mobileBackMenuShow:function(e){var t=$("#tool-panel");e&&t.addClass("active"),e||t.removeClass("active")},initScroll:function(e,t){var n=$(e),r=n.find(".accordion dd:visible"),o=r.length,i=n.length&&"dd"===n.prop("tagName").toLowerCase();if(!i&&o)return this.initScroll(r,t);var s,a,l=n.width()<n.parents(".tool-content").width()?n.width():n.parents(".tool-content").width();t=$.extend({autoHide:!1,width:l,height:(s=n.closest('div[role="tabpanel"]'),a=s.height(),s.find([".breadcrumb",".tool-search",".drag-drop-file",".colorLineWrapper",".tool-static-block",".filterWrapper:not(.subfilter)",".header-links",".search-container",".search-title"].join(",")).filter(":visible").filter((function(){return 0===$(this).closest(".antiscroll-inner").length})).each((function(e,t){a-=$(t).outerHeight(!0)})),i&&(a-=30,void n.parent(".accordion").find("dt").each((function(){a-=$(this).outerHeight(!0)}))),a)},t),n.hasClass("antiscroll-wrap")?n.antiscroll(t):n.find(".antiscroll-wrap:not(.no-resizable)").antiscroll(t)},saveNotification:function(e){$("#ik-save").toggle(!e),$("#ik-save-notification").toggle(e)},updateCurrentPageInfo:function(){INKIVE.C.IS_MOBILE&&($("#current-page").html(INKIVE.Tool._current_page_number),$("#all-page").html(INKIVE.C.BOOK.num_pages),1===INKIVE.Tool._current_page_number?$('.action[data-action="go_previous_page"]').addClass("disabled"):$('.action[data-action="go_previous_page"]').removeClass("disabled"),INKIVE.Tool._current_page_number===INKIVE.C.BOOK.num_pages?INKIVE.C.IS_MOBILE?($('.action[data-action="go_next_page"]').hide(),$('.action[data-action="add_page"]').show()):$('.action[data-action="go_next_page"]').addClass("disabled"):INKIVE.C.IS_MOBILE?($('.action[data-action="go_next_page"]').show(),$('.action[data-action="add_page"]').hide()):$('.action[data-action="go_next_page"]').removeClass("disabled"),1===INKIVE.C.BOOK.num_pages?$('.action[data-action="delete_page"]').addClass("disabled"):$('.action[data-action="delete_page"]').removeClass("disabled"))},saveLayout:function(e,t){var n=this,r=n.editor;t=t||$.noop;var o=$("#svgcontent"),i=$("g.main"),s=$("g.main title");s.remove();var a=i.html();i.prepend(s);var l=$("#layout_defs").html();l||(l="");var c="",u="",d=o.find(".background").get(0);e.isBackground?(d&&(c=d.innerHTML),u=r.getSvgString()):(o[0].removeChild(d),u=r.getSvgString(),o[0].appendChild(d));var p=$("<div>").append($($("#defsWrapper").find("defs")).clone()).html();p||(p="<defs></defs>");try{u=u.replace(/(<image[^>]*\sxlink:href=['"])([^'"]*)(['"][^>]*>)/gi,(function(e,t,n,r){var o=svgedit.utilities.fromXml(n),i=INKIVE.ImagesFactory.getOriginalUrl(o);return t+(n=i?svgedit.utilities.toXml(i):n)+r}))}catch(e){console.error(e.message)}var h={id:e.id,layoutData:Base64.encode(a),layoutDefs:Base64.encode(l),layoutBg:Base64.encode(c),svgCont:Base64.encode(u),svgDefs:Base64.encode(p)};_.delay((function(){INKIVE.Helpers.apiMultipart("management/layoutdata",h,(function(r){r&&"success"===r.status?(t(!0),n.updateThumbImage("layout-"+e.id,r.url)):(INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.update_layout"})),t(!1))}))}),1e3)},saveSticker:function(e,t){var n=this;t=t||$.noop;var r=INKIVE.Helpers.getStickerFromSvg();if(r){var o={id:e.id,content:Base64.encode(r)};INKIVE.Helpers.api("management/stickerdata","POST",o,(function(e){e&&"success"===e.status?(t(!0),n.updateThumbImage("sticker-"+e.id,e.url)):(INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_default",{message:"modal.alert.update_sticker"})),t(!1))}))}else t(!0)},isReadyToSave:function(){return this.onceItsReadyToSave($.noop,$.noop,!0)},onceItsReadyToSave:function(e,t,n){var r=this.editor.canvas,o={},i=r.getCurrentDrawing().getCurrentLayer(),s=$("#svgroot"),l=s.find(".main image.element"),c=document.querySelector("#svgroot .background image");if(INKIVE.ContextMenu.destroyMenu(),n||$("#svgcontent > g:not(.background,.main:last-child)").remove(),l.hasClass("darg-and-drop-upload"))return r.call("advice.show","uploading-images-save"),void t();if(i&&"clipperImage"===i.getAttribute("class"))t();else{INKIVE.Tool.uploadedImageData=INKIVE.Tool.uploadedImageData||{},c&&l.push(c);for(var u=0;u<l.length;u++){var d=l[u],p=g(d),h=INKIVE.Tool.uploadedImageData[p];h&&svgedit.utilities.assignAttributes(d,{"xlink:href":h})}var m=_.any($.merge(l,s.find(".background image")),(function(e){var t=e.getAttribute("xlink:href");if(!INKIVE.ImagesFactory.getImageUrl(e)&&(0,a.isDataURL)(t)){if(n)return!0;var r=e.getAttribute("data-hash");INKIVE.Tool.uploadedImageData[r]?function(e){var t=e.getAttribute("id")||"background";o[t]=e.getAttribute("data-hash");var n=$(e).parent().is(".background")?"background.update.source":t+".source.url";INKIVE.DesignFacade.on(n,_.partial(f,t))}(e):(e.classList.remove(INKIVE.C.FLIP_IMAGE.HORIZONTAL),e.classList.remove(INKIVE.C.FLIP_IMAGE.VERTICAL),INKIVE.Tool.uploadedImageData[r]="pending",function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=function(e){return e&&e.classList.contains("active")},a=document.getElementById("tabImages"),c=a.querySelector(".header-links [data-key=add]");if(!s(a)||!s(c))return INKIVE.EditorFacade.switchTab({panel:"Images",tab:"add"}),void setTimeout((function(){i>0&&e.call(r,t,n,--i)}),100);var u=n.getAttribute("data-hash");o[-1]=!0,_.defer((function(){delete o[-1];var e=INKIVE.Tabs.images.$el.find(".import-button.uploader.progress-button");e.fineUploaderS3("addBlobs",[t]);var n=_.filter(e.fineUploaderS3("getUploads"),(function(e){return"rejected"!==e.status}));if(n.length>0){var r=_.last(n);o[r.id]=u}e.on("error",(function(e,t){var n=o[t];INKIVE.Tool.uploadedImageData[n]=void 0,f(t)})),e.on("cancel",(function(e,t){var n=o[t];INKIVE.Tool.uploadedImageData[n]=void 0,f(t)})),e.on("complete",(function(e,t,n,r){if(o[t]){var i=o[t];INKIVE.Tool.uploadedImageData[i]=r.tempLink;for(var s=0;s<l.length;s++){var a=l[s];i===a.getAttribute("data-hash")&&(svgedit.utilities.assignAttributes(a,{"xlink:href":r.tempLink}),f(a.id))}f(t)}}))}))}(INKIVE.Helpers.dataURLToBlob(t),e))}}));if(n)return!m;Object.keys(o).length||e()}function f(t){o[t]&&(delete o[t],Object.keys(o).length||e())}function g(e){var t=e.dataset.hash;if(t)return t;var n=INKIVE.ImagesFactory.getImageDataHash(e);return e.setAttribute("data-hash",n),n}},getSaveString:function(){return this.savePage(!0,$.noop,!0)},savePage:function(e,t,n,r){if(!INKIVE.Tool._current_page_number)return console.error("Calling page save on no page"),void t(!0);var o=this,i=o.editor;if(INKIVE.C.IS_MOBILE_APP&&!e&&INKIVE.Modal.togglePageLoader(!0),n)return s();function s(){var s=i.getSvgString();if(!n&&INKIVE.Helpers.areEqual(s,INKIVE.EditorFacade.handle("cache","get"))&&!r)return e||i.canvas.call("advice.show","nothing-to-save"),void t(!0);var c=svgedit.utilities.text2xml(s);if((0,l.sanitizeIgnoredTagsSvg)(c),function(){$(c).find("image").each((function(e,t){var n=t.getAttribute("id"),r=$("#svgroot image#"+n);if(r.length){var o=INKIVE.ImagesFactory.getImageUrl(r[0]),i=(0,a.isDataURL)(t.getAttribute("xlink:href"));if(o||!i){var s=!r[0].getAttribute("xlink:href")||i;s&&INKIVE.Image.Helpers.processDataUrlImage(t,o),s||INKIVE.Image.Helpers.processXlinkImage(t,r[0]),INKIVE.Image.Helpers.processFlippedImage(t)}else l("Error: inlined image with no url version")}else l("Original image not found");function l(e){t.remove(),_.defer((function(){throw new d(e)}))}}));var e=$(c).find("svg")[0];e.setAttribute("xmlns:xlink",svgedit.NS.XLINK),s=i.getSvgString(e)}(),s=(s=(s=(s=s.replace(/<\/tspan>\s*/g,"</tspan>")).replace(/\s*<tspan/g,"<tspan")).replace(/<\/text>\s*/g,"</text>")).replace(/\s*<text/g,"<text"),o.saveAdviceTiemout&&clearTimeout(o.saveAdviceTiemout),o.saveAdviceTiemout=setTimeout((function(){INKIVE.C.IS_AUTO_SAVE||i.canvas.call("advice.show","long-time-no-save")}),3e5),n)return s;var u=document.createElement("div");function d(e){this.message=e,this.name="ImageException"}u.innerHTML=s,u.querySelectorAll(".element").forEach((function(e){e.removeAttribute("style")})),s=i.canvas.svgToString(u.firstChild),INKIVE.DesygnerApi.put("business/projects/"+INKIVE.C.BOOK.id+"/pages/"+INKIVE.Tool._current_design_id,Object.assign({content:Base64.encode(s)},r)).then((function(){INKIVE.EditorFacade.handle("cache","set",{data:s}),e||i.canvas.call("advice.show","saved"),INKIVE.C.IS_MOBILE_APP&&!e&&INKIVE.Modal.togglePageLoader(!1),t(!0)}),(function(e){return t(!1,e.responseText)}))}this.onceItsReadyToSave(s,_.partial(t,!0))},save:function(e,t){var n=this;t=t||$.noop,this.onceItsReadyToSave((function(){n.saveNotification(!0);var e=INKIVE.EditorModeManager.getMode(),r=INKIVE.EditorModeManager.getData(),o="template"===e,i=$.inArray(e,["sticker","banner","placeholder"])>-1,s=_.bind((function(e){n.saveNotification(),t(e)}),n);o&&n.saveLayout(r,s),i&&n.saveSticker(r,s)}),_.partial(t,!0))},clearTab:function(e){$(e).find(".tab-content").empty(),$(e).find(".breadcrumb").remove()},addBreadcrumb:function(e,t){if(!INKIVE.C.IS_MOBILE){$(e+" .breadcrumb").remove(),$(e+" .tool-search").length?$(e+" .tool-search").after(INKIVE.C.HTML.breadcrumbWrapper):$(e).prepend(INKIVE.C.HTML.breadcrumbWrapper);for(var n=0,r=t.length;n<r;n++){var o=t[n],i=r-1===n?"active":"",s=INKIVE.C.HTML.breadcrumbElement(o.href,i,INKIVE.TranslateHelper.translate(o.name));$(e+" .breadcrumb li").append(s)}var a=$(e+" .breadcrumb li").html();a&&$(e+" .breadcrumb li").html(a.slice(0,-5))}},inkiveLoader:function(e,t){var n;if(e){var r=!$("#inkiveLoader .inkive-logo").is(":hidden"),o=!INKIVE.C.IS_MOBILE&&r,i=r?1500:0;o&&($("#inkiveLoader").length||$("body").append('<div id="inkiveLoader"><div class="inkive-logo"></div></div>'),$("#inkiveLoader .inkive-logo").hide(),(n=new Image).onload=_.once((function(){$("#inkiveLoader .inkive-logo").css("background","url("+n.src+") no-repeat center center").css("background-size","contain").fadeIn(900,t||$.noop)})),n.src="https://static.inkive.com/assets/img/logos/desygner-wordmark.svg",INKIVE.C.WHITE_LABEL_CONFIGURATION&&INKIVE.C.WHITE_LABEL_CONFIGURATION.logo_url&&(n.src=INKIVE.C.WHITE_LABEL_CONFIGURATION.logo_url)),setTimeout(o?n.onload:t,i)}else INKIVE.C.IS_MOBILE?$("#inkiveLoader").remove():$("#inkiveLoader").fadeOut(900,(function(){$(this).remove()})),$("body").removeClass("loading"),t&&t()},traceTab:function(){return this.tabButtonTraker},show:function(){$("#ik-editor").transition({opacity:1},900,"ease");var e=INKIVE.Helpers.getFragmentTarget();e&&$(".tool-menu [href="+e+"]").length?$(".tool-menu [href="+e+"]:first").tab("show"):$(".tool-menu [href]:first").tab("show")},refreshScroll:function(e){$(e).hasClass("antiscroll-wrap")?$(e).data("antiscroll").refresh():$(e).find(".antiscroll-wrap").data("antiscroll").refresh()},scrollTop:function(e){var t=$(e).find(".antiscroll-wrap").data("antiscroll").vertical;t&&(t.innerEl.scrollTop=0,t.update())},load:function(e,t,n,r,o){INKIVE.Tool._current_page_number=parseInt(e);var i,s=this.editor,a=INKIVE.ProjectFacade.get("design",{page_number:e}),l=a&&a.design_id&&INKIVE.EditorFacade.handle("cache","get",{design_id:a.design_id});if(t=t||$.noop,clearTimeout(INKIVE.Tool._autoSaveTimeout),INKIVE.Tool._autoSaveTimeout=null,r){var c=Base64.decode(INKIVE.C.BLANK_SVG);return INKIVE.Tool._current_design_id=a.design_id,void u(c,a.design_id)}try{return l&&!o?(INKIVE.Tool._current_design_id=a.design_id,void s.loadSvgString(l,t)):(i={isMobile:INKIVE.C.IS_MOBILE?1:0,page:e,versionId:n,scrapbook_id:INKIVE.C.BOOK.id},s.loadingElement(!0),void INKIVE.Helpers.api("page/by_pagenumber","GET",i,(function(e,t,n,r,o){if(s.loadingElement(!1),t&&e&&"false"!==e.success&&!_.isEmpty(e)){INKIVE.Tool._current_design_id=parseInt(e.id),INKIVE.ProjectFacade.checkDesignId();var i=INKIVE.ImagesFactory.setImagesData(e.images);_.each(i,(function(e){e.stored=!0}));var a=e.pageContent?e.pageContent:Base64.decode(INKIVE.C.BLANK_SVG);a=a.replace(/\u00a0<\/svg>/g,"</svg>");var l=parseInt(e.pageNum);if(INKIVE.Tool._current_page_number!==l)return void console.warn("Page load aborted. Current page: ".concat(INKIVE.Tool._current_page_number,". Trying to load: ").concat(l));u(a,e.id)}else $("#inkiveLoader").hide(),INKIVE.Modal.alertMessage(o||"Error loading project",{skip:!1,loader:!0})})))}catch(e){INKIVE.Tool._current_design_id=null,INKIVE.Tool._current_page_number=0,console.error(e)}function u(e,n){s.loadSvgString(e,(function(){var r=0===$("#svgroot .main").find(":not(title)").length,o=window.location.search.match(/t=(\d+)/),i=r&&o&&1===INKIVE.Tool._current_page_number,a=s.getSvgString();i||INKIVE.EditorFacade.handle("cache","set",{design_id:n,data:a}),t(),INKIVE.C.IS_MOBILE_APP||$("#canvas-panel").css("top",60),i&&(s.loadingElement(!0),INKIVE.DesignFacade.set("template",{designed:{id:o[1]}}),INKIVE.DesignFacade.once("template.update.designed",(function(){s.loadingElement(!1),INKIVE.Helpers.displayImagesLoadingAnimation()}))),$("#outsideCanvasSelectorGroup, #image-quality-box-group").remove();var l=$("#svgcontent").find("g.main"),c=INKIVE.Tool.getInstance();l.find(".element").each((function(e,t){!INKIVE.Helpers.isElementInCanvas(t)&&!INKIVE.Helpers.isElementPartiallyInCanvas(t)&&(c.editor.canvas.removeFromSelection([t]),$(t).remove())})),INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.LOGO&&(INKIVE.DesignFacade.set("background",{color:"none"}),INKIVE.EditorModeManager.setMode("logo")),INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE&&INKIVE.EditorModeManager.setMode("brand_template"),c.editor.initEditor(),INKIVE.EditorFacade.handle("zoom","fit");var u=document.querySelector("#svgroot .main title");u&&(u.textContent=INKIVE.TranslateHelper.translate("tool.general.more_options")),c.resize(),INKIVE.History.initialize(e)}))}},initScrollDetect:function(e,t){$(e).find(".scrollDetect").length||$(e).append('<div class="scrollDetect hide"></div>');var n=$(e).find(".scrollDetect"),r=$(e).data("inst");$(e).find(".scrollDetect").data("inst",r),function r(){var o=!1;t((function(){var i=$(e).closest(".antiscroll-inner"),s=i.get(0).scrollHeight,a=i.height();if(!s){var l=i.clone().css("visibility","hidden").appendTo($("body"));s=l.get(0).scrollHeight,l.remove()}s<=a&&!o?r():function(){var r=$(e).closest(".antiscroll-inner"),o=_.debounce(i,1e3);function i(){if(n.data("inst")===$(e).data("inst"))if(n.data("working"))o();else{var i=r.get(0).scrollHeight,s=r.get(0).scrollTop,a=r.height(),l=Math.round((s+a)/i*100);n.data("per",l),l>=99&&(n.data("working",1),t((function(){n.data("working",0)}),(function(){r.unbind("scroll"),n.remove()})))}}r.unbind("scroll"),r.on("scroll",i)}()}),(function(){o=!0,n.remove()}))}()},clearThumb:function(e){$(e).find(".thumbnail-wrapper").remove()},updateThumbImage:function(e,t){clearInterval(INKIVE.Tool._intervalThumb[e]),INKIVE.Tool._intervalThumb[e]=null;var n=$("img#"+e),r=n.parents(".thumbnail"),o=n.parents(".thumbnail-wrapper"),i=o.data("masonry"),s=r.width()||i&&i.options.columnWidth,a=0;INKIVE.Tool._intervalThumb[e]=setInterval((function(){INKIVE.Helpers.imageLoader(t,(function(a,l){a===INKIVE.C.Status.success&&(n.attr("src",t),r.css("width",s),r.css("height",l.height/l.width*s),i&&o.masonry(),clearInterval(INKIVE.Tool._intervalThumb[e]),INKIVE.Tool._intervalThumb[e]=null)})),a>20&&(n.attr("src",INKIVE.C.THUMB_NOCOVER),r.css("width",s),r.css("height",140),i&&o.masonry(),clearInterval(INKIVE.Tool._intervalThumb[e]),INKIVE.Tool._intervalThumb[e]=null),a++}),3e3)},removeImportedElement:function(e,t){INKIVE.Modal.alertMessage(INKIVE.TemplatesHelper("alert_span",{text:INKIVE.TranslateHelper.translate("tool.general.delete_imported")}),{callback:[function(){var n=$(t.target),r=n.parents(".thumbnail-wrapper");e().then((function(){n.closest(".thumbnail").remove(),r.masonry(s.default.sidebar.thumbnail.masonryConfig)}),(function(){toastr.error("Error")}))},_.noop]})},getOverlayHtml:function(e,t,n){var r="";if(e.parents("#element-popupmenu").length)return"";n=n||"";var o=INKIVE.C.BOOK.book_type!==INKIVE.C.BOOK_TYPE.RESTRICTED_DESIGN;if(!o){var i=INKIVE.RestrictionsFacade.getElementRestrictions("background");o=i&&i.length&&i[0].image}var s=e.parents(".imported-elements").length,a=_.isString(t)?t:t.id.split("-")[0];if(_.contains(["photo","background","sticker"],a)){var l="sticker"!==a;l&&(a="image"),r="<div "+n+'  class="'+(l?"":"hidden")+" overlay "+a+'"><ul class="options"><li data-type="'+a+'" data-placement="bottom" data-popover="tooltip" data-original-title="'+INKIVE.TranslateHelper.translate(l?"tool.images.tooltip.image":"tool.icon.tooltip.add")+'"><i class="fa fa-plus"></i></li><li data-type="replace-'+a+'" class="'+(l?"hidden":"")+'" data-placement="bottom" data-popover="tooltip" data-original-title="'+INKIVE.TranslateHelper.translate(l?"tool.images.tooltip.replace_image":"tool.icon.tooltip.replace")+'"><i class="fa fa-refresh"></i></li>'+(l&&o?'<li data-type="background" data-placement="bottom" data-popover="tooltip" data-original-title="'+INKIVE.TranslateHelper.translate("popupmenu.tooltip.set_background")+'"><i class="fa fa-th"></i></li>':"")+(s?'<li data-type="delete" data-placement="bottom" data-popover="tooltip" data-original-title="'+INKIVE.TranslateHelper.translate("popupmenu.tooltip.remove")+'"><i class="desygner-icon-delete"></i></li>':"")+"</ul></div>"}return r},addThumbItem:function(e,t,n,r){var o=this,s=[],a=$(e).hasClass("thumbnail-wrapper")?$(e):$(e).find(".thumbnail-wrapper");a.masonry();var l=a.data("masonry"),c="",u=_.debounce((function(){a.masonry()}),1e3);$.isArray(t)||(t=[t]);var d=[];(_.each(t,(function(t){t.data&&t.data.name&&t.data.name.trim().length&&"search"!==t.data.name&&(c=' data-popover="tooltip" data-original-title="'+t.data.name+'" '),t.data&&t.data.licenced_url&&(t.src=t.data.licenced_url,t.data.version=null,t.data.loadType=null);var n=t.src,r=t.original;if(t.data&&t.data.version&&(t.data.version.original&&(r=t.data.version.original),t.data.version.thumb)){n=t.data.version.thumb;var l=t.data.version.thumb_width,h=t.data.version.original_width;!INKIVE.C.IS_MOBILE&&l&&h&&l>=h&&(n=t.data.version.original)}if(function(e){var t=!1;return a.find("img").each((function(){if(this.src===e)return t=!0,!1})),_.each(d,(function(n){n===e&&(t=!0)})),t}(n=INKIVE.Helpers.getCORSSecureUrl(n)))return!0;d.push(n);var m=t.svg||'<img id="'+t.id+'" src="'+n+(r?'" data-original-src="'+r:"")+(t.project_id?'" data-project-id="'+t.project_id:"")+(t.db_url?'" data-db-url="'+t.db_url:"")+'">',f=o.getOverlayHtml(e,t,c),g=t.data&&t.data.loadType===INKIVE.C.SHUTTERSTOCK,b=$.parseHTML('<div class="thumbnail'+(t.cls||"")+'"><a class="item" '+c+">"+m+"</a>"+f+"</div>");if(t.width&&$(b).css("width",t.width),t.height&&$(b).css("height",t.height),void 0!==t.sticker_value){var v=t.sticker_value>0?t.sticker_value:"";$(b).append($.parseHTML('<div class="thumb_sticker" data-popover="tooltip" data-original-title="'+t.sticker_tooltip+'">'+v+"</div>"))}if(t.data&&"object"===(0,i.default)(t.data)){var y=t.data;for(var j in y)$(b).find(".item").data(j,y[j])}t.width&&t.height?p($(b),t,t.width,t.height):t.width?$(b).css("width",t.width):t.height&&$(b).css("height",t.height),$(b).find("img").each((function(){var e=$(this).attr("src"),n=$(this),r=$(this).parents(".thumbnail"),o=parseInt(r.css("width")),i=parseInt(r.css("height"));n.removeAttr("src"),n.hide(),INKIVE.Helpers.imageLoader(e,(function(s,l){if(function(e,t,n){if(!t||!t.data||!t.data.search)return;var r="",o="",i=t.data.subscription_image,s=t.data.subscribed_user,a=INKIVE.TranslateHelper.translate,l="";if(t.data.licenced_url)l="licenced",o=(r='<i class="wb-icon-success"></i>')+a("tool.search.licenced_item");else if(n){if(i)l=s?"":"free-user",o=a("tool.search."+(s?"add_to_canvas":"upgrade")),r={pro:"Pro+",business:"Business",enterprise:"Enterprise Resource",ultimate:"Ultimate",content2:"Unlimited Shutterstock"}[t.data.originalData.model];else if(t.data.price||"oneoff"===t.data.originalData.model){o=INKIVE.Helpers.getPriceString(t.data.price.usd,"usd"),r=a("tool.search.buy")}e.data("external_source",INKIVE.C.SHUTTERSTOCK),e.data("original_height",t.data.version.original_height),e.data("original_width",t.data.version.original_width),e.data("subscribed_user",t.data.subscribed_user),e.data("subscription_image",t.data.subscription_image),e.data("licenced_url",t.data.licenced_url),e.data("label",r),e.data("hover-text",o)}else r=a("tool.search.free_label"),o=a("tool.search.add_to_canvas");r&&e.append('<div class="subscription-label '+l+'" style="background:'+INKIVE.C.WHITE_LABEL_CONFIGURATION.colors.highlight+'">'+r+"</div>"),e.find(".overlay").addClass("align-bottom"),e.hover((function(){$(this).find(".subscription-label").addClass("hover").html(o)}),(function(){$(this).find(".subscription-label").removeClass("hover").html(r)}))}($(b),t,g),s===INKIVE.C.Status.success){var c=!o||!i||o!==l.width||i!==l.height;t.data&&t.data.loadType===INKIVE.C.SHUTTERSTOCK&&(c=!1),n.attr("src",e).css("display","block"),n.siblings(".subscription-label").css("opacity",1),c&&(p(r,t,l.width,l.height),u())}else t.isNocover?(n.attr("src",INKIVE.C.THUMB_NOCOVER).fadeIn("slow").parent().css("background","#EEEEEE"),o&&i||(r.css("width",130),r.css("height",86),u())):(a.masonry("remove",r),u());t.data&&t.data.svg_url&&n.data("svg-url",t.data.svg_url)}))})),s.push(b[0])})),s.length)&&a[r?"prependThumb":"appendThumb"](s,!1,(function(t){n&&n(t,e)}));function p(e,t,n,r){var o=n/r>1/0?2*l.options.columnWidth+10:l.options.columnWidth,i=r/n*o;e.css("width",o),e.css("height",i),t.data&&t.data.loadType===INKIVE.C.SHUTTERSTOCK&&e.find("img").css("width",o).css("height",i)}INKIVE.Helpers.initTooltips($(e))},deleteThumb:function(e,t){($(e).hasClass("thumbnail-wrapper")?$(e):$(e).find(".thumbnail-wrapper")).removeThumb(t)},initTab:function(e,t,n){var r=e.replace("#",""),o=r.replace(/^(accordion|tab)/,"").toLowerCase();window.INKIVE.Tabs[o]?window.INKIVE.Tabs[o].show():void 0!==this[r]&&this[r](e,n,t),window.INKIVE.Tabs[o]||this.initScroll(e)},tabTutorial:function(e){$(e).data("init")||INKIVE.C.BOOK.book_type===INKIVE.C.BOOK_TYPE.TEMPLATE||($(e).find("li").each((function(){var e=$(this);e.html(e.html().replace(/\[+([^\][]+)]+/g,"<a>$1</a>")),e.find("a").on("click",(function(){if(e.data("tab")){var t=e.data("tab");$("[role=tab][href="+t+"]").tab("show"),e.data("subtab")&&_.debounce((function(){$(t).find(".header-links>[data-key="+e.data("subtab")+"]").click()}))}else if(e.data("link"))window.open(e.data("link"));else if(e.data("modal")){var n=e.data("modal").split("||"),r=$(this),o=0;r.parent().find("a").each((function(e,t){r.is(t)&&(o=e)})),$(n[o]).click()}}))})),$(e).css("opacity",1))},tabSearch:function(e){$(e).data("init")||(INKIVE.Tool.preloadLayoutFormat(),$(e).find(".tabs").tabs({activate:function(){$(".tool-search form").trigger("submit")}}),$(e).find(".iradio_square-yellow.checked").addClass("desygner-icon-check"),$(e).find("input[type=radio]").on("ifClicked",(function(e){var t=$(e.target).parents(".ui-tabs-panel");t.find(".iradio_square-yellow").removeClass("desygner-icon-check"),_.defer((function(){t.find(".iradio_square-yellow.checked").addClass("desygner-icon-check"),$(".tool-search form").trigger("submit")}))})))},smartImageLoad:function(e,t,n){var r=e.is("img")?e:e.find("img"),o=r.attr("src");n.licenced_url&&(o=n.licenced_url,t=null);var i=INKIVE.ImagesFactory.getImageOriginalData(o),s=i&&(i.search||$.inArray(i.source,["dropbox","google","facebook","assetbank"])>-1),a=n.size||this.getImageSizeBasedOnSVGSize(r),l=$("#svgcontent"),c=parseInt(l.attr("width")),u=parseInt(l.attr("height"));INKIVE.DesignFacade.create("image",_.extend({size:a,position:t||{x:Math.round((c-a.width)/2),y:Math.round((u-a.height)/2)},source:{url:o,external_resize:s&&!INKIVE.ImagesFactory.isAmazonImage(o)}},n))},getImageSizeBasedOnSVGSize:function(e){var t=e.closest(".thumbnail"),n=$("#svgcontent"),r=parseInt(n.attr("width")),o=parseInt(n.attr("height")),i=e.width()||t.width()||e[0]&&e[0].width,s=e.height()||t.height()||e[0]&&e[0].height;t.data("external_source")===INKIVE.C.SHUTTERSTOCK&&(i=t.data("original_width"),s=t.data("original_height"));var a=r/o,l=i/s,c=l>a?.8*r:.8*o*l;return{width:c,height:l>a?c/l:.8*o}},callbackImages:function(e){var t=this,n=this.editor;t.editor.canvas.showOverlayElements(),$(e).initDragable({callback:{click:function(e,r){var o=r.target.closest("li"),i=o&&o.dataset.type,s=n.canvas.getMode(),a=$(e).find("img"),l=$(e).find(".item").data(),c="ab"===l.loadType&&l.originalData?l.originalData.object_id:null;if(a.length||(a=$(e)),n.canvas._t.layout_prvElem=null,n.canvas._t.layout_prvAttr=null,a.attr("src")&&(a.width()||a.height()))if(l.loadType!==INKIVE.C.SHUTTERSTOCK){if("background"===i||"replace-background"===s)return n.canvas.clearSelection(),INKIVE.DesignFacade.set("background",{source:a.attr("src"),ab_id:c}),void this.processBackendImageTask(a,l);if("delete"!==i)if("replace-image"!==i&&"replace-image"!==s){if(INKIVE.RestrictionsFacade.isFunctionalityAllowed("image_add")){var u=t.getImageSizeBasedOnSVGSize(a),d=$("#svgcontent"),p=parseInt(d.attr("width")),h=parseInt(d.attr("height"));INKIVE.DesignFacade.create("image",{source:{url:a.attr("src")},position:{x:Math.round((p-u.width)/2),y:Math.round((h-u.height)/2)},size:{width:u.width,height:u.height},imported:$(r.target).parents(".imported-elements").length>0,ab_id:c}),this.processBackendImageTask(a,l)}}else{var m=n.canvas.getSelectedElems(),f=$(m).is(".sticker")&&$(m).find("image.subelement").length,g=$(m[0]).is("image.element")||f;1===m.length&&g?(this.overLayoutImage(e),this.mouseup(e),INKIVE.ImagesFactory.removeImageFilter(m[0])):t.editor.canvas.call("advice.show","image-replacement-selection")}else{t.removeImportedElement((function(){var e=$.Deferred(),t=$(r.target).parents(".thumbnail"),n=t.find("img"),o=n.data("original-src")||t.data("original-src"),i=n.data("project-id")||t.data("project-id");return o||(o=n.parent().data().version&&n.parent().data().version.original),INKIVE.Helpers.api("photo/remove","POST",{id:i||INKIVE.C.BOOK.id,key:n.data("db-url")||o,type:"photo"},(function(t,n){n&&e.resolve(t),n||e.reject(t)})),e.promise()}),r)}}else a.parents(".thumbnail").data("in_shopping_cart")||this.mouseup(e,r);else t.editor.canvas.call("advice.show","thumb-not-load")},overLayoutImage:function(e,t){var r=$(e).find(".item"),o=n.canvas.runExtensions("overLayoutImage",u(u({},t),{},{elem:$(e).find("img").get(0),type:"image",skipHistory:!0}));o&&r.data("layoutTarget",o)},mousemove:function(e,t){var r=n.getOffset(),o=t.clientX,i=t.clientY,s={imageRatio:1.2,mouse_x:o-r.x,mouse_y:i-r.y,skipHistory:!0};this.overLayoutImage(e,s)},mouseup:function(e,r){var o,i=this,s=r&&r.target.closest("li"),a=s&&"background"===s.dataset.type,l=s&&"replace-image"===s.dataset.type,c=INKIVE.DesignFacade,u=INKIVE.EditorFacade,d=$(e).find(".item"),p=$(e).find("img"),h=d.data(),m=$(h.layoutTarget).is("[id]"),f=(null===(o=h.version)||void 0===o?void 0:o.original)||h.licenced_url,g=$(e).data("external_source")===INKIVE.C.SHUTTERSTOCK,b="ab"===h.loadType&&h.originalData?h.originalData.object_id:null,v=!1;if(!n.canvas.getMode().match("replace-")||m){if(void 0===h.version&&!1===m){var y=t.getImageSizeBasedOnSVGSize(p),j=$("#svgcontent"),w=parseInt(j.attr("width")),I=parseInt(j.attr("height"));c.create("image",{source:{url:p.attr("src")},position:{x:Math.round((w-y.width)/2),y:Math.round((I-y.height)/2)},size:{width:y.width,height:y.height},imported:$(r.target).parents(".imported-elements").length>0,ab_id:b})}if(g&&l&&this.overLayoutImage(e,{imageRatio:h.licenced_url?1:1.2,skipHistory:!0}),n.canvas._t.layout_prvElem&&(!f&&m&&c.trigger("image.replace",{id:n.canvas._t.layout_prvElem.id}),v=/imageplaceholder_new\.svg$/.test(n.canvas._t.layout_prvAttr.url),n.canvas._t.layout_prvElem=null,n.canvas._t.layout_prvAttr=null),f){var x={ab_id:b,imported:$("#tool-panel").find("#"+p.attr("id")).parents(".imported-elements").length>0};x.licenced_url=h.licenced_url,x.img_frame=v;var E=INKIVE.RestrictionsFacade.isFunctionalityAllowed("image_add"),k=!(!g||h.licenced_url)&&(h.originalData.provider_data.send_to_user_bucket=!0,h.originalData.provider_data.platform="thumb",i.processShutterstockImage(h,x,d,a));if(h.layoutTarget){var C=$(h.layoutTarget),S=C.parents("g.background").length?"background":h.layoutTarget.getAttribute("id");if(!E&&!INKIVE.RestrictionsFacade.isReplaceAllowed(S))return;g||(C.data("external_source",null),C.data("external_id",null));var T=(K=d.data(),(D=h.licenced_url||K.version&&K.version.original)?INKIVE.Helpers.getCORSSecureUrl(D):h.version.tab||h.version.original);INKIVE.DesignFacade.set(S,_.extend({skipHistory:!0,source:{url:T,preload:!0},keep_box_size:!0},x))}else if(E){var N=d.get(0).getBoundingClientRect(),A=u.handle("zoom","get"),O=n.getOffset(),V={x:Math.floor4((N.left-O.x)/A),y:Math.floor4((N.top-O.y)/A)};if(!p.width()&&!p.height())return void t.editor.canvas.call("advice.show","thumb-not-load");if(k)if(h.layoutTarget){var P=h.layoutTarget.getBBox();V={x:P.x,y:P.y},x.size={width:P.width,height:P.height},h.layoutTarget.remove()}else V=null;else if(g&&!h.licenced_url)return;if(g&&a)return void INKIVE.DesignFacade.set("background",Object.assign({source:p.attr("src")},x));t.smartImageLoad(d,V,x)}this.processBackendImageTask(p,h)}var K,D}},processShutterstockImage:function(e,n,r,o){var i=e.subscription_image;if(i){if(!e.subscribed_user)return INKIVE.Helpers.displaySubscriptionModal(null,e.originalData.model),!1;if(_.find(t.getShutterstockImagePresent(),{externalId:e.originalData.id}))return!1;n.subscription_image={items:[{provider:e.originalData.provider,one_off:e.originalData.marketplace.one_off,provider_data:e.originalData.provider_data}]}}n.external_source=INKIVE.C.SHUTTERSTOCK,n.external_id=e.originalData.id,n.keep_box_size=!0,n.$elem=r;return i||INKIVE.EditorFacade.handle("shopping_cart","add",{price:e.price.usd,licence:"shutterstock",id:e.originalData.id,background:o,cart_description:e.name||"marketplace:shopping_cart.shutterstock.cart_description",cart_total:"marketplace:shopping_cart.shutterstock.cart_total",data:{provider:e.originalData.provider,one_off:e.originalData.marketplace.one_off,provider_data:e.originalData.provider_data},preview:e.version.thumb}),!0},processBackendImageTask:function(e,t){var n=t.original_url?"api/photo/convertedphotos":"api/search/preferred_photo",r=t.original_url?{project_id:INKIVE.C.BOOK.id,url:t.original_url,width:t.original_width,height:t.original_height}:{photo_id:e.attr("id").split("_").pop(),src:e.attr("src")};$.ajax({url:INKIVE.C.BASE_URL+n,type:"POST",error:function(e){console.error("Error processing"+n,e)},data:r})}}})},callbackBackgrounds:function(e){var t=this.editor;function n(e){r(e)&&function(e){var t=$(e).find("img").attr("id").split("-").pop(),n=$(e).find("img").attr("src");INKIVE.DesignFacade.set("background",{source:n,background_id:t})}($(e).find(".item").get(0))}function r(e){var n=$(e).find("img"),r=n.width()||n.height();return r||t.canvas.call("advice.show","thumb-not-load"),r}$(e).initDragable({callback:{click:n,mouseup:n,mousemove:r}})},getId:function(e){return e.attr("id")?e.attr("id").split("-").pop():0},callbackAdminBackgrounds:function(e,t){var n=this;$(e).on("click",(function(e){var r=$(e.target),o=r.closest(".thumbnail"),i=n.getId(r),s=new INKIVE.ModalAdminBackground({id:i}),a=INKIVE.Modal.modalWindow(s.getFormHtml(),{width:600,headerIcon:"icon-backgrounds",headerTitle:"modal.title.edit_background",buttons:[{title:"Save",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){t&&n.id?(a.close(),o.toggleClass("grayscale",n.active)):e.removeClass("disabled")}))}},{title:"Delete",width:"100px",cls:"btn-red",onClick:function(){var e=INKIVE.TemplatesHelper("alert_span",{message:"modal.alert.delete_background"});INKIVE.Modal.alertMessage(e,{callback:[function(){s.deleteForm((function(e){e&&(n.deleteThumb(t,o),a.close())}))},$.noop]})}}]})}))},callbackAdminStickers:function(e,t){var n=this;$(e).on("click",(function(e){var r=$(e.target).closest(".thumbnail"),o=r.find("img"),i=n.getId(o),s=new INKIVE.ModalAdminSticker({id:i,isPlaceholder:/^placeholder-/.test(o.attr("id")),isText:/^banner-/.test(o.attr("id"))}),a=INKIVE.Modal.modalWindow(s.getFormHtml(),{width:600,headerIcon:"icon-hipster",headerTitle:"Edit sticker",buttons:[{title:"Edit sticker",width:"150px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){if(t&&n.id){a.close();var r=s.opts.isText?"banner":s.opts.isPlaceholder?"placeholder":"sticker";INKIVE.EditorModeManager.setMode(r,n)}else e.removeClass("disabled")}))}},{title:"Save & Duplicate",width:"150px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){if(t&&n.id){var r=n;r.id=null,r.name="",$("#tabAdmin dt.active .btn-new-item").trigger("click",[r]),a.close()}else e.removeClass("disabled")}))}},{title:"Save",width:"150px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){t&&n.id?(a.close(),n.active?r.removeClass("grayscale"):r.addClass("grayscale")):e.removeClass("disabled")}))}},{title:"Delete",width:"100px",cls:"btn-red",onClick:function(){var e=INKIVE.TemplatesHelper("alert_span",{message:"modal.alert.delete_sticker"});INKIVE.Modal.alertMessage(e,{callback:[function(){s.deleteForm((function(e){e&&(n.deleteThumb(t,r),a.close())}))},$.noop]})}}]})}))},callbackAdminLayouts:function(e,t){var n=this;$(e).on("click",(function(e){var r=$(e.target),o=r.closest(".thumbnail"),i=n.getId(r),s=new INKIVE.ModalAdminLayout({id:i}),a=INKIVE.Modal.modalWindow(s.getFormHtml(),{width:500,headerIcon:"icon-news",headerTitle:"modal.title.edit_template",buttons:[{title:INKIVE.TranslateHelper.translate("modal.title.edit_template"),width:"200px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){t&&n.id?(a.close(),INKIVE.EditorModeManager.setMode("template",n)):e.removeClass("disabled")}))}},{title:"Save & duplicate",width:"200px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){if(t&&n.id){var r=n;r.id=null,r.name="",$("#tabAdmin dt.active .btn-new-item").trigger("click",[r]),a.close()}else e.removeClass("disabled")}))}},{title:"Save",width:"200px",onClick:function(){var e=$(this);e.addClass("disabled"),s.saveForm((function(t,n){t&&n.id?(a.close(),o.toggleClass("grayscale",!n.active)):e.removeClass("disabled")}))}},{title:"Delete",width:"100px",cls:"btn-red",onClick:function(){var e=INKIVE.TemplatesHelper("alert_span",{message:"modal.alert.delete_template"});INKIVE.Modal.alertMessage(e,{callback:[function(){s.deleteForm((function(e){e&&(n.deleteThumb(t,o),a.close())}))},function(){}]})}}]})}))},callbackLayouts:function(e){var t,n,r,o=[],i=this.editor,s=i.canvas,a=_.throttle((function(e){t=$(e).find("img").attr("id").split("-").pop(),i.loadingElement(1),INKIVE.Helpers.api("search/layout","GET",{id:t},(function(){var e=0===$("#svgroot").find(".main").find(":not(title)").length;i.loadingElement(0),e?l():r=INKIVE.Modal.modalWindow(INKIVE.TemplatesHelper("modal_layout_load",{new_size:0,current_size:Math.round(s.contentW)+"x"+Math.round(s.contentH),keep_images:!INKIVE.C.MODE.IS_DESYGNER,has_images:$("#svgcontent").find(".main image").length>0,keep_size:!INKIVE.C.MODE.IS_DESYGNER,is_same_size:!0}),{width:600,headerIcon:"icon-cloud-download",headerTitle:"modal.title.change_name",buttons:[{title:INKIVE.TranslateHelper.translate("modal.buttons.apply_name"),onClick:u},{title:"Cancel",onClick:d}]})}))}),1e3,{trailing:!1});function l(){o=_.map($("#svgcontent ").find(".main image"),(function(e){return e.getAttribute("xlink:href")})),i.loadingElement(1),INKIVE.DesignFacade.once("template.update",c),_.delay((function(){INKIVE.DesignFacade.set("template",{keep_stage_size:!1,designed:{id:t}})}),500)}function c(){var e=$("#svgcontent").find(".main .layoutBox");n&&_.any(e,(function(e,t){if(!(o.length>t))return!0;s.runExtensions("addLayoutImage",{elem:e,data:o[t]})})),INKIVE.C.IS_MOBILE?s.call("advice.show","template-back"):e.length&&INKIVE.C.MODE.IS_DESYGNER&&s.call("advice.show","template-placeholders"),INKIVE.Helpers.displayImagesLoadingAnimation(),i.loadingElement(0)}function u(){n=$('input[name="keep-images-input"]').is(":checked"),l(),r.close()}function d(){r.close()}$(e).initDragable({callback:{mousemove:$.noop,mouseup:function(e){a($(e).find(".item")[0])},click:function(e){a($(e).find(".item")[0])}}})},callbackStickers:function(e){var t=this.editor,n=t.canvas,r=_.partial(s,(function(e){var t=Math.min(n.contentW,n.contentH)/Math.max(e.width,e.height);return{position:{x:(n.contentW-e.width*(t/2))/2,y:(n.contentH-e.height*(t/2))/2},size:{width:e.width*(t/2),height:e.height*(t/2)},selected:!0}}),"onclick"),o=_.partial(s,(function(e){var n=INKIVE.EditorFacade.handle("zoom","get"),r=t.getOffset();return{position:{x:Math.floor4((e.left-r.x)/n),y:Math.floor4((e.top-r.y)/n)},size:{width:Math.floor4(e.width/n),height:Math.floor4(e.height/n)}}}),"onmouseup"),i=_.any(e,(function(e){return $(e).parents(".root-popupmenu").length}));function s(e,n,r,o){r=$(this).is(".thumbnail")?this:r;var i="onmouseup"===n,s=$(r).find(".item img"),a=e((s=i?s:$("#"+s.attr("id"))).get(0).getBoundingClientRect()),l=null;if(o&&"replace-sticker"===$(o.target).closest("li").attr("data-type")){var c=t.canvas.getSelectedElems(),u=$(c[0]),d=u.attr("id"),p=u[0].getBBox(),h=Math.max(p.width,p.height);a={size:{width:h,height:h},position:{x:p.x,y:p.y},selected:!0},INKIVE.DesignFacade.handle(d,"delete"),l=d}INKIVE.DesignFacade.create("sticker",_.extend({sticker_id:s.attr("id").split("-").pop(),thumb_src:s.attr("src"),svg_url:s.data("svgUrl"),replacement_id:l,placeholder:!!$(r).closest("[data-action=on_rootFrames]").length,is_icon:$(r).find(".item").data("icon")},a))}i&&_.each(e,(function(e){$(e).on("click",_.bind(r,e))})),i||$(e).initDragable({callback:{mousemove:$.noop,click:r,mouseup:o}})},nowTab:function(){var e=this.$elem.find("[role=tabpanel].active").attr("id");return e?"#"+e:null},resize:function(){var e=this.nowTab();e&&(this.initScroll($(e)),$(e).find("div.thumbnail-wrapper:not(.no-resizable)").initThumb())},getShutterstockImagePresent:function(){for(var e=$("#svgcontent").find("image"),t=[],n=0;n<e.length;n++){var r=$(e[n]);r.data("external_source")===INKIVE.C.SHUTTERSTOCK&&t.push({externalId:r.data("external_id"),id:r.attr("id")})}return!!t.length&&t}},window.RGBColor=window.rgbcolor}},{"../../../src/config/constants":1090,"../editor/facade/project/project":113,"../helpers/dataUrl":632,"../helpers/fixPageSvg":636,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.date.now.js":879,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.search.js":925,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/es.symbol.js":932,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],630:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.convertUnitsToPixels=function(e,t,n,r){var o=parseFloat(e),i=r||INKIVE.C.DPI,s=i/72,a=i/2.54,l=function(e,t){switch(t){case"px":return e;case"pt":return e*s;case"in":return e*i;case"cm":return e*a;case"mm":return e*a/10;default:return e}}(o,t);return n?l:Math.round(l)},e("core-js/modules/es.parse-float.js")},{"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904}],631:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=!1;function t(e){for(var t={hasColumn:!1,hasLineSpacing:!1,hasLineMargin:!1,hasParagraphSpacing:!1},n=0;n<e.classList.length;n++){var r=e.classList[n];r.match(/line-spacing-.+/)?t.hasLineSpacing=!0:r.match(/columns-.+/)?t.hasColumn=!0:r.match(/ line-margin-.+/)?t.hasLineMargin=!0:r.match(/paragraph-spacing-.+/)?t.hasParagraphSpacing=!0:r.match(/first-line-margin-.+/)&&(t.hasFirstLineMargin=!0)}return t}var n=document.getElementById("svgcontent"),i=n.querySelectorAll(".main > *[id]:not(.element)"),s=n.querySelectorAll("g.textarea"),a=n.querySelectorAll(".element.video, .element.video-elem");s.forEach((function(e){e.getAttribute("font-family")||e.setAttribute("font-family","Lato"),e.getAttribute("font-size")||e.setAttribute("font-size","22");var t=e.querySelector("rect:not(.highlight-rect)");t.removeAttribute("style"),t.removeAttribute("stroke"),e.querySelectorAll("tspan:empty, text:empty").forEach((function(e){e.textContent=" "})),e.querySelectorAll(":scope > text").forEach((function(e){return e.removeAttribute("id")})),svgedit.transformlist.removeElementFromListMap(e);var n=svgedit.transformlist.getTransformList(e);if(n)for(var r,o=n.numberOfItems;o>0&&o!==r;)svgedit.transformlist.removeElementFromListMap(e),svgedit.recalculate.recalculateDimensions(e),r=o,o=svgedit.transformlist.getTransformList(e).numberOfItems})),s.forEach((function(n){for(var r=n.querySelector("g.text"),o=0;o<r.classList.length;o++)if(r.classList[o].match(/ line-margin-.+/))return;var i="rtl"===r.getAttribute("direction"),s=n.querySelector("rect"),a=parseFloat(s.getAttribute("width")),l=n.parentElement&&n.parentElement.classList.contains("table-cell"),c=parseFloat(s.getAttribute("x"));i&&(c+=a),n.querySelectorAll("text").forEach((function(n){var o=n.getAttribute("text-anchor");if(!(o&&"start"!==o||n.hasAttribute("dx"))){var s,a=n.getAttribute("x");if(a)if(n.setAttribute("x",c),-1!==a.indexOf(" ")){var l=a.split(" ");if(e=!0,n.textContent.length&&!(l.length<n.textContent.length)){s=i?[c-l[0]]:[l[0]-c];for(var u=0;u<n.textContent.length-1;u++){var d=i?l[u]-l[u+1]-n.getExtentOfChar(u).width:l[u+1]-l[u]-n.getExtentOfChar(u).width;s.push(d)}if(s&&s.length){s=s.map((function(e){return e<.5?0:e.toFixed(2)}));var p=t(r);(p.hasLineMargin&&p.hasColumn||r.hasAttribute("data-margin"))&&(s[0]=0),n.setAttribute("dx",s.join(" "))}}}}}));var u=n.textContent&&n.textContent.length<=100?2:12;e&&!l&&s.setAttribute("width",a+u)})),s.forEach((function(t){if(!(t.textContent&&t.textContent.length<=100)&&e){o(t,"font-weight","string","normal"),o(t,"font-size","number",null),o(t,"font-family","string",null),o(t,"fill","string",null);var n=t.parentElement;if(n&&n.classList.contains("table-cell"))t.querySelectorAll("[text-decoration]").forEach((function(e){return e.removeAttribute("text-decoration")}))}})),s.forEach((function(e){var t=e.querySelector("g.text");if("start"===t.getAttribute("text-anchor")&&!t.hasAttribute("data-margin")){for(var n=0;n<t.classList.length;n++)if(t.classList[n].match(/ line-margin-.+/))return;var r=[],o=e.querySelectorAll("text");if(e.querySelectorAll("text[dx]").length){var i=!0;o.forEach((function(e){if(i){var t=!1,n=e.getAttribute("dx");if(n){var o=n.split(" ");o[0]>0&&(r.push(o[0]),t=!0,o[0]=0,e.setAttribute("dx",o.join(" ")))}t||r.push(0)}i=e.classList.contains("eol")}));var s=r.some((function(e){return 0!==e})),a=s&&r.every((function(e){return e===r[0]})),l=r[0],c=Math.floor(l);a&&Math.abs(c-l)<.1?t.classList.add("line-margin-".concat(c)):s&&t.setAttribute("data-margin",r.join(" "))}}})),s.forEach((function(e){var n=e.querySelector("g.text"),r=e.querySelectorAll("text");if(!(n.hasAttribute("data-paragraph-dy")||r.length<2)){var o=t(n);if((n.hasAttribute("data-dy")||o.hasLineSpacing)&&!o.hasParagraphSpacing&&!o.hasColumn){var i=e.querySelector("rect");if(i){for(var s=[],a=parseFloat(i.getAttribute("y")),l=r[0]&&parseFloat(r[0].getAttribute("y"))||a,c=!1,u=0;u<r.length;u++){var d=r[u],p=d.classList.contains("eol"),h=parseFloat(getComputedStyle(d).fontSize);if(!p)return;if(!c&&p&&(l=parseFloat(d.getAttribute("y")),c=!0),p&&r[u+1]){var m=parseFloat(r[u+1].getAttribute("y")),f=m-l-h;s.push(f.toFixed(2)),l=m}else p&&s.push(0)}s.some((function(e){return Math.abs(e)>1}))&&n.setAttribute("data-paragraph-dy",s.join(" ")),n.removeAttribute("data-dy")}}}})),s.forEach((function(e){var t=e.querySelector("rect"),n=e.querySelectorAll("text"),r=e.classList.contains("textarea");if(!(e.parentElement&&e.parentElement.classList.contains("table-cell"))&&n[0]){var o=n[0].querySelectorAll("tspan[font-size]"),i=0;o.length&&o.forEach((function(e){var t=parseFloat(e.getAttribute("font-size"));t>i&&(i=t)}));var s=i||parseFloat(getComputedStyle(n[0]).fontSize),a=n[0].getAttribute("y");r&&s&&a&&t.setAttribute("y",a-s)}})),s.forEach((function(e){var t=e.querySelector("g.text"),n=e.querySelectorAll("text.eol"),r=t.getAttribute("data-paragraph-dy");if(r){for(var o=parseFloat(t.getAttribute("font-size")),i=r.split(" "),s=0;s<n.length;s++){var a=n[s];if(a.classList.contains("blank")){a.innerHTML=" ";var l=s>0&&n[s-1];if(l&&l.classList.contains("eol")){var c=parseFloat(a.getAttribute("y"))-parseFloat(l.getAttribute("y"))-o;i[s-1]=c.toFixed(2)}}}t.setAttribute("data-paragraph-dy",i.join(" "))}})),a.forEach(r.backwardsCompatibility),i.forEach((function(e){e.classList.add("element")})),INKIVE.Text._cache={};var l=INKIVE.Tool.getInstance().editor;l.setMode("select"),l.canvas.clearSelection(),s.forEach((function(e){var t=(new INKIVE.Text.Textarea).setDOM(e);l.canvas.runExtensions("renderTextArea",{textArea:t,resize:!1})}))},n.cleanRedundantPartialStyling=o,e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.number.to-fixed.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.some.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.string.replace.js");var r=e("../editor/video");function o(e,t,n,r){var o=e.querySelector("g.text"),s=i(o,t,n,r),a=function(e,t,n,r,o){var s={};return e.querySelectorAll("text").forEach((function(e){var a=e.querySelectorAll("tspan");0===a.length&&(s[t]=s[t]?s[t]+1:1),a.forEach((function(e){if(e.hasAttribute(n)){var a=i(e,n,r,o);if(!a)return;s[a]=s[a]?s[a]+1:1}else s[t]=s[t]?s[t]+1:1}))})),s}(e,s,t,n,r);e.querySelectorAll("text").forEach((function(e){var o=e.querySelectorAll("tspan");0===o.length&&(a[s]=a[s]?a[s]+1:1),o.forEach((function(e){if(e.hasAttribute(t)){var o=i(e,t,n,r);if(!o)return;a[o]=a[o]?a[o]+1:1}else a[s]=a[s]?a[s]+1:1}))}));var l=null,c=-1;for(var u in a)a[u]>c&&(c=a[u],l=u);if(l&&l!==r){"number"===n&&(l=Number(l));var d=l!==s;o.setAttribute(t,l),e.querySelectorAll("text").forEach((function(e){var o=e.querySelectorAll("tspan");o.length?o.forEach((function(e){e.hasAttribute(t)?i(e,t,n,r)===l&&e.removeAttribute(t):d&&e.setAttribute(t,s)})):d&&(e.innerHTML="<tspan ".concat(t,'="').concat(s,'">').concat(e.textContent,"</tspan>"))}))}}function i(e,t,n,r){var o=r;switch(n){case"number":o=e.hasAttribute(t)?parseFloat(e.getAttribute(t)):r;break;case"string":(o=e.getAttribute(t)||r)&&(o=o.replace(/[']/g,""))}return o}},{"../editor/video":625,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.some.js":875,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.to-fixed.js":890,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.for-each.js":964}],632:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.isDataURL=l,n.isMimeType=c,n.getDataURL=function(e,t){return p.apply(this,arguments)},n.getMIMEType=m,n.getMimeTypeFromUrl=g,n.getMimeTypeFromContentType=b,n.getMimeTypeFromRequestUrl=y,n.getQueryParameter=function(e){var t,n=window.location.href;n=n.slice(n.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++)if((t=n[r].split("="))[0]===e)return decodeURIComponent(t[1])},n.fileExtToMIMETypes=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/slicedToArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.values.js");var a={".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".ttf":"font/ttf",".woff":"font/woff",".woff2":"font/woff2",".otf":"font/otf"};function l(e){return!!e&&!!e.match(/^\s*data:(\w+\/[-.\w]+(?:\+[-.\w]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i)}function c(e){return!!e&&!!e.match(/(\w+\/[-.\w]+(?:\+[-.\w]+)?)/i)}n.fileExtToMIMETypes=a;var u=function(e){return"dataURLCache-".concat(Base64.encode(e))},d=function(e,t){try{localStorage.setItem(u(e),t)}catch(e){INKIVE.C.DEBUG&&console.warn("Local storage full. Clearing storage...",e),localStorage.clear()}};function p(){return(p=(0,s.default)(o.default.mark((function e(t,n){var r,i,s,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(!l(r=localStorage.getItem(u(t)))){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,fetch(t);case 6:return i=e.sent,e.next=9,i.blob();case 9:return s=e.sent,e.next=12,_(s,t);case 12:return a=e.sent,!n&&l(a)&&d(t,a),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return new Promise((function(t,n){var r=e.slice(0,4),o=new FileReader;o.onloadend=function(e){if(e.target.readyState===FileReader.DONE){var r=new Uint8Array(e.target.result).map((function(e){return e.toString(16)})).join("").toUpperCase(),o=function(e){switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"504B0304":return"application/zip";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":case"FFD8FFE2":case"FFD8FFE3":case"FFD8FFE8":case"52494646":case"0000":return"image/jpeg";default:return null}}(r);o?t(o):n(r)}},o.readAsArrayBuffer(r)}))}function m(e,t){return f.apply(this,arguments)}function f(){return(f=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=g(t))){e.next=3;break}return e.abrupt("return",r);case 3:if(!(n&&n.type&&c(n.type))){e.next=5;break}return e.abrupt("return",n.type);case 5:if(!n){e.next=7;break}return e.abrupt("return",h(n));case 7:if(!t){e.next=11;break}return e.next=10,y(t);case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return e&&"string"==typeof e?Object.entries(a).reduce((function(t,n){var r=(0,i.default)(n,2),o=r[0],s=r[1];return!t&&e.includes(o)?s:t}),null):null}function b(e){return v.apply(this,arguments)}function v(){return(v=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"string"==typeof t){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",Object.values(a).find((function(e){return t.includes(e)}))||null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return j.apply(this,arguments)}function j(){return(j=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:return n=e.sent,e.abrupt("return",b(n.headers.get("Content-Type"))||b(n.headers.get("content-type")));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(e,t){return w.apply(this,arguments)}function w(){return(w=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(n,t);case 3:r=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),I({blob:t,url:n,hexSignature:e.t0});case 9:return e.abrupt("return",new Promise((function(e,o){var i=new FileReader;i.onloadend=function(){var s=i.result.split("base64,").pop(),a="data:".concat(r,";base64,").concat(s);l(a)?e(a):o(I({blob:t,url:n,dataURL:a}))},i.readAsDataURL(t)})));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function I(e){var t=e.blob,n=e.url,r=e.hexSignature,o=e.dataURL,i="Data url could not be generated.\nBlob size: ".concat(t.size,"\nBlob hex signature: ").concat(r,"\nOriginal url: ").concat(n,"\nFailed dataURL: ").concat(o);return new Error(i)}},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/regenerator":682,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.object.values.js":903,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.split.js":926,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958}],633:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getElementType=i,n.isOfType=s,n.default=function(e){return{getElementType:function(){return i(e)},hasLayoutBox:function(){return p(e)},hasPlaceholderFrame:function(){return h(e)},isOfType:s(e),isIcon:function(){return d(e)},isImage:function(){return l(e)},isLogo:function(){return u(e)},isSticker:function(){return c(e)},isVideo:function(){return a(e)}}},n.hasPlaceholderFrame=n.hasLayoutBox=n.isIcon=n.isLogo=n.isSticker=n.isImage=n.isVideo=void 0,e("core-js/modules/es.array.find.js"),e("core-js/modules/es.object.keys.js");var o=r(e("./types"));function i(e){var t=Object.keys(o.default).find((function(t){return e&&e.classList.contains(o.default[t])}));return o.default[t]||null}function s(e){return function(t){return i(e)===t}}var a=function(e){return s(e)(o.default.Video)};n.isVideo=a;var l=function(e){return s(e)(o.default.Image)};n.isImage=l;var c=function(e){return s(e)(o.default.Sticker)};n.isSticker=c;var u=function(e){return s(e)(o.default.Logo)};n.isLogo=u;var d=function(e){return s(e)(o.default.Icon)};n.isIcon=d;var p=function(e){return e.classList.contains("layoutBox")};n.hasLayoutBox=p;var h=function(e){return e.classList.contains("placeholder-frame")};n.hasPlaceholderFrame=h},{"./types":635,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.find.js":859,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901}],634:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./element-helper")).default;n.default=o},{"./element-helper":633,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],635:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={Image:"image",Sticker:"sticker",Video:"video",Logo:"logo",Icon:"icon"}},{"core-js/modules/es.object.define-property.js":895}],636:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.fixPageSvg=function(e,t){return u.apply(this,arguments)},n.sanitizeIgnoredTagsSvg=f;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/esnext.string.match-all.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.array.reduce.js");var i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("./dataUrl");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){return(u=(0,s.default)(o.default.mark((function e(t,n){var r,l,c,u,p,m,g,b,v,y=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]&&y[2],e.next=3,h(t,r);case 3:l=e.sent,t.appendChild(l),c=INKIVE.C.FLIP_IMAGE,u=c.VERTICAL,p=c.HORIZONTAL,m=function(e){return e&&(e.getAttribute("xlink:href")||e.getAttribute("href"))||""},g=(0,i.default)(t.querySelectorAll("image")),b=o.default.mark((function e(l){var c,h,f,b,v,y,j,_,w;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=g[l],h=m(c),!(0,a.isDataURL)(h)){e.next=4;break}return e.abrupt("return","continue");case 4:if(n!==INKIVE.Tool._current_design_id){e.next=10;break}if(f=document.querySelector("image#".concat(c.id)),b=m(f),!(0,a.isDataURL)(b)){e.next=10;break}return c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b),e.abrupt("return","continue");case 10:return v=function(){var e=(0,s.default)(o.default.mark((function e(n){var r,s,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,i.default)(c.classList).join(" "),s=r.indexOf(u)>-1,a=r.indexOf(p)>-1,!s&&!a){e.next=8;break}return e.next=6,new Promise((function(e){INKIVE.Tool.getInstance().editor.canvas.setFlipImage(c.id,{vertical:s,horizontal:a},n,t,e)}));case 6:e.next=10;break;case 8:return e.next=10,d(c,n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=r?"thumb":"web",j=!0,_=INKIVE.ImagesFactory.getVersionUrl(h,y,j),e.prev=14,e.next=17,fetch(_);case 17:if(403!==e.sent.status){e.next=20;break}throw new Error("403 when fetching");case 20:return e.next=22,v(_);case 22:e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(14),w=INKIVE.ImagesFactory.getVersionUrl(h,"original",j),e.next=29,v(w);case 29:case"end":return e.stop()}}),e,null,[[14,24]])})),v=0;case 10:if(!(v<g.length)){e.next=18;break}return e.delegateYield(b(v),"t0",12);case 12:if("continue"!==e.t0){e.next=15;break}return e.abrupt("continue",15);case 15:v++,e.next=10;break;case 18:f(t);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return p.apply(this,arguments)}function p(){return(p=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,(0,a.getDataURL)(n,!0);case 3:r=e.sent,t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=(0,s.default)(o.default.mark((function e(t,n){var r,c,u,d,p,h,m,f,g,b,v,y,j,_,w,I;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=/url\(([^()]*)\)/g,c=function(){var e=(0,s.default)(o.default.mark((function e(t){var n,i,s,c,u,d,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.matchAll(r)){e.next=3;break}return e.abrupt("return",t);case 3:i=t,s=l(n),e.prev=5,s.s();case 7:if((c=s.n()).done){e.next=17;break}if(2!==(u=c.value).length){e.next=15;break}return d=u[1],e.next=13,(0,a.getDataURL)(d);case 13:p=e.sent,i=i.replace(d,p);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t=(0,i.default)(e.querySelectorAll(".textarea"));return t.map((function(t){var n=t.id;return INKIVE.DesignFacade.get(e.getElementById(n))})).filter((function(e){return e&&e.font&&!t.find((function(t){return t.family===e.font.family}))})).map((function(e){return e.font}))},d=document.createElement("defs"),p=document.createElement("style"),n){e.next=10;break}return h=u(t),!0,e.next=10,INKIVE.FontsFactory.importDesignCSSFonts(h,!0);case 10:if(m=(0,i.default)(document.querySelectorAll(".desygner-font-source")).map((function(e){return e.href})).concat([new URL("/assets/css/fonts/nunito.css",document.baseURI).href]),f=(0,i.default)(document.querySelectorAll("[id^=font-source]")),!(g=f.reduce((function(e,t){return e+t.innerHTML}),""))){e.next=18;break}return e.next=16,c(g);case 16:b=e.sent,p.innerHTML+=b;case 18:v=l(m),e.prev=19,v.s();case 21:if((y=v.n()).done){e.next=35;break}return j=y.value,e.next=25,fetch(j);case 25:return _=e.sent,e.next=28,_.text();case 28:return w=e.sent,e.next=31,c(w);case 31:I=e.sent,p.innerHTML+=I;case 33:e.next=21;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(19),v.e(e.t0);case 40:return e.prev=40,v.f(),e.finish(40);case 43:return d.appendChild(p),e.abrupt("return",d);case 45:case"end":return e.stop()}}),e,null,[[19,37,40,43]])})))).apply(this,arguments)}function f(e){return e.querySelectorAll('[data-sanitize="ignore"]').forEach((function(e){return e.remove()}))}},{"./dataUrl":632,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/esnext.string.match-all.js":962,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],637:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getInlineSize=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.getElementById("svgcontent"),n={};return(0,o.default)(t.classList).forEach((function(t){(e=t.match(/du-(\w+)/))?n.unit=e[1]:(e=t.match(/dw-([\d|.]+)/))?n.width=parseFloat(e[1]):(e=t.match(/dh-([\d|.]+)/))&&(n.height=parseFloat(e[1]))})),n};var o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.parse-float.js")},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920,"core-js/modules/web.dom-collections.for-each.js":964}],638:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getPageContentById=function(e){return a.apply(this,arguments)},n.createElement=l,n.getPageContent=function(e){return new Promise((function(t,n){INKIVE.Helpers.api("page/by_pagenumber","GET",{page:e+1,scrapbook_id:INKIVE.C.BOOK.id},(function(e,r,o,i,s){return r&&e&&"false"!==e.success&&!_.isEmpty(e)?t({pageId:e.id,pageContent:p(e.pageContent)}):n(new Error(s||"Error loading page"))}))}))};var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/esnext.string.replace-all.js"),e("core-js/modules/es.array.concat.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("../../../src/helpers/active-page-details"));function a(){return(a=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,s.default)(),String(t)!==String(n.id)){e.next=3;break}return e.abrupt("return",l(n.svgString));case 3:return e.next=5,c(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){var t=document.createElement("div");t.innerHTML=e;var n=t.firstChild;if(!n.querySelector("svg")){var r=n.cloneNode();return r.appendChild(n),r}return t.firstChild}function c(e){return u.apply(this,arguments)}function u(){return(u=(0,i.default)(o.default.mark((function e(t){var n,r,i,s,a,c,u,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=INKIVE.C.BOOK.encodedId,e.next=3,INKIVE.CompanyFactory.initialize();case 3:return r=INKIVE.CompanyFactory.credentials,i=INKIVE.C.API_URL,s="".concat(i,"business/projects/").concat(n,"/pages/").concat(t),a=new window.Headers({Authorization:"Basic "+btoa("".concat(r.username,":").concat(r.password))}),e.next=9,fetch(s,{method:"get",headers:a});case 9:return c=e.sent,e.next=12,c.json();case 12:return u=e.sent,p=d(u.content),e.abrupt("return",l(p));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return e.replaceAll(/>[\t\n\s]+<(?!\/tspan)/g,"><")}function p(e){var t=document.createElement("div");return t.innerHTML=d(e),t.firstChild}},{"../../../src/helpers/active-page-details":1092,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/esnext.string.replace-all.js":963}],639:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.ImageHelpers=void 0,e("core-js/modules/es.array.filter.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,null,[{key:"processDataUrlImage",value:function(e,t){e.setAttribute("xlink:href",INKIVE.ImagesFactory.getOriginalUrl(t)),INKIVE.C.DEBUG&&console.error("Using original (data-url): "+INKIVE.ImagesFactory.getOriginalUrl(t))}},{key:"processXlinkImage",value:function(e,t){var n=t.getAttribute("xlink:href"),r=svgedit.utilities.fromXml(n),o=INKIVE.ImagesFactory.getOriginalUrl(r);n=o?svgedit.utilities.toXml(o):n,e.setAttribute("xlink:href",n),INKIVE.C.DEBUG&&o&&console.error("Using original (basic replace): "+o)}},{key:"processFlippedImage",value:function(e){var t=e.getAttribute("data-original-href");$(e).removeAttr("data-original-href"),t&&$(e).attr("xlink:href",INKIVE.Helpers.isDataURL(t)?INKIVE.ImagesFactory.getImageUrl(e):t)}},{key:"getInOrderLoadOptions",value:function(e,t){return _.uniq([INKIVE.ImagesFactory.getRightSizeUrl(e,t),e,INKIVE.ImagesFactory.getOriginalUrl(e)]).filter(Boolean)}},{key:"loadImageOptions",value:function(e,t){var n=new Image;function r(){n.src=e.shift()}r(),n.onload=function(){t(n)},n.onerror=function(){e.length&&r()}}}]),e}();n.ImageHelpers=s},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.object.define-property.js":895}],640:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.isElementPartiallyInCanvas=function(e,t){if(!e)return!1;var n=t=t||i(e),r=(0,o.default)(n,2),s=r[0],a=r[1],l=s.y+s.height>a.y,c=s.y<a.y+a.height,u=s.x+s.width>a.x,d=s.x<a.x+a.width;return l&&c&&u&&d},n.isElementInCanvas=function(e,t){if(!e)return!1;var n=t=t||i(e),r=(0,o.default)(n,2),s=r[0],a=r[1],l=s.y>a.y,c=s.y+s.height<a.y+a.height,u=s.x>a.x,d=s.x+s.width<a.x+a.width;return l&&c&&u&&d},e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var o=r(e("@babel/runtime/helpers/slicedToArray"));function i(e){var t="image"===INKIVE.DesignFacade.getType(e),n="icon"===INKIVE.DesignFacade.getType(e),r="sticker"===INKIVE.DesignFacade.getType(e),o=n||r?e.querySelector("image"):e,i=o&&o.textContent.split(" "),s=o&&o.getAttribute("data-box-coordinates")&&o.getAttribute("data-box-coordinates").split(" "),a=i&&4===i.length,l=s&&4===s.length,c=document.querySelector("#canvasBackground").getBBox();return[(t||n||r)&&(a||l)?INKIVE.EditorFacade.canvas.runExtensions("getLayoutBoxCoord",{layoutBox:e}):e.getBBox(),c]}},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926}],641:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass"));e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.function.name.js");var s=r(e("../editor/ui/top-submenu/status")),a=0,l=0,c=!1;function u(e,t,n,r){INKIVE.C.DEBUG&&console.log("[".concat(e," progress]: ").concat(d(n,r)),{currStep:n,numSteps:r},"\n[Total progress]: ".concat(d(l,a)),{totalCurrStep:l,totalNumSteps:a});var o=d(n,r),i=INKIVE.TranslateHelper.translate("top_submenu.download_modal.status_notification_preparing");return t&&s.default.display("".concat(i," ").concat(o),null,!0),o}function d(e,t){return 0===t?c?"100%":"0%":"".concat(Math.round(e/t*100),"%")}function p(){return(new Date).getTime()}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,o.default)(this,e),this.name=t,this.localCurrStep=r,this.localNumSteps=i,this.handleDisplay=n}return(0,i.default)(e,[{key:"numSteps",get:function(){return this.localNumSteps},set:function(e){this.localNumSteps=e,a+=e}},{key:"first",value:function(){return c=!1,this.startTime=p(),u(this.name,this.handleDisplay,0,0)}},{key:"last",value:function(){return l===a&&(l=0,a=0,c=!0),this.localCurrStep=0,this.endTime=p(),INKIVE.C.DEBUG&&console.log("[".concat(this.name," duration]:"),this.endTime-this.startTime,"ms"),c}},{key:"next",value:function(){return this.localCurrStep+=1,l+=1,c=!1,u(this.name,this.handleDisplay,this.localCurrStep,this.localNumSteps)}}]),e}();n.default=h},{"../editor/ui/top-submenu/status":605,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895}],642:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.handleTextShortcuts=function(e,t,n){var o=(n=n||/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform))?e.metaKey:e.ctrlKey,i=INKIVE.Tool.getInstance().editor,s=function(e,t){return e&&r[t]||"none"}(o,e.code);if(!o)return s;switch(e.code){case"KeyB":case"KeyI":case"KeyU":e.preventDefault(),function(e){t&&document.querySelector('.btn-onmenu[data-action="on_set-'.concat(e,'"]')).click()}(s);break;case"Enter":i&&i.setMode("select")}return s},n.keyCodeActions=void 0;var r={KeyB:"bold",KeyI:"italic",KeyU:"underline",Enter:"end"};n.keyCodeActions=r},{"core-js/modules/es.object.define-property.js":895}],643:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.svgToCanvas=u,n.default=function(e,t){return p.apply(this,arguments)};var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=e("./dataUrl"),a=e("./fixPageSvg"),l=e("../../../src/helpers"),c=r(e("./progressNotification"));function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,i.default)(o.default.mark((function e(t,n){var r,i,s,u,d,p,h,m,f,g,b,v,y,j,_,w,I,x,E,k,C,S,T,N,A,O;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.createElement("canvas"),i=r.getContext("2d"),s=n.position,u=void 0===s?{x:0,y:0}:s,d=n.pageId,p=n.height,h=n.width,m=n.useTransparentBackground,f=n.quickMode,g=void 0!==f&&f,b=n.notify,v=void 0===b||b,(y=new c.default("SVG to Image")).numSteps=3,v&&y.first(),j=t,"string"==typeof t&&((_=document.createElement("div")).innerHTML=t,j=_.firstChild),m&&((w=j.querySelector("#svg_background_color"))&&w.setAttribute("fill","none"),(I=j.querySelector("#svg_background_image"))&&I.remove()),e.next=11,(0,a.fixPageSvg)(j,d,g);case 11:return v&&y.next(),x=(0,l.getPageDimensions)(j,h,p),E=x.sourceWidth,k=x.sourceHeight,C=x.destinationWidth,S=x.destinationHeight,j.setAttribute("x",0),j.setAttribute("y",0),j.setAttribute("viewBox","".concat(u.x," ").concat(u.y," ").concat(E," ").concat(k)),j.style.width=C,j.style.height=S,r.width=C,r.height=S,T=(new XMLSerializer).serializeToString(j),N=new Blob([T],{type:"image/svg+xml"}),A=URL.createObjectURL(N),v&&y.next(),(O=new Image).src=A,e.next=28,O.decode();case 28:return i.clearRect(0,0,C,S),i.drawImage(O,0,0,O.width,O.height,0,0,C,S),e.abrupt("return",{canvas:r,b64Image:A,progressNotification:y,destinationWidth:C,destinationHeight:S});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,i.default)(o.default.mark((function e(t,n){var r,i,a,l,c,d,p,h,m,f,g,b,v;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n);case 2:if(r=e.sent,i=r.canvas,a=r.b64Image,l=r.progressNotification,c=r.destinationWidth,d=r.destinationHeight,p=n.type,h=void 0===p?"image/png":p,m=n.quality,f=void 0===m?.92:m,g=n.notify,b=void 0===g||g,(v=i.toDataURL(h,f).replace(h,"image/octet-stream"))&&"data:,"!==v&&(0,s.isDataURL)(v)){e.next=12;break}throw new Error("Downloading file failed. Data url is blank");case 12:return URL.revokeObjectURL(a),b&&l.next(),b&&l.last(),INKIVE.C.DEBUG&&console.log("[svgToImage] ".concat(c,"x").concat(d,"px: ").concat(v)),e.abrupt("return",v);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{"../../../src/helpers":1098,"./dataUrl":632,"./fixPageSvg":636,"./progressNotification":641,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],644:[function(e,t,n){"use strict";function r(e,t,n,r){var o=t&&!n?e.length:e.length-1;return r?o-1:o}e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.getLineArray=function(e,t){for(var n=[],o=0;o<t;o++){var i=e.querySelectorAll("text")[o],s=i.classList.contains("eol"),a=i.classList.contains("blank"),l=i.querySelectorAll("tspan.bullets").length,c=r(i.textContent,s,a,l);n.push(c+1)}return n},n.getTextLength=r,n.getCursorLineIndex=function(e,t){var n,r,o=0;for(r=0;r<e.length;r++)if((o+=e[r])>t){n=t-(o-e[r]);break}return[r,n]},n.getStylingPart=function(e,t,n){for(var r=n.querySelectorAll("text"),o=INKIVE.Helpers.getLineArray(n,r.length),i=INKIVE.Helpers.getCursorLineIndex(o,e),s=INKIVE.Helpers.getCursorLineIndex(o,t),a=0,l=s[0];l<r.length;l++)if(r[l].classList.contains("eol")){a=l;break}var c=[],u=0;r.forEach((function(e,t){e.classList.contains("eol")&&c.push(t)}));for(var d=0;d<c.length;d++)if(i[0]<=c[d]){u=d;break}return[0===u?0:c[u-1]+1,a]},e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js")},{"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895,"core-js/modules/web.dom-collections.for-each.js":964}],645:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return new Promise((function(t){var n=setTimeout((function(){INKIVE.C.DEBUG&&console.warn("waitForPageLoad reached timeout before images loaded.\nIndicates slow network or a BUG"),t()}),e),r=(0,o.default)(document.querySelectorAll("image")).filter((function(e){return"gridpattern"!==e.parentElement.id})),i=0;if(!r.length)return c();for(var s=0;s<r.length;s++){var a=r[s].getAttribute("xlink:href");if(!a)return c();var l=new Image;l.addEventListener("load",c),l.src=a}function c(){if(i++,!r.length||i===r.length)return clearTimeout(n),t(),!1}}))};var o=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.filter.js")},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/web.timers.js":966}],646:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.array.join.js");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function(jQuery){function toCSS(jss,options){function jsonToCSS(e,t){for(var n in e&&!result[e]&&(result[e]={}),t){var r=t[n];if(r instanceof Array)for(var o=r,i=0;i<o.length;i++)addProperty(e,n,o[i]);else switch((0,_typeof2.default)(r)){case"number":case"string":addProperty(e,n,r);break;case"object":var s=n.charAt(n.length-1);if(!e||"_"!==s&&"-"!==s)jsonToCSS(makeSelectorName(e,n),r);else{var a=r;for(var l in a)for(var c=l.split(/\s*,\s*/),u=0;u<c.length;u++){var d=a[l];if(d instanceof Array)for(var p=d,h=0;h<p.length;h++)addProperty(e,n+c[u],p[h]);else addProperty(e,n+c[u],a[l])}}}}}function makePropertyName(e){return e.replace(/_/g,"-")}function makeSelectorName(e,t){for(var n=[],r=t.split(/\s*,\s*/),o=e.split(/\s*,\s*/),i=0;i<o.length;i++)for(var s=o[i],a=0;a<r.length;a++){var l=r[a];"&"===l.charAt(0)?n.push(s+l.substr(1)):n.push(s?s+" "+l:l)}return n.join(", ")}function addProperty(e,t,n){"number"!=typeof n||options.useRawValues||(n+="px");for(var r=t.split(/\s*,\s*/),o=0;o<r.length;o++){var i=makePropertyName(r[o]);result[e][i]?result[e][i].push(n):result[e][i]=[n]}}var result={};if("string"==typeof jss)try{eval("var jss = {"+jss+"}")}catch(e){return"/*\nUnable to parse JSS: "+e+"\n*/"}options.merge?(jQuery.injectCSS.jssCache||(jQuery.injectCSS.jssCache={}),jss=jQuery.extend(!0,jQuery.injectCSS.jssCache,jss)):delete jQuery.injectCSS.jssCache,jsonToCSS("",jss);var ret="";for(var a in result){var css=result[a];for(var i in ret+=a+" {\n",css)for(var values=css[i],j=0;j<values.length;j++)ret+="\t"+i+": "+values[j]+";\n";ret+="}\n"}return ret}jQuery.injectCSS=function(e,t){(t=jQuery.extend({},jQuery.injectCSS.defaults,t)).media=t.media||"all",t.truncateFirst=t.truncateFirst||t.merge;var n=t.container&&jQuery(t.container)||jQuery("#"+t.containerName);n.length||(n=jQuery("<style></style>").appendTo("head").attr({media:t.media,id:t.containerName,type:"text/css"}));var r=n[0],o=void 0!==r.styleSheet&&void 0!==r.styleSheet.cssText,i="";return t.truncateFirst||(i+=o?r.styleSheet.cssText:n.text()),i+=toCSS(e,t),o?r.styleSheet.cssText=i:n.text(i),n},jQuery.injectCSS.defaults={truncateFirst:!1,container:null,containerName:"injectCSSContainer",useRawValues:!1,merge:!1}}(jQuery)},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.join.js":868,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926}],647:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.string.trim.js");var r,o={};function i(){r.updateFriendScroll(),function(){var e=_.debounce((function(){var e=r.$searchInput.tagsinput("input").val().trim();e.length>2&&t({q:e},(function(t){var r=_.filter(t,s);_.each(r,l),n(!1,e)}))}),800),t=_.partial(r.api,"search/user","GET");function n(e,t){t=void 0===t?r.$searchInput.tagsinput("input").val().trim():t,r.filter(t,e)}r.$searchInput.tagsinput({itemValue:"id",itemText:"name"}),r.$searchInput.tagsinput("input").keyup((function(t){r.$searchInput.tagsinput("input").val().trim();13==(t.keyCode?t.keyCode:t.which)?r.enter():(e(),n(!0))}))}()}function s(e){return!o[a(e)]}function a(e){return e.social_user_id>0?e.social_user_id:e.user_id}function l(e,t){var n=a(e),i=e.profile_picture?e.profile_picture.replace("344x344","42x42"):r.noProfilePicture;o[n]={user_id:n,user_name:e.username,profile_pic:i},"string"==typeof t&&(o[n].source=t),r.appendUser(o[n])}t.exports=function(e){r=_.extend({$searchInput:$("<input>"),api:$.noop,baseUrl:"",friendsListParameters:{},facebookToken:FB.getAccessToken(),noProfilePicture:"",enter:$.noop,filter:$.noop,appendUser:$.noop,updateFriendScroll:$.noop},e);var t,n,a=!_.isEmpty(o);a&&(_.each(o,r.appendUser),_.defer(i)),a||(t=[{load:function(){$.post(r.baseUrl+"friends/list",r.friendsListParameters,(function(e){var t=$.parseJSON(e);t.result&&_.each(_.filter(t.result,s),l),n()}))}},{load:function(){var e="/me/friends?fields=id,name,installed,picture.redirect(false).type(square)";e+="&access_token="+r.facebookToken,FB.api(e,(function(e){e&&!e.error&&_.each(e.data,(function(e){var t={username:e.name,social_user_id:e.id,profile_picture:e.picture.data.url};s(t)&&l(t,"Facebook")})),n()}))}}],n=_.after(t.length,i),_.invoke(t,"load"))}},{"core-js/modules/es.array.filter.js":857,"core-js/modules/es.function.name.js":884,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.trim.js":929}],648:[function(e,t,n){t.exports=function(e){switch(e){case"tool.library.video":return"tool.library.videos";case"popupmenu.tooltip.text_align_left":return"popupmenu.tooltip.align_left";case"popupmenu.tooltip.text_align_right":return"popupmenu.tooltip.align_right";case"popupmenu.tooltip.background_opacity":return"popupmenu.tooltip.opacity";case"tool.restrictions.template.permission.icon_deletion":case"tool.restrictions.template.permission.image_deletion":case"tool.restrictions.template.permission.logo_deletion":case"tool.restrictions.template.permission.text_deletion":case"tool.restrictions.template.permission.vector_deletion":case"tool.restrictions.template.permission.video_deletion":return"editor.delete";case"tool.restrictions.template.permission.icon_position":case"tool.restrictions.template.permission.image_position":case"tool.restrictions.template.permission.logo_position":case"tool.restrictions.template.permission.text_position":case"tool.restrictions.template.permission.vector_position":case"tool.restrictions.template.permission.video_position":return"editor.move";case"tool.restrictions.template.permission.image_duplication":case"tool.restrictions.template.permission.logo_duplication":case"tool.restrictions.template.permission.text_duplication":case"tool.restrictions.template.permission.vector_duplication":case"tool.restrictions.template.permission.icon_duplication":case"tool.restrictions.template.permission.video_duplication":return"editor.duplicate";case"tool.restrictions.template.permission.icon_opacity":case"tool.restrictions.template.permission.image_opacity":case"tool.restrictions.template.permission.logo_opacity":case"tool.restrictions.template.permission.text_opacity":case"tool.restrictions.template.permission.vector_opacity":return"tool.restrictions.template.permission.common.opacity";case"tool.restrictions.template.permission.icon_rotation":case"tool.restrictions.template.permission.video_rotation":case"tool.restrictions.template.permission.image_rotation":case"tool.restrictions.template.permission.logo_rotation":case"tool.restrictions.template.permission.text_rotation":case"tool.restrictions.template.permission.vector_rotation":return"tool.restrictions.template.permission.common.rotate";case"tool.restrictions.template.permission.icon_size":case"tool.restrictions.template.permission.logo_size":case"tool.restrictions.template.permission.vector_size":case"tool.restrictions.template.permission.video_size":return"tool.restrictions.template.permission.common.size";case"tool.restrictions.template.permission.icon_z_index":case"tool.restrictions.template.permission.image_z_index":case"tool.restrictions.template.permission.logo_z_index":case"tool.restrictions.template.permission.text_z_index":case"tool.restrictions.template.permission.vector_z_index":return"tool.restrictions.template.permission.common.z_index";case"tool.restrictions.template.permission.icon_stroke":case"tool.restrictions.template.permission.logo_stroke":return"tool.restrictions.template.permission.common.stroke";case"tool.restrictions.template.permission.icon_colour":case"tool.restrictions.template.permission.text_colour":case"tool.restrictions.template.permission.vector_colour":return"tool.restrictions.template.permission.common.colour";case"tool.restrictions.template.permission.image_content":return"tool.restrictions.template.permission.image_replace";case"tool.restrictions.template.permission.function_download_file":return"editor.download_file";case"tool.restrictions.template.permission.function_draw":return"editor.draw";case"tool.restrictions.template.permission.logo_colour":return"tool.restrictions.template.permission.common.fill_colour";case"tool.restricted.add.function_draw":return"editor.drawing";case"tool.restricted.add.image_add":return"editor.images";case"tool.restricted.add.logo_add":return"editor.logos";case"tool.restricted.do.function_download_file":return"editor.download_file";case"shapes.names.basic.circle":return"editor.circle";case"shapes.names.basic.ellipse":return"editor.ellipse";case"shapes.names.basic.line":return"editor.line";case"shapes.names.basic.rectangle":return"editor.rectangle";case"shapes.names.basic.square":return"editor.square";case"shapes.names.web.raph_download":return"general.download";case"shapes.names.web.raph_flickr":return"social.flickr";case"shapes.names.web.raph_home":return"general.home";case"shapes.names.web.raph_linkedin":return"social.linkedin";case"shapes.names.web.raph_pen":return"editor.pen";case"shapes.names.web.raph_search":return"general.search";case"shapes.names.web.raph_settings":return"general.settings";case"shapes.names.web.raph_tag":return"social.tag";case"shapes.names.web.raph_twitter":return"social.twitter";case"shapes.names.web.raph_undo":return"editor.undo";case"shapes.names.web.raph_unlock":return"editor.unlock";case"shapes.names.web.raph_view":return"editor.view"}return e}},{}],649:[function(e,t,n){var r,o=e("../js/editor/utils/cookie-storage"),i={editor:e("./exceptions/editor")};function s(e,t,n,r){this.baseUrl=t,this.version=r,this.namespace=e,this.translationsPath=n,this.setLocale(o.get("locale")||"en"),this.initHandlebarsHelper()}s.prototype.load=function(e){if(r)return r.promise();r=$.Deferred(),e&&this.setLocale(e);var t=this.version?"/assets/build/"+this.version+"/":this.baseUrl+"assets/build/";return t+=this.translationsPath+this.namespace+"."+this.locale+".json?"+this.version,$.ajax({url:t,type:"GET",beforeSend:function(e){e.setRequestHeader("X-Requested-With",{toString:function(){return""}})}}).done(_.bind((function(e){this.data=e,"string"==typeof e&&(this.data=JSON.parse(e)),r.resolve()}),this)).fail((function(){r.reject()})),r.promise()},s.prototype.setLocale=function(e){this.locale=e,o.set("locale",e)},s.prototype.lookup=function(e){return e=e.trim().toLowerCase(),function t(n,r){var o;return r=r||"",_.any(n,(function(t,n){if(_.isString(t)&&e==t.trim().toLowerCase())return o=(r?r+".":"")+n})),o||_.any(n,(function(e,n){if(_.isObject(e))return o=t(e,(r?r+".":"")+n)})),o}(this.data)},s.prototype.translate=function(t,n){if(t){var r,o,i=this._map(t),s=this.data;for(i=i?i.split("."):[];i.length&&s;)s=s[i.shift()];return s?n||s.indexOf("{{#")>-1?function(t,n){var r=e("handlebars"),o=e("hbsfy/runtime");r.helpers=o.helpers;var i=r.compile(t);return n=_.isArray(n)?function(e,t){var n={},r=function(e,t){var n,r=[];for(;n=t.exec(e);)r.push(n[1]);return r}(t,/{{{?[\s]*([^#|}|\/|\s]+)[\s]*}?}}/g);for(;r.length&&e.length;)n[r.pop()]=e.pop();return n}(n,t):n,i(n)}(s,n):s:(r=BASE_URL||INKIVE.C.BASE_URL,o=r.indexOf(".xyz")>-1,0!==t.indexOf("popupmenu")&&0!==t.indexOf("advice.more")&&0!==t.indexOf("advice.title")&&o&&(window.translationsLogs||(window.translationsLogs={}),window.translationsLogs[t]||(window.translationsLogs[t]=new Date,$.post(r+"api/errortrack/log",{data:"[TranslateHelper] "+t,is_critical:!0}))),t)}},s.prototype.initHandlebarsHelper=function(){var t=this,n=e("hbsfy/runtime"),r=e("handlebars");n.registerHelper("t",(function(e){var n=_.rest(_.initial(arguments));return t.translate(e,n.length&&n)})),r.registerHelper("t",(function(e){var n=_.rest(_.initial(arguments));return t.translate(e,n.length&&n)}))},s.prototype._map=function(e){return i[this.namespace]?i[this.namespace](e):e},t.exports=s},{"../js/editor/utils/cookie-storage":612,"./exceptions/editor":648,handlebars:1012,"hbsfy/runtime":1024}],650:[function(e,t,n){t.exports={icons:{url:"https://s3.amazonaws.com/assets.webrand.com/icons/v36/sprites/symbol/sprite.svg",version:35}}},{}],651:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},{}],652:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],653:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return r(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":651}],654:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],655:[function(e,t,n){function r(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}t.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,l,"next",e)}function l(e){r(s,o,i,a,l,"throw",e)}a(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],656:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],657:[function(e,t,n){var r=e("./setPrototypeOf.js"),o=e("./isNativeReflectConstruct.js");function i(e,n,s){return o()?(t.exports=i=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},t.exports.default=t.exports,t.exports.__esModule=!0),i.apply(null,arguments)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},{"./isNativeReflectConstruct.js":665,"./setPrototypeOf.js":673}],658:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],659:[function(e,t,n){t.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],660:[function(e,t,n){var r=e("./superPropBase.js");function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=o=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),o(e,n,i||e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},{"./superPropBase.js":675}],661:[function(e,t,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},{}],662:[function(e,t,n){var r=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":673}],663:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],664:[function(e,t,n){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],665:[function(e,t,n){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],666:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{}],667:[function(e,t,n){t.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],668:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],669:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],670:[function(e,t,n){var r=e("./objectWithoutPropertiesLoose.js");t.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},t.exports.default=t.exports,t.exports.__esModule=!0},{"./objectWithoutPropertiesLoose.js":671}],671:[function(e,t,n){t.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},t.exports.default=t.exports,t.exports.__esModule=!0},{}],672:[function(e,t,n){var r=e("@babel/runtime/helpers/typeof").default,o=e("./assertThisInitialized.js");t.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t},t.exports.default=t.exports,t.exports.__esModule=!0},{"./assertThisInitialized.js":654,"@babel/runtime/helpers/typeof":679}],673:[function(e,t,n){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t.exports.default=t.exports,t.exports.__esModule=!0,r(e,n)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},{}],674:[function(e,t,n){var r=e("./arrayWithHoles.js"),o=e("./iterableToArrayLimit.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");t.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithHoles.js":652,"./iterableToArrayLimit.js":667,"./nonIterableRest.js":668,"./unsupportedIterableToArray.js":680}],675:[function(e,t,n){var r=e("./getPrototypeOf.js");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},t.exports.default=t.exports,t.exports.__esModule=!0},{"./getPrototypeOf.js":661}],676:[function(e,t,n){t.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.exports.default=t.exports,t.exports.__esModule=!0},{}],677:[function(e,t,n){var r=e("./arrayWithHoles.js"),o=e("./iterableToArray.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");t.exports=function(e){return r(e)||o(e)||i(e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithHoles.js":652,"./iterableToArray.js":666,"./nonIterableRest.js":668,"./unsupportedIterableToArray.js":680}],678:[function(e,t,n){var r=e("./arrayWithoutHoles.js"),o=e("./iterableToArray.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return r(e)||o(e)||i(e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithoutHoles.js":653,"./iterableToArray.js":666,"./nonIterableSpread.js":669,"./unsupportedIterableToArray.js":680}],679:[function(e,t,n){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=r=function(e){return typeof e},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},{}],680:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":651}],681:[function(e,t,n){var r=e("./getPrototypeOf.js"),o=e("./setPrototypeOf.js"),i=e("./isNativeFunction.js"),s=e("./construct.js");function a(e){var n="function"==typeof Map?new Map:void 0;return t.exports=a=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0,a(e)}t.exports=a,t.exports.default=t.exports,t.exports.__esModule=!0},{"./construct.js":657,"./getPrototypeOf.js":661,"./isNativeFunction.js":664,"./setPrototypeOf.js":673}],682:[function(e,t,n){t.exports=e("regenerator-runtime")},{"regenerator-runtime":1046}],683:[function(e,t,n){t.exports={_args:[["@ffmpeg/ffmpeg@0.10.1","/home/jenkins/workspace/editor-build/desygner"]],_from:"@ffmpeg/ffmpeg@0.10.1",_id:"@ffmpeg/ffmpeg@0.10.1",_inBundle:!1,_integrity:"sha512-ChQkH7Rh57hmVo1LhfQFibWX/xqneolJKSwItwZdKPcLZuKigtYAYDIvB55pDfP17VtR1R77SxgkB2/UApB+Og==",_location:"/@ffmpeg/ffmpeg",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@ffmpeg/ffmpeg@0.10.1",name:"@ffmpeg/ffmpeg",escapedName:"@ffmpeg%2fffmpeg",scope:"@ffmpeg",rawSpec:"0.10.1",saveSpec:null,fetchSpec:"0.10.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.10.1.tgz",_spec:"0.10.1",_where:"/home/jenkins/workspace/editor-build/desygner",author:{name:"Jerome Wu",email:"jeromewus@gmail.com"},browser:{"./src/node/index.js":"./src/browser/index.js"},bugs:{url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},dependencies:{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},description:"FFmpeg WebAssembly version",devDependencies:{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},directories:{example:"examples"},engines:{node:">=12.16.1"},homepage:"https://github.com/ffmpegwasm/ffmpeg.wasm#readme",keywords:["ffmpeg","WebAssembly","video"],license:"MIT",main:"src/index.js",name:"@ffmpeg/ffmpeg",repository:{type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},scripts:{build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",lint:"eslint src",prepublishOnly:"npm run build",start:"node scripts/server.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js"},types:"src/index.d.ts",version:"0.10.1"}},{}],684:[function(e,t,n){(function(n){(function(){"use strict";var r=e("resolve-url"),o=e("../../package.json").devDependencies;t.exports={corePath:"development"===n.env.NODE_ENV?r("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):"https://unpkg.com/@ffmpeg/core@".concat(o["@ffmpeg/core"].substring(1),"/dist/ffmpeg-core.js")}}).call(this)}).call(this,e("_process"))},{"../../package.json":683,_process:1045,"resolve-url":1047}],685:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js");var s=e("resolve-url"),a=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){var t=e.target.error.code;n(Error("File could not be read! Code=".concat(t)))},r.readAsArrayBuffer(e)}))};t.exports=function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,void 0!==t){e.next=3;break}return e.abrupt("return",new Uint8Array);case 3:if("string"!=typeof t){e.next=16;break}if(!/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)){e.next=8;break}n=atob(t.split(",")[1]).split("").map((function(e){return e.charCodeAt(0)})),e.next=14;break;case 8:return e.next=10,fetch(s(t));case 10:return r=e.sent,e.next=13,r.arrayBuffer();case 13:n=e.sent;case 14:e.next=20;break;case 16:if(!(t instanceof File||t instanceof Blob)){e.next=20;break}return e.next=19,a(t);case 19:n=e.sent;case 20:return e.abrupt("return",new Uint8Array(n));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958,"resolve-url":1047}],686:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=e("../utils/log").log,a=function(){var e=(0,i.default)(o.default.mark((function e(t,n){var r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("info","fetch ".concat(t)),e.next=3,fetch(t);case 3:return e.next=5,e.sent.arrayBuffer();case 5:return r=e.sent,s("info","".concat(t," file size = ").concat(r.byteLength," bytes")),i=new Blob([r],{type:n}),a=URL.createObjectURL(i),s("info","".concat(t," blob URL = ").concat(a)),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.exports=function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r,i,l,c,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.corePath,r=t.baseURI,t.worker,"string"==typeof n){e.next=3;break}throw Error("corePath should be a string!");case 3:return i=r?new URL(n,r).href:n,e.next=6,a(i,"application/javascript");case 6:return l=e.sent,e.next=9,a(i.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm");case 9:return c=e.sent,e.next=12,a(i.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");case 12:if(u=e.sent,"undefined"!=typeof createFFmpegCore){e.next=15;break}return e.abrupt("return",new Promise((function(e){var t=self.fetch;self.fetch=function(e,n){return e=r?new URL(e,r):e,t(e,n)},importScripts(l),s("info","ffmpeg-core.js script loaded"),e({createFFmpegCore:createFFmpegCore,corePath:l,wasmPath:c,workerPath:u})})));case 15:return s("info","ffmpeg-core.js script is loaded already"),e.abrupt("return",Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:l,wasmPath:c,workerPath:u}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{"../utils/log":691,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.replace.js":924,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],687:[function(e,t,n){"use strict";var r=e("./defaultOptions"),o=e("./getCreateFFmpegCore"),i=e("./fetchFile");t.exports={defaultOptions:r,getCreateFFmpegCore:o,fetchFile:i}},{"./defaultOptions":684,"./fetchFile":685,"./getCreateFFmpegCore":686}],688:[function(e,t,n){"use strict";t.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:function(){},progress:function(){},corePath:""}}},{}],689:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.string.ends-with.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.map.js");var i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("@babel/runtime/helpers/objectWithoutProperties")),c=["log","logger","progress"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=e("./config"),h=p.defaultArgs,m=p.baseOptions,f=e("./utils/log"),g=f.setLogging,b=f.setCustomLogger,v=f.log,y=e("./utils/parseProgress"),j=e("./utils/parseArgs"),_=e("./node"),w=_.defaultOptions,I=_.getCreateFFmpegCore,x=e("../package.json").version,E=Error("ffmpeg.wasm is not ready, make sure you have completed load().");t.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d(d(d({},m),w),e),n=t.log,r=t.logger,a=t.progress,u=(0,l.default)(t,c),p=null,f=null,_=null,k=!1,C=a,S=function(e){"FFMPEG_END"===e&&null!==_&&(_(),_=null,k=!1)},T=function(e){var t=e.type,n=e.message;v(t,n),y(n,C),S(n)},N=function(){var e=(0,s.default)(o.default.mark((function e(){var t,n,r,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v("info","load ffmpeg-core"),null!==p){e.next=17;break}return v("info","loading ffmpeg-core"),e.next=5,I(u);case 5:return t=e.sent,n=t.createFFmpegCore,r=t.corePath,i=t.workerPath,s=t.wasmPath,e.next=12,n({mainScriptUrlOrBlob:r,printErr:function(e){return T({type:"fferr",message:e})},print:function(e){return T({type:"ffout",message:e})},locateFile:function(e,t){return void 0!==s&&e.endsWith("ffmpeg-core.wasm")?s:void 0!==i&&e.endsWith("ffmpeg-core.worker.js")?i:t+e}});case 12:p=e.sent,f=p.cwrap(u.mainName,"number",["number","number"]),v("info","ffmpeg-core loaded"),e.next=18;break;case 17:throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){return null!==p},O=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(v("info","run ffmpeg command: ".concat(t.join(" "))),null===p)throw E;if(k)throw Error("ffmpeg.wasm can only run one command at a time");return k=!0,new Promise((function(e){var n=[].concat((0,i.default)(h),t).filter((function(e){return 0!==e.length}));_=e,f.apply(void 0,(0,i.default)(j(p,n)))}))},V=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(v("info","run FS.".concat(e," ").concat(n.map((function(e){return"string"==typeof e?e:"<".concat(e.length," bytes binary file>")})).join(" "))),null===p)throw E;var o=null;try{var i;o=(i=p.FS)[e].apply(i,n)}catch(t){throw"readdir"===e?Error("ffmpeg.FS('readdir', '".concat(n[0],"') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')")):"readFile"===e?Error("ffmpeg.FS('readFile', '".concat(n[0],"') error. Check if the path exists")):Error("Oops, something went wrong in FS operation.")}return o},P=function(){if(null===p)throw E;k=!1;try{p.exit(1)}catch(e){console.log("catch core exit error",e)}p=null,f=null,_=null},K=function(e){C=e},D=function(e){b(e)};return g(n),b(r),v("info","use ffmpeg.wasm v".concat(x)),{setProgress:K,setLogger:D,setLogging:g,load:N,isLoaded:A,run:O,exit:P,FS:V}}},{"../package.json":683,"./config":688,"./node":687,"./utils/log":691,"./utils/parseArgs":692,"./utils/parseProgress":693,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/objectWithoutProperties":670,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.string.ends-with.js":914,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],690:[function(e,t,n){"use strict";e("regenerator-runtime/runtime");var r=e("./createFFmpeg"),o=e("./node").fetchFile;t.exports={createFFmpeg:r,fetchFile:o}},{"./createFFmpeg":689,"./node":687,"regenerator-runtime/runtime":1046}],691:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat.js");var r=!1,o=function(){};t.exports={logging:r,setLogging:function(e){r=e},setCustomLogger:function(e){o=e},log:function(e,t){o({type:e,message:t}),r&&console.log("[".concat(e,"] ").concat(t))}}},{"core-js/modules/es.array.concat.js":854}],692:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.typed-array.uint32-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),t.exports=function(e,t){var n=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((function(t,r){var o=e._malloc(t.length+1);e.writeAsciiToMemory(t,o),e.setValue(n+Uint32Array.BYTES_PER_ELEMENT*r,o,"i32")})),[t.length,n]}},{"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint32-array.js":957,"core-js/modules/web.dom-collections.for-each.js":964}],693:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.string.starts-with.js");var o=r(e("@babel/runtime/helpers/slicedToArray")),i=0,s=0,a=function(e){var t=e.split(":"),n=(0,o.default)(t,3),r=n[0],i=n[1],s=n[2];return 60*parseFloat(r)*60+60*parseFloat(i)+parseFloat(s)};t.exports=function(e,t){if("string"==typeof e)if(e.startsWith("  Duration")){var n=e.split(", ")[0].split(": ")[1],r=a(n);t({duration:r,ratio:s}),(0===i||i>r)&&(i=r)}else if(e.startsWith("frame")||e.startsWith("size")){var o=e.split("time=")[1].split(" ")[0],l=a(o);t({ratio:s=l/i,time:l})}else e.startsWith("video:")&&(t({ratio:1}),i=0)}},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.starts-with.js":927}],694:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.typed-array.float32-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.some.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.map.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.splice.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.reverse.js");var r={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},o={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},i=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],s={CSS:{},springs:{}};function a(e,t,n){return Math.min(Math.max(e,t),n)}function l(e,t){return e.indexOf(t)>-1}function c(e,t){return e.apply(null,t)}var u={arr:function(e){return Array.isArray(e)},obj:function(e){return l(Object.prototype.toString.call(e),"Object")},pth:function(e){return u.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||u.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return u.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return u.hex(e)||u.rgb(e)||u.hsl(e)},key:function(e){return!r.hasOwnProperty(e)&&!o.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function d(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function p(e,t){var n=d(e),r=a(u.und(n[0])?1:n[0],.1,100),o=a(u.und(n[1])?100:n[1],.1,100),i=a(u.und(n[2])?10:n[2],.1,100),l=a(u.und(n[3])?0:n[3],.1,100),c=Math.sqrt(o/r),p=i/(2*Math.sqrt(o*r)),h=p<1?c*Math.sqrt(1-p*p):0,m=p<1?(p*c-l)/h:-l+c;function f(e){var n=t?t*e/1e3:e;return n=p<1?Math.exp(-n*p*c)*(1*Math.cos(h*n)+m*Math.sin(h*n)):(1+m*n)*Math.exp(-n*c),0===e||1===e?e:1-n}return t?f:function(){var t=s.springs[e];if(t)return t;for(var n=0,r=0;;)if(1===f(n+=1/6)){if(++r>=16)break}else r=0;var o=n*(1/6)*1e3;return s.springs[e]=o,o}}function h(e){return void 0===e&&(e=10),function(t){return Math.ceil(a(t,1e-6,1)*e)*(1/e)}}var m,f,g=function(){function e(e,t){return 1-3*t+3*e}function t(e,t){return 3*t-6*e}function n(e){return 3*e}function r(r,o,i){return((e(o,i)*r+t(o,i))*r+n(o))*r}function o(r,o,i){return 3*e(o,i)*r*r+2*t(o,i)*r+n(o)}return function(e,t,n,i){if(0<=e&&e<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(e!==t||n!==i)for(var a=0;a<11;++a)s[a]=r(.1*a,e,n);return function(o){return e===t&&n===i||0===o||1===o?o:r(l(o),t,i)}}function l(t){for(var i=0,a=1;10!==a&&s[a]<=t;++a)i+=.1;--a;var l=i+.1*((t-s[a])/(s[a+1]-s[a])),c=o(l,e,n);return c>=.001?function(e,t,n,i){for(var s=0;s<4;++s){var a=o(t,n,i);if(0===a)return t;t-=(r(t,n,i)-e)/a}return t}(t,l,e,n):0===c?l:function(e,t,n,o,i){var s,a,l=0;do{(s=r(a=t+(n-t)/2,o,i)-e)>0?n=a:t=a}while(Math.abs(s)>1e-7&&++l<10);return a}(t,i,i+.1,e,n)}}}(),b=(m={linear:function(){return function(e){return e}}},f={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=a(e,1,10),r=a(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){f[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(f).forEach((function(e){var t=f[e];m["easeIn"+e]=t,m["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},m["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}},m["easeOutIn"+e]=function(e,n){return function(r){return r<.5?(1-t(e,n)(1-2*r))/2:(t(e,n)(2*r-1)+1)/2}}})),m);function v(e,t){if(u.fnc(e))return e;var n=e.split("(")[0],r=b[n],o=d(e);switch(n){case"spring":return p(e,t);case"cubicBezier":return c(g,o);case"steps":return c(h,o);default:return c(r,o)}}function y(e){try{return document.querySelectorAll(e)}catch(e){return}}function j(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in e){var s=e[i];t.call(r,s,i,e)&&o.push(s)}return o}function _(e){return e.reduce((function(e,t){return e.concat(u.arr(t)?_(t):t)}),[])}function w(e){return u.arr(e)?e:(u.str(e)&&(e=y(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function I(e,t){return e.some((function(e){return e===t}))}function x(e){var t={};for(var n in e)t[n]=e[n];return t}function E(e,t){var n=x(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function k(e,t){var n=x(e);for(var r in t)n[r]=u.und(e[r])?t[r]:e[r];return n}function C(e){return u.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:u.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):u.hsl(e)?function(e){var t,n,r,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,s=parseInt(o[2],10)/100,a=parseInt(o[3],10)/100,l=o[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==s)t=n=r=a;else{var u=a<.5?a*(1+s):a+s-a*s,d=2*a-u;t=c(d,u,i+1/3),n=c(d,u,i),r=c(d,u,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+l+")"}(e):void 0;var t,n}function S(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function T(e,t){return u.fnc(e)?e(t.target,t.id,t.total):e}function N(e,t){return e.getAttribute(t)}function A(e,t,n){if(I([n,"deg","rad","turn"],S(t)))return t;var r=s.CSS[t+n];if(!u.und(r))return r;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+n;var a=100/o.offsetWidth;i.removeChild(o);var l=a*parseFloat(t);return s.CSS[t+n]=l,l}function O(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?A(e,o,n):o}}function V(e,t){return u.dom(e)&&!u.inp(e)&&(!u.nil(N(e,t))||u.svg(e)&&e[t])?"attribute":u.dom(e)&&I(i,t)?"transform":u.dom(e)&&"transform"!==t&&O(e,t)?"css":null!=e[t]?"object":void 0}function P(e){if(u.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;t=r.exec(n);)o.set(t[1],t[2]);return o}}function K(e,t,n,r){var o=l(t,"scale")?1:0+function(e){return l(e,"translate")||"perspective"===e?"px":l(e,"rotate")||l(e,"skew")?"deg":void 0}(t),i=P(e).get(t)||o;return n&&(n.transforms.list.set(t,i),n.transforms.last=t),r?A(e,i,r):i}function D(e,t,n,r){switch(V(e,t)){case"transform":return K(e,t,r,n);case"css":return O(e,t,n);case"attribute":return N(e,t);default:return e[t]||0}}function L(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=S(e)||0,o=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return o+i+r;case"-":return o-i+r;case"*":return o*i+r}}function R(e,t){if(u.col(e))return C(e);if(/\s/g.test(e))return e;var n=S(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function F(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function M(e){for(var t,n=e.points,r=0,o=0;o<n.numberOfItems;o++){var i=n.getItem(o);o>0&&(r+=F(t,i)),t=i}return r}function $(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*N(e,"r")}(e);case"rect":return function(e){return 2*N(e,"width")+2*N(e,"height")}(e);case"line":return function(e){return F({x:N(e,"x1"),y:N(e,"y1")},{x:N(e,"x2"),y:N(e,"y2")})}(e);case"polyline":return M(e);case"polygon":return function(e){var t=e.points;return M(e)+F(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function B(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;u.svg(t)&&u.svg(t.parentNode);)t=t.parentNode;return t}(e),o=r.getBoundingClientRect(),i=N(r,"viewBox"),s=o.width,a=o.height,l=n.viewBox||(i?i.split(" "):[0,0,s,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s,h:a,vW:l[2],vH:l[3]}}function z(e,t,n){function r(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var o=B(e.el,e.svg),i=r(),s=r(-1),a=r(1),l=n?1:o.w/o.vW,c=n?1:o.h/o.vH;switch(e.property){case"x":return(i.x-o.x)*l;case"y":return(i.y-o.y)*c;case"angle":return 180*Math.atan2(a.y-s.y,a.x-s.x)/Math.PI}}function U(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=R(u.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:u.str(e)||t?r.split(n):[]}}function H(e){return j(e?_(u.arr(e)?e.map(w):w(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function q(e){var t=H(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:P(e)}}}))}function G(e,t){var n=x(t);if(/^spring/.test(n.easing)&&(n.duration=p(n.easing)),u.arr(e)){var r=e.length;2===r&&!u.obj(e[0])?e={value:e}:u.fnc(t.duration)||(n.duration=t.duration/r)}var o=u.arr(e)?e:[e];return o.map((function(e,n){var r=u.obj(e)&&!u.pth(e)?e:{value:e};return u.und(r.delay)&&(r.delay=n?0:t.delay),u.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r})).map((function(e){return k(e,n)}))}function W(e,t){var n=[],r=t.keyframes;for(var o in r&&(t=k(function(e){for(var t=j(_(e.map((function(e){return Object.keys(e)}))),(function(e){return u.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var o=t[r];n[o]=e.map((function(e){var t={};for(var n in e)u.key(n)?n==o&&(t.value=e[n]):t[n]=e[n];return t}))},o=0;o<t.length;o++)r(o);return n}(r),t)),t)u.key(o)&&n.push({name:o,tweens:G(t[o],e)});return n}function Y(e,t){var n;return e.tweens.map((function(r){var o=function(e,t){var n={};for(var r in e){var o=T(e[r],t);u.arr(o)&&1===(o=o.map((function(e){return T(e,t)}))).length&&(o=o[0]),n[r]=o}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),i=o.value,s=u.arr(i)?i[1]:i,a=S(s),l=D(t.target,e.name,a,t),c=n?n.to.original:l,d=u.arr(i)?i[0]:c,p=S(d)||S(l),h=a||p;return u.und(s)&&(s=c),o.from=U(d,h),o.to=U(L(s,d),h),o.start=n?n.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=v(o.easing,o.duration),o.isPath=u.pth(i),o.isPathTargetInsideSVG=o.isPath&&u.svg(t.target),o.isColor=u.col(o.from.original),o.isColor&&(o.round=1),n=o,o}))}var X={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){if(r.list.set(t,n),t===r.last||o){var i="";r.list.forEach((function(e,t){i+=t+"("+e+") "})),e.style.transform=i}}};function Z(e,t){q(e).forEach((function(e){for(var n in t){var r=T(t[n],e),o=e.target,i=S(r),s=D(o,n,i,e),a=L(R(r,i||S(s)),s),l=V(o,n);X[l](o,n,a,e.transforms,!0)}}))}function J(e,t){return j(_(e.map((function(e){return t.map((function(t){return function(e,t){var n=V(e.target,t.name);if(n){var r=Y(t,e),o=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:o.end,delay:r[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!u.und(e)}))}function Q(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,o.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,o.endDelay=n?o.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,o}var ee=0;var te=[],ne=function(){var e;function t(n){for(var r=te.length,o=0;o<r;){var i=te[o];i.paused?(te.splice(o,1),r--):(i.tick(n),o++)}e=o>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){oe.suspendWhenDocumentHidden&&(re()?e=cancelAnimationFrame(e):(te.forEach((function(e){return e._onDocumentVisibility()})),ne()))})),function(){e||re()&&oe.suspendWhenDocumentHidden||!(te.length>0)||(e=requestAnimationFrame(t))}}();function re(){return!!document&&document.hidden}function oe(e){void 0===e&&(e={});var t,n=0,i=0,s=0,l=0,c=null;function u(e){var t=window.Promise&&new Promise((function(e){return c=e}));return e.finished=t,t}var d=function(e){var t=E(r,e),n=E(o,e),i=W(n,e),s=q(e.targets),a=J(s,i),l=Q(a,n),c=ee;return ee++,k(t,{id:c,children:[],animatables:s,animations:a,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}(e);u(d);function p(){var e=d.direction;"alternate"!==e&&(d.direction="normal"!==e?"normal":"reverse"),d.reversed=!d.reversed,t.forEach((function(e){return e.reversed=d.reversed}))}function h(e){return d.reversed?d.duration-e:e}function m(){n=0,i=h(d.currentTime)*(1/oe.speed)}function f(e,t){t&&t.seek(e-t.timelineOffset)}function g(e){for(var t=0,n=d.animations,r=n.length;t<r;){var o=n[t],i=o.animatable,s=o.tweens,l=s.length-1,c=s[l];l&&(c=j(s,(function(t){return e<t.end}))[0]||c);for(var u=a(e-c.start-c.delay,0,c.duration)/c.duration,p=isNaN(u)?1:c.easing(u),h=c.to.strings,m=c.round,f=[],g=c.to.numbers.length,b=void 0,v=0;v<g;v++){var y=void 0,_=c.to.numbers[v],w=c.from.numbers[v]||0;y=c.isPath?z(c.value,p*_,c.isPathTargetInsideSVG):w+p*(_-w),m&&(c.isColor&&v>2||(y=Math.round(y*m)/m)),f.push(y)}var I=h.length;if(I){b=h[0];for(var x=0;x<I;x++){h[x];var E=h[x+1],k=f[x];isNaN(k)||(b+=E?k+E:k+" ")}}else b=f[0];X[o.type](i.target,o.property,b,i.transforms),o.currentValue=b,t++}}function b(e){d[e]&&!d.passThrough&&d[e](d)}function v(e){var r=d.duration,o=d.delay,m=r-d.endDelay,v=h(e);d.progress=a(v/r*100,0,100),d.reversePlayback=v<d.currentTime,t&&function(e){if(d.reversePlayback)for(var n=l;n--;)f(e,t[n]);else for(var r=0;r<l;r++)f(e,t[r])}(v),!d.began&&d.currentTime>0&&(d.began=!0,b("begin")),!d.loopBegan&&d.currentTime>0&&(d.loopBegan=!0,b("loopBegin")),v<=o&&0!==d.currentTime&&g(0),(v>=m&&d.currentTime!==r||!r)&&g(r),v>o&&v<m?(d.changeBegan||(d.changeBegan=!0,d.changeCompleted=!1,b("changeBegin")),b("change"),g(v)):d.changeBegan&&(d.changeCompleted=!0,d.changeBegan=!1,b("changeComplete")),d.currentTime=a(v,0,r),d.began&&b("update"),e>=r&&(i=0,d.remaining&&!0!==d.remaining&&d.remaining--,d.remaining?(n=s,b("loopComplete"),d.loopBegan=!1,"alternate"===d.direction&&p()):(d.paused=!0,d.completed||(d.completed=!0,b("loopComplete"),b("complete"),!d.passThrough&&"Promise"in window&&(c(),u(d)))))}return d.reset=function(){var e=d.direction;d.passThrough=!1,d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.loopBegan=!1,d.changeBegan=!1,d.completed=!1,d.changeCompleted=!1,d.reversePlayback=!1,d.reversed="reverse"===e,d.remaining=d.loop,t=d.children;for(var n=l=t.length;n--;)d.children[n].reset();(d.reversed&&!0!==d.loop||"alternate"===e&&1===d.loop)&&d.remaining++,g(d.reversed?d.duration:0)},d._onDocumentVisibility=m,d.set=function(e,t){return Z(e,t),d},d.tick=function(e){s=e,n||(n=s),v((s+(i-n))*oe.speed)},d.seek=function(e){v(h(e))},d.pause=function(){d.paused=!0,m()},d.play=function(){d.paused&&(d.completed&&d.reset(),d.paused=!1,te.push(d),m(),ne())},d.reverse=function(){p(),d.completed=!d.reversed,m()},d.restart=function(){d.reset(),d.play()},d.remove=function(e){se(H(e),d)},d.reset(),d.autoplay&&d.play(),d}function ie(e,t){for(var n=t.length;n--;)I(e,t[n].animatable.target)&&t.splice(n,1)}function se(e,t){var n=t.animations,r=t.children;ie(e,n);for(var o=r.length;o--;){var i=r[o],s=i.animations;ie(e,s),s.length||i.children.length||r.splice(o,1)}n.length||r.length||t.pause()}oe.version="3.2.1",oe.speed=1,oe.suspendWhenDocumentHidden=!0,oe.running=te,oe.remove=function(e){for(var t=H(e),n=te.length;n--;){se(t,te[n])}},oe.get=D,oe.set=Z,oe.convertPx=A,oe.path=function(e,t){var n=u.str(e)?y(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:B(n),totalLength:$(n)*(r/100)}}},oe.setDashoffset=function(e){var t=$(e);return e.setAttribute("stroke-dasharray",t),t},oe.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?v(t.easing):null,o=t.grid,i=t.axis,s=t.from||0,a="first"===s,l="center"===s,c="last"===s,d=u.arr(e),p=d?parseFloat(e[0]):parseFloat(e),h=d?parseFloat(e[1]):0,m=S(d?e[1]:e)||0,f=t.start||0+(d?p:0),g=[],b=0;return function(e,t,u){if(a&&(s=0),l&&(s=(u-1)/2),c&&(s=u-1),!g.length){for(var v=0;v<u;v++){if(o){var y=l?(o[0]-1)/2:s%o[0],j=l?(o[1]-1)/2:Math.floor(s/o[0]),_=y-v%o[0],w=j-Math.floor(v/o[0]),I=Math.sqrt(_*_+w*w);"x"===i&&(I=-_),"y"===i&&(I=-w),g.push(I)}else g.push(Math.abs(s-v));b=Math.max.apply(Math,g)}r&&(g=g.map((function(e){return r(e/b)*b}))),"reverse"===n&&(g=g.map((function(e){return i?e<0?-1*e:-e:Math.abs(b-e)})))}return f+(d?(h-p)/b:p)*(Math.round(100*g[t])/100)+m}},oe.timeline=function(e){void 0===e&&(e={});var t=oe(e);return t.duration=0,t.add=function(n,r){var i=te.indexOf(t),s=t.children;function a(e){e.passThrough=!0}i>-1&&te.splice(i,1);for(var l=0;l<s.length;l++)a(s[l]);var c=k(n,E(o,e));c.targets=c.targets||e.targets;var d=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=u.und(r)?d:L(r,d),a(t),t.seek(c.timelineOffset);var p=oe(c);a(p),s.push(p);var h=Q(s,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},oe.easing=v,oe.penner=b,oe.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var ae=oe;n.default=ae},{"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.some.js":875,"core-js/modules/es.array.splice.js":877,"core-js/modules/es.function.name.js":884,"core-js/modules/es.map.js":885,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.float32-array.js":939,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],695:[function(e,t,n){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),o="0".charCodeAt(0),i="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),l="_".charCodeAt(0);function c(e){var t=e.charCodeAt(0);return t===n||t===a?62:t===r||t===l?63:t<o?-1:t<o+10?t-o+26+26:t<s+26?t-s:t<i+26?t-i+26:void 0}e.toByteArray=function(e){var n,r,o,i,s,a;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;s="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,a=new t(3*e.length/4-s),o=s>0?e.length-4:e.length;var u=0;function d(e){a[u++]=e}for(n=0,r=0;n<o;n+=4,r+=3)d((16711680&(i=c(e.charAt(n))<<18|c(e.charAt(n+1))<<12|c(e.charAt(n+2))<<6|c(e.charAt(n+3))))>>16),d((65280&i)>>8),d(255&i);return 2===s?d(255&(i=c(e.charAt(n))<<2|c(e.charAt(n+1))>>4)):1===s&&(d((i=c(e.charAt(n))<<10|c(e.charAt(n+1))<<4|c(e.charAt(n+2))>>2)>>8&255),d(255&i)),a},e.fromByteArray=function(e){var t,n,r,o,i=e.length%3,s="";function a(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,r=e.length-i;t<r;t+=3)n=(e[t]<<16)+(e[t+1]<<8)+e[t+2],s+=a((o=n)>>18&63)+a(o>>12&63)+a(o>>6&63)+a(63&o);switch(i){case 1:s+=a((n=e[e.length-1])>>2),s+=a(n<<4&63),s+="==";break;case 2:s+=a((n=(e[e.length-2]<<8)+e[e.length-1])>>10),s+=a(n>>4&63),s+=a(n<<2&63),s+="="}return s}}(void 0===n?this.base64js={}:n)},{}],696:[function(e,t,n){},{}],697:[function(e,t,n){(function(t,r){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
"use strict";var r=e("base64-js"),o=e("ieee754"),i=e("isarray");n.Buffer=l,n.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var r=new l(t,n);return delete r.parent,r},n.INSPECT_MAX_BYTES=50,l.poolSize=8192;var s={};function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e){return this instanceof l?(l.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?c(this,e):"string"==typeof e?u(this,e,arguments.length>1?arguments[1]:"utf8"):d(this,e)):arguments.length>1?new l(e,arguments[1]):new l(e)}function c(e,t){if(e=h(e,t<0?0:0|m(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}function u(e,t,n){return"string"==typeof n&&""!==n||(n="utf8"),(e=h(e,0|f(t,n))).write(t,n),e}function d(e,t){if(l.isBuffer(t))return function(e,t){var n=0|m(t.length);return e=h(e,n),t.copy(e,0,0,n),e}(e,t);if(i(t))return function(e,t){var n=0|m(t.length);e=h(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return p(e,t);if(t instanceof ArrayBuffer)return function(e,t){l.TYPED_ARRAY_SUPPORT?(t.byteLength,e=l._augment(new Uint8Array(t))):e=p(e,new Uint8Array(t));return e}(e,t)}return t.length?function(e,t){var n=0|m(t.length);e=h(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t):function(e,t){var n,r=0;"Buffer"===t.type&&i(t.data)&&(n=t.data,r=0|m(n.length));e=h(e,r);for(var o=0;o<r;o+=1)e[o]=255&n[o];return e}(e,t)}function p(e,t){var n=0|m(t.length);e=h(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t){return l.TYPED_ARRAY_SUPPORT?(e=l._augment(new Uint8Array(t))).__proto__=l.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=l.poolSize>>>1&&(e.parent=s),e}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return M(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if(e||(e="utf8"),(t|=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return E(this,t,n);case"binary":return k(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function v(e,t,n,r){return $(F(t,e.length-n),e,n,r)}function y(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return y(e,t,n,r)}function _(e,t,n,r){return $(M(t),e,n,r)}function w(e,t,n,r){return $(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,l,c=e[o],u=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT?(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array):(l.prototype.length=void 0,l.prototype.parent=void 0),l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i&&e[o]===t[o];)++o;return o!==i&&(n=e[o],r=t[o]),n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new l(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new l(t),o=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(r,o),o+=s.length}return r},l.byteLength=f,l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:l.compare(this,e)},l.prototype.indexOf=function(e,t){if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(l.isBuffer(e))return n(this,e,t);if("number"==typeof e)return l.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);function n(e,t,n){for(var r=-1,o=0;n+o<e.length;o++)if(e[n+o]===t[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===t.length)return n+r}else r=-1;return-1}throw new TypeError("val must be string, number or Buffer")},l.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},l.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=t,t=0|n,n=o}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"binary":return j(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;o++)r+=String.fromCharCode(127&e[o]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;o++)r+=String.fromCharCode(e[o]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;i++)o+=R(e[i]);return o}function S(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!l.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||t<i)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function A(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function O(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function V(e,t,n,r,o,i){if(t>o||t<i)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function P(e,t,n,r,i){return i||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function K(e,t,n,r,i){return i||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=l._augment(this.subarray(e,t));else{var o=t-e;n=new l(o,void 0);for(var i=0;i<o;i++)n[i]=this[i+e]}return n.length&&(n.parent=this.parent||this),n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||N(this,e,t,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||N(this,e,t,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,s=1,a=e<0?1:0;for(this[t]=255&e;++i<n&&(s*=256);)this[t+i]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=e<0?1:0;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;o--)e[o+t]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var o=F(e.toString()),i=o.length;for(r=t;r<n;r++)this[r]=o[r%i]}return this}},l.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(l.TYPED_ARRAY_SUPPORT)return new l(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var D=l.prototype;l._augment=function(e){return e.constructor=l,e._isBuffer=!0,e._set=e.set,e.get=D.get,e.set=D.set,e.write=D.write,e.toString=D.toString,e.toLocaleString=D.toString,e.toJSON=D.toJSON,e.equals=D.equals,e.compare=D.compare,e.indexOf=D.indexOf,e.copy=D.copy,e.slice=D.slice,e.readUIntLE=D.readUIntLE,e.readUIntBE=D.readUIntBE,e.readUInt8=D.readUInt8,e.readUInt16LE=D.readUInt16LE,e.readUInt16BE=D.readUInt16BE,e.readUInt32LE=D.readUInt32LE,e.readUInt32BE=D.readUInt32BE,e.readIntLE=D.readIntLE,e.readIntBE=D.readIntBE,e.readInt8=D.readInt8,e.readInt16LE=D.readInt16LE,e.readInt16BE=D.readInt16BE,e.readInt32LE=D.readInt32LE,e.readInt32BE=D.readInt32BE,e.readFloatLE=D.readFloatLE,e.readFloatBE=D.readFloatBE,e.readDoubleLE=D.readDoubleLE,e.readDoubleBE=D.readDoubleBE,e.writeUInt8=D.writeUInt8,e.writeUIntLE=D.writeUIntLE,e.writeUIntBE=D.writeUIntBE,e.writeUInt16LE=D.writeUInt16LE,e.writeUInt16BE=D.writeUInt16BE,e.writeUInt32LE=D.writeUInt32LE,e.writeUInt32BE=D.writeUInt32BE,e.writeIntLE=D.writeIntLE,e.writeIntBE=D.writeIntBE,e.writeInt8=D.writeInt8,e.writeInt16LE=D.writeInt16LE,e.writeInt16BE=D.writeInt16BE,e.writeInt32LE=D.writeInt32LE,e.writeInt32BE=D.writeInt32BE,e.writeFloatLE=D.writeFloatLE,e.writeFloatBE=D.writeFloatBE,e.writeDoubleLE=D.writeDoubleLE,e.writeDoubleBE=D.writeDoubleBE,e.fill=D.fill,e.inspect=D.inspect,e.toArrayBuffer=D.toArrayBuffer,e};var L=/[^+\/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;s++){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function M(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);o++)t[o+n]=e[o];return o}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"base64-js":695,buffer:697,ieee754:1025,isarray:698}],698:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],699:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],700:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":773}],701:[function(e,t,n){var r=e("../internals/well-known-symbol"),o=e("../internals/object-create"),i=e("../internals/object-define-property"),s=r("unscopables"),a=Array.prototype;null==a[s]&&i.f(a,s,{configurable:!0,value:o(null)}),t.exports=function(e){a[s][e]=!0}},{"../internals/object-create":791,"../internals/object-define-property":793,"../internals/well-known-symbol":851}],702:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":825}],703:[function(e,t,n){t.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},{}],704:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":773}],705:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],706:[function(e,t,n){"use strict";var r,o=e("../internals/array-buffer-native"),i=e("../internals/descriptors"),s=e("../internals/global"),a=e("../internals/is-object"),l=e("../internals/has"),c=e("../internals/classof"),u=e("../internals/create-non-enumerable-property"),d=e("../internals/redefine"),p=e("../internals/object-define-property").f,h=e("../internals/object-get-prototype-of"),m=e("../internals/object-set-prototype-of"),f=e("../internals/well-known-symbol"),g=e("../internals/uid"),b=s.Int8Array,v=b&&b.prototype,y=s.Uint8ClampedArray,j=y&&y.prototype,_=b&&h(b),w=v&&h(v),I=Object.prototype,x=I.isPrototypeOf,E=f("toStringTag"),k=g("TYPED_ARRAY_TAG"),C=o&&!!m&&"Opera"!==c(s.opera),S=!1,T={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},A=function(e){if(!a(e))return!1;var t=c(e);return l(T,t)||l(N,t)};for(r in T)s[r]||(C=!1);if((!C||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},C))for(r in T)s[r]&&m(s[r],_);if((!C||!w||w===I)&&(w=_.prototype,C))for(r in T)s[r]&&m(s[r].prototype,w);if(C&&h(j)!==w&&m(j,w),i&&!l(w,E))for(r in S=!0,p(w,E,{get:function(){return a(this)?this[k]:void 0}}),T)s[r]&&u(s[r],k,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:C,TYPED_ARRAY_TAG:S&&k,aTypedArray:function(e){if(A(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(m){if(x.call(_,e))return e}else for(var t in T)if(l(T,r)){var n=s[t];if(n&&(e===n||x.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in T){var o=s[r];o&&l(o.prototype,e)&&delete o.prototype[e]}w[e]&&!n||d(w,e,n?t:C&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(i){if(m){if(n)for(r in T)(o=s[r])&&l(o,e)&&delete o[e];if(_[e]&&!n)return;try{return d(_,e,n?t:C&&b[e]||t)}catch(e){}}for(r in T)!(o=s[r])||o[e]&&!n||d(o,e,t)}},isView:function(e){if(!a(e))return!1;var t=c(e);return"DataView"===t||l(T,t)||l(N,t)},isTypedArray:A,TypedArray:_,TypedArrayPrototype:w}},{"../internals/array-buffer-native":705,"../internals/classof":722,"../internals/create-non-enumerable-property":731,"../internals/descriptors":737,"../internals/global":757,"../internals/has":758,"../internals/is-object":773,"../internals/object-define-property":793,"../internals/object-get-prototype-of":798,"../internals/object-set-prototype-of":802,"../internals/redefine":810,"../internals/uid":848,"../internals/well-known-symbol":851}],707:[function(e,t,n){"use strict";var r=e("../internals/global"),o=e("../internals/descriptors"),i=e("../internals/array-buffer-native"),s=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine-all"),l=e("../internals/fails"),c=e("../internals/an-instance"),u=e("../internals/to-integer"),d=e("../internals/to-length"),p=e("../internals/to-index"),h=e("../internals/ieee754"),m=e("../internals/object-get-prototype-of"),f=e("../internals/object-set-prototype-of"),g=e("../internals/object-get-own-property-names").f,b=e("../internals/object-define-property").f,v=e("../internals/array-fill"),y=e("../internals/set-to-string-tag"),j=e("../internals/internal-state"),_=j.get,w=j.set,I=r.ArrayBuffer,x=I,E=r.DataView,k=E&&E.prototype,C=Object.prototype,S=r.RangeError,T=h.pack,N=h.unpack,A=function(e){return[255&e]},O=function(e){return[255&e,e>>8&255]},V=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},P=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},K=function(e){return T(e,23,4)},D=function(e){return T(e,52,8)},L=function(e,t){b(e.prototype,t,{get:function(){return _(this)[t]}})},R=function(e,t,n,r){var o=p(n),i=_(e);if(o+t>i.byteLength)throw S("Wrong index");var s=_(i.buffer).bytes,a=o+i.byteOffset,l=s.slice(a,a+t);return r?l:l.reverse()},F=function(e,t,n,r,o,i){var s=p(n),a=_(e);if(s+t>a.byteLength)throw S("Wrong index");for(var l=_(a.buffer).bytes,c=s+a.byteOffset,u=r(+o),d=0;d<t;d++)l[c+d]=u[i?d:t-d-1]};if(i){if(!l((function(){I(1)}))||!l((function(){new I(-1)}))||l((function(){return new I,new I(1.5),new I(NaN),"ArrayBuffer"!=I.name}))){for(var M,$=(x=function(e){return c(this,x),new I(p(e))}).prototype=I.prototype,B=g(I),z=0;B.length>z;)(M=B[z++])in x||s(x,M,I[M]);$.constructor=x}f&&m(k)!==C&&f(k,C);var U=new E(new x(2)),H=k.setInt8;U.setInt8(0,2147483648),U.setInt8(1,2147483649),!U.getInt8(0)&&U.getInt8(1)||a(k,{setInt8:function(e,t){H.call(this,e,t<<24>>24)},setUint8:function(e,t){H.call(this,e,t<<24>>24)}},{unsafe:!0})}else x=function(e){c(this,x,"ArrayBuffer");var t=p(e);w(this,{bytes:v.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},E=function(e,t,n){c(this,E,"DataView"),c(e,x,"DataView");var r=_(e).byteLength,i=u(t);if(i<0||i>r)throw S("Wrong offset");if(i+(n=void 0===n?r-i:d(n))>r)throw S("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},o&&(L(x,"byteLength"),L(E,"buffer"),L(E,"byteLength"),L(E,"byteOffset")),a(E.prototype,{getInt8:function(e){return R(this,1,e)[0]<<24>>24},getUint8:function(e){return R(this,1,e)[0]},getInt16:function(e){var t=R(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=R(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return P(R(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return P(R(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(R(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(R(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){F(this,1,e,A,t)},setUint8:function(e,t){F(this,1,e,A,t)},setInt16:function(e,t){F(this,2,e,O,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){F(this,2,e,O,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){F(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){F(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){F(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){F(this,8,e,D,t,arguments.length>2?arguments[2]:void 0)}});y(x,"ArrayBuffer"),y(E,"DataView"),t.exports={ArrayBuffer:x,DataView:E}},{"../internals/an-instance":703,"../internals/array-buffer-native":705,"../internals/array-fill":709,"../internals/create-non-enumerable-property":731,"../internals/descriptors":737,"../internals/fails":747,"../internals/global":757,"../internals/ieee754":763,"../internals/internal-state":768,"../internals/object-define-property":793,"../internals/object-get-own-property-names":796,"../internals/object-get-prototype-of":798,"../internals/object-set-prototype-of":802,"../internals/redefine-all":809,"../internals/set-to-string-tag":819,"../internals/to-index":835,"../internals/to-integer":837,"../internals/to-length":838}],708:[function(e,t,n){"use strict";var r=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length"),s=Math.min;t.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),l=o(e,a),c=o(t,a),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?a:o(u,a))-c,a-l),p=1;for(c<l&&l<c+d&&(p=-1,c+=d-1,l+=d-1);d-- >0;)c in n?n[l]=n[c]:delete n[l],l+=p,c+=p;return n}},{"../internals/to-absolute-index":834,"../internals/to-length":838,"../internals/to-object":839}],709:[function(e,t,n){"use strict";var r=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length");t.exports=function(e){for(var t=r(this),n=i(t.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,c=void 0===l?n:o(l,n);c>a;)t[a++]=e;return t}},{"../internals/to-absolute-index":834,"../internals/to-length":838,"../internals/to-object":839}],710:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,o=e("../internals/array-method-is-strict")("forEach");t.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},{"../internals/array-iteration":713,"../internals/array-method-is-strict":716}],711:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),o=e("../internals/to-object"),i=e("../internals/call-with-safe-iteration-closing"),s=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),l=e("../internals/create-property"),c=e("../internals/get-iterator-method");t.exports=function(e){var t,n,u,d,p,h,m=o(e),f="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,y=c(m),j=0;if(v&&(b=r(b,g>2?arguments[2]:void 0,2)),null==y||f==Array&&s(y))for(n=new f(t=a(m.length));t>j;j++)h=v?b(m[j],j):m[j],l(n,j,h);else for(p=(d=y.call(m)).next,n=new f;!(u=p.call(d)).done;j++)h=v?i(d,b,[u.value,j],!0):u.value,l(n,j,h);return n.length=j,n}},{"../internals/call-with-safe-iteration-closing":719,"../internals/create-property":733,"../internals/function-bind-context":751,"../internals/get-iterator-method":754,"../internals/is-array-iterator-method":769,"../internals/to-length":838,"../internals/to-object":839}],712:[function(e,t,n){var r=e("../internals/to-indexed-object"),o=e("../internals/to-length"),i=e("../internals/to-absolute-index"),s=function(e){return function(t,n,s){var a,l=r(t),c=o(l.length),u=i(s,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":834,"../internals/to-indexed-object":836,"../internals/to-length":838}],713:[function(e,t,n){var r=e("../internals/function-bind-context"),o=e("../internals/indexed-object"),i=e("../internals/to-object"),s=e("../internals/to-length"),a=e("../internals/array-species-create"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,p=7==e,h=5==e||d;return function(m,f,g,b){for(var v,y,j=i(m),_=o(j),w=r(f,g,3),I=s(_.length),x=0,E=b||a,k=t?E(m,I):n||p?E(m,0):void 0;I>x;x++)if((h||x in _)&&(y=w(v=_[x],x,j),e))if(t)k[x]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:l.call(k,v)}else switch(e){case 4:return!1;case 7:l.call(k,v)}return d?-1:c||u?u:k}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},{"../internals/array-species-create":718,"../internals/function-bind-context":751,"../internals/indexed-object":764,"../internals/to-length":838,"../internals/to-object":839}],714:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),o=e("../internals/to-integer"),i=e("../internals/to-length"),s=e("../internals/array-method-is-strict"),a=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),d=c||!u;t.exports=d?function(e){if(c)return l.apply(this,arguments)||0;var t=r(this),n=i(t.length),s=n-1;for(arguments.length>1&&(s=a(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:l},{"../internals/array-method-is-strict":716,"../internals/to-indexed-object":836,"../internals/to-integer":837,"../internals/to-length":838}],715:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/engine-v8-version"),s=o("species");t.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":744,"../internals/fails":747,"../internals/well-known-symbol":851}],716:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":747}],717:[function(e,t,n){var r=e("../internals/a-function"),o=e("../internals/to-object"),i=e("../internals/indexed-object"),s=e("../internals/to-length"),a=function(e){return function(t,n,a,l){r(n);var c=o(t),u=i(c),d=s(c.length),p=e?d-1:0,h=e?-1:1;if(a<2)for(;;){if(p in u){l=u[p],p+=h;break}if(p+=h,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=h)p in u&&(l=n(l,u[p],p,c));return l}};t.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":699,"../internals/indexed-object":764,"../internals/to-length":838,"../internals/to-object":839}],718:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/is-array"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},{"../internals/is-array":770,"../internals/is-object":773,"../internals/well-known-symbol":851}],719:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/iterator-close");t.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw o(e),t}}},{"../internals/an-object":704,"../internals/iterator-close":777}],720:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},{"../internals/well-known-symbol":851}],721:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],722:[function(e,t,n){var r=e("../internals/to-string-tag-support"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:s?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},{"../internals/classof-raw":721,"../internals/to-string-tag-support":843,"../internals/well-known-symbol":851}],723:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,o=e("../internals/object-create"),i=e("../internals/redefine-all"),s=e("../internals/function-bind-context"),a=e("../internals/an-instance"),l=e("../internals/iterate"),c=e("../internals/define-iterator"),u=e("../internals/set-species"),d=e("../internals/descriptors"),p=e("../internals/internal-metadata").fastKey,h=e("../internals/internal-state"),m=h.set,f=h.getterFor;t.exports={getConstructor:function(e,t,n,c){var u=e((function(e,r){a(e,u,t),m(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=r&&l(r,e[c],{that:e,AS_ENTRIES:n})})),h=f(t),g=function(e,t,n){var r,o,i=h(e),s=b(e,t);return s?s.value=n:(i.last=s={index:o=p(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),d?i.size++:e.size++,"F"!==o&&(i.index[o]=s)),e},b=function(e,t){var n,r=h(e),o=p(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(u.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=h(this),n=b(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),d?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=h(this),r=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),i(u.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),d&&r(u.prototype,"size",{get:function(){return h(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",o=f(t),i=f(r);c(e,t,(function(e,t){m(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},{"../internals/an-instance":703,"../internals/define-iterator":735,"../internals/descriptors":737,"../internals/function-bind-context":751,"../internals/internal-metadata":767,"../internals/internal-state":768,"../internals/iterate":776,"../internals/object-create":791,"../internals/object-define-property":793,"../internals/redefine-all":809,"../internals/set-species":818}],724:[function(e,t,n){"use strict";var r=e("../internals/redefine-all"),o=e("../internals/internal-metadata").getWeakData,i=e("../internals/an-object"),s=e("../internals/is-object"),a=e("../internals/an-instance"),l=e("../internals/iterate"),c=e("../internals/array-iteration"),u=e("../internals/has"),d=e("../internals/internal-state"),p=d.set,h=d.getterFor,m=c.find,f=c.findIndex,g=0,b=function(e){return e.frozen||(e.frozen=new v)},v=function(){this.entries=[]},y=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=f(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,n,c){var d=e((function(e,r){a(e,d,t),p(e,{type:t,id:g++,frozen:void 0}),null!=r&&l(r,e[c],{that:e,AS_ENTRIES:n})})),m=h(t),f=function(e,t,n){var r=m(e),s=o(i(t),!0);return!0===s?b(r).set(t,n):s[r.id]=n,e};return r(d.prototype,{delete:function(e){var t=m(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).delete(e):n&&u(n,t.id)&&delete n[t.id]},has:function(e){var t=m(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).has(e):n&&u(n,t.id)}}),r(d.prototype,n?{get:function(e){var t=m(this);if(s(e)){var n=o(e);return!0===n?b(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return f(this,e,t)}}:{add:function(e){return f(this,e,!0)}}),d}}},{"../internals/an-instance":703,"../internals/an-object":704,"../internals/array-iteration":713,"../internals/has":758,"../internals/internal-metadata":767,"../internals/internal-state":768,"../internals/is-object":773,"../internals/iterate":776,"../internals/redefine-all":809}],725:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/is-forced"),s=e("../internals/redefine"),a=e("../internals/internal-metadata"),l=e("../internals/iterate"),c=e("../internals/an-instance"),u=e("../internals/is-object"),d=e("../internals/fails"),p=e("../internals/check-correctness-of-iteration"),h=e("../internals/set-to-string-tag"),m=e("../internals/inherit-if-required");t.exports=function(e,t,n){var f=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),b=f?"set":"add",v=o[e],y=v&&v.prototype,j=v,_={},w=function(e){var t=y[e];s(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(i(e,"function"!=typeof v||!(g||y.forEach&&!d((function(){(new v).entries().next()})))))j=n.getConstructor(t,e,f,b),a.REQUIRED=!0;else if(i(e,!0)){var I=new j,x=I[b](g?{}:-0,1)!=I,E=d((function(){I.has(1)})),k=p((function(e){new v(e)})),C=!g&&d((function(){for(var e=new v,t=5;t--;)e[b](t,t);return!e.has(-0)}));k||((j=t((function(t,n){c(t,j,e);var r=m(new v,t,j);return null!=n&&l(n,r[b],{that:r,AS_ENTRIES:f}),r}))).prototype=y,y.constructor=j),(E||C)&&(w("delete"),w("has"),f&&w("get")),(C||x)&&w(b),g&&y.clear&&delete y.clear}return _[e]=j,r({global:!0,forced:j!=v},_),h(j,e),g||n.setStrong(j,e,f),j}},{"../internals/an-instance":703,"../internals/check-correctness-of-iteration":720,"../internals/export":746,"../internals/fails":747,"../internals/global":757,"../internals/inherit-if-required":765,"../internals/internal-metadata":767,"../internals/is-forced":771,"../internals/is-object":773,"../internals/iterate":776,"../internals/redefine":810,"../internals/set-to-string-tag":819}],726:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),s=e("../internals/object-define-property");t.exports=function(e,t){for(var n=o(t),a=s.f,l=i.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||a(e,u,l(t,u))}}},{"../internals/has":758,"../internals/object-define-property":793,"../internals/object-get-own-property-descriptor":794,"../internals/own-keys":805}],727:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":851}],728:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":747}],729:[function(e,t,n){var r=e("../internals/require-object-coercible"),o=/"/g;t.exports=function(e,t,n,i){var s=String(r(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+s+"</"+t+">"}},{"../internals/require-object-coercible":815}],730:[function(e,t,n){"use strict";var r=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),a=e("../internals/iterators"),l=function(){return this};t.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),s(e,c,!1,!0),a[c]=l,e}},{"../internals/create-property-descriptor":732,"../internals/iterators":779,"../internals/iterators-core":778,"../internals/object-create":791,"../internals/set-to-string-tag":819}],731:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":732,"../internals/descriptors":737,"../internals/object-define-property":793}],732:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],733:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,n){var s=r(t);s in e?o.f(e,s,i(0,n)):e[s]=n}},{"../internals/create-property-descriptor":732,"../internals/object-define-property":793,"../internals/to-primitive":842}],734:[function(e,t,n){"use strict";var r=e("../internals/fails"),o=e("../internals/string-pad").start,i=Math.abs,s=Date.prototype,a=s.getTime,l=s.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!r((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+o(i(e),n?6:4,0)+"-"+o(this.getUTCMonth()+1,2,0)+"-"+o(this.getUTCDate(),2,0)+"T"+o(this.getUTCHours(),2,0)+":"+o(this.getUTCMinutes(),2,0)+":"+o(this.getUTCSeconds(),2,0)+"."+o(t,3,0)+"Z"}:l},{"../internals/fails":747,"../internals/string-pad":827}],735:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-iterator-constructor"),i=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),a=e("../internals/set-to-string-tag"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),u=e("../internals/well-known-symbol"),d=e("../internals/is-pure"),p=e("../internals/iterators"),h=e("../internals/iterators-core"),m=h.IteratorPrototype,f=h.BUGGY_SAFARI_ITERATORS,g=u("iterator"),b=function(){return this};t.exports=function(e,t,n,u,h,v,y){o(n,t,u);var j,_,w,I=function(e){if(e===h&&S)return S;if(!f&&e in k)return k[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},x=t+" Iterator",E=!1,k=e.prototype,C=k[g]||k["@@iterator"]||h&&k[h],S=!f&&C||I(h),T="Array"==t&&k.entries||C;if(T&&(j=i(T.call(new e)),m!==Object.prototype&&j.next&&(d||i(j)===m||(s?s(j,m):"function"!=typeof j[g]&&l(j,g,b)),a(j,x,!0,!0),d&&(p[x]=b))),"values"==h&&C&&"values"!==C.name&&(E=!0,S=function(){return C.call(this)}),d&&!y||k[g]===S||l(k,g,S),p[t]=S,h)if(_={values:I("values"),keys:v?S:I("keys"),entries:I("entries")},y)for(w in _)(f||E||!(w in k))&&c(k,w,_[w]);else r({target:t,proto:!0,forced:f||E},_);return _}},{"../internals/create-iterator-constructor":730,"../internals/create-non-enumerable-property":731,"../internals/export":746,"../internals/is-pure":774,"../internals/iterators":779,"../internals/iterators-core":778,"../internals/object-get-prototype-of":798,"../internals/object-set-prototype-of":802,"../internals/redefine":810,"../internals/set-to-string-tag":819,"../internals/well-known-symbol":851}],736:[function(e,t,n){var r=e("../internals/path"),o=e("../internals/has"),i=e("../internals/well-known-symbol-wrapped"),s=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||s(t,e,{value:i.f(e)})}},{"../internals/has":758,"../internals/object-define-property":793,"../internals/path":806,"../internals/well-known-symbol-wrapped":850}],737:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":747}],738:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/is-object"),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(e){return s?i.createElement(e):{}}},{"../internals/global":757,"../internals/is-object":773}],739:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],740:[function(e,t,n){var r=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":743}],741:[function(e,t,n){var r=e("../internals/classof-raw"),o=e("../internals/global");t.exports="process"==r(o.process)},{"../internals/classof-raw":721,"../internals/global":757}],742:[function(e,t,n){var r=e("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(r)},{"../internals/engine-user-agent":743}],743:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":753}],744:[function(e,t,n){var r,o,i=e("../internals/global"),s=e("../internals/engine-user-agent"),a=i.process,l=a&&a.versions,c=l&&l.v8;c?o=(r=c.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},{"../internals/engine-user-agent":743,"../internals/global":757}],745:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],746:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),s=e("../internals/redefine"),a=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,u,d,p,h,m=e.target,f=e.global,g=e.stat;if(n=f?r:g?r[m]||a(m,{}):(r[m]||{}).prototype)for(u in t){if(p=t[u],d=e.noTargetGet?(h=o(n,u))&&h.value:n[u],!c(f?u:m+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),s(n,u,p,e)}}},{"../internals/copy-constructor-properties":726,"../internals/create-non-enumerable-property":731,"../internals/global":757,"../internals/is-forced":771,"../internals/object-get-own-property-descriptor":794,"../internals/redefine":810,"../internals/set-global":817}],747:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],748:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),o=e("../internals/fails"),i=e("../internals/well-known-symbol"),s=e("../internals/regexp-exec"),a=e("../internals/create-non-enumerable-property"),l=i("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=i("replace"),p=!!/./[d]&&""===/./[d]("a","$0"),h=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(e,t,n,d){var m=i(e),f=!o((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),g=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!f||!g||"replace"===e&&(!c||!u||p)||"split"===e&&!h){var b=/./[m],v=n(m,""[e],(function(e,t,n,r,o){return t.exec===s?f&&!o?{done:!0,value:b.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=v[0],j=v[1];r(String.prototype,e,y),r(RegExp.prototype,m,2==t?function(e,t){return j.call(e,this,t)}:function(e){return j.call(e,this)})}d&&a(RegExp.prototype[m],"sham",!0)}},{"../internals/create-non-enumerable-property":731,"../internals/fails":747,"../internals/redefine":810,"../internals/regexp-exec":812,"../internals/well-known-symbol":851,"../modules/es.regexp.exec":910}],749:[function(e,t,n){"use strict";var r=e("../internals/is-array"),o=e("../internals/to-length"),i=e("../internals/function-bind-context"),s=function(e,t,n,a,l,c,u,d){for(var p,h=l,m=0,f=!!u&&i(u,d,3);m<a;){if(m in n){if(p=f?f(n[m],m,t):n[m],c>0&&r(p))h=s(e,t,p,o(p.length),h,c-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[h]=p}h++}m++}return h};t.exports=s},{"../internals/function-bind-context":751,"../internals/is-array":770,"../internals/to-length":838}],750:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},{"../internals/fails":747}],751:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":699}],752:[function(e,t,n){"use strict";var r=e("../internals/a-function"),o=e("../internals/is-object"),i=[].slice,s={},a=function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("C,a","return new C("+r.join(",")+")")}return s[t](e,n)};t.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),s=function(){var r=n.concat(i.call(arguments));return this instanceof s?a(t,r.length,r):t.apply(e,r)};return o(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":699,"../internals/is-object":773}],753:[function(e,t,n){var r=e("../internals/path"),o=e("../internals/global"),i=function(e){return"function"==typeof e?e:void 0};t.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},{"../internals/global":757,"../internals/path":806}],754:[function(e,t,n){var r=e("../internals/classof"),o=e("../internals/iterators"),i=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},{"../internals/classof":722,"../internals/iterators":779,"../internals/well-known-symbol":851}],755:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/get-iterator-method");t.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},{"../internals/an-object":704,"../internals/get-iterator-method":754}],756:[function(e,t,n){var r=e("../internals/to-object"),o=Math.floor,i="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,a=/\$([$&'`]|\d\d?)/g;t.exports=function(e,t,n,l,c,u){var d=n+e.length,p=l.length,h=a;return void 0!==c&&(c=r(c),h=s),i.call(u,h,(function(r,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":s=c[i.slice(1,-1)];break;default:var a=+i;if(0===a)return r;if(a>p){var u=o(a/10);return 0===u?r:u<=p?void 0===l[u-1]?i.charAt(1):l[u-1]+i.charAt(1):r}s=l[a-1]}return void 0===s?"":s}))}},{"../internals/to-object":839}],757:[function(e,t,n){(function(e){(function(){var n=function(e){return e&&e.Math==Math&&e};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],758:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],759:[function(e,t,n){t.exports={}},{}],760:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":757}],761:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("document","documentElement")},{"../internals/get-built-in":753}],762:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":737,"../internals/document-create-element":738,"../internals/fails":747}],763:[function(e,t,n){var r=Math.abs,o=Math.pow,i=Math.floor,s=Math.log,a=Math.LN2;t.exports={pack:function(e,t,n){var l,c,u,d=new Array(n),p=8*n-t-1,h=(1<<p)-1,m=h>>1,f=23===t?o(2,-24)-o(2,-77):0,g=e<0||0===e&&1/e<0?1:0,b=0;for((e=r(e))!=e||e===1/0?(c=e!=e?1:0,l=h):(l=i(s(e)/a),e*(u=o(2,-l))<1&&(l--,u*=2),(e+=l+m>=1?f/u:f*o(2,1-m))*u>=2&&(l++,u/=2),l+m>=h?(c=0,l=h):l+m>=1?(c=(e*u-1)*o(2,t),l+=m):(c=e*o(2,m-1)*o(2,t),l=0));t>=8;d[b++]=255&c,c/=256,t-=8);for(l=l<<t|c,p+=t;p>0;d[b++]=255&l,l/=256,p-=8);return d[--b]|=128*g,d},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,s=(1<<i)-1,a=s>>1,l=i-7,c=r-1,u=e[c--],d=127&u;for(u>>=7;l>0;d=256*d+e[c],c--,l-=8);for(n=d&(1<<-l)-1,d>>=-l,l+=t;l>0;n=256*n+e[c],c--,l-=8);if(0===d)d=1-a;else{if(d===s)return n?NaN:u?-1/0:1/0;n+=o(2,t),d-=a}return(u?-1:1)*n*o(2,d-t)}}},{}],764:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/classof-raw"),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},{"../internals/classof-raw":721,"../internals/fails":747}],765:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){var i,s;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(s=i.prototype)&&s!==n.prototype&&o(e,s),e}},{"../internals/is-object":773,"../internals/object-set-prototype-of":802}],766:[function(e,t,n){var r=e("../internals/shared-store"),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),t.exports=r.inspectSource},{"../internals/shared-store":821}],767:[function(e,t,n){var r=e("../internals/hidden-keys"),o=e("../internals/is-object"),i=e("../internals/has"),s=e("../internals/object-define-property").f,a=e("../internals/uid"),l=e("../internals/freezing"),c=a("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(e){s(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},h=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,c)){if(!d(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},getWeakData:function(e,t){if(!i(e,c)){if(!d(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},onFreeze:function(e){return l&&h.REQUIRED&&d(e)&&!i(e,c)&&p(e),e}};r[c]=!0},{"../internals/freezing":750,"../internals/has":758,"../internals/hidden-keys":759,"../internals/is-object":773,"../internals/object-define-property":793,"../internals/uid":848}],768:[function(e,t,n){var r,o,i,s=e("../internals/native-weak-map"),a=e("../internals/global"),l=e("../internals/is-object"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/has"),d=e("../internals/shared-store"),p=e("../internals/shared-key"),h=e("../internals/hidden-keys"),m=a.WeakMap;if(s){var f=d.state||(d.state=new m),g=f.get,b=f.has,v=f.set;r=function(e,t){return t.facade=e,v.call(f,e,t),t},o=function(e){return g.call(f,e)||{}},i=function(e){return b.call(f,e)}}else{var y=p("state");h[y]=!0,r=function(e,t){return t.facade=e,c(e,y,t),t},o=function(e){return u(e,y)?e[y]:{}},i=function(e){return u(e,y)}}t.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},{"../internals/create-non-enumerable-property":731,"../internals/global":757,"../internals/has":758,"../internals/hidden-keys":759,"../internals/is-object":773,"../internals/native-weak-map":784,"../internals/shared-key":820,"../internals/shared-store":821}],769:[function(e,t,n){var r=e("../internals/well-known-symbol"),o=e("../internals/iterators"),i=r("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},{"../internals/iterators":779,"../internals/well-known-symbol":851}],770:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":721}],771:[function(e,t,n){var r=e("../internals/fails"),o=/#|\.prototype\./,i=function(e,t){var n=a[s(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},s=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=i.data={},l=i.NATIVE="N",c=i.POLYFILL="P";t.exports=i},{"../internals/fails":747}],772:[function(e,t,n){var r=e("../internals/is-object"),o=Math.floor;t.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},{"../internals/is-object":773}],773:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],774:[function(e,t,n){t.exports=!1},{}],775:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},{"../internals/classof-raw":721,"../internals/is-object":773,"../internals/well-known-symbol":851}],776:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/is-array-iterator-method"),i=e("../internals/to-length"),s=e("../internals/function-bind-context"),a=e("../internals/get-iterator-method"),l=e("../internals/iterator-close"),c=function(e,t){this.stopped=e,this.result=t};t.exports=function(e,t,n){var u,d,p,h,m,f,g,b=n&&n.that,v=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),j=!(!n||!n.INTERRUPTED),_=s(t,b,1+v+j),w=function(e){return u&&l(u),new c(!0,e)},I=function(e){return v?(r(e),j?_(e[0],e[1],w):_(e[0],e[1])):j?_(e,w):_(e)};if(y)u=e;else{if("function"!=typeof(d=a(e)))throw TypeError("Target is not iterable");if(o(d)){for(p=0,h=i(e.length);h>p;p++)if((m=I(e[p]))&&m instanceof c)return m;return new c(!1)}u=d.call(e)}for(f=u.next;!(g=f.call(u)).done;){try{m=I(g.value)}catch(e){throw l(u),e}if("object"==typeof m&&m&&m instanceof c)return m}return new c(!1)}},{"../internals/an-object":704,"../internals/function-bind-context":751,"../internals/get-iterator-method":754,"../internals/is-array-iterator-method":769,"../internals/iterator-close":777,"../internals/to-length":838}],777:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},{"../internals/an-object":704}],778:[function(e,t,n){"use strict";var r,o,i,s=e("../internals/fails"),a=e("../internals/object-get-prototype-of"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),u=e("../internals/well-known-symbol"),d=e("../internals/is-pure"),p=u("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):h=!0);var m=null==r||s((function(){var e={};return r[p].call(e)!==e}));m&&(r={}),d&&!m||c(r,p)||l(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":731,"../internals/fails":747,"../internals/has":758,"../internals/is-pure":774,"../internals/object-get-prototype-of":798,"../internals/well-known-symbol":851}],779:[function(e,t,n){t.exports={}},{}],780:[function(e,t,n){var r,o,i,s,a,l,c,u,d=e("../internals/global"),p=e("../internals/object-get-own-property-descriptor").f,h=e("../internals/task").set,m=e("../internals/engine-is-ios"),f=e("../internals/engine-is-webos-webkit"),g=e("../internals/engine-is-node"),b=d.MutationObserver||d.WebKitMutationObserver,v=d.document,y=d.process,j=d.Promise,_=p(d,"queueMicrotask"),w=_&&_.value;w||(r=function(){var e,t;for(g&&(e=y.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?s():i=void 0,e}}i=void 0,e&&e.enter()},m||g||f||!b||!v?j&&j.resolve?(c=j.resolve(void 0),u=c.then,s=function(){u.call(c,r)}):s=g?function(){y.nextTick(r)}:function(){h.call(d,r)}:(a=!0,l=v.createTextNode(""),new b(r).observe(l,{characterData:!0}),s=function(){l.data=a=!a})),t.exports=w||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,s()),i=t}},{"../internals/engine-is-ios":740,"../internals/engine-is-node":741,"../internals/engine-is-webos-webkit":742,"../internals/global":757,"../internals/object-get-own-property-descriptor":794,"../internals/task":832}],781:[function(e,t,n){var r=e("../internals/global");t.exports=r.Promise},{"../internals/global":757}],782:[function(e,t,n){var r=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},{"../internals/fails":747}],783:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/is-pure"),s=o("iterator");t.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":747,"../internals/is-pure":774,"../internals/well-known-symbol":851}],784:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/inspect-source"),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},{"../internals/global":757,"../internals/inspect-source":766}],785:[function(e,t,n){"use strict";var r=e("../internals/a-function"),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};t.exports.f=function(e){return new o(e)}},{"../internals/a-function":699}],786:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":775}],787:[function(e,t,n){var r=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},{"../internals/global":757}],788:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/string-trim").trim,i=e("../internals/whitespaces"),s=r.parseFloat,a=1/s(i+"-0")!=-1/0;t.exports=a?function(e){var t=o(String(e)),n=s(t);return 0===n&&"-"==t.charAt(0)?-0:n}:s},{"../internals/global":757,"../internals/string-trim":831,"../internals/whitespaces":852}],789:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/string-trim").trim,i=e("../internals/whitespaces"),s=r.parseInt,a=/^[+-]?0[Xx]/,l=8!==s(i+"08")||22!==s(i+"0x16");t.exports=l?function(e,t){var n=o(String(e));return s(n,t>>>0||(a.test(n)?16:10))}:s},{"../internals/global":757,"../internals/string-trim":831,"../internals/whitespaces":852}],790:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/object-keys"),s=e("../internals/object-get-own-property-symbols"),a=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),c=e("../internals/indexed-object"),u=Object.assign,d=Object.defineProperty;t.exports=!u||o((function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=i(u({},t)).join("")}))?function(e,t){for(var n=l(e),o=arguments.length,u=1,d=s.f,p=a.f;o>u;)for(var h,m=c(arguments[u++]),f=d?i(m).concat(d(m)):i(m),g=f.length,b=0;g>b;)h=f[b++],r&&!p.call(m,h)||(n[h]=m[h]);return n}:u},{"../internals/descriptors":737,"../internals/fails":747,"../internals/indexed-object":764,"../internals/object-get-own-property-symbols":797,"../internals/object-keys":800,"../internals/object-property-is-enumerable":801,"../internals/to-object":839}],791:[function(e,t,n){var r,o=e("../internals/an-object"),i=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),a=e("../internals/hidden-keys"),l=e("../internals/html"),c=e("../internals/document-create-element"),u=e("../internals/shared-key"),d=u("IE_PROTO"),p=function(){},h=function(e){return"<script>"+e+"<\/script>"},m=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete m.prototype[s[n]];return m()};a[d]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=o(e),n=new p,p.prototype=null,n[d]=e):n=m(),void 0===t?n:i(n,t)}},{"../internals/an-object":704,"../internals/document-create-element":738,"../internals/enum-bug-keys":745,"../internals/hidden-keys":759,"../internals/html":761,"../internals/object-define-properties":792,"../internals/shared-key":820}],792:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/an-object"),s=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=s(t),a=r.length,l=0;a>l;)o.f(e,n=r[l++],t[n]);return e}},{"../internals/an-object":704,"../internals/descriptors":737,"../internals/object-define-property":793,"../internals/object-keys":800}],793:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/ie8-dom-define"),i=e("../internals/an-object"),s=e("../internals/to-primitive"),a=Object.defineProperty;n.f=r?a:function(e,t,n){if(i(e),t=s(t,!0),i(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":704,"../internals/descriptors":737,"../internals/ie8-dom-define":762,"../internals/to-primitive":842}],794:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-property-is-enumerable"),i=e("../internals/create-property-descriptor"),s=e("../internals/to-indexed-object"),a=e("../internals/to-primitive"),l=e("../internals/has"),c=e("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,t){if(e=s(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return i(!o.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":732,"../internals/descriptors":737,"../internals/has":758,"../internals/ie8-dom-define":762,"../internals/object-property-is-enumerable":801,"../internals/to-indexed-object":836,"../internals/to-primitive":842}],795:[function(e,t,n){var r=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(r(e))}},{"../internals/object-get-own-property-names":796,"../internals/to-indexed-object":836}],796:[function(e,t,n){var r=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"../internals/enum-bug-keys":745,"../internals/object-keys-internal":799}],797:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],798:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/to-object"),i=e("../internals/shared-key"),s=e("../internals/correct-prototype-getter"),a=i("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},{"../internals/correct-prototype-getter":728,"../internals/has":758,"../internals/shared-key":820,"../internals/to-object":839}],799:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/to-indexed-object"),i=e("../internals/array-includes").indexOf,s=e("../internals/hidden-keys");t.exports=function(e,t){var n,a=o(e),l=0,c=[];for(n in a)!r(s,n)&&r(a,n)&&c.push(n);for(;t.length>l;)r(a,n=t[l++])&&(~i(c,n)||c.push(n));return c}},{"../internals/array-includes":712,"../internals/has":758,"../internals/hidden-keys":759,"../internals/to-indexed-object":836}],800:[function(e,t,n){var r=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"../internals/enum-bug-keys":745,"../internals/object-keys-internal":799}],801:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);n.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},{}],802:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},{"../internals/a-possible-prototype":700,"../internals/an-object":704}],803:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-keys"),i=e("../internals/to-indexed-object"),s=e("../internals/object-property-is-enumerable").f,a=function(e){return function(t){for(var n,a=i(t),l=o(a),c=l.length,u=0,d=[];c>u;)n=l[u++],r&&!s.call(a,n)||d.push(e?[n,a[n]]:a[n]);return d}};t.exports={entries:a(!0),values:a(!1)}},{"../internals/descriptors":737,"../internals/object-keys":800,"../internals/object-property-is-enumerable":801,"../internals/to-indexed-object":836}],804:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),o=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},{"../internals/classof":722,"../internals/to-string-tag-support":843}],805:[function(e,t,n){var r=e("../internals/get-built-in"),o=e("../internals/object-get-own-property-names"),i=e("../internals/object-get-own-property-symbols"),s=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=i.f;return n?t.concat(n(e)):t}},{"../internals/an-object":704,"../internals/get-built-in":753,"../internals/object-get-own-property-names":796,"../internals/object-get-own-property-symbols":797}],806:[function(e,t,n){var r=e("../internals/global");t.exports=r},{"../internals/global":757}],807:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],808:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":704,"../internals/is-object":773,"../internals/new-promise-capability":785}],809:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},{"../internals/redefine":810}],810:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/create-non-enumerable-property"),i=e("../internals/has"),s=e("../internals/set-global"),a=e("../internals/inspect-source"),l=e("../internals/internal-state"),c=l.get,u=l.enforce,d=String(String).split("String");(t.exports=function(e,t,n,a){var l,c=!!a&&!!a.unsafe,p=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(c?!h&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},{"../internals/create-non-enumerable-property":731,"../internals/global":757,"../internals/has":758,"../internals/inspect-source":766,"../internals/internal-state":768,"../internals/set-global":817}],811:[function(e,t,n){var r=e("./classof-raw"),o=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{"./classof-raw":721,"./regexp-exec":812}],812:[function(e,t,n){"use strict";var r,o,i=e("./regexp-flags"),s=e("./regexp-sticky-helpers"),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(u||p||d)&&(c=function(e){var t,n,r,o,s=this,c=d&&s.sticky,h=i.call(s),m=s.source,f=0,g=e;return c&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(m="(?: "+m+")",g=" "+g,f++),n=new RegExp("^(?:"+m+")",h)),p&&(n=new RegExp("^"+m+"$(?!\\s)",h)),u&&(t=s.lastIndex),r=a.call(c?n:s,g),c?r?(r.input=r.input.slice(f),r[0]=r[0].slice(f),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:u&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),p&&r&&r.length>1&&l.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=c},{"./regexp-flags":813,"./regexp-sticky-helpers":814}],813:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":704}],814:[function(e,t,n){"use strict";var r=e("./fails");function o(e,t){return RegExp(e,t)}n.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":747}],815:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],816:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],817:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},{"../internals/create-non-enumerable-property":731,"../internals/global":757}],818:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),o=e("../internals/object-define-property"),i=e("../internals/well-known-symbol"),s=e("../internals/descriptors"),a=i("species");t.exports=function(e){var t=r(e),n=o.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":737,"../internals/get-built-in":753,"../internals/object-define-property":793,"../internals/well-known-symbol":851}],819:[function(e,t,n){var r=e("../internals/object-define-property").f,o=e("../internals/has"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"../internals/has":758,"../internals/object-define-property":793,"../internals/well-known-symbol":851}],820:[function(e,t,n){var r=e("../internals/shared"),o=e("../internals/uid"),i=r("keys");t.exports=function(e){return i[e]||(i[e]=o(e))}},{"../internals/shared":822,"../internals/uid":848}],821:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/set-global"),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},{"../internals/global":757,"../internals/set-global":817}],822:[function(e,t,n){var r=e("../internals/is-pure"),o=e("../internals/shared-store");(t.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":774,"../internals/shared-store":821}],823:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/a-function"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[i])?t:o(n)}},{"../internals/a-function":699,"../internals/an-object":704,"../internals/well-known-symbol":851}],824:[function(e,t,n){var r=e("../internals/fails");t.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},{"../internals/fails":747}],825:[function(e,t,n){var r=e("../internals/to-integer"),o=e("../internals/require-object-coercible"),i=function(e){return function(t,n){var i,s,a=String(o(t)),l=r(n),c=a.length;return l<0||l>=c?e?"":void 0:(i=a.charCodeAt(l))<55296||i>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):i:e?a.slice(l,l+2):s-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},{"../internals/require-object-coercible":815,"../internals/to-integer":837}],826:[function(e,t,n){var r=e("../internals/engine-user-agent");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":743}],827:[function(e,t,n){var r=e("../internals/to-length"),o=e("../internals/string-repeat"),i=e("../internals/require-object-coercible"),s=Math.ceil,a=function(e){return function(t,n,a){var l,c,u=String(i(t)),d=u.length,p=void 0===a?" ":String(a),h=r(n);return h<=d||""==p?u:(l=h-d,(c=o.call(p,s(l/p.length))).length>l&&(c=c.slice(0,l)),e?u+c:c+u)}};t.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":815,"../internals/string-repeat":829,"../internals/to-length":838}],828:[function(e,t,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",s=Math.floor,a=String.fromCharCode,l=function(e){return e+22+75*(e<26)},c=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;r+=36)e=s(e/35);return s(r+36*e/(e+38))},u=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,u=128,d=0,p=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(a(n));var h=r.length,m=h;for(h&&r.push("-");m<o;){var f=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=u&&n<f&&(f=n);var g=m+1;if(f-u>s((2147483647-d)/g))throw RangeError(i);for(d+=(f-u)*g,u=f,t=0;t<e.length;t++){if((n=e[t])<u&&++d>2147483647)throw RangeError(i);if(n==u){for(var b=d,v=36;;v+=36){var y=v<=p?1:v>=p+26?26:v-p;if(b<y)break;var j=b-y,_=36-y;r.push(a(l(y+j%_))),b=s(j/_)}r.push(a(l(b))),p=c(d,g,m==h),d=0,++m}}++d,++u}return r.join("")};t.exports=function(e){var t,n,i=[],s=e.toLowerCase().replace(o,".").split(".");for(t=0;t<s.length;t++)n=s[t],i.push(r.test(n)?"xn--"+u(n):n);return i.join(".")}},{}],829:[function(e,t,n){"use strict";var r=e("../internals/to-integer"),o=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},{"../internals/require-object-coercible":815,"../internals/to-integer":837}],830:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},{"../internals/fails":747,"../internals/whitespaces":852}],831:[function(e,t,n){var r=e("../internals/require-object-coercible"),o="["+e("../internals/whitespaces")+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),a=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(s,"")),n}};t.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":815,"../internals/whitespaces":852}],832:[function(e,t,n){var r,o,i,s=e("../internals/global"),a=e("../internals/fails"),l=e("../internals/function-bind-context"),c=e("../internals/html"),u=e("../internals/document-create-element"),d=e("../internals/engine-is-ios"),p=e("../internals/engine-is-node"),h=s.location,m=s.setImmediate,f=s.clearImmediate,g=s.process,b=s.MessageChannel,v=s.Dispatch,y=0,j={},_=function(e){if(j.hasOwnProperty(e)){var t=j[e];delete j[e],t()}},w=function(e){return function(){_(e)}},I=function(e){_(e.data)},x=function(e){s.postMessage(e+"",h.protocol+"//"+h.host)};m&&f||(m=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return j[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(y),y},f=function(e){delete j[e]},p?r=function(e){g.nextTick(w(e))}:v&&v.now?r=function(e){v.now(w(e))}:b&&!d?(i=(o=new b).port2,o.port1.onmessage=I,r=l(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&h&&"file:"!==h.protocol&&!a(x)?(r=x,s.addEventListener("message",I,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),_(e)}}:function(e){setTimeout(w(e),0)}),t.exports={set:m,clear:f}},{"../internals/document-create-element":738,"../internals/engine-is-ios":740,"../internals/engine-is-node":741,"../internals/fails":747,"../internals/function-bind-context":751,"../internals/global":757,"../internals/html":761}],833:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":721}],834:[function(e,t,n){var r=e("../internals/to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},{"../internals/to-integer":837}],835:[function(e,t,n){var r=e("../internals/to-integer"),o=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length or index");return n}},{"../internals/to-integer":837,"../internals/to-length":838}],836:[function(e,t,n){var r=e("../internals/indexed-object"),o=e("../internals/require-object-coercible");t.exports=function(e){return r(o(e))}},{"../internals/indexed-object":764,"../internals/require-object-coercible":815}],837:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],838:[function(e,t,n){var r=e("../internals/to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"../internals/to-integer":837}],839:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":815}],840:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},{"../internals/to-positive-integer":841}],841:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":837}],842:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":773}],843:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":851}],844:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/descriptors"),s=e("../internals/typed-array-constructors-require-wrappers"),a=e("../internals/array-buffer-view-core"),l=e("../internals/array-buffer"),c=e("../internals/an-instance"),u=e("../internals/create-property-descriptor"),d=e("../internals/create-non-enumerable-property"),p=e("../internals/to-length"),h=e("../internals/to-index"),m=e("../internals/to-offset"),f=e("../internals/to-primitive"),g=e("../internals/has"),b=e("../internals/classof"),v=e("../internals/is-object"),y=e("../internals/object-create"),j=e("../internals/object-set-prototype-of"),_=e("../internals/object-get-own-property-names").f,w=e("../internals/typed-array-from"),I=e("../internals/array-iteration").forEach,x=e("../internals/set-species"),E=e("../internals/object-define-property"),k=e("../internals/object-get-own-property-descriptor"),C=e("../internals/internal-state"),S=e("../internals/inherit-if-required"),T=C.get,N=C.set,A=E.f,O=k.f,V=Math.round,P=o.RangeError,K=l.ArrayBuffer,D=l.DataView,L=a.NATIVE_ARRAY_BUFFER_VIEWS,R=a.TYPED_ARRAY_TAG,F=a.TypedArray,M=a.TypedArrayPrototype,$=a.aTypedArrayConstructor,B=a.isTypedArray,z=function(e,t){for(var n=0,r=t.length,o=new($(e))(r);r>n;)o[n]=t[n++];return o},U=function(e,t){A(e,t,{get:function(){return T(this)[t]}})},H=function(e){var t;return e instanceof K||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},q=function(e,t){return B(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},G=function(e,t){return q(e,t=f(t,!0))?u(2,e[t]):O(e,t)},W=function(e,t,n){return!(q(e,t=f(t,!0))&&v(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?A(e,t,n):(e[t]=n.value,e)};i?(L||(k.f=G,E.f=W,U(M,"buffer"),U(M,"byteOffset"),U(M,"byteLength"),U(M,"length")),r({target:"Object",stat:!0,forced:!L},{getOwnPropertyDescriptor:G,defineProperty:W}),t.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,f=o[a],g=f,b=g&&g.prototype,E={},k=function(e,t){A(e,t,{get:function(){return function(e,t){var n=T(e);return n.view[l](t*i+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var o=T(e);n&&(r=(r=V(r))<0?0:r>255?255:255&r),o.view[u](t*i+o.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};L?s&&(g=t((function(e,t,n,r){return c(e,g,a),S(v(t)?H(t)?void 0!==r?new f(t,m(n,i),r):void 0!==n?new f(t,m(n,i)):new f(t):B(t)?z(g,t):w.call(g,t):new f(h(t)),e,g)})),j&&j(g,F),I(_(f),(function(e){e in g||d(g,e,f[e])})),g.prototype=b):(g=t((function(e,t,n,r){c(e,g,a);var o,s,l,u=0,d=0;if(v(t)){if(!H(t))return B(t)?z(g,t):w.call(g,t);o=t,d=m(n,i);var f=t.byteLength;if(void 0===r){if(f%i)throw P("Wrong length");if((s=f-d)<0)throw P("Wrong length")}else if((s=p(r)*i)+d>f)throw P("Wrong length");l=s/i}else l=h(t),o=new K(s=l*i);for(N(e,{buffer:o,byteOffset:d,byteLength:s,length:l,view:new D(o)});u<l;)k(e,u++)})),j&&j(g,F),b=g.prototype=y(M)),b.constructor!==g&&d(b,"constructor",g),R&&d(b,R,a),E[a]=g,r({global:!0,forced:g!=f,sham:!L},E),"BYTES_PER_ELEMENT"in g||d(g,"BYTES_PER_ELEMENT",i),"BYTES_PER_ELEMENT"in b||d(b,"BYTES_PER_ELEMENT",i),x(a)}):t.exports=function(){}},{"../internals/an-instance":703,"../internals/array-buffer":707,"../internals/array-buffer-view-core":706,"../internals/array-iteration":713,"../internals/classof":722,"../internals/create-non-enumerable-property":731,"../internals/create-property-descriptor":732,"../internals/descriptors":737,"../internals/export":746,"../internals/global":757,"../internals/has":758,"../internals/inherit-if-required":765,"../internals/internal-state":768,"../internals/is-object":773,"../internals/object-create":791,"../internals/object-define-property":793,"../internals/object-get-own-property-descriptor":794,"../internals/object-get-own-property-names":796,"../internals/object-set-prototype-of":802,"../internals/set-species":818,"../internals/to-index":835,"../internals/to-length":838,"../internals/to-offset":840,"../internals/to-primitive":842,"../internals/typed-array-constructors-require-wrappers":845,"../internals/typed-array-from":847}],845:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/fails"),i=e("../internals/check-correctness-of-iteration"),s=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,l=r.Int8Array;t.exports=!s||!o((function(){l(1)}))||!o((function(){new l(-1)}))||!i((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||o((function(){return 1!==new l(new a(2),1,void 0).length}))},{"../internals/array-buffer-view-core":706,"../internals/check-correctness-of-iteration":720,"../internals/fails":747,"../internals/global":757}],846:[function(e,t,n){var r=e("../internals/array-buffer-view-core").aTypedArrayConstructor,o=e("../internals/species-constructor");t.exports=function(e,t){for(var n=o(e,e.constructor),i=0,s=t.length,a=new(r(n))(s);s>i;)a[i]=t[i++];return a}},{"../internals/array-buffer-view-core":706,"../internals/species-constructor":823}],847:[function(e,t,n){var r=e("../internals/to-object"),o=e("../internals/to-length"),i=e("../internals/get-iterator-method"),s=e("../internals/is-array-iterator-method"),a=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,n,c,u,d,p,h=r(e),m=arguments.length,f=m>1?arguments[1]:void 0,g=void 0!==f,b=i(h);if(null!=b&&!s(b))for(p=(d=b.call(h)).next,h=[];!(u=p.call(d)).done;)h.push(u.value);for(g&&m>2&&(f=a(f,arguments[2],2)),n=o(h.length),c=new(l(this))(n),t=0;n>t;t++)c[t]=g?f(h[t],t):h[t];return c}},{"../internals/array-buffer-view-core":706,"../internals/function-bind-context":751,"../internals/get-iterator-method":754,"../internals/is-array-iterator-method":769,"../internals/to-length":838,"../internals/to-object":839}],848:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+o).toString(36)}},{}],849:[function(e,t,n){var r=e("../internals/native-symbol");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":782}],850:[function(e,t,n){var r=e("../internals/well-known-symbol");n.f=r},{"../internals/well-known-symbol":851}],851:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/shared"),i=e("../internals/has"),s=e("../internals/uid"),a=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),c=o("wks"),u=r.Symbol,d=l?u:u&&u.withoutSetter||s;t.exports=function(e){return i(c,e)||(a&&i(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},{"../internals/global":757,"../internals/has":758,"../internals/native-symbol":782,"../internals/shared":822,"../internals/uid":848,"../internals/use-symbol-as-uid":849}],852:[function(e,t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},{}],853:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/array-buffer"),s=e("../internals/an-object"),a=e("../internals/to-absolute-index"),l=e("../internals/to-length"),c=e("../internals/species-constructor"),u=i.ArrayBuffer,d=i.DataView,p=u.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(s(this),e);for(var n=s(this).byteLength,r=a(e,n),o=a(void 0===t?n:t,n),i=new(c(this,u))(l(o-r)),h=new d(this),m=new d(i),f=0;r<o;)m.setUint8(f++,h.getUint8(r++));return i}})},{"../internals/an-object":704,"../internals/array-buffer":707,"../internals/export":746,"../internals/fails":747,"../internals/species-constructor":823,"../internals/to-absolute-index":834,"../internals/to-length":838}],854:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/is-array"),s=e("../internals/is-object"),a=e("../internals/to-object"),l=e("../internals/to-length"),c=e("../internals/create-property"),u=e("../internals/array-species-create"),d=e("../internals/array-method-has-species-support"),p=e("../internals/well-known-symbol"),h=e("../internals/engine-v8-version"),m=p("isConcatSpreadable"),f=h>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),g=d("concat"),b=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!f||!g},{concat:function(e){var t,n,r,o,i,s=a(this),d=u(s,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(b(i=-1===t?s:arguments[t])){if(p+(o=l(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,p++)n in i&&c(d,p,i[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(d,p++,i)}return d.length=p,d}})},{"../internals/array-method-has-species-support":715,"../internals/array-species-create":718,"../internals/create-property":733,"../internals/engine-v8-version":744,"../internals/export":746,"../internals/fails":747,"../internals/is-array":770,"../internals/is-object":773,"../internals/to-length":838,"../internals/to-object":839,"../internals/well-known-symbol":851}],855:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").every;r({target:"Array",proto:!0,forced:!e("../internals/array-method-is-strict")("every")},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":713,"../internals/array-method-is-strict":716,"../internals/export":746}],856:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-fill"),i=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{fill:o}),i("fill")},{"../internals/add-to-unscopables":701,"../internals/array-fill":709,"../internals/export":746}],857:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").filter;r({target:"Array",proto:!0,forced:!e("../internals/array-method-has-species-support")("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":713,"../internals/array-method-has-species-support":715,"../internals/export":746}],858:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").findIndex,i=e("../internals/add-to-unscopables"),s=!0;"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},{"../internals/add-to-unscopables":701,"../internals/array-iteration":713,"../internals/export":746}],859:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").find,i=e("../internals/add-to-unscopables"),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},{"../internals/add-to-unscopables":701,"../internals/array-iteration":713,"../internals/export":746}],860:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/flatten-into-array"),i=e("../internals/to-object"),s=e("../internals/to-length"),a=e("../internals/a-function"),l=e("../internals/array-species-create");r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=s(n.length);return a(e),(t=l(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},{"../internals/a-function":699,"../internals/array-species-create":718,"../internals/export":746,"../internals/flatten-into-array":749,"../internals/to-length":838,"../internals/to-object":839}],861:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/flatten-into-array"),i=e("../internals/to-object"),s=e("../internals/to-length"),a=e("../internals/to-integer"),l=e("../internals/array-species-create");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=s(t.length),r=l(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:a(e)),r}})},{"../internals/array-species-create":718,"../internals/export":746,"../internals/flatten-into-array":749,"../internals/to-integer":837,"../internals/to-length":838,"../internals/to-object":839}],862:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-for-each");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},{"../internals/array-for-each":710,"../internals/export":746}],863:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:o})},{"../internals/array-from":711,"../internals/check-correctness-of-iteration":720,"../internals/export":746}],864:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-includes").includes,i=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":701,"../internals/array-includes":712,"../internals/export":746}],865:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-includes").indexOf,i=e("../internals/array-method-is-strict"),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,l=i("indexOf");r({target:"Array",proto:!0,forced:a||!l},{indexOf:function(e){return a?s.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-includes":712,"../internals/array-method-is-strict":716,"../internals/export":746}],866:[function(e,t,n){e("../internals/export")({target:"Array",stat:!0},{isArray:e("../internals/is-array")})},{"../internals/export":746,"../internals/is-array":770}],867:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),o=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),s=e("../internals/internal-state"),a=e("../internals/define-iterator"),l=s.set,c=s.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},{"../internals/add-to-unscopables":701,"../internals/define-iterator":735,"../internals/internal-state":768,"../internals/iterators":779,"../internals/to-indexed-object":836}],868:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/indexed-object"),i=e("../internals/to-indexed-object"),s=e("../internals/array-method-is-strict"),a=[].join,l=o!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return a.call(i(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":716,"../internals/export":746,"../internals/indexed-object":764,"../internals/to-indexed-object":836}],869:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-last-index-of");r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},{"../internals/array-last-index-of":714,"../internals/export":746}],870:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").map;r({target:"Array",proto:!0,forced:!e("../internals/array-method-has-species-support")("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":713,"../internals/array-method-has-species-support":715,"../internals/export":746}],871:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-reduce").right,i=e("../internals/array-method-is-strict"),s=e("../internals/engine-v8-version"),a=e("../internals/engine-is-node");r({target:"Array",proto:!0,forced:!i("reduceRight")||!a&&s>79&&s<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-method-is-strict":716,"../internals/array-reduce":717,"../internals/engine-is-node":741,"../internals/engine-v8-version":744,"../internals/export":746}],872:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-reduce").left,i=e("../internals/array-method-is-strict"),s=e("../internals/engine-v8-version"),a=e("../internals/engine-is-node");r({target:"Array",proto:!0,forced:!i("reduce")||!a&&s>79&&s<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-method-is-strict":716,"../internals/array-reduce":717,"../internals/engine-is-node":741,"../internals/engine-v8-version":744,"../internals/export":746}],873:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/is-array"),i=[].reverse,s=[1,2];r({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},{"../internals/export":746,"../internals/is-array":770}],874:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/is-object"),i=e("../internals/is-array"),s=e("../internals/to-absolute-index"),a=e("../internals/to-length"),l=e("../internals/to-indexed-object"),c=e("../internals/create-property"),u=e("../internals/well-known-symbol"),d=e("../internals/array-method-has-species-support")("slice"),p=u("species"),h=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,u,d=l(this),f=a(d.length),g=s(e,f),b=s(void 0===t?f:t,f);if(i(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[p])&&(n=void 0):n=void 0,n===Array||void 0===n))return h.call(d,g,b);for(r=new(void 0===n?Array:n)(m(b-g,0)),u=0;g<b;g++,u++)g in d&&c(r,u,d[g]);return r.length=u,r}})},{"../internals/array-method-has-species-support":715,"../internals/create-property":733,"../internals/export":746,"../internals/is-array":770,"../internals/is-object":773,"../internals/to-absolute-index":834,"../internals/to-indexed-object":836,"../internals/to-length":838,"../internals/well-known-symbol":851}],875:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").some;r({target:"Array",proto:!0,forced:!e("../internals/array-method-is-strict")("some")},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":713,"../internals/array-method-is-strict":716,"../internals/export":746}],876:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/a-function"),i=e("../internals/to-object"),s=e("../internals/fails"),a=e("../internals/array-method-is-strict"),l=[],c=l.sort,u=s((function(){l.sort(void 0)})),d=s((function(){l.sort(null)})),p=a("sort");r({target:"Array",proto:!0,forced:u||!d||!p},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),o(e))}})},{"../internals/a-function":699,"../internals/array-method-is-strict":716,"../internals/export":746,"../internals/fails":747,"../internals/to-object":839}],877:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/to-absolute-index"),i=e("../internals/to-integer"),s=e("../internals/to-length"),a=e("../internals/to-object"),l=e("../internals/array-species-create"),c=e("../internals/create-property"),u=e("../internals/array-method-has-species-support")("splice"),d=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var n,r,u,h,m,f,g=a(this),b=s(g.length),v=o(e,b),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=b-v):(n=y-2,r=p(d(i(t),0),b-v)),b+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(g,r),h=0;h<r;h++)(m=v+h)in g&&c(u,h,g[m]);if(u.length=r,n<r){for(h=v;h<b-r;h++)f=h+n,(m=h+r)in g?g[f]=g[m]:delete g[f];for(h=b;h>b-r+n;h--)delete g[h-1]}else if(n>r)for(h=b-r;h>v;h--)f=h+n-1,(m=h+r-1)in g?g[f]=g[m]:delete g[f];for(h=0;h<n;h++)g[h+v]=arguments[h+2];return g.length=b-r+n,u}})},{"../internals/array-method-has-species-support":715,"../internals/array-species-create":718,"../internals/create-property":733,"../internals/export":746,"../internals/to-absolute-index":834,"../internals/to-integer":837,"../internals/to-length":838,"../internals/to-object":839}],878:[function(e,t,n){e("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":701}],879:[function(e,t,n){e("../internals/export")({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},{"../internals/export":746}],880:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/date-to-iso-string");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},{"../internals/date-to-iso-string":734,"../internals/export":746}],881:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-object"),s=e("../internals/to-primitive");r({target:"Date",proto:!0,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=i(this),n=s(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},{"../internals/export":746,"../internals/fails":747,"../internals/to-object":839,"../internals/to-primitive":842}],882:[function(e,t,n){var r=e("../internals/redefine"),o=Date.prototype,i=o.toString,s=o.getTime;new Date(NaN)+""!="Invalid Date"&&r(o,"toString",(function(){var e=s.call(this);return e==e?i.call(this):"Invalid Date"}))},{"../internals/redefine":810}],883:[function(e,t,n){e("../internals/export")({target:"Function",proto:!0},{bind:e("../internals/function-bind")})},{"../internals/export":746,"../internals/function-bind":752}],884:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-define-property").f,i=Function.prototype,s=i.toString,a=/^\s*function ([^ (]*)/;r&&!("name"in i)&&o(i,"name",{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},{"../internals/descriptors":737,"../internals/object-define-property":793}],885:[function(e,t,n){"use strict";var r=e("../internals/collection"),o=e("../internals/collection-strong");t.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},{"../internals/collection":725,"../internals/collection-strong":723}],886:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/is-forced"),s=e("../internals/redefine"),a=e("../internals/has"),l=e("../internals/classof-raw"),c=e("../internals/inherit-if-required"),u=e("../internals/to-primitive"),d=e("../internals/fails"),p=e("../internals/object-create"),h=e("../internals/object-get-own-property-names").f,m=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/object-define-property").f,g=e("../internals/string-trim").trim,b=o.Number,v=b.prototype,y="Number"==l(p(v)),j=function(e){var t,n,r,o,i,s,a,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=g(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=(i=c.slice(2)).length,a=0;a<s;a++)if((l=i.charCodeAt(a))<48||l>o)return NaN;return parseInt(i,r)}return+c};if(i("Number",!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var _,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(y?d((function(){v.valueOf.call(n)})):"Number"!=l(n))?c(new b(j(t)),n,w):j(t)},I=r?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;I.length>x;x++)a(b,_=I[x])&&!a(w,_)&&f(w,_,m(b,_));w.prototype=v,v.constructor=w,s(o,"Number",w)}},{"../internals/classof-raw":721,"../internals/descriptors":737,"../internals/fails":747,"../internals/global":757,"../internals/has":758,"../internals/inherit-if-required":765,"../internals/is-forced":771,"../internals/object-create":791,"../internals/object-define-property":793,"../internals/object-get-own-property-descriptor":794,"../internals/object-get-own-property-names":796,"../internals/redefine":810,"../internals/string-trim":831,"../internals/to-primitive":842}],887:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":746,"../internals/number-is-finite":787}],888:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isInteger:e("../internals/is-integer")})},{"../internals/export":746,"../internals/is-integer":772}],889:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},{"../internals/export":746}],890:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/to-integer"),i=e("../internals/this-number-value"),s=e("../internals/string-repeat"),a=e("../internals/fails"),l=1..toFixed,c=Math.floor,u=function(e,t,n){return 0===t?n:t%2==1?u(e,t-1,n*e):u(e*e,t/2,n)},d=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=c(o/1e7)},p=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=c(r/t),r=r%t*1e7},h=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+s.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){l.call({})}))},{toFixed:function(e){var t,n,r,a,l=i(this),c=o(e),m=[0,0,0,0,0,0],f="",g="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*u(2,69,1))-69)<0?l*u(2,-t,1):l/u(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(m,0,n),r=c;r>=7;)d(m,1e7,0),r-=7;for(d(m,u(10,r,1),0),r=t-1;r>=23;)p(m,1<<23),r-=23;p(m,1<<r),d(m,1,1),p(m,2),g=h(m)}else d(m,0,n),d(m,1<<-t,0),g=h(m)+s.call("0",c);return g=c>0?f+((a=g.length)<=c?"0."+s.call("0",c-a)+g:g.slice(0,a-c)+"."+g.slice(a-c)):f+g}})},{"../internals/export":746,"../internals/fails":747,"../internals/string-repeat":829,"../internals/this-number-value":833,"../internals/to-integer":837}],891:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/this-number-value"),s=1..toPrecision;r({target:"Number",proto:!0,forced:o((function(){return"1"!==s.call(1,void 0)}))||!o((function(){s.call({})}))},{toPrecision:function(e){return void 0===e?s.call(i(this)):s.call(i(this),e)}})},{"../internals/export":746,"../internals/fails":747,"../internals/this-number-value":833}],892:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/object-assign");r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},{"../internals/export":746,"../internals/object-assign":790}],893:[function(e,t,n){e("../internals/export")({target:"Object",stat:!0,sham:!e("../internals/descriptors")},{create:e("../internals/object-create")})},{"../internals/descriptors":737,"../internals/export":746,"../internals/object-create":791}],894:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/descriptors");r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:e("../internals/object-define-properties")})},{"../internals/descriptors":737,"../internals/export":746,"../internals/object-define-properties":792}],895:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/descriptors");r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:e("../internals/object-define-property").f})},{"../internals/descriptors":737,"../internals/export":746,"../internals/object-define-property":793}],896:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/object-to-array").entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},{"../internals/export":746,"../internals/object-to-array":803}],897:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-indexed-object"),s=e("../internals/object-get-own-property-descriptor").f,a=e("../internals/descriptors"),l=o((function(){s(1)}));r({target:"Object",stat:!0,forced:!a||l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},{"../internals/descriptors":737,"../internals/export":746,"../internals/fails":747,"../internals/object-get-own-property-descriptor":794,"../internals/to-indexed-object":836}],898:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/descriptors"),i=e("../internals/own-keys"),s=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-descriptor"),l=e("../internals/create-property");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=s(e),o=a.f,c=i(r),u={},d=0;c.length>d;)void 0!==(n=o(r,t=c[d++]))&&l(u,t,n);return u}})},{"../internals/create-property":733,"../internals/descriptors":737,"../internals/export":746,"../internals/object-get-own-property-descriptor":794,"../internals/own-keys":805,"../internals/to-indexed-object":836}],899:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/object-get-own-property-names-external").f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},{"../internals/export":746,"../internals/fails":747,"../internals/object-get-own-property-names-external":795}],900:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-object"),s=e("../internals/object-get-prototype-of"),a=e("../internals/correct-prototype-getter");r({target:"Object",stat:!0,forced:o((function(){s(1)})),sham:!a},{getPrototypeOf:function(e){return s(i(e))}})},{"../internals/correct-prototype-getter":728,"../internals/export":746,"../internals/fails":747,"../internals/object-get-prototype-of":798,"../internals/to-object":839}],901:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/to-object"),i=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){i(1)}))},{keys:function(e){return i(o(e))}})},{"../internals/export":746,"../internals/fails":747,"../internals/object-keys":800,"../internals/to-object":839}],902:[function(e,t,n){var r=e("../internals/to-string-tag-support"),o=e("../internals/redefine"),i=e("../internals/object-to-string");r||o(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":804,"../internals/redefine":810,"../internals/to-string-tag-support":843}],903:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/object-to-array").values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},{"../internals/export":746,"../internals/object-to-array":803}],904:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/number-parse-float");r({global:!0,forced:parseFloat!=o},{parseFloat:o})},{"../internals/export":746,"../internals/number-parse-float":788}],905:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/number-parse-int");r({global:!0,forced:parseInt!=o},{parseInt:o})},{"../internals/export":746,"../internals/number-parse-int":789}],906:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/a-function"),i=e("../internals/get-built-in"),s=e("../internals/new-promise-capability"),a=e("../internals/perform"),l=e("../internals/iterate");r({target:"Promise",stat:!0},{any:function(e){var t=this,n=s.f(t),r=n.resolve,c=n.reject,u=a((function(){var n=o(t.resolve),s=[],a=0,u=1,d=!1;l(e,(function(e){var o=a++,l=!1;s.push(void 0),u++,n.call(t,e).then((function(e){l||d||(d=!0,r(e))}),(function(e){l||d||(l=!0,s[o]=e,--u||c(new(i("AggregateError"))(s,"No one promise resolved")))}))})),--u||c(new(i("AggregateError"))(s,"No one promise resolved"))}));return u.error&&c(u.value),n.promise}})},{"../internals/a-function":699,"../internals/export":746,"../internals/get-built-in":753,"../internals/iterate":776,"../internals/new-promise-capability":785,"../internals/perform":807}],907:[function(e,t,n){"use strict";var r,o,i,s,a=e("../internals/export"),l=e("../internals/is-pure"),c=e("../internals/global"),u=e("../internals/get-built-in"),d=e("../internals/native-promise-constructor"),p=e("../internals/redefine"),h=e("../internals/redefine-all"),m=e("../internals/set-to-string-tag"),f=e("../internals/set-species"),g=e("../internals/is-object"),b=e("../internals/a-function"),v=e("../internals/an-instance"),y=e("../internals/inspect-source"),j=e("../internals/iterate"),_=e("../internals/check-correctness-of-iteration"),w=e("../internals/species-constructor"),I=e("../internals/task").set,x=e("../internals/microtask"),E=e("../internals/promise-resolve"),k=e("../internals/host-report-errors"),C=e("../internals/new-promise-capability"),S=e("../internals/perform"),T=e("../internals/internal-state"),N=e("../internals/is-forced"),A=e("../internals/well-known-symbol"),O=e("../internals/engine-is-node"),V=e("../internals/engine-v8-version"),P=A("species"),K="Promise",D=T.get,L=T.set,R=T.getterFor(K),F=d,M=c.TypeError,$=c.document,B=c.process,z=u("fetch"),U=C.f,H=U,q=!!($&&$.createEvent&&c.dispatchEvent),G="function"==typeof PromiseRejectionEvent,W=N(K,(function(){if(!(y(F)!==String(F))){if(66===V)return!0;if(!O&&!G)return!0}if(l&&!F.prototype.finally)return!0;if(V>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[P]=t,!(e.then((function(){}))instanceof t)})),Y=W||!_((function(e){F.all(e).catch((function(){}))})),X=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;x((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var s,a,l,c=n[i++],u=o?c.ok:c.fail,d=c.resolve,p=c.reject,h=c.domain;try{u?(o||(2===e.rejection&&te(e),e.rejection=1),!0===u?s=r:(h&&h.enter(),s=u(r),h&&(h.exit(),l=!0)),s===c.promise?p(M("Promise-chain cycle")):(a=X(s))?a.call(s,d,p):d(s)):p(r)}catch(e){h&&!l&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Q(e)}))}},J=function(e,t,n){var r,o;q?((r=$.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!G&&(o=c["on"+e])?o(r):"unhandledrejection"===e&&k("Unhandled promise rejection",n)},Q=function(e){I.call(c,(function(){var t,n=e.facade,r=e.value;if(ee(e)&&(t=S((function(){O?B.emit("unhandledRejection",r,n):J("unhandledrejection",n,r)})),e.rejection=O||ee(e)?2:1,t.error))throw t.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e){I.call(c,(function(){var t=e.facade;O?B.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},ne=function(e,t,n){return function(r){e(t,r,n)}},re=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Z(e,!0))},oe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw M("Promise can't be resolved itself");var r=X(t);r?x((function(){var n={done:!1};try{r.call(t,ne(oe,n,e),ne(re,n,e))}catch(t){re(n,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){re({done:!1},t,e)}}};W&&(F=function(e){v(this,F,K),b(e),r.call(this);var t=D(this);try{e(ne(oe,t),ne(re,t))}catch(e){re(t,e)}},(r=function(e){L(this,{type:K,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(F.prototype,{then:function(e,t){var n=R(this),r=U(w(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?B.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=D(e);this.promise=e,this.resolve=ne(oe,t),this.reject=ne(re,t)},C.f=U=function(e){return e===F||e===i?new o(e):H(e)},l||"function"!=typeof d||(s=d.prototype.then,p(d.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(F,z.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:W},{Promise:F}),m(F,K,!1,!0),f(K),i=u(K),a({target:K,stat:!0,forced:W},{reject:function(e){var t=U(this);return t.reject.call(void 0,e),t.promise}}),a({target:K,stat:!0,forced:l||W},{resolve:function(e){return E(l&&this===i?F:this,e)}}),a({target:K,stat:!0,forced:Y},{all:function(e){var t=this,n=U(t),r=n.resolve,o=n.reject,i=S((function(){var n=b(t.resolve),i=[],s=0,a=1;j(e,(function(e){var l=s++,c=!1;i.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,i[l]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=U(t),r=n.reject,o=S((function(){var o=b(t.resolve);j(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},{"../internals/a-function":699,"../internals/an-instance":703,"../internals/check-correctness-of-iteration":720,"../internals/engine-is-node":741,"../internals/engine-v8-version":744,"../internals/export":746,"../internals/get-built-in":753,"../internals/global":757,"../internals/host-report-errors":760,"../internals/inspect-source":766,"../internals/internal-state":768,"../internals/is-forced":771,"../internals/is-object":773,"../internals/is-pure":774,"../internals/iterate":776,"../internals/microtask":780,"../internals/native-promise-constructor":781,"../internals/new-promise-capability":785,"../internals/perform":807,"../internals/promise-resolve":808,"../internals/redefine":810,"../internals/redefine-all":809,"../internals/set-species":818,"../internals/set-to-string-tag":819,"../internals/species-constructor":823,"../internals/task":832,"../internals/well-known-symbol":851}],908:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/get-built-in"),i=e("../internals/a-function"),s=e("../internals/an-object"),a=e("../internals/is-object"),l=e("../internals/object-create"),c=e("../internals/function-bind"),u=e("../internals/fails"),d=o("Reflect","construct"),p=u((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!u((function(){d((function(){}))})),m=p||h;r({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(e,t){i(e),s(t);var n=arguments.length<3?e:i(arguments[2]);if(h&&!p)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var o=n.prototype,u=l(a(o)?o:Object.prototype),m=Function.apply.call(e,u,t);return a(m)?m:u}})},{"../internals/a-function":699,"../internals/an-object":704,"../internals/export":746,"../internals/fails":747,"../internals/function-bind":752,"../internals/get-built-in":753,"../internals/is-object":773,"../internals/object-create":791}],909:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/is-forced"),s=e("../internals/inherit-if-required"),a=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,c=e("../internals/is-regexp"),u=e("../internals/regexp-flags"),d=e("../internals/regexp-sticky-helpers"),p=e("../internals/redefine"),h=e("../internals/fails"),m=e("../internals/internal-state").set,f=e("../internals/set-species"),g=e("../internals/well-known-symbol")("match"),b=o.RegExp,v=b.prototype,y=/a/g,j=/a/g,_=new b(y)!==y,w=d.UNSUPPORTED_Y;if(r&&i("RegExp",!_||w||h((function(){return j[g]=!1,b(y)!=y||b(j)==j||"/a/i"!=b(y,"i")})))){for(var I=function(e,t){var n,r=this instanceof I,o=c(e),i=void 0===t;if(!r&&o&&e.constructor===I&&i)return e;_?o&&!i&&(e=e.source):e instanceof I&&(i&&(t=u.call(e)),e=e.source),w&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var a=s(_?new b(e,t):b(e,t),r?this:v,I);return w&&n&&m(a,{sticky:n}),a},x=function(e){e in I||a(I,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},E=l(b),k=0;E.length>k;)x(E[k++]);v.constructor=I,I.prototype=v,p(o,"RegExp",I)}f("RegExp")},{"../internals/descriptors":737,"../internals/fails":747,"../internals/global":757,"../internals/inherit-if-required":765,"../internals/internal-state":768,"../internals/is-forced":771,"../internals/is-regexp":775,"../internals/object-define-property":793,"../internals/object-get-own-property-names":796,"../internals/redefine":810,"../internals/regexp-flags":813,"../internals/regexp-sticky-helpers":814,"../internals/set-species":818,"../internals/well-known-symbol":851}],910:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/regexp-exec");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},{"../internals/export":746,"../internals/regexp-exec":812}],911:[function(e,t,n){"use strict";var r=e("../internals/redefine"),o=e("../internals/an-object"),i=e("../internals/fails"),s=e("../internals/regexp-flags"),a=RegExp.prototype,l=a.toString,c=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u="toString"!=l.name;(c||u)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in a)?s.call(e):n)}),{unsafe:!0})},{"../internals/an-object":704,"../internals/fails":747,"../internals/redefine":810,"../internals/regexp-flags":813}],912:[function(e,t,n){"use strict";var r=e("../internals/collection"),o=e("../internals/collection-strong");t.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},{"../internals/collection":725,"../internals/collection-strong":723}],913:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("anchor")},{anchor:function(e){return o(this,"a","name",e)}})},{"../internals/create-html":729,"../internals/export":746,"../internals/string-html-forced":824}],914:[function(e,t,n){"use strict";var r,o=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,s=e("../internals/to-length"),a=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),c=e("../internals/correct-is-regexp-logic"),u=e("../internals/is-pure"),d="".endsWith,p=Math.min,h=c("endsWith");o({target:"String",proto:!0,forced:!!(u||h||(r=i(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function(e){var t=String(l(this));a(e);var n=arguments.length>1?arguments[1]:void 0,r=s(t.length),o=void 0===n?r:p(s(n),r),i=String(e);return d?d.call(t,i,o):t.slice(o-i.length,o)===i}})},{"../internals/correct-is-regexp-logic":727,"../internals/export":746,"../internals/is-pure":774,"../internals/not-a-regexp":786,"../internals/object-get-own-property-descriptor":794,"../internals/require-object-coercible":815,"../internals/to-length":838}],915:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/not-a-regexp"),i=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":727,"../internals/export":746,"../internals/not-a-regexp":786,"../internals/require-object-coercible":815}],916:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("italics")},{italics:function(){return o(this,"i","","")}})},{"../internals/create-html":729,"../internals/export":746,"../internals/string-html-forced":824}],917:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,o=e("../internals/internal-state"),i=e("../internals/define-iterator"),s=o.set,a=o.getterFor("String Iterator");i(String,"String",(function(e){s(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=a(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},{"../internals/define-iterator":735,"../internals/internal-state":768,"../internals/string-multibyte":825}],918:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("link")},{link:function(e){return o(this,"a","href",e)}})},{"../internals/create-html":729,"../internals/export":746,"../internals/string-html-forced":824}],919:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-iterator-constructor"),i=e("../internals/require-object-coercible"),s=e("../internals/to-length"),a=e("../internals/a-function"),l=e("../internals/an-object"),c=e("../internals/classof-raw"),u=e("../internals/is-regexp"),d=e("../internals/regexp-flags"),p=e("../internals/create-non-enumerable-property"),h=e("../internals/fails"),m=e("../internals/well-known-symbol"),f=e("../internals/species-constructor"),g=e("../internals/advance-string-index"),b=e("../internals/internal-state"),v=e("../internals/is-pure"),y=m("matchAll"),j=b.set,_=b.getterFor("RegExp String Iterator"),w=RegExp.prototype,I=w.exec,x="".matchAll,E=!!x&&!h((function(){"a".matchAll(/./)})),k=o((function(e,t,n,r){j(this,{type:"RegExp String Iterator",regexp:e,string:t,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var e=_(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return I.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=g(n,s(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),C=function(e){var t,n,r,o,i,a,c=l(this),u=String(e);return t=f(c,RegExp),void 0===(n=c.flags)&&c instanceof RegExp&&!("flags"in w)&&(n=d.call(c)),r=void 0===n?"":String(n),o=new t(t===RegExp?c.source:c,r),i=!!~r.indexOf("g"),a=!!~r.indexOf("u"),o.lastIndex=s(c.lastIndex),new k(o,u,i,a)};r({target:"String",proto:!0,forced:E},{matchAll:function(e){var t,n,r,o=i(this);if(null!=e){if(u(e)&&!~String(i("flags"in w?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(E)return x.apply(o,arguments);if(void 0===(n=e[y])&&v&&"RegExp"==c(e)&&(n=C),null!=n)return a(n).call(e,o)}else if(E)return x.apply(o,arguments);return t=String(o),r=new RegExp(e,"g"),v?C.call(r,t):r[y](t)}}),v||y in w||p(w,y,C)},{"../internals/a-function":699,"../internals/advance-string-index":702,"../internals/an-object":704,"../internals/classof-raw":721,"../internals/create-iterator-constructor":730,"../internals/create-non-enumerable-property":731,"../internals/export":746,"../internals/fails":747,"../internals/internal-state":768,"../internals/is-pure":774,"../internals/is-regexp":775,"../internals/regexp-flags":813,"../internals/require-object-coercible":815,"../internals/species-constructor":823,"../internals/to-length":838,"../internals/well-known-symbol":851}],920:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-length"),s=e("../internals/require-object-coercible"),a=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=s(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var s=o(e),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;for(var d,p=[],h=0;null!==(d=l(s,c));){var m=String(d[0]);p[h]=m,""===m&&(s.lastIndex=a(c,i(s.lastIndex),u)),h++}return 0===h?null:p}]}))},{"../internals/advance-string-index":702,"../internals/an-object":704,"../internals/fix-regexp-well-known-symbol-logic":748,"../internals/regexp-exec-abstract":811,"../internals/require-object-coercible":815,"../internals/to-length":838}],921:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/string-pad").start;r({target:"String",proto:!0,forced:e("../internals/string-pad-webkit-bug")},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/export":746,"../internals/string-pad":827,"../internals/string-pad-webkit-bug":826}],922:[function(e,t,n){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":746,"../internals/string-repeat":829}],923:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/require-object-coercible"),i=e("../internals/is-regexp"),s=e("../internals/regexp-flags"),a=e("../internals/get-substitution"),l=e("../internals/well-known-symbol"),c=e("../internals/is-pure"),u=l("replace"),d=RegExp.prototype,p=Math.max,h=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,l,m,f,g,b,v,y=o(this),j=0,_=0,w="";if(null!=e){if((n=i(e))&&!~String(o("flags"in d?e.flags:s.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[u]))return r.call(e,y,t);if(c&&n)return String(y).replace(e,t)}for(l=String(y),m=String(e),(f="function"==typeof t)||(t=String(t)),g=m.length,b=p(1,g),j=h(l,m,0);-1!==j;)v=f?String(t(m,j,l)):a(m,l,j,[],void 0,t),w+=l.slice(_,j)+v,_=j+g,j=h(l,m,j+b);return _<l.length&&(w+=l.slice(_)),w}})},{"../internals/export":746,"../internals/get-substitution":756,"../internals/is-pure":774,"../internals/is-regexp":775,"../internals/regexp-flags":813,"../internals/require-object-coercible":815,"../internals/well-known-symbol":851}],924:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-length"),s=e("../internals/to-integer"),a=e("../internals/require-object-coercible"),l=e("../internals/advance-string-index"),c=e("../internals/get-substitution"),u=e("../internals/regexp-exec-abstract"),d=Math.max,p=Math.min;r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,f=h?"$":"$0";return[function(n,r){var o=a(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!h&&m||"string"==typeof r&&-1===r.indexOf(f)){var a=n(t,e,this,r);if(a.done)return a.value}var g=o(e),b=String(this),v="function"==typeof r;v||(r=String(r));var y=g.global;if(y){var j=g.unicode;g.lastIndex=0}for(var _=[];;){var w=u(g,b);if(null===w)break;if(_.push(w),!y)break;""===String(w[0])&&(g.lastIndex=l(b,i(g.lastIndex),j))}for(var I,x="",E=0,k=0;k<_.length;k++){w=_[k];for(var C=String(w[0]),S=d(p(s(w.index),b.length),0),T=[],N=1;N<w.length;N++)T.push(void 0===(I=w[N])?I:String(I));var A=w.groups;if(v){var O=[C].concat(T,S,b);void 0!==A&&O.push(A);var V=String(r.apply(void 0,O))}else V=c(C,b,S,T,A,r);S>=E&&(x+=b.slice(E,S)+V,E=S+C.length)}return x+b.slice(E)}]}))},{"../internals/advance-string-index":702,"../internals/an-object":704,"../internals/fix-regexp-well-known-symbol-logic":748,"../internals/get-substitution":756,"../internals/regexp-exec-abstract":811,"../internals/require-object-coercible":815,"../internals/to-integer":837,"../internals/to-length":838}],925:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/require-object-coercible"),s=e("../internals/same-value"),a=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=o(e),l=String(this),c=i.lastIndex;s(c,0)||(i.lastIndex=0);var u=a(i,l);return s(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},{"../internals/an-object":704,"../internals/fix-regexp-well-known-symbol-logic":748,"../internals/regexp-exec-abstract":811,"../internals/require-object-coercible":815,"../internals/same-value":816}],926:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/is-regexp"),i=e("../internals/an-object"),s=e("../internals/require-object-coercible"),a=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),c=e("../internals/to-length"),u=e("../internals/regexp-exec-abstract"),d=e("../internals/regexp-exec"),p=e("../internals/fails"),h=[].push,m=Math.min,f=!p((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(s(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var a,l,c,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,f=new RegExp(e.source,p+"g");(a=d.call(f,r))&&!((l=f.lastIndex)>m&&(u.push(r.slice(m,a.index)),a.length>1&&a.index<r.length&&h.apply(u,a.slice(1)),c=a[0].length,m=l,u.length>=i));)f.lastIndex===a.index&&f.lastIndex++;return m===r.length?!c&&f.test("")||u.push(""):u.push(r.slice(m)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var s=n(r,e,this,o,r!==t);if(s.done)return s.value;var d=i(e),p=String(this),h=a(d,RegExp),g=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),v=new h(f?d:"^(?:"+d.source+")",b),y=void 0===o?4294967295:o>>>0;if(0===y)return[];if(0===p.length)return null===u(v,p)?[p]:[];for(var j=0,_=0,w=[];_<p.length;){v.lastIndex=f?_:0;var I,x=u(v,f?p:p.slice(_));if(null===x||(I=m(c(v.lastIndex+(f?0:_)),p.length))===j)_=l(p,_,g);else{if(w.push(p.slice(j,_)),w.length===y)return w;for(var E=1;E<=x.length-1;E++)if(w.push(x[E]),w.length===y)return w;_=j=I}}return w.push(p.slice(j)),w}]}),!f)},{"../internals/advance-string-index":702,"../internals/an-object":704,"../internals/fails":747,"../internals/fix-regexp-well-known-symbol-logic":748,"../internals/is-regexp":775,"../internals/regexp-exec":812,"../internals/regexp-exec-abstract":811,"../internals/require-object-coercible":815,"../internals/species-constructor":823,"../internals/to-length":838}],927:[function(e,t,n){"use strict";var r,o=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,s=e("../internals/to-length"),a=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),c=e("../internals/correct-is-regexp-logic"),u=e("../internals/is-pure"),d="".startsWith,p=Math.min,h=c("startsWith");o({target:"String",proto:!0,forced:!!(u||h||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(e){var t=String(l(this));a(e);var n=s(p(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return d?d.call(t,r,n):t.slice(n,n+r.length)===r}})},{"../internals/correct-is-regexp-logic":727,"../internals/export":746,"../internals/is-pure":774,"../internals/not-a-regexp":786,"../internals/object-get-own-property-descriptor":794,"../internals/require-object-coercible":815,"../internals/to-length":838}],928:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/string-trim").end,i=e("../internals/string-trim-forced")("trimEnd"),s=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:s,trimRight:s})},{"../internals/export":746,"../internals/string-trim":831,"../internals/string-trim-forced":830}],929:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return o(this)}})},{"../internals/export":746,"../internals/string-trim":831,"../internals/string-trim-forced":830}],930:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/descriptors"),i=e("../internals/global"),s=e("../internals/has"),a=e("../internals/is-object"),l=e("../internals/object-define-property").f,c=e("../internals/copy-constructor-properties"),u=i.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(p,u);var h=p.prototype=u.prototype;h.constructor=p;var m=h.toString,f="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=m.call(e);if(s(d,e))return"";var n=f?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},{"../internals/copy-constructor-properties":726,"../internals/descriptors":737,"../internals/export":746,"../internals/global":757,"../internals/has":758,"../internals/is-object":773,"../internals/object-define-property":793}],931:[function(e,t,n){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":736}],932:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/get-built-in"),s=e("../internals/is-pure"),a=e("../internals/descriptors"),l=e("../internals/native-symbol"),c=e("../internals/use-symbol-as-uid"),u=e("../internals/fails"),d=e("../internals/has"),p=e("../internals/is-array"),h=e("../internals/is-object"),m=e("../internals/an-object"),f=e("../internals/to-object"),g=e("../internals/to-indexed-object"),b=e("../internals/to-primitive"),v=e("../internals/create-property-descriptor"),y=e("../internals/object-create"),j=e("../internals/object-keys"),_=e("../internals/object-get-own-property-names"),w=e("../internals/object-get-own-property-names-external"),I=e("../internals/object-get-own-property-symbols"),x=e("../internals/object-get-own-property-descriptor"),E=e("../internals/object-define-property"),k=e("../internals/object-property-is-enumerable"),C=e("../internals/create-non-enumerable-property"),S=e("../internals/redefine"),T=e("../internals/shared"),N=e("../internals/shared-key"),A=e("../internals/hidden-keys"),O=e("../internals/uid"),V=e("../internals/well-known-symbol"),P=e("../internals/well-known-symbol-wrapped"),K=e("../internals/define-well-known-symbol"),D=e("../internals/set-to-string-tag"),L=e("../internals/internal-state"),R=e("../internals/array-iteration").forEach,F=N("hidden"),M=V("toPrimitive"),$=L.set,B=L.getterFor("Symbol"),z=Object.prototype,U=o.Symbol,H=i("JSON","stringify"),q=x.f,G=E.f,W=w.f,Y=k.f,X=T("symbols"),Z=T("op-symbols"),J=T("string-to-symbol-registry"),Q=T("symbol-to-string-registry"),ee=T("wks"),te=o.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=a&&u((function(){return 7!=y(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=q(z,t);r&&delete z[t],G(e,t,n),r&&e!==z&&G(z,t,r)}:G,oe=function(e,t){var n=X[e]=y(U.prototype);return $(n,{type:"Symbol",tag:e,description:t}),a||(n.description=t),n},ie=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof U},se=function(e,t,n){e===z&&se(Z,t,n),m(e);var r=b(t,!0);return m(n),d(X,r)?(n.enumerable?(d(e,F)&&e[F][r]&&(e[F][r]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,F)||G(e,F,v(1,{})),e[F][r]=!0),re(e,r,n)):G(e,r,n)},ae=function(e,t){m(e);var n=g(t),r=j(n).concat(de(n));return R(r,(function(t){a&&!le.call(n,t)||se(e,t,n[t])})),e},le=function(e){var t=b(e,!0),n=Y.call(this,t);return!(this===z&&d(X,t)&&!d(Z,t))&&(!(n||!d(this,t)||!d(X,t)||d(this,F)&&this[F][t])||n)},ce=function(e,t){var n=g(e),r=b(t,!0);if(n!==z||!d(X,r)||d(Z,r)){var o=q(n,r);return!o||!d(X,r)||d(n,F)&&n[F][r]||(o.enumerable=!0),o}},ue=function(e){var t=W(g(e)),n=[];return R(t,(function(e){d(X,e)||d(A,e)||n.push(e)})),n},de=function(e){var t=e===z,n=W(t?Z:g(e)),r=[];return R(n,(function(e){!d(X,e)||t&&!d(z,e)||r.push(X[e])})),r};(l||(S((U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=O(e),n=function(e){this===z&&n.call(Z,e),d(this,F)&&d(this[F],t)&&(this[F][t]=!1),re(this,t,v(1,e))};return a&&ne&&re(z,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return B(this).tag})),S(U,"withoutSetter",(function(e){return oe(O(e),e)})),k.f=le,E.f=se,x.f=ce,_.f=w.f=ue,I.f=de,P.f=function(e){return oe(V(e),e)},a&&(G(U.prototype,"description",{configurable:!0,get:function(){return B(this).description}}),s||S(z,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:U}),R(j(ee),(function(e){K(e)})),r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=String(e);if(d(J,t))return J[t];var n=U(t);return J[t]=n,Q[n]=t,n},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(d(Q,e))return Q[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!a},{create:function(e,t){return void 0===t?y(e):ae(y(e),t)},defineProperty:se,defineProperties:ae,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:u((function(){I.f(1)}))},{getOwnPropertySymbols:function(e){return I.f(f(e))}}),H)&&r({target:"JSON",stat:!0,forced:!l||u((function(){var e=U();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(h(t)||void 0!==e)&&!ie(e))return p(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ie(t))return t}),o[1]=t,H.apply(null,o)}});U.prototype[M]||C(U.prototype,M,U.prototype.valueOf),D(U,"Symbol"),A[F]=!0},{"../internals/an-object":704,"../internals/array-iteration":713,"../internals/create-non-enumerable-property":731,"../internals/create-property-descriptor":732,"../internals/define-well-known-symbol":736,"../internals/descriptors":737,"../internals/export":746,"../internals/fails":747,"../internals/get-built-in":753,"../internals/global":757,"../internals/has":758,"../internals/hidden-keys":759,"../internals/internal-state":768,"../internals/is-array":770,"../internals/is-object":773,"../internals/is-pure":774,"../internals/native-symbol":782,"../internals/object-create":791,"../internals/object-define-property":793,"../internals/object-get-own-property-descriptor":794,"../internals/object-get-own-property-names":796,"../internals/object-get-own-property-names-external":795,"../internals/object-get-own-property-symbols":797,"../internals/object-keys":800,"../internals/object-property-is-enumerable":801,"../internals/redefine":810,"../internals/set-to-string-tag":819,"../internals/shared":822,"../internals/shared-key":820,"../internals/to-indexed-object":836,"../internals/to-object":839,"../internals/to-primitive":842,"../internals/uid":848,"../internals/use-symbol-as-uid":849,"../internals/well-known-symbol":851,"../internals/well-known-symbol-wrapped":850}],933:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-copy-within"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return o.call(i(this),e,t,arguments.length>2?arguments[2]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-copy-within":708}],934:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713}],935:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-fill"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return o.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":706,"../internals/array-fill":709}],936:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").filter,i=e("../internals/typed-array-from-species-and-list"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=o(s(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713,"../internals/typed-array-from-species-and-list":846}],937:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713}],938:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713}],939:[function(e,t,n){e("../internals/typed-array-constructor")("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":844}],940:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713}],941:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-includes":712}],942:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-includes":712}],943:[function(e,t,n){"use strict";var r=e("../internals/global"),o=e("../internals/array-buffer-view-core"),i=e("../modules/es.array.iterator"),s=e("../internals/well-known-symbol")("iterator"),a=r.Uint8Array,l=i.values,c=i.keys,u=i.entries,d=o.aTypedArray,p=o.exportTypedArrayMethod,h=a&&a.prototype[s],m=!!h&&("values"==h.name||null==h.name),f=function(){return l.call(d(this))};p("entries",(function(){return u.call(d(this))})),p("keys",(function(){return c.call(d(this))})),p("values",f,!m),p(s,f,!m)},{"../internals/array-buffer-view-core":706,"../internals/global":757,"../internals/well-known-symbol":851,"../modules/es.array.iterator":867}],944:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=r.aTypedArray,i=r.exportTypedArrayMethod,s=[].join;i("join",(function(e){return s.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":706}],945:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-last-index-of"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return o.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":706,"../internals/array-last-index-of":714}],946:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").map,i=e("../internals/species-constructor"),s=r.aTypedArray,a=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return o(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(i(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713,"../internals/species-constructor":823}],947:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return o(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-reduce":717}],948:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return o(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-reduce":717}],949:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=r.aTypedArray,i=r.exportTypedArrayMethod,s=Math.floor;i("reverse",(function(){for(var e,t=o(this).length,n=s(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},{"../internals/array-buffer-view-core":706}],950:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-offset"),s=e("../internals/to-object"),a=e("../internals/fails"),l=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){l(this);var t=i(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=s(e),a=o(r.length),c=0;if(a+t>n)throw RangeError("Wrong length");for(;c<a;)this[t+c]=r[c++]}),a((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":706,"../internals/fails":747,"../internals/to-length":838,"../internals/to-object":839,"../internals/to-offset":840}],951:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/species-constructor"),i=e("../internals/fails"),s=r.aTypedArray,a=r.aTypedArrayConstructor,l=r.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var n=c.call(s(this),e,t),r=o(this,this.constructor),i=0,l=n.length,u=new(a(r))(l);l>i;)u[i]=n[i++];return u}),i((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":706,"../internals/fails":747,"../internals/species-constructor":823}],952:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":706,"../internals/array-iteration":713}],953:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=r.aTypedArray,i=r.exportTypedArrayMethod,s=[].sort;i("sort",(function(e){return s.call(o(this),e)}))},{"../internals/array-buffer-view-core":706}],954:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-absolute-index"),s=e("../internals/species-constructor"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),r=n.length,l=i(e,r);return new(s(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,o((void 0===t?r:i(t,r))-l))}))},{"../internals/array-buffer-view-core":706,"../internals/species-constructor":823,"../internals/to-absolute-index":834,"../internals/to-length":838}],955:[function(e,t,n){"use strict";var r=e("../internals/global"),o=e("../internals/array-buffer-view-core"),i=e("../internals/fails"),s=r.Int8Array,a=o.aTypedArray,l=o.exportTypedArrayMethod,c=[].toLocaleString,u=[].slice,d=!!s&&i((function(){c.call(new s(1))}));l("toLocaleString",(function(){return c.apply(d?u.call(a(this)):a(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!i((function(){s.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":706,"../internals/fails":747,"../internals/global":757}],956:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,o=e("../internals/fails"),i=e("../internals/global").Uint8Array,s=i&&i.prototype||{},a=[].toString,l=[].join;o((function(){a.call({})}))&&(a=function(){return l.call(this)});var c=s.toString!=a;r("toString",a,c)},{"../internals/array-buffer-view-core":706,"../internals/fails":747,"../internals/global":757}],957:[function(e,t,n){e("../internals/typed-array-constructor")("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":844}],958:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":844}],959:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{"../internals/typed-array-constructor":844}],960:[function(e,t,n){"use strict";var r,o=e("../internals/global"),i=e("../internals/redefine-all"),s=e("../internals/internal-metadata"),a=e("../internals/collection"),l=e("../internals/collection-weak"),c=e("../internals/is-object"),u=e("../internals/internal-state").enforce,d=e("../internals/native-weak-map"),p=!o.ActiveXObject&&"ActiveXObject"in o,h=Object.isExtensible,m=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},f=t.exports=a("WeakMap",m,l);if(d&&p){r=l.getConstructor(m,"WeakMap",!0),s.REQUIRED=!0;var g=f.prototype,b=g.delete,v=g.has,y=g.get,j=g.set;i(g,{delete:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),b.call(this,e)||t.frozen.delete(e)}return b.call(this,e)},has:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),v.call(this,e)||t.frozen.has(e)}return v.call(this,e)},get:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),v.call(this,e)?y.call(this,e):t.frozen.get(e)}return y.call(this,e)},set:function(e,t){if(c(e)&&!h(e)){var n=u(this);n.frozen||(n.frozen=new r),v.call(this,e)?j.call(this,e,t):n.frozen.set(e,t)}else j.call(this,e,t);return this}})}},{"../internals/collection":725,"../internals/collection-weak":724,"../internals/global":757,"../internals/internal-metadata":767,"../internals/internal-state":768,"../internals/is-object":773,"../internals/native-weak-map":784,"../internals/redefine-all":809}],961:[function(e,t,n){e("./es.promise.any")},{"./es.promise.any":906}],962:[function(e,t,n){e("./es.string.match-all")},{"./es.string.match-all":919}],963:[function(e,t,n){e("./es.string.replace-all")},{"./es.string.replace-all":923}],964:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../internals/array-for-each"),s=e("../internals/create-non-enumerable-property");for(var a in o){var l=r[a],c=l&&l.prototype;if(c&&c.forEach!==i)try{s(c,"forEach",i)}catch(e){c.forEach=i}}},{"../internals/array-for-each":710,"../internals/create-non-enumerable-property":731,"../internals/dom-iterables":739,"../internals/global":757}],965:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../modules/es.array.iterator"),s=e("../internals/create-non-enumerable-property"),a=e("../internals/well-known-symbol"),l=a("iterator"),c=a("toStringTag"),u=i.values;for(var d in o){var p=r[d],h=p&&p.prototype;if(h){if(h[l]!==u)try{s(h,l,u)}catch(e){h[l]=u}if(h[c]||s(h,c,d),o[d])for(var m in i)if(h[m]!==i[m])try{s(h,m,i[m])}catch(e){h[m]=i[m]}}}},{"../internals/create-non-enumerable-property":731,"../internals/dom-iterables":739,"../internals/global":757,"../internals/well-known-symbol":851,"../modules/es.array.iterator":867}],966:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/engine-user-agent"),s=[].slice,a=function(e){return function(t,n){var r=arguments.length>2,o=r?s.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(i)},{setTimeout:a(o.setTimeout),setInterval:a(o.setInterval)})},{"../internals/engine-user-agent":743,"../internals/export":746,"../internals/global":757}],967:[function(e,t,n){"use strict";e("../modules/es.array.iterator");var r=e("../internals/export"),o=e("../internals/get-built-in"),i=e("../internals/native-url"),s=e("../internals/redefine"),a=e("../internals/redefine-all"),l=e("../internals/set-to-string-tag"),c=e("../internals/create-iterator-constructor"),u=e("../internals/internal-state"),d=e("../internals/an-instance"),p=e("../internals/has"),h=e("../internals/function-bind-context"),m=e("../internals/classof"),f=e("../internals/an-object"),g=e("../internals/is-object"),b=e("../internals/object-create"),v=e("../internals/create-property-descriptor"),y=e("../internals/get-iterator"),j=e("../internals/get-iterator-method"),_=e("../internals/well-known-symbol"),w=o("fetch"),I=o("Headers"),x=_("iterator"),E=u.set,k=u.getterFor("URLSearchParams"),C=u.getterFor("URLSearchParamsIterator"),S=/\+/g,T=Array(4),N=function(e){return T[e-1]||(T[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},A=function(e){try{return decodeURIComponent(e)}catch(t){return e}},O=function(e){var t=e.replace(S," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(N(n--),A);return t}},V=/[!'()~]|%20/g,P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},K=function(e){return P[e]},D=function(e){return encodeURIComponent(e).replace(V,K)},L=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:O(r.shift()),value:O(r.join("="))}))},R=function(e){this.entries.length=0,L(this.entries,e)},F=function(e,t){if(e<t)throw TypeError("Not enough arguments")},M=c((function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:y(k(e).entries),kind:t})}),"Iterator",(function(){var e=C(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),$=function(){d(this,$,"URLSearchParams");var e,t,n,r,o,i,s,a,l,c=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(E(u,{type:"URLSearchParams",entries:h,updateURL:function(){},updateSearchParams:R}),void 0!==c)if(g(c))if("function"==typeof(e=j(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((s=(i=(o=y(f(r.value))).next).call(o)).done||(a=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");h.push({key:s.value+"",value:a.value+""})}else for(l in c)p(c,l)&&h.push({key:l,value:c[l]+""});else L(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},B=$.prototype;a(B,{append:function(e,t){F(arguments.length,2);var n=k(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){F(arguments.length,1);for(var t=k(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){F(arguments.length,1);for(var t=k(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){F(arguments.length,1);for(var t=k(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){F(arguments.length,1);for(var t=k(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){F(arguments.length,1);for(var n,r=k(this),o=r.entries,i=!1,s=e+"",a=t+"",l=0;l<o.length;l++)(n=o[l]).key===s&&(i?o.splice(l--,1):(i=!0,n.value=a));i||o.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=k(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=k(this).entries,r=h(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new M(this,"keys")},values:function(){return new M(this,"values")},entries:function(){return new M(this,"entries")}},{enumerable:!0}),s(B,x,B.entries),s(B,"toString",(function(){for(var e,t=k(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(D(e.key)+"="+D(e.value));return n.join("&")}),{enumerable:!0}),l($,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:$}),i||"function"!=typeof w||"function"!=typeof I||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(g(t=arguments[1])&&(n=t.body,"URLSearchParams"===m(n)&&((r=t.headers?new I(t.headers):new I).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=b(t,{body:v(0,String(n)),headers:v(0,r)}))),o.push(t)),w.apply(this,o)}}),t.exports={URLSearchParams:$,getState:k}},{"../internals/an-instance":703,"../internals/an-object":704,"../internals/classof":722,"../internals/create-iterator-constructor":730,"../internals/create-property-descriptor":732,"../internals/export":746,"../internals/function-bind-context":751,"../internals/get-built-in":753,"../internals/get-iterator":755,"../internals/get-iterator-method":754,"../internals/has":758,"../internals/internal-state":768,"../internals/is-object":773,"../internals/native-url":783,"../internals/object-create":791,"../internals/redefine":810,"../internals/redefine-all":809,"../internals/set-to-string-tag":819,"../internals/well-known-symbol":851,"../modules/es.array.iterator":867}],968:[function(e,t,n){"use strict";e("../modules/es.string.iterator");var r,o=e("../internals/export"),i=e("../internals/descriptors"),s=e("../internals/native-url"),a=e("../internals/global"),l=e("../internals/object-define-properties"),c=e("../internals/redefine"),u=e("../internals/an-instance"),d=e("../internals/has"),p=e("../internals/object-assign"),h=e("../internals/array-from"),m=e("../internals/string-multibyte").codeAt,f=e("../internals/string-punycode-to-ascii"),g=e("../internals/set-to-string-tag"),b=e("../modules/web.url-search-params"),v=e("../internals/internal-state"),y=a.URL,j=b.URLSearchParams,_=b.getState,w=v.set,I=v.getterFor("URL"),x=Math.floor,E=Math.pow,k=/[A-Za-z]/,C=/[\d+-.A-Za-z]/,S=/\d/,T=/^(0x|0X)/,N=/^[0-7]+$/,A=/^\d+$/,O=/^[\dA-Fa-f]+$/,V=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,P=/[\u0000\t\u000A\u000D #/:?@[\\]]/,K=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,D=/[\t\u000A\u000D]/g,L=function(e,t){var n,r,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=F(t.slice(1,-1))))return"Invalid host";e.host=n}else if(G(e)){if(t=f(t),V.test(t))return"Invalid host";if(null===(n=R(t)))return"Invalid host";e.host=n}else{if(P.test(t))return"Invalid host";for(n="",r=h(t),o=0;o<r.length;o++)n+=H(r[o],$);e.host=n}},R=function(e){var t,n,r,o,i,s,a,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=l[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=T.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)s=0;else{if(!(10==i?A:8==i?N:O).test(o))return e;s=parseInt(o,i)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=E(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*E(256,3-r);return a},F=function(e){var t,n,r,o,i,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=n=0;n<4&&O.test(p());)t=16*t+parseInt(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,c>6)return;for(r=0;p();){if(o=null,r>0){if(!("."==p()&&r<4))return;d++}if(!S.test(p()))return;for(;S.test(p());){if(i=parseInt(p(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}l[c]=256*l[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!=c)return;return l},M=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},$={},B=p({},$,{" ":1,'"':1,"<":1,">":1,"`":1}),z=p({},B,{"#":1,"?":1,"{":1,"}":1}),U=p({},z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),H=function(e,t){var n=m(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},G=function(e){return d(q,e.scheme)},W=function(e){return""!=e.username||""!=e.password},Y=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},X=function(e,t){var n;return 2==e.length&&k.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Z=function(e){var t;return e.length>1&&X(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},J=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&X(t[0],!0)||t.pop()},Q=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},oe={},ie={},se={},ae={},le={},ce={},ue={},de={},pe={},he={},me={},fe={},ge={},be={},ve={},ye={},je={},_e=function(e,t,n,o){var i,s,a,l,c,u=n||ee,p=0,m="",f=!1,g=!1,b=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(K,"")),t=t.replace(D,""),i=h(t);p<=i.length;){switch(s=i[p],u){case ee:if(!s||!k.test(s)){if(n)return"Invalid scheme";u=ne;continue}m+=s.toLowerCase(),u=te;break;case te:if(s&&(C.test(s)||"+"==s||"-"==s||"."==s))m+=s.toLowerCase();else{if(":"!=s){if(n)return"Invalid scheme";m="",u=ne,p=0;continue}if(n&&(G(e)!=d(q,m)||"file"==m&&(W(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=m,n)return void(G(e)&&q[e.scheme]==e.port&&(e.port=null));m="","file"==e.scheme?u=he:G(e)&&o&&o.scheme==e.scheme?u=re:G(e)?u=ae:"/"==i[p+1]?(u=oe,p++):(e.cannotBeABaseURL=!0,e.path.push(""),u=ve)}break;case ne:if(!o||o.cannotBeABaseURL&&"#"!=s)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==s){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,u=je;break}u="file"==o.scheme?he:ie;continue;case re:if("/"!=s||"/"!=i[p+1]){u=ie;continue}u=le,p++;break;case oe:if("/"==s){u=ce;break}u=be;continue;case ie:if(e.scheme=o.scheme,s==r)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==s||"\\"==s&&G(e))u=se;else if("?"==s)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",u=ye;else{if("#"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),u=be;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",u=je}break;case se:if(!G(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,u=be;continue}u=ce}else u=le;break;case ae:if(u=le,"/"!=s||"/"!=m.charAt(p+1))continue;p++;break;case le:if("/"!=s&&"\\"!=s){u=ce;continue}break;case ce:if("@"==s){f&&(m="%40"+m),f=!0,a=h(m);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||b){var j=H(y,U);b?e.password+=j:e.username+=j}else b=!0}m=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)){if(f&&""==m)return"Invalid authority";p-=h(m).length+1,m="",u=ue}else m+=s;break;case ue:case de:if(n&&"file"==e.scheme){u=fe;continue}if(":"!=s||g){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)){if(G(e)&&""==m)return"Invalid host";if(n&&""==m&&(W(e)||null!==e.port))return;if(l=L(e,m))return l;if(m="",u=ge,n)return;continue}"["==s?g=!0:"]"==s&&(g=!1),m+=s}else{if(""==m)return"Invalid host";if(l=L(e,m))return l;if(m="",u=pe,n==de)return}break;case pe:if(!S.test(s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)||n){if(""!=m){var _=parseInt(m,10);if(_>65535)return"Invalid port";e.port=G(e)&&_===q[e.scheme]?null:_,m=""}if(n)return;u=ge;continue}return"Invalid port"}m+=s;break;case he:if(e.scheme="file","/"==s||"\\"==s)u=me;else{if(!o||"file"!=o.scheme){u=be;continue}if(s==r)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==s)e.host=o.host,e.path=o.path.slice(),e.query="",u=ye;else{if("#"!=s){Z(i.slice(p).join(""))||(e.host=o.host,e.path=o.path.slice(),J(e)),u=be;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",u=je}}break;case me:if("/"==s||"\\"==s){u=fe;break}o&&"file"==o.scheme&&!Z(i.slice(p).join(""))&&(X(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),u=be;continue;case fe:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&X(m))u=be;else if(""==m){if(e.host="",n)return;u=ge}else{if(l=L(e,m))return l;if("localhost"==e.host&&(e.host=""),n)return;m="",u=ge}continue}m+=s;break;case ge:if(G(e)){if(u=be,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=r&&(u=be,"/"!=s))continue}else e.fragment="",u=je;else e.query="",u=ye;break;case be:if(s==r||"/"==s||"\\"==s&&G(e)||!n&&("?"==s||"#"==s)){if(".."===(c=(c=m).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(J(e),"/"==s||"\\"==s&&G(e)||e.path.push("")):Q(m)?"/"==s||"\\"==s&&G(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&X(m)&&(e.host&&(e.host=""),m=m.charAt(0)+":"),e.path.push(m)),m="","file"==e.scheme&&(s==r||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",u=ye):"#"==s&&(e.fragment="",u=je)}else m+=H(s,z);break;case ve:"?"==s?(e.query="",u=ye):"#"==s?(e.fragment="",u=je):s!=r&&(e.path[0]+=H(s,$));break;case ye:n||"#"!=s?s!=r&&("'"==s&&G(e)?e.query+="%27":e.query+="#"==s?"%23":H(s,$)):(e.fragment="",u=je);break;case je:s!=r&&(e.fragment+=H(s,B))}p++}},we=function(e){var t,n,r=u(this,we,"URL"),o=arguments.length>1?arguments[1]:void 0,s=String(e),a=w(r,{type:"URL"});if(void 0!==o)if(o instanceof we)t=I(o);else if(n=_e(t={},String(o)))throw TypeError(n);if(n=_e(a,s,null,t))throw TypeError(n);var l=a.searchParams=new j,c=_(l);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(l)||null},i||(r.href=xe.call(r),r.origin=Ee.call(r),r.protocol=ke.call(r),r.username=Ce.call(r),r.password=Se.call(r),r.host=Te.call(r),r.hostname=Ne.call(r),r.port=Ae.call(r),r.pathname=Oe.call(r),r.search=Ve.call(r),r.searchParams=Pe.call(r),r.hash=Ke.call(r))},Ie=we.prototype,xe=function(){var e=I(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return null!==o?(c+="//",W(e)&&(c+=n+(r?":"+r:"")+"@"),c+=M(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},Ee=function(){var e=I(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&G(e)?t+"://"+M(e.host)+(null!==n?":"+n:""):"null"},ke=function(){return I(this).scheme+":"},Ce=function(){return I(this).username},Se=function(){return I(this).password},Te=function(){var e=I(this),t=e.host,n=e.port;return null===t?"":null===n?M(t):M(t)+":"+n},Ne=function(){var e=I(this).host;return null===e?"":M(e)},Ae=function(){var e=I(this).port;return null===e?"":String(e)},Oe=function(){var e=I(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ve=function(){var e=I(this).query;return e?"?"+e:""},Pe=function(){return I(this).searchParams},Ke=function(){var e=I(this).fragment;return e?"#"+e:""},De=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&l(Ie,{href:De(xe,(function(e){var t=I(this),n=String(e),r=_e(t,n);if(r)throw TypeError(r);_(t.searchParams).updateSearchParams(t.query)})),origin:De(Ee),protocol:De(ke,(function(e){var t=I(this);_e(t,String(e)+":",ee)})),username:De(Ce,(function(e){var t=I(this),n=h(String(e));if(!Y(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=H(n[r],U)}})),password:De(Se,(function(e){var t=I(this),n=h(String(e));if(!Y(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=H(n[r],U)}})),host:De(Te,(function(e){var t=I(this);t.cannotBeABaseURL||_e(t,String(e),ue)})),hostname:De(Ne,(function(e){var t=I(this);t.cannotBeABaseURL||_e(t,String(e),de)})),port:De(Ae,(function(e){var t=I(this);Y(t)||(""==(e=String(e))?t.port=null:_e(t,e,pe))})),pathname:De(Oe,(function(e){var t=I(this);t.cannotBeABaseURL||(t.path=[],_e(t,e+"",ge))})),search:De(Ve,(function(e){var t=I(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",_e(t,e,ye)),_(t.searchParams).updateSearchParams(t.query)})),searchParams:De(Pe),hash:De(Ke,(function(e){var t=I(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",_e(t,e,je)):t.fragment=null}))}),c(Ie,"toJSON",(function(){return xe.call(this)}),{enumerable:!0}),c(Ie,"toString",(function(){return xe.call(this)}),{enumerable:!0}),y){var Le=y.createObjectURL,Re=y.revokeObjectURL;Le&&c(we,"createObjectURL",(function(e){return Le.apply(y,arguments)})),Re&&c(we,"revokeObjectURL",(function(e){return Re.apply(y,arguments)}))}g(we,"URL"),o({global:!0,forced:!s,sham:!i},{URL:we})},{"../internals/an-instance":703,"../internals/array-from":711,"../internals/descriptors":737,"../internals/export":746,"../internals/global":757,"../internals/has":758,"../internals/internal-state":768,"../internals/native-url":783,"../internals/object-assign":790,"../internals/object-define-properties":792,"../internals/redefine":810,"../internals/set-to-string-tag":819,"../internals/string-multibyte":825,"../internals/string-punycode-to-ascii":828,"../modules/es.string.iterator":917,"../modules/web.url-search-params":967}],969:[function(e,t,n){"use strict";e("../internals/export")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},{"../internals/export":746}],970:[function(e,t,n){(function(n){(function(){!function(){"use strict";var r=n.env.COVER?"./lib-cov":"./lib";t.exports=n.browser?{compare:e("./lib/compare"),XMLSerializer:e("./lib/canonizer"),revXPath:e("./lib/revxpath"),GroupingReporter:e("./lib/reporters/groupingReporter.js")}:{compare:e(r+"/compare"),XMLSerializer:e(r+"/canonizer"),revXPath:e(r+"/revxpath"),GroupingReporter:e(r+"/reporters/groupingReporter.js")}}()}).call(this)}).call(this,e("_process"))},{"./lib/canonizer":971,"./lib/compare":974,"./lib/reporters/groupingReporter.js":977,"./lib/revxpath":978,_process:1045}],971:[function(e,t,n){!function(){"use strict";var n=e("./node_types");function r(e,t){return e.nodeName<t.nodeName?-1:1}function o(e,t){var n,o=new Array(t+1).join("  "),s=e.childNodes.length>0;return n=o+"<"+e.nodeName+function(e,t){var n=[],o="",i=new Array(t+1);e&&e.length&&(Object.keys(e).map((function(e){return parseInt(e,10)})).filter((function(e){return"number"==typeof e&&e>=0})).sort((function(e,t){return e<t?-1:1})).forEach((function(t){n.push(e[t])})),n.sort(r),n.forEach((function(e){o+="\n"+i.join("  ")+e.nodeName+'="'+(e.nodeValue+"").replace(/"/g,"&quot;")+'"'})));return o}(e.attributes,t+1),n+=s?">"+function(e,t){var n,r,o="";if(e)for(r=e.length,n=0;n<r;n++)o+="\n"+i(e.item(n),t);return o}(e.childNodes,t+2)+"\n"+o+"</"+e.nodeName+">":" />"}function i(e,t){switch(t=t||0,e.nodeType){case n.DOCUMENT_NODE:return i(e.documentElement,t);case n.ELEMENT_NODE:return o(e,t);case n.CDATA_SECTION_NODE:case n.COMMENT_NODE:case n.TEXT_NODE:return function(e,t,r){var o=[],i=new Array(r+1).join("  ");switch(e){case n.CDATA_SECTION_NODE:o[0]="<![CDATA[",o[2]="]]>";break;case n.COMMENT_NODE:o[0]="\x3c!--",o[2]="--\x3e";break;case n.TEXT_NODE:}return e!==n.CDATA_SECTION_NODE&&(t=t.trim()),o[1]=t,i+o.join("")}(e.nodeType,e.nodeValue,t);default:throw Error("Node type "+e.nodeType+" serialization is not implemented")}}function s(){}s.prototype.serializeToString=function(e){return i(e)},t.exports=s}()},{"./node_types":975}],972:[function(e,t,n){!function(){"use strict";t.exports=function(e){return e.replace(/\s/g," ").replace(/\s\s+/g," ")}}()},{}],973:[function(e,t,n){!function(){"use strict";var n=e("./node_types"),r=e("./revxpath.js"),o=e("./collapse_spaces"),i=e("./normalize_newlines"),s={},a={};function l(e){this._diff=[],this._options=e||{}}s[n.ATTRIBUTE_NODE]="attribute",s[n.ELEMENT_NODE]="element",s[n.TEXT_NODE]="text node",s[n.COMMENT_NODE]="comment node",s[n.CDATA_SECTION_NODE]="CDATA node",s[n.DOCUMENT_NODE]="document",s[n.DOCUMENT_FRAGMENT_NODE]="document fragment",Object.keys(n).forEach((function(e){a[n[e]]=e})),l.prototype._describeNode=function(e){if(e.nodeType==n.TEXT_NODE||e.nodeType==n.CDATA_SECTION_NODE||e.nodeType==n.COMMENT_NODE){var t=e.nodeValue;return this._options.stripSpaces&&(t=t.trim()),this._options.collapseSpaces&&(t=o(t)),this._options.normalizeNewlines&&(t=i(t)),"'"+t+"'"}return"'"+e.nodeName+"'"},l.prototype.getDifferences=function(){return this._diff},l.prototype.getResult=function(){return 0==this._diff.length},l.prototype.collectFailure=function(e,t){var l,c,u,d,p,h=!0,m=e||t;if(this._options.comparators&&(d=this._options.comparators[a[m.nodeType]])){d instanceof Array||(d=[d]);for(var f=0,g=d.length;f<g;f++)if(p=d[f](e,t)){if(!0===p)return!0;"string"==typeof p?(l=p,h=!0):"object"==typeof p&&(l=p.message,h=!p.stop);break}}if(!l)if(e&&!t)l=s[e.nodeType].charAt(0).toUpperCase()+s[e.nodeType].substr(1)+" "+this._describeNode(e)+" is missed",h=!0;else if(!e&&t)l="Extra "+s[t.nodeType]+" "+this._describeNode(t),h=!0;else if(e.nodeType==t.nodeType)if(e.nodeName==t.nodeName){if(c=e.nodeValue,u=t.nodeValue,this._options.stripSpaces&&e.nodeType!=n.CDATA_SECTION_NODE&&(c=c.trim(),u=u.trim()),this._options.collapseSpaces&&e.nodeType!=n.CDATA_SECTION_NODE&&(c=o(c),u=o(u)),this._options.normalizeNewlines&&(c=i(c),u=i(u)),c==u)throw new Error("Nodes are considered equal but shouldn't");switch(e.nodeType){case n.ATTRIBUTE_NODE:l="Attribute '"+e.nodeName+"': expected value '"+c+"' instead of '"+u+"'";break;case n.COMMENT_NODE:l="Expected comment value '"+c+"' instead of '"+u+"'";break;case n.CDATA_SECTION_NODE:l="Expected CDATA value '"+c+"' instead of '"+u+"'";break;case n.TEXT_NODE:l="Expected text '"+c+"' instead of '"+u+"'";break;default:throw new Error("nodeValue is not equal, but nodeType is unexpected")}h=!0}else l="Expected "+s[e.nodeType]+" '"+e.nodeName+"' instead of '"+t.nodeName+"'",h=!1;else l="Expected node of type "+e.nodeType+" ("+s[e.nodeType]+") instead of "+t.nodeType+" ("+s[t.nodeType]+")",h=!1;return this._diff.push({node:r(m.ownerElement||m.parentNode),message:l}),h},t.exports=l}()},{"./collapse_spaces":972,"./node_types":975,"./normalize_newlines":976,"./revxpath.js":978}],974:[function(e,t,n){!function(){"use strict";var n=e("./node_types"),r=e("./collector"),o=e("./collapse_spaces"),i=e("./normalize_newlines");function s(e,t){if(this._options=e||{},!t)throw new Error("Collector instance must be specified");this._collector=t}s.prototype._filterNodes=function(e){var t,r,o,i=[];for(t=0,r=e.length;t<r;t++)((o=e.item(t)).nodeType!=n.COMMENT_NODE||this._options.compareComments)&&(o.nodeType==n.TEXT_NODE&&""==(""+o.nodeValue).trim()||i.push(o));return i},s.prototype._compareNodeList=function(e,t){var n,r,o=this._filterNodes(e),i=this._filterNodes(t),s=!0;for(n=0,r=Math.max(o.length,i.length);n<r;n++)o[n]&&i[n]?this.compareNode(o[n],i[n])||(s=!1):(this._collector.collectFailure(o[n],i[n]),s=!1);return s},s.prototype._compareAttributes=function(e,t){var r,s,a={},l={};if(!e&&!t)return!0;for(r=0,s=e.length;r<s;r++)a[e[r].nodeName]=e[r];for(r=0,s=t.length;r<s;r++)l[t[r].nodeName]=t[r];for(r in a)if(a.hasOwnProperty(r)&&l.hasOwnProperty(r)){var c=a[r].nodeValue,u=l[r].nodeValue;if(this._options.stripSpaces&&a[r].nodeType!=n.CDATA_SECTION_NODE&&(c=c.trim(),u=u.trim()),this._options.collapseSpaces&&a[r].nodeType!=n.CDATA_SECTION_NODE&&(c=o(c),u=o(u)),this._options.normalizeNewlines&&(c=i(c),u=i(u)),c!==u&&!this._collector.collectFailure(a[r],l[r]))return!1;delete l[r],delete a[r]}for(r in a)if(a.hasOwnProperty(r)&&!this._collector.collectFailure(a[r],null))return!1;for(r in l)if(l.hasOwnProperty(r)&&!this._collector.collectFailure(null,l[r]))return!1;return!0},s.prototype.compareNode=function(e,t){var r,s;if("string"==typeof e||"string"==typeof t)throw new Error("String comparison is not supported. You must parse string to document to perform comparison.");if(e.nodeName!==t.nodeName||e.nodeType!=t.nodeType)return this._collector.collectFailure(e,t);switch(e.nodeType){case n.DOCUMENT_NODE:return this.compareNode(e.documentElement,t.documentElement);case n.ELEMENT_NODE:return this._compareAttributes(e.attributes,t.attributes)&&this._compareNodeList(e.childNodes,t.childNodes);case n.TEXT_NODE:case n.CDATA_SECTION_NODE:case n.DOCUMENT_FRAGMENT_NODE:case n.COMMENT_NODE:return e.nodeType==n.COMMENT_NODE&&!this._options.compareComments||(r=""+e.nodeValue,s=""+t.nodeValue,this._options.stripSpaces&&e.nodeType!==n.CDATA_SECTION_NODE&&(r=r.trim(),s=s.trim()),this._options.collapseSpaces&&e.nodeType!==n.CDATA_SECTION_NODE&&(r=o(r),s=o(s)),this._options.normalizeNewlines&&(r=i(r),s=i(s)),r===s||this._collector.collectFailure(e,t));default:throw Error("Node type "+e.nodeType+" comparison is not implemented")}},t.exports=function(e,t,n){var o=new r(n);return new s(n,o).compareNode(e,t),o}}()},{"./collapse_spaces":972,"./collector":973,"./node_types":975,"./normalize_newlines":976}],975:[function(e,t,n){!function(){"use strict";t.exports={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}()},{}],976:[function(e,t,n){!function(){"use strict";t.exports=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}}()},{}],977:[function(e,t,n){!function(){"use strict";t.exports={report:function(e){var t=this.getDifferences(e);return Object.keys(t).map(function(e){return[e,"\n\t",t[e].join("\n\t")].join("")}.bind(this)).join("\n")},getDifferences:function(e){var t={};return e.getDifferences().forEach(function(e){(t[e.node]=t[e.node]||[]).push(e.message)}.bind(this)),t}}}()},{}],978:[function(e,t,n){!function(){"use strict";var n=e("./node_types");function r(e,t){t.unshift(function(e){var t,r,o,i=e.parentNode,s=e.nodeName;if(i&&i.childNodes&&i.childNodes.length)for(t=[],r=0,o=i.childNodes.length;r<o;r++)i.childNodes[r].nodeName===s&&t.push(i.childNodes[r]);if(e.nodeType==n.DOCUMENT_NODE)return"";if(t&&t.length>1){if(e.hasAttribute("id"))return s+"[@id='"+e.getAttribute("id")+"']";for(r=0,o=t.length;r<o;r++)if(t[r]==e)return s+"["+(r+1)+"]";throw new Error("Node is not found, but should be!")}return s}(e)),e.parentNode&&r(e.parentNode,t)}t.exports=function(e){var t;return e?e.nodeType==n.DOCUMENT_NODE?"/":(r(e,t=[]),t.join("/")):""}}()},{"./node_types":975}],979:[function(e,t,n){void 0!==t&&t.exports&&(t.exports=function(){var e=3,t=4,n=12,r=13,o=16,i=17;function s(e,t){void 0===t&&(t=0);var n=e.charCodeAt(t);if(55296<=n&&n<=56319&&t<e.length-1){var r=n;return 56320<=(o=e.charCodeAt(t+1))&&o<=57343?1024*(r-55296)+(o-56320)+65536:r}if(56320<=n&&n<=57343&&t>=1){var o=n;return 55296<=(r=e.charCodeAt(t-1))&&r<=56319?1024*(r-55296)+(o-56320)+65536:o}return n}function a(s,a,l){var c=[s].concat(a).concat([l]),u=c[c.length-2],d=l,p=c.lastIndexOf(14);if(p>1&&c.slice(1,p).every((function(t){return t==e}))&&-1==[e,r,i].indexOf(s))return 2;var h=c.lastIndexOf(t);if(h>0&&c.slice(1,h).every((function(e){return e==t}))&&-1==[n,t].indexOf(u))return c.filter((function(e){return e==t})).length%2==1?3:4;if(0==u&&1==d)return 0;if(2==u||0==u||1==u)return 14==d&&a.every((function(t){return t==e}))?2:1;if(2==d||0==d||1==d)return 1;if(6==u&&(6==d||7==d||9==d||10==d))return 0;if(!(9!=u&&7!=u||7!=d&&8!=d))return 0;if((10==u||8==u)&&8==d)return 0;if(d==e||15==d)return 0;if(5==d)return 0;if(u==n)return 0;var m=-1!=c.indexOf(e)?c.lastIndexOf(e)-1:c.length-2;return-1!=[r,i].indexOf(c[m])&&c.slice(m+1,-1).every((function(t){return t==e}))&&14==d||15==u&&-1!=[o,i].indexOf(d)?0:-1!=a.indexOf(t)?2:u==t&&d==t?0:1}function l(s){return 1536<=s&&s<=1541||1757==s||1807==s||2274==s||3406==s||69821==s||70082<=s&&s<=70083||72250==s||72326<=s&&s<=72329||73030==s?n:13==s?0:10==s?1:0<=s&&s<=9||11<=s&&s<=12||14<=s&&s<=31||127<=s&&s<=159||173==s||1564==s||6158==s||8203==s||8206<=s&&s<=8207||8232==s||8233==s||8234<=s&&s<=8238||8288<=s&&s<=8292||8293==s||8294<=s&&s<=8303||55296<=s&&s<=57343||65279==s||65520<=s&&s<=65528||65529<=s&&s<=65531||113824<=s&&s<=113827||119155<=s&&s<=119162||917504==s||917505==s||917506<=s&&s<=917535||917632<=s&&s<=917759||918e3<=s&&s<=921599?2:768<=s&&s<=879||1155<=s&&s<=1159||1160<=s&&s<=1161||1425<=s&&s<=1469||1471==s||1473<=s&&s<=1474||1476<=s&&s<=1477||1479==s||1552<=s&&s<=1562||1611<=s&&s<=1631||1648==s||1750<=s&&s<=1756||1759<=s&&s<=1764||1767<=s&&s<=1768||1770<=s&&s<=1773||1809==s||1840<=s&&s<=1866||1958<=s&&s<=1968||2027<=s&&s<=2035||2070<=s&&s<=2073||2075<=s&&s<=2083||2085<=s&&s<=2087||2089<=s&&s<=2093||2137<=s&&s<=2139||2260<=s&&s<=2273||2275<=s&&s<=2306||2362==s||2364==s||2369<=s&&s<=2376||2381==s||2385<=s&&s<=2391||2402<=s&&s<=2403||2433==s||2492==s||2494==s||2497<=s&&s<=2500||2509==s||2519==s||2530<=s&&s<=2531||2561<=s&&s<=2562||2620==s||2625<=s&&s<=2626||2631<=s&&s<=2632||2635<=s&&s<=2637||2641==s||2672<=s&&s<=2673||2677==s||2689<=s&&s<=2690||2748==s||2753<=s&&s<=2757||2759<=s&&s<=2760||2765==s||2786<=s&&s<=2787||2810<=s&&s<=2815||2817==s||2876==s||2878==s||2879==s||2881<=s&&s<=2884||2893==s||2902==s||2903==s||2914<=s&&s<=2915||2946==s||3006==s||3008==s||3021==s||3031==s||3072==s||3134<=s&&s<=3136||3142<=s&&s<=3144||3146<=s&&s<=3149||3157<=s&&s<=3158||3170<=s&&s<=3171||3201==s||3260==s||3263==s||3266==s||3270==s||3276<=s&&s<=3277||3285<=s&&s<=3286||3298<=s&&s<=3299||3328<=s&&s<=3329||3387<=s&&s<=3388||3390==s||3393<=s&&s<=3396||3405==s||3415==s||3426<=s&&s<=3427||3530==s||3535==s||3538<=s&&s<=3540||3542==s||3551==s||3633==s||3636<=s&&s<=3642||3655<=s&&s<=3662||3761==s||3764<=s&&s<=3769||3771<=s&&s<=3772||3784<=s&&s<=3789||3864<=s&&s<=3865||3893==s||3895==s||3897==s||3953<=s&&s<=3966||3968<=s&&s<=3972||3974<=s&&s<=3975||3981<=s&&s<=3991||3993<=s&&s<=4028||4038==s||4141<=s&&s<=4144||4146<=s&&s<=4151||4153<=s&&s<=4154||4157<=s&&s<=4158||4184<=s&&s<=4185||4190<=s&&s<=4192||4209<=s&&s<=4212||4226==s||4229<=s&&s<=4230||4237==s||4253==s||4957<=s&&s<=4959||5906<=s&&s<=5908||5938<=s&&s<=5940||5970<=s&&s<=5971||6002<=s&&s<=6003||6068<=s&&s<=6069||6071<=s&&s<=6077||6086==s||6089<=s&&s<=6099||6109==s||6155<=s&&s<=6157||6277<=s&&s<=6278||6313==s||6432<=s&&s<=6434||6439<=s&&s<=6440||6450==s||6457<=s&&s<=6459||6679<=s&&s<=6680||6683==s||6742==s||6744<=s&&s<=6750||6752==s||6754==s||6757<=s&&s<=6764||6771<=s&&s<=6780||6783==s||6832<=s&&s<=6845||6846==s||6912<=s&&s<=6915||6964==s||6966<=s&&s<=6970||6972==s||6978==s||7019<=s&&s<=7027||7040<=s&&s<=7041||7074<=s&&s<=7077||7080<=s&&s<=7081||7083<=s&&s<=7085||7142==s||7144<=s&&s<=7145||7149==s||7151<=s&&s<=7153||7212<=s&&s<=7219||7222<=s&&s<=7223||7376<=s&&s<=7378||7380<=s&&s<=7392||7394<=s&&s<=7400||7405==s||7412==s||7416<=s&&s<=7417||7616<=s&&s<=7673||7675<=s&&s<=7679||8204==s||8400<=s&&s<=8412||8413<=s&&s<=8416||8417==s||8418<=s&&s<=8420||8421<=s&&s<=8432||11503<=s&&s<=11505||11647==s||11744<=s&&s<=11775||12330<=s&&s<=12333||12334<=s&&s<=12335||12441<=s&&s<=12442||42607==s||42608<=s&&s<=42610||42612<=s&&s<=42621||42654<=s&&s<=42655||42736<=s&&s<=42737||43010==s||43014==s||43019==s||43045<=s&&s<=43046||43204<=s&&s<=43205||43232<=s&&s<=43249||43302<=s&&s<=43309||43335<=s&&s<=43345||43392<=s&&s<=43394||43443==s||43446<=s&&s<=43449||43452==s||43493==s||43561<=s&&s<=43566||43569<=s&&s<=43570||43573<=s&&s<=43574||43587==s||43596==s||43644==s||43696==s||43698<=s&&s<=43700||43703<=s&&s<=43704||43710<=s&&s<=43711||43713==s||43756<=s&&s<=43757||43766==s||44005==s||44008==s||44013==s||64286==s||65024<=s&&s<=65039||65056<=s&&s<=65071||65438<=s&&s<=65439||66045==s||66272==s||66422<=s&&s<=66426||68097<=s&&s<=68099||68101<=s&&s<=68102||68108<=s&&s<=68111||68152<=s&&s<=68154||68159==s||68325<=s&&s<=68326||69633==s||69688<=s&&s<=69702||69759<=s&&s<=69761||69811<=s&&s<=69814||69817<=s&&s<=69818||69888<=s&&s<=69890||69927<=s&&s<=69931||69933<=s&&s<=69940||70003==s||70016<=s&&s<=70017||70070<=s&&s<=70078||70090<=s&&s<=70092||70191<=s&&s<=70193||70196==s||70198<=s&&s<=70199||70206==s||70367==s||70371<=s&&s<=70378||70400<=s&&s<=70401||70460==s||70462==s||70464==s||70487==s||70502<=s&&s<=70508||70512<=s&&s<=70516||70712<=s&&s<=70719||70722<=s&&s<=70724||70726==s||70832==s||70835<=s&&s<=70840||70842==s||70845==s||70847<=s&&s<=70848||70850<=s&&s<=70851||71087==s||71090<=s&&s<=71093||71100<=s&&s<=71101||71103<=s&&s<=71104||71132<=s&&s<=71133||71219<=s&&s<=71226||71229==s||71231<=s&&s<=71232||71339==s||71341==s||71344<=s&&s<=71349||71351==s||71453<=s&&s<=71455||71458<=s&&s<=71461||71463<=s&&s<=71467||72193<=s&&s<=72198||72201<=s&&s<=72202||72243<=s&&s<=72248||72251<=s&&s<=72254||72263==s||72273<=s&&s<=72278||72281<=s&&s<=72283||72330<=s&&s<=72342||72344<=s&&s<=72345||72752<=s&&s<=72758||72760<=s&&s<=72765||72767==s||72850<=s&&s<=72871||72874<=s&&s<=72880||72882<=s&&s<=72883||72885<=s&&s<=72886||73009<=s&&s<=73014||73018==s||73020<=s&&s<=73021||73023<=s&&s<=73029||73031==s||92912<=s&&s<=92916||92976<=s&&s<=92982||94095<=s&&s<=94098||113821<=s&&s<=113822||119141==s||119143<=s&&s<=119145||119150<=s&&s<=119154||119163<=s&&s<=119170||119173<=s&&s<=119179||119210<=s&&s<=119213||119362<=s&&s<=119364||121344<=s&&s<=121398||121403<=s&&s<=121452||121461==s||121476==s||121499<=s&&s<=121503||121505<=s&&s<=121519||122880<=s&&s<=122886||122888<=s&&s<=122904||122907<=s&&s<=122913||122915<=s&&s<=122916||122918<=s&&s<=122922||125136<=s&&s<=125142||125252<=s&&s<=125258||917536<=s&&s<=917631||917760<=s&&s<=917999?e:127462<=s&&s<=127487?t:2307==s||2363==s||2366<=s&&s<=2368||2377<=s&&s<=2380||2382<=s&&s<=2383||2434<=s&&s<=2435||2495<=s&&s<=2496||2503<=s&&s<=2504||2507<=s&&s<=2508||2563==s||2622<=s&&s<=2624||2691==s||2750<=s&&s<=2752||2761==s||2763<=s&&s<=2764||2818<=s&&s<=2819||2880==s||2887<=s&&s<=2888||2891<=s&&s<=2892||3007==s||3009<=s&&s<=3010||3014<=s&&s<=3016||3018<=s&&s<=3020||3073<=s&&s<=3075||3137<=s&&s<=3140||3202<=s&&s<=3203||3262==s||3264<=s&&s<=3265||3267<=s&&s<=3268||3271<=s&&s<=3272||3274<=s&&s<=3275||3330<=s&&s<=3331||3391<=s&&s<=3392||3398<=s&&s<=3400||3402<=s&&s<=3404||3458<=s&&s<=3459||3536<=s&&s<=3537||3544<=s&&s<=3550||3570<=s&&s<=3571||3635==s||3763==s||3902<=s&&s<=3903||3967==s||4145==s||4155<=s&&s<=4156||4182<=s&&s<=4183||4228==s||6070==s||6078<=s&&s<=6085||6087<=s&&s<=6088||6435<=s&&s<=6438||6441<=s&&s<=6443||6448<=s&&s<=6449||6451<=s&&s<=6456||6681<=s&&s<=6682||6741==s||6743==s||6765<=s&&s<=6770||6916==s||6965==s||6971==s||6973<=s&&s<=6977||6979<=s&&s<=6980||7042==s||7073==s||7078<=s&&s<=7079||7082==s||7143==s||7146<=s&&s<=7148||7150==s||7154<=s&&s<=7155||7204<=s&&s<=7211||7220<=s&&s<=7221||7393==s||7410<=s&&s<=7411||7415==s||43043<=s&&s<=43044||43047==s||43136<=s&&s<=43137||43188<=s&&s<=43203||43346<=s&&s<=43347||43395==s||43444<=s&&s<=43445||43450<=s&&s<=43451||43453<=s&&s<=43456||43567<=s&&s<=43568||43571<=s&&s<=43572||43597==s||43755==s||43758<=s&&s<=43759||43765==s||44003<=s&&s<=44004||44006<=s&&s<=44007||44009<=s&&s<=44010||44012==s||69632==s||69634==s||69762==s||69808<=s&&s<=69810||69815<=s&&s<=69816||69932==s||70018==s||70067<=s&&s<=70069||70079<=s&&s<=70080||70188<=s&&s<=70190||70194<=s&&s<=70195||70197==s||70368<=s&&s<=70370||70402<=s&&s<=70403||70463==s||70465<=s&&s<=70468||70471<=s&&s<=70472||70475<=s&&s<=70477||70498<=s&&s<=70499||70709<=s&&s<=70711||70720<=s&&s<=70721||70725==s||70833<=s&&s<=70834||70841==s||70843<=s&&s<=70844||70846==s||70849==s||71088<=s&&s<=71089||71096<=s&&s<=71099||71102==s||71216<=s&&s<=71218||71227<=s&&s<=71228||71230==s||71340==s||71342<=s&&s<=71343||71350==s||71456<=s&&s<=71457||71462==s||72199<=s&&s<=72200||72249==s||72279<=s&&s<=72280||72343==s||72751==s||72766==s||72873==s||72881==s||72884==s||94033<=s&&s<=94078||119142==s||119149==s?5:4352<=s&&s<=4447||43360<=s&&s<=43388?6:4448<=s&&s<=4519||55216<=s&&s<=55238?7:4520<=s&&s<=4607||55243<=s&&s<=55291?8:44032==s||44060==s||44088==s||44116==s||44144==s||44172==s||44200==s||44228==s||44256==s||44284==s||44312==s||44340==s||44368==s||44396==s||44424==s||44452==s||44480==s||44508==s||44536==s||44564==s||44592==s||44620==s||44648==s||44676==s||44704==s||44732==s||44760==s||44788==s||44816==s||44844==s||44872==s||44900==s||44928==s||44956==s||44984==s||45012==s||45040==s||45068==s||45096==s||45124==s||45152==s||45180==s||45208==s||45236==s||45264==s||45292==s||45320==s||45348==s||45376==s||45404==s||45432==s||45460==s||45488==s||45516==s||45544==s||45572==s||45600==s||45628==s||45656==s||45684==s||45712==s||45740==s||45768==s||45796==s||45824==s||45852==s||45880==s||45908==s||45936==s||45964==s||45992==s||46020==s||46048==s||46076==s||46104==s||46132==s||46160==s||46188==s||46216==s||46244==s||46272==s||46300==s||46328==s||46356==s||46384==s||46412==s||46440==s||46468==s||46496==s||46524==s||46552==s||46580==s||46608==s||46636==s||46664==s||46692==s||46720==s||46748==s||46776==s||46804==s||46832==s||46860==s||46888==s||46916==s||46944==s||46972==s||47e3==s||47028==s||47056==s||47084==s||47112==s||47140==s||47168==s||47196==s||47224==s||47252==s||47280==s||47308==s||47336==s||47364==s||47392==s||47420==s||47448==s||47476==s||47504==s||47532==s||47560==s||47588==s||47616==s||47644==s||47672==s||47700==s||47728==s||47756==s||47784==s||47812==s||47840==s||47868==s||47896==s||47924==s||47952==s||47980==s||48008==s||48036==s||48064==s||48092==s||48120==s||48148==s||48176==s||48204==s||48232==s||48260==s||48288==s||48316==s||48344==s||48372==s||48400==s||48428==s||48456==s||48484==s||48512==s||48540==s||48568==s||48596==s||48624==s||48652==s||48680==s||48708==s||48736==s||48764==s||48792==s||48820==s||48848==s||48876==s||48904==s||48932==s||48960==s||48988==s||49016==s||49044==s||49072==s||49100==s||49128==s||49156==s||49184==s||49212==s||49240==s||49268==s||49296==s||49324==s||49352==s||49380==s||49408==s||49436==s||49464==s||49492==s||49520==s||49548==s||49576==s||49604==s||49632==s||49660==s||49688==s||49716==s||49744==s||49772==s||49800==s||49828==s||49856==s||49884==s||49912==s||49940==s||49968==s||49996==s||50024==s||50052==s||50080==s||50108==s||50136==s||50164==s||50192==s||50220==s||50248==s||50276==s||50304==s||50332==s||50360==s||50388==s||50416==s||50444==s||50472==s||50500==s||50528==s||50556==s||50584==s||50612==s||50640==s||50668==s||50696==s||50724==s||50752==s||50780==s||50808==s||50836==s||50864==s||50892==s||50920==s||50948==s||50976==s||51004==s||51032==s||51060==s||51088==s||51116==s||51144==s||51172==s||51200==s||51228==s||51256==s||51284==s||51312==s||51340==s||51368==s||51396==s||51424==s||51452==s||51480==s||51508==s||51536==s||51564==s||51592==s||51620==s||51648==s||51676==s||51704==s||51732==s||51760==s||51788==s||51816==s||51844==s||51872==s||51900==s||51928==s||51956==s||51984==s||52012==s||52040==s||52068==s||52096==s||52124==s||52152==s||52180==s||52208==s||52236==s||52264==s||52292==s||52320==s||52348==s||52376==s||52404==s||52432==s||52460==s||52488==s||52516==s||52544==s||52572==s||52600==s||52628==s||52656==s||52684==s||52712==s||52740==s||52768==s||52796==s||52824==s||52852==s||52880==s||52908==s||52936==s||52964==s||52992==s||53020==s||53048==s||53076==s||53104==s||53132==s||53160==s||53188==s||53216==s||53244==s||53272==s||53300==s||53328==s||53356==s||53384==s||53412==s||53440==s||53468==s||53496==s||53524==s||53552==s||53580==s||53608==s||53636==s||53664==s||53692==s||53720==s||53748==s||53776==s||53804==s||53832==s||53860==s||53888==s||53916==s||53944==s||53972==s||54e3==s||54028==s||54056==s||54084==s||54112==s||54140==s||54168==s||54196==s||54224==s||54252==s||54280==s||54308==s||54336==s||54364==s||54392==s||54420==s||54448==s||54476==s||54504==s||54532==s||54560==s||54588==s||54616==s||54644==s||54672==s||54700==s||54728==s||54756==s||54784==s||54812==s||54840==s||54868==s||54896==s||54924==s||54952==s||54980==s||55008==s||55036==s||55064==s||55092==s||55120==s||55148==s||55176==s?9:44033<=s&&s<=44059||44061<=s&&s<=44087||44089<=s&&s<=44115||44117<=s&&s<=44143||44145<=s&&s<=44171||44173<=s&&s<=44199||44201<=s&&s<=44227||44229<=s&&s<=44255||44257<=s&&s<=44283||44285<=s&&s<=44311||44313<=s&&s<=44339||44341<=s&&s<=44367||44369<=s&&s<=44395||44397<=s&&s<=44423||44425<=s&&s<=44451||44453<=s&&s<=44479||44481<=s&&s<=44507||44509<=s&&s<=44535||44537<=s&&s<=44563||44565<=s&&s<=44591||44593<=s&&s<=44619||44621<=s&&s<=44647||44649<=s&&s<=44675||44677<=s&&s<=44703||44705<=s&&s<=44731||44733<=s&&s<=44759||44761<=s&&s<=44787||44789<=s&&s<=44815||44817<=s&&s<=44843||44845<=s&&s<=44871||44873<=s&&s<=44899||44901<=s&&s<=44927||44929<=s&&s<=44955||44957<=s&&s<=44983||44985<=s&&s<=45011||45013<=s&&s<=45039||45041<=s&&s<=45067||45069<=s&&s<=45095||45097<=s&&s<=45123||45125<=s&&s<=45151||45153<=s&&s<=45179||45181<=s&&s<=45207||45209<=s&&s<=45235||45237<=s&&s<=45263||45265<=s&&s<=45291||45293<=s&&s<=45319||45321<=s&&s<=45347||45349<=s&&s<=45375||45377<=s&&s<=45403||45405<=s&&s<=45431||45433<=s&&s<=45459||45461<=s&&s<=45487||45489<=s&&s<=45515||45517<=s&&s<=45543||45545<=s&&s<=45571||45573<=s&&s<=45599||45601<=s&&s<=45627||45629<=s&&s<=45655||45657<=s&&s<=45683||45685<=s&&s<=45711||45713<=s&&s<=45739||45741<=s&&s<=45767||45769<=s&&s<=45795||45797<=s&&s<=45823||45825<=s&&s<=45851||45853<=s&&s<=45879||45881<=s&&s<=45907||45909<=s&&s<=45935||45937<=s&&s<=45963||45965<=s&&s<=45991||45993<=s&&s<=46019||46021<=s&&s<=46047||46049<=s&&s<=46075||46077<=s&&s<=46103||46105<=s&&s<=46131||46133<=s&&s<=46159||46161<=s&&s<=46187||46189<=s&&s<=46215||46217<=s&&s<=46243||46245<=s&&s<=46271||46273<=s&&s<=46299||46301<=s&&s<=46327||46329<=s&&s<=46355||46357<=s&&s<=46383||46385<=s&&s<=46411||46413<=s&&s<=46439||46441<=s&&s<=46467||46469<=s&&s<=46495||46497<=s&&s<=46523||46525<=s&&s<=46551||46553<=s&&s<=46579||46581<=s&&s<=46607||46609<=s&&s<=46635||46637<=s&&s<=46663||46665<=s&&s<=46691||46693<=s&&s<=46719||46721<=s&&s<=46747||46749<=s&&s<=46775||46777<=s&&s<=46803||46805<=s&&s<=46831||46833<=s&&s<=46859||46861<=s&&s<=46887||46889<=s&&s<=46915||46917<=s&&s<=46943||46945<=s&&s<=46971||46973<=s&&s<=46999||47001<=s&&s<=47027||47029<=s&&s<=47055||47057<=s&&s<=47083||47085<=s&&s<=47111||47113<=s&&s<=47139||47141<=s&&s<=47167||47169<=s&&s<=47195||47197<=s&&s<=47223||47225<=s&&s<=47251||47253<=s&&s<=47279||47281<=s&&s<=47307||47309<=s&&s<=47335||47337<=s&&s<=47363||47365<=s&&s<=47391||47393<=s&&s<=47419||47421<=s&&s<=47447||47449<=s&&s<=47475||47477<=s&&s<=47503||47505<=s&&s<=47531||47533<=s&&s<=47559||47561<=s&&s<=47587||47589<=s&&s<=47615||47617<=s&&s<=47643||47645<=s&&s<=47671||47673<=s&&s<=47699||47701<=s&&s<=47727||47729<=s&&s<=47755||47757<=s&&s<=47783||47785<=s&&s<=47811||47813<=s&&s<=47839||47841<=s&&s<=47867||47869<=s&&s<=47895||47897<=s&&s<=47923||47925<=s&&s<=47951||47953<=s&&s<=47979||47981<=s&&s<=48007||48009<=s&&s<=48035||48037<=s&&s<=48063||48065<=s&&s<=48091||48093<=s&&s<=48119||48121<=s&&s<=48147||48149<=s&&s<=48175||48177<=s&&s<=48203||48205<=s&&s<=48231||48233<=s&&s<=48259||48261<=s&&s<=48287||48289<=s&&s<=48315||48317<=s&&s<=48343||48345<=s&&s<=48371||48373<=s&&s<=48399||48401<=s&&s<=48427||48429<=s&&s<=48455||48457<=s&&s<=48483||48485<=s&&s<=48511||48513<=s&&s<=48539||48541<=s&&s<=48567||48569<=s&&s<=48595||48597<=s&&s<=48623||48625<=s&&s<=48651||48653<=s&&s<=48679||48681<=s&&s<=48707||48709<=s&&s<=48735||48737<=s&&s<=48763||48765<=s&&s<=48791||48793<=s&&s<=48819||48821<=s&&s<=48847||48849<=s&&s<=48875||48877<=s&&s<=48903||48905<=s&&s<=48931||48933<=s&&s<=48959||48961<=s&&s<=48987||48989<=s&&s<=49015||49017<=s&&s<=49043||49045<=s&&s<=49071||49073<=s&&s<=49099||49101<=s&&s<=49127||49129<=s&&s<=49155||49157<=s&&s<=49183||49185<=s&&s<=49211||49213<=s&&s<=49239||49241<=s&&s<=49267||49269<=s&&s<=49295||49297<=s&&s<=49323||49325<=s&&s<=49351||49353<=s&&s<=49379||49381<=s&&s<=49407||49409<=s&&s<=49435||49437<=s&&s<=49463||49465<=s&&s<=49491||49493<=s&&s<=49519||49521<=s&&s<=49547||49549<=s&&s<=49575||49577<=s&&s<=49603||49605<=s&&s<=49631||49633<=s&&s<=49659||49661<=s&&s<=49687||49689<=s&&s<=49715||49717<=s&&s<=49743||49745<=s&&s<=49771||49773<=s&&s<=49799||49801<=s&&s<=49827||49829<=s&&s<=49855||49857<=s&&s<=49883||49885<=s&&s<=49911||49913<=s&&s<=49939||49941<=s&&s<=49967||49969<=s&&s<=49995||49997<=s&&s<=50023||50025<=s&&s<=50051||50053<=s&&s<=50079||50081<=s&&s<=50107||50109<=s&&s<=50135||50137<=s&&s<=50163||50165<=s&&s<=50191||50193<=s&&s<=50219||50221<=s&&s<=50247||50249<=s&&s<=50275||50277<=s&&s<=50303||50305<=s&&s<=50331||50333<=s&&s<=50359||50361<=s&&s<=50387||50389<=s&&s<=50415||50417<=s&&s<=50443||50445<=s&&s<=50471||50473<=s&&s<=50499||50501<=s&&s<=50527||50529<=s&&s<=50555||50557<=s&&s<=50583||50585<=s&&s<=50611||50613<=s&&s<=50639||50641<=s&&s<=50667||50669<=s&&s<=50695||50697<=s&&s<=50723||50725<=s&&s<=50751||50753<=s&&s<=50779||50781<=s&&s<=50807||50809<=s&&s<=50835||50837<=s&&s<=50863||50865<=s&&s<=50891||50893<=s&&s<=50919||50921<=s&&s<=50947||50949<=s&&s<=50975||50977<=s&&s<=51003||51005<=s&&s<=51031||51033<=s&&s<=51059||51061<=s&&s<=51087||51089<=s&&s<=51115||51117<=s&&s<=51143||51145<=s&&s<=51171||51173<=s&&s<=51199||51201<=s&&s<=51227||51229<=s&&s<=51255||51257<=s&&s<=51283||51285<=s&&s<=51311||51313<=s&&s<=51339||51341<=s&&s<=51367||51369<=s&&s<=51395||51397<=s&&s<=51423||51425<=s&&s<=51451||51453<=s&&s<=51479||51481<=s&&s<=51507||51509<=s&&s<=51535||51537<=s&&s<=51563||51565<=s&&s<=51591||51593<=s&&s<=51619||51621<=s&&s<=51647||51649<=s&&s<=51675||51677<=s&&s<=51703||51705<=s&&s<=51731||51733<=s&&s<=51759||51761<=s&&s<=51787||51789<=s&&s<=51815||51817<=s&&s<=51843||51845<=s&&s<=51871||51873<=s&&s<=51899||51901<=s&&s<=51927||51929<=s&&s<=51955||51957<=s&&s<=51983||51985<=s&&s<=52011||52013<=s&&s<=52039||52041<=s&&s<=52067||52069<=s&&s<=52095||52097<=s&&s<=52123||52125<=s&&s<=52151||52153<=s&&s<=52179||52181<=s&&s<=52207||52209<=s&&s<=52235||52237<=s&&s<=52263||52265<=s&&s<=52291||52293<=s&&s<=52319||52321<=s&&s<=52347||52349<=s&&s<=52375||52377<=s&&s<=52403||52405<=s&&s<=52431||52433<=s&&s<=52459||52461<=s&&s<=52487||52489<=s&&s<=52515||52517<=s&&s<=52543||52545<=s&&s<=52571||52573<=s&&s<=52599||52601<=s&&s<=52627||52629<=s&&s<=52655||52657<=s&&s<=52683||52685<=s&&s<=52711||52713<=s&&s<=52739||52741<=s&&s<=52767||52769<=s&&s<=52795||52797<=s&&s<=52823||52825<=s&&s<=52851||52853<=s&&s<=52879||52881<=s&&s<=52907||52909<=s&&s<=52935||52937<=s&&s<=52963||52965<=s&&s<=52991||52993<=s&&s<=53019||53021<=s&&s<=53047||53049<=s&&s<=53075||53077<=s&&s<=53103||53105<=s&&s<=53131||53133<=s&&s<=53159||53161<=s&&s<=53187||53189<=s&&s<=53215||53217<=s&&s<=53243||53245<=s&&s<=53271||53273<=s&&s<=53299||53301<=s&&s<=53327||53329<=s&&s<=53355||53357<=s&&s<=53383||53385<=s&&s<=53411||53413<=s&&s<=53439||53441<=s&&s<=53467||53469<=s&&s<=53495||53497<=s&&s<=53523||53525<=s&&s<=53551||53553<=s&&s<=53579||53581<=s&&s<=53607||53609<=s&&s<=53635||53637<=s&&s<=53663||53665<=s&&s<=53691||53693<=s&&s<=53719||53721<=s&&s<=53747||53749<=s&&s<=53775||53777<=s&&s<=53803||53805<=s&&s<=53831||53833<=s&&s<=53859||53861<=s&&s<=53887||53889<=s&&s<=53915||53917<=s&&s<=53943||53945<=s&&s<=53971||53973<=s&&s<=53999||54001<=s&&s<=54027||54029<=s&&s<=54055||54057<=s&&s<=54083||54085<=s&&s<=54111||54113<=s&&s<=54139||54141<=s&&s<=54167||54169<=s&&s<=54195||54197<=s&&s<=54223||54225<=s&&s<=54251||54253<=s&&s<=54279||54281<=s&&s<=54307||54309<=s&&s<=54335||54337<=s&&s<=54363||54365<=s&&s<=54391||54393<=s&&s<=54419||54421<=s&&s<=54447||54449<=s&&s<=54475||54477<=s&&s<=54503||54505<=s&&s<=54531||54533<=s&&s<=54559||54561<=s&&s<=54587||54589<=s&&s<=54615||54617<=s&&s<=54643||54645<=s&&s<=54671||54673<=s&&s<=54699||54701<=s&&s<=54727||54729<=s&&s<=54755||54757<=s&&s<=54783||54785<=s&&s<=54811||54813<=s&&s<=54839||54841<=s&&s<=54867||54869<=s&&s<=54895||54897<=s&&s<=54923||54925<=s&&s<=54951||54953<=s&&s<=54979||54981<=s&&s<=55007||55009<=s&&s<=55035||55037<=s&&s<=55063||55065<=s&&s<=55091||55093<=s&&s<=55119||55121<=s&&s<=55147||55149<=s&&s<=55175||55177<=s&&s<=55203?10:9757==s||9977==s||9994<=s&&s<=9997||127877==s||127938<=s&&s<=127940||127943==s||127946<=s&&s<=127948||128066<=s&&s<=128067||128070<=s&&s<=128080||128110==s||128112<=s&&s<=128120||128124==s||128129<=s&&s<=128131||128133<=s&&s<=128135||128170==s||128372<=s&&s<=128373||128378==s||128400==s||128405<=s&&s<=128406||128581<=s&&s<=128583||128587<=s&&s<=128591||128675==s||128692<=s&&s<=128694||128704==s||128716==s||129304<=s&&s<=129308||129310<=s&&s<=129311||129318==s||129328<=s&&s<=129337||129341<=s&&s<=129342||129489<=s&&s<=129501?r:127995<=s&&s<=127999?14:8205==s?15:9792==s||9794==s||9877<=s&&s<=9878||9992==s||10084==s||127752==s||127806==s||127859==s||127891==s||127908==s||127912==s||127979==s||127981==s||128139==s||128187<=s&&s<=128188||128295==s||128300==s||128488==s||128640==s||128658==s?o:128102<=s&&s<=128105?i:11}return this.nextBreak=function(e,t){if(void 0===t&&(t=0),t<0)return 0;if(t>=e.length-1)return e.length;for(var n,r,o=l(s(e,t)),i=[],c=t+1;c<e.length;c++)if(r=c-1,!(55296<=(n=e).charCodeAt(r)&&n.charCodeAt(r)<=56319&&56320<=n.charCodeAt(r+1)&&n.charCodeAt(r+1)<=57343)){var u=l(s(e,c));if(a(o,i,u))return c;i.push(u)}return e.length},this.splitGraphemes=function(e){for(var t,n=[],r=0;(t=this.nextBreak(e,r))<e.length;)n.push(e.slice(r,t)),r=t;return r<e.length&&n.push(e.slice(r)),n},this.iterateGraphemes=function(e){var t=0,n={next:function(){var n,r;return(r=this.nextBreak(e,t))<e.length?(n=e.slice(t,r),t=r,{value:n,done:!1}):t<e.length?(n=e.slice(t),t=e.length,{value:n,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return n}),n},this.countGraphemes=function(e){for(var t,n=0,r=0;(t=this.nextBreak(e,r))<e.length;)r=t,n++;return r<e.length&&n++,n},this})},{}],980:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var o=r(e("./handlebars.runtime")),i=r(e("./handlebars/compiler/ast")),s=e("./handlebars/compiler/base"),a=e("./handlebars/compiler/compiler"),l=r(e("./handlebars/compiler/javascript-compiler")),c=r(e("./handlebars/compiler/visitor")),u=r(e("./handlebars/no-conflict")),d=o.default.create;function p(){var e=d();return e.compile=function(t,n){return a.compile(t,n,e)},e.precompile=function(t,n){return a.precompile(t,n,e)},e.AST=i.default,e.Compiler=a.Compiler,e.JavaScriptCompiler=l.default,e.Parser=s.parser,e.parse=s.parse,e.parseWithoutProcessing=s.parseWithoutProcessing,e}var h=p();h.create=p,u.default(h),h.Visitor=c.default,h.default=h,n.default=h,t.exports=n.default},{"./handlebars.runtime":981,"./handlebars/compiler/ast":983,"./handlebars/compiler/base":984,"./handlebars/compiler/compiler":986,"./handlebars/compiler/javascript-compiler":988,"./handlebars/compiler/visitor":991,"./handlebars/no-conflict":1008}],981:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var i=o(e("./handlebars/base")),s=r(e("./handlebars/safe-string")),a=r(e("./handlebars/exception")),l=o(e("./handlebars/utils")),c=o(e("./handlebars/runtime")),u=r(e("./handlebars/no-conflict"));function d(){var e=new i.HandlebarsEnvironment;return l.extend(e,i),e.SafeString=s.default,e.Exception=a.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var p=d();p.create=d,u.default(p),p.default=p,n.default=p,t.exports=n.default},{"./handlebars/base":982,"./handlebars/exception":995,"./handlebars/no-conflict":1008,"./handlebars/runtime":1009,"./handlebars/safe-string":1010,"./handlebars/utils":1011}],982:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.HandlebarsEnvironment=u;var o=e("./utils"),i=r(e("./exception")),s=e("./helpers"),a=e("./decorators"),l=r(e("./logger")),c=e("./internal/proto-access");n.VERSION="4.7.7";n.COMPILER_REVISION=8;n.LAST_COMPATIBLE_COMPILER_REVISION=7;n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};function u(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===o.toString.call(e))o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var d=l.default.log;n.log=d,n.createFrame=o.createFrame,n.logger=l.default},{"./decorators":993,"./exception":995,"./helpers":996,"./internal/proto-access":1005,"./logger":1007,"./utils":1011}],983:[function(e,t,n){"use strict";n.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};n.default=r,t.exports=n.default},{}],984:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.parseWithoutProcessing=c,n.parse=function(e,t){var n=c(e,t);return new i.default(t).accept(n)};var o=r(e("./parser")),i=r(e("./whitespace-control")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./helpers")),a=e("../utils");n.parser=o.default;var l={};function c(e,t){return"Program"===e.type?e:(o.default.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}a.extend(l,s)},{"../utils":1011,"./helpers":987,"./parser":989,"./whitespace-control":992}],985:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("../utils"),o=void 0;try{if("function"!=typeof define||!define.amd){var i=e("source-map");o=i.SourceNode}}catch(e){}function s(e,t,n){if(r.isArray(e)){for(var o=[],i=0,s=e.length;i<s;i++)o.push(t.wrap(e[i],n));return o}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}o||((o=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new o(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof o?e:(e=s(e,this,t),new o(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach((function(r){var o=s(e[r],t);"undefined"!==o&&n.push([t.quotedString(r),":",o])}));var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(s(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},n.default=a,t.exports=n.default},{"../utils":1011,"source-map":1023}],986:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.Compiler=l,n.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),i=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(i,t)},n.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=i.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function s(){var r=n.parse(e,t),o=(new n.Compiler).compile(r,t),i=(new n.JavaScriptCompiler).compile(o,t,void 0,!0);return n.template(i)}function a(e,t){return r||(r=s()),r.call(this,e,t)}return a._setup=function(e){return r||(r=s()),r._setup(e)},a._child=function(e,t,n,o){return r||(r=s()),r._child(e,t,n,o)},a};var o=r(e("../exception")),i=e("../utils"),s=r(e("./ast")),a=[].slice;function l(){}function c(e,t){if(e===t)return!0;if(i.isArray(e)&&i.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],o=e.opcodes[n];if(r.opcode!==o.opcode||!c(r.args,o.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new o.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",i,r,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,o=r.parts[0],i=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",o,i)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.path,a=i.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",r.length,a);else{if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+a,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",r.length,i.original,s.default.helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=s.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=s.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&s.default.helpers.helperExpression(e),o=!n&&(r||t);if(o&&!r){var i=e.path.parts[0],a=this.options;a.knownHelpers[i]?r=!0:a.knownHelpersOnly&&(o=!1)}return r?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||s.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),o},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],o=r&&i.indexOf(r,e);if(r&&o>=0)return[t,o]}}}},{"../exception":995,"../utils":1011,"./ast":983}],987:[function(e,t,n){"use strict";n.__esModule=!0,n.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},n.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},n.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},n.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},n.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",o=[],s=0,a=0,l=t.length;a<l;a++){var c=t[a].part,u=t[a].original!==c;if(r+=(t[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)o.push(c);else{if(o.length>0)throw new i.default("Invalid path: "+r,{loc:n});".."===c&&s++}}return{type:"PathExpression",data:e,depth:s,parts:o,original:r,loc:n}},n.prepareMustache=function(e,t,n,r,o,i){var s=r.charAt(3)||r.charAt(2),a="{"!==s&&"&"!==s;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:a,strip:o,loc:this.locInfo(i)}},n.prepareRawBlock=function(e,t,n,r){s(e,n),r=this.locInfo(r);var o={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},n.prepareBlock=function(e,t,n,r,o,a){r&&r.path&&s(e,r);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var c=void 0,u=void 0;if(n){if(l)throw new i.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),u=n.strip,c=n.program}o&&(o=c,c=t,t=o);return{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:c,openStrip:e.strip,inverseStrip:u,closeStrip:r&&r.strip,loc:this.locInfo(a)}},n.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},n.preparePartialBlock=function(e,t,n,r){return s(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,o=e("../exception"),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+t,n)}}},{"../exception":995}],988:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var o=e("../base"),i=r(e("../exception")),s=e("../utils"),a=r(e("./code-gen"));function l(e){this.value=e}function c(){}c.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,s=void 0,a=void 0,l=void 0,c=void 0;for(l=0,c=o.length;l<c;l++)s=o[l],this.source.currentLocation=s.loc,a=a||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(r);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var p=this.context,h=p.programs,m=p.decorators;for(l=0,c=h.length;l<c;l++)h[l]&&(d[l]=h[l],m[l]&&(d[l+"_d"]=m[l],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var o=0;Object.keys(this.aliases).forEach((function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++o+"="+e,r.children[0]="alias"+o)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var i=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths");var s=this.mergeSource(n);return e?(i.push(s),Function.apply(this,i)):this.source.wrap(["function(",i.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,o=void 0,i=void 0,s=void 0;return this.source.each((function(e){e.appendToBuffer?(i?e.prepend("  + "):i=e,s=e):(i&&(o?i.prepend("buffer += "):r=!0,s.add(";"),i=s=void 0),o=!0,t||(n=!1))})),n?i?(i.prepend("return "),s.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var o=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,o){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r){var o=t.popStack(),i=0,s=n.length;e&&s--;for(;i<s;i++)o=t.nameLookup(o,n[i],r);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(n[i]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&o,this,t,e));else for(var s=t.length;n<s;n++)this.replaceStack((function(o){var s=i.nameLookup(o,t[n],e);return r?[" && ",s]:[" != null ? ",s," : ",o]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),o=this.setupHelper(e,t),i=[];n&&i.push(o.name),i.push(r),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var s=["(",this.itemsSeparatedBy(i,"||"),")"],a=this.source.functionCall(s,"call",o.callParams);this.push(a)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],o=this.setupParams(t,1,r);e&&(t=this.popStack(),delete o.name),n&&(o.indent=JSON.stringify(n)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),r.push(o),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&(i.contexts[e]=n),r&&(i.types[e]=r),o&&(i.ids[e]=o),i.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:c,compileChildren:function(e,t){for(var n=e.children,r=void 0,o=void 0,i=0,s=n.length;i<s;i++){r=n[i],o=new this.compiler;var a=this.matchExistingProgram(r);if(null==a){this.context.programs.push("");var l=this.context.programs.length;r.index=l,r.name="program"+l,this.context.programs[l]=o.compile(r,t,this.context,!this.precompile),this.context.decorators[l]=o.decorators,this.context.environments[l]=r,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=a.index,r.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,o=void 0;if(!this.isInline())throw new i.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof l)t=["(",n=[s.value]],o=!0;else{r=!0;var a=this.incrStack();t=["((",this.push(a)," = ",s,")"],n=this.topStack()}var c=e.call(this,n);o||this.popStack(),r&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof l)this.compileStack.push(r);else{var o=this.incrStack();this.pushSource([o," = ",r,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof l)return n.value;if(!t){if(!this.stackSlot)throw new i.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},o=[],i=[],s=[],a=!n,l=void 0;a&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(r.fn=u||"container.noop",r.inverse=c||"container.noop");for(var d=t;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(s[d]=this.popStack()),this.stringParams&&(i[d]=this.popStack(),o[d]=this.popStack());return a&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(s)),this.stringParams&&(r.types=this.source.generateArray(i),r.contexts=this.source.generateArray(o)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var o=this.setupParams(e,t,n);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),r?(this.useRegister("options"),n.push("options"),["options=",o]):n?(n.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=c.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),c.isValidJavaScriptVariableName=function(e){return!c.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n.default=c,t.exports=n.default},{"../base":982,"../exception":995,"../utils":1011,"./code-gen":985}],989:[function(e,t,n){"use strict";n.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,o,i,s){var a=i.length-1;switch(o){case 1:return i[a-1];case 2:this.$=r.prepareProgram(i[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=i[a];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(i[a]),strip:r.stripFlags(i[a],i[a]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[a],value:i[a],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(i[a-2],i[a-1],i[a],this._$);break;case 12:this.$={path:i[a-3],params:i[a-2],hash:i[a-1]};break;case 13:this.$=r.prepareBlock(i[a-3],i[a-2],i[a-1],i[a],!1,this._$);break;case 14:this.$=r.prepareBlock(i[a-3],i[a-2],i[a-1],i[a],!0,this._$);break;case 15:this.$={open:i[a-5],path:i[a-4],params:i[a-3],hash:i[a-2],blockParams:i[a-1],strip:r.stripFlags(i[a-5],i[a])};break;case 16:case 17:this.$={path:i[a-4],params:i[a-3],hash:i[a-2],blockParams:i[a-1],strip:r.stripFlags(i[a-5],i[a])};break;case 18:this.$={strip:r.stripFlags(i[a-1],i[a-1]),program:i[a]};break;case 19:var l=r.prepareBlock(i[a-2],i[a-1],i[a],i[a],!1,this._$),c=r.prepareProgram([l],i[a-1].loc);c.chained=!0,this.$={strip:i[a-2].strip,program:c,chain:!0};break;case 20:this.$=i[a];break;case 21:this.$={path:i[a-1],strip:r.stripFlags(i[a-2],i[a])};break;case 22:case 23:this.$=r.prepareMustache(i[a-3],i[a-2],i[a-1],i[a-4],r.stripFlags(i[a-4],i[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[a-3],params:i[a-2],hash:i[a-1],indent:"",strip:r.stripFlags(i[a-4],i[a]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(i[a-2],i[a-1],i[a],this._$);break;case 26:this.$={path:i[a-3],params:i[a-2],hash:i[a-1],strip:r.stripFlags(i[a-4],i[a])};break;case 27:case 28:this.$=i[a];break;case 29:this.$={type:"SubExpression",path:i[a-3],params:i[a-2],hash:i[a-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[a],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(i[a-2]),value:i[a],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(i[a-1]);break;case 33:case 34:this.$=i[a];break;case 35:this.$={type:"StringLiteral",value:i[a],original:i[a],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[a]),original:Number(i[a]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[a],original:"true"===i[a],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 40:case 41:this.$=i[a];break;case 42:this.$=r.preparePath(!0,i[a],this._$);break;case 43:this.$=r.preparePath(!1,i[a],this._$);break;case 44:i[a-2].push({part:r.id(i[a]),original:i[a],separator:i[a-1]}),this.$=i[a-2];break;case 45:this.$=[{part:r.id(i[a]),original:i[a]}];break;case 46:this.$=[];break;case 47:i[a-1].push(i[a]);break;case 48:this.$=[];break;case 49:i[a-1].push(i[a]);break;case 50:this.$=[];break;case 51:i[a-1].push(i[a]);break;case 58:this.$=[];break;case 59:i[a-1].push(i[a]);break;case 64:this.$=[];break;case 65:i[a-1].push(i[a]);break;case 70:this.$=[];break;case 71:i[a-1].push(i[a]);break;case 78:this.$=[];break;case 79:i[a-1].push(i[a]);break;case 82:this.$=[];break;case 83:i[a-1].push(i[a]);break;case 86:this.$=[];break;case 87:i[a-1].push(i[a]);break;case 90:this.$=[];break;case 91:i[a-1].push(i[a]);break;case 94:this.$=[];break;case 95:i[a-1].push(i[a]);break;case 98:this.$=[i[a]];break;case 99:i[a-1].push(i[a]);break;case 100:this.$=[i[a]];break;case 101:i[a-1].push(i[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],o=[],i=this.table,s="",a=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;o.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,h,m,f,g,b,v,y,j,_,w={};;){if(m=n[n.length-1],this.defaultActions[m]?f=this.defaultActions[m]:(null==p&&(_=void 0,"number"!=typeof(_=t.lexer.lex()||1)&&(_=t.symbols_[_]||_),p=_),f=i[m]&&i[m][p]),void 0===f||!f.length||!f[0]){var I="";if(!c){for(b in j=[],i[m])this.terminals_[b]&&b>2&&j.push("'"+this.terminals_[b]+"'");I=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+j.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(I,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:j})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(f[0]){case 1:n.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(f[1]),p=null,h?(p=h,h=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[f[1]][1],w.$=r[r.length-v],w._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},d&&(w._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(w,s,l,a,this.yy,f[1],r,o)))return g;v&&(n=n.slice(0,-1*v*2),r=r.slice(0,-1*v),o=o.slice(0,-1*v)),n.push(this.productions_[f[1]][0]),r.push(w.$),o.push(w._$),y=i[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length&&(!(n=this._input.match(this.rules[i[s]]))||t&&!(n[0].length>t[0].length)||(t=n,r=s,this.options.flex));s++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function o(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();n.default=r,t.exports=n.default},{}],990:[function(e,t,n){"use strict";n.__esModule=!0,n.print=function(e){return(new s).accept(e)},n.PrintVisitor=s;var r,o=e("./visitor"),i=(r=o)&&r.__esModule?r:{default:r};function s(){this.padding=0}s.prototype=new i.default,s.prototype.pad=function(e){for(var t="",n=0,r=this.padding;n<r;n++)t+="  ";return t+=e+"\n"},s.prototype.Program=function(e){var t="",n=e.body,r=void 0,o=void 0;if(e.blockParams){var i="BLOCK PARAMS: [";for(r=0,o=e.blockParams.length;r<o;r++)i+=" "+e.blockParams[r];i+=" ]",t+=this.pad(i)}for(r=0,o=n.length;r<o;r++)t+=this.accept(n[r]);return this.padding--,t},s.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},s.prototype.Decorator=function(e){return this.pad("{{ DIRECTIVE "+this.SubExpression(e)+" }}")},s.prototype.BlockStatement=s.prototype.DecoratorBlock=function(e){var t="";return t+=this.pad(("DecoratorBlock"===e.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},s.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},s.prototype.PartialBlockStatement=function(e){var t="PARTIAL BLOCK:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),t+=" "+this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--,this.pad("{{> "+t+" }}")},s.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},s.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},s.prototype.SubExpression=function(e){for(var t,n=e.params,r=[],o=0,i=n.length;o<i;o++)r.push(this.accept(n[o]));return n="["+r.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+n+t},s.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},s.prototype.StringLiteral=function(e){return'"'+e.value+'"'},s.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},s.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},s.prototype.UndefinedLiteral=function(){return"UNDEFINED"},s.prototype.NullLiteral=function(){return"NULL"},s.prototype.Hash=function(e){for(var t=e.pairs,n=[],r=0,o=t.length;r<o;r++)n.push(this.accept(t[r]));return"HASH{"+n.join(", ")+"}"},s.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},{"./visitor":991}],991:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("../exception"),i=(r=o)&&r.__esModule?r:{default:r};function s(){this.parents=[]}function a(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function l(e){a.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function c(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}s.prototype={constructor:s,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!s.prototype[n.type])throw new i.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new i.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:a,Decorator:a,BlockStatement:l,DecoratorBlock:l,PartialStatement:c,PartialBlockStatement:function(e){c.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:a,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},n.default=s,t.exports=n.default},{"../exception":995}],992:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("./visitor"),i=(r=o)&&r.__esModule?r:{default:r};function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function a(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],o=e[t-2];return r?"ContentStatement"===r.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function l(e,t,n){void 0===t&&(t=-1);var r=e[t+1],o=e[t+2];return r?"ContentStatement"===r.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function c(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var o=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==o}}function u(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var o=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==o,r.leftStripped}}s.prototype=new i.default,s.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,o=0,i=r.length;o<i;o++){var s=r[o],d=this.accept(s);if(d){var p=a(r,o,n),h=l(r,o,n),m=d.openStandalone&&p,f=d.closeStandalone&&h,g=d.inlineStandalone&&p&&h;d.close&&c(r,o,!0),d.open&&u(r,o,!0),t&&g&&(c(r,o),u(r,o)&&"PartialStatement"===s.type&&(s.indent=/([ \t]+$)/.exec(r[o-1].original)[1])),t&&m&&(c((s.program||s.inverse).body),u(r,o)),t&&f&&(c(r,o),u((s.inverse||s.program).body))}}return e},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,o=n;if(n&&n.chained)for(r=n.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var i={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:l(t.body),closeStandalone:a((r||t).body)};if(e.openStrip.close&&c(t.body,null,!0),n){var s=e.inverseStrip;s.open&&u(t.body,null,!0),s.close&&c(r.body,null,!0),e.closeStrip.open&&u(o.body,null,!0),!this.options.ignoreStandalone&&a(t.body)&&l(r.body)&&(u(t.body),c(r.body))}else e.closeStrip.open&&u(t.body,null,!0);return i},s.prototype.Decorator=s.prototype.MustacheStatement=function(e){return e.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},n.default=s,t.exports=n.default},{"./visitor":991}],993:[function(e,t,n){"use strict";n.__esModule=!0,n.registerDefaultDecorators=function(e){i.default(e)};var r,o=e("./decorators/inline"),i=(r=o)&&r.__esModule?r:{default:r}},{"./decorators/inline":994}],994:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("../utils");n.default=function(e){e.registerDecorator("inline",(function(e,t,n,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var s=n.partials;n.partials=r.extend({},s,t.partials);var a=e(o,i);return n.partials=s,a}),t.partials[o.args[0]]=o.fn,i}))},t.exports=n.default},{"../utils":1011}],995:[function(e,t,n){"use strict";n.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function o(e,t){var n=t&&t.loc,i=void 0,s=void 0,a=void 0,l=void 0;n&&(i=n.start.line,s=n.end.line,a=n.start.column,l=n.end.column,e+=" - "+i+":"+a);for(var c=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=c[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=i,this.endLineNumber=s,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=a,this.endColumn=l))}catch(e){}}o.prototype=new Error,n.default=o,t.exports=n.default},{}],996:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.registerDefaultHelpers=function(e){o.default(e),i.default(e),s.default(e),a.default(e),l.default(e),c.default(e),u.default(e)},n.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var o=r(e("./helpers/block-helper-missing")),i=r(e("./helpers/each")),s=r(e("./helpers/helper-missing")),a=r(e("./helpers/if")),l=r(e("./helpers/log")),c=r(e("./helpers/lookup")),u=r(e("./helpers/with"))},{"./helpers/block-helper-missing":997,"./helpers/each":998,"./helpers/helper-missing":999,"./helpers/if":1e3,"./helpers/log":1001,"./helpers/lookup":1002,"./helpers/with":1003}],997:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("../utils");n.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var o=n.inverse,i=n.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return i(t,n)}))},t.exports=n.default},{"../utils":1011}],998:[function(e,t,n){(function(r){(function(){"use strict";n.__esModule=!0;var o,i=e("../utils"),s=e("../exception"),a=(o=s)&&o.__esModule?o:{default:o};n.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n,o=t.fn,s=t.inverse,l=0,c="",u=void 0,d=void 0;function p(t,n,r){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!r,d&&(u.contextPath=d+t)),c+=o(e[t],{data:u,blockParams:i.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(u=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;l<h;l++)l in e&&p(l,l,l===e.length-1);else if(r.Symbol&&e[r.Symbol.iterator]){for(var m=[],f=e[r.Symbol.iterator](),g=f.next();!g.done;g=f.next())m.push(g.value);for(h=(e=m).length;l<h;l++)p(l,l,l===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&p(n,l-1),n=e,l++})),void 0!==n&&p(n,l-1,!0);return 0===l&&(c=s(this)),c}))},t.exports=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../exception":995,"../utils":1011}],999:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("../exception"),i=(r=o)&&r.__esModule?r:{default:r};n.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=n.default},{"../exception":995}],1e3:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("../utils"),i=e("../exception"),s=(r=i)&&r.__esModule?r:{default:r};n.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new s.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new s.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},t.exports=n.default},{"../exception":995,"../utils":1011}],1001:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)}))},t.exports=n.default},{}],1002:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},t.exports=n.default},{}],1003:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("../utils"),i=e("../exception"),s=(r=i)&&r.__esModule?r:{default:r};n.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new s.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:o.blockParams([e],[r&&r.contextPath])})}))},t.exports=n.default},{"../exception":995,"../utils":1011}],1004:[function(e,t,n){"use strict";n.__esModule=!0,n.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=e("../utils")},{"../utils":1011}],1005:[function(e,t,n){"use strict";n.__esModule=!0,n.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},n.resultIsAllowed=function(e,t,n){return s("function"==typeof e?t.methods:t.properties,n)},n.resetLoggedProperties=function(){Object.keys(i).forEach((function(e){delete i[e]}))};var r=e("./create-new-lookup-object"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../logger")),i=Object.create(null);function s(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==i[e]&&(i[e]=!0,o.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},{"../logger":1007,"./create-new-lookup-object":1004}],1006:[function(e,t,n){"use strict";n.__esModule=!0,n.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},{}],1007:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("./utils"),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console[t].apply(console,r)}}};n.default=o,t.exports=n.default},{"./utils":1011}],1008:[function(e,t,n){(function(e){(function(){"use strict";n.__esModule=!0,n.default=function(t){var n=void 0!==e?e:window,r=n.Handlebars;t.noConflict=function(){return n.Handlebars===t&&(n.Handlebars=r),t}},t.exports=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],1009:[function(e,t,n){"use strict";n.__esModule=!0,n.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION)return;if(t<a.LAST_COMPATIBLE_COMPILER_REVISION){var r=a.REVISION_CHANGES[n],o=a.REVISION_CHANGES[t];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},n.template=function(e,t){if(!t)throw new s.default("No environment passed to template");if(!e||!e.main)throw new s.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new s.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,o=0;o<n;o++){if(null!=(e[o]&&r.lookupProperty(e[o],t)))return e[o][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:o.escapeExpression,invokePartial:function(n,r,i){i.hash&&(r=o.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i);var a=o.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,r,a);if(null==l&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),l=i.partials[i.name](r,a)),null!=l){if(i.indent){for(var c=l.split("\n"),u=0,d=c.length;u<d&&(c[u]||u+1!==d);u++)c[u]=i.indent+c[u];l=c.join("\n")}return l}throw new s.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,o){var i=this.programs[e],s=this.fn(e);return t||o||r||n?i=d(this,e,s,t,n,r,o):i||(i=this.programs[e]=d(this,e,s)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=o.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=n.data;i._setup(n),!n.partial&&e.useData&&(o=h(t,o));var s=void 0,a=e.useBlockParams?[]:void 0;function l(t){return""+e.main(r,t,r.helpers,r.partials,o,a,s)}return e.useDepths&&(s=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=m(e.main,l,r,n.depths||[],o,a))(t,n)}return i.isTop=!0,i._setup=function(i){if(i.partial)r.protoAccessControl=i.protoAccessControl,r.helpers=i.helpers,r.partials=i.partials,r.decorators=i.decorators,r.hooks=i.hooks;else{var s=o.extend({},t.helpers,i.helpers);!function(e,t){Object.keys(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return c.wrapHelper(e,(function(e){return o.extend({lookupProperty:n},e)}))}(r,t)}))}(s,r),r.helpers=s,e.usePartial&&(r.partials=r.mergeIfNeeded(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=o.extend({},t.decorators,i.decorators)),r.hooks={},r.protoAccessControl=u.createProtoAccessControl(i);var a=i.allowCallsToHelperMissing||n;l.moveHelperToHooks(r,"helperMissing",a),l.moveHelperToHooks(r,"blockHelperMissing",a)}},i._child=function(t,n,o,i){if(e.useBlockParams&&!o)throw new s.default("must pass block params");if(e.useDepths&&!i)throw new s.default("must pass parent depths");return d(r,t,e[t],n,0,o,i)},i},n.wrapProgram=d,n.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},n.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;n.fn&&n.fn!==p&&function(){n.data=a.createFrame(n.data);var e=n.fn;i=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=o.extend({},n.partials,e.partials))}();void 0===e&&i&&(e=i);if(void 0===e)throw new s.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},n.noop=p;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),i=e("./exception"),s=(r=i)&&r.__esModule?r:{default:r},a=e("./base"),l=e("./helpers"),c=e("./internal/wrapHelper"),u=e("./internal/proto-access");function d(e,t,n,r,o,i,s){function a(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(a=[t].concat(s)),n(e,t,e.helpers,e.partials,o.data||r,i&&[o.blockParams].concat(i),a)}return(a=m(n,a,e,s,r,i)).program=t,a.depth=s?s.length:0,a.blockParams=o||0,a}function p(){return""}function h(e,t){return t&&"root"in t||((t=t?a.createFrame(t):{}).root=e),t}function m(e,t,n,r,i,s){if(e.decorator){var a={};t=e.decorator(t,a,n,r&&r[0],i,s,r),o.extend(t,a)}return t}},{"./base":982,"./exception":995,"./helpers":996,"./internal/proto-access":1005,"./internal/wrapHelper":1006,"./utils":1011}],1010:[function(e,t,n){"use strict";function r(e){this.string=e}n.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},n.default=r,t.exports=n.default},{}],1011:[function(e,t,n){"use strict";n.__esModule=!0,n.extend=a,n.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},n.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!i.test(e))return e;return e.replace(o,s)},n.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},n.createFrame=function(e){var t=a({},e);return t._parent=e,t},n.blockParams=function(e,t){return e.path=t,e},n.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,i=/[&<>"'`=]/;function s(e){return r[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;n.toString=l;var c=function(e){return"function"==typeof e};c(/x/)&&(n.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),n.isFunction=c;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};n.isArray=u},{}],1012:[function(e,t,n){var r=e("../dist/cjs/handlebars").default,o=e("../dist/cjs/handlebars/compiler/printer");function i(t,n){var o=e("fs").readFileSync(n,"utf8");t.exports=r.compile(o)}r.PrintVisitor=o.PrintVisitor,r.print=o.print,t.exports=r,void 0!==e&&e.extensions&&(e.extensions[".handlebars"]=i,e.extensions[".hbs"]=i)},{"../dist/cjs/handlebars":980,"../dist/cjs/handlebars/compiler/printer":990,fs:696}],1013:[function(e,t,n){var r=e("./util"),o=Object.prototype.hasOwnProperty,i="undefined"!=typeof Map;function s(){this._array=[],this._set=i?new Map:Object.create(null)}s.fromArray=function(e,t){for(var n=new s,r=0,o=e.length;r<o;r++)n.add(e[r],t);return n},s.prototype.size=function(){return i?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var n=i?e:r.toSetString(e),s=i?this.has(e):o.call(this._set,n),a=this._array.length;s&&!t||this._array.push(e),s||(i?this._set.set(e,a):this._set[n]=a)},s.prototype.has=function(e){if(i)return this._set.has(e);var t=r.toSetString(e);return o.call(this._set,t)},s.prototype.indexOf=function(e){if(i){var t=this._set.get(e);if(t>=0)return t}else{var n=r.toSetString(e);if(o.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},n.ArraySet=s},{"./util":1022}],1014:[function(e,t,n){var r=e("./base64");n.encode=function(e){var t,n="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&o,(o>>>=5)>0&&(t|=32),n+=r.encode(t)}while(o>0);return n},n.decode=function(e,t,n){var o,i,s,a,l=e.length,c=0,u=0;do{if(t>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(32&i),c+=(i&=31)<<u,u+=5}while(o);n.value=(a=(s=c)>>1,1==(1&s)?-a:a),n.rest=t}},{"./base64":1015}],1015:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],1016:[function(e,t,n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,t,r,o){if(0===t.length)return-1;var i=function e(t,r,o,i,s,a){var l=Math.floor((r-t)/2)+t,c=s(o,i[l],!0);return 0===c?l:c>0?r-l>1?e(l,r,o,i,s,a):a==n.LEAST_UPPER_BOUND?r<i.length?r:-1:l:l-t>1?e(t,l,o,i,s,a):a==n.LEAST_UPPER_BOUND?l:t<0?-1:t}(-1,t.length,e,t,r,o||n.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&0===r(t[i],t[i-1],!0);)--i;return i}},{}],1017:[function(e,t,n){var r=e("./util");function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}o.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},o.prototype.add=function(e){var t,n,o,i,s,a;t=this._last,n=e,o=t.generatedLine,i=n.generatedLine,s=t.generatedColumn,a=n.generatedColumn,i>o||i==o&&a>=s||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=o},{"./util":1022}],1018:[function(e,t,n){function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t,n,i){if(n<i){var s=n-1;r(e,(u=n,d=i,Math.round(u+Math.random()*(d-u))),i);for(var a=e[i],l=n;l<i;l++)t(e[l],a)<=0&&r(e,s+=1,l);r(e,s+1,l);var c=s+1;o(e,t,n,c-1),o(e,t,c+1,i)}var u,d}n.quickSort=function(e,t){o(e,t,0,e.length-1)}},{}],1019:[function(e,t,n){var r=e("./util"),o=e("./binary-search"),i=e("./array-set").ArraySet,s=e("./base64-vlq"),a=e("./quick-sort").quickSort;function l(e,t){var n=e;return"string"==typeof e&&(n=r.parseSourceMapInput(e)),null!=n.sections?new d(n,t):new c(n,t)}function c(e,t){var n=e;"string"==typeof e&&(n=r.parseSourceMapInput(e));var o=r.getArg(n,"version"),s=r.getArg(n,"sources"),a=r.getArg(n,"names",[]),l=r.getArg(n,"sourceRoot",null),c=r.getArg(n,"sourcesContent",null),u=r.getArg(n,"mappings"),d=r.getArg(n,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);l&&(l=r.normalize(l)),s=s.map(String).map(r.normalize).map((function(e){return l&&r.isAbsolute(l)&&r.isAbsolute(e)?r.relative(l,e):e})),this._names=i.fromArray(a.map(String),!0),this._sources=i.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map((function(e){return r.computeSourceURL(l,e,t)})),this.sourceRoot=l,this.sourcesContent=c,this._mappings=u,this._sourceMapURL=t,this.file=d}function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e,t){var n=e;"string"==typeof e&&(n=r.parseSourceMapInput(e));var o=r.getArg(n,"version"),s=r.getArg(n,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new i,this._names=new i;var a={line:-1,column:0};this._sections=s.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var n=r.getArg(e,"offset"),o=r.getArg(n,"line"),i=r.getArg(n,"column");if(o<a.line||o===a.line&&i<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=n,{generatedOffset:{generatedLine:o+1,generatedColumn:i+1},consumer:new l(r.getArg(e,"map"),t)}}))}l.fromSourceMap=function(e,t){return c.fromSourceMap(e,t)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},l.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(e,t,n){var o,i=t||null;switch(n||l.GENERATED_ORDER){case l.GENERATED_ORDER:o=this._generatedMappings;break;case l.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=r.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,i)},l.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==c;)i.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return i},n.SourceMapConsumer=l,c.prototype=Object.create(l.prototype),c.prototype.consumer=l,c.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=r.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},c.fromSourceMap=function(e,t){var n=Object.create(c.prototype),o=n._names=i.fromArray(e._names.toArray(),!0),s=n._sources=i.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map((function(e){return r.computeSourceURL(n.sourceRoot,e,t)}));for(var l=e._mappings.toArray().slice(),d=n.__generatedMappings=[],p=n.__originalMappings=[],h=0,m=l.length;h<m;h++){var f=l[h],g=new u;g.generatedLine=f.generatedLine,g.generatedColumn=f.generatedColumn,f.source&&(g.source=s.indexOf(f.source),g.originalLine=f.originalLine,g.originalColumn=f.originalColumn,f.name&&(g.name=o.indexOf(f.name)),p.push(g)),d.push(g)}return a(n.__originalMappings,r.compareByOriginalPositions),n},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),c.prototype._parseMappings=function(e,t){for(var n,o,i,l,c,d=1,p=0,h=0,m=0,f=0,g=0,b=e.length,v=0,y={},j={},_=[],w=[];v<b;)if(";"===e.charAt(v))d++,v++,p=0;else if(","===e.charAt(v))v++;else{for((n=new u).generatedLine=d,l=v;l<b&&!this._charIsMappingSeparator(e,l);l++);if(i=y[o=e.slice(v,l)])v+=o.length;else{for(i=[];v<l;)s.decode(e,v,j),c=j.value,v=j.rest,i.push(c);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");y[o]=i}n.generatedColumn=p+i[0],p=n.generatedColumn,i.length>1&&(n.source=f+i[1],f+=i[1],n.originalLine=h+i[2],h=n.originalLine,n.originalLine+=1,n.originalColumn=m+i[3],m=n.originalColumn,i.length>4&&(n.name=g+i[4],g+=i[4])),w.push(n),"number"==typeof n.originalLine&&_.push(n)}a(w,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,a(_,r.compareByOriginalPositions),this.__originalMappings=_},c.prototype._findMapping=function(e,t,n,r,i,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return o.search(e,t,i,s)},c.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===t.generatedLine){var i=r.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),i=r.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=r.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:r.getArg(o,"originalLine",null),column:r.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},c.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var o,i=e;if(null!=this.sourceRoot&&(i=r.relative(this.sourceRoot,i)),null!=this.sourceRoot&&(o=r.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if("file"==o.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||"/"==o.path)&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===n.source)return{line:r.getArg(i,"generatedLine",null),column:r.getArg(i,"generatedColumn",null),lastColumn:r.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=c,d.prototype=Object.create(l.prototype),d.prototype.constructor=l,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=o.search(t,this._sections,(function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn})),i=this._sections[n];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(r.getArg(e,"source"))){var o=n.consumer.generatedPositionFor(e);if(o)return{line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var l=i[s],c=o.consumer._sources.at(l.source);c=r.computeSourceURL(o.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=o.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)},n.IndexedSourceMapConsumer=d},{"./array-set":1013,"./base64-vlq":1014,"./binary-search":1016,"./quick-sort":1018,"./util":1022}],1020:[function(e,t,n){var r=e("./base64-vlq"),o=e("./util"),i=e("./array-set").ArraySet,s=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._skipValidation=o.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=o.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(r){var i=r;null!==t&&(i=o.relative(t,r)),n._sources.has(i)||n._sources.add(i);var s=e.sourceContentFor(r);null!=s&&n.setSourceContent(r,s)})),n},a.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),n=o.getArg(e,"original",null),r=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,i),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=i&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:i})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=o.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=o.relative(s,r));var a=new i,l=new i;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=n&&(t.source=o.join(n,t.source)),null!=s&&(t.source=o.relative(s,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}var c=t.source;null==c||a.has(c)||a.add(c);var u=t.name;null==u||l.has(u)||l.add(u)}),this),this._sources=a,this._names=l,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=o.join(n,t)),null!=s&&(t=o.relative(s,t)),this.setSourceContent(t,r))}),this)},a.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,i,s=0,a=1,l=0,c=0,u=0,d=0,p="",h=this._mappings.toArray(),m=0,f=h.length;m<f;m++){if(e="",(t=h[m]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(m>0){if(!o.compareByGeneratedPositionsInflated(t,h[m-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(i=this._sources.indexOf(t.source),e+=r.encode(i-d),d=i,e+=r.encode(t.originalLine-1-c),c=t.originalLine-1,e+=r.encode(t.originalColumn-l),l=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-u),u=n)),p+=e}return p},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));var n=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=a},{"./array-set":1013,"./base64-vlq":1014,"./mapping-list":1017,"./util":1022}],1021:[function(e,t,n){var r=e("./source-map-generator").SourceMapGenerator,o=e("./util"),i=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,n,r,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,s=e.split(i),l=0,c=function(){return e()+(e()||"");function e(){return l<s.length?s[l++]:void 0}},u=1,d=0,p=null;return t.eachMapping((function(e){if(null!==p){if(!(u<e.generatedLine)){var t=(n=s[l]||"").substr(0,e.generatedColumn-d);return s[l]=n.substr(e.generatedColumn-d),d=e.generatedColumn,h(p,t),void(p=e)}h(p,c()),u++,d=0}for(;u<e.generatedLine;)r.add(c()),u++;if(d<e.generatedColumn){var n=s[l]||"";r.add(n.substr(0,e.generatedColumn)),s[l]=n.substr(e.generatedColumn),d=e.generatedColumn}p=e}),this),l<s.length&&(p&&h(p,c()),r.add(s.splice(l).join(""))),t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=o.join(n,e)),r.setSourceContent(e,i))})),r;function h(e,t){if(null===e||void 0===e.source)r.add(t);else{var i=n?o.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(o.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),o=!1,i=null,s=null,a=null,l=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(i===r.source&&s===r.line&&a===r.column&&l===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),i=r.source,s=r.line,a=r.column,l=r.name,o=!0):o&&(n.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1);for(var c=0,u=e.length;c<u;c++)10===e.charCodeAt(c)?(t.line++,t.column=0,c+1===u?(i=null,o=!1):o&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}},n.SourceNode=a},{"./source-map-generator":1020,"./util":1022}],1022:[function(e,t,n){n.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,o=/^data:.+\,.+$/;function i(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function s(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var t=e,r=i(e);if(r){if(!r.path)return e;t=r.path}for(var o,a=n.isAbsolute(t),l=t.split(/\/+/),c=0,u=l.length-1;u>=0;u--)"."===(o=l[u])?l.splice(u,1):".."===o?c++:c>0&&(""===o?(l.splice(u+1,c),c=0):(l.splice(u,2),c--));return""===(t=l.join("/"))&&(t=a?"/":"."),r?(r.path=t,s(r)):t}function l(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),r=i(e);if(r&&(e=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),s(n);if(n||t.match(o))return t;if(r&&!r.host&&!r.path)return r.host=t,s(r);var l="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return r?(r.path=l,s(r)):l}n.urlParse=i,n.urlGenerate=s,n.normalize=a,n.join=l,n.isAbsolute=function(e){return"/"===e.charAt(0)||r.test(e)},n.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var c=!("__proto__"in Object.create(null));function u(e){return e}function d(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function p(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}n.toSetString=c?u:function(e){return d(e)?"$"+e:e},n.fromSetString=c?u:function(e){return d(e)?e.slice(1):e},n.compareByOriginalPositions=function(e,t,n){var r=p(e.source,t.source);return 0!==r||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)||n||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=e.generatedLine-t.generatedLine)?r:p(e.name,t.name)},n.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=p(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:p(e.name,t.name)},n.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=p(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:p(e.name,t.name)},n.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},n.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var r=i(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var o=r.path.lastIndexOf("/");o>=0&&(r.path=r.path.substring(0,o+1))}t=l(s(r),t)}return a(t)}},{}],1023:[function(e,t,n){n.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":1019,"./lib/source-map-generator":1020,"./lib/source-node":1021}],1024:[function(e,t,n){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":981}],1025:[function(e,t,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
n.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?o-1:0,p=n?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var s,a,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=m,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[n+h]=255&s,h+=m,s/=256,c-=8);e[n+h-m]|=128*f}},{}],1026:[function(e,t,n){(function(r,o,i){(function(){
/*!

JSZip v3.7.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(e){"object"==typeof n&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,o){function i(a,l){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};n[a][0].call(d.exports,(function(e){return i(n[a][1][e]||e)}),d,d.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,o,s,a,l,c,u=[],d=0,p=e.length,h=p,m="string"!==r.getTypeOf(e);d<e.length;)h=p-d,o=m?(t=e[d++],n=d<p?e[d++]:0,d<p?e[d++]:0):(t=e.charCodeAt(d++),n=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),s=t>>2,a=(3&t)<<4|n>>4,l=1<h?(15&n)<<2|o>>6:64,c=2<h?63&o:64,u.push(i.charAt(s)+i.charAt(a)+i.charAt(l)+i.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,s,a,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&h--,e.charAt(e.length-2)===i.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=o.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=i.indexOf(e.charAt(c++))<<2|(s=i.indexOf(e.charAt(c++)))>>4,n=(15&s)<<4|(a=i.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(l=i.indexOf(e.charAt(c++))),p[u++]=t,64!==a&&(p[u++]=n),64!==l&&(p[u++]=r);return p}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),o=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,n,r,o){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=o}a.prototype={getContentWorker:function(){var e=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new i).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var i=o,s=0+n;e^=-1;for(var a=0;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var i=o,s=0+n;e^=-1;for(var a=0;a<s;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako"),i=e("./utils"),s=e("./stream/GenericWorker"),a=r?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(a,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function o(e,t,n,o,s,u){var d,p,h=e.file,m=e.compression,f=u!==a.utf8encode,g=i.transformTo("string",u(h.name)),b=i.transformTo("string",a.utf8encode(h.name)),v=h.comment,y=i.transformTo("string",u(v)),j=i.transformTo("string",a.utf8encode(v)),_=b.length!==h.name.length,w=j.length!==v.length,I="",x="",E="",k=h.dir,C=h.date,S={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(S.crc32=e.crc32,S.compressedSize=e.compressedSize,S.uncompressedSize=e.uncompressedSize);var T=0;t&&(T|=8),f||!_&&!w||(T|=2048);var N=0,A=0;k&&(N|=16),"UNIX"===s?(A=798,N|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,k)):(A=20,N|=function(e){return 63&(e||0)}(h.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,p=C.getUTCFullYear()-1980,p<<=4,p|=C.getUTCMonth()+1,p<<=5,p|=C.getUTCDate(),_&&(x=r(1,1)+r(l(g),4)+b,I+="up"+r(x.length,2)+x),w&&(E=r(1,1)+r(l(y),4)+j,I+="uc"+r(E.length,2)+E);var O="";return O+="\n\0",O+=r(T,2),O+=m.magic,O+=r(d,2),O+=r(p,2),O+=r(S.crc32,4),O+=r(S.compressedSize,4),O+=r(S.uncompressedSize,4),O+=r(g.length,2),O+=r(I.length,2),{fileRecord:c.LOCAL_FILE_HEADER+O+g+I,dirRecord:c.CENTRAL_FILE_HEADER+r(A,2)+O+r(y.length,2)+"\0\0\0\0"+r(N,4)+r(o,4)+g+I+y}}var i=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,s),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=o(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=o(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,o=function(e,t,n,o,s){var a=i.transformTo("string",s(o));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var i=new o(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,n){s++;var o=function(e,t){var n=e||t,o=r[n];if(!o)throw new Error(n+" is not a valid compression method !");return o}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(o,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=s}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.7.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./external"),i=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new o.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var i=0;i<r.length;i++)n.push(c(r[i]));return o.Promise.all(n)})).then((function(e){for(var r=e.shift(),o=r.files,i=0;i<o.length;i++){var s=o[i];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../stream/GenericWorker");function i(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(i,o),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function o(e,t,n){r.call(this,t),this._helper=e;var o=this;e.on("data",(function(e,t){o.push(e)||o._helper.pause(),n&&n(t)})).on("error",(function(e){o.emit("error",e)})).on("end",(function(){o.push(null)}))}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},t.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:void 0!==o,newBufferFrom:function(e,t){if(o.from&&o.from!==Uint8Array.from)return o.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new o(e,t)},allocBuffer:function(e){if(o.alloc)return o.alloc(e);var t=new o(e);return t.fill(0),t},isBuffer:function(e){return o.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,o=i.getTypeOf(t),a=i.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=f(e)),a.createFolders&&(r=m(e))&&g.call(this,r,!0);var d="string"===o&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",o="string");var b;b=t instanceof c||t instanceof s?t:p.isNode&&p.isStream(t)?new h(e,t):i.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var v=new u(e,b,a);this.files[e]=v}var o=e("./utf8"),i=e("./utils"),s=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(b(e)){var o=e;return this.filter((function(e,t){return!t.dir&&o.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(b(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new s("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data[this.zero+e]},o.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===n&&this.data[i+2]===r&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&n===i[1]&&r===i[2]&&o===i[3]},o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function o(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=o},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},o.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../support"),i=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||o.uint8array?"nodebuffer"===t?new a(e):o.uint8array?new l(r.transformTo("uint8array",e)):new i(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../utils");function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}o.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(i,o),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),a=e("../base64"),l=e("../support"),c=e("../external"),u=null;if(l.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new c.Promise((function(n,i){var s=[],l=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return o.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,s),u);n(e)}catch(e){i(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==o,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),o=e("./support"),i=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return o.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,s,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=o.uint8array?new Uint8Array(l):new Array(l),i=s=0;s<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t}(e)},n.utf8decode=function(e){return o.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,o,i,s=e.length,l=new Array(2*s);for(t=n=0;t<s;)if((o=e[t++])<128)l[n++]=o;else if(4<(i=a[o]))l[n++]=65533,t+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&t<s;)o=o<<6|63&e[t++],i--;1<i?l[n++]=65533:o<65536?l[n++]=o:(o-=65536,l[n++]=55296|o>>10&1023,l[n++]=56320|1023&o)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(o.uint8array?"uint8array":"array",e))},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(o.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;s!==t.length&&(o.uint8array?(l=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(l=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),o=e("./base64"),i=e("./nodejsUtils"),s=e("set-immediate-shim"),a=e("./external");function l(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],o=0,i=e.length;if(i<=n)return String.fromCharCode.apply(null,e);for(;o<i;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(o,Math.min(o+n,i)))):r.push(String.fromCharCode.apply(null,e.subarray(o,Math.min(o+n,i)))),o+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=n.getTypeOf(e),o=!0;if("uint8array"===r?o=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=u.applyCanBeUsed.nodebuffer),o)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function p(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=d;var h={};h.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,i.allocBuffer(e.length))}},h.array={string:d,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},h.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return i.newBufferFrom(e)}},h.nodebuffer={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:l},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&i.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){s((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,s,l){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(l?t=o.decode(t):i&&!0!==s&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./signature"),s=e("./zipEntry"),a=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,o=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<o;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(o)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var o=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!i&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new o(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,s=new o(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var s=m((function(){t(o,r)}));"error"===s.status&&r(s.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(o);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=m(p,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},c.reject=function(e){var t=new this(o);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(o);++l<n;)u(e[l],l);return c;function u(e,o){t.resolve(e).then((function(e){s[o]=e,++a!==n||r||(r=!0,i.resolve(c,s))}),(function(e){r||(r=!0,i.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,s=-1,a=new this(o);++s<t;)r=e[s],this.resolve(r).then((function(e){n||(n=!0,i.resolve(a,e))}),(function(e){n||(n=!0,i.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(s[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(s[n]);this._dict_set=!0}}function u(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}c.prototype.push=function(e,t){var n,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new o.Buf8(c),a.next_out=0,a.avail_out=c),1!==(n=r.deflate(a,s))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(a.output,a.next_out))):this.onData(o.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=u,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(e,t){var n,a,l,c,d,p,h=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?h.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(m),h.next_out=0,h.avail_out=m),(n=r.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(p="string"==typeof f?i.string2buf(f):"[object ArrayBuffer]"===u.call(f)?new Uint8Array(f):f,n=r.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(h.output,h.next_out),c=h.next_out-l,d=i.buf2string(h.output,l),h.next_out=c,h.avail_out=m-c,c&&o.arraySet(h.output,h.output,l,c,0),this.onData(d)):this.onData(o.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=p,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,s;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),t=o=0,n=e.length;t<n;t++)i=e[t],s.set(i,o),o+=i.length;return s}},i={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,o,i,s,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),i=s=0;s<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,o,i,a=t||e.length,c=new Array(2*a);for(n=r=0;n<a;)if((o=e[n++])<128)c[r++]=o;else if(4<(i=s[o]))c[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&n<a;)o=o<<6|63&e[n++],i--;1<i?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;i=i+(o=o+t[r++]|0)|0,--s;);o%=65521,i%=65521}return o|i<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var i=r,s=o+n;e^=-1;for(var a=o;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,o=e("../utils/common"),i=e("./trees"),s=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=-2,u=258,d=262,p=113;function h(e,t){return e.msg=l[t],t}function m(e){return(e<<1)-(4<e?9:0)}function f(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function j(e,t){var n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,c=e.window,p=e.w_mask,h=e.prev,m=e.strstart+u,f=c[i+s-1],g=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===g&&c[n+s-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<m);if(r=u-(m-i),i=m-u,s<r){if(e.match_start=t,a<=(s=r))break;f=c[i+s-1],g=c[i+s]}}}while((t=h[t&p])>l&&0!=--o);return s<=e.lookahead?s:e.lookahead}function _(e){var t,n,r,i,l,c,u,p,h,m,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-d)){for(o.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);i+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,p=e.strstart+e.lookahead,m=void 0,(h=i)<(m=c.avail_in)&&(m=h),n=0===m?0:(c.avail_in-=m,o.arraySet(u,c.input,c.next_in,m,p),1===c.state.wrap?c.adler=s(c.adler,u,m,p):2===c.state.wrap&&(c.adler=a(c.adler,u,m,p)),c.next_in+=m,c.total_in+=m,m),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function w(e,t){for(var n,r;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=j(e,n)),e.match_length>=3)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function I(e,t){for(var n,r,o;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=j(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function x(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):h(e,c)}function C(e){var t=k(e);return 0===t&&function(e){e.window_size=2*e.w_size,f(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function S(e,t,n,r,i,s){if(!e)return c;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||9<i||8!==n||r<8||15<r||t<0||9<t||s<0||4<s)return h(e,c);8===r&&(r=9);var l=new E;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,C(e)}r=[new x(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new x(4,4,8,4,w),new x(4,5,16,8,w),new x(4,6,32,32,w),new x(4,4,16,16,I),new x(8,16,32,32,I),new x(8,16,128,128,I),new x(8,32,128,256,I),new x(32,128,258,1024,I),new x(32,258,258,4096,I)],n.deflateInit=function(e,t){return S(e,t,8,15,8,0)},n.deflateInit2=S,n.deflateReset=C,n.deflateResetKeep=k,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,o,s,l;if(!e||!e.state||5<t||t<0)return e?h(e,c):c;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||666===o.status&&4!==t)return h(e,0===e.avail_out?-5:c);if(o.strm=e,n=o.last_flush,o.last_flush=t,42===o.status)if(2===o.wrap)e.adler=0,v(o,31),v(o,139),v(o,8),o.gzhead?(v(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),v(o,255&o.gzhead.time),v(o,o.gzhead.time>>8&255),v(o,o.gzhead.time>>16&255),v(o,o.gzhead.time>>24&255),v(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),v(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(v(o,255&o.gzhead.extra.length),v(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=a(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(v(o,0),v(o,0),v(o,0),v(o,0),v(o,0),v(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),v(o,3),o.status=p);else{var d=8+(o.w_bits-8<<4)<<8;d|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(d|=32),d+=31-d%31,o.status=p,y(o,d),0!==o.strstart&&(y(o,e.adler>>>16),y(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(s=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),g(e),s=o.pending,o.pending!==o.pending_buf_size));)v(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),g(e),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,v(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),g(e),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,v(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(e.adler=a(e.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&g(e),o.pending+2<=o.pending_buf_size&&(v(o,255&e.adler),v(o,e.adler>>8&255),e.adler=0,o.status=p)):o.status=p),0!==o.pending){if(g(e),0===e.avail_out)return o.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(n)&&4!==t)return h(e,-5);if(666===o.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==o.lookahead||0!==t&&666!==o.status){var j=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(o,t):3===o.strategy?function(e,t){for(var n,r,o,s,a=e.window;;){if(e.lookahead<=u){if(_(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=a[o=e.strstart-1])===a[++o]&&r===a[++o]&&r===a[++o]){s=e.strstart+u;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<s);e.match_length=u-(s-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(o,t):r[o.level].func(o,t);if(3!==j&&4!==j||(o.status=666),1===j||3===j)return 0===e.avail_out&&(o.last_flush=-1),0;if(2===j&&(1===t?i._tr_align(o):5!==t&&(i._tr_stored_block(o,0,0,!1),3===t&&(f(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),g(e),0===e.avail_out))return o.last_flush=-1,0}return 4!==t?0:o.wrap<=0?1:(2===o.wrap?(v(o,255&e.adler),v(o,e.adler>>8&255),v(o,e.adler>>16&255),v(o,e.adler>>24&255),v(o,255&e.total_in),v(o,e.total_in>>8&255),v(o,e.total_in>>16&255),v(o,e.total_in>>24&255)):(y(o,e.adler>>>16),y(o,65535&e.adler)),g(e),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==p&&666!==t?h(e,c):(e.state=null,t===p?h(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,r,i,a,l,u,d,p,h=t.length;if(!e||!e.state)return c;if(2===(a=(n=e.state).wrap)||1===a&&42!==n.status||n.lookahead)return c;for(1===a&&(e.adler=s(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(f(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new o.Buf8(n.w_size),o.arraySet(p,t,h-n.w_size,n.w_size,0),t=p,h=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=h,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){for(r=n.strstart,i=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,o,i,s,a,l,c,u,d,p,h,m,f,g,b,v,y,j,_,w,I,x,E,k;n=e.state,r=e.next_in,E=e.input,o=r+(e.avail_in-5),i=e.next_out,k=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,p=n.window,h=n.hold,m=n.bits,f=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{m<15&&(h+=E[r++]<<m,m+=8,h+=E[r++]<<m,m+=8),y=f[h&b];t:for(;;){if(h>>>=j=y>>>24,m-=j,0==(j=y>>>16&255))k[i++]=65535&y;else{if(!(16&j)){if(0==(64&j)){y=f[(65535&y)+(h&(1<<j)-1)];continue t}if(32&j){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&y,(j&=15)&&(m<j&&(h+=E[r++]<<m,m+=8),_+=h&(1<<j)-1,h>>>=j,m-=j),m<15&&(h+=E[r++]<<m,m+=8,h+=E[r++]<<m,m+=8),y=g[h&v];n:for(;;){if(h>>>=j=y>>>24,m-=j,!(16&(j=y>>>16&255))){if(0==(64&j)){y=g[(65535&y)+(h&(1<<j)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&y,m<(j&=15)&&(h+=E[r++]<<m,(m+=8)<j&&(h+=E[r++]<<m,m+=8)),l<(w+=h&(1<<j)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=j,m-=j,(j=i-s)<w){if(u<(j=w-j)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=p,(I=0)===d){if(I+=c-j,j<_){for(_-=j;k[i++]=p[I++],--j;);I=i-w,x=k}}else if(d<j){if(I+=c+d-j,(j-=d)<_){for(_-=j;k[i++]=p[I++],--j;);if(I=0,d<_){for(_-=j=d;k[i++]=p[I++],--j;);I=i-w,x=k}}}else if(I+=d-j,j<_){for(_-=j;k[i++]=p[I++],--j;);I=i-w,x=k}for(;2<_;)k[i++]=x[I++],k[i++]=x[I++],k[i++]=x[I++],_-=3;_&&(k[i++]=x[I++],1<_&&(k[i++]=x[I++]))}else{for(I=i-w;k[i++]=k[I++],k[i++]=k[I++],k[i++]=k[I++],2<(_-=3););_&&(k[i++]=k[I++],1<_&&(k[i++]=k[I++]))}break}}break}}while(r<o&&i<a);r-=_=m>>3,h&=(1<<(m-=_<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<a?a-i+257:257-(i-a),n.hold=h,n.bits=m}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):l}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,p(e))):l}function m(e,t){var n,r;return e?(r=new u,(e.state=r).window=null,0!==(n=h(e,t))&&(e.state=null),n):l}var f,g,b=!0;function v(e){if(b){var t;for(f=new r.Buf32(512),g=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=f,e.lenbits=9,e.distcode=g,e.distbits=5}function y(e,t,n,o){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),o>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(o<(i=s.wsize-s.wnext)&&(i=o),r.arraySet(s.window,t,n-o,i,s.wnext),(o-=i)?(r.arraySet(s.window,t,n-o,o,0),s.wnext=o,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}n.inflateReset=p,n.inflateReset2=h,n.inflateResetKeep=d,n.inflateInit=function(e){return m(e,15)},n.inflateInit2=m,n.inflate=function(e,t){var n,u,d,p,h,m,f,g,b,j,_,w,I,x,E,k,C,S,T,N,A,O,V,P,K=0,D=new r.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,d=e.output,f=e.avail_out,p=e.next_in,u=e.input,m=e.avail_in,g=n.hold,b=n.bits,j=m,_=f,O=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(2&n.wrap&&35615===g){D[n.check=0]=255&g,D[1]=g>>>8&255,n.check=i(n.check,D,2,0),b=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,A=8+(15&(g>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=i(n.check,D,2,0)),b=g=0,n.mode=3;case 3:for(;b<32;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.head&&(n.head.time=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,n.check=i(n.check,D,4,0)),b=g=0,n.mode=4;case 4:for(;b<16;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=i(n.check,D,2,0)),b=g=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=i(n.check,D,2,0)),b=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(m<(w=n.length)&&(w=m),w&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,u,p,w,A)),512&n.flags&&(n.check=i(n.check,u,w,p)),m-=w,p+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break e;for(w=0;A=u[p+w++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A)),A&&w<m;);if(512&n.flags&&(n.check=i(n.check,u,w,p)),m-=w,p+=w,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break e;for(w=0;A=u[p+w++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A)),A&&w<m;);if(512&n.flags&&(n.check=i(n.check,u,w,p)),m-=w,p+=w,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}e.adler=n.check=c(g),b=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=f,e.next_in=p,e.avail_in=m,n.hold=g,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}switch(n.last=1&g,b-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6!==t)break;g>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,b=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(m<w&&(w=m),f<w&&(w=f),0===w)break e;r.arraySet(d,u,p,w,h),m-=w,p+=w,f-=w,h+=w,n.length-=w;break}n.mode=12;break;case 17:for(;b<14;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(n.nlen=257+(31&g),g>>>=5,b-=5,n.ndist=1+(31&g),g>>>=5,b-=5,n.ncode=4+(15&g),g>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.lens[L[n.have++]]=7&g,g>>>=3,b-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,V={bits:n.lenbits},O=a(0,n.lens,0,19,n.lencode,0,n.work,V),n.lenbits=V.bits,O){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(K=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&K,!((E=K>>>24)<=b);){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(C<16)g>>>=E,b-=E,n.lens[n.have++]=C;else{if(16===C){for(P=E+2;b<P;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(g>>>=E,b-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],w=3+(3&g),g>>>=2,b-=2}else if(17===C){for(P=E+3;b<P;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}b-=E,A=0,w=3+(7&(g>>>=E)),g>>>=3,b-=3}else{for(P=E+7;b<P;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}b-=E,A=0,w=11+(127&(g>>>=E)),g>>>=7,b-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,V={bits:n.lenbits},O=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,V),n.lenbits=V.bits,O){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,V={bits:n.distbits},O=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,V),n.distbits=V.bits,O){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=m&&258<=f){e.next_out=h,e.avail_out=f,e.next_in=p,e.avail_in=m,n.hold=g,n.bits=b,s(e,_),h=e.next_out,d=e.output,f=e.avail_out,p=e.next_in,u=e.input,m=e.avail_in,g=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(K=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&K,!((E=K>>>24)<=b);){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(k&&0==(240&k)){for(S=E,T=k,N=C;k=(K=n.lencode[N+((g&(1<<S+T)-1)>>S)])>>>16&255,C=65535&K,!(S+(E=K>>>24)<=b);){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}g>>>=S,b-=S,n.back+=S}if(g>>>=E,b-=E,n.back+=E,n.length=C,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(P=n.extra;b<P;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(K=n.distcode[g&(1<<n.distbits)-1])>>>16&255,C=65535&K,!((E=K>>>24)<=b);){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(0==(240&k)){for(S=E,T=k,N=C;k=(K=n.distcode[N+((g&(1<<S+T)-1)>>S)])>>>16&255,C=65535&K,!(S+(E=K>>>24)<=b);){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}g>>>=S,b-=S,n.back+=S}if(g>>>=E,b-=E,n.back+=E,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=C,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(P=n.extra;b<P;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===f)break e;if(w=_-f,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}I=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),x=n.window}else x=d,I=h-n.offset,w=n.length;for(f<w&&(w=f),f-=w,n.length-=w;d[h++]=x[I++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===f)break e;d[h++]=n.length,f--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===m)break e;m--,g|=u[p++]<<b,b+=8}if(_-=f,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?i(n.check,d,_,h-_):o(n.check,d,_,h-_)),_=f,(n.flags?g:c(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===m)break e;m--,g+=u[p++]<<b,b+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=g=0}n.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=h,e.avail_out=f,e.next_in=p,e.avail_in=m,n.hold=g,n.bits=b,(n.wsize||_!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,_-e.avail_out)?(n.mode=31,-4):(j-=e.avail_in,_-=e.avail_out,e.total_in+=j,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?i(n.check,d,_,e.next_out-_):o(n.check,d,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==j&&0===_||4===t)&&0===O&&(O=-5),O)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:((n.head=t).done=!1,0):l},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&o(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,p){var h,m,f,g,b,v,y,j,_,w=p.bits,I=0,x=0,E=0,k=0,C=0,S=0,T=0,N=0,A=0,O=0,V=null,P=0,K=new r.Buf16(16),D=new r.Buf16(16),L=null,R=0;for(I=0;I<=15;I++)K[I]=0;for(x=0;x<l;x++)K[t[n+x]]++;for(C=w,k=15;1<=k&&0===K[k];k--);if(k<C&&(C=k),0===k)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(E=1;E<k&&0===K[E];E++);for(C<E&&(C=E),I=N=1;I<=15;I++)if(N<<=1,(N-=K[I])<0)return-1;if(0<N&&(0===e||1!==k))return-1;for(D[1]=0,I=1;I<15;I++)D[I+1]=D[I]+K[I];for(x=0;x<l;x++)0!==t[n+x]&&(d[D[t[n+x]]++]=x);if(v=0===e?(V=L=d,19):1===e?(V=o,P-=257,L=i,R-=257,256):(V=s,L=a,-1),I=E,b=u,T=x=O=0,f=-1,g=(A=1<<(S=C))-1,1===e&&852<A||2===e&&592<A)return 1;for(;;){for(y=I-T,_=d[x]<v?(j=0,d[x]):d[x]>v?(j=L[R+d[x]],V[P+d[x]]):(j=96,0),h=1<<I-T,E=m=1<<S;c[b+(O>>T)+(m-=h)]=y<<24|j<<16|_|0,0!==m;);for(h=1<<I-1;O&h;)h>>=1;if(0!==h?(O&=h-1,O+=h):O=0,x++,0==--K[I]){if(I===k)break;I=t[n+d[x]]}if(C<I&&(O&g)!==f){for(0===T&&(T=C),b+=E,N=1<<(S=I-T);S+T<k&&!((N-=K[S+T])<=0);)S++,N<<=1;if(A+=1<<S,1===e&&852<A||2===e&&592<A)return 1;c[f=O&g]=C<<24|S<<16|b-u|0}}return 0!==O&&(c[b+O]=I-T<<24|64<<16|0),p.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function o(e){for(var t=e.length;0<=--t;)e[t]=0}var i=256,s=286,a=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);o(h);var m=new Array(60);o(m);var f=new Array(512);o(f);var g=new Array(256);o(g);var b=new Array(29);o(b);var v,y,j,_=new Array(a);function w(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function I(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?f[e]:f[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function C(e,t,n){k(e,n[2*t],n[2*t+1])}function S(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function T(e,t,n){var r,o,i=new Array(16),s=0;for(r=1;r<=l;r++)i[r]=s=s+n[r-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=S(i[a]++,a))}}function N(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){8<e.bi_valid?E(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&O(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!O(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function P(e,t,n){var r,o,s,a,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===r?C(e,o,t):(C(e,(s=g[o])+i+1,t),0!==(a=c[s])&&k(e,o-=b[s],a),C(e,s=x(--r),n),0!==(a=u[s])&&k(e,r-=_[s],a)),l<e.last_lit;);C(e,256,t)}function K(e,t){var n,r,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)V(e,i,n);for(o=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,V(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,i,s,a,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,p=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)f<(i=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(i=f,g++),c[2*r+1]=i,u<r||(e.bl_count[i]++,s=0,m<=r&&(s=h[r-m]),a=c[2*r],e.opt_len+=a*(i+s),p&&(e.static_len+=a*(d[2*r+1]+s)));if(0!==g){do{for(i=f-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[f]--,g-=2}while(0<g);for(i=f;0!==i;i--)for(r=e.bl_count[i];0!==r;)u<(o=e.heap[--n])||(c[2*o+1]!==i&&(e.opt_len+=(i-c[2*o+1])*c[2*o],c[2*o+1]=i),r--)}}(e,t),T(i,u,e.bl_count)}function D(e,t,n){var r,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<l&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4))}function L(e,t,n){var r,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<l&&o===s)){if(a<c)for(;C(e,o,e.bl_tree),0!=--a;);else 0!==o?(o!==i&&(C(e,o,e.bl_tree),a--),C(e,16,e.bl_tree),k(e,a-3,2)):a<=10?(C(e,17,e.bl_tree),k(e,a-3,3)):(C(e,18,e.bl_tree),k(e,a-11,7));i=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4)}}o(_);var R=!1;function F(e,t,n,o){k(e,0+(o?1:0),3),function(e,t,n,o){A(e),E(e,n),E(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){R||(function(){var e,t,n,r,o,i=new Array(16);for(r=n=0;r<28;r++)for(b[r]=n,e=0;e<1<<c[r];e++)g[n++]=r;for(g[n-1]=r,r=o=0;r<16;r++)for(_[r]=o,e=0;e<1<<u[r];e++)f[o++]=r;for(o>>=7;r<a;r++)for(_[r]=o<<7,e=0;e<1<<u[r]-7;e++)f[256+o++]=r;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,i[8]++;for(;e<=255;)h[2*e+1]=9,e++,i[9]++;for(;e<=279;)h[2*e+1]=7,e++,i[7]++;for(;e<=287;)h[2*e+1]=8,e++,i[8]++;for(T(h,287,i),e=0;e<a;e++)m[2*e+1]=5,m[2*e]=S(e,5);v=new w(h,c,257,s,l),y=new w(m,u,0,a,l),j=new w(new Array(0),d,0,19,7)}(),R=!0),e.l_desc=new I(e.dyn_ltree,v),e.d_desc=new I(e.dyn_dtree,y),e.bl_desc=new I(e.bl_tree,j),e.bi_buf=0,e.bi_valid=0,N(e)},n._tr_stored_block=F,n._tr_flush_block=function(e,t,n,r){var o,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),K(e,e.l_desc),K(e,e.d_desc),a=function(e){var t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?F(e,t,n,r):4===e.strategy||s===o?(k(e,2+(r?1:0),3),P(e,h,m)):(k(e,4+(r?1:0),3),function(e,t,n,r){var o;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),o=0;o<r;o++)k(e,e.bl_tree[2*p[o]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),N(e),r&&A(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+i+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){k(e,2,3),C(e,256,h),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports="function"==typeof i?i:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,e("timers").setImmediate)},{buffer:697,timers:1048}],1027:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.css=n.unsafeCSS=n.CSSResult=n.supportsAdoptingStyleSheets=void 0;var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass"));e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.array.reduce.js");
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var s=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;n.supportsAdoptingStyleSheets=s;var a=Symbol(),l=function(){function e(t,n){if((0,o.default)(this,e),n!==a)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}return(0,i.default)(e,[{key:"styleSheet",get:function(){return void 0===this._styleSheet&&(s?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}},{key:"toString",value:function(){return this.cssText}}]),e}();n.CSSResult=l;n.unsafeCSS=function(e){return new l(String(e),a)};var c=function(e){if(e instanceof l)return e.cssText;if("number"==typeof e)return e;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(e,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))};n.css=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.reduce((function(t,n,r){return t+c(n)+e[r+1]}),e[0]);return new l(o,a)}},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932}],1028:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.property=a,n.internalProperty=function(e){return a({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})},n.query=function(e,t){return function(n,r){var o={get:function(){return this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};if(t){var i="symbol"===(0,s.default)(r)?Symbol():"__".concat(r);o.get=function(){return void 0===this[i]&&(this[i]=this.renderRoot.querySelector(e)),this[i]}}return void 0!==r?l(o,n,r):c(o,n)}},n.queryAsync=function(e){return function(t,n){var r={get:function(){var t=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.updateComplete;case 2:return n.abrupt("return",t.renderRoot.querySelector(e));case 3:case"end":return n.stop()}}),n)})))()},enumerable:!0,configurable:!0};return void 0!==n?l(r,t,n):c(r,t)}},n.queryAll=function(e){return function(t,n){var r={get:function(){return this.renderRoot.querySelectorAll(e)},enumerable:!0,configurable:!0};return void 0!==n?l(r,t,n):c(r,t)}},n.eventOptions=function(e){return function(t,n){return void 0!==n?function(e,t,n){Object.assign(t[n],e)}(e,t,n):function(e,t){return Object.assign(Object.assign({},t),{finisher:function(n){Object.assign(n.prototype[t.key],e)}})}(e,t)}},n.queryAssignedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(r,o){var i={get:function(){var r="slot".concat(e?"[name=".concat(e,"]"):":not([name])"),o=this.renderRoot.querySelector(r),i=o&&o.assignedNodes({flatten:t});return i&&n&&(i=i.filter((function(e){return e.nodeType===Node.ELEMENT_NODE&&e.matches?e.matches(n):d.call(e,n)}))),i},enumerable:!0,configurable:!0};return void 0!==o?l(i,r,o):c(i,r)}},n.customElement=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.object.assign.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.array.filter.js");n.customElement=function(e){return function(t){return"function"==typeof t?function(e,t){return window.customElements.define(e,t),t}(e,t):function(e,t){return{kind:t.kind,elements:t.elements,finisher:function(t){window.customElements.define(e,t)}}}(e,t)}};function a(e){return function(t,n){return void 0!==n?function(e,t,n){t.constructor.createProperty(n,e)}(e,t,n):function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}}(e,t)}}var l=function(e,t,n){Object.defineProperty(t,n,e)},c=function(e,t){return{kind:"method",placement:"prototype",key:t.key,descriptor:e}};var u=Element.prototype,d=u.msMatchesSelector||u.webkitMatchesSelector},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.js":932}],1029:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.is-array.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.UpdatingElement=n.notEqual=n.defaultConverter=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/typeof")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/inherits")),d=r(e("@babel/runtime/helpers/possibleConstructorReturn")),p=r(e("@babel/runtime/helpers/getPrototypeOf")),h=r(e("@babel/runtime/helpers/wrapNativeSuper"));function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */();return function(){var n,r=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.map.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-prototype-of.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.get-own-property-names.js"),window.JSCompiler_renameProperty=function(e,t){return e};var b={toAttribute:function(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}};n.defaultConverter=b;var v=function(e,t){return t!==e&&(t==t||e==e)};n.notEqual=v;var y={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:v},j=function(e){(0,u.default)(r,e);var t,n=g(r);function r(){var e;return(0,l.default)(this,r),(e=n.call(this)).initialize(),e}return(0,c.default)(r,[{key:"initialize",value:function(){var e=this;this._updateState=0,this._updatePromise=new Promise((function(t){return e._enableUpdatingResolver=t})),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}},{key:"_saveInstanceProperties",value:function(){var e=this;this.constructor._classProperties.forEach((function(t,n){if(e.hasOwnProperty(n)){var r=e[n];delete e[n],e._instanceProperties||(e._instanceProperties=new Map),e._instanceProperties.set(n,r)}}))}},{key:"_applyInstanceProperties",value:function(){var e=this;this._instanceProperties.forEach((function(t,n){return e[n]=t})),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&this._attributeToProperty(e,n)}},{key:"_propertyToAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=this.constructor,o=r._attributeNameForProperty(e,n);if(void 0!==o){var i=r._propertyValueToAttribute(t,n);if(void 0===i)return;this._updateState=8|this._updateState,null==i?this.removeAttribute(o):this.setAttribute(o,i),this._updateState=-9&this._updateState}}},{key:"_attributeToProperty",value:function(e,t){if(!(8&this._updateState)){var n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){var o=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,o),this._updateState=-17&this._updateState}}}},{key:"requestUpdateInternal",value:function(e,t,n){var r=!0;if(void 0!==e){var o=this.constructor;n=n||o.getPropertyOptions(e),o._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}},{key:"_enqueueUpdate",value:(t=(0,a.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._updateState=4|this._updateState,e.prev=1,e.next=4,this._updatePromise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(null==(t=this.performUpdate())){e.next=12;break}return e.next=12,t;case 12:return e.abrupt("return",!this._hasRequestedUpdate);case 13:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})},{key:"_hasRequestedUpdate",get:function(){return 4&this._updateState}},{key:"hasUpdated",get:function(){return 1&this._updateState}},{key:"performUpdate",value:function(){if(this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var e=!1,t=this._changedProperties;try{(e=this.shouldUpdate(t))?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=-5&this._updateState}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}},{key:"_getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((function(e,n){return t._propertyToAttribute(n,t[n],e)})),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this._classProperties.forEach((function(n,r){var o=e._attributeNameForProperty(r,n);void 0!==o&&(e._attributeToPropertyMap.set(o,r),t.push(o))})),t}},{key:"_ensureClassProperties",value:function(){var e=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((function(t,n){return e._classProperties.set(n,t)}))}}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;if(this._ensureClassProperties(),this._classProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"===(0,s.default)(e)?Symbol():"__".concat(e),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(r){var o=this[e];this[t]=r,this.requestUpdateInternal(e,o,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this._classProperties&&this._classProperties.get(e)||y}},{key:"finalize",value:function(){var e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var t,n=this.properties,r=m([].concat((0,i.default)(Object.getOwnPropertyNames(n)),(0,i.default)("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[])));try{for(r.s();!(t=r.n()).done;){var o=t.value;this.createProperty(o,n[o])}}catch(e){r.e(e)}finally{r.f()}}}},{key:"_attributeNameForProperty",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return n(e,t)}},{key:"_propertyValueFromAttribute",value:function(e,t){var n=t.type,r=t.converter||b,o="function"==typeof r?r:r.fromAttribute;return o?o(e,n):e}},{key:"_propertyValueToAttribute",value:function(e,t){if(void 0!==t.reflect){var n=t.type,r=t.converter;return(r&&r.toAttribute||b.toAttribute)(e,n)}}}]),r}((0,h.default)(HTMLElement));n.UpdatingElement=j,j.finalized=!0},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/helpers/typeof":679,"@babel/runtime/helpers/wrapNativeSuper":681,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.map.js":885,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-names.js":899,"core-js/modules/es.object.get-prototype-of.js":900,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],1030:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.object.keys.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0});var o={LitElement:!0,html:!0,svg:!0,TemplateResult:!0,SVGTemplateResult:!0};Object.defineProperty(n,"html",{enumerable:!0,get:function(){return m.html}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return m.svg}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return m.TemplateResult}}),Object.defineProperty(n,"SVGTemplateResult",{enumerable:!0,get:function(){return m.SVGTemplateResult}}),n.LitElement=void 0,e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.array.reduce-right.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.set.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.slice.js");var i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),d=e("lit-html/lib/shady-render.js"),p=e("./lib/updating-element.js");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=e("./lib/decorators.js");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===h[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return h[e]}}))}));var m=e("lit-html/lit-html.js"),f=e("./lib/css-tag.js");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===f[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}}))})),(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");var b={},v=function(e){(0,l.default)(n,e);var t=g(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"initialize",value:function(){(0,a.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}},{key:"createRenderRoot",value:function(){return this.attachShadow({mode:"open"})}},{key:"adoptStyles",value:function(){var e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?f.supportsAdoptingStyleSheets?this.renderRoot.adoptedStyleSheets=e.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((function(e){return e.cssText})),this.localName))}},{key:"connectedCallback",value:function(){(0,a.default)((0,u.default)(n.prototype),"connectedCallback",this).call(this),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}},{key:"update",value:function(e){var t=this,r=this.render();(0,a.default)((0,u.default)(n.prototype),"update",this).call(this,e),r!==b&&this.constructor.render(r,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((function(e){var n=document.createElement("style");n.textContent=e.cssText,t.renderRoot.appendChild(n)})))}},{key:"render",value:function(){return b}}],[{key:"getStyles",value:function(){return this.styles}},{key:"_getUniqueStyles",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){var e=this.getStyles();if(Array.isArray(e)){var t=function e(t,n){return t.reduceRight((function(t,n){return Array.isArray(n)?e(n,t):(t.add(n),t)}),n)}(e,new Set),n=[];t.forEach((function(e){return n.unshift(e)})),this._styles=n}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((function(e){if(e instanceof CSSStyleSheet&&!f.supportsAdoptingStyleSheets){var t=Array.prototype.slice.call(e.cssRules).reduce((function(e,t){return e+t.cssText}),"");return(0,f.unsafeCSS)(t)}return e}))}}}]),n}(p.UpdatingElement);n.LitElement=v,v.finalized=!0,v.render=d.render},{"./lib/css-tag.js":1027,"./lib/decorators.js":1028,"./lib/updating-element.js":1029,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce-right.js":871,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.set.js":912,"core-js/modules/es.string.iterator.js":917,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"lit-html/lib/shady-render.js":1038,"lit-html/lit-html.js":1043}],1031:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.defaultTemplateProcessor=n.DefaultTemplateProcessor=void 0,e("core-js/modules/es.array.slice.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),s=e("./parts.js"),a=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,[{key:"handleAttributeExpressions",value:function(e,t,n,r){var o=t[0];return"."===o?new s.PropertyCommitter(e,t.slice(1),n).parts:"@"===o?[new s.EventPart(e,t.slice(1),r.eventContext)]:"?"===o?[new s.BooleanAttributePart(e,t.slice(1),n)]:new s.AttributeCommitter(e,t,n).parts}},{key:"handleTextExpression",value:function(e){return new s.NodePart(e)}}]),e}();n.DefaultTemplateProcessor=a;var l=new a;n.defaultTemplateProcessor=l},{"./parts.js":1036,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.object.define-property.js":895}],1032:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.isDirective=n.directive=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.weak-map.js"),e("core-js/modules/web.dom-collections.iterator.js");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var r=new WeakMap;n.directive=function(e){return function(){var t=e.apply(void 0,arguments);return r.set(t,!0),t}};n.isDirective=function(e){return"function"==typeof e&&r.has(e)}},{"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.iterator.js":965}],1033:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.removeNodes=n.reparentNodes=n.isCEPolyfill=void 0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback;n.isCEPolyfill=r;n.reparentNodes=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t!==n;){var o=t.nextSibling;e.insertBefore(t,r),t=o}};n.removeNodes=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t!==n;){var r=t.nextSibling;e.removeChild(t),t=r}}},{"core-js/modules/es.object.define-property.js":895}],1034:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.removeNodesFromTemplate=function(e,t){var n=e.element.content,r=e.parts,o=document.createTreeWalker(n,133,null,!1),s=i(r),a=r[s],l=-1,c=0,u=[],d=null;for(;o.nextNode();){l++;var p=o.currentNode;for(p.previousSibling===d&&(d=null),t.has(p)&&(u.push(p),null===d&&(d=p)),null!==d&&c++;void 0!==a&&a.index===l;)a.index=null!==d?-1:a.index-c,s=i(r,s),a=r[s]}u.forEach((function(e){return e.parentNode.removeChild(e)}))},n.insertNodeIntoTemplate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.element.content,s=e.parts;if(null==n)return void r.appendChild(t);var a=document.createTreeWalker(r,133,null,!1),l=i(s),c=0,u=-1;for(;a.nextNode();){u++;var d=a.currentNode;for(d===n&&(c=o(t),n.parentNode.insertBefore(t,n));-1!==l&&s[l].index===u;){if(c>0){for(;-1!==l;)s[l].index+=c,l=i(s,l);return}l=i(s,l)}}},e("core-js/modules/es.array.for-each.js");var r=e("./template.js");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var o=function(e){for(var t=11===e.nodeType?0:1,n=document.createTreeWalker(e,133,null,!1);n.nextNode();)t++;return t},i=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t+1;n<e.length;n++){var o=e[n];if((0,r.isTemplatePartActive)(o))return n}return-1}},{"./template.js":1042,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.object.define-property.js":895}],1035:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.nothing=n.noChange=void 0;n.noChange={};n.nothing={}},{"core-js/modules/es.object.define-property.js":895}],1036:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.EventPart=n.PropertyPart=n.PropertyCommitter=n.BooleanAttributePart=n.NodePart=n.AttributePart=n.AttributeCommitter=n.isIterable=n.isPrimitive=void 0,e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.function.name.js");var o=r(e("@babel/runtime/helpers/get")),i=r(e("@babel/runtime/helpers/inherits")),s=r(e("@babel/runtime/helpers/possibleConstructorReturn")),a=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/typeof")),d=e("./directive.js"),p=e("./dom.js"),h=e("./part.js"),m=e("./template-instance.js"),f=e("./template-result.js"),g=e("./template.js");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){return null===e||!("object"===(0,u.default)(e)||"function"==typeof e)};n.isPrimitive=j;var _=function(e){return Array.isArray(e)||!(!e||!e[Symbol.iterator])};n.isIterable=_;var w=function(){function e(t,n,r){(0,l.default)(this,e),this.dirty=!0,this.element=t,this.name=n,this.strings=r,this.parts=[];for(var o=0;o<r.length-1;o++)this.parts[o]=this._createPart()}return(0,c.default)(e,[{key:"_createPart",value:function(){return new I(this)}},{key:"_getValue",value:function(){var e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){var r=n[0].value;if("symbol"===(0,u.default)(r))return String(r);if("string"==typeof r||!_(r))return r}for(var o="",i=0;i<t;i++){o+=e[i];var s=n[i];if(void 0!==s){var a=s.value;if(j(a)||!_(a))o+="string"==typeof a?a:String(a);else{var l,c=v(a);try{for(c.s();!(l=c.n()).done;){var d=l.value;o+="string"==typeof d?d:String(d)}}catch(e){c.e(e)}finally{c.f()}}}}return o+=e[t]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),e}();n.AttributeCommitter=w;var I=function(){function e(t){(0,l.default)(this,e),this.value=void 0,this.committer=t}return(0,c.default)(e,[{key:"setValue",value:function(e){e===h.noChange||j(e)&&e===this.value||(this.value=e,(0,d.isDirective)(e)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;(0,d.isDirective)(this.value);){var e=this.value;this.value=h.noChange,e(this)}this.value!==h.noChange&&this.committer.commit()}}]),e}();n.AttributePart=I;var x=function(){function e(t){(0,l.default)(this,e),this.value=void 0,this.__pendingValue=void 0,this.options=t}return(0,c.default)(e,[{key:"appendInto",value:function(e){this.startNode=e.appendChild((0,g.createMarker)()),this.endNode=e.appendChild((0,g.createMarker)())}},{key:"insertAfterNode",value:function(e){this.startNode=e,this.endNode=e.nextSibling}},{key:"appendIntoPart",value:function(e){e.__insert(this.startNode=(0,g.createMarker)()),e.__insert(this.endNode=(0,g.createMarker)())}},{key:"insertAfterPart",value:function(e){e.__insert(this.startNode=(0,g.createMarker)()),this.endNode=e.endNode,e.endNode=this.startNode}},{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;(0,d.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=h.noChange,e(this)}var t=this.__pendingValue;t!==h.noChange&&(j(t)?t!==this.value&&this.__commitText(t):t instanceof f.TemplateResult?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):_(t)?this.__commitIterable(t):t===h.nothing?(this.value=h.nothing,this.clear()):this.__commitText(t))}}},{key:"__insert",value:function(e){this.endNode.parentNode.insertBefore(e,this.endNode)}},{key:"__commitNode",value:function(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}},{key:"__commitText",value:function(e){var t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}},{key:"__commitTemplateResult",value:function(e){var t=this.options.templateFactory(e);if(this.value instanceof m.TemplateInstance&&this.value.template===t)this.value.update(e.values);else{var n=new m.TemplateInstance(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var n,r,o=this.value,i=0,s=v(t);try{for(s.s();!(r=s.n()).done;){var a=r.value;void 0===(n=o[i])&&(n=new e(this.options),o.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(o[i-1])),n.setValue(a),n.commit(),i++}}catch(e){s.e(e)}finally{s.f()}i<o.length&&(o.length=i,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;(0,p.removeNodes)(this.startNode.parentNode,e.nextSibling,this.endNode)}}]),e}();n.NodePart=x;var E=function(){function e(t,n,r){if((0,l.default)(this,e),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=n,this.strings=r}return(0,c.default)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;(0,d.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=h.noChange,e(this)}if(this.__pendingValue!==h.noChange){var t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=h.noChange}}}]),e}();n.BooleanAttributePart=E;var k=function(e){(0,i.default)(n,e);var t=b(n);function n(e,r,o){var i;return(0,l.default)(this,n),(i=t.call(this,e,r,o)).single=2===o.length&&""===o[0]&&""===o[1],i}return(0,c.default)(n,[{key:"_createPart",value:function(){return new C(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:(0,o.default)((0,a.default)(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(w);n.PropertyCommitter=k;var C=function(e){(0,i.default)(n,e);var t=b(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}(I);n.PropertyPart=C;var S=!1;!function(){try{var e={get capture(){return S=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}}();var T=function(){function e(t,n,r){var o=this;(0,l.default)(this,e),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(e){return o.handleEvent(e)}}return(0,c.default)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;(0,d.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=h.noChange,e(this)}if(this.__pendingValue!==h.noChange){var t=this.__pendingValue,n=this.value,r=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),o=null!=t&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=N(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=h.noChange}}},{key:"handleEvent",value:function(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}]),e}();n.EventPart=T;var N=function(e){return e&&(S?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)}},{"./directive.js":1032,"./dom.js":1033,"./part.js":1035,"./template-instance.js":1040,"./template-result.js":1041,"./template.js":1042,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.iterator.js":965}],1037:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.render=n.parts=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.weak-map.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.object.assign.js");var r=e("./dom.js"),o=e("./parts.js"),i=e("./template-factory.js"),s=new WeakMap;n.parts=s;n.render=function(e,t,n){var a=s.get(t);void 0===a&&((0,r.removeNodes)(t,t.firstChild),s.set(t,a=new o.NodePart(Object.assign({templateFactory:i.templateFactory},n))),a.appendInto(t)),a.setValue(e),a.commit()}},{"./dom.js":1033,"./parts.js":1036,"./template-factory.js":1039,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.iterator.js":965}],1038:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"html",{enumerable:!0,get:function(){return d.html}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return d.svg}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return d.TemplateResult}}),n.render=n.shadyTemplateFactory=void 0;var o=r(e("@babel/runtime/helpers/typeof"));e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.weak-map.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.map.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.set.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.object.assign.js");var i=e("./dom.js"),s=e("./modify-template.js"),a=e("./render.js"),l=e("./template-factory.js"),c=e("./template-instance.js"),u=e("./template.js"),d=e("../lit-html.js"),p=function(e,t){return"".concat(e,"--").concat(t)},h=!0;void 0===window.ShadyCSS?h=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),h=!1);var m=function(e){return function(t){var n=p(t.type,e),r=l.templateCaches.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},l.templateCaches.set(n,r));var o=r.stringsArray.get(t.strings);if(void 0!==o)return o;var i=t.strings.join(u.marker);if(void 0===(o=r.keyString.get(i))){var s=t.getTemplateElement();h&&window.ShadyCSS.prepareTemplateDom(s,e),o=new u.Template(t,s),r.keyString.set(i,o)}return r.stringsArray.set(t.strings,o),o}};n.shadyTemplateFactory=m;var f=["html","svg"],g=new Set,b=function(e,t,n){g.add(e);var r=n?n.element:document.createElement("template"),o=t.querySelectorAll("style"),i=o.length;if(0!==i){for(var a=document.createElement("style"),c=0;c<i;c++){var u=o[c];u.parentNode.removeChild(u),a.textContent+=u.textContent}!function(e){f.forEach((function(t){var n=l.templateCaches.get(p(t,e));void 0!==n&&n.keyString.forEach((function(e){var t=e.element.content,n=new Set;Array.from(t.querySelectorAll("style")).forEach((function(e){n.add(e)})),(0,s.removeNodesFromTemplate)(e,n)}))}))}(e);var d=r.content;n?(0,s.insertNodeIntoTemplate)(n,a,d.firstChild):d.insertBefore(a,d.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);var h=d.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)t.insertBefore(h.cloneNode(!0),t.firstChild);else if(n){d.insertBefore(a,d.firstChild);var m=new Set;m.add(a),(0,s.removeNodesFromTemplate)(n,m)}}else window.ShadyCSS.prepareTemplateStyles(r,e)};n.render=function(e,t,n){if(!n||"object"!==(0,o.default)(n)||!n.scopeName)throw new Error("The `scopeName` option is required.");var r=n.scopeName,s=a.parts.has(t),l=h&&11===t.nodeType&&!!t.host,u=l&&!g.has(r),d=u?document.createDocumentFragment():t;if((0,a.render)(e,d,Object.assign({templateFactory:m(r)},n)),u){var p=a.parts.get(d);a.parts.delete(d);var f=p.value instanceof c.TemplateInstance?p.value.template:void 0;b(r,d,f),(0,i.removeNodes)(t,t.firstChild),t.appendChild(d),a.parts.set(t,p)}!s&&l&&window.ShadyCSS.styleElement(t.host)}},{"../lit-html.js":1043,"./dom.js":1033,"./modify-template.js":1034,"./render.js":1037,"./template-factory.js":1039,"./template-instance.js":1040,"./template.js":1042,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.map.js":885,"core-js/modules/es.object.assign.js":892,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.set.js":912,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],1039:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.templateFactory=
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
function(e){var t=o.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},o.set(e.type,t));var n=t.stringsArray.get(e.strings);if(void 0!==n)return n;var i=e.strings.join(r.marker);void 0===(n=t.keyString.get(i))&&(n=new r.Template(e,e.getTemplateElement()),t.keyString.set(i,n));return t.stringsArray.set(e.strings,n),n},n.templateCaches=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.weak-map.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.map.js"),e("core-js/modules/es.array.join.js");var r=e("./template.js");var o=new Map;n.templateCaches=o},{"./template.js":1042,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.map.js":885,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.iterator.js":965}],1040:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TemplateInstance=void 0,e("core-js/modules/es.function.name.js");var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=e("./dom.js"),l=e("./template.js");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){function e(t,n,r){(0,i.default)(this,e),this.__parts=[],this.template=t,this.processor=n,this.options=r}return(0,s.default)(e,[{key:"update",value:function(e){var t,n=0,r=c(this.__parts);try{for(r.s();!(t=r.n()).done;){var o=t.value;void 0!==o&&o.setValue(e[n]),n++}}catch(e){r.e(e)}finally{r.f()}var i,s=c(this.__parts);try{for(s.s();!(i=s.n()).done;){var a=i.value;void 0!==a&&a.commit()}}catch(e){s.e(e)}finally{s.f()}}},{key:"_clone",value:function(){for(var e,t=a.isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,i=document.createTreeWalker(t,133,null,!1),s=0,c=0,u=i.nextNode();s<r.length;)if(e=r[s],(0,l.isTemplatePartActive)(e)){for(;c<e.index;)c++,"TEMPLATE"===u.nodeName&&(n.push(u),i.currentNode=u.content),null===(u=i.nextNode())&&(i.currentNode=n.pop(),u=i.nextNode());if("node"===e.type){var d=this.processor.handleTextExpression(this.options);d.insertAfterNode(u.previousSibling),this.__parts.push(d)}else{var p;(p=this.__parts).push.apply(p,(0,o.default)(this.processor.handleAttributeExpressions(u,e.name,e.strings,this.options)))}s++}else this.__parts.push(void 0),s++;return a.isCEPolyfill&&(document.adoptNode(t),customElements.upgrade(t)),t}}]),e}();n.TemplateInstance=d},{"./dom.js":1033,"./template.js":1042,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.iterator.js":965}],1041:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.SVGTemplateResult=n.TemplateResult=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.last-index-of.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.regexp.exec.js");var o=r(e("@babel/runtime/helpers/get")),i=r(e("@babel/runtime/helpers/inherits")),s=r(e("@babel/runtime/helpers/possibleConstructorReturn")),a=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass")),u=e("./dom.js"),d=e("./template.js");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(e){return e}}),m=" ".concat(d.marker," "),f=function(){function e(t,n,r,o){(0,l.default)(this,e),this.strings=t,this.values=n,this.type=r,this.processor=o}return(0,c.default)(e,[{key:"getHTML",value:function(){for(var e=this.strings.length-1,t="",n=!1,r=0;r<e;r++){var o=this.strings[r],i=o.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===o.indexOf("--\x3e",i+1);var s=d.lastAttributeNameRegex.exec(o);t+=null===s?o+(n?m:d.nodeMarker):o.substr(0,s.index)+s[1]+s[2]+d.boundAttributeSuffix+s[3]+d.marker}return t+=this.strings[e]}},{key:"getTemplateElement",value:function(){var e=document.createElement("template"),t=this.getHTML();return void 0!==h&&(t=h.createHTML(t)),e.innerHTML=t,e}}]),e}();n.TemplateResult=f;var g=function(e){(0,i.default)(n,e);var t=p(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"getHTML",value:function(){return"<svg>".concat((0,o.default)((0,a.default)(n.prototype),"getHTML",this).call(this),"</svg>")}},{key:"getTemplateElement",value:function(){var e=(0,o.default)((0,a.default)(n.prototype),"getTemplateElement",this).call(this),t=e.content,r=t.firstChild;return t.removeChild(r),(0,u.reparentNodes)(t,r.firstChild),e}}]),n}(f);n.SVGTemplateResult=g},{"./dom.js":1033,"./template.js":1042,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/get":660,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.last-index-of.js":869,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/web.dom-collections.iterator.js":965}],1042:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.lastAttributeNameRegex=n.createMarker=n.isTemplatePartActive=n.Template=n.boundAttributeSuffix=n.markerRegex=n.nodeMarker=n.marker=void 0;var o=r(e("@babel/runtime/helpers/classCallCheck"));e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.array.index-of.js");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var i="{{lit-".concat(String(Math.random()).slice(2),"}}");n.marker=i;var s="\x3c!--".concat(i,"--\x3e");n.nodeMarker=s;var a=new RegExp("".concat(i,"|").concat(s));n.markerRegex=a;n.boundAttributeSuffix="$lit$";n.Template=function e(t,n){(0,o.default)(this,e),this.parts=[],this.element=n;for(var r=[],s=[],d=document.createTreeWalker(n.content,133,null,!1),p=0,h=-1,m=0,f=t.strings,g=t.values.length;m<g;){var b=d.nextNode();if(null!==b){if(h++,1===b.nodeType){if(b.hasAttributes()){for(var v=b.attributes,y=v.length,j=0,_=0;_<y;_++)l(v[_].name,"$lit$")&&j++;for(;j-- >0;){var w=f[m],I=u.exec(w)[2],x=I.toLowerCase()+"$lit$",E=b.getAttribute(x);b.removeAttribute(x);var k=E.split(a);this.parts.push({type:"attribute",index:h,name:I,strings:k}),m+=k.length-1}}"TEMPLATE"===b.tagName&&(s.push(b),d.currentNode=b.content)}else if(3===b.nodeType){var C=b.data;if(C.indexOf(i)>=0){for(var S=b.parentNode,T=C.split(a),N=T.length-1,A=0;A<N;A++){var O=void 0,V=T[A];if(""===V)O=c();else{var P=u.exec(V);null!==P&&l(P[2],"$lit$")&&(V=V.slice(0,P.index)+P[1]+P[2].slice(0,-"$lit$".length)+P[3]),O=document.createTextNode(V)}S.insertBefore(O,b),this.parts.push({type:"node",index:++h})}""===T[N]?(S.insertBefore(c(),b),r.push(b)):b.data=T[N],m+=N}}else if(8===b.nodeType)if(b.data===i){var K=b.parentNode;null!==b.previousSibling&&h!==p||(h++,K.insertBefore(c(),b)),p=h,this.parts.push({type:"node",index:h}),null===b.nextSibling?b.data="":(r.push(b),h--),m++}else for(var D=-1;-1!==(D=b.data.indexOf(i,D+1));)this.parts.push({type:"node",index:-1}),m++}else d.currentNode=s.pop()}for(var L=0,R=r;L<R.length;L++){var F=R[L];F.parentNode.removeChild(F)}};var l=function(e,t){var n=e.length-t.length;return n>=0&&e.slice(n)===t};n.isTemplatePartActive=function(e){return-1!==e.index};var c=function(){return document.createComment("")};n.createMarker=c;var u=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;n.lastAttributeNameRegex=u},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.split.js":926,"core-js/modules/web.dom-collections.iterator.js":965}],1043:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DefaultTemplateProcessor",{enumerable:!0,get:function(){return r.DefaultTemplateProcessor}}),Object.defineProperty(n,"defaultTemplateProcessor",{enumerable:!0,get:function(){return r.defaultTemplateProcessor}}),Object.defineProperty(n,"SVGTemplateResult",{enumerable:!0,get:function(){return o.SVGTemplateResult}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return o.TemplateResult}}),Object.defineProperty(n,"directive",{enumerable:!0,get:function(){return i.directive}}),Object.defineProperty(n,"isDirective",{enumerable:!0,get:function(){return i.isDirective}}),Object.defineProperty(n,"removeNodes",{enumerable:!0,get:function(){return s.removeNodes}}),Object.defineProperty(n,"reparentNodes",{enumerable:!0,get:function(){return s.reparentNodes}}),Object.defineProperty(n,"noChange",{enumerable:!0,get:function(){return a.noChange}}),Object.defineProperty(n,"nothing",{enumerable:!0,get:function(){return a.nothing}}),Object.defineProperty(n,"AttributeCommitter",{enumerable:!0,get:function(){return l.AttributeCommitter}}),Object.defineProperty(n,"AttributePart",{enumerable:!0,get:function(){return l.AttributePart}}),Object.defineProperty(n,"BooleanAttributePart",{enumerable:!0,get:function(){return l.BooleanAttributePart}}),Object.defineProperty(n,"EventPart",{enumerable:!0,get:function(){return l.EventPart}}),Object.defineProperty(n,"isIterable",{enumerable:!0,get:function(){return l.isIterable}}),Object.defineProperty(n,"isPrimitive",{enumerable:!0,get:function(){return l.isPrimitive}}),Object.defineProperty(n,"NodePart",{enumerable:!0,get:function(){return l.NodePart}}),Object.defineProperty(n,"PropertyCommitter",{enumerable:!0,get:function(){return l.PropertyCommitter}}),Object.defineProperty(n,"PropertyPart",{enumerable:!0,get:function(){return l.PropertyPart}}),Object.defineProperty(n,"parts",{enumerable:!0,get:function(){return c.parts}}),Object.defineProperty(n,"render",{enumerable:!0,get:function(){return c.render}}),Object.defineProperty(n,"templateCaches",{enumerable:!0,get:function(){return u.templateCaches}}),Object.defineProperty(n,"templateFactory",{enumerable:!0,get:function(){return u.templateFactory}}),Object.defineProperty(n,"TemplateInstance",{enumerable:!0,get:function(){return d.TemplateInstance}}),Object.defineProperty(n,"createMarker",{enumerable:!0,get:function(){return p.createMarker}}),Object.defineProperty(n,"isTemplatePartActive",{enumerable:!0,get:function(){return p.isTemplatePartActive}}),Object.defineProperty(n,"Template",{enumerable:!0,get:function(){return p.Template}}),n.svg=n.html=void 0;var r=e("./lib/default-template-processor.js"),o=e("./lib/template-result.js"),i=e("./lib/directive.js"),s=e("./lib/dom.js"),a=e("./lib/part.js"),l=e("./lib/parts.js"),c=e("./lib/render.js"),u=e("./lib/template-factory.js"),d=e("./lib/template-instance.js"),p=e("./lib/template.js");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");n.html=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new o.TemplateResult(e,n,"html",r.defaultTemplateProcessor)};n.svg=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new o.SVGTemplateResult(e,n,"svg",r.defaultTemplateProcessor)}},{"./lib/default-template-processor.js":1031,"./lib/directive.js":1032,"./lib/dom.js":1033,"./lib/part.js":1035,"./lib/parts.js":1036,"./lib/render.js":1037,"./lib/template-factory.js":1039,"./lib/template-instance.js":1040,"./lib/template-result.js":1041,"./lib/template.js":1042,"core-js/modules/es.object.define-property.js":895}],1044:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-float.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.last-index-of.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.to-string.js"),e("core-js/modules/es.string.split.js"),e("core-js/modules/es.number.to-fixed.js"),e("core-js/modules/es.number.constructor.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.string.trim.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.function.name.js");var o,i,s=r(e("@babel/runtime/helpers/typeof"));o="undefined"!=typeof window?window:void 0,i=function(e,t){var n,r={x:0,y:0},o={enabled:!0,debug:!1,autoplay:!1,loop:!1,seekTime:10,volume:10,volumeMin:0,volumeMax:10,volumeStep:1,duration:null,displayDuration:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/2.0.11/plyr.svg",clickToPlay:!0,hideControls:!0,showPosterOnEnd:!1,disableContextMenu:!0,keyboardShorcuts:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},selectors:{html5:"video, audio",embed:"[data-type]",editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{seek:'[data-plyr="seek"]',play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',forward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',fullscreen:'[data-plyr="fullscreen"]'},volume:{input:'[data-plyr="volume"]',display:".plyr__volume--display"},progress:{container:".plyr__progress",buffer:".plyr__progress--buffer",played:".plyr__progress--played"},captions:".plyr__captions",currentTime:".plyr__time--current",duration:".plyr__time--duration"},classes:{setup:"plyr--setup",ready:"plyr--ready",videoWrapper:"plyr__video-wrapper",embedWrapper:"plyr__video-embed",type:"plyr--{0}",stopped:"plyr--stopped",playing:"plyr--playing",muted:"plyr--muted",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",active:"plyr--fullscreen-active"},tabFocus:"tab-focus"},captions:{defaultActive:!1},fullscreen:{enabled:!0,fallback:!0,allowAudio:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime} secs",play:"Play",pause:"Pause",forward:"Forward {seektime} secs",played:"played",buffered:"buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",toggleMute:"Toggle Mute",toggleCaptions:"Toggle Captions",toggleFullscreen:"Toggle Fullscreen",frameTitle:"Player for {title}"},types:{embed:["youtube","vimeo","soundcloud"],html5:["video","audio"]},urls:{vimeo:{api:"https://player.vimeo.com/api/player.js"},youtube:{api:"https://www.youtube.com/iframe_api"},soundcloud:{api:"https://w.soundcloud.com/player/api.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,forward:null,mute:null,volume:null,captions:null,fullscreen:null},events:["ready","ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied"],logPrefix:"[Plyr]"};function i(){var e,n,r,o=navigator.userAgent,i=navigator.appName,s=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10),l=!1,c=!1,u=!1,d=!1;return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(l=!0,i="IE",s="11"):-1!==(n=o.indexOf("MSIE"))?(l=!0,i="IE",s=o.substring(n+5)):-1!==(n=o.indexOf("Chrome"))?(u=!0,i="Chrome",s=o.substring(n+7)):-1!==(n=o.indexOf("Safari"))?(d=!0,i="Safari",s=o.substring(n+7),-1!==(n=o.indexOf("Version"))&&(s=o.substring(n+8))):-1!==(n=o.indexOf("Firefox"))?(c=!0,i="Firefox",s=o.substring(n+8)):(e=o.lastIndexOf(" ")+1)<(n=o.lastIndexOf("/"))&&(i=o.substring(e,n),s=o.substring(n+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(r=s.indexOf(";"))&&(s=s.substring(0,r)),-1!==(r=s.indexOf(" "))&&(s=s.substring(0,r)),a=parseInt(""+s,10),isNaN(a)&&(s=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),{name:i,version:a,isIE:l,isFirefox:c,isChrome:u,isSafari:d,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform),isIphone:/(iPhone|iPod)/g.test(navigator.userAgent),isTouch:"ontouchstart"in t.documentElement}}function a(e){if(!t.querySelectorAll('script[src="'+e+'"]').length){var n=t.createElement("script");n.src=e;var r=t.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}}function l(e,t){return Array.prototype.indexOf&&-1!==e.indexOf(t)}function c(e,t,n){return e.replace(new RegExp(t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n)}function u(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,o=e[n],i=o.parentNode,s=o.nextSibling;return r.appendChild(o),s?i.insertBefore(r,s):i.appendChild(r),r}}function d(e){e&&e.parentNode.removeChild(e)}function p(e,t){e.insertBefore(t,e.firstChild)}function h(e,t){for(var n in t)e.setAttribute(n,x.boolean(t[n])&&t[n]?"":t[n])}function m(e,n,r){var o=t.createElement(e);h(o,r),p(n,o)}function f(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=r+(n?" "+t:"")}}function g(e,t){return!!e&&(e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className))}function b(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(e){return-1!==[].indexOf.call(t.querySelectorAll(e),this)}).call(e,n)}function v(e,t,n,r,o){y(e,t,(function(t){n&&n.apply(e,[t]),r.apply(e,[t])}),o)}function y(e,t,n,r){e&&function e(t,n,r,o,i){var s=n.split(" ");if(x.boolean(i)||(i=!1),t instanceof NodeList)for(var a=0;a<t.length;a++)t[a]instanceof Node&&e(t[a],arguments[1],arguments[2],arguments[3]);else for(var l=0;l<s.length;l++)t[o?"addEventListener":"removeEventListener"](s[l],r,i)}(e,t,n,!0,r)}function j(e,t,n,r){if(e&&t){x.boolean(n)||(n=!1);var o=new CustomEvent(t,{bubbles:n,detail:r});e.dispatchEvent(o)}}function _(e,t){if(e)return t=x.boolean(t)?t:!e.getAttribute("aria-pressed"),e.setAttribute("aria-pressed",t),t}function w(e,t){return 0===e||0===t||isNaN(e)||isNaN(t)?0:(e/t*100).toFixed(2)}function I(){var e=arguments;if(e.length){if(1===e.length)return e[0];for(var t=Array.prototype.shift.call(e),n=e.length,r=0;r<n;r++){var o=e[r];for(var i in o)o[i]&&o[i].constructor&&o[i].constructor===Object?(t[i]=t[i]||{},I(t[i],o[i])):t[i]=o[i]}return t}}var x={object:function(e){return null!==e&&"object"===(0,s.default)(e)},array:function(e){return null!==e&&"object"===(0,s.default)(e)&&e.constructor===Array},number:function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===(0,s.default)(e)&&e.constructor===Number)},string:function(e){return null!==e&&("string"==typeof e||"object"===(0,s.default)(e)&&e.constructor===String)},boolean:function(e){return null!==e&&"boolean"==typeof e},nodeList:function(e){return null!==e&&e instanceof NodeList},htmlElement:function(e){return null!==e&&e instanceof HTMLElement},function:function(e){return null!==e&&"function"==typeof e},undefined:function(e){return null!==e&&void 0===e}},E=function(){if(!("localStorage"in e))return!1;try{e.localStorage.setItem("___test","OK");var t=e.localStorage.getItem("___test");return e.localStorage.removeItem("___test"),"OK"===t}catch(e){return!1}return!1}();function k(s,k){var N,A=this,O={};A.media=s;var V=s.cloneNode(!0);function P(e,t,n,r){j(e,t,n,I({},r,{plyr:N}))}function K(t,n){k.debug&&e.console&&(n=Array.prototype.slice.call(n),x.string(k.logPrefix)&&k.logPrefix.length&&n.unshift(k.logPrefix),console[t].apply(console,n))}var D=function(){K("log",arguments)},L=function(){K("warn",arguments)};function R(){return{url:k.iconUrl,absolute:0===k.iconUrl.indexOf("http")||A.browser.isIE}}function F(){if(A.supported.full&&("audio"!==A.type||k.fullscreen.allowAudio)&&k.fullscreen.enabled){var t=n.supportsFullScreen;t||k.fullscreen.fallback&&!function(){try{return e.self!==e.top}catch(e){return!0}}()?(D((t?"Native":"Fallback")+" fullscreen enabled"),f(A.container,k.classes.fullscreen.enabled,!0)):D("Fullscreen not supported and fallback disabled"),A.buttons&&A.buttons.fullscreen&&_(A.buttons.fullscreen,!1),H()}}function M(){if("video"===A.type){U(k.selectors.captions)||A.videoContainer.insertAdjacentHTML("afterbegin",'<div class="'+k.selectors.captions.replace(".","")+'"></div>'),A.usingTextTracks=!1,A.media.textTracks&&(A.usingTextTracks=!0);for(var e,t="",n=A.media.childNodes,r=0;r<n.length;r++)"track"===n[r].nodeName.toLowerCase()&&("captions"!==(e=n[r].kind)&&"subtitles"!==e||(t=n[r].getAttribute("src")));if(A.captionExists=!0,""===t?(A.captionExists=!1,D("No caption track found")):D("Caption track found; URI: "+t),A.captionExists){for(var o=A.media.textTracks,i=0;i<o.length;i++)o[i].mode="hidden";if(function(){if(A.buttons.captions){f(A.container,k.classes.captions.enabled,!0);var e=A.storage.captionsEnabled;x.boolean(e)||(e=k.captions.defaultActive),e&&(f(A.container,k.classes.captions.active,!0),_(A.buttons.captions,!0))}}(),(A.browser.isIE&&A.browser.version>=10||A.browser.isFirefox&&A.browser.version>=31)&&(D("Detected browser with known TextTrack issues - using manual fallback"),A.usingTextTracks=!1),A.usingTextTracks){D("TextTracks supported");for(var s=0;s<o.length;s++){var a=o[s];"captions"!==a.kind&&"subtitles"!==a.kind||y(a,"cuechange",(function(){this.activeCues[0]&&"text"in this.activeCues[0]?$(this.activeCues[0].getCueAsHTML()):$()}))}}else if(D("TextTracks not supported so rendering captions manually"),A.currentCaption="",A.captions=[],""!==t){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){var e,t,n=l.responseText,r="\r\n";-1===n.indexOf(r+r)&&(r=-1!==n.indexOf("\r\r")?"\r":"\n"),e=n.split(r+r);for(var o=0;o<e.length;o++){t=e[o],A.captions[o]=[];var i=t.split(r),s=0;-1===i[s].indexOf(":")&&(s=1),A.captions[o]=[i[s],i[s+1]]}A.captions.shift(),D("Successfully loaded the caption file via AJAX")}else L(k.logPrefix+"There was a problem loading the caption file via AJAX")},l.open("get",t,!0),l.send()}}else f(A.container,k.classes.captions.enabled)}}function $(e){var n=U(k.selectors.captions),r=t.createElement("span");n.innerHTML="",x.undefined(e)&&(e=""),x.string(e)?r.innerHTML=e.trim():r.appendChild(e),n.appendChild(r),n.offsetHeight}function B(e){function t(e,t){var n=[];n=e.split(" --\x3e ");for(var r=0;r<n.length;r++)n[r]=n[r].replace(/(\d+:\d+:\d+\.\d+).*/,"$1");return function(e){if(null==e)return 0;var t,n=[];return n=e.split(","),t=n[0].split(":"),Math.floor(60*t[0]*60)+Math.floor(60*t[1])+Math.floor(t[2])}(n[t])}function n(e){return t(e,1)}if(!A.usingTextTracks&&"video"===A.type&&A.supported.full&&(A.subcount=0,e=x.number(e)?e:A.media.currentTime,A.captions[A.subcount])){for(;n(A.captions[A.subcount][0])<e.toFixed(1);)if(A.subcount++,A.subcount>A.captions.length-1){A.subcount=A.captions.length-1;break}A.media.currentTime.toFixed(1)>=t(A.captions[A.subcount][0],0)&&A.media.currentTime.toFixed(1)<=n(A.captions[A.subcount][0])?(A.currentCaption=A.captions[A.subcount][1],$(A.currentCaption)):$()}}function z(e){return A.container.querySelectorAll(e)}function U(e){return z(e)[0]}function H(){var e=z("input:not([disabled]), button:not([disabled])"),t=e[0],n=e[e.length-1];y(A.container,"keydown",(function(e){9===e.which&&A.isFullscreen&&(e.target!==n||e.shiftKey?e.target===t&&e.shiftKey&&(e.preventDefault(),n.focus()):(e.preventDefault(),t.focus()))}))}function q(e,t){if(x.string(t))m(e,A.media,{src:t});else if(t.constructor===Array)for(var n=t.length-1;n>=0;n--)m(e,A.media,t[n])}function G(){if(k.loadSprite){var e=R();e.absolute?(D("AJAX loading absolute SVG sprite"+(A.browser.isIE?" (due to IE)":"")),C(e.url,"sprite-plyr")):D("Sprite will be used as external resource directly")}var n,r=k.html;if(D("Injecting custom controls"),r||(r=function(){var e=[],t=R(),n=(t.absolute?"":t.url)+"#"+k.iconPrefix;return l(k.controls,"play-large")&&e.push('<button type="button" data-plyr="play" class="plyr__play-large">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+k.i18n.play+"</span>","</button>"),e.push('<div class="plyr__controls">'),l(k.controls,"restart")&&e.push('<button type="button" data-plyr="restart">','<svg><use xlink:href="'+n+'-restart" /></svg>','<span class="plyr__sr-only">'+k.i18n.restart+"</span>","</button>"),l(k.controls,"rewind")&&e.push('<button type="button" data-plyr="rewind">','<svg><use xlink:href="'+n+'-rewind" /></svg>','<span class="plyr__sr-only">'+k.i18n.rewind+"</span>","</button>"),l(k.controls,"play")&&e.push('<button type="button" data-plyr="play">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+k.i18n.play+"</span>","</button>",'<button type="button" data-plyr="pause">','<svg><use xlink:href="'+n+'-pause" /></svg>','<span class="plyr__sr-only">'+k.i18n.pause+"</span>","</button>"),l(k.controls,"fast-forward")&&e.push('<button type="button" data-plyr="fast-forward">','<svg><use xlink:href="'+n+'-fast-forward" /></svg>','<span class="plyr__sr-only">'+k.i18n.forward+"</span>","</button>"),l(k.controls,"progress")&&(e.push('<span class="plyr__progress">','<label for="seek{id}" class="plyr__sr-only">Seek</label>','<input id="seek{id}" class="plyr__progress--seek" type="range" min="0" max="100" step="0.1" value="0" data-plyr="seek">','<progress class="plyr__progress--played" max="100" value="0" role="presentation"></progress>','<progress class="plyr__progress--buffer" max="100" value="0">',"<span>0</span>% "+k.i18n.buffered,"</progress>"),k.tooltips.seek&&e.push('<span class="plyr__tooltip">00:00</span>'),e.push("</span>")),l(k.controls,"current-time")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+k.i18n.currentTime+"</span>",'<span class="plyr__time--current">00:00</span>',"</span>"),l(k.controls,"duration")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+k.i18n.duration+"</span>",'<span class="plyr__time--duration">00:00</span>',"</span>"),l(k.controls,"mute")&&e.push('<button type="button" data-plyr="mute">','<svg class="icon--muted"><use xlink:href="'+n+'-muted" /></svg>','<svg><use xlink:href="'+n+'-volume" /></svg>','<span class="plyr__sr-only">'+k.i18n.toggleMute+"</span>","</button>"),l(k.controls,"volume")&&e.push('<span class="plyr__volume">','<label for="volume{id}" class="plyr__sr-only">'+k.i18n.volume+"</label>",'<input id="volume{id}" class="plyr__volume--input" type="range" min="'+k.volumeMin+'" max="'+k.volumeMax+'" value="'+k.volume+'" data-plyr="volume">','<progress class="plyr__volume--display" max="'+k.volumeMax+'" value="'+k.volumeMin+'" role="presentation"></progress>',"</span>"),l(k.controls,"captions")&&e.push('<button type="button" data-plyr="captions">','<svg class="icon--captions-on"><use xlink:href="'+n+'-captions-on" /></svg>','<svg><use xlink:href="'+n+'-captions-off" /></svg>','<span class="plyr__sr-only">'+k.i18n.toggleCaptions+"</span>","</button>"),l(k.controls,"fullscreen")&&e.push('<button type="button" data-plyr="fullscreen">','<svg class="icon--exit-fullscreen"><use xlink:href="'+n+'-exit-fullscreen" /></svg>','<svg><use xlink:href="'+n+'-enter-fullscreen" /></svg>','<span class="plyr__sr-only">'+k.i18n.toggleFullscreen+"</span>","</button>"),e.push("</div>"),e.join("")}()),r=c(r,"{seektime}",k.seekTime),r=c(r,"{id}",Math.floor(1e4*Math.random())),x.string(k.selectors.controls.container)&&(n=t.querySelector(k.selectors.controls.container)),x.htmlElement(n)||(n=A.container),n.insertAdjacentHTML("beforeend",r),k.tooltips.controls)for(var o=z([k.selectors.controls.wrapper," ",k.selectors.labels," .",k.classes.hidden].join("")),i=o.length-1;i>=0;i--){var s=o[i];f(s,k.classes.hidden,!1),f(s,k.classes.tooltip,!0)}}function W(){f(A.container,k.selectors.container.replace(".",""),A.supported.full)}function Y(e){e&&l(k.types.html5,A.type)?A.media.setAttribute("controls",""):A.media.removeAttribute("controls")}function X(e){var t=k.i18n.play;if(x.string(k.title)&&k.title.length&&(t+=", "+k.title,A.container.setAttribute("aria-label",k.title)),A.supported.full&&A.buttons.play)for(var n=A.buttons.play.length-1;n>=0;n--)A.buttons.play[n].setAttribute("aria-label",t);x.htmlElement(e)&&e.setAttribute("title",k.i18n.frameTitle.replace("{title}",k.title))}function Z(t){E&&k.storage.enabled&&(I(A.storage,t),e.localStorage.setItem(k.storage.key,JSON.stringify(A.storage)))}function J(){if(A.media){if(A.supported.full&&(f(A.container,k.classes.type.replace("{0}",A.type),!0),l(k.types.embed,A.type)&&f(A.container,k.classes.type.replace("{0}","video"),!0),f(A.container,k.classes.stopped,k.autoplay),f(A.ontainer,k.classes.isIos,A.browser.isIos),f(A.container,k.classes.isTouch,A.browser.isTouch),"video"===A.type)){var n=t.createElement("div");n.setAttribute("class",k.classes.videoWrapper),u(A.media,n),A.videoContainer=n}l(k.types.embed,A.type)&&function(){var n,r,o=t.createElement("div"),i=A.type+"-"+Math.floor(1e4*Math.random());switch(A.type){case"youtube":r=A.embedId,n=r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)?RegExp.$2:r;break;case"vimeo":n=function(e){return e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}(A.embedId);break;default:n=A.embedId}for(var s=z('[id^="'+A.type+'-"]'),l=s.length-1;l>=0;l--)d(s[l]);if(f(A.media,k.classes.videoWrapper,!0),f(A.media,k.classes.embedWrapper,!0),"youtube"===A.type)A.media.appendChild(o),o.setAttribute("id",i),x.object(e.YT)?ee(n,o):(a(k.urls.youtube.api),e.onYouTubeReadyCallbacks=e.onYouTubeReadyCallbacks||[],e.onYouTubeReadyCallbacks.push((function(){ee(n,o)})),e.onYouTubeIframeAPIReady=function(){e.onYouTubeReadyCallbacks.forEach((function(e){e()}))});else if("vimeo"===A.type)if(A.supported.full?A.media.appendChild(o):o=A.media,o.setAttribute("id",i),x.object(e.Vimeo))te(n,o);else{a(k.urls.vimeo.api);var c=e.setInterval((function(){x.object(e.Vimeo)&&(e.clearInterval(c),te(n,o))}),50)}else if("soundcloud"===A.type){var u=t.createElement("iframe");u.loaded=!1,y(u,"load",(function(){u.loaded=!0})),h(u,{src:"https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/"+n,id:i}),o.appendChild(u),A.media.appendChild(o),e.SC||a(k.urls.soundcloud.api);var p=e.setInterval((function(){e.SC&&u.loaded&&(e.clearInterval(p),ne.call(u))}),50)}}()}else L("No media element found!")}function Q(){A.supported.full&&(Te(),Ne()),X(U("iframe"))}function ee(t,n){A.embed=new e.YT.Player(n.id,{videoId:t,playerVars:{autoplay:k.autoplay?1:0,controls:A.supported.full?0:1,rel:0,showinfo:0,iv_load_policy:3,cc_load_policy:k.captions.defaultActive?1:0,cc_lang_pref:"en",wmode:"transparent",modestbranding:1,disablekb:1,origin:"*"},events:{onError:function(e){P(A.container,"error",!0,{code:e.data,embed:e.target})},onReady:function(t){var n=t.target;A.media.play=function(){n.playVideo(),A.media.paused=!1},A.media.pause=function(){n.pauseVideo(),A.media.paused=!0},A.media.stop=function(){n.stopVideo(),A.media.paused=!0},A.media.duration=n.getDuration(),A.media.paused=!0,A.media.currentTime=0,A.media.muted=n.isMuted(),k.title=n.getVideoData().title,A.supported.full&&A.media.querySelector("iframe").setAttribute("tabindex","-1"),Q(),P(A.media,"timeupdate"),P(A.media,"durationchange"),e.clearInterval(O.buffering),O.buffering=e.setInterval((function(){A.media.buffered=n.getVideoLoadedFraction(),(null===A.media.lastBuffered||A.media.lastBuffered<A.media.buffered)&&P(A.media,"progress"),A.media.lastBuffered=A.media.buffered,1===A.media.buffered&&(e.clearInterval(O.buffering),P(A.media,"canplaythrough"))}),200)},onStateChange:function(t){var n=t.target;switch(e.clearInterval(O.playing),t.data){case 0:A.media.paused=!0,P(A.media,"ended");break;case 1:A.media.paused=!1,A.media.seeking&&P(A.media,"seeked"),A.media.seeking=!1,P(A.media,"play"),P(A.media,"playing"),O.playing=e.setInterval((function(){A.media.currentTime=n.getCurrentTime(),P(A.media,"timeupdate")}),100),A.media.duration!==n.getDuration()&&(A.media.duration=n.getDuration(),P(A.media,"durationchange"));break;case 2:A.media.paused=!0,P(A.media,"pause")}P(A.container,"statechange",!1,{code:t.data})}}})}function te(t,n){A.embed=new e.Vimeo.Player(n,{id:parseInt(t),loop:k.loop,autoplay:k.autoplay,byline:!1,portrait:!1,title:!1}),A.media.play=function(){A.embed.play(),A.media.paused=!1},A.media.pause=function(){A.embed.pause(),A.media.paused=!0},A.media.stop=function(){A.embed.stop(),A.media.paused=!0},A.media.paused=!0,A.media.currentTime=0,Q(),A.embed.getCurrentTime().then((function(e){A.media.currentTime=e,P(A.media,"timeupdate")})),A.embed.getDuration().then((function(e){A.media.duration=e,P(A.media,"durationchange")})),A.embed.on("loaded",(function(){x.htmlElement(A.embed.element)&&A.supported.full&&A.embed.element.setAttribute("tabindex","-1")})),A.embed.on("play",(function(){A.media.paused=!1,P(A.media,"play"),P(A.media,"playing")})),A.embed.on("pause",(function(){A.media.paused=!0,P(A.media,"pause")})),A.embed.on("timeupdate",(function(e){A.media.seeking=!1,A.media.currentTime=e.seconds,P(A.media,"timeupdate")})),A.embed.on("progress",(function(e){A.media.buffered=e.percent,P(A.media,"progress"),1===parseInt(e.percent)&&P(A.media,"canplaythrough")})),A.embed.on("seeked",(function(){A.media.seeking=!1,P(A.media,"seeked"),P(A.media,"play")})),A.embed.on("ended",(function(){A.media.paused=!0,P(A.media,"ended")}))}function ne(){A.embed=e.SC.Widget(this),A.embed.bind(e.SC.Widget.Events.READY,(function(){A.media.play=function(){A.embed.play(),A.media.paused=!1},A.media.pause=function(){A.embed.pause(),A.media.paused=!0},A.media.stop=function(){A.embed.seekTo(0),A.embed.pause(),A.media.paused=!0},A.media.paused=!0,A.media.currentTime=0,A.embed.getDuration((function(e){A.media.duration=e/1e3,Q()})),A.embed.getPosition((function(e){A.media.currentTime=e,P(A.media,"timeupdate")})),A.embed.bind(e.SC.Widget.Events.PLAY,(function(){A.media.paused=!1,P(A.media,"play"),P(A.media,"playing")})),A.embed.bind(e.SC.Widget.Events.PAUSE,(function(){A.media.paused=!0,P(A.media,"pause")})),A.embed.bind(e.SC.Widget.Events.PLAY_PROGRESS,(function(e){A.media.seeking=!1,A.media.currentTime=e.currentPosition/1e3,P(A.media,"timeupdate")})),A.embed.bind(e.SC.Widget.Events.LOAD_PROGRESS,(function(e){A.media.buffered=e.loadProgress,P(A.media,"progress"),1===parseInt(e.loadProgress)&&P(A.media,"canplaythrough")})),A.embed.bind(e.SC.Widget.Events.FINISH,(function(){A.media.paused=!0,P(A.media,"ended")}))}))}function re(){"play"in A.media&&A.media.play()}function oe(){"pause"in A.media&&A.media.pause()}function ie(e){return x.boolean(e)||(e=A.media.paused),e?re():oe(),e}function se(e){x.number(e)||(e=k.seekTime),le(A.media.currentTime-e)}function ae(e){x.number(e)||(e=k.seekTime),le(A.media.currentTime+e)}function le(e){var t=0,n=A.media.paused,r=ce();x.number(e)?t=e:x.object(e)&&l(["input","change"],e.type)&&(t=e.target.value/e.target.max*r),t<0?t=0:t>r&&(t=r),xe(t);try{A.media.currentTime=t.toFixed(4)}catch(e){}if(l(k.types.embed,A.type)){switch(A.type){case"youtube":A.embed.seekTo(t);break;case"vimeo":A.embed.setCurrentTime(t.toFixed(0));break;case"soundcloud":A.embed.seekTo(1e3*t)}n&&oe(),P(A.media,"timeupdate"),A.media.seeking=!0,P(A.media,"seeking")}D("Seeking to "+A.media.currentTime+" seconds"),B(t)}function ce(){var e=parseInt(k.duration),t=0;return null===A.media.duration||isNaN(A.media.duration)||(t=A.media.duration),isNaN(e)?t:e}function ue(){f(A.container,k.classes.playing,!A.media.paused),f(A.container,k.classes.stopped,A.media.paused),ke(A.media.paused)}function de(o){var i=n.supportsFullScreen;if(i){if(!o||o.type!==n.fullScreenEventName)return n.isFullScreen(A.container)?n.cancelFullScreen():(r={x:e.pageXOffset||0,y:e.pageYOffset||0},n.requestFullScreen(A.container)),void(A.isFullscreen=n.isFullScreen(A.container));A.isFullscreen=n.isFullScreen(A.container)}else A.isFullscreen=!A.isFullscreen,t.body.style.overflow=A.isFullscreen?"hidden":"";f(A.container,k.classes.fullscreen.active,A.isFullscreen),H(A.isFullscreen),A.buttons&&A.buttons.fullscreen&&_(A.buttons.fullscreen,A.isFullscreen),P(A.container,A.isFullscreen?"enterfullscreen":"exitfullscreen",!0),!A.isFullscreen&&i&&e.scrollTo(r.x,r.y)}function pe(e){if(x.boolean(e)||(e=!A.media.muted),_(A.buttons.mute,e),A.media.muted=e,0===A.media.volume&&he(k.volume),l(k.types.embed,A.type)){switch(A.type){case"youtube":A.embed[A.media.muted?"mute":"unMute"]();break;case"vimeo":case"soundcloud":A.embed.setVolume(A.media.muted?0:parseFloat(k.volume/k.volumeMax))}P(A.media,"volumechange")}}function he(e){var t=k.volumeMax,n=k.volumeMin;if(x.undefined(e)&&(e=A.storage.volume),(null===e||isNaN(e))&&(e=k.volume),e>t&&(e=t),e<n&&(e=n),A.media.volume=parseFloat(e/t),A.volume.display&&(A.volume.display.value=e),l(k.types.embed,A.type)){switch(A.type){case"youtube":A.embed.setVolume(100*A.media.volume);break;case"vimeo":case"soundcloud":A.embed.setVolume(A.media.volume)}P(A.media,"volumechange")}0===e?A.media.muted=!0:A.media.muted&&e>0&&pe()}function me(e){var t=A.media.muted?0:A.media.volume*k.volumeMax;x.number(e)||(e=k.volumeStep),he(t+e)}function fe(e){var t=A.media.muted?0:A.media.volume*k.volumeMax;x.number(e)||(e=k.volumeStep),he(t-e)}function ge(){var e=A.media.muted?0:A.media.volume*k.volumeMax;A.supported.full&&(A.volume.input&&(A.volume.input.value=e),A.volume.display&&(A.volume.display.value=e)),Z({volume:e}),f(A.container,k.classes.muted,0===e),A.supported.full&&A.buttons.mute&&_(A.buttons.mute,0===e)}function be(e){A.supported.full&&A.buttons.captions&&(x.boolean(e)||(e=-1===A.container.className.indexOf(k.classes.captions.active)),A.captionsEnabled=e,_(A.buttons.captions,A.captionsEnabled),f(A.container,k.classes.captions.active,A.captionsEnabled),P(A.container,A.captionsEnabled?"captionsenabled":"captionsdisabled",!0),Z({captionsEnabled:A.captionsEnabled}))}function ve(e){var t="waiting"===e.type;clearTimeout(O.loading),O.loading=setTimeout((function(){f(A.container,k.classes.loading,t),ke(t)}),t?250:0)}function ye(e){if(A.supported.full){var t,n=A.progress.played,r=0,o=ce();if(e)switch(e.type){case"timeupdate":case"seeking":if(A.controls.pressed)return;r=w(A.media.currentTime,o),"timeupdate"===e.type&&A.buttons.seek&&(A.buttons.seek.value=r);break;case"playing":case"progress":n=A.progress.buffer,r=(t=A.media.buffered)&&t.length?w(t.end(0),o):x.number(t)?100*t:0}je(n,r)}}function je(e,t){if(A.supported.full){if(x.undefined(t)&&(t=0),x.undefined(e)){if(!A.progress||!A.progress.buffer)return;e=A.progress.buffer}x.htmlElement(e)?e.value=t:e&&(e.bar&&(e.bar.value=t),e.text&&(e.text.innerHTML=t))}}function _e(e,t){if(t){isNaN(e)&&(e=0),A.secs=parseInt(e%60),A.mins=parseInt(e/60%60),A.hours=parseInt(e/60/60%60);var n=parseInt(ce()/60/60%60)>0;A.secs=("0"+A.secs).slice(-2),A.mins=("0"+A.mins).slice(-2),t.innerHTML=(n?A.hours+":":"")+A.mins+":"+A.secs}}function we(){if(A.supported.full){var e=ce()||0;!A.duration&&k.displayDuration&&A.media.paused&&_e(e,A.currentTime),A.duration&&_e(e,A.duration),Ee()}}function Ie(e){_e(A.media.currentTime,A.currentTime),e&&"timeupdate"===e.type&&A.media.seeking||ye(e)}function xe(e){x.number(e)||(e=0);var t=w(e,ce());A.progress&&A.progress.played&&(A.progress.played.value=t),A.buttons&&A.buttons.seek&&(A.buttons.seek.value=t)}function Ee(e){var t=ce();if(k.tooltips.seek&&A.progress.container&&0!==t){var n=A.progress.container.getBoundingClientRect(),r=0,o=k.classes.tooltip+"--visible";if(e)r=100/n.width*(e.pageX-n.left);else{if(!g(A.progress.tooltip,o))return;r=A.progress.tooltip.style.left.replace("%","")}r<0?r=0:r>100&&(r=100),_e(t/100*r,A.progress.tooltip),A.progress.tooltip.style.left=r+"%",e&&l(["mouseenter","mouseleave"],e.type)&&f(A.progress.tooltip,o,"mouseenter"===e.type)}}function ke(t){if(k.hideControls&&"audio"!==A.type){var n=0,r=!1,o=t,i=g(A.container,k.classes.loading);if(x.boolean(t)||(t&&t.type?(r="enterfullscreen"===t.type,o=l(["mousemove","touchstart","mouseenter","focus"],t.type),l(["mousemove","touchmove"],t.type)&&(n=2e3),"focus"===t.type&&(n=3e3)):o=g(A.container,k.classes.hideControls)),e.clearTimeout(O.hover),o||A.media.paused||i){if(f(A.container,k.classes.hideControls,!1),A.media.paused||i)return;A.browser.isTouch&&(n=3e3)}o&&A.media.paused||(O.hover=e.setTimeout((function(){(!A.controls.pressed&&!A.controls.hover||r)&&f(A.container,k.classes.hideControls,!0)}),n))}}function Ce(){var r=A.browser.isIE?"change":"input";function o(){var e=ie(),t=A.buttons[e?"play":"pause"],n=A.buttons[e?"pause":"play"];if(n=n&&n.length>1?n[n.length-1]:n[0]){var r=g(t,k.classes.tabFocus);setTimeout((function(){n.focus(),r&&(f(t,k.classes.tabFocus,!1),f(n,k.classes.tabFocus,!0))}),100)}}function i(){var e=t.activeElement;return e=e&&e!==t.body?t.querySelector(":focus"):null}function s(e){return e.keyCode?e.keyCode:e.which}if(k.keyboardShorcuts.focused){var a=null;k.keyboardShorcuts.global&&y(e,"keydown keyup",(function(e){var t=s(e),n=i();1!==T().length||!l([48,49,50,51,52,53,54,56,57,75,77,70,67],t)||x.htmlElement(n)&&b(n,k.selectors.editable)||c(e)})),y(A.container,"keydown keyup",c)}function c(e){var t,r=s(e),o="keydown"===e.type,i=o&&r===a;if(x.number(r))if(o){switch(l([48,49,50,51,52,53,54,56,57,32,75,38,40,77,39,37,70,67],r)&&(e.preventDefault(),e.stopPropagation()),r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:i||(t=A.media.duration,x.number(t)&&le(t/10*(r-48)));break;case 32:case 75:i||ie();break;case 38:me();break;case 40:fe();break;case 77:i||pe();break;case 39:ae();break;case 37:se();break;case 70:de();break;case 67:i||be()}!n.supportsFullScreen&&A.isFullscreen&&27===r&&de(),a=r}else a=null}for(var u in y(e,"keyup",(function(e){var t=s(e),n=i();9===t&&function(e){for(var t in A.buttons){var n=A.buttons[t];if(x.nodeList(n))for(var r=0;r<n.length;r++)f(n[r],k.classes.tabFocus,n[r]===e);else f(n,k.classes.tabFocus,n===e)}}(n)})),y(t.body,"click",(function(){f(U("."+k.classes.tabFocus),k.classes.tabFocus,!1)})),A.buttons){var d=A.buttons[u];y(d,"blur",(function(){f(d,"tab-focus",!1)}))}v(A.buttons.play,"click",k.listeners.play,o),v(A.buttons.pause,"click",k.listeners.pause,o),v(A.buttons.restart,"click",k.listeners.restart,le),v(A.buttons.rewind,"click",k.listeners.rewind,se),v(A.buttons.forward,"click",k.listeners.forward,ae),v(A.buttons.seek,r,k.listeners.seek,le),v(A.volume.input,r,k.listeners.volume,(function(){he(A.volume.input.value)})),v(A.buttons.mute,"click",k.listeners.mute,pe),v(A.buttons.fullscreen,"click",k.listeners.fullscreen,de),n.supportsFullScreen&&y(t,n.fullScreenEventName,de),y(A.buttons.captions,"click",be),y(A.progress.container,"mouseenter mouseleave mousemove",Ee),k.hideControls&&(y(A.container,"mouseenter mouseleave mousemove touchstart touchend touchcancel touchmove enterfullscreen",ke),y(A.controls,"mouseenter mouseleave",(function(e){A.controls.hover="mouseenter"===e.type})),y(A.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){A.controls.pressed=l(["mousedown","touchstart"],e.type)})),y(A.controls,"focus blur",ke,!0)),y(A.volume.input,"wheel",(function(e){e.preventDefault();var t=e.webkitDirectionInvertedFromDevice,n=k.volumeStep/5;(e.deltaY<0||e.deltaX>0)&&(t?fe(n):me(n)),(e.deltaY>0||e.deltaX<0)&&(t?me(n):fe(n))}))}function Se(n,r){if(!A.init)return null;switch(A.type){case"youtube":e.clearInterval(O.buffering),e.clearInterval(O.playing),A.embed.destroy(),o();break;case"vimeo":A.embed.unload().then(o),O.cleanUp=e.setTimeout(o,200);break;case"video":case"audio":Y(!0),o()}function o(){clearTimeout(O.cleanUp),x.boolean(r)||(r=!0),x.function(n)&&n.call(V),r&&(A.init=!1,A.container.parentNode.replaceChild(V,A.container),t.body.style.overflow="",P(V,"destroyed",!0))}}function Te(){if(!A.supported.full)return L("Basic support only",A.type),d(U(k.selectors.controls.wrapper)),d(U(k.selectors.buttons.play)),void Y(!0);var e=!z(k.selectors.controls.wrapper).length;e&&G(),function(){try{return A.controls=U(k.selectors.controls.wrapper),A.buttons={},A.buttons.seek=U(k.selectors.buttons.seek),A.buttons.play=z(k.selectors.buttons.play),A.buttons.pause=U(k.selectors.buttons.pause),A.buttons.restart=U(k.selectors.buttons.restart),A.buttons.rewind=U(k.selectors.buttons.rewind),A.buttons.forward=U(k.selectors.buttons.forward),A.buttons.fullscreen=U(k.selectors.buttons.fullscreen),A.buttons.mute=U(k.selectors.buttons.mute),A.buttons.captions=U(k.selectors.buttons.captions),A.progress={},A.progress.container=U(k.selectors.progress.container),A.progress.buffer={},A.progress.buffer.bar=U(k.selectors.progress.buffer),A.progress.buffer.text=A.progress.buffer.bar&&A.progress.buffer.bar.getElementsByTagName("span")[0],A.progress.played=U(k.selectors.progress.played),A.progress.tooltip=A.progress.container&&A.progress.container.querySelector("."+k.classes.tooltip),A.volume={},A.volume.input=U(k.selectors.volume.input),A.volume.display=U(k.selectors.volume.display),A.duration=U(k.selectors.duration),A.currentTime=U(k.selectors.currentTime),A.seekTime=z(k.selectors.seekTime),!0}catch(e){return L("It looks like there is a problem with your controls HTML"),Y(!0),!1}}()&&(e&&Ce(),function(){if(y(A.media,"timeupdate seeking",Ie),y(A.media,"timeupdate",B),y(A.media,"durationchange loadedmetadata",we),y(A.media,"ended",(function(){"video"===A.type&&k.showPosterOnEnd&&("video"===A.type&&$(),le(),A.media.load())})),y(A.media,"progress playing",ye),y(A.media,"volumechange",ge),y(A.media,"play pause ended",ue),y(A.media,"waiting canplay seeked",ve),k.clickToPlay&&"audio"!==A.type){var e=U("."+k.classes.videoWrapper);if(!e)return;e.style.cursor="pointer",y(e,"click",(function(){k.hideControls&&A.browser.isTouch&&!A.media.paused||(A.media.paused?re():A.media.ended?(le(),re()):oe())}))}k.disableContextMenu&&y(A.media,"contextmenu",(function(e){e.preventDefault()})),y(A.media,k.events.concat(["keyup","keydown"]).join(" "),(function(e){P(A.container,e.type,!0)}))}(),Y(),F(),M(),he(),ge(),Ie(),ue())}function Ne(){e.setTimeout((function(){P(A.media,"ready")}),0),f(A.media,o.classes.setup,!0),f(A.container,k.classes.ready,!0),A.media.plyr=N,k.autoplay&&re()}return D("Config",k),N={getOriginal:function(){return V},getContainer:function(){return A.container},getEmbed:function(){return A.embed},getMedia:function(){return A.media},getType:function(){return A.type},getDuration:ce,getCurrentTime:function(){return A.media.currentTime},getVolume:function(){return A.media.volume},isMuted:function(){return A.media.muted},isReady:function(){return g(A.container,k.classes.ready)},isLoading:function(){return g(A.container,k.classes.loading)},isPaused:function(){return A.media.paused},on:function(e,t){return y(A.container,e,t),this},play:re,pause:oe,stop:function(){oe(),le()},restart:le,rewind:se,forward:ae,seek:le,source:function(e){if(x.undefined(e)){var n;switch(A.type){case"youtube":n=A.embed.getVideoUrl();break;case"vimeo":A.embed.getVideoUrl.then((function(e){n=e}));break;case"soundcloud":A.embed.getCurrentSound((function(e){n=e.permalink_url}));break;default:n=A.media.currentSrc}return n||""}!function(e){x.object(e)&&"sources"in e&&e.sources.length?(f(A.container,k.classes.ready,!1),oe(),xe(),je(),function(){if(l(k.types.html5,A.type)){for(var e=A.media.querySelectorAll("source"),t=0;t<e.length;t++)d(e[t]);A.media.setAttribute("src","https://cdn.selz.com/plyr/blank.mp4"),A.media.load(),D("Cancelled network requests")}}(),Se((function(){if(A.embed=null,d(A.media),"video"===A.type&&A.videoContainer&&d(A.videoContainer),A.container&&A.container.removeAttribute("class"),"type"in e&&(A.type=e.type,"video"===A.type)){var n=e.sources[0];"type"in n&&l(k.types.embed,n.type)&&(A.type=n.type)}switch(A.supported=S(A.type),A.type){case"video":A.media=t.createElement("video");break;case"audio":A.media=t.createElement("audio");break;case"youtube":case"vimeo":case"soundcloud":A.media=t.createElement("div"),A.embedId=e.sources[0].src}p(A.container,A.media),x.boolean(e.autoplay)&&(k.autoplay=e.autoplay),l(k.types.html5,A.type)&&(k.crossorigin&&A.media.setAttribute("crossorigin",""),k.autoplay&&A.media.setAttribute("autoplay",""),"poster"in e&&A.media.setAttribute("poster",e.poster),k.loop&&A.media.setAttribute("loop","")),f(A.container,k.classes.fullscreen.active,A.isFullscreen),f(A.container,k.classes.captions.active,A.captionsEnabled),W(),l(k.types.html5,A.type)&&q("source",e.sources),J(),l(k.types.html5,A.type)&&("tracks"in e&&q("track",e.tracks),A.media.load()),(l(k.types.html5,A.type)||l(k.types.embed,A.type)&&!A.supported.full)&&(Te(),Ne()),k.title=e.title,X()}),!1)):L("Invalid source format")}(e)},poster:function(e){"video"===A.type&&A.media.setAttribute("poster",e)},setVolume:he,togglePlay:ie,toggleMute:pe,toggleCaptions:be,toggleFullscreen:de,toggleControls:ke,isFullscreen:function(){return A.isFullscreen||!1},support:function(e){return function(e,t){var n=e.media;if("video"===e.type)switch(t){case"video/webm":return!(!n.canPlayType||!n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!n.canPlayType||!n.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!n.canPlayType||!n.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}else if("audio"===e.type)switch(t){case"audio/mpeg":return!(!n.canPlayType||!n.canPlayType("audio/mpeg;").replace(/no/,""));case"audio/ogg":return!(!n.canPlayType||!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""));case"audio/wav":return!(!n.canPlayType||!n.canPlayType('audio/wav; codecs="1"').replace(/no/,""))}return!1}(A,e)},destroy:Se},function(){if(A.init)return null;if(n=function(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},n="webkit o moz ms khtml".split(" ");if(x.undefined(t.cancelFullScreen))for(var r=0,o=n.length;r<o;r++){if(e.prefix=n[r],!x.undefined(t[e.prefix+"CancelFullScreen"])){e.supportsFullScreen=!0;break}if(!x.undefined(t.msExitFullscreen)&&t.msFullscreenEnabled){e.prefix="ms",e.supportsFullScreen=!0;break}}else e.supportsFullScreen=!0;return e.supportsFullScreen&&(e.fullScreenEventName="ms"===e.prefix?"MSFullscreenChange":e.prefix+"fullscreenchange",e.isFullScreen=function(e){switch(x.undefined(e)&&(e=t.body),this.prefix){case"":return t.fullscreenElement===e;case"moz":return t.mozFullScreenElement===e;default:return t[this.prefix+"FullscreenElement"]===e}},e.requestFullScreen=function(e){return x.undefined(e)&&(e=t.body),""===this.prefix?e.requestFullScreen():e[this.prefix+("ms"===this.prefix?"RequestFullscreen":"RequestFullScreen")]()},e.cancelFullScreen=function(){return""===this.prefix?t.cancelFullScreen():t[this.prefix+("ms"===this.prefix?"ExitFullscreen":"CancelFullScreen")]()},e.element=function(){return""===this.prefix?t.fullscreenElement:t[this.prefix+"FullscreenElement"]}),e}(),A.browser=i(),x.htmlElement(A.media)){var r;A.storage={},E&&k.storage.enabled&&(e.localStorage.removeItem("plyr-volume"),(r=e.localStorage.getItem(k.storage.key))&&(/^\d+(\.\d+)?$/.test(r)?Z({volume:parseFloat(r)}):A.storage=JSON.parse(r)));var o=s.tagName.toLowerCase();"div"===o?(A.type=s.getAttribute("data-type"),A.embedId=s.getAttribute("data-video-id"),s.removeAttribute("data-type"),s.removeAttribute("data-video-id")):(A.type=o,k.crossorigin=null!==s.getAttribute("crossorigin"),k.autoplay=k.autoplay||null!==s.getAttribute("autoplay"),k.loop=k.loop||null!==s.getAttribute("loop")),A.supported=S(A.type),A.supported.basic&&(A.container=u(s,t.createElement("div")),A.container.setAttribute("tabindex",0),W(),D(A.browser.name+" "+A.browser.version),J(),(l(k.types.html5,A.type)||l(k.types.embed,A.type)&&!A.supported.full)&&(Te(),Ne(),X()),A.init=!0)}}(),A.init?N:null}function C(e,n){var r=new XMLHttpRequest;if(!x.string(n)||!x.htmlElement(t.querySelector("#"+n))){var o=t.createElement("div");o.setAttribute("hidden",""),x.string(n)&&o.setAttribute("id",n),t.body.insertBefore(o,t.body.childNodes[0]),"withCredentials"in r&&(r.open("GET",e,!0),r.onload=function(){o.innerHTML=r.responseText},r.send())}}function S(e){var n=i(),r=n.isIE&&n.version<=9,o=n.isIos,s=n.isIphone,a=!!t.createElement("audio").canPlayType,l=!!t.createElement("video").canPlayType,c=!1,u=!1;switch(e){case"video":u=(c=l)&&!r&&!s;break;case"audio":u=(c=a)&&!r;break;case"vimeo":c=!0,u=!r&&!o;break;case"youtube":c=!0,u=!r&&!o,o&&!s&&n.version>=10&&(u=!0);break;case"soundcloud":c=!0,u=!r&&!s;break;default:u=(c=a&&l)&&!r}return{basic:c,full:u}}function T(e){if(x.string(e)?e=t.querySelector(e):x.undefined(e)&&(e=t.body),x.htmlElement(e)){var n=e.querySelectorAll("."+o.classes.setup),r=[];return Array.prototype.slice.call(n).forEach((function(e){x.object(e.plyr)&&r.push(e.plyr)})),r}return[]}return{setup:function(e,n){var r=[],i=[],s=[o.selectors.html5,o.selectors.embed].join(",");if(x.string(e)?e=t.querySelectorAll(e):x.htmlElement(e)?e=[e]:x.nodeList(e)||x.array(e)||x.string(e)||(x.undefined(n)&&x.object(e)&&(n=e),e=t.querySelectorAll(s)),x.nodeList(e)&&(e=Array.prototype.slice.call(e)),!S().basic||!e.length)return!1;function a(e,t){g(t,o.classes.hook)||r.push({target:e,media:t})}for(var l=0;l<e.length;l++){var c=e[l],u=c.querySelectorAll(s);if(u.length)for(var d=0;d<u.length;d++)a(c,u[d]);else b(c,s)&&a(c,c)}return r.forEach((function(e){var t=e.target,r=e.media,s={};try{s=JSON.parse(t.getAttribute("data-plyr"))}catch(e){}var a=I({},o,n,s);if(!a.enabled)return null;var l=new k(r,a);if(x.object(l)){if(a.debug){var c=a.events.concat(["setup","statechange","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled"]);y(l.getContainer(),c.join(" "),(function(e){console.log([a.logPrefix,"event:",e.type].join(" "),e.detail.plyr)}))}j(l.getContainer(),"setup",!0,{plyr:l}),i.push(l)}})),i},supported:S,loadSprite:C,get:T}},"object"===(void 0===t?"undefined":(0,s.default)(t))&&"object"===(0,s.default)(t.exports)?t.exports=i(o,document):"function"==typeof define&&define.amd?define([],(function(){return i(o,document)})):o.plyr=i(o,document),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}()},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/typeof":679,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.last-index-of.js":869,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.number.to-fixed.js":890,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.regexp.constructor.js":909,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.regexp.to-string.js":911,"core-js/modules/es.string.match.js":920,"core-js/modules/es.string.replace.js":924,"core-js/modules/es.string.split.js":926,"core-js/modules/es.string.trim.js":929,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],1045:[function(e,t,n){var r,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var c,u=[],d=!1,p=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&m())}function m(){if(!d){var e=l(h);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||d||l(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],1046:[function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),s=new I(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=j(s,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function p(){}function h(){}var m={};a(m,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(x([])));g&&g!==t&&n.call(g,o)&&(m=g);var b=h.prototype=d.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(o,i){function s(){return new t((function(r,s){!function r(o,i,s,a){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(l.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=h,a(b,"constructor",h),a(h,"constructor",p),p.displayName=a(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),a(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new y(l(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(b),a(b,s,"Generator"),a(b,o,(function(){return this})),a(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},{}],1047:[function(e,t,n){var r,o;r=this,o=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,o=document.createElement("a"),i=1;i<e;i++)o.href=arguments[i],r=o.href,t.href=r;return n.removeChild(t),r}},"function"==typeof define&&define.amd?define(o):"object"==typeof n?t.exports=o():r.resolveUrl=o()},{}],1048:[function(e,t,n){(function(t,r){(function(){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,s=Array.prototype.slice,a={},l=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,r=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,o((function(){a[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete a[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1045,timers:1048}],1049:[function(e,t,n){!function(){var e=/^\s+/,n=/\s+$/,r=0,o=Math,i=o.round,s=o.min,a=o.max,l=o.random;function c(t,l){if(l=l||{},(t=t||"")instanceof c)return t;if(!(this instanceof c))return new c(t,l);var u=function(t){var r={r:0,g:0,b:0},i=1,l=!1,c=!1;"string"==typeof t&&(t=function(t){t=t.replace(e,"").replace(n,"").toLowerCase();var r,o=!1;if(C[t])t=C[t],o=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(r=R.rgb.exec(t))return{r:r[1],g:r[2],b:r[3]};if(r=R.rgba.exec(t))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=R.hsl.exec(t))return{h:r[1],s:r[2],l:r[3]};if(r=R.hsla.exec(t))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=R.hsv.exec(t))return{h:r[1],s:r[2],v:r[3]};if(r=R.hsva.exec(t))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=R.hex8.exec(t))return{a:(i=r[1],O(i)/255),r:O(r[2]),g:O(r[3]),b:O(r[4]),format:o?"name":"hex8"};var i;if(r=R.hex6.exec(t))return{r:O(r[1]),g:O(r[2]),b:O(r[3]),format:o?"name":"hex"};if(r=R.hex3.exec(t))return{r:O(r[1]+""+r[1]),g:O(r[2]+""+r[2]),b:O(r[3]+""+r[3]),format:o?"name":"hex"};return!1}(t));"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(u=t.r,d=t.g,p=t.b,r={r:255*N(u,255),g:255*N(d,255),b:255*N(p,255)},l=!0,c="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=P(t.s),t.v=P(t.v),r=function(e,t,n){e=6*N(e,360),t=N(t,100),n=N(n,100);var r=o.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),c=r%6;return{r:255*[n,a,s,s,l,n][c],g:255*[l,n,n,a,s,s][c],b:255*[s,s,l,n,n,a][c]}}(t.h,t.s,t.v),l=!0,c="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=P(t.s),t.l=P(t.l),r=function(e,t,n){var r,o,i;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=N(e,360),t=N(t,100),n=N(n,100),0===t)r=o=i=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=s(l,a,e+1/3),o=s(l,a,e),i=s(l,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(t.h,t.s,t.l),l=!0,c="hsl"),t.hasOwnProperty("a")&&(i=t.a));var u,d,p;return i=T(i),{ok:l,format:t.format||c,r:s(255,a(r.r,0)),g:s(255,a(r.g,0)),b:s(255,a(r.b,0)),a:i}}(t);this._originalInput=t,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=i(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=u.ok,this._tc_id=r++}function u(e,t,n){e=N(e,255),t=N(t,255),n=N(n,255);var r,o,i=a(e,t,n),l=s(e,t,n),c=(i+l)/2;if(i==l)r=o=0;else{var u=i-l;switch(o=c>.5?u/(2-i-l):u/(i+l),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:c}}function d(e,t,n){e=N(e,255),t=N(t,255),n=N(n,255);var r,o,i=a(e,t,n),l=s(e,t,n),c=i,u=i-l;if(o=0===i?0:u/i,i==l)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:c}}function p(e,t,n,r){var o=[V(i(e).toString(16)),V(i(t).toString(16)),V(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(e,t,n,r){var o;return[V((o=r,Math.round(255*parseFloat(o)).toString(16))),V(i(e).toString(16)),V(i(t).toString(16)),V(i(n).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=A(n.s),c(n)}function f(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=A(n.s),c(n)}function g(e){return c(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=A(n.l),c(n)}function v(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=a(0,s(255,n.r-i(-t/100*255))),n.g=a(0,s(255,n.g-i(-t/100*255))),n.b=a(0,s(255,n.b-i(-t/100*255))),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=A(n.l),c(n)}function j(e,t){var n=c(e).toHsl(),r=(i(n.h)+t)%360;return n.h=r<0?360+r:r,c(n)}function _(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function I(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function E(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),o=360/n,i=[c(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(c(r));return i}function k(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,o=n.s,i=n.v,s=[],a=1/t;t--;)s.push(c({h:r,s:o,v:i})),i=(i+a)%1;return s}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=T(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*N(this._r,255))+"%",g:i(100*N(this._g,255))+"%",b:i(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*N(this._r,255))+"%, "+i(100*N(this._g,255))+"%, "+i(100*N(this._b,255))+"%)":"rgba("+i(100*N(this._r,255))+"%, "+i(100*N(this._g,255))+"%, "+i(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";e&&(n=c(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(j,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:P(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r,o=c(e).toRgb(),i=c(t).toRgb(),s=n/100,a=2*s-1,l=i.a-o.a,u=1-(r=((r=a*l==-1?a:(a+l)/(1+a*l))+1)/2);return c({r:i.r*r+o.r*u,g:i.g*r+o.g*u,b:i.b*r+o.b*u,a:i.a*s+o.a*(1-s)})},c.readability=function(e,t){var n=c(e),r=c(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,o,i=c.readability(e,t);switch(o=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},c.mostReadable=function(e,t,n){var r,o,i,s,a=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,a=c(t[u]));return c.isReadable(e,a,{level:i,size:s})||!o?a:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(C);function T(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function N(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=s(t,a(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function A(e){return s(1,a(0,e))}function O(e){return parseInt(e,16)}function V(e){return 1==e.length?"0"+e:""+e}function P(e){return e<=1&&(e=100*e+"%"),e}var K,D,L,R=(D="[\\s|\\(]+("+(K="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",L="[\\s|\\(]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",{rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+L),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+L),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+L),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});void 0!==t&&t.exports?t.exports=c:"function"==typeof define&&define.amd?define((function(){return c})):window.tinycolor=c}()},{}],1050:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}});var r=p(e("./v1.js")),o=p(e("./v3.js")),i=p(e("./v4.js")),s=p(e("./v5.js")),a=p(e("./nil.js")),l=p(e("./version.js")),c=p(e("./validate.js")),u=p(e("./stringify.js")),d=p(e("./parse.js"));function p(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":1052,"./parse.js":1053,"./stringify.js":1057,"./v1.js":1058,"./v3.js":1059,"./v4.js":1061,"./v5.js":1062,"./validate.js":1063,"./version.js":1064}],1051:[function(e,t,n){"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function o(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,r,i,s){return o((a=o(o(t,e),o(r,s)))<<(l=i)|a>>>32-l,n);var a,l}function s(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function l(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length;for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let n=1732584193,i=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const r=n,p=i,h=u,m=d;n=s(n,i,u,d,e[t],7,-680876936),d=s(d,n,i,u,e[t+1],12,-389564586),u=s(u,d,n,i,e[t+2],17,606105819),i=s(i,u,d,n,e[t+3],22,-1044525330),n=s(n,i,u,d,e[t+4],7,-176418897),d=s(d,n,i,u,e[t+5],12,1200080426),u=s(u,d,n,i,e[t+6],17,-1473231341),i=s(i,u,d,n,e[t+7],22,-45705983),n=s(n,i,u,d,e[t+8],7,1770035416),d=s(d,n,i,u,e[t+9],12,-1958414417),u=s(u,d,n,i,e[t+10],17,-42063),i=s(i,u,d,n,e[t+11],22,-1990404162),n=s(n,i,u,d,e[t+12],7,1804603682),d=s(d,n,i,u,e[t+13],12,-40341101),u=s(u,d,n,i,e[t+14],17,-1502002290),i=s(i,u,d,n,e[t+15],22,1236535329),n=a(n,i,u,d,e[t+1],5,-165796510),d=a(d,n,i,u,e[t+6],9,-1069501632),u=a(u,d,n,i,e[t+11],14,643717713),i=a(i,u,d,n,e[t],20,-373897302),n=a(n,i,u,d,e[t+5],5,-701558691),d=a(d,n,i,u,e[t+10],9,38016083),u=a(u,d,n,i,e[t+15],14,-660478335),i=a(i,u,d,n,e[t+4],20,-405537848),n=a(n,i,u,d,e[t+9],5,568446438),d=a(d,n,i,u,e[t+14],9,-1019803690),u=a(u,d,n,i,e[t+3],14,-187363961),i=a(i,u,d,n,e[t+8],20,1163531501),n=a(n,i,u,d,e[t+13],5,-1444681467),d=a(d,n,i,u,e[t+2],9,-51403784),u=a(u,d,n,i,e[t+7],14,1735328473),i=a(i,u,d,n,e[t+12],20,-1926607734),n=l(n,i,u,d,e[t+5],4,-378558),d=l(d,n,i,u,e[t+8],11,-2022574463),u=l(u,d,n,i,e[t+11],16,1839030562),i=l(i,u,d,n,e[t+14],23,-35309556),n=l(n,i,u,d,e[t+1],4,-1530992060),d=l(d,n,i,u,e[t+4],11,1272893353),u=l(u,d,n,i,e[t+7],16,-155497632),i=l(i,u,d,n,e[t+10],23,-1094730640),n=l(n,i,u,d,e[t+13],4,681279174),d=l(d,n,i,u,e[t],11,-358537222),u=l(u,d,n,i,e[t+3],16,-722521979),i=l(i,u,d,n,e[t+6],23,76029189),n=l(n,i,u,d,e[t+9],4,-640364487),d=l(d,n,i,u,e[t+12],11,-421815835),u=l(u,d,n,i,e[t+15],16,530742520),i=l(i,u,d,n,e[t+2],23,-995338651),n=c(n,i,u,d,e[t],6,-198630844),d=c(d,n,i,u,e[t+7],10,1126891415),u=c(u,d,n,i,e[t+14],15,-1416354905),i=c(i,u,d,n,e[t+5],21,-57434055),n=c(n,i,u,d,e[t+12],6,1700485571),d=c(d,n,i,u,e[t+3],10,-1894986606),u=c(u,d,n,i,e[t+10],15,-1051523),i=c(i,u,d,n,e[t+1],21,-2054922799),n=c(n,i,u,d,e[t+8],6,1873313359),d=c(d,n,i,u,e[t+15],10,-30611744),u=c(u,d,n,i,e[t+6],15,-1560198380),i=c(i,u,d,n,e[t+13],21,1309151649),n=c(n,i,u,d,e[t+4],6,-145523070),d=c(d,n,i,u,e[t+11],10,-1120210379),u=c(u,d,n,i,e[t+2],15,718787259),i=c(i,u,d,n,e[t+9],21,-343485551),n=o(n,r),i=o(i,p),u=o(u,h),d=o(d,m)}return[n,i,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};n.default=u},{}],1052:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="00000000-0000-0000-0000-000000000000"},{}],1053:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./validate.js"))&&r.__esModule?r:{default:r};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};n.default=i},{"./validate.js":1063}],1054:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],1055:[function(e,t,n){"use strict";let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)};const o=new Uint8Array(16)},{}],1056:[function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function o(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s);for(let t=0;t<s;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];a[t]=n}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=o(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let s=n[0],l=n[1],c=n[2],u=n[3],d=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),a=o(s,5)+r(n,l,c,u)+d+t[n]+i[e]>>>0;d=u,u=c,c=o(l,30)>>>0,l=s,s=a}n[0]=n[0]+s>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};n.default=i},{}],1057:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./validate.js"))&&r.__esModule?r:{default:r};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).substr(1));var s=function(e,t=0){const n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n};n.default=s},{"./validate.js":1063}],1058:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./rng.js")),o=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}let s,a,l=0,c=0;var u=function(e,t,n){let i=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||s,p=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==p){const t=e.random||(e.rng||r.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=a=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1;const f=h-l+(m-c)/1e4;if(f<0&&void 0===e.clockseq&&(p=p+1&16383),(f<0||h>l)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,c=m,a=p,h+=122192928e5;const g=(1e4*(268435455&h)+m)%4294967296;u[i++]=g>>>24&255,u[i++]=g>>>16&255,u[i++]=g>>>8&255,u[i++]=255&g;const b=h/4294967296*1e4&268435455;u[i++]=b>>>8&255,u[i++]=255&b,u[i++]=b>>>24&15|16,u[i++]=b>>>16&255,u[i++]=p>>>8|128,u[i++]=255&p;for(let e=0;e<6;++e)u[i+e]=d[e];return t||(0,o.default)(u)};n.default=u},{"./rng.js":1055,"./stringify.js":1057}],1059:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),o=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,o.default);n.default=s},{"./md5.js":1051,"./v35.js":1060}],1060:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function i(e,i,s,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=(0,o.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(i),l.set(e,i.length),l=n(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=l[e];return s}return(0,r.default)(l)}try{i.name=e}catch(e){}return i.DNS=s,i.URL=a,i},n.URL=n.DNS=void 0;var r=i(e("./stringify.js")),o=i(e("./parse.js"));function i(e){return e&&e.__esModule?e:{default:e}}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=a},{"./parse.js":1053,"./stringify.js":1057}],1061:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./rng.js")),o=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){const i=(e=e||{}).random||(e.rng||r.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return(0,o.default)(i)};n.default=s},{"./rng.js":1055,"./stringify.js":1057}],1062:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),o=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,o.default);n.default=s},{"./sha1.js":1056,"./v35.js":1060}],1063:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./regex.js"))&&r.__esModule?r:{default:r};var i=function(e){return"string"==typeof e&&o.default.test(e)};n.default=i},{"./regex.js":1054}],1064:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./validate.js"))&&r.__esModule?r:{default:r};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};n.default=i},{"./validate.js":1063}],1065:[function(e,t,n){var r=arguments[3],o=arguments[4],i=arguments[5],s=JSON.stringify;t.exports=function(e,t){for(var n,a=Object.keys(i),l=0,c=a.length;l<c;l++){var u=a[l],d=i[u].exports;if(d===e||d&&d.default===e){n=u;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};for(l=0,c=a.length;l<c;l++){p[u=a[l]]=u}o[n]=["function(require,module,exports){"+e+"(self); }",p]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[n]=n,o[h]=["function(require,module,exports){var f = require("+s(n)+");(f.default ? f.default : f)(self);}",m];var f={};!function e(t){for(var n in f[t]=!0,o[t][1]){var r=o[t][1][n];f[r]||e(r)}}(h);var g="("+r+")({"+Object.keys(f).map((function(e){return s(e)+":["+o[e][0]+","+s(o[e][1])+"]"})).join(",")+"},{},["+s(h)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return v;var y=b.createObjectURL(v),j=new Worker(y);return j.objectURL=y,j}},{}],1066:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.string.trim.js");var r='\n<div class="animation-modal animation-modal-hidden">\n  <div class="animation-modal-content">\n    <div class="animation-modal-content-inner">\n      <div class="animation-modal-content-inner-letterbox">\n        <div class="animation-modal-content-inner-video-wrapper"></div>\n      </div>\n    </div>\n  </div>\n  <div class="animation-modal-header">\n    <div class="animation-modal-header-section-left">\n      <button id="close" type="button">\n        <span class="animation-modal-button-label">Close</span>\n      </button>\n    </div>\n    <div class="animation-modal-header-section-right">\n    </div>\n  </div>\n</div>\n'.trim();n.default=r},{"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.string.trim.js":929}],1067:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.hiddenClassName=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),d=r(e("@babel/runtime/helpers/defineProperty")),p=r(e("../common")),h=r(e("../preview-animation-player")),m=r(e("./animation-modal.html"));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n.hiddenClassName="animation-modal-hidden";var g=function(e){(0,l.default)(r,e);var t,n=f(r);function r(){var e;return(0,s.default)(this,r),(e=n.call(this,m.default)).closeButton=e.component.querySelector("button#close"),e.modalContent=e.component.querySelector(".animation-modal-content-inner-video-wrapper"),e.modalContentInner=e.component.querySelector(".animation-modal-content-inner"),e}return(0,a.default)(r,[{key:"appendPlayerElement",value:function(){this.player=new h.default({signal:this.abortController.signal}),this.modalContent.append(this.player.component),this.addEventListeners([[document,"keydown",this.onKeydown],[this.closeButton,"click",this.closeModal],[this.modalContentInner,"click",this.onContentClick]])}},{key:"displayModal",value:(t=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.abortController=new AbortController,this.player||this.appendPlayerElement(),this.component.classList.remove("animation-modal-hidden"),e.next=5,this.player.loadPages();case 5:return e.next=7,this.player.play();case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onKeydown",value:function(e){"Escape"===e.code&&this.closeModal()}},{key:"onContentClick",value:function(e){e.target===e.currentTarget&&this.closeModal()}},{key:"afterClose",value:function(){this.removeEventListeners(),this.player.stop(),this.abortController.abort(),this.player=null}},{key:"closeModal",value:function(){this.component.classList.add("animation-modal-hidden"),this.afterClose()}}]),r}(p.default);n.default=g,(0,d.default)(g,"selector",".animation-modal")},{"../common":1070,"../preview-animation-player":1071,"./animation-modal.html":1066,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/regenerator":682,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.reflect.construct.js":908}],1068:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./animation-modal")).default;n.default=o},{"./animation-modal":1067,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1069:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.function.bind.js");var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty"));function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"eventHandlers",[]),this.component=this.createComponent(t)}return(0,s.default)(e,[{key:"createComponent",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}},{key:"addEventListeners",value:function(e){var t,n=this,r=function(e,t,r,o){var i=r.bind(n);n.eventHandlers.push({eventTarget:e,type:t,listener:i}),e.addEventListener(t,i,o)},i=l(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;r.apply(void 0,(0,o.default)(s))}}catch(e){i.e(e)}finally{i.f()}}},{key:"removeEventListeners",value:function(){var e,t=l(this.eventHandlers);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.eventTarget,o=n.type,i=n.listener;r.removeEventListener(o,i)}}catch(e){t.e(e)}finally{t.f()}}}]),e}();n.default=u},{"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.iterator.js":965}],1070:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./common")).default;n.default=o},{"./common":1069,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1071:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var o=r(e("./preview-animation-player"))},{"./preview-animation-player":1076,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1072:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./page-animation-canvas")).default;n.default=o},{"./page-animation-canvas":1074,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1073:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.string.trim.js");var r='\n<div class="animation-canvas"></div>\n'.trim();n.default=r},{"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.string.trim.js":929}],1074:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.timers.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/toConsumableArray")),a=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/possibleConstructorReturn")),d=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("animejs/lib/anime.es.js")),h=e("../../../../assets/js/editor/video"),m=r(e("../../common")),f=e("../../sidebar-animation/timeline"),g=r(e("./page-animation-canvas.html"));function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var j=function(e){(0,c.default)(m,e);var t,n,r,u,d=y(m);function m(e){var t;return(0,a.default)(this,m),(t=d.call(this,g.default)).pageId=e.pageId,t.svgPromise=e.svgPromise,t.duration=e.duration,t.animateElementsTogether=e.animateElementsTogether,t.animation=e.animation,t.elementAnimations=e.elementAnimations,t.videoElements=[],t}return(0,l.default)(m,[{key:"createTimeline",value:function(e,t){var n=this.duration[e],r={animateElementsTogether:this.animateElementsTogether,animation:t,elementAnimations:this.elementAnimations},o="exit"===e?"reverse":"normal";return(0,f.createTimeline)(this.component,r,n,!1,o)}},{key:"getVideos",value:function(){return(0,s.default)(this.component.querySelectorAll(".element.video"))}},{key:"getVideoPlayers",value:function(){return(0,s.default)(this.component.querySelectorAll(".element.video video"))}},{key:"removeUnwantedElements",value:function(e){(0,s.default)(e.querySelectorAll("#canvasBackground, .svgLoader")).forEach((function(e){return e.remove()}))}},{key:"initialiseVideoPlayers",value:function(){this.videoElements=this.getVideos();this.videoElements.forEach((function(e){(0,h.initialiseVideoPlayer)(e,!1)}))}},{key:"applySvgStyle",value:function(e){var t=e.querySelector(".main"),n=t.parentElement,r=n.getAttribute("width"),o=n.getAttribute("height");e.setAttribute("viewBox","0 0 ".concat(r," ").concat(o)),[e,n].forEach((function(e){svgedit.utilities.assignAttributes(e,{height:"100%",width:"100%",x:"0",y:"0"})})),t.style.pointerEvents="none",e.removeAttribute("overflow")}},{key:"createAnimationCanvas",value:(u=(0,i.default)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.svgPromise;case 2:t=e.sent,this.component.append(t),this.removeUnwantedElements(t),this.initialiseVideoPlayers(),this.applySvgStyle(t),n=(0,f.createTransformDefs)(),t.appendChild(n),r=(0,f.getTimelineTargets)(t),(0,f.makeTargetsCompatible)(r);case 11:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"playTransition",value:(r=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.createTimeline(t,this.animation)).play(),e.next=4,n.finished;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"stop",value:function(){var e=(0,f.getTimelineTargets)(this.component);p.default.remove(e),this.removeVideoPlayers(),this.clearSelectedElements()}},{key:"removeVideoPlayers",value:function(){document.querySelectorAll(".video-preview").forEach((function(e){e.remove()}))}},{key:"clearSelectedElements",value:function(){INKIVE.Tool.getInstance().editor.canvas.clearSelection()}},{key:"play",value:(n=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playTransition("entry");case 2:return e.next=4,this.playScene();case 4:if(!this.duration.exit){e.next=7;break}return e.next=7,this.playTransition("exit");case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"playScene",value:(t=(0,i.default)(o.default.mark((function e(){var t,n,r,i,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getVideoPlayers(),n=b(t);try{for(i=function(){var e=r.value;e.currentTime=e.dataset.start||0,e.play(),onended=function(){return e.pause()},e.addEventListener("ended",onended)},n.s();!(r=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}return e.next=5,new Promise((function(e){return setTimeout(e,s.duration.scene)}));case 5:t.forEach((function(e){return e.pause()}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),m}(m.default);n.default=j},{"../../../../assets/js/editor/video":625,"../../common":1070,"../../sidebar-animation/timeline":1088,"./page-animation-canvas.html":1073,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"animejs/lib/anime.es.js":694,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966}],1075:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.string.trim.js");var r='\n<div class="preview-animation-player"></div>\n'.trim();n.default=r},{"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.string.trim.js":929}],1076:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js");var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),d=r(e("../common")),p=r(e("./preview-animation-player.html")),h=r(e("./page-animation-canvas")),m=e("../../helpers/abort-handler"),f=e("../../helpers/fetch-pages");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var b=function(e){(0,l.default)(u,e);var t,n,r,c=g(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.signal;return(0,s.default)(this,u),(e=c.call(this,p.default)).canvases=[],e.signal=n,e.loadPageWithAbortHandler=(0,m.abortHandler)({signal:e.signal},(function(t){return e.loadPage(t)})),e.playCanvasWithAbortHandler=(0,m.abortHandler)({signal:e.signal},(function(e){return e.play()})),e}return(0,a.default)(u,[{key:"loadPage",value:(r=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(t),this.canvases.push(n),e.next=4,n.createAnimationCanvas();case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"attachCanvas",value:function(e,t){t&&this.removeCanvas(t),this.component.appendChild(e.component)}},{key:"removeCanvas",value:function(e){e.stop(),e.component.remove()}},{key:"loadPages",value:(n=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.canvases=[],e.next=4,(0,f.fetchPages)({signal:this.signal});case 4:return(t=e.sent).length,e.next=8,Promise.all(t.map(this.loadPageWithAbortHandler));case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=14;break}throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return n.apply(this,arguments)})},{key:"play",value:(t=(0,i.default)(o.default.mark((function e(){var t,n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=0;case 2:if(!(n<this.canvases.length)){e.next=12;break}return r=this.canvases[n-1],i=this.canvases[n],e.next=7,t;case 7:this.attachCanvas(i,r),t=this.playCanvasWithAbortHandler(i);case 9:n++,e.next=2;break;case 12:return e.next=14,t;case 14:e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=20;break}throw e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(){return t.apply(this,arguments)})},{key:"stop",value:function(){this.canvases.forEach((function(e){return e.stop()})),this.component.remove()}}]),u}(d.default);n.default=b},{"../../helpers/abort-handler":1091,"../../helpers/fetch-pages":1094,"../common":1070,"./page-animation-canvas":1072,"./preview-animation-player.html":1075,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/regenerator":682,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.iterator.js":917,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],1077:[function(e,t,n){t.exports={changeOutputSize:{},changeOutputFormat:{},updateMinimumDuration:{},timelinePlay:{},pageSetProperties:{},applyAnimationAllPages:{},applyDurationAllPages:{},downloadVideo:{},requestPageProperties:{},pageAllPageSetProperties:{}}},{}],1078:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addAnimationEvent=function(e,t){var n=p(e);document.addEventListener(n,(function(e){var n=e.detail;return t(n)}))},n.dispatchAnimationEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p(e),r=new CustomEvent(n,{detail:t});document.dispatchEvent(r)},e("core-js/modules/es.array.concat.js");var o=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/inherits")),s=r(e("@babel/runtime/helpers/possibleConstructorReturn")),a=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/wrapNativeSuper")),c=r(e("./animation-events.json"));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,i.default)(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,o.default)(this,n);for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return(e=t.call.apply(t,[this,r].concat(s))).message='Animation event "'.concat(r,'" is not supported.'),e}return n}((0,l.default)(Error));function p(e){if(!c.default[e])throw new d(e);return"Animation.".concat(e)}},{"./animation-events.json":1077,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/wrapNativeSuper":681,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.reflect.construct.js":908}],1079:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.animationPreviewButtonsStyle=n.animationPreviewButtons=void 0,e("core-js/modules/es.array.map.js");var o,i,s,a=r(e("@babel/runtime/helpers/taggedTemplateLiteral")),l=e("lit-element");n.animationPreviewButtons=function(e,t){return(0,l.html)(o||(o=(0,a.default)(['\n  <div class="animation-preview-buttons">\n    ',"\n  </div>\n"])),["no_animation","bounce_in","swing_in","fade_in","scrapbook_a","scrapbook_b","rotate_in_a","rotate_in_b","zoom_in","zoom_out","light_speed_in","back_in_down","pan","rise","tilt_in","neon","moving_neon","stomp","magic_block"].map((function(n){return(0,l.html)(i||(i=(0,a.default)(['\n        <div\n          animation="','"\n          @click=','\n          class="page-animation-preview animation-'," ",'"\n        >\n          <div class="preview-animation-wrapper">\n            <span>\n              ',"\n            </span>\n          </div>\n        </div>\n      "])),n,e,n,"no_animation"===n?"selected":"",t(n))})))};n.animationPreviewButtonsStyle=function(e){var t=e.highlight,n=(0,l.unsafeCSS)(t);return(0,l.css)(s||(s=(0,a.default)(["\n    .page-animation-preview {\n      border: 1px solid #bfcbda;\n      border-radius: 4px;\n      display: flex;\n      width: 100%;\n      flex-direction: column;\n      align-items: stretch;\n      position: relative;\n      height: 100%;\n      justify-content: center;\n      overflow: hidden;\n      cursor: pointer;\n    }\n\n    .page-animation-preview.selected {\n      border-color: ",";\n      border-width: 2px;\n    }\n\n    .preview-animation-wrapper {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      max-width: 100%;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      transition: opacity 0.15s ease-in-out;\n      padding: 0 8px;\n    }\n\n    .preview-animation-wrapper span {\n      text-transform: capitalize;\n      font-weight: 600;\n      display: flex;\n      will-change: transform;\n      word-wrap: break-word;\n      white-space: normal;\n      line-height: 20px;\n      height: 46px;\n      align-items: center;\n      text-align: center;\n      transition: opacity, transform 0.5s ease-in 0ms;\n    }\n\n    .preview-animation-wrapper section  {\n      display: none;\n    }\n\n    .page-animation-preview[animation='pan']:hover span {\n      animation: pan 1.5s ease-in-out infinite ;\n    }\n\n    .page-animation-preview[animation='rise']:hover span {\n      animation: rise 1.5s ease-in-out infinite;\n    }\n\n    .page-animation-preview[animation='neon']:hover span {\n      animation: neon 1.5s ease-in-out infinite ;\n    }\n\n    .page-animation-preview[animation='moving_neon']:hover > div {\n      animation: moving_neon 1.5s ease-in-out 0.5s infinite ;\n    }\n\n    .page-animation-preview[animation='bounce_in']:hover span {\n      animation: bounce_in 0.8s linear infinite ;\n    }\n\n    .page-animation-preview[animation='fade_in']:hover span {\n      animation: fade_in 1.5s linear infinite ;\n    }\n\n    .page-animation-preview[animation='scrapbook_a']:hover > div  {\n      animation: scrapbook_a 1.5s steps(1) infinite ;\n    }\n\n    .page-animation-preview[animation='scrapbook_b']:hover > div  {\n      animation: scrapbook_b 1.5s steps(1) infinite ;\n    }\n\n    .page-animation-preview[animation='zoom_in']:hover span {\n      animation: zoom_in 0.8s ease-in-out infinite ;\n    }\n    .page-animation-preview[animation='zoom_out']:hover span {\n      animation: zoom_out 0.8s ease-in-out infinite ;\n    }\n\n    .page-animation-preview[animation='swing_in']:hover span {\n      animation: swing_in 0.8s ease-in-out infinite ;\n    }\n\n    .page-animation-preview[animation='rotate_in_a']:hover div {\n      animation: rotate_in_a 1.0s ease-in infinite;\n    }\n    .page-animation-preview[animation='rotate_in_a']:hover div span {\n      animation: rotate_in_a_inner 1.0s ease-in infinite;\n    }\n\n    .page-animation-preview[animation='rotate_in_b']:hover div {\n      animation: rotate_in_b 0.8s ease-in infinite;\n    }\n\n    .page-animation-preview[animation='light_speed_in']:hover span {\n      animation: light_speed_in 1.5s ease-in-out infinite;\n    }\n\n    .page-animation-preview[animation='back_in_down']:hover span {\n      animation: back_in_down 1.5s ease-in-out infinite;\n    }\n\n    .page-animation-preview[animation='tilt_in']:hover span {\n      animation: tilt_in 1.5s ease-out infinite;\n    }\n\n    .page-animation-preview[animation='stomp']:hover span {\n      animation: stomp 1.5s ease-in-out 0.5s infinite ;\n    }\n\n    .page-animation-preview[animation='magic_block']:hover span {\n      z-index: 0;\n      animation: magic_block 2s ease-in-out 0.5s infinite ;\n    }\n\n    .page-animation-preview[animation='magic_block']:hover section {\n      position: absolute;\n      display: flex !important;\n      justify-content: center;\n      align-items: center;\n      background: black;\n      width: 110px;\n      height: 30px;\n      transform: scaleX(0);\n      transform-origin: left;\n      z-index: 5;\n      animation: magic_block_b 2s ease-in-out 0.5s infinite ;\n\n    }\n\n    @keyframes stomp {\n      0% {\n        transform:\n          scale(3)\n          rotateZ(0deg);\n          opacity: 0;\n      }\n      15% {\n        transform:\n          scale(1)\n          rotateZ(5deg);\n          opacity: 1;\n      }\n      30% {\n        transform:\n          scale(1.5)\n          rotateZ(-5deg);\n          opacity: 1;\n      }\n      45% {\n        transform:\n          scale(1)\n          rotateZ(0deg);\n          opacity: 1;\n      }\n      60% {\n        transform:\n          scale(1.3)\n          rotateZ(2deg);\n          opacity: 1;\n      }\n      75% {\n        transform:\n          scale(1)\n          rotateZ(0deg);\n          opacity: 1;\n      }\n      90% {\n        transform:\n          scale(1)\n          rotateZ(0deg);\n          opacity: 1;\n      }\n    }\n\n    @keyframes tilt_in {\n      0% {\n        transform:\n          rotateY(20deg)\n          rotateX(35deg)\n          translateX(300px)\n          translateY(-300px)\n          skewX(-35deg)\n          skewY(10deg);\n        opacity: 0.7;\n      }\n      30% {\n        transform:\n          rotateY(0deg)\n          rotateX(0deg)\n          translateX(0px)\n          translateY(0px)\n          skewX(0deg)\n          skewY(0deg);\n        opacity: 1;\n      }\n    }\n\n    @keyframes magic_block {\n      0% {\n        opacity: 0;\n      }\n      30% {\n        opacity: 0;\n      }\n      40% {\n        opacity: 1;\n      }\n    }\n\n    @keyframes magic_block_b {\n      0% {\n        transform: scaleX(0);\n        transform-origin: left;\n      }\n      20% {\n        transform: scaleX(1);\n        transform-origin: left;\n      }\n      40% {\n        transform: scaleX(1);\n        transform-origin: right;\n      }\n      60% {\n        transform: scaleX(0);\n      }\n    }\n\n    @keyframes back_in_down {\n      0% {\n        transform:\n          translateY(-200px)\n          scale(0.7);\n        opacity: 0.7;\n      }\n      30% {\n        transform:\n          translateY(0)\n          scale(0.7);\n        opacity: 0.7;\n      }\n      50% {\n        transform:\n          scale(1);\n        opacity: 0.7;\n      }\n    }\n\n\n    @keyframes light_speed_in {\n      0% {\n        transform:\n          translateX(200%)\n          skewX(0deg);\n        opacity: 0;\n      }\n      20% {\n        transform:\n          translateX(200%)\n          skewX(0deg);\n        opacity: 0;\n      }\n      40% {\n        transform:\n          translateX(200%)\n          skewX(0deg);\n        opacity: 1;\n      }\n      60% {\n        transform:\n          translateX(0%)\n          skewX(0);\n        opacity: 1;\n      }\n      70% {\n        transform:\n          translateX(-5%)\n          skewX(30deg);\n        opacity: 1;\n      }\n      85% {\n        transform:\n          translateX(0%)\n          skewX(0deg);\n        opacity: 1;\n      }\n    }\n\n    @keyframes light_speed_squeeze {\n      0% {\n        transform:\n          translateX(-500%)\n          scaleY(0.1)\n          scaleX(1.5);\n        opacity: 0;\n      }\n      30% {\n        transform:\n          translateX(0%)\n          scaleY(0.2)\n          scaleX(0.9);\n        opacity: 0;\n      }\n      40% {\n        transform:\n          translateX(-45%)\n          scaleY(0.4)\n          scaleX(0.1);\n        opacity: 1;\n      }\n      45% {\n        transform:\n          translateX(-46%)\n          scaleY(1.1)\n          scaleX(0.05);\n        opacity: 1;\n      }\n      46% {\n        transform:\n          translateX(-45%)\n          scaleY(1.5)\n          scaleX(0.1);\n        opacity: 1;\n      }\n      50% {\n        transform:\n          translateX(-45%)\n          scaleY(1.5)\n          scaleX(0.1);\n        opacity: 1;\n      }\n      60%{\n        transform:\n          translateX(0%)\n          scaleY(1)\n          scaleX(1);\n        opacity: 1;\n      }\n      100%{\n        transform:\n          translateX(0%)\n          scaleY(1)\n          scaleX(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes swing_in\n    {\n      0% {\n        transform: scaleY(0);\n        opacity: 0;\n      }\n      80% {\n        transform: scaleY(1);\n        opacity: 1;\n      }\n      100% {\n        transform: scaleY(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes rotate_in_a\n    {\n      0% {\n        transform:\n          translateX(-200px);\n      }\n      50% {\n        transform:\n          translateX(0px);\n      }\n      100% {\n        transform:\n          translateX(0px);\n      }\n    }\n\n    @keyframes rotate_in_a_inner\n    {\n      0% {\n        transform:\n          rotateZ(-720deg)\n      }\n      50% {\n        transform:\n          rotateZ(0deg)\n      }\n      100% {\n        transform:\n          rotateZ(0deg)\n      }\n    }\n\n    @keyframes rotate_in_b\n    {\n      0% {\n        transform:\n          scale(3)\n          rotateZ(360deg);\n        opacity: 0;\n      }\n      75% {\n        transform:\n          scale(1)\n          rotateZ(0deg);\n        opacity: 1;\n      }\n      100% {\n        transform:\n          scale(1)\n          rotateZ(0deg);\n        opacity: 1;\n      }\n    }\n\n    @keyframes scrapbook_a\n    {\n      0% {\n        opacity: 0.20;\n        transform:\n          translateX(60px)\n          translateY(60px)\n          rotateZ(30deg);\n      }\n\n      10% {\n        opacity: 0.60;\n        transform:\n          translateX(30px)\n          translateY(20px)\n          rotateZ(20deg);\n      }\n\n      25% {\n        opacity: 1;\n        transform:\n          translateX(10px)\n          translateY(10px)\n          rotateZ(10deg);\n      }\n\n      35% {\n        opacity: 1;\n        transform:\n          translateX(0px)\n          translateY(0px)\n          rotateZ(0deg);\n      }\n\n      100% {\n        opacity: 1;\n        transform:\n          translateX(0px)\n          translateY(0px)\n          rotateZ(0deg);\n      }\n    }\n\n    @keyframes scrapbook_b\n    {\n      0% {\n        opacity: 0.20;\n        transform:\n          translateX(-40px)\n          translateY(0px)\n          rotateZ(20deg);\n      }\n\n      10% {\n        opacity: 0.60;\n        transform:\n          translateX(-20px)\n          translateY(0px)\n          rotateZ(10deg);\n      }\n\n      25% {\n        opacity: 1;\n        transform:\n          translateX(0px)\n          translateY(0px)\n          rotateZ(0deg);\n      }\n\n      100% {\n        opacity: 1;\n        transform:\n        translateX(0px)\n        translateY(0px)\n        rotateZ(0deg);\n      }\n    }\n\n    @keyframes bounce_in\n    {\n      0% {\n        transform: scale(0);\n        opacity: 0;\n      }\n      20%  {\n        transform: scale(1.15);\n        opacity: 0.33;\n      }\n      40%  {\n        transform: scale(0.85);\n        opacity: 0.66;\n        }\n      60%  {\n        transform: scale(1.17);\n        opacity: 1;\n        }\n      80%  {\n        transform: scale(0.99);\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes fade_in\n    {\n      0%   {opacity: 0;}\n      100% {opacity: 1;}\n    }\n\n    @keyframes zoom_in\n    {\n      0%  {\n        transform: scale(0);\n        opacity: 0;\n      }\n      100% {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes zoom_out\n    {\n      0%  {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n      100% {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes blockAnimation1 {\n      0% {\n        color: transparent;\n      }\n\n      15% {\n        color: transparent;\n      }\n\n      16% {\n      }\n\n      65% {\n      }\n\n      66% {\n        color: transparent;\n      }\n    }\n\n    @keyframes blockAnimation2 {\n      0% {\n        -webkit-transform: translateX(-110%);\n        transform: translateX(-110%);\n      }\n\n      30% {\n        -webkit-transform: translateX(0);\n        transform: translateX(0);\n      }\n\n      36% {\n        -webkit-transform: translateX(0);\n        transform: translateX(0);\n      }\n\n    }\n\n    @keyframes breatheAnimation {\n      0% {\n        opacity: 0;\n        transform: scale(0.8);\n      }\n\n      33% {\n        opacity: 1;\n      }\n\n      66% {\n        opacity: 1;\n      }\n    }\n\n    @keyframes fadeAnimation {\n      0% {\n        opacity: 0;\n      }\n\n      33% {\n        opacity: 1;\n      }\n\n      66% {\n        opacity: 1;\n      }\n    }\n\n    @keyframes pan {\n      0% {\n        opacity: 0;\n        transform: translateX(-50%);\n      }\n\n      33% {\n        opacity: 1;\n        transform: translateX(0);\n      }\n\n      66% {\n        opacity: 1;\n        transform: translateX(0);\n      }\n    }\n\n    @keyframes rise {\n      0% {\n        opacity: 0;\n        transform: translateY(50%);\n      }\n\n      33% {\n        opacity: 1;\n        transform: translateY(0);\n      }\n\n      66% {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    @keyframes tumbleAnimation {\n      0% {\n        opacity: 0;\n        transform: translateX(-100%) rotate(-120deg);\n      }\n\n      33% {\n        opacity: 1;\n        transform: translateX(0);\n      }\n\n      66% {\n        opacity: 1;\n        transform: translateX(0);\n      }\n    }\n\n    @keyframes driftAnimation {\n      0% {\n        opacity: 1;\n        transform: translateX(0);\n      }\n\n      88% {\n        opacity: 1;\n        transform: translateX(100%);\n      }\n\n      89% {\n        opacity: 0;\n        transform: translateX(100%);\n      }\n\n      90% {\n        opacity: 0;\n        transform: translateX(0);\n      }\n    }\n\n    @keyframes stompAnimation {\n      0% {\n        opacity: 0;\n        transform: scale(4);\n      }\n\n      25% {\n        opacity: 1;\n        transform: scale(1);\n      }\n\n      75% {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n\n    @keyframes tectonicAnimation1 {\n      0% {\n        opacity: 0;\n        transform: translateX(-45%);\n      }\n\n      33% {\n        opacity: 1;\n        transform: translateX(-30%);\n      }\n\n      66% {\n        opacity: 1;\n        transform: translateX(-15%);\n      }\n\n      95% {\n        opacity: 0;\n        transform: translateX(0);\n      }\n    }\n\n    @keyframes tectonicAnimation2 {\n      0% {\n        opacity: 0;\n        transform: translateX(45%);\n      }\n\n      33% {\n        opacity: 1;\n        transform: translateX(30%);\n      }\n\n      66% {\n        opacity: 1;\n        transform: translateX(15%);\n      }\n\n      95% {\n        opacity: 0;\n        transform: translateX(0);\n      }\n    }\n\n    @keyframes baselineAnimation {\n      0% {\n        transform: translateY(100%);\n      }\n\n      33% {\n        transform: translateY(0);\n      }\n\n      80% {\n        transform: translateY(0);\n      }\n    }\n\n    @keyframes popAnimation {\n      0% {\n        transform: scale(1);\n      }\n\n      18% {\n        transform: scale(1);\n      }\n\n      26% {\n        transform: scale(1.01);\n      }\n\n      28% {\n        transform: scale(1.01);\n      }\n\n      40% {\n        transform: scale(0.98);\n      }\n\n      42% {\n        transform: scale(0.98);\n      }\n\n      56% {\n        transform: scale(1.05);\n      }\n\n      58% {\n        transform: scale(1.04);\n      }\n\n      72% {\n        transform: scale(0.87);\n      }\n\n      86% {\n        transform: scale(1.37);\n      }\n    }\n\n    @keyframes neon {\n      0% {\n        opacity: 1;\n      }\n\n      10% {\n        opacity: 0;\n      }\n\n      15% {\n        opacity: 0;\n      }\n\n      16% {\n        opacity: 1;\n      }\n\n      25% {\n        opacity: 1;\n      }\n\n      26% {\n        opacity: 0;\n      }\n\n      35% {\n        opacity: 0;\n      }\n\n      55% {\n        opacity: 0;\n      }\n\n      75% {\n        opacity: 1;\n      }\n    }\n\n    @keyframes moving_neon {\n      0% {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-50%);\n      }\n\n      10% {\n        opacity: 0;\n        transform: scaleY(0.5);\n      }\n\n      15% {\n        opacity: 1;\n        transform: scaleY(2);\n      }\n\n      16% {\n        opacity: 0;\n      }\n\n      25% {\n        opacity: 1;\n        transform: translateX(-50%) translateY(50%) scaleY(0.5%);\n      }\n\n      26% {\n        opacity: 1;\n      }\n\n      35% {\n        opacity: 1;\n        transform: scaleY(1.5);\n      }\n\n      55% {\n        opacity: 1;\n        transform: scaleY(1) translateX(200%) translateY(-25%);\n      }\n\n      60% {\n        opacity: 1;\n        transform: scaleY(6) scaleX(6) translateX(-50%) translateY(30%);\n      }\n\n      75% {\n        opacity: 1;\n        transform: scaleY(0.5) scaleX(0.3) translateX(-50%) translateY(-30%);\n      }\n      80% {\n        opacity: 1;\n        transform: scaleY(1) scaleX(1) translateX(0) translateY(0);\n      }\n    }\n\n\n    @keyframes scrapbookAnimation {\n      0% {\n        opacity: 1;\n        transform: rotate(5deg) translateX(100%) translateY(0);\n      }\n\n      20% {\n        opacity: 1;\n        transform: rotate(-4.5deg) translateX(46%) translateY(50%);\n      }\n\n      40% {\n        opacity: 1;\n        transform: rotate(3.5deg) translateX(29%) translateY(0);\n      }\n\n      60% {\n        opacity: 1;\n        transform: rotate(0) translateX(0) translateY(0);\n      }\n\n      80% {\n        opacity: 1;\n      }\n    }\n  "])),n)}},{"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/taggedTemplateLiteral":676,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-property.js":895,"lit-element":1030}],1080:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getAnimationProps=n.animations=void 0;var o=r(e("@babel/runtime/helpers/toConsumableArray")),i=r(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.reverse.js");var s=r(e("animejs/lib/anime.es.js")),a=e("../../helpers");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={loop:!1,easing:"linear"},d={};n.animations=d;n.getAnimationProps=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=d)[e].apply(t,r)};var p=function(e){return+e.dataset.opacity},h=function(e,t,n){if(n.keyframes=n.keyframes.map((function(t){return c(c({},t),{},{duration:t.duration*e})})),"reverse"===t){var r=(0,o.default)(n.keyframes).reverse();n.keyframes=r.map((function(e,t){return c(c({},e),{},{duration:r[r.length-1-t].duration})}))}return c(c({},u),n)};n.animations=d={no_animation:function(e,t,n){return h(t,n,{targets:e,keyframes:[{duration:0,opacity:p},{duration:1,opacity:p}]})},fade_in:function(e,t,n){return h(t,n,{targets:e,keyframes:[{duration:0,opacity:0},{duration:1,opacity:p}]})},rotate_in_a:function(e,t,n){return h(t,n,{easing:"easeOutCubic",targets:e,keyframes:[{duration:0,opacity:0,translateX:"-150%",rotateZ:-720},{duration:1,opacity:p,translateX:0,rotateZ:0}]})},rotate_in_b:function(e,t,n){return h(t,n,{easing:"easeOutCubic",targets:e,keyframes:[{duration:0,opacity:0,scale:3,rotateZ:720},{duration:1,opacity:p,scale:1,rotateZ:0}]})},swing_in:function(e,t,n){return h(t,n,{easing:"easeOutCubic",targets:e,keyframes:[{duration:0,opacity:0,rotateX:-100},{duration:1,opacity:p,rotateX:0}]})},bounce_in:function(e,t,n){return h(t,n,{targets:e,keyframes:[{duration:0,scale:0},{duration:.2,scale:1.3},{duration:.2,scale:.8},{duration:.2,scale:1.1},{duration:.2,scale:.9},{duration:.2,scale:1}]})},scrapbook_a:function(e,t,n){return h(t,n,{easing:"steps(1)",targets:e,keyframes:[{duration:0,opacity:0,translateX:0,rotateZ:-20},{duration:.3,translateY:"200%",rotateZ:20,opacity:p,translateX:"-75%"},{duration:.2,translateY:"150%",translateX:"75%",rotateZ:-50},{duration:.2,translateY:"100%",translateX:"-50%",rotateZ:30},{duration:.1,translateY:"50%",translateX:"50%",rotateZ:-5},{duration:.1,translateY:"50%",translateX:"-25%",rotateZ:15},{duration:.1,translateY:"0%",translateX:0,rotateZ:0}]})},scrapbook_b:function(e,t,n){return h(t,n,{easing:"steps(2)",targets:e,keyframes:[{duration:0,opacity:0,translateX:"-300%",rotateZ:35},{duration:.5,opacity:p,translateX:"50%",rotateZ:-65},{duration:.5,translateX:"0%",rotateZ:0}]})},zoom_in:function(e,t,n){return h(t,n,{easing:"easeOutQuint",targets:e,keyframes:[{duration:0,opacity:0,scale:0},{duration:1,opacity:p,scale:1}]})},zoom_out:function(e,t,n){return h(t,n,{easing:"easeOutQuint",targets:e,keyframes:[{duration:0,opacity:0,scale:2},{duration:1,opacity:p,scale:1}]})},light_speed_in:function(e,t,n){return h(t,n,{easing:"easeInOutQuart",targets:e,keyframes:[{duration:0,skewX:0,opacity:0,translateX:"150%"},{duration:.1,skewX:-100,opacity:0,translateX:"150%"},{duration:.2,skewX:-10,opacity:p,translateX:"10%"},{duration:.2,skewX:10,translateX:"-10%"},{duration:.1,skewX:-5,translateX:"5%"},{duration:.1,skewX:0,translateX:"0%"},{duration:.1,skewX:0,translateX:"0%"},{duration:.2,skewX:0,translateX:"0%"}]})},back_in_down:function(e,t,n){return h(t,n,{easing:"easeOutElastic",targets:e,keyframes:[{duration:0,scale:.7,opacity:0,translateY:-1200},{duration:.1,scale:.7,opacity:p,translateY:"-100%"},{duration:.4,scale:.7,opacity:p,translateY:"0%"},{duration:.5,scale:1,opacity:p,translateY:"0%"}]})},rise:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0,translateY:"100%"},{duration:1,opacity:p,translateY:"0%"}]})},pan:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0,translateX:"-50%"},{duration:1,opacity:p,translateX:"0%"}]})},tilt_in:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0,rotateY:20,rotateX:35,skewX:-35,skewY:10,translateX:300,translateY:-300},{duration:1,opacity:p,rotateY:0,rotateX:0,skewX:0,skewY:0,translateX:0,translateY:0}]})},stomp:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,scale:3,opacity:0},{duration:.1,scale:1},{duration:.1,scale:1.5,rotateZ:-5,opacity:p},{duration:.1,scale:1},{duration:.1,scale:1.3,rotateZ:2},{duration:.1,scale:1},{duration:.1,scale:1.1,rotateZ:0},{duration:.4,scale:1}]})},magic_block:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0},{duration:.6,opacity:0},{duration:.4,opacity:p}],begin:function(r){var o=function(e){var t=(e=e.querySelector(".text")||e).color,n=e.querySelector(".text"),r=e.querySelector("tspan[fill]");t=n?n.getAttribute("fill"):r?r.getAttribute("fill"):e.getAttribute("fill");var o=(0,a.getBBox)(e),i=document.createElementNS(window.NAMESPACE_URIS.SVG,"rect");return i.setAttribute("x",o.x),i.setAttribute("y",o.y),i.setAttribute("width",o.width),i.setAttribute("height",o.height),i.setAttribute("fill",t),i.setAttribute("opacity","1"),i.setAttribute("fill-opacity","1"),i.setAttribute("style","transform-origin: left 0px 0px; transform: scaleX(0)"),i}(e[0]);(r&&r.appendChild?r:e[0].parentElement).appendChild(o);var i={easing:"easeInOutCirc",targets:[o],duration:t,keyframes:[{duration:.2,scaleX:0},{duration:.4,scaleX:1},{duration:.4,transformOrigin:"right 0px 0px",scaleX:0}],extraAnimation:!0};return(0,s.default)(c(c({},i),{},{autoplay:!0})),h(t,n,i)}})},neon:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0},{duration:.1,opacity:0},{duration:.05,opacity:p},{duration:.1,opacity:0},{duration:.05,opacity:p},{duration:.1,opacity:p},{duration:.2,opacity:0},{duration:.03,opacity:p},{duration:.03,opacity:0},{duration:.03,opacity:0},{duration:.01,opacity:p},{duration:.2,opacity:0},{duration:.1,opacity:p}]})},moving_neon:function(e,t,n){return h(t,n,{easing:"easeOutQuad",targets:e,keyframes:[{duration:0,opacity:0,translateX:"-50%",translateY:"-50%"},{duration:.1,scaleY:"50%",opacity:0},{duration:.05,scaleY:"200%",opacity:p},{duration:.1,opacity:0},{duration:.05,scaleY:"100%",opacity:p,translateX:"-50%",translateY:"50%"},{duration:.1,opacity:p},{duration:.2,opacity:0},{duration:.03,scaleY:"150%",opacity:p},{duration:.03,scaleY:"100%",opacity:0,translateX:"200%",translateY:"-25%"},{duration:.03,opacity:0},{duration:.01,scaleY:"600%",scaleX:"600%",opacity:p,translateX:"-50%",translateY:"30%"},{duration:.2,scaleY:"50%",scaleX:"30%",opacity:0,translateX:"50%",translateY:"-30%"},{duration:.1,scaleY:"100%",scaleX:"100%",opacity:p,translateX:"0%",translateY:"0%"}]})}}},{"../../helpers":1098,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"animejs/lib/anime.es.js":694,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964}],1081:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.defaultInOutDuration=n.defaultPageDuration=void 0;n.defaultPageDuration=3e3;n.defaultInOutDuration=1e3},{"core-js/modules/es.object.define-property.js":895}],1082:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function t(t){var o=t.data,i=o.ffmpegArgs,s=o.baseURI,a=o.log,l=o.filenames,c=o.files;e.MEMFS=l.map((function(e,t){return{name:e,data:c[t]}})),new r.FFmpeg({baseURI:new URL("/404",s).href,log:a,progress:n}).run(e.MEMFS,i).then((function(t){e.postMessage({type:"result",file:t})}))}function n(t){e.postMessage({type:"progress",ratio:t})}e.addEventListener("message",t),e.addEventListener("destroy",(function n(){delete e.MEMFS,e.removeEventListener("message",t),e.removeEventListener("destroy",n)}))},n.TYPE_RESULT=n.TYPE_PROGRESS=void 0,e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js");var r=e("./ffmpeg");n.TYPE_PROGRESS="progress";n.TYPE_RESULT="result"},{"./ffmpeg":1083,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968}],1083:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.FFmpeg=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js");var i=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass"));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=e("@ffmpeg/ffmpeg").createFFmpeg,h={mainName:"main",corePath:"https://static.desygner.com/assets/prebuilt/ffmpeg/ffmpeg-core.js"},m=function(){function e(t){var n=t.log,r=t.progress;(0,l.default)(this,e),this.ffmpeg=p(d(d({},h),{},{log:n})),this.ffmpeg.setProgress((function(e){var t=e.ratio;return r(t)})),this.log=n}var t;return(0,c.default)(e,[{key:"run",value:(t=(0,s.default)(o.default.mark((function e(t,n){var r,s,a,l,c=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ffmpeg.isLoaded()){e.next=3;break}return e.next=3,this.ffmpeg.load();case 3:return t.forEach((function(e){var t=e.name,n=e.data;c.log&&console.log(t),c.ffmpeg.FS("writeFile",t,new Uint8Array(n))})),e.next=6,(r=this.ffmpeg).run.apply(r,(0,i.default)(n));case 6:return s=this.ffmpeg.FS("readdir","/"),this.log&&console.log(s),a=n[n.length-1],l=a.includes(".")&&s.includes(a)?this.ffmpeg.FS("readFile",a).buffer:null,e.abrupt("return",{name:a,data:l});case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();n.FFmpeg=m},{"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"@ffmpeg/ffmpeg":690,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.symbol.js":932,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-array.js":958,"core-js/modules/web.dom-collections.for-each.js":964}],1084:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SidebarAnimationController",{enumerable:!0,get:function(){return o.default}});var o=r(e("./sidebarAnimationController"))},{"./sidebarAnimationController":1086,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1085:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/defineProperty")),a=r(e("@babel/runtime/helpers/taggedTemplateLiteral"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.index-of.js"),e("core-js/modules/es.array.find.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.every.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.parse-float.js"),e("core-js/modules/web.timers.js");var l,c,u,d,p=r(e("@babel/runtime/helpers/toConsumableArray")),h=r(e("@babel/runtime/helpers/classCallCheck")),m=r(e("@babel/runtime/helpers/createClass")),f=r(e("@babel/runtime/helpers/inherits")),g=r(e("@babel/runtime/helpers/possibleConstructorReturn")),b=r(e("@babel/runtime/helpers/getPrototypeOf")),v=e("lit-element"),y=r(e("animejs/lib/anime.es.js")),j=e("./animationPreviewButtons"),_=r(e("./styles")),w=e("./constants"),I=e("./timeline");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,b.default)(e);if(t){var o=(0,b.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,g.default)(this,n)}}var C=function(e){(0,f.default)(s,e);var t,n,r=k(s);function s(){var e;return(0,h.default)(this,s),(e=r.call(this)).tabs=[{t:"page_animations_title",k:"page-animations"},{t:"element_animations_title",k:"element-animations"}],e.tab="page-animations",e.pages={},e.animateElementsTogetherInputValue=!1,e.applyAnimationAllPagesInputValue=!1,e.applyDurationAllPagesInputValue=!1,e.pageDurationInputValue=w.defaultPageDuration/1e3,e.inOutDurationInputValue=w.defaultInOutDuration/1e3,document.addEventListener("mousedown",(function(t){var n=e.shadowRoot.querySelectorAll("input");(0,p.default)(n).includes(t.target)||n.forEach((function(e){return e.blur()}))})),e}return(0,m.default)(s,[{key:"_tabContentPageAnimations",get:function(){return(0,v.html)(l||(l=(0,a.default)(['\n      <div id="tab-content-page-animations">\n        ',"\n      </div>\n    "])),(0,j.animationPreviewButtons)(this._selectAnimation(),this.translateKey))}},{key:"_tabContentElementAnimations",get:function(){var e=this;return(0,v.html)(c||(c=(0,a.default)(['\n      <div id="tab-content-element-animations">\n        <div class="no-element-selected">','</div>\n        <div class="revert-to-page-animation">\n          <button type="button" @click=','>\n            <div>\n              <span class="icon">\n                <svg><path fill-rule="evenodd" clip-rule="evenodd" d="M3 7.25C3.41421 7.25 3.75 7.58579 3.75 8V12.8801C4.25733 12.3015 4.8894 11.6273 5.61326 10.9517C7.50321 9.18775 10.1902 7.25 13 7.25C16.8065 7.25 19.0231 9.17679 20.2559 11.0944C20.8647 12.0414 21.2337 12.9828 21.4508 13.6845C21.5598 14.0366 21.6317 14.3318 21.6767 14.5421C21.6993 14.6473 21.7152 14.7315 21.7257 14.7912C21.7309 14.8211 21.7349 14.8449 21.7376 14.8622L21.7409 14.8831L21.7419 14.8898L21.7422 14.8922L21.7423 14.8931C21.7424 14.8936 21.7425 14.8939 21 15L21.7425 14.8939C21.801 15.304 21.5161 15.6839 21.1061 15.7425C20.6965 15.801 20.317 15.5168 20.2577 15.1075C20.2577 15.1075 20.2577 15.1075 20.2577 15.1074C20.2577 15.1072 20.2577 15.1069 20.2576 15.1067L20.2575 15.1061L20.2562 15.0977C20.2548 15.0884 20.2522 15.0729 20.2484 15.0515C20.2409 15.0087 20.2285 14.9426 20.21 14.8564C20.173 14.6838 20.1121 14.4322 20.0179 14.128C19.8288 13.5172 19.5103 12.7086 18.9941 11.9056C17.9769 10.3232 16.1935 8.75 13 8.75C10.8098 8.75 8.49679 10.3122 6.63674 12.0483C5.79135 12.8373 5.07487 13.6286 4.54997 14.25H10C10.4142 14.25 10.75 14.5858 10.75 15C10.75 15.4142 10.4142 15.75 10 15.75H3C2.58579 15.75 2.25 15.4142 2.25 15V8C2.25 7.58579 2.58579 7.25 3 7.25Z" /></svg>\n              </span>\n              <span class="text">','</span>\n            </div>\n          </button>\n        </div>\n        <div class="animation-preview-buttons-outer hide">',"</div>\n      </div>\n    "])),this.translateKey("no_element_selected"),(function(t){return e.revertToPageAnimation(t)}),this.translateKey("revert_to_page_animation"),(0,j.animationPreviewButtons)(this._selectElementAnimations(),this.translateKey))}},{key:"applyDurationAllPagesInput",get:function(){return this.shadowRoot.querySelector('input[name="apply-duration-all-pages"]')}},{key:"applyAnimationAllPagesInput",get:function(){return this.shadowRoot.querySelector('input[name="apply-animation-all-pages"]')}},{key:"animateElementsTogetherInput",get:function(){return this.shadowRoot.querySelector('input[name="animateElementsTogether"]')}},{key:"pageProperties",value:function(e){return!this.pages[e]&&e&&(this.pages[e]={}),this.pages[e]||{}}},{key:"updated",value:function(e){if(e.get("tab")!==this.tab){(0,p.default)(this.shadowRoot.querySelectorAll(".tabs-content > div")).forEach((function(e){e.classList.add("hide"),e.classList.remove("animate-left")}));var t=this.shadowRoot.querySelector("#tab-content-".concat(this.tab));if(e.get("tab")){var n=(0,p.default)(this.shadowRoot.querySelector(".tabs-content").children),r=this.shadowRoot.querySelector("#tab-content-".concat(e.get("tab")));n.indexOf(t)<n.indexOf(r)&&r.classList.add("animate-left")}t.classList.remove("hide")}"page-animations"===this.tab?this.renderAnimation():"element-animations"===this.tab&&(this.toggleAnimationButtons(this.getSelectedElements()),this.renderElementAnimations())}},{key:"revertToPageAnimation",value:function(){var e=this.currPage(),t=E({},this.pageProperties(e).elementAnimations);this.getSelectedElements().forEach((function(e){e&&e.id&&(t[e.id]=null)})),this.pageSetProp(e,"elementAnimations",t)}},{key:"toggleAnimationButtons",value:function(e){var t=this.shadowRoot.getElementById("tab-content-element-animations"),n=t.querySelector(".no-element-selected"),r=t.querySelector(".revert-to-page-animation"),o=t.querySelector(".animation-preview-buttons-outer"),i=e.length,s=this.pageProperties(this.currPage()).elementAnimations||{},a=e.filter(Boolean).find((function(e){return s[e.id]}));n.classList.toggle("hide",i),r.classList.toggle("hide",!i||!a),o.classList.toggle("hide",!i)}},{key:"_animateElementsTogetherChanged",value:function(e){this.pageSetProp(this.currPage(),e.target.name,e.target.checked)}},{key:"render",value:function(){var e=this;return(0,v.html)(u||(u=(0,a.default)(["\n      <style>",'</style>\n      <div class="sidebar-animation" style="','">\n        <h1>\n          ','\n        </h1>\n        <span class="beta-text">beta</span>\n        <div class="duration">\n          <h2>\n            ','\n          </h2>\n          <div class="checkbox">\n            <label>\n              <input\n                name="apply-duration-all-pages"\n                type="checkbox"\n                .checked=',"\n                @change=","\n              />\n              ",'\n            </label>\n          </div>\n          <div class="flex-form">\n            <label for="pageDuration">\n              ',":\n            </label>\n            <input\n              ?required=",'\n              min="1"\n              name="pageDuration"\n              type="number"\n              value="','"\n              @change="','"\n              @keyup="','"\n            />\n            <span>sec</span>\n            <label for="inOutDuration">\n              ',":\n            </label>\n            <input\n              ?required=",'\n              min="1"\n              step="0.5"\n              name="inOutDuration"\n              type="number"\n              value="','"\n              @change="','"\n              @keyup="','"\n            />\n            <span>sec</span>\n          </div>\n        </div>\n        <div class="checkbox">\n          <label>\n            <input\n              name="apply-animation-all-pages"\n              type="checkbox"\n              .checked=',"\n              @change=","\n            />\n            ",'\n          </label>\n        </div>\n        <div class="checkbox">\n          <label>\n            <input\n              name="animateElementsTogether"\n              type="checkbox"\n              .checked=',"\n              @change=",'"\n            />\n            ','\n          </label>\n        </div>\n        <div class="tabs-container">\n          <nav class="tab-headers">\n            ','\n          </nav>\n          <div class="tabs-content">\n            ',"\n            ","\n          </div>\n        </div>\n      </div>\n    "])),(0,_.default)(this.colors()),INKIVE.C.IS_MOBILE?"visibility: hidden;":"",this.translateKey("page_animations_title"),this.translateKey("duration_title"),this.applyDurationAllPagesInputValue,(function(t){return e.onApplyDurationAllPages(t.target.checked)}),this.translateKey("apply_duration_to_all_pages"),this.translateKey("page_duration_title"),!0,this.pageDurationInputValue,this._durationChanged,this._forcePositive,this.translateKey("in_out_duration"),!0,this.inOutDurationInputValue,this._durationChanged,this._forcePositive,this.applyAnimationAllPagesInputValue,(function(t){return e.onApplyAnimationAllPages(t.target.checked)}),this.translateKey("apply_to_all_pages"),this.animateElementsTogetherInputValue,this._animateElementsTogetherChanged,this.translateKey("animate_elements_together"),this.tabs.map((function(t,n){var r=t.t,o=t.k;return(0,v.html)(d||(d=(0,a.default)(['<span class="tab-header ','" @click="','">',"</span>"])),n?"":"selected",e.changeTab(o),e.translateKey(r))})),this._tabContentPageAnimations,this._tabContentElementAnimations)}},{key:"onElementSelectionChanged",value:function(e){"element-animations"===this.tab&&(this.toggleAnimationButtons(e),this.renderElementAnimations())}},{key:"changeTab",value:function(e){var t=this;return function(n){t.tab=e,(0,p.default)(t.shadowRoot.querySelectorAll(".tab-header.selected")).forEach((function(e){return e.classList.remove("selected")})),n.currentTarget.className+=" selected"}}},{key:"renderAnimation",value:function(){var e=this.shadowRoot.querySelector("#tab-content-page-animations"),t=(0,p.default)(e.querySelectorAll(".page-animation-preview")),n=this.pageProperties(this.currPage()).animation,r=e.querySelector('.page-animation-preview[animation="'.concat(n||"no_animation",'"]'));t.forEach((function(e){return e.classList.remove("selected")})),r.classList.add("selected")}},{key:"renderElementAnimations",value:function(){var e=this.pageProperties(this.currPage()).elementAnimations||{},t=this.getSelectedElements().filter((function(e){return e&&e.id})),n=t.length&&t.every((function(n){return e[n.id]===e[t[0].id]}))?e[t[0].id]:null,r=this.shadowRoot.querySelector("#tab-content-element-animations"),o=(0,p.default)(r.querySelectorAll(".page-animation-preview")),i=r.querySelector('.page-animation-preview[animation="'.concat(n,'"]'));o.forEach((function(e){return e.classList.remove("selected")})),i&&i.classList.add("selected")}},{key:"renderAnimateElementsTogetherInput",value:function(){if(this.animateElementsTogetherInput){var e=this.pageProperties(this.currPage()).animateElementsTogether;this.animateElementsTogetherInputValue=e,this.animateElementsTogetherInput.checked=e}}},{key:"renderInOutDuration",value:function(){var e=this.shadowRoot.querySelector('input[name="inOutDuration"]');if(e){var t=this.pageProperties(this.currPage()).inOutDuration;e.value=(isNaN(t)?w.defaultInOutDuration:t)/1e3}}},{key:"renderDuration",value:function(){var e=this.shadowRoot.querySelector('input[name="pageDuration"]');if(e){var t=this.pageProperties(this.currPage()).pageDuration;e.value=(isNaN(t)?w.defaultPageDuration:t)/1e3}}},{key:"_createAnimationCanvas",value:(n=(0,i.default)(o.default.mark((function e(){var t,n,r,i,s,a=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#canvasBackground").getBoundingClientRect(),(n=document.createElement("div")).className="animation-canvas-wrapper",n.style.cssText="\n      width: ".concat(t.width,"px;\n      height: ").concat(t.height,"px;\n      top: ").concat(t.top,"px;\n      left: ").concat(t.left,"px;\n      position: fixed;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      pointer-events: none;\n      background: #fff;\n      z-index: ").concat(INKIVE.C.IS_MOBILE?"1":"-1",";\n      opacity: 0;\n    "),(r=document.querySelector("#svgcontent").cloneNode(!0)).querySelector(".main").style.pointerEvents="none",(i=this.scalePage(r)).style.cssText="\n      width: ".concat(t.width,"px;\n      height: ").concat(t.height,"px;\n      display: block;\n      overflow: hidden;\n    "),i.setAttributeNS(null,"width",t.width),i.setAttributeNS(null,"height",t.height),i.removeAttributeNS(null,"overflow"),s=(0,I.createTransformDefs)(),i.appendChild(s),n.appendChild(i),this.shadowRoot.appendChild(n),n.addEventListener("click",(function(){return a.removeOldAnimationCanvas()})),e.next=18,Promise.all((0,p.default)(n.querySelectorAll("image")).map((function(e){return new Promise((function(t){var n=new Image;n.onload=t,n.onerror=t,n.src=e.getAttribute("xlink:href")}))})));case 18:return n.style.opacity=1,e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeOldAnimationCanvas",value:function(){var e=this.shadowRoot.querySelector(".animation-canvas-wrapper");if(e){var t=(0,I.getTimelineTargets)(e);y.default.remove(t),e.remove()}}},{key:"playCurrentAnimationOnCurrentPage",value:(t=(0,i.default)(o.default.mark((function e(t){var n,r,i,s,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.pageProperties(this.currPage()),r=n.inOutDuration||w.defaultInOutDuration,this.removeOldAnimationCanvas(),e.next=5,this._createAnimationCanvas();case 5:return i=e.sent,s=(0,I.getTimelineTargets)(i),(0,I.makeTargetsCompatible)(s),this.timeline=(0,I.createTimeline)(i,n,r,t),this.timeline.play(),a=new Date,e.next=13,this.timeline.finished;case 13:INKIVE.C.DEBUG&&console.log("Animation duration",(new Date).getTime()-a.getTime()),this.removeOldAnimationCanvas();case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateMinimumDuration",value:function(){var e=document.querySelector("#svgcontent"),t=e?(0,p.default)(e.querySelectorAll('.element.video:not([data-video-type="youtube"])')):[],n=t.length?Math.ceil(Math.max.apply(Math,t.map((function(e){return parseInt(e.dataset.duration)})))):0,r=this.pageProperties(this.currPage()).minimumDuration;void 0===r&&0===n||void 0!==r&&r===n||(this.pageSetProp(this.currPage(),"minimumDuration",n),this.pageProperties(this.currPage()).pageDuration<n&&this.warnPageDurationLessThanVideoDuration())}},{key:"pageSetProp",value:function(e,t,n,r){this.pages[e]||(this.pages[e]={}),this.pages[e][t]=n,"animation"===t?this.renderAnimation():"elementAnimations"===t?(this.renderElementAnimations(),this.toggleAnimationButtons(this.getSelectedElements())):"pageDuration"===t?this.renderDuration():"inOutDuration"===t?this.renderInOutDuration():"animateElementsTogether"===t&&(this.renderAnimateElementsTogetherInput(),r||this.playCurrentAnimationOnCurrentPage()),("animation"===t&&this.applyAnimationAllPagesInputValue||["pageDuration","inOutDuration","minimumDuration"].includes(t)&&this.applyDurationAllPagesInputValue)&&this._applyAllPages(t,!0),r||this.postAnimationAPI(),this.broadcastDurationChanged(e)}},{key:"onApplyAnimationAllPages",value:function(e){this.applyDurationAllPagesInputValue=e,this._applyAllPages("animation")}},{key:"onApplyDurationAllPages",value:function(e){this.applyDurationAllPagesInputValue=e,this._applyAllPages("pageDuration"),this._applyAllPages("inOutDuration")}},{key:"_applyAllPages",value:function(e,t){for(var n=this.currPage(),r=this.pageProperties(n)[e],o=0;o<this.pagesLength();o++){var i=this.getPageId(o);i!==n&&(this.pageProperties(i)[e]=r,this.broadcastDurationChanged(i))}t||this.postAnimationAPI()}},{key:"_selectAnimation",value:function(){var e=this;return function(t){var n=t.currentTarget.getAttribute("animation");e.pageSetProp(e.currPage(),"animation",n),e.playCurrentAnimationOnCurrentPage()}}},{key:"_selectElementAnimations",value:function(){var e=this;return function(t){var n=t.currentTarget.getAttribute("animation"),r=e.currPage(),o=E({},e.pageProperties(r).elementAnimations);e.getSelectedElements().forEach((function(e){e&&e.id&&(o[e.id]=n)})),e.pageSetProp(r,"elementAnimations",o),e.playCurrentAnimationOnCurrentPage(!0)}}},{key:"_durationChanged",value:function(e){var t=this.currPage(),n=1e3*parseFloat(e.target.value);(this.pageSetProp(t,e.target.name,n),"pageDuration"===e.target.name)&&(n<this.pageProperties(t).minimumDuration&&this.warnPageDurationLessThanVideoDuration())}},{key:"warnPageDurationLessThanVideoDuration",value:function(){this._addInputWarning("pageDuration",this.translateKey("warn_page_duration_less_than_video_duration"))}},{key:"_addInputWarning",value:function(e,t){if(!this.shadowRoot.querySelector('input[name="'.concat(e,'"] + span + span.warning'))){var n=document.createElement("span");n.classList.add("warning"),n.innerHTML=t;var r=this.shadowRoot.querySelector('input[name="'.concat(e,'"] + span'));r&&r.insertAdjacentElement("afterEnd",n),setTimeout((function(){return n.remove()}),2e3)}}},{key:"_timelinePause",value:function(){this.timeline&&this.timeline.pause()}},{key:"_timelineRestart",value:function(){this.timeline&&this.timeline.restart()}},{key:"_timelineSeek",value:function(e){this.timeline&&this.timeline.seek(this.timeline.duration*(e.currentTarget.value/100))}},{key:"_forcePositive",value:function(e){var t=+e.target.value;e.target.value=t<0?-1*t:t}}],[{key:"properties",get:function(){return{getSelectedElements:{type:Function},pages:{type:Object},tab:{type:String},translateKey:{type:Function},currPage:{type:Function},pagesLength:{type:Function},colors:{type:Function},broadcastDurationChanged:{type:Function},scalePage:{type:Function},createTransformDefs:{type:Function}}}}]),s}(v.LitElement);n.default=C,window.customElements.define("sidebar-animation-view",C)},{"./animationPreviewButtons":1079,"./constants":1081,"./styles":1087,"./timeline":1088,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/taggedTemplateLiteral":676,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/regenerator":682,"animejs/lib/anime.es.js":694,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.every.js":855,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.find.js":859,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.index-of.js":865,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.map.js":870,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.parse-float.js":904,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.timers.js":966,"lit-element":1030}],1086:[function(e,t,n){"use strict";e("core-js/modules/es.reflect.construct.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.weak-map.js");var r=e("@babel/runtime/helpers/interopRequireDefault"),o=e("@babel/runtime/helpers/typeof");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.function.bind.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.parse-int.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.string.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array-buffer.slice.js"),e("core-js/modules/es.typed-array.uint8-clamped-array.js"),e("core-js/modules/es.typed-array.copy-within.js"),e("core-js/modules/es.typed-array.every.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.filter.js"),e("core-js/modules/es.typed-array.find.js"),e("core-js/modules/es.typed-array.find-index.js"),e("core-js/modules/es.typed-array.for-each.js"),e("core-js/modules/es.typed-array.includes.js"),e("core-js/modules/es.typed-array.index-of.js"),e("core-js/modules/es.typed-array.iterator.js"),e("core-js/modules/es.typed-array.join.js"),e("core-js/modules/es.typed-array.last-index-of.js"),e("core-js/modules/es.typed-array.map.js"),e("core-js/modules/es.typed-array.reduce.js"),e("core-js/modules/es.typed-array.reduce-right.js"),e("core-js/modules/es.typed-array.reverse.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.slice.js"),e("core-js/modules/es.typed-array.some.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/es.typed-array.subarray.js"),e("core-js/modules/es.typed-array.to-locale-string.js"),e("core-js/modules/es.typed-array.to-string.js"),e("core-js/modules/es.array.reverse.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.object.get-own-property-names.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.object.values.js"),e("core-js/modules/es.array.flat-map.js"),e("core-js/modules/es.array.unscopables.flat-map.js"),e("core-js/modules/es.string.pad-start.js"),e("core-js/modules/es.array.is-array.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),e("core-js/modules/es.array.join.js");var s=r(e("@babel/runtime/helpers/toConsumableArray")),a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("@babel/runtime/helpers/slicedToArray")),c=r(e("@babel/runtime/helpers/asyncToGenerator")),u=r(e("@babel/runtime/helpers/taggedTemplateLiteral")),d=r(e("@babel/runtime/helpers/classCallCheck")),p=r(e("@babel/runtime/helpers/createClass")),h=r(e("@babel/runtime/helpers/inherits")),m=r(e("@babel/runtime/helpers/possibleConstructorReturn")),f=r(e("@babel/runtime/helpers/getPrototypeOf")),g=e("lit-element");e("./sidebarAnimation");var b,v=e("./util"),y=r(e("../../../assets/js/editor/ui/top-submenu/status")),j=e("../../../assets/js/editor/factory/company"),_=e("./constants"),w=r(e("webworkify")),I=r(e("animejs/lib/anime.es.js")),x=r(e("../../../assets/js/helpers/progressNotification")),E=e("../../../assets/js/helpers/fixPageSvg"),k=e("../../../assets/js/helpers/getPageContent"),C=e("uuid"),S=e("../../helpers"),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("./ffmpeg-worker")),N=e("./timeline"),A=e("./animation-events");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var R=["mp4","mov","gif"],F=function(e){(0,h.default)(z,e);var t,n,r,o,a,m,f,O,V,D,F,M,$,B=L(z);function z(){var e;return(0,d.default)(this,z),(e=B.call(this)).videoIndex=0,e.framerate=30,e.createFacadeHandler(),e.addEventListeners(),e.workers={},e.workerResolvers={},e.workerRejectors={},e.workerCount=0,e.pagesToExclude=[],e.outputFormat="mp4",e}return(0,p.default)(z,[{key:"sidebarAnimationView",get:function(){return this.shadowRoot.querySelector("sidebar-animation-view")}},{key:"render",value:function(){return(0,g.html)(b||(b=(0,u.default)(["<sidebar-animation-view\n      .translateKey=","\n      .pagesLength=","\n      .currPage=","\n      .colors=","\n      .broadcastDurationChanged=","\n      .scalePage=","\n      .postAnimationAPI=","\n      .getPageId=","\n      .getSelectedElements=","\n    ></sidebar-animation-view>"])),this.translateKey.bind(this),this.pagesLength.bind(this),this.currPage.bind(this),this.colors.bind(this),this.broadcastDurationChanged.bind(this),this.scalePage.bind(this),this.postAnimationAPI.bind(this),this.getPageId.bind(this),this.getSelectedElements.bind(this))}},{key:"firstUpdated",value:($=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sidebarAnimationView.updateComplete;case 2:this.onceChildrenAreUpdated(),this.afterRender();case 4:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)})},{key:"postAnimationAPI",value:(M=(0,c.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.entries(this.sidebarAnimationView.pages).reduce((function(e,t){var n=(0,l.default)(t,2),r=n[0],o=n[1];return!!INKIVE.ProjectFacade.get("design",{design_id:r})&&(e[r]=o),e}),{}),(0,v.saveAnimationProps)({applyAnimationAllPages:this.sidebarAnimationView.applyAnimationAllPagesInputValue,applyDurationAllPages:this.sidebarAnimationView.applyDurationAllPagesInputValue,pages:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"getAnimationAPI",value:(F=(0,c.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.instance.initCredentials();case 2:return e.next=4,j.instance.initProject();case 4:return e.next=6,j.instance.getProjectData();case 6:return t=e.sent,e.abrupt("return",t&&t.metadata&&t.metadata.animation?t.metadata.animation:null);case 8:case"end":return e.stop()}}),e)}))),function(){return F.apply(this,arguments)})},{key:"onceChildrenAreUpdated",value:(D=(0,c.default)(i.default.mark((function e(){var t,n,r,o,s=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAnimationAPI();case 2:(t=e.sent)&&(n=t.applyAnimationAllPages,r=t.applyDurationAllPages,o=t.pages,this.sidebarAnimationView.applyAnimationAllPagesInput.checked=n,this.sidebarAnimationView.applyDurationAllPagesInput.checked=r,this.sidebarAnimationView.applyAnimationAllPagesInputValue=n,this.sidebarAnimationView.applyDurationAllPagesInputValue=r,Object.entries(o).forEach((function(e){var t=(0,l.default)(e,2),n=t[0],r=t[1],o=r.animateElementsTogether,i=r.pageDuration,a=r.inOutDuration,c=r.animation,u=r.elementAnimations;s.sidebarAnimationView.pageSetProp(n,"animateElementsTogether",o,!0),s.sidebarAnimationView.pageSetProp(n,"animation",c,!0),s.sidebarAnimationView.pageSetProp(n,"pageDuration",i,!0),s.sidebarAnimationView.pageSetProp(n,"inOutDuration",a,!0),s.sidebarAnimationView.pageSetProp(n,"elementAnimations",u,!0)})),this.pageHasChanged());case 4:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"createFacadeHandler",value:function(){window.INKIVE||(window.INKIVE={}),window.INKIVE.AnimationFacade={handle:function(e,t,n){(0,A.dispatchAnimationEvent)(e+(t?t.charAt(0).toUpperCase()+t.slice(1):""),n)}}}},{key:"addEventListeners",value:function(){var e,t=this;INKIVE.DesignFacade.on("predelete",(function(e){var n=document.getElementById(e);if(n&&n.classList.contains("video")){var r,o=document.querySelectorAll(".element.video:not(#".concat(n.id,")")),i=o.length?0:_.defaultPageDuration,s=K(o);try{for(s.s();!(r=s.n()).done;){var a=r.value,l=1e3*Math.round(parseInt(a.dataset.duration)/1e3);l>i&&(i=l)}}catch(e){s.e(e)}finally{s.f()}var c=t.sidebarAnimationView.currPage();t.sidebarAnimationView.pageSetProp(c,"pageDuration",i)}t.sidebarAnimationView.updateMinimumDuration()})),INKIVE.DesignFacade.on("delete",(function(e){t.sidebarAnimationView.updateMinimumDuration()})),INKIVE.DesignFacade.on("video.create",(function(t){var n=t.id;e=n})),INKIVE.DesignFacade.on("video.loadedmetadata",(function(n){var r=n.id,o=document.getElementById(r);if(o&&e===r){var i=t.sidebarAnimationView.currPage(),s=t.sidebarAnimationView.pageProperties(i).pageDuration,a=1e3*Math.round(parseInt(o.dataset.duration)/1e3),l=void 0===s,c=s===_.defaultPageDuration;(l||c||a>s)&&(t.sidebarAnimationView.updateMinimumDuration(),t.sidebarAnimationView.pageSetProp(i,"pageDuration",a))}})),INKIVE.ProjectFacade.on("design.copied",(function(e){var n=e.based_on,r=e.design_id;n=String(n),r=String(r);var o=t.sidebarAnimationView.pageProperties(n);t.pageSetProperties({designId:r,properties:o})})),(0,A.addAnimationEvent)("changeOutputSize",(function(e){var n=e.resolution;t.outputResolution=n})),(0,A.addAnimationEvent)("changeOutputFormat",(function(e){var n=e.format;R.includes(n)&&(t.outputFormat=n)})),(0,A.addAnimationEvent)("updateMinimumDuration",(function(){t.sidebarAnimationView.updateMinimumDuration()})),(0,A.addAnimationEvent)("timelinePlay",(function(){t.sidebarAnimationView.playCurrentAnimationOnCurrentPage()})),(0,A.addAnimationEvent)("pageAllPageSetProperties",(function(e){for(var n=0;n<t.pagesLength();n++){var r=t.getPageId(n);t.pageSetProperties(P(P({},e),{},{designId:r}))}})),(0,A.addAnimationEvent)("pageSetProperties",(function(e){return t.pageSetProperties(e)})),(0,A.addAnimationEvent)("applyAnimationAllPages",(function(e){var n=e.applyAnimationAllPages;t.sidebarAnimationView.applyAnimationAllPagesInputValue=n,t.sidebarAnimationView.onApplyAnimationAllPages(n)})),(0,A.addAnimationEvent)("applyDurationAllPages",(function(e){var n=e.applyDurationAllPages;t.sidebarAnimationView.applyDurationAllPagesInputValue=n,t.sidebarAnimationView.onApplyDurationAllPages(n)})),(0,A.addAnimationEvent)("downloadVideo",(function(e){var n=e.format,r=e.resolution,o=e.pagesToExclude;n&&R.includes(n)&&(t.outputFormat=n),r&&(t.reqWidth=r.width,t.reqHeight=r.height),o&&(t.pagesToExclude=o),t.startRecording()}))}},{key:"pageSetProperties",value:function(e){var t=this,n=e.designId,r=e.properties,o=e.previewAnimationOnCurrentPage;"sidebar-animation"!==e.dispatchSource&&(r&&Object.entries(r).forEach((function(e){var r=(0,l.default)(e,2),o=r[0],i=r[1];"duration"===o&&(o="pageDuration"),t.sidebarAnimationView.pageSetProp(n,o,i)})),o&&this.sidebarAnimationView.playCurrentAnimationOnCurrentPage())}},{key:"pageHasChanged",value:function(){if(this.sidebarAnimationView){this.sidebarAnimationView.updateMinimumDuration();var e=this.sidebarAnimationView.shadowRoot.querySelector(".animation-canvas-wrapper");e&&e.remove(),this.sidebarAnimationView.renderAnimation(),this.sidebarAnimationView.renderDuration(),this.sidebarAnimationView.renderInOutDuration(),this.sidebarAnimationView.renderAnimateElementsTogetherInput(),this.sidebarAnimationView.requestUpdate()}}},{key:"onElementSelectionChanged",value:function(e){this.sidebarAnimationView.onElementSelectionChanged(e)}},{key:"onDesignCopied",value:function(e){var t=e.status,n=e.basedOn,r=e.designId,o=this.sidebarAnimationView.pages[r];"success"!==t||o||(this.sidebarAnimationView.pages[r]=P({},this.sidebarAnimationView.pages[n]))}},{key:"broadcastDurationChanged",value:function(e){var t=this.sidebarAnimationView.pages[e];(0,A.dispatchAnimationEvent)("pageSetProperties",{pageId:e,properties:t,dispatchSource:"sidebar-animation"})}},{key:"scalePage",value:function(e){var t=function(e){return 1&e?Math.floor(e)+1:e},n=(0,S.getPageDimensions)(e),r=n.sourceWidth,o=n.sourceHeight,i=n.destinationWidth,s=n.destinationHeight;if(this.outWidth=this.reqWidth||i,this.outHeight=this.reqHeight||s,this.outputResolution&&(this.outWidth>this.outputResolution||this.outHeight>this.outputResolution)){var a=Math.min(this.outputResolution/this.outWidth,this.outputResolution/this.outHeight);this.outWidth=Math.floor(this.outWidth*a),this.outHeight=Math.floor(this.outHeight*a)}if(this.outWidth>3e3||this.outHeight>3e3){var l=Math.min(3e3/this.outWidth,3e3/this.outHeight);this.outWidth=Math.floor(this.outWidth*l),this.outHeight=Math.floor(this.outHeight*l)}return this.aspectRatio=Math.min(this.outWidth/r,this.outHeight/o),this.outWidth=t(this.outWidth),this.outHeight=t(this.outHeight),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("viewBox","0 0 ".concat(r," ").concat(o)),e.style.width=this.outWidth,e.style.height=this.outHeight,e}},{key:"getPages",value:(V=(0,c.default)(i.default.mark((function e(){var t,n,r,o,s,a,l,c,u,d,p,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=INKIVE.C.BOOK_TYPE.TEMPLATE,n=INKIVE.C.BOOK,r=n.book_type,o=n.encodedId,s=INKIVE.CompanyFactory,a=s.companyId,l=s.credentials,c=INKIVE.C.API_URL,u=r===t?"templates":"designs",d="".concat(c,"brand/companies/").concat(a,"/").concat(u,"/").concat(o),e.next=8,fetch(d,{method:"get",headers:new window.Headers({Authorization:"Basic "+btoa("".concat(l.username,":").concat(l.password))})});case 8:return p=e.sent,e.next=11,p.json();case 11:return h=e.sent,e.abrupt("return",h.pages.map((function(e){return e.design_id})));case 13:case"end":return e.stop()}}),e)}))),function(){return V.apply(this,arguments)})},{key:"genVideoName",value:function(){return"".concat((0,C.v4)(),".mp4")}},{key:"startRecording",value:(O=(0,c.default)(i.default.mark((function e(){var t,n,r,o,a,u,d,p,h,m,f,g,b,v,j,w,I,C,S,T,A,O,V,P,K,D,L,R,F=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.downloadMainButton.classList.toggle("disabled",!0),this.startRecordingButton.classList.toggle("disabled",!0),t=function(){var e=(0,c.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(parseInt(t)!==parseInt(F.currPage())){e.next=2;break}return e.abrupt("return");case 2:n=F.getPageNumber(t),INKIVE.Helpers.changePageAwait(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=(0,c.default)(i.default.mark((function e(t){var n,r,o,s,a,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F.getPageNumber(t),e.next=3,(0,k.getPageContent)(n);case 3:return r=e.sent,o=r.pageContent,s=F.scalePage(o),a=(0,N.createTransformDefs)(),s.appendChild(a),l=(0,N.getTimelineTargets)(s),(0,N.makeTargetsCompatible)(l),e.next=12,(0,E.fixPageSvg)(s,t);case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y.default.display("Fetching assets",null,!0),e.next=8,this.getPages();case 8:r=e.sent,o=r.map((function(e){var t=!F.sidebarAnimationView.pages[e]||isNaN(F.sidebarAnimationView.pages[e].inOutDuration)?_.defaultInOutDuration:F.sidebarAnimationView.pages[e].inOutDuration,n={in:t,static:!F.sidebarAnimationView.pages[e]||isNaN(F.sidebarAnimationView.pages[e].pageDuration)?_.defaultPageDuration:F.sidebarAnimationView.pages[e].pageDuration,out:t};return Object.entries(n).forEach((function(e){var t=(0,l.default)(e,2),r=t[0];t[1]<0&&(n[r]=0)})),{pageId:e,durations:n}})).filter((function(e){var t=e.pageId,n=e.durations,r=F.pagesToExclude.includes(t),o=n.in>0||n.static>0||n.out>0;return!r&&o})),(a=new x.default("Sidebar Animation",!0)).numSteps=2+3*(o.length-1),a.first(),u=[],d=0,p=0;case 16:if(!(p<o.length)){e.next=72;break}return h=void 0,m=void 0,f=o[p],g=f.durations,b=f.pageId,v=p===o.length-1,e.next=22,n(b);case 22:if(j=e.sent,w=j.cloneNode(!0),I=j.cloneNode(!0),C=this.getVideosOnPage(w),S=this.createLayers(w),!(T=this.generateVideoOverlayFilterComplex(C,S))){e.next=33;break}return e.next=31,this.replaceVideoThumbnail(j,0);case 31:return e.next=33,this.replaceVideoThumbnail(I,g.static);case 33:if(!T){e.next=39;break}return e.next=36,this.overlayVideosOnLayers(w,S,T,g.static);case 36:h=e.sent,e.next=45;break;case 39:return e.next=41,this.renderFrame(w);case 41:return A=e.sent,e.next=44,this.createVideoChunk([A],g.static);case 44:h=e.sent;case 45:return a.next(),O=this.sidebarAnimationView.pageProperties(b),e.next=49,this.recordAnimation(j,O,g.in);case 49:if(V=e.sent,v){e.next=63;break}if(P=void 0,!T){e.next=58;break}return e.next=55,this.recordAnimation(I,O,g.out);case 55:P=e.sent,e.next=59;break;case 58:P=V.map((function(e){var t=new Uint8ClampedArray(e);return t.set(e),t}));case 59:return e.next=61,this.createVideoChunk(P.reverse());case 61:m=e.sent,a.next();case 63:return e.next=65,this.createVideoChunk(V);case 65:K=e.sent,a.next(),u=[].concat((0,s.default)(u),[K,h,m]),d++;case 69:p++,e.next=16;break;case 72:if(a.last(),!d||!u.length){e.next=85;break}return e.next=76,this.createVideoFromChunks(u);case 76:return D=e.sent,y.default.display("Downloading"),L=Base64.decode(INKIVE.C.BOOK.name),e.next=81,this.downloadVideo("".concat(L,".").concat(this.outputFormat),D.data);case 81:return e.next=83,t(this.getPageId(0));case 83:e.next=87;break;case 85:y.default.display("Video download aborted"),console.warn("Video download aborted: no pages selected, or all pages had 0 duration");case 87:this.downloadMainButton.classList.toggle("disabled",!1),this.startRecordingButton.classList.toggle("disabled",!1),e.next=99;break;case 91:e.prev=91,e.t0=e.catch(0),R=function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))},INKIVE.EditorFacade.trigger("animation.downloading.error",{error:R(e.t0)}),y.default.display("Error! Download aborted."),console.error(e.t0),this.downloadMainButton.classList.toggle("disabled",!1),this.startRecordingButton.classList.toggle("disabled",!1);case 99:case"end":return e.stop()}}),e,this,[[0,91]])}))),function(){return O.apply(this,arguments)})},{key:"replaceVideoThumbnail",value:(f=(0,c.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.default)(t.querySelectorAll('.element.video:not([data-video-type="youtube"])')),e.next=3,Promise.all(r.map((function(e){return new Promise((function(t,r){var o=e.firstChild,i=document.createElement("video");i.crossOrigin="*",i.muted=!0,i.onloadedmetadata=function(){var e=n/1e3;i.currentTime=e<0?i.duration:e},i.onseeked=function(){var e=document.createElement("canvas");e.width=i.videoWidth,e.height=i.videoHeight,e.getContext("2d").drawImage(i,0,0,e.width,e.height);var n=e.toDataURL();o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n),t()},i.onerror=r,i.src=e.getAttribute("xlink:href")}))})));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"getVideosOnPage",value:function(e){var t=this;return(0,s.default)(e.querySelectorAll('.element.video:not([data-video-type="youtube"])')).map((function(e){var n=e.firstChild,r=function(e){return Math.floor(parseInt(n.getAttribute(e))*t.aspectRatio)};return{id:e.id,src:e.getAttribute("xlink:href")||e.dataset.src,width:r("width"),height:r("height"),x:r("x"),y:r("y")}}))}},{key:"isVideoElem",value:function(e){return e&&e.classList.contains("video")&&"youtube"!==e.dataset.videoType}},{key:"createLayers",value:function(e){var t=this,n=(0,N.getTimelineTargets)(e),r=[],o={};return n.forEach((function(e,i){"svg_background_color"!==e.id&&(o[e.id]=e);var s=i===n.length-1,a=n[i+1];!s&&(!t.isVideoElem(e)||a&&t.isVideoElem(a))||(Object.keys(o).length&&r.push(o),o={})})),r}},{key:"generateVideoOverlayFilterComplex",value:function(e,t){if(!e.length)return"";var n="";e.forEach((function(e,t){var r=e.width,o=e.id;n+="[".concat(t,"]scale=").concat(r,":-1[").concat(o,"]; ")}));for(var r=0,o=function(o){var i=e.filter((function(e){var n=e.id;return!!t[o][n]})),s=o===t.length-1;if(0!==o){var a="[o".concat(r,"]"),l=s&&!i.length?"":"[o".concat(++r,"]; ");n+="".concat(a,"[").concat(e.length+o,"]overlay").concat(l)}for(var c=0;c<i.length;c++){var u=i[c],d=u.x,p=u.y,h=u.id,m=c===i.length-1,f=0===c&&0===o?"[".concat(e.length,"]"):"[o".concat(r,"]"),g=m&&s?"":"[o".concat(++r,"]; ");n+="".concat(f,"[").concat(h,"]overlay=").concat(d,":").concat(p).concat(g)}},i=0;i<t.length;i++)o(i);return n}},{key:"recordAnimation",value:(m=(0,c.default)(i.default.mark((function e(t,n,r){var o,s,a,l,c,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=1e3/this.framerate,s=[],a=(a=(0,N.createTimelineArray)(t,n,r)).map((function(e){return P(P({},e),{},{anime:(0,I.default)(P(P({},e.animationProps),{},{loop:!1}))})})),l=0;case 5:if(!(l<r)){e.next=14;break}return a.forEach((function(e){var t=l-e.offset;t>0&&e.anime.seek(t)})),e.next=9,this.renderFrame(t);case 9:c=e.sent,s.push(c),l+=o,e.next=5;break;case 14:return(u=s.length-r/o)>0?s=s.slice(0,-u-1):u<0&&INKIVE.C.DEBUG&&console.warn("".concat(u," missing frames detected!")),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"overlayVideosOnLayers",value:(a=(0,c.default)(i.default.mark((function e(t,n,r,o){var a,l,c,u,d,p,h,m,f,g,b,v,y,j,_,w,I,x,E,k=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,N.getTimelineTargets)(t),l=[],c=[],u=0;case 4:if(!(u<n.length)){e.next=31;break}d=Object.values(n[u]).filter(this.isVideoElem),p=K(d),e.prev=7,p.s();case 9:if((h=p.n()).done){e.next=20;break}return m=h.value,e.next=13,fetch(m.getAttribute("xlink:href"));case 13:return f=e.sent,e.next=16,f.arrayBuffer();case 16:g=e.sent,l.push(g);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(7),p.e(e.t0);case 25:return e.prev=25,p.f(),e.finish(25);case 28:u++,e.next=4;break;case 31:b=0;case 32:if(!(b<n.length)){e.next=44;break}v=n[b],0!==b&&(t.querySelector(".background").style.display="none"),y=K(a);try{for(y.s();!(j=y.n()).done;)_=j.value,w=this.isVideoElem(_)||!v[_.id],t.querySelector("#"+_.id).style.display=w?"none":"block"}catch(e){y.e(e)}finally{y.f()}return e.next=39,this.renderFrame(t,"png");case 39:I=e.sent,c.push(I);case 41:b++,e.next=32;break;case 44:return x=[].concat((0,s.default)(l.map((function(e){return{data:e,name:k.genVideoName()}}))),(0,s.default)(c.map((function(e){return{data:e,name:"".concat((0,C.v4)(),".png")}})))),e.next=47,this.encodeFfmpeg([].concat((0,s.default)(x.flatMap((function(e){return["-i",e.name]}))),["-filter_complex",r,"-r","".concat(this.framerate),"-t","".concat(o/1e3)],(0,s.default)(this.ffmpegOutputArgs),["-map","1:v","-map","0:a","-c:a","aac","-shortest",this.genVideoName()]),x);case 47:return E=e.sent,e.abrupt("return",E);case 49:case"end":return e.stop()}}),e,this,[[7,22,25,28]])}))),function(e,t,n,r){return a.apply(this,arguments)})},{key:"createVideoChunk",value:(o=(0,c.default)(i.default.mark((function e(t,n){var r,o,a,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(1!==t.length){e.next=9;break}return o=[{name:r="frame.raw",data:t[0].buffer}],e.next=7,this.encodeFfmpeg(["-loop","1","-r","".concat(this.framerate),"-f","image2","-pixel_format","rgba","-video_size","".concat(this.outWidth,"x").concat(this.outHeight),"-i",r,"-f","lavfi","-i","anullsrc"].concat((0,s.default)(this.ffmpegOutputArgs),["-vf","scale=".concat(this.outWidth,":").concat(this.outHeight,",fps=").concat(this.framerate),"-t","".concat(n/1e3),"-map","0:v","-map","1:a","-c:a","aac","-shortest",this.genVideoName()]),o);case 7:return a=e.sent,e.abrupt("return",a);case 9:return l=t.map((function(e,t){var n=e.buffer;return{name:"frame".concat("".concat(t).padStart(5,"0"),".raw"),data:n}})),e.next=12,this.encodeFfmpeg(["-f","image2","-r","".concat(this.framerate),"-pixel_format","rgba","-video_size","".concat(this.outWidth,"x").concat(this.outHeight),"-i","frame%05d.raw","-f","lavfi","-i","anullsrc"].concat((0,s.default)(this.ffmpegOutputArgs),["-map","0:v","-map","1:a","-c:a","aac","-shortest",this.genVideoName()]),l);case 12:return c=e.sent,e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"pushToFrameBuffer",value:(r=(0,c.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.isArray(t)?this.frameBuffer=this.frameBuffer.concat(t):this.frameBuffer.push(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"renderFrame",value:(n=(0,c.default)(i.default.mark((function e(t,n){var r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=document.createElement("canvas");o.width=r.outWidth,o.height=r.outHeight;var s=o.getContext("2d"),a=new Document;a.append(t);var l='<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+(new XMLSerializer).serializeToString(a),u=URL.createObjectURL(new Blob([l],{type:"image/svg+xml"})),d=new Image;d.onload=function(){var t=d.width,a=d.height;s.drawImage(d,0,0,t,a,0,0,r.outWidth,r.outHeight),URL.revokeObjectURL(u),"png"===n?o.toBlob(function(){var t=(0,c.default)(i.default.mark((function t(n){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,n.arrayBuffer();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/png"):e(s.getImageData(0,0,r.outWidth,r.outHeight).data)},d.src=u})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"createVideoFromChunks",value:(t=(0,c.default)(i.default.mark((function e(t){var n,r,o,a,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="input".concat(this.videoIndex+=1,".txt"),r=t.filter(Boolean).map((function(e){var t=e.name;return"file '".concat(t,"'")})).join("\r\n"),o=new Blob([r],{type:"text/plain"}),e.t0=n,e.next=6,o.arrayBuffer();case 6:return e.t1=e.sent,e.t2={name:e.t0,data:e.t1},a=[e.t2].concat((0,s.default)(t.filter(Boolean).map((function(e){return{name:e.name,data:e.data}})))),l="gif"===this.outputFormat?"mp4":this.outputFormat,e.next=12,this.encodeFfmpeg(["-f","concat","-safe","0","-i",n].concat((0,s.default)("gif"!==this.outputFormat?["-f",this.outputFormat]:[]),(0,s.default)("mp4"===this.outputFormat?["-bsf:v","h264_mp4toannexb","-bsf:a","aac_adtstoasc"]:[]),["".concat((0,C.v4)(),".").concat(l)]),a);case 12:if(c=e.sent,"gif"!==this.outputFormat||!c){e.next=17;break}return e.next=16,this.encodeFfmpeg(["-i",c.name,"-vf","split [a][b];\n          [a] palettegen=max_colors=256:reserve_transparent=1:stats_mode=diff [p];\n          [b] fifo [c];\n          [c][p] paletteuse=dither=bayer:alpha_threshold=128","-gifflags","-offsetting","-sws_dither","a_dither","".concat((0,C.v4)(),".gif")],[c]);case 16:c=e.sent;case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"downloadVideo",value:function(e,t){var n=this;return new Promise((function(r){var o=new Blob([t],{type:"video/"+n.outputFormat}),i=new FileReader;i.onload=function(){var t=window.btoa(i.result),n="data:"+o.type+";base64,"+t;if(window.Android)window.Android.downloadFile(e,n);else{var s=document.createElement("a");s.href=n,s.target="_blank",s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}r()},i.readAsBinaryString(o)}))}},{key:"ffmpegProgress",value:function(e){e=isNaN(e)?1:e;var t=document.querySelector(".menus .status + .ffmpeg-progress");if(!t){var n=document.querySelector(".menus .status");n&&((t=document.createElement("progress")).className="ffmpeg-progress",n.parentElement.append(t))}t.classList.contains("hidden")&&t.classList.remove("hidden"),t.value=e<1&&e>0?e:e/100,1===e&&t.classList.add("hidden")}},{key:"encodeFfmpeg",value:function(e,t){var n=this;if(INKIVE.C.DEBUG){var r,o=K(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;i&&i.name&&i.data&&!i.name.includes(".raw")&&this.downloadVideo(i.name,i.data)}}catch(e){o.e(e)}finally{o.f()}}this.workerCount+=1;var s=this.workerCount;this.workers[s]=(0,w.default)(T.default);this.workers[s].addEventListener("message",(function e(t){var r=t.data;switch(r.type){case T.TYPE_PROGRESS:n.ffmpegProgress(r.ratio);break;case T.TYPE_RESULT:!function(t){n.workerResolvers[s](t),n.workers[s].dispatchEvent(new MessageEvent("destroy")),n.workers[s].removeEventListener("message",e),n.workers[s].terminate(),delete n.workers[s],delete n.workerResolvers[s],delete n.workerRejectors[s]}(r.file)}}));var a={baseURI:document.baseURI,ffmpegArgs:e,log:this.debug(),filenames:[],files:[]};return t.filter((function(e){var t=e.data;return t&&t.byteLength>0})).forEach((function(e){var t=e.name,n=e.data;a.filenames.push(t),a.files.push(n)})),this.workers[s].postMessage(a,a.files),new Promise((function(e,t){n.workerResolvers[s]=e,n.workerRejectors[s]=t}))}},{key:"ffmpegOutputArgs",get:function(){return[].concat(["-pix_fmt","yuv420p"],(0,s.default)("mp4"===this.outputFormat?["-c:v","libx264","-preset","ultrafast","-x264-params","qpmax=16:qpstep=4:me_range=16"]:[]))}}],[{key:"properties",get:function(){return{getPageId:{type:Function},getPageNumber:{type:Function},getSelectedElements:{type:Function},pageMoveTo:{type:Function},currPage:{type:Function},pagesLength:{type:Function},translateKey:{type:Function},debug:{type:Function},colors:{type:Function},afterRender:{type:Function},startRecordingButton:{type:Element},downloadMainButton:{type:Element}}}}]),z}(g.LitElement);n.default=F,window.customElements.define("sidebar-animation",F)},{"../../../assets/js/editor/factory/company":122,"../../../assets/js/editor/ui/top-submenu/status":605,"../../../assets/js/helpers/fixPageSvg":636,"../../../assets/js/helpers/getPageContent":638,"../../../assets/js/helpers/progressNotification":641,"../../helpers":1098,"./animation-events":1078,"./constants":1081,"./ffmpeg-worker":1082,"./sidebarAnimation":1085,"./timeline":1088,"./util":1089,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/getPrototypeOf":661,"@babel/runtime/helpers/inherits":662,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/possibleConstructorReturn":672,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/helpers/taggedTemplateLiteral":676,"@babel/runtime/helpers/toConsumableArray":678,"@babel/runtime/helpers/typeof":679,"@babel/runtime/regenerator":682,"animejs/lib/anime.es.js":694,"core-js/modules/es.array-buffer.slice.js":853,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.flat-map.js":860,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.includes.js":864,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.reduce.js":872,"core-js/modules/es.array.reverse.js":873,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.unscopables.flat-map.js":878,"core-js/modules/es.function.bind.js":883,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.get-own-property-names.js":899,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.object.values.js":903,"core-js/modules/es.parse-int.js":905,"core-js/modules/es.promise.js":907,"core-js/modules/es.reflect.construct.js":908,"core-js/modules/es.string.includes.js":915,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.string.pad-start.js":921,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/es.typed-array.copy-within.js":933,"core-js/modules/es.typed-array.every.js":934,"core-js/modules/es.typed-array.fill.js":935,"core-js/modules/es.typed-array.filter.js":936,"core-js/modules/es.typed-array.find-index.js":937,"core-js/modules/es.typed-array.find.js":938,"core-js/modules/es.typed-array.for-each.js":940,"core-js/modules/es.typed-array.includes.js":941,"core-js/modules/es.typed-array.index-of.js":942,"core-js/modules/es.typed-array.iterator.js":943,"core-js/modules/es.typed-array.join.js":944,"core-js/modules/es.typed-array.last-index-of.js":945,"core-js/modules/es.typed-array.map.js":946,"core-js/modules/es.typed-array.reduce-right.js":947,"core-js/modules/es.typed-array.reduce.js":948,"core-js/modules/es.typed-array.reverse.js":949,"core-js/modules/es.typed-array.set.js":950,"core-js/modules/es.typed-array.slice.js":951,"core-js/modules/es.typed-array.some.js":952,"core-js/modules/es.typed-array.sort.js":953,"core-js/modules/es.typed-array.subarray.js":954,"core-js/modules/es.typed-array.to-locale-string.js":955,"core-js/modules/es.typed-array.to-string.js":956,"core-js/modules/es.typed-array.uint8-clamped-array.js":959,"core-js/modules/es.weak-map.js":960,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965,"core-js/modules/web.url-search-params.js":967,"core-js/modules/web.url.js":968,"lit-element":1030,uuid:1050,webworkify:1065}],1087:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=r(e("@babel/runtime/helpers/taggedTemplateLiteral")),s=e("lit-element"),a=e("../animationPreviewButtons"),l=function(e){var t=(0,s.unsafeCSS)(e.highlight),n=(0,s.unsafeCSS)(e.button.hover.background),r=(0,s.unsafeCSS)(e.button.active.background);return(0,s.css)(o||(o=(0,i.default)(["\n    :host {\n      all: initial;\n    }\n\n    :root {\n      box-sizing: border-box;\n    }\n\n    *,\n    *:before,\n    *:after {\n      box-sizing: border-box;\n    }\n\n    .animation-preview-buttons {\n      padding-top: 16px;\n      display: grid;\n      grid-gap: 12px;\n      grid-row-gap: 16px;\n      grid-auto-rows: 80px;\n      grid-template-columns: repeat(2, minmax(0, 1fr));\n    }\n\n    .sidebar-animation {\n      font-family: 'nunito';\n      color: #1f2631;\n      font-weight: 600;\n      font-size: 14px;\n      line-height: 20px;\n      padding: 24px;\n      overflow: auto;\n      scrollbar-width: thin;\n      scrollbar-color: #ededed #ffffff;\n      height: 100%;\n      padding-bottom: 50px;\n      margin-right: 4px;\n    }\n    .sidebar-animation::-webkit-scrollbar {\n      width: 8px;\n    }\n\n    .sidebar-animation::-webkit-scrollbar-thumb {\n      border-radius: 20px;\n      background-color: #ededed;\n      border: 1px solid transparent;\n      background-clip: content-box;\n    }\n\n    .sidebar-animation::-webkit-scrollbar-track {\n      background-color: transparent;\n    }\n\n    .sidebar-animation h1 {\n      font-size: 24px;\n      line-height: 32px;\n      margin: 0px;\n      margin-bottom: 16px;\n      display: inline-block\n    }\n\n    .sidebar-animation .beta-text {\n      color: ",";\n    }\n\n    .duration {\n      margin-bottom: 8px;\n    }\n\n    .duration h2 {\n      font-size: 16px;\n      margin-bottom: 8px;\n    }\n\n    .duration .flex-form {\n      display: grid;\n      grid-template-columns: max-content 60px max-content;\n      grid-gap: 4px;\n      position: relative\n    }\n\n    .flex-form label {\n      text-align: left;\n    }\n\n    .flex-form input {\n      border: 1px solid #bfcbda;\n      border-radius: 4px;\n      font-family: 'nunito';\n    }\n\n    span.warning {\n      color: red;\n      grid-column-start: 1;\n      grid-column-end: 5;\n      font-size: 12px;\n      position: absolute;\n      background: white;\n      bottom: -5px;\n      z-index: 1;\n      padding: 4px 0;\n    }\n\n    .checkbox {\n      margin-bottom: 8px;\n    }\n\n    .checkbox input {\n      -ms-transform: scale(1.5); /* IE */\n      -moz-transform: scale(1.5); /* FF */\n      -webkit-transform: scale(1.5); /* Safari and Chrome */\n      -o-transform: scale(1.5); /* Opera */\n      transform: scale(1.5);\n      margin: 0px;\n      vertical-align: middle;\n      margin-right: 8px;\n    }\n\n    .tab-headers {\n      margin-top: 24px;\n      margin-bottom: 16px;\n      display: flex;\n      width: auto;\n      min-width: 100%;\n      flex-grow: 0;\n      flex-shrink: 0;\n\n      overflow-y: hidden;\n      overflow-x: auto;\n      scroll-behavior: smooth;\n    }\n\n    .tab-headers::-webkit-scrollbar {\n      width: 0;\n      background: transparent;\n    }\n\n    .tab-header {\n      font-size: 14px;\n      font-weight: 600;\n      cursor: pointer;\n      padding: 8px;\n      display: inline-block;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      text-align: center;\n      flex-shrink: 0;\n      flex-grow: 1;\n      opacity: 0.6;\n      position: relative;\n      transition: opacity .15s ease-in-out;\n    }\n\n    .tab-header::after {\n      content: '';\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: ",";\n      height: 2px;\n      border-radius: 20px;\n      opacity: 0;\n      transition: opacity .15s ease-in-out;\n    }\n\n    .tab-header:hover, .tab-header.selected {\n      opacity: 1;\n    }\n\n    .tab-header.selected::after {\n      opacity: 1;\n    }\n\n    .tabs-content {\n      position: relative;\n    }\n\n    .tabs-content > div, .no-element-selected, .animation-preview-buttons-outer {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      transition: opacity, transform .15s ease-in-out;\n    }\n\n    .tabs-content > div.hide, .no-element-selected.hide, .animation-preview-buttons-outer.hide {\n      visibility: hidden;\n      overflow: hidden;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateX(-50%);\n    }\n\n    .tabs-content > div.hide.animate-left {\n      transform: translateX(50%);\n    }\n\n    .no-element-selected, .animation-preview-buttons-outer {\n      height: auto;\n    }\n\n    .no-element-selected.hide, .animation-preview-buttons-outer.hide {\n      transform: translateY(50%);\n    }\n\n    .revert-to-page-animation {\n      border-bottom: 1px solid #bfcbda;\n      padding-bottom: 8px;\n      position: absolute;\n      width: 100%;\n      z-index: 1;\n      background: #fff;\n    }\n\n    .revert-to-page-animation.hide {\n      display: none;\n    }\n\n    .revert-to-page-animation:not(.hide) + .animation-preview-buttons-outer {\n      transform: translateY(49px); /* height + padding + border */\n    }\n\n    .revert-to-page-animation button {\n      height: 40px;\n      padding: 0 8px;\n      cursor: pointer;\n      text-decoration: none;\n      outline: none;\n      width: 100%;\n      background: #fff;\n      border: 0;\n      border-radius: 4px;\n      justify-content: center;\n      display: flex;\n      font-size: 14px;\n      font-weight: 400;\n      color: #1f2631;\n      transition: background-color .1s linear;\n    }\n\n    .revert-to-page-animation button:hover, .revert-to-page-animation button:focus {\n      background-color: ",";\n    }\n\n    .revert-to-page-animation button:active {\n      background-color: ",";\n    }\n\n    .revert-to-page-animation button > div {\n      align-items: center;\n      display: flex;\n      height: 100%;\n      min-width: 0;\n    }\n\n    .revert-to-page-animation .icon {\n      display: inline-flex;\n      flex: 0;\n      justify-content: center;\n      margin-left: 4px;\n      min-width: 24px;\n      text-align: center;\n      white-space: nowrap;\n    }\n\n    .revert-to-page-animation svg {\n      display: inline-block;\n      vertical-align: text-bottom;\n      box-sizing: border-box;\n      width: 24px;\n      height: 24px;\n      fill: currentColor;\n    }\n\n    .revert-to-page-animation .text {\n      flex: 1;\n      margin: 0 8px;\n      max-width: 100%;\n      text-align: left;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n\n    ","\n  "])),t,t,n,r,(0,a.animationPreviewButtonsStyle)(e))};n.default=l},{"../animationPreviewButtons":1079,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/taggedTemplateLiteral":676,"core-js/modules/es.object.define-property.js":895,"lit-element":1030}],1088:[function(e,t,n){"use strict";e("core-js/modules/es.object.keys.js"),e("core-js/modules/es.symbol.js"),e("core-js/modules/es.object.get-own-property-descriptor.js"),e("core-js/modules/es.object.get-own-property-descriptors.js"),e("core-js/modules/es.object.define-properties.js"),e("core-js/modules/es.object.define-property.js"),e("core-js/modules/es.array.slice.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.function.name.js"),e("core-js/modules/es.array.from.js"),e("core-js/modules/es.string.iterator.js"),e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.symbol.iterator.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/es.array.is-array.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.createTransformDefs=function(){var e=document.createElement("defs"),t=document.createElement("style");return t.innerHTML="\n    svg * {\n      transform-origin: center;\n      transform-box: fill-box;\n    }\n  ",e.appendChild(t),e},n.makeTargetsCompatible=function(e){e.forEach((function(e){e.dataset.opacity=+(e.getAttribute("opacity")||1),e.style.transform=(0,l.convertSvgTransformToCss)(e.getAttribute("transform"))}))},n.createTimeline=function(){var e=s.default.timeline({loop:!1}),t=f.apply(void 0,arguments);return t.forEach((function(t){var n=t.animationProps,r=t.offset;return e.add(n,r)})),e},n.getTimelineTargets=m,n.createTimelineArray=f;var o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/toConsumableArray"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.concat.js"),e("core-js/modules/es.array.sort.js");var s=r(e("animejs/lib/anime.es.js")),a=e("./animeAnimations"),l=e("../../helpers");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n=(0,l.getBBox)(e),r=n.x,o=n.y,i=(0,l.getBBox)(t),s=i.x;return o-i.y||r-s}function m(e){var t=(0,i.default)(e.querySelectorAll(".main > .element"));return[].concat((0,i.default)(t),[e.querySelector("#svg_background_image")]).filter(Boolean)}function f(e,t,n,r,o){var i=t.animateElementsTogether,s=t.animation,l=t.elementAnimations,u=e.querySelector("svg .main"),d=s||"no_animation";l=l||{};var f,g=m(e),b=function(e){return l[e.id]&&"no_animation"!==l[e.id]},v=function(e){return!b(e)&&"no_animation"!==l[e.id]},y=g.filter(v),j=g.filter(b),_=y.length+j.length,w=n/_*.3,I=function(e,t,n){return n?e:(e+w*(t-1))/t}(n,_,i),x=function(e){return i?0:e-w}(I),E=[],k=0,C=function(e,t){var n=(0,a.getAnimationProps)(e,[t],I,o),r=x*k;n.begin&&E.push({offset:r,animationProps:p(p({},n.begin(u)),{},{autoplay:!1})}),E.push({offset:r,animationProps:p(p({},n),{},{autoplay:!1})}),k++},S=c(g.sort(h));try{for(S.s();!(f=S.n()).done;){var T=f.value;v(T)&&!r&&C(d,T),!b(T)||r&&!T.classList.contains("selected")||C(l[T.id],T)}}catch(e){S.e(e)}finally{S.f()}return E}},{"../../helpers":1098,"./animeAnimations":1080,"@babel/runtime/helpers/defineProperty":659,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/toConsumableArray":678,"animejs/lib/anime.es.js":694,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.from.js":863,"core-js/modules/es.array.is-array.js":866,"core-js/modules/es.array.iterator.js":867,"core-js/modules/es.array.slice.js":874,"core-js/modules/es.array.sort.js":876,"core-js/modules/es.function.name.js":884,"core-js/modules/es.object.define-properties.js":894,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.get-own-property-descriptor.js":897,"core-js/modules/es.object.get-own-property-descriptors.js":898,"core-js/modules/es.object.keys.js":901,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.string.iterator.js":917,"core-js/modules/es.symbol.description.js":930,"core-js/modules/es.symbol.iterator.js":931,"core-js/modules/es.symbol.js":932,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.dom-collections.iterator.js":965}],1089:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=l,n.saveAnimationProps=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.concat.js"),e("core-js/modules/web.timers.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("../../../assets/js/helpers/waitForPageLoad"));var a=l(function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)();case 2:return r=void 0,r=INKIVE.EditorFacade.editor.getSvgString(),n=Base64.encode(r),e.next=5,INKIVE.DesygnerApi.put("business/projects/".concat(INKIVE.C.BOOK.id,"/pages/").concat(INKIVE.Tool._current_design_id),{content:n,animation:t});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),100);function l(e,t){var n=this,r=null;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];clearTimeout(r),r=setTimeout((function(){e.apply(n,i)}),t)}}n.saveAnimationProps=a},{"../../../assets/js/helpers/waitForPageLoad":645,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.object.define-property.js":895,"core-js/modules/web.timers.js":966}],1090:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={timeout:{lockDownloadButtonDuringActions:6e4,topLoader:6e4},sidebar:{placeholders:{text:["text","color","font"],logo:["logo"],image:["image"],shape:["color"],background:["image","color"]},thumbnail:{masonryConfig:{gutter:12,columnWidth:135,fitWidth:!0},masonryRefreshTime:1e3}},smartAssets:{attributes:["custom-placeholder","is-defined-placeholder"],types:["colors","fonts","icons","images","logos","texts"]},cookies:{loadKey:"editor_load",loadPrintOptionKey:"editor_load_print",loadReferrerOptionKey:"editor_load_referrer",loadThumbnailOptionKey:"editor_load_thumbnail",loadAddonsOptionKey:"editor_load_addons",loadWorkspaceOptionKey:"editor_load_workspace",loadReviewModeOptionKey:"editor_load_review_mode",loadTranslationDataOptionKey:"editor_load_translation_data",loadBackgroundUrlOptionKey:"editor_load_background_url",loadViewOptionKey:"editor_load_view"},featureFlag:{keys:{smartAssets:"show_smart_assets"}}}},{"core-js/modules/es.object.define-property.js":895}],1091:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.abortHandler=void 0,e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js");n.abortHandler=function(e,t){var n=e.signal;return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return null!=n&&n.aborted?Promise.reject(new DOMException("Aborted","AbortError")):new Promise((function(e,o){var i=function(){return o(new DOMException("Aborted","AbortError"))};t.apply(void 0,r).then((function(t){return e(t),null==n||n.removeEventListener("abort",i),t})).catch(o),null==n||n.addEventListener("abort",i)}))}}},{"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907}],1092:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.activePageSvgString=n.activePageIndex=n.activePageId=void 0;var r=function(){return INKIVE.Tool._current_design_id};n.activePageId=r;var o=function(){return INKIVE.Tool._current_page_number};n.activePageIndex=o;var i=function(){return document.querySelector("#svgroot").outerHTML};n.activePageSvgString=i;var s=function(){return{id:r(),index:o(),svgString:i()}};n.default=s},{"core-js/modules/es.object.define-property.js":895}],1093:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("string"!=typeof e)return"";return(e.match(/(\w+\((-?\d+\.?\d*e?-?\d*,? ?)+\))+/g)||[]).map((function(e){var t=e.match(/[\w.-]+/g)||[],n=t.shift(),r=t,o="".concat(n,"(");switch(n){case"rotate":r.length>=1&&(o+="".concat(r[0],"deg)"));break;default:o=""}return o})).join(" ")},e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.match.js"),e("core-js/modules/es.array.join.js"),e("core-js/modules/es.array.map.js")},{"core-js/modules/es.array.join.js":868,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.regexp.exec.js":910,"core-js/modules/es.string.match.js":920}],1094:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.fetchPages=function(){return d.apply(this,arguments)},n.getProjectData=p;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.for-each.js"),e("core-js/modules/web.dom-collections.for-each.js"),e("core-js/modules/es.object.entries.js"),e("core-js/modules/es.object.to-string.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.timers.js"),e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.filter.js"),e("core-js/modules/es.array.concat.js");var i=r(e("@babel/runtime/helpers/slicedToArray")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=e("../components/sidebar-animation/constants"),l=e("../../assets/js/helpers/getPageContent"),c=e("../../assets/js/editor/factory/company"),u=e("./abort-handler");function d(){return(d=(0,s.default)(o.default.mark((function e(){var t,n,r,i,s,a,l,c,u=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>0&&void 0!==u[0]?u[0]:{},s=i.signal,window.INKIVE){e.next=3;break}return e.abrupt("return",f({signal:s}));case 3:return e.next=5,p({signal:s});case 5:return a=e.sent,l=null==a||null===(t=a.pages)||void 0===t?void 0:t.map((function(e){return e.design_id})),c=(null==a||null===(n=a.metadata)||void 0===n||null===(r=n.animation)||void 0===r?void 0:r.pages)||[],e.abrupt("return",l.filter((function(e){return!!c[e]})).map((function(e,t){return m(l.length,e,c[e],t)})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,s.default)(o.default.mark((function e(){var t,n,r,i,s,a,l,u,d,p,h,m,f=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=t.signal,e.next=3,c.instance.initialize();case 3:return r=INKIVE.C.BOOK_TYPE.TEMPLATE,i=INKIVE.C.BOOK,s=i.book_type,a=i.encodedId,l=c.instance.companyId,u=c.instance.credentials,d=INKIVE.C.API_URL,p=s===r?"templates":"designs",h="".concat(d,"brand/companies/").concat(l,"/").concat(p,"/").concat(a),e.next=11,fetch(h,{signal:n,method:"get",headers:new window.Headers({Authorization:"Basic "+btoa("".concat(u.username,":").concat(u.password))})});case 11:return m=e.sent,e.next=14,m.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n,r){var o=n.animateElementsTogether||!1,s=n.animation||"no_animation",c=n.elementAnimations||{},u=isNaN(n.inOutDuration)?a.defaultInOutDuration:n.inOutDuration,d={entry:u,exit:r===e-1?0:u,scene:isNaN(n.pageDuration)?a.defaultPageDuration:n.pageDuration};return Object.entries(d).forEach((function(e){var t=(0,i.default)(e,2),n=t[0];t[1]<0&&(d[n]=0)})),{pageId:t,svgPromise:(0,l.getPageContentById)(t),animateElementsTogether:o,animation:s,elementAnimations:c,duration:d}}function f(e){var t=e.signal,n='<svg xmlns="http://www.w3.org/2000/svg" id="svgroot" xlinkns="http://www.w3.org/1999/xlink" width="520" height="531.8040621266427" x="0" y="0" overflow="visible">\n  <defs>\n    <clipPath id="clip_canvas">\n      <rect class="canvasCliper" x="0" y="0" width="400" height="400">\n      </rect>\n    </clipPath>\n    <pattern id="transparencypattern" patternUnits="userSpaceOnUse" x="10" y="10" width="20" height="20">\n      <rect fill="#DDD" stroke="none" x="0" y="0" width="10" height="10">\n      </rect>\n      <rect fill="#DDD" stroke="none" x="10" y="10" width="10" height="10">\n      </rect>\n    </pattern>\n    <symbol id="arrow">\n      <g xmlns="http://www.w3.org/2000/svg" fill="#888" width="98" height="95.33">\n        <circle fill="none" cx="48.679" cy="46.526" r="37.821">\n        </circle>\n      </g>\n    </symbol>\n    <pattern id="gridpattern" patternUnits="userSpaceOnUse" x="241" y="241" width="80.48076923076923" height="80.48076923076923">\n      <image x="0" y="0" width="80.48076923076923" height="80.48076923076923" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAAAgBJREFUeF7tnLFKA0EURW/+Qu0Fezt7S7/W0t7OxkqwVmz8AhsZXEEsxMy98HZ4J00Skscul9kzZ95scpB0LelOX48LSefb6++nJ0nPf3z+Lum+a/3hV1i8PTKBRIBnkl6PPO7Pry9dPwIcl+24TGcfl5IeZoslLV0/AryRdGsEcCLprWt9IkAju/VLEwEuzTBJ1vknAlyaYS6DR4DD+749b+aaas/AmdCo2RLAAwMMxAMNj01MIu0Z6Ip0ax4mRqDlUa6HVdcnAmzvgVdbP2+MpFNJL9va9r/vPyQ9biOhXX1CY9oz0A2gPQPxQDywrh+ZmIVdBCxdnwiwPQPdlUh7D6QfaOzp4IEmgRMBtmcgHogH4oEmierK8cDAnggeaDKQfqDRz0xoTB2AdnDkRIB4IPcHzt/fmJiF2Rc2b7DcAYnqTiExAtszEA80PZB+IP3AWga6R2/PQPqBJgPdSQQPxAPnKYYH0g+s/a3dGIH0A+kHzjPMraQfGGAgHogHsi/soqisHg8MMNBdynF/IL8XnmdoQmPK+LOHAycCpB/IvjD7wmX/W5PQmD2gqOwcEgG2ZyAeaK6F6QfSDyxDoPDAwFqYfqDJQHcSYV+YfeF5huKBAQa6lzD9QPqB9APnIWZW4oEBBuKBeOA8wyRZHpvQGJMia5cnAqQfaK5EWnvgJ5A1w3muAtt+AAAAAElFTkSuQmCC">\n      </image>\n    </pattern>\n  </defs>\n  <svg id="canvasBackground" width="400" height="400" x="60" y="65.90203106332137" overflow="none" style="pointer-events:none">\n    <rect class="background" width="100%" height="100%" x="0" y="0" stroke-width="1" fill="url(#transparencypattern)" style="pointer-events:none">\n    </rect>\n  </svg>\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="dw-141 dh-141 du-mm" data-bleed-size="4 4 4 4" data-bleed-type="auto" data-bleed-unit="mm" height="400" width="400" id="svgcontent" overflow="visible" x="60" y="65.90203106332137">\n    <defs>\n      <clipPath id="clip_svg_4">\n        <rect class="layoutClipper" height="213.33333" id="svg_3" width="320" x="40" y="93">\n        </rect>\n      </clipPath>\n      <clipPath id="clip_svg_11">\n        <rect class="layoutClipper" height="141.39808" id="svg_10" stroke-width="0" width="211.47147" x="94.26428" y="233.85919">\n        </rect>\n      </clipPath>\n    </defs>\n    <g class="background" style="pointer-events:none">\n      <rect class="element" fill="#ffffff" height="100%" id="svg_background_color" width="100%" x="0" y="0">\n      </rect>\n      <title>\n        Background\n      </title>\n    </g>\n    <g class="main" style="pointer-events:all" clip-path="url(#clip_canvas)">\n      <a id="svg_227" class="element video layoutBox quick-delete selected" xlink:href="https://static.desygner.com/virginia/company/videosoriginal/qqqeerqewteuiur/ezgif.com-gif-maker-1.mp4" data-duration="1800" data-video-type="mp4" from-library="true">\n        <image x="96.77519369125366" y="21.798446655273438" id="svg_228" width="200" height="200" xlink:href="https://static.desygner.com/virginia/company/original/external/video/3936/c23ca09eaca647e/ezgif.comgifmaker1.jpg">\n        </image>\n        <path id="svg_229" d="M196.77519369125366,121.79844665527344 L196.77519369125366,121.79844665527344 z" fill="#FFFFFF">\n        </path>\n        <g data-sanitize="ignore">\n          <foreignObject x="96.77519369125366" y="21.798446655273438" width="200" height="200">\n            <video crossorigin="*" preload="metadata" width="200" height="200">\n              <source src="https://static.desygner.com/virginia/company/videosoriginal/qqqeerqewteuiur/ezgif.com-gif-maker-1.mp4">\n              </source>\n            </video>\n          </foreignObject>\n        </g>\n        <image class="layoutBox element quick-delete" clip-path="url(#clip_svg_11)" height="141.39808" id="svg_11" width="211.47147" x="94.26427" y="233.85919" xlink:href="https://static.desygner.com/virginia/mobile/2420864937342534745/image/2931360/82f606d567c4070/gatekeeperW3siZCI6ICJzaHV0dGVyc3RvY2stbWVkaWEiLCAiayI6ICJwaG90by8xODg4MzA2ODgvbWVkaXVtLmpwZyIsICJxIjogInNodXR0ZXJzdG9jay1kb3dubG9hZC11dWl.jpg">\n          94.264283 233.859192 211.471467 141.398087\n        </image>\n        <title>\n          Right-click for more options\n        </title>\n      </a>\n    </g>\n  </svg>\n</svg>';return[{pageId:"0",svgPromise:(0,u.abortHandler)({signal:t},(function(){return new Promise((function(e){setTimeout((function(){return e((0,l.cleanSvg)(n))}),1e3)}))}))(),animateElementsTogether:!1,animation:"fade_in",elementAnimations:[],duration:{entry:1e3,exit:1e3,scene:2e3}},{pageId:"1",svgPromise:(0,u.abortHandler)({signal:t},(function(){return new Promise((function(e){setTimeout((function(){return e((0,l.cleanSvg)(n))}),1e3)}))}))(),animateElementsTogether:!1,animation:"fade_in",elementAnimations:[],duration:{entry:1e3,exit:0,scene:2e3}}]}},{"../../assets/js/editor/factory/company":122,"../../assets/js/helpers/getPageContent":638,"../components/sidebar-animation/constants":1081,"./abort-handler":1091,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/helpers/slicedToArray":674,"@babel/runtime/regenerator":682,"core-js/modules/es.array.concat.js":854,"core-js/modules/es.array.filter.js":857,"core-js/modules/es.array.for-each.js":862,"core-js/modules/es.array.map.js":870,"core-js/modules/es.object.define-property.js":895,"core-js/modules/es.object.entries.js":896,"core-js/modules/es.object.to-string.js":902,"core-js/modules/es.promise.js":907,"core-js/modules/web.dom-collections.for-each.js":964,"core-js/modules/web.timers.js":966}],1095:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date(0),n=e<0,r=n?"-":"",o=Math.round(n?-1*e:e);return t.setSeconds(o),r+t.toISOString().substr(14,5)},e("core-js/modules/es.date.to-string.js"),e("core-js/modules/es.date.to-iso-string.js")},{"core-js/modules/es.date.to-iso-string.js":880,"core-js/modules/es.date.to-string.js":882,"core-js/modules/es.object.define-property.js":895}],1096:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=document.createElement("div");t.setAttribute("style","position:absolute; visibility:hidden; width:0; height:0");var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(e.cloneNode(!0)),t.appendChild(n),document.body.appendChild(t);var r=e.getBBox.apply(n);return document.body.removeChild(t),r}},{"core-js/modules/es.object.define-property.js":895}],1097:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i=(0,o.getInlineSize)(e),s=i.width,a=i.height,l=i.unit,c=Number(e.getAttribute("width")),u=Number(e.getAttribute("height")),d=t||(0,r.convertUnitsToPixels)(s,l,1,300)||c,p=n||(0,r.convertUnitsToPixels)(a,l,1,300)||u,h=Math.min(d/c,p/u);return d=Math.floor(c*h),p=Math.floor(u*h),{sourceWidth:c,sourceHeight:u,destinationWidth:d,destinationHeight:p}},e("core-js/modules/es.number.constructor.js");var r=e("../../assets/js/helpers/convert-units-to-pixels"),o=e("../../assets/js/helpers/get-inline-size")},{"../../assets/js/helpers/convert-units-to-pixels":630,"../../assets/js/helpers/get-inline-size":637,"core-js/modules/es.number.constructor.js":886,"core-js/modules/es.object.define-property.js":895}],1098:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"convertSvgTransformToCss",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"formatSeconds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"getBBox",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"getPageDimensions",{enumerable:!0,get:function(){return a.default}});var o=r(e("./convert-svg-transform-to-css")),i=r(e("./format-seconds")),s=r(e("./get-bbox")),a=r(e("./get-page-dimensions"))},{"./convert-svg-transform-to-css":1093,"./format-seconds":1095,"./get-bbox":1096,"./get-page-dimensions":1097,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1099:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./top-bar")).default;n.default=o},{"./top-bar":1100,"@babel/runtime/helpers/interopRequireDefault":663,"core-js/modules/es.object.define-property.js":895}],1100:[function(e,t,n){"use strict";e("core-js/modules/es.object.define-property.js");var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@babel/runtime/regenerator"));e("core-js/modules/es.array.map.js"),e("core-js/modules/es.array.some.js");var i=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("../../components/animation-modal")),c=e("../../components/sidebar-animation/animation-events"),u=e("../../helpers/fetch-pages"),d=function(){function e(t,n){(0,s.default)(this,e),this.attachPoint=t,this.previewAnimationsButton=n,this.animationModal=new l.default}var t;return(0,a.default)(e,[{key:"initAnimationModal",value:(t=(0,i.default)(o.default.mark((function e(){var t,n,r,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=(0,i.default)(o.default.mark((function e(){var t,n,r,i,s,a,l,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new AbortController,e.next=3,(0,u.getProjectData)({signal:i.signal});case 3:return s=e.sent,a=(null==s||null===(t=s.pages)||void 0===t?void 0:t.map((function(e){return e.design_id})))||[],l=(null==s||null===(n=s.metadata)||void 0===n||null===(r=n.animation)||void 0===r?void 0:r.pages)||[],c=a.length>0,d=!!a.map((function(e){return l[e]})).some((function(e){return e})),e.abrupt("return",c&&d);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.previewAnimationsButton.classList.remove("hidden");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){(0,c.addAnimationEvent)("pageSetProperties",n),s.previewAnimationsButton.addEventListener("click",(function(){s.animationModal.displayModal()}))},!s.attachPoint.querySelector(l.default.selector)&&s.attachPoint.append(s.animationModal.component),r(),e.next=8,t();case 8:e.sent&&n();case 10:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();n.default=d},{"../../components/animation-modal":1068,"../../components/sidebar-animation/animation-events":1078,"../../helpers/fetch-pages":1094,"@babel/runtime/helpers/asyncToGenerator":655,"@babel/runtime/helpers/classCallCheck":656,"@babel/runtime/helpers/createClass":658,"@babel/runtime/helpers/interopRequireDefault":663,"@babel/runtime/regenerator":682,"core-js/modules/es.array.map.js":870,"core-js/modules/es.array.some.js":875,"core-js/modules/es.object.define-property.js":895}]},{},[168]);
